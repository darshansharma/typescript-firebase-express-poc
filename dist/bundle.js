/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "dist";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/client/app.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/@firebase/app/dist/esm/index.js":
/*!******************************************************!*\
  !*** ./node_modules/@firebase/app/dist/esm/index.js ***!
  \******************************************************/
/*! exports provided: firebase, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "firebase", function() { return firebase; });
/* harmony import */ var _src_firebaseApp__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/firebaseApp */ "./node_modules/@firebase/app/dist/esm/src/firebaseApp.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var firebase = Object(_src_firebaseApp__WEBPACK_IMPORTED_MODULE_0__["createFirebaseNamespace"])();
/* harmony default export */ __webpack_exports__["default"] = (firebase);




/***/ }),

/***/ "./node_modules/@firebase/app/dist/esm/src/firebaseApp.js":
/*!****************************************************************!*\
  !*** ./node_modules/@firebase/app/dist/esm/src/firebaseApp.js ***!
  \****************************************************************/
/*! exports provided: createFirebaseNamespace */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createFirebaseNamespace", function() { return createFirebaseNamespace; });
/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_firebase_util__WEBPACK_IMPORTED_MODULE_0__);
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


var contains = function (obj, key) {
    return Object.prototype.hasOwnProperty.call(obj, key);
};
var DEFAULT_ENTRY_NAME = '[DEFAULT]';
// An array to capture listeners before the true auth functions
// exist
var tokenListeners = [];
/**
 * Global context object for a collection of services using
 * a shared authentication state.
 */
var FirebaseAppImpl = /** @class */ (function () {
    function FirebaseAppImpl(options, name, firebase_) {
        this.firebase_ = firebase_;
        this.isDeleted_ = false;
        this.services_ = {};
        this.name_ = name;
        this.options_ = Object(_firebase_util__WEBPACK_IMPORTED_MODULE_0__["deepCopy"])(options);
        this.INTERNAL = {
            getUid: function () { return null; },
            getToken: function () { return Promise.resolve(null); },
            addAuthTokenListener: function (callback) {
                tokenListeners.push(callback);
                // Make sure callback is called, asynchronously, in the absence of the auth module
                setTimeout(function () { return callback(null); }, 0);
            },
            removeAuthTokenListener: function (callback) {
                tokenListeners = tokenListeners.filter(function (listener) { return listener !== callback; });
            }
        };
    }
    Object.defineProperty(FirebaseAppImpl.prototype, "name", {
        get: function () {
            this.checkDestroyed_();
            return this.name_;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FirebaseAppImpl.prototype, "options", {
        get: function () {
            this.checkDestroyed_();
            return this.options_;
        },
        enumerable: true,
        configurable: true
    });
    FirebaseAppImpl.prototype.delete = function () {
        var _this = this;
        return new Promise(function (resolve) {
            _this.checkDestroyed_();
            resolve();
        })
            .then(function () {
            _this.firebase_.INTERNAL.removeApp(_this.name_);
            var services = [];
            Object.keys(_this.services_).forEach(function (serviceKey) {
                Object.keys(_this.services_[serviceKey]).forEach(function (instanceKey) {
                    services.push(_this.services_[serviceKey][instanceKey]);
                });
            });
            return Promise.all(services.map(function (service) {
                return service.INTERNAL.delete();
            }));
        })
            .then(function () {
            _this.isDeleted_ = true;
            _this.services_ = {};
        });
    };
    /**
     * Return a service instance associated with this app (creating it
     * on demand), identified by the passed instanceIdentifier.
     *
     * NOTE: Currently storage is the only one that is leveraging this
     * functionality. They invoke it by calling:
     *
     * ```javascript
     * firebase.app().storage('STORAGE BUCKET ID')
     * ```
     *
     * The service name is passed to this already
     * @internal
     */
    FirebaseAppImpl.prototype._getService = function (name, instanceIdentifier) {
        if (instanceIdentifier === void 0) { instanceIdentifier = DEFAULT_ENTRY_NAME; }
        this.checkDestroyed_();
        if (!this.services_[name]) {
            this.services_[name] = {};
        }
        if (!this.services_[name][instanceIdentifier]) {
            /**
             * If a custom instance has been defined (i.e. not '[DEFAULT]')
             * then we will pass that instance on, otherwise we pass `null`
             */
            var instanceSpecifier = instanceIdentifier !== DEFAULT_ENTRY_NAME
                ? instanceIdentifier
                : undefined;
            var service = this.firebase_.INTERNAL.factories[name](this, this.extendApp.bind(this), instanceSpecifier);
            this.services_[name][instanceIdentifier] = service;
        }
        return this.services_[name][instanceIdentifier];
    };
    /**
     * Callback function used to extend an App instance at the time
     * of service instance creation.
     */
    FirebaseAppImpl.prototype.extendApp = function (props) {
        var _this = this;
        // Copy the object onto the FirebaseAppImpl prototype
        Object(_firebase_util__WEBPACK_IMPORTED_MODULE_0__["deepExtend"])(this, props);
        /**
         * If the app has overwritten the addAuthTokenListener stub, forward
         * the active token listeners on to the true fxn.
         *
         * TODO: This function is required due to our current module
         * structure. Once we are able to rely strictly upon a single module
         * implementation, this code should be refactored and Auth should
         * provide these stubs and the upgrade logic
         */
        if (props.INTERNAL && props.INTERNAL.addAuthTokenListener) {
            tokenListeners.forEach(function (listener) {
                _this.INTERNAL.addAuthTokenListener(listener);
            });
            tokenListeners = [];
        }
    };
    /**
     * This function will throw an Error if the App has already been deleted -
     * use before performing API actions on the App.
     */
    FirebaseAppImpl.prototype.checkDestroyed_ = function () {
        if (this.isDeleted_) {
            error('app-deleted', { name: this.name_ });
        }
    };
    return FirebaseAppImpl;
}());
// Prevent dead-code elimination of these methods w/o invalid property
// copying.
(FirebaseAppImpl.prototype.name && FirebaseAppImpl.prototype.options) ||
    FirebaseAppImpl.prototype.delete ||
    console.log('dc');
/**
 * Return a firebase namespace object.
 *
 * In production, this will be called exactly once and the result
 * assigned to the 'firebase' global.  It may be called multiple times
 * in unit tests.
 */
function createFirebaseNamespace() {
    var apps_ = {};
    var factories = {};
    var appHooks = {};
    // A namespace is a plain JavaScript Object.
    var namespace = {
        // Hack to prevent Babel from modifying the object returned
        // as the firebase namespace.
        __esModule: true,
        initializeApp: initializeApp,
        app: app,
        apps: null,
        Promise: Promise,
        SDK_VERSION: '4.8.0',
        INTERNAL: {
            registerService: registerService,
            createFirebaseNamespace: createFirebaseNamespace,
            extendNamespace: extendNamespace,
            createSubscribe: _firebase_util__WEBPACK_IMPORTED_MODULE_0__["createSubscribe"],
            ErrorFactory: _firebase_util__WEBPACK_IMPORTED_MODULE_0__["ErrorFactory"],
            removeApp: removeApp,
            factories: factories,
            useAsService: useAsService,
            Promise: Promise,
            deepExtend: _firebase_util__WEBPACK_IMPORTED_MODULE_0__["deepExtend"]
        }
    };
    // Inject a circular default export to allow Babel users who were previously
    // using:
    //
    //   import firebase from 'firebase';
    //   which becomes: var firebase = require('firebase').default;
    //
    // instead of
    //
    //   import * as firebase from 'firebase';
    //   which becomes: var firebase = require('firebase');
    Object(_firebase_util__WEBPACK_IMPORTED_MODULE_0__["patchProperty"])(namespace, 'default', namespace);
    // firebase.apps is a read-only getter.
    Object.defineProperty(namespace, 'apps', {
        get: getApps
    });
    /**
     * Called by App.delete() - but before any services associated with the App
     * are deleted.
     */
    function removeApp(name) {
        var app = apps_[name];
        callAppHooks(app, 'delete');
        delete apps_[name];
    }
    /**
     * Get the App object for a given name (or DEFAULT).
     */
    function app(name) {
        name = name || DEFAULT_ENTRY_NAME;
        if (!contains(apps_, name)) {
            error('no-app', { name: name });
        }
        return apps_[name];
    }
    Object(_firebase_util__WEBPACK_IMPORTED_MODULE_0__["patchProperty"])(app, 'App', FirebaseAppImpl);
    /**
     * Create a new App instance (name must be unique).
     */
    function initializeApp(options, name) {
        if (name === undefined) {
            name = DEFAULT_ENTRY_NAME;
        }
        else {
            if (typeof name !== 'string' || name === '') {
                error('bad-app-name', { name: name + '' });
            }
        }
        if (contains(apps_, name)) {
            error('duplicate-app', { name: name });
        }
        var app = new FirebaseAppImpl(options, name, namespace);
        apps_[name] = app;
        callAppHooks(app, 'create');
        return app;
    }
    /*
     * Return an array of all the non-deleted FirebaseApps.
     */
    function getApps() {
        // Make a copy so caller cannot mutate the apps list.
        return Object.keys(apps_).map(function (name) { return apps_[name]; });
    }
    /*
     * Register a Firebase Service.
     *
     * firebase.INTERNAL.registerService()
     *
     * TODO: Implement serviceProperties.
     */
    function registerService(name, createService, serviceProperties, appHook, allowMultipleInstances) {
        // Cannot re-register a service that already exists
        if (factories[name]) {
            error('duplicate-service', { name: name });
        }
        // Capture the service factory for later service instantiation
        factories[name] = createService;
        // Capture the appHook, if passed
        if (appHook) {
            appHooks[name] = appHook;
            // Run the **new** app hook on all existing apps
            getApps().forEach(function (app) {
                appHook('create', app);
            });
        }
        // The Service namespace is an accessor function ...
        var serviceNamespace = function (appArg) {
            if (appArg === void 0) { appArg = app(); }
            if (typeof appArg[name] !== 'function') {
                // Invalid argument.
                // This happens in the following case: firebase.storage('gs:/')
                error('invalid-app-argument', { name: name });
            }
            // Forward service instance lookup to the FirebaseApp.
            return appArg[name]();
        };
        // ... and a container for service-level properties.
        if (serviceProperties !== undefined) {
            Object(_firebase_util__WEBPACK_IMPORTED_MODULE_0__["deepExtend"])(serviceNamespace, serviceProperties);
        }
        // Monkey-patch the serviceNamespace onto the firebase namespace
        namespace[name] = serviceNamespace;
        // Patch the FirebaseAppImpl prototype
        FirebaseAppImpl.prototype[name] = function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            var serviceFxn = this._getService.bind(this, name);
            return serviceFxn.apply(this, allowMultipleInstances ? args : []);
        };
        return serviceNamespace;
    }
    /**
     * Patch the top-level firebase namespace with additional properties.
     *
     * firebase.INTERNAL.extendNamespace()
     */
    function extendNamespace(props) {
        Object(_firebase_util__WEBPACK_IMPORTED_MODULE_0__["deepExtend"])(namespace, props);
    }
    function callAppHooks(app, eventName) {
        Object.keys(factories).forEach(function (serviceName) {
            // Ignore virtual services
            var factoryName = useAsService(app, serviceName);
            if (factoryName === null) {
                return;
            }
            if (appHooks[factoryName]) {
                appHooks[factoryName](eventName, app);
            }
        });
    }
    // Map the requested service to a registered service name
    // (used to map auth to serverAuth service when needed).
    function useAsService(app, name) {
        if (name === 'serverAuth') {
            return null;
        }
        var useService = name;
        var options = app.options;
        return useService;
    }
    return namespace;
}
function error(code, args) {
    throw appErrors.create(code, args);
}
// TypeScript does not support non-string indexes!
// let errors: {[code: AppError: string} = {
var errors = {
    'no-app': "No Firebase App '{$name}' has been created - " +
        'call Firebase App.initializeApp()',
    'bad-app-name': "Illegal App name: '{$name}",
    'duplicate-app': "Firebase App named '{$name}' already exists",
    'app-deleted': "Firebase App named '{$name}' already deleted",
    'duplicate-service': "Firebase service named '{$name}' already registered",
    'sa-not-supported': 'Initializing the Firebase SDK with a service ' +
        'account is only allowed in a Node.js environment. On client ' +
        'devices, you should instead initialize the SDK with an api key and ' +
        'auth domain',
    'invalid-app-argument': 'firebase.{$name}() takes either no argument or a ' +
        'Firebase App instance.'
};
var appErrors = new _firebase_util__WEBPACK_IMPORTED_MODULE_0__["ErrorFactory"]('app', 'Firebase', errors);




/***/ }),

/***/ "./node_modules/@firebase/auth/dist/auth.js":
/*!**************************************************!*\
  !*** ./node_modules/@firebase/auth/dist/auth.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {(function() {
  var firebase = __webpack_require__(/*! @firebase/app */ "./node_modules/@firebase/app/dist/esm/index.js").default;
  var h,aa=aa||{},k=this;function m(a){return"string"==typeof a}function ba(a){return"boolean"==typeof a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return null===a}function fa(a){return"array"==da(a)}function ha(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function p(a){return"function"==da(a)}function q(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var ia="closure_uid_"+(1E9*Math.random()>>>0),ja=0;function ka(a,b,c){return a.call.apply(a.bind,arguments)}
function la(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function r(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?r=ka:r=la;return r.apply(null,arguments)}
function ma(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var na=Date.now||function(){return+new Date};function t(a,b){function c(){}c.prototype=b.prototype;a.ib=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Rc=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function u(a){if(Error.captureStackTrace)Error.captureStackTrace(this,u);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(u,Error);u.prototype.name="CustomError";function oa(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}var pa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function qa(a){if(!ra.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(sa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(ta,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ua,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(va,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(wa,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(xa,"&#0;"));return a}var sa=/&/g,ta=/</g,ua=/>/g,va=/"/g,wa=/'/g,xa=/\x00/g,ra=/[\x00&<>"']/;function v(a,b){return-1!=a.indexOf(b)}function ya(a,b){return a<b?-1:a>b?1:0};function za(a,b){b.unshift(a);u.call(this,oa.apply(null,b));b.shift()}t(za,u);za.prototype.name="AssertionError";function Aa(a,b){throw new za("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var Ba=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(m(a))return m(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},w=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=m(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};
function Ca(a,b){var c=a.length,d=m(a)?a.split(""):a;for(--c;0<=c;--c)c in d&&b.call(void 0,d[c],c,a)}var Da=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=m(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Ea=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=m(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Fa(a){a:{var b=Ga;for(var c=a.length,d=m(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:m(a)?a.charAt(b):a[b]}function Ha(a,b){return 0<=Ba(a,b)}function Ia(a,b){b=Ba(a,b);var c;(c=0<=b)&&Array.prototype.splice.call(a,b,1);return c}function Ja(a,b){var c=0;Ca(a,function(d,e){b.call(void 0,d,e,a)&&1==Array.prototype.splice.call(a,e,1).length&&c++})}function Ka(a){return Array.prototype.concat.apply([],arguments)}
function La(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]};var Ma;a:{var Na=k.navigator;if(Na){var Oa=Na.userAgent;if(Oa){Ma=Oa;break a}}Ma=""}function x(a){return v(Ma,a)};function Pa(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function Qa(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Ra(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Sa(a){for(var b in a)return!1;return!0}function Ta(a,b){for(var c in a)if(!(c in b)||a[c]!==b[c])return!1;for(c in b)if(!(c in a))return!1;return!0}function Ua(a){var b={},c;for(c in a)b[c]=a[c];return b}var Va="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Wa(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Va.length;f++)c=Va[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Xa(a){Xa[" "](a);return a}Xa[" "]=ca;function Ya(a,b){var c=Za;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var $a=x("Opera"),y=x("Trident")||x("MSIE"),ab=x("Edge"),bb=ab||y,cb=x("Gecko")&&!(v(Ma.toLowerCase(),"webkit")&&!x("Edge"))&&!(x("Trident")||x("MSIE"))&&!x("Edge"),db=v(Ma.toLowerCase(),"webkit")&&!x("Edge");function eb(){var a=k.document;return a?a.documentMode:void 0}var fb;
a:{var gb="",hb=function(){var a=Ma;if(cb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(ab)return/Edge\/([\d\.]+)/.exec(a);if(y)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(db)return/WebKit\/(\S+)/.exec(a);if($a)return/(?:Version)[ \/]?(\S+)/.exec(a)}();hb&&(gb=hb?hb[1]:"");if(y){var ib=eb();if(null!=ib&&ib>parseFloat(gb)){fb=String(ib);break a}}fb=gb}var Za={};
function jb(a){return Ya(a,function(){for(var b=0,c=pa(String(fb)).split("."),d=pa(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",l=d[f]||"";do{g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""];l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""];if(0==g[0].length&&0==l[0].length)break;b=ya(0==g[1].length?0:parseInt(g[1],10),0==l[1].length?0:parseInt(l[1],10))||ya(0==g[2].length,0==l[2].length)||ya(g[2],l[2]);g=g[3];l=l[3]}while(0==b)}return 0<=b})}var kb;var lb=k.document;
kb=lb&&y?eb()||("CSS1Compat"==lb.compatMode?parseInt(fb,10):5):void 0;function mb(a){a.prototype.then=a.prototype.then;a.prototype.$goog_Thenable=!0}function nb(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}};function ob(a,b,c){this.f=c;this.c=a;this.g=b;this.b=0;this.a=null}ob.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next;a.next=null}else a=this.c();return a};function pb(a,b){a.g(b);a.b<a.f&&(a.b++,b.next=a.a,a.a=b)};var rb=new ob(function(){return new qb},function(a){a.reset()},100);function sb(){var a=tb,b=null;a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null);return b}function qb(){this.next=this.b=this.a=null}qb.prototype.set=function(a,b){this.a=a;this.b=b;this.next=null};qb.prototype.reset=function(){this.next=this.b=this.a=null};function ub(a){k.setTimeout(function(){throw a;},0)}var wb;
function xb(){var a=k.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!x("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow;a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host;a=r(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!x("Trident")&&!x("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var a=c.pb;c.pb=null;a()}};return function(a){d.next={pb:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){k.setTimeout(a,0)}};function yb(a,b){zb||Ab();Bb||(zb(),Bb=!0);var c=tb,d=rb.get();d.set(a,b);c.b?c.b.next=d:c.a=d;c.b=d}var zb;function Ab(){if(-1!=String(k.Promise).indexOf("[native code]")){var a=k.Promise.resolve(void 0);zb=function(){a.then(Cb)}}else zb=function(){var a=Cb;!p(k.setImmediate)||k.Window&&k.Window.prototype&&!x("Edge")&&k.Window.prototype.setImmediate==k.setImmediate?(wb||(wb=xb()),wb(a)):k.setImmediate(a)}}var Bb=!1,tb=new function(){this.b=this.a=null};
function Cb(){for(var a;a=sb();){try{a.a.call(a.b)}catch(b){ub(b)}pb(rb,a)}Bb=!1};function z(a,b){this.a=Db;this.i=void 0;this.f=this.b=this.c=null;this.g=this.h=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Eb(c,Fb,a)},function(a){if(!(a instanceof Gb))try{if(a instanceof Error)throw a;throw Error("Promise rejected.");}catch(e){}Eb(c,Hb,a)})}catch(d){Eb(this,Hb,d)}}var Db=0,Fb=2,Hb=3;function Ib(){this.next=this.f=this.b=this.g=this.a=null;this.c=!1}Ib.prototype.reset=function(){this.f=this.b=this.g=this.a=null;this.c=!1};
var Jb=new ob(function(){return new Ib},function(a){a.reset()},100);function Kb(a,b,c){var d=Jb.get();d.g=a;d.b=b;d.f=c;return d}function A(a){if(a instanceof z)return a;var b=new z(ca);Eb(b,Fb,a);return b}function B(a){return new z(function(b,c){c(a)})}function Lb(a,b,c){Mb(a,b,c,null)||yb(ma(b,a))}function Nb(a){return new z(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},g=function(a){c(a)},l=0,n;l<a.length;l++)n=a[l],Lb(n,ma(f,l),g);else b(e)})}
function Ob(a){return new z(function(b){var c=a.length,d=[];if(c)for(var e=function(a,e,f){c--;d[a]=e?{Ub:!0,value:f}:{Ub:!1,reason:f};0==c&&b(d)},f=0,g;f<a.length;f++)g=a[f],Lb(g,ma(e,f,!0),ma(e,f,!1));else b(d)})}z.prototype.then=function(a,b,c){return Pb(this,p(a)?a:null,p(b)?b:null,c)};mb(z);function Qb(a,b){b=Kb(b,b,void 0);b.c=!0;Rb(a,b);return a}h=z.prototype;h.s=function(a,b){return Pb(this,null,a,b)};h.cancel=function(a){this.a==Db&&yb(function(){var b=new Gb(a);Sb(this,b)},this)};
function Sb(a,b){if(a.a==Db)if(a.c){var c=a.c;if(c.b){for(var d=0,e=null,f=null,g=c.b;g&&(g.c||(d++,g.a==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.a==Db&&1==d?Sb(c,b):(f?(d=f,d.next==c.f&&(c.f=d),d.next=d.next.next):Tb(c),Ub(c,e,Hb,b)))}a.c=null}else Eb(a,Hb,b)}function Rb(a,b){a.b||a.a!=Fb&&a.a!=Hb||Vb(a);a.f?a.f.next=b:a.b=b;a.f=b}
function Pb(a,b,c,d){var e=Kb(null,null,null);e.a=new z(function(a,g){e.g=b?function(c){try{var e=b.call(d,c);a(e)}catch(D){g(D)}}:a;e.b=c?function(b){try{var e=c.call(d,b);void 0===e&&b instanceof Gb?g(b):a(e)}catch(D){g(D)}}:g});e.a.c=a;Rb(a,e);return e.a}h.Ac=function(a){this.a=Db;Eb(this,Fb,a)};h.Bc=function(a){this.a=Db;Eb(this,Hb,a)};
function Eb(a,b,c){a.a==Db&&(a===c&&(b=Hb,c=new TypeError("Promise cannot resolve to itself")),a.a=1,Mb(c,a.Ac,a.Bc,a)||(a.i=c,a.a=b,a.c=null,Vb(a),b!=Hb||c instanceof Gb||Wb(a,c)))}function Mb(a,b,c,d){if(a instanceof z)return Rb(a,Kb(b||ca,c||null,d)),!0;if(nb(a))return a.then(b,c,d),!0;if(q(a))try{var e=a.then;if(p(e))return Xb(a,e,b,c,d),!0}catch(f){return c.call(d,f),!0}return!1}
function Xb(a,b,c,d,e){function f(a){l||(l=!0,d.call(e,a))}function g(a){l||(l=!0,c.call(e,a))}var l=!1;try{b.call(a,g,f)}catch(n){f(n)}}function Vb(a){a.h||(a.h=!0,yb(a.Qb,a))}function Tb(a){var b=null;a.b&&(b=a.b,a.b=b.next,b.next=null);a.b||(a.f=null);return b}h.Qb=function(){for(var a;a=Tb(this);)Ub(this,a,this.a,this.i);this.h=!1};
function Ub(a,b,c,d){if(c==Hb&&b.b&&!b.c)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,Yb(b,c,d);else try{b.c?b.g.call(b.f):Yb(b,c,d)}catch(e){Zb.call(null,e)}pb(Jb,b)}function Yb(a,b,c){b==Fb?a.g.call(a.f,c):a.b&&a.b.call(a.f,c)}function Wb(a,b){a.g=!0;yb(function(){a.g&&Zb.call(null,b)})}var Zb=ub;function Gb(a){u.call(this,a)}t(Gb,u);Gb.prototype.name="cancel";var $b=!y||9<=Number(kb);function ac(){this.a="";this.b=bc}ac.prototype.la=!0;ac.prototype.ja=function(){return this.a};ac.prototype.toString=function(){return"Const{"+this.a+"}"};function cc(a){if(a instanceof ac&&a.constructor===ac&&a.b===bc)return a.a;Aa("expected object of type Const, got '"+a+"'");return"type_error:Const"}var bc={};function dc(a){var b=new ac;b.a=a;return b}dc("");function ec(){this.a="";this.b=fc}ec.prototype.la=!0;ec.prototype.ja=function(){return this.a};ec.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function gc(a){if(a instanceof ec&&a.constructor===ec&&a.b===fc)return a.a;Aa("expected object of type TrustedResourceUrl, got '"+a+"' of type "+da(a));return"type_error:TrustedResourceUrl"}function hc(a,b){a=ic(a,b);b=new ec;b.a=a;return b}
function ic(a,b){var c=cc(a);if(!jc.test(c))throw Error("Invalid TrustedResourceUrl format: "+c);return c.replace(kc,function(a,e){if(!Object.prototype.hasOwnProperty.call(b,e))throw Error('Found marker, "'+e+'", in format string, "'+c+'", but no valid label mapping found in args: '+JSON.stringify(b));a=b[e];return a instanceof ac?cc(a):encodeURIComponent(String(a))})}var kc=/%{(\w+)}/g,jc=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank(#|$)/i,fc={};function lc(){this.a="";this.b=mc}lc.prototype.la=!0;lc.prototype.ja=function(){return this.a};lc.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function nc(a){if(a instanceof lc&&a.constructor===lc&&a.b===mc)return a.a;Aa("expected object of type SafeUrl, got '"+a+"' of type "+da(a));return"type_error:SafeUrl"}var oc=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;
function pc(a){if(a instanceof lc)return a;a=a.la?a.ja():String(a);oc.test(a)||(a="about:invalid#zClosurez");return qc(a)}var mc={};function qc(a){var b=new lc;b.a=a;return b}qc("about:blank");function rc(){this.a="";this.b=sc}rc.prototype.la=!0;rc.prototype.ja=function(){return this.a};rc.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function uc(a){if(a instanceof rc&&a.constructor===rc&&a.b===sc)return a.a;Aa("expected object of type SafeHtml, got '"+a+"' of type "+da(a));return"type_error:SafeHtml"}var sc={};function vc(a){var b=new rc;b.a=a;return b}vc("<!DOCTYPE html>");vc("");vc("<br>");function wc(a){var b=document;return m(a)?b.getElementById(a):a}function xc(a,b){Pa(b,function(b,d){b&&b.la&&(b=b.ja());"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:yc.hasOwnProperty(d)?a.setAttribute(yc[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}
var yc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function zc(a,b,c){var d=arguments,e=document,f=String(d[0]),g=d[1];if(!$b&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',qa(g.name),'"');if(g.type){f.push(' type="',qa(g.type),'"');var l={};Wa(l,g);delete l.type;g=l}f.push(">");f=f.join("")}f=e.createElement(f);g&&(m(g)?f.className=g:fa(g)?f.className=g.join(" "):xc(f,g));2<d.length&&Ac(e,f,d);return f}
function Ac(a,b,c){function d(c){c&&b.appendChild(m(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!ha(f)||q(f)&&0<f.nodeType?d(f):w(Bc(f)?La(f):f,d)}}function Bc(a){if(a&&"number"==typeof a.length){if(q(a))return"function"==typeof a.item||"string"==typeof a.item;if(p(a))return"function"==typeof a.item}return!1};function Cc(a){var b=[];Dc(new Ec,a,b);return b.join("")}function Ec(){}
function Dc(a,b,c){if(null==b)c.push("null");else{if("object"==typeof b){if(fa(b)){var d=b;b=d.length;c.push("[");for(var e="",f=0;f<b;f++)c.push(e),Dc(a,d[f],c),e=",";c.push("]");return}if(b instanceof String||b instanceof Number||b instanceof Boolean)b=b.valueOf();else{c.push("{");e="";for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(f=b[d],"function"!=typeof f&&(c.push(e),Fc(d,c),c.push(":"),Dc(a,f,c),e=","));c.push("}");return}}switch(typeof b){case "string":Fc(b,c);break;case "number":c.push(isFinite(b)&&
!isNaN(b)?String(b):"null");break;case "boolean":c.push(String(b));break;case "function":c.push("null");break;default:throw Error("Unknown type: "+typeof b);}}}var Gc={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},Hc=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function Fc(a,b){b.push('"',a.replace(Hc,function(a){var b=Gc[a];b||(b="\\u"+(a.charCodeAt(0)|65536).toString(16).substr(1),Gc[a]=b);return b}),'"')};function Ic(){0!=Jc&&(Kc[this[ia]||(this[ia]=++ja)]=this);this.oa=this.oa;this.Fa=this.Fa}var Jc=0,Kc={};Ic.prototype.oa=!1;function Lc(a){a.oa||(a.oa=!0,a.ta(),0!=Jc&&(a=a[ia]||(a[ia]=++ja),delete Kc[a]))}Ic.prototype.ta=function(){if(this.Fa)for(;this.Fa.length;)this.Fa.shift()()};var Mc=Object.freeze||function(a){return a};var Nc=!y||9<=Number(kb),Oc=y&&!jb("9"),Pc=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});k.addEventListener("test",ca,b);k.removeEventListener("test",ca,b);return a}();function C(a,b){this.type=a;this.b=this.target=b;this.Bb=!0}C.prototype.c=function(){this.Bb=!1};function Qc(a,b){C.call(this,a?a.type:"");this.relatedTarget=this.b=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.a=null;if(a){var c=this.type=a.type,d=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.b=b;if(b=a.relatedTarget){if(cb){a:{try{Xa(b.nodeName);var e=!0;break a}catch(f){}e=!1}e||(b=null)}}else"mouseover"==c?b=
a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;null===d?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=
a.metaKey;this.pointerId=a.pointerId||0;this.pointerType=m(a.pointerType)?a.pointerType:Rc[a.pointerType]||"";this.a=a;a.defaultPrevented&&this.c()}}t(Qc,C);var Rc=Mc({2:"touch",3:"pen",4:"mouse"});Qc.prototype.c=function(){Qc.ib.c.call(this);var a=this.a;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Oc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};Qc.prototype.g=function(){return this.a};var Sc="closure_listenable_"+(1E6*Math.random()|0),Tc=0;function Uc(a,b,c,d,e){this.listener=a;this.a=null;this.src=b;this.type=c;this.capture=!!d;this.La=e;this.key=++Tc;this.ma=this.Ha=!1}function Vc(a){a.ma=!0;a.listener=null;a.a=null;a.src=null;a.La=null};function Wc(a){this.src=a;this.a={};this.b=0}function Xc(a,b,c,d,e,f){var g=b.toString();b=a.a[g];b||(b=a.a[g]=[],a.b++);var l=Yc(b,c,e,f);-1<l?(a=b[l],d||(a.Ha=!1)):(a=new Uc(c,a.src,g,!!e,f),a.Ha=d,b.push(a));return a}function Zc(a,b){var c=b.type;c in a.a&&Ia(a.a[c],b)&&(Vc(b),0==a.a[c].length&&(delete a.a[c],a.b--))}function Yc(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.ma&&f.listener==b&&f.capture==!!c&&f.La==d)return e}return-1};var $c="closure_lm_"+(1E6*Math.random()|0),ad={},bd=0;function cd(a,b,c,d,e){if(d&&d.once)dd(a,b,c,d,e);else if(fa(b))for(var f=0;f<b.length;f++)cd(a,b[f],c,d,e);else c=ed(c),a&&a[Sc]?fd(a,b,c,q(d)?!!d.capture:!!d,e):gd(a,b,c,!1,d,e)}
function gd(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=q(e)?!!e.capture:!!e,l=hd(a);l||(a[$c]=l=new Wc(a));c=Xc(l,b,c,d,g,f);if(!c.a){d=id();c.a=d;d.src=a;d.listener=c;if(a.addEventListener)Pc||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(jd(b.toString()),d);else throw Error("addEventListener and attachEvent are unavailable.");bd++}}
function id(){var a=kd,b=Nc?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function dd(a,b,c,d,e){if(fa(b))for(var f=0;f<b.length;f++)dd(a,b[f],c,d,e);else c=ed(c),a&&a[Sc]?ld(a,b,c,q(d)?!!d.capture:!!d,e):gd(a,b,c,!0,d,e)}
function E(a,b,c,d,e){if(fa(b))for(var f=0;f<b.length;f++)E(a,b[f],c,d,e);else(d=q(d)?!!d.capture:!!d,c=ed(c),a&&a[Sc])?(a=a.u,b=String(b).toString(),b in a.a&&(f=a.a[b],c=Yc(f,c,d,e),-1<c&&(Vc(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete a.a[b],a.b--)))):a&&(a=hd(a))&&(b=a.a[b.toString()],a=-1,b&&(a=Yc(b,c,d,e)),(c=-1<a?b[a]:null)&&md(c))}
function md(a){if("number"!=typeof a&&a&&!a.ma){var b=a.src;if(b&&b[Sc])Zc(b.u,a);else{var c=a.type,d=a.a;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent&&b.detachEvent(jd(c),d);bd--;(c=hd(b))?(Zc(c,a),0==c.b&&(c.src=null,b[$c]=null)):Vc(a)}}}function jd(a){return a in ad?ad[a]:ad[a]="on"+a}function nd(a,b,c,d){var e=!0;if(a=hd(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.ma&&(f=od(f,d),e=e&&!1!==f)}return e}
function od(a,b){var c=a.listener,d=a.La||a.src;a.Ha&&md(a);return c.call(d,b)}
function kd(a,b){if(a.ma)return!0;if(!Nc){if(!b)a:{b=["window","event"];for(var c=k,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new Qc(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.b;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;0<=e;e--){b.b=d[e];var f=nd(d[e],a,!0,b);c=c&&f}for(e=0;e<d.length;e++)b.b=d[e],f=nd(d[e],a,!1,b),c=c&&f}return c}return od(a,
new Qc(b,this))}function hd(a){a=a[$c];return a instanceof Wc?a:null}var pd="__closure_events_fn_"+(1E9*Math.random()>>>0);function ed(a){if(p(a))return a;a[pd]||(a[pd]=function(b){return a.handleEvent(b)});return a[pd]};function F(){Ic.call(this);this.u=new Wc(this);this.Ib=this;this.Ra=null}t(F,Ic);F.prototype[Sc]=!0;F.prototype.removeEventListener=function(a,b,c,d){E(this,a,b,c,d)};
function G(a,b){var c,d=a.Ra;if(d)for(c=[];d;d=d.Ra)c.push(d);a=a.Ib;d=b.type||b;if(m(b))b=new C(b,a);else if(b instanceof C)b.target=b.target||a;else{var e=b;b=new C(d,a);Wa(b,e)}e=!0;if(c)for(var f=c.length-1;0<=f;f--){var g=b.b=c[f];e=qd(g,d,!0,b)&&e}g=b.b=a;e=qd(g,d,!0,b)&&e;e=qd(g,d,!1,b)&&e;if(c)for(f=0;f<c.length;f++)g=b.b=c[f],e=qd(g,d,!1,b)&&e}
F.prototype.ta=function(){F.ib.ta.call(this);if(this.u){var a=this.u,b=0,c;for(c in a.a){for(var d=a.a[c],e=0;e<d.length;e++)++b,Vc(d[e]);delete a.a[c];a.b--}}this.Ra=null};function fd(a,b,c,d,e){Xc(a.u,String(b),c,!1,d,e)}function ld(a,b,c,d,e){Xc(a.u,String(b),c,!0,d,e)}function qd(a,b,c,d){b=a.u.a[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.ma&&g.capture==c){var l=g.listener,n=g.La||g.src;g.Ha&&Zc(a.u,g);e=!1!==l.call(n,d)&&e}}return e&&0!=d.Bb};function rd(a,b,c){if(p(a))c&&(a=r(a,c));else if(a&&"function"==typeof a.handleEvent)a=r(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:k.setTimeout(a,b||0)}function sd(a){var b=null;return(new z(function(c,d){b=rd(function(){c(void 0)},a);-1==b&&d(Error("Failed to schedule timer."))})).s(function(a){k.clearTimeout(b);throw a;})};function td(a,b,c,d,e){this.reset(a,b,c,d,e)}td.prototype.a=null;var ud=0;td.prototype.reset=function(a,b,c,d,e){"number"==typeof e||ud++;d||na();this.b=b;delete this.a};function vd(a){this.f=a;this.b=this.c=this.a=null}function wd(a,b){this.name=a;this.value=b}wd.prototype.toString=function(){return this.name};var xd=new wd("SEVERE",1E3),yd=new wd("CONFIG",700),zd=new wd("FINE",500);function Ad(a){if(a.c)return a.c;if(a.a)return Ad(a.a);Aa("Root logger has no level set.");return null}
vd.prototype.log=function(a,b,c){if(a.value>=Ad(this).value)for(p(b)&&(b=b()),a=new td(a,String(b),this.f),c&&(a.a=c),c="log:"+a.b,(a=k.console)&&a.timeStamp&&a.timeStamp(c),(a=k.msWriteProfilerMark)&&a(c),c=this;c;)c=c.a};var Bd={},Cd=null;function Dd(a){Cd||(Cd=new vd(""),Bd[""]=Cd,Cd.c=yd);var b;if(!(b=Bd[a])){b=new vd(a);var c=a.lastIndexOf("."),d=a.substr(c+1);c=Dd(a.substr(0,c));c.b||(c.b={});c.b[d]=b;b.a=c;Bd[a]=b}return b};function Ed(a,b){this.b={};this.a=[];this.c=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Ed?(c=a.S(),d=a.P()):(c=Ra(a),d=Qa(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}h=Ed.prototype;h.P=function(){Fd(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a};h.S=function(){Fd(this);return this.a.concat()};
h.clear=function(){this.b={};this.c=this.a.length=0};function Fd(a){if(a.c!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Gd(a.b,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.c!=a.a.length){var e={};for(c=b=0;b<a.a.length;)d=a.a[b],Gd(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}h.get=function(a,b){return Gd(this.b,a)?this.b[a]:b};h.set=function(a,b){Gd(this.b,a)||(this.c++,this.a.push(a));this.b[a]=b};
h.forEach=function(a,b){for(var c=this.S(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};function Gd(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function H(a,b){a&&a.log(zd,b,void 0)};function Hd(a){return Da(a,function(a){a=a.toString(16);return 1<a.length?a:"0"+a}).join("")};var Id=null,Jd=null;function Kd(a){var b="";Ld(a,function(a){b+=String.fromCharCode(a)});return b}function Ld(a,b){function c(b){for(;d<a.length;){var c=a.charAt(d++),e=Jd[c];if(null!=e)return e;if(!/^[\s\xa0]*$/.test(c))throw Error("Unknown base64 encoding at char: "+c);}return b}Md();for(var d=0;;){var e=c(-1),f=c(0),g=c(64),l=c(64);if(64===l&&-1===e)break;b(e<<2|f>>4);64!=g&&(b(f<<4&240|g>>2),64!=l&&b(g<<6&192|l))}}
function Md(){if(!Id){Id={};Jd={};for(var a=0;65>a;a++)Id[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a),Jd[Id[a]]=a,62<=a&&(Jd["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a)]=a)}};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function Nd(a,b){this.g=[];this.v=a;this.o=b||null;this.f=this.a=!1;this.c=void 0;this.u=this.w=this.i=!1;this.h=0;this.b=null;this.l=0}Nd.prototype.cancel=function(a){if(this.a)this.c instanceof Nd&&this.c.cancel();else{if(this.b){var b=this.b;delete this.b;a?b.cancel(a):(b.l--,0>=b.l&&b.cancel())}this.v?this.v.call(this.o,this):this.u=!0;this.a||(a=new Od,Pd(this),Qd(this,!1,a))}};Nd.prototype.m=function(a,b){this.i=!1;Qd(this,a,b)};function Qd(a,b,c){a.a=!0;a.c=c;a.f=!b;Rd(a)}
function Pd(a){if(a.a){if(!a.u)throw new Sd;a.u=!1}}Nd.prototype.A=function(a){Pd(this);Qd(this,!0,a)};function Td(a,b){Ud(a,null,b,void 0)}function Ud(a,b,c,d){a.g.push([b,c,d]);a.a&&Rd(a)}Nd.prototype.then=function(a,b,c){var d,e,f=new z(function(a,b){d=a;e=b});Ud(this,d,function(a){a instanceof Od?f.cancel():e(a)});return f.then(a,b,c)};mb(Nd);function Vd(a){return Ea(a.g,function(a){return p(a[1])})}
function Rd(a){if(a.h&&a.a&&Vd(a)){var b=a.h,c=Wd[b];c&&(k.clearTimeout(c.a),delete Wd[b]);a.h=0}a.b&&(a.b.l--,delete a.b);b=a.c;for(var d=c=!1;a.g.length&&!a.i;){var e=a.g.shift(),f=e[0],g=e[1];e=e[2];if(f=a.f?g:f)try{var l=f.call(e||a.o,b);void 0!==l&&(a.f=a.f&&(l==b||l instanceof Error),a.c=b=l);if(nb(b)||"function"===typeof k.Promise&&b instanceof k.Promise)d=!0,a.i=!0}catch(n){b=n,a.f=!0,Vd(a)||(c=!0)}}a.c=b;d&&(l=r(a.m,a,!0),d=r(a.m,a,!1),b instanceof Nd?(Ud(b,l,d),b.w=!0):b.then(l,d));c&&(b=
new Xd(b),Wd[b.a]=b,a.h=b.a)}function Sd(){u.call(this)}t(Sd,u);Sd.prototype.message="Deferred has already fired";Sd.prototype.name="AlreadyCalledError";function Od(){u.call(this)}t(Od,u);Od.prototype.message="Deferred was canceled";Od.prototype.name="CanceledError";function Xd(a){this.a=k.setTimeout(r(this.c,this),0);this.b=a}Xd.prototype.c=function(){delete Wd[this.a];throw this.b;};var Wd={};function Yd(){this.b=-1};function Zd(a,b){this.b=-1;this.b=$d;this.f=k.Uint8Array?new Uint8Array(this.b):Array(this.b);this.g=this.c=0;this.a=[];this.i=a;this.h=b;this.l=k.Int32Array?new Int32Array(64):Array(64);ae||(k.Int32Array?ae=new Int32Array(be):ae=be);this.reset()}var ae;t(Zd,Yd);for(var $d=64,ce=$d-1,de=[],ee=0;ee<ce;ee++)de[ee]=0;var fe=Ka(128,de);Zd.prototype.reset=function(){this.g=this.c=0;this.a=k.Int32Array?new Int32Array(this.h):La(this.h)};
function ge(a){for(var b=a.f,c=a.l,d=0,e=0;e<b.length;)c[d++]=b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3],e=4*d;for(b=16;64>b;b++){e=c[b-15]|0;d=c[b-2]|0;var f=(c[b-16]|0)+((e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3)|0,g=(c[b-7]|0)+((d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10)|0;c[b]=f+g|0}d=a.a[0]|0;e=a.a[1]|0;var l=a.a[2]|0,n=a.a[3]|0,D=a.a[4]|0,vb=a.a[5]|0,tc=a.a[6]|0;f=a.a[7]|0;for(b=0;64>b;b++){var Bj=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&e^d&l^e&l)|0;g=D&vb^~D&tc;f=f+((D>>>6|D<<26)^(D>>>11|D<<21)^(D>>>
25|D<<7))|0;g=g+(ae[b]|0)|0;g=f+(g+(c[b]|0)|0)|0;f=tc;tc=vb;vb=D;D=n+g|0;n=l;l=e;e=d;d=g+Bj|0}a.a[0]=a.a[0]+d|0;a.a[1]=a.a[1]+e|0;a.a[2]=a.a[2]+l|0;a.a[3]=a.a[3]+n|0;a.a[4]=a.a[4]+D|0;a.a[5]=a.a[5]+vb|0;a.a[6]=a.a[6]+tc|0;a.a[7]=a.a[7]+f|0}
function he(a,b,c){void 0===c&&(c=b.length);var d=0,e=a.c;if(m(b))for(;d<c;)a.f[e++]=b.charCodeAt(d++),e==a.b&&(ge(a),e=0);else if(ha(b))for(;d<c;){var f=b[d++];if(!("number"==typeof f&&0<=f&&255>=f&&f==(f|0)))throw Error("message must be a byte array");a.f[e++]=f;e==a.b&&(ge(a),e=0)}else throw Error("message must be string or array");a.c=e;a.g+=c}
var be=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,
4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ie(){Zd.call(this,8,je)}t(ie,Zd);var je=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function ke(a){if(a.P&&"function"==typeof a.P)return a.P();if(m(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Qa(a)}function le(a){if(a.S&&"function"==typeof a.S)return a.S();if(!a.P||"function"!=typeof a.P){if(ha(a)||m(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return Ra(a)}}
function me(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(ha(a)||m(a))w(a,b,void 0);else for(var c=le(a),d=ke(a),e=d.length,f=0;f<e;f++)b.call(void 0,d[f],c&&c[f],a)};var ne=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function oe(a,b){if(a){a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].indexOf("="),e=null;if(0<=d){var f=a[c].substring(0,d);e=a[c].substring(d+1)}else f=a[c];b(f,e?decodeURIComponent(e.replace(/\+/g," ")):"")}}};function pe(a,b){this.b=this.l=this.c="";this.i=null;this.h=this.g="";this.f=!1;if(a instanceof pe){this.f=void 0!==b?b:a.f;qe(this,a.c);this.l=a.l;this.b=a.b;re(this,a.i);this.g=a.g;b=a.a;var c=new se;c.c=b.c;b.a&&(c.a=new Ed(b.a),c.b=b.b);te(this,c);this.h=a.h}else a&&(c=String(a).match(ne))?(this.f=!!b,qe(this,c[1]||"",!0),this.l=ue(c[2]||""),this.b=ue(c[3]||"",!0),re(this,c[4]),this.g=ue(c[5]||"",!0),te(this,c[6]||"",!0),this.h=ue(c[7]||"")):(this.f=!!b,this.a=new se(null,0,this.f))}
pe.prototype.toString=function(){var a=[],b=this.c;b&&a.push(ve(b,we,!0),":");var c=this.b;if(c||"file"==b)a.push("//"),(b=this.l)&&a.push(ve(b,we,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.i,null!=c&&a.push(":",String(c));if(c=this.g)this.b&&"/"!=c.charAt(0)&&a.push("/"),a.push(ve(c,"/"==c.charAt(0)?xe:ye,!0));(c=this.a.toString())&&a.push("?",c);(c=this.h)&&a.push("#",ve(c,ze));return a.join("")};
function qe(a,b,c){a.c=c?ue(b,!0):b;a.c&&(a.c=a.c.replace(/:$/,""))}function re(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.i=b}else a.i=null}function te(a,b,c){b instanceof se?(a.a=b,Ae(a.a,a.f)):(c||(b=ve(b,Be)),a.a=new se(b,0,a.f))}function I(a,b,c){a.a.set(b,c)}function Ce(a,b){return a.a.get(b)}function De(a){return a instanceof pe?new pe(a):new pe(a,void 0)}function Ee(a,b){var c=new pe(null,void 0);qe(c,"https");a&&(c.b=a);b&&(c.g=b);return c}
function ue(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ve(a,b,c){return m(a)?(a=encodeURI(a).replace(b,Fe),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Fe(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var we=/[#\/\?@]/g,ye=/[\#\?:]/g,xe=/[\#\?]/g,Be=/[\#\?@]/g,ze=/#/g;function se(a,b,c){this.b=this.a=null;this.c=a||null;this.f=!!c}
function Ge(a){a.a||(a.a=new Ed,a.b=0,a.c&&oe(a.c,function(b,c){He(a,decodeURIComponent(b.replace(/\+/g," ")),c)}))}function Ie(a){var b=le(a);if("undefined"==typeof b)throw Error("Keys are undefined");var c=new se(null,0,void 0);a=ke(a);for(var d=0;d<b.length;d++){var e=b[d],f=a[d];fa(f)?Je(c,e,f):He(c,e,f)}return c}function He(a,b,c){Ge(a);a.c=null;b=Ke(a,b);var d=a.a.get(b);d||a.a.set(b,d=[]);d.push(c);a.b+=1}
function Le(a,b){Ge(a);b=Ke(a,b);Gd(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,a=a.a,Gd(a.b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&Fd(a)))}h=se.prototype;h.clear=function(){this.a=this.c=null;this.b=0};function Me(a,b){Ge(a);b=Ke(a,b);return Gd(a.a.b,b)}h.forEach=function(a,b){Ge(this);this.a.forEach(function(c,d){w(c,function(c){a.call(b,c,d,this)},this)},this)};h.S=function(){Ge(this);for(var a=this.a.P(),b=this.a.S(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};
h.P=function(a){Ge(this);var b=[];if(m(a))Me(this,a)&&(b=Ka(b,this.a.get(Ke(this,a))));else{a=this.a.P();for(var c=0;c<a.length;c++)b=Ka(b,a[c])}return b};h.set=function(a,b){Ge(this);this.c=null;a=Ke(this,a);Me(this,a)&&(this.b-=this.a.get(a).length);this.a.set(a,[b]);this.b+=1;return this};h.get=function(a,b){a=a?this.P(a):[];return 0<a.length?String(a[0]):b};function Je(a,b,c){Le(a,b);0<c.length&&(a.c=null,a.a.set(Ke(a,b),La(c)),a.b+=c.length)}
h.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.S(),c=0;c<b.length;c++){var d=b[c],e=encodeURIComponent(String(d));d=this.P(d);for(var f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f])));a.push(g)}}return this.c=a.join("&")};function Ke(a,b){b=String(b);a.f&&(b=b.toLowerCase());return b}function Ae(a,b){b&&!a.f&&(Ge(a),a.c=null,a.a.forEach(function(a,b){var c=b.toLowerCase();b!=c&&(Le(this,b),Je(this,c,a))},a));a.f=b};function Ne(){}Ne.prototype.c=null;function Oe(a){return a.c||(a.c=a.b())};var Pe;function Qe(){}t(Qe,Ne);Qe.prototype.a=function(){var a=Re(this);return a?new ActiveXObject(a):new XMLHttpRequest};Qe.prototype.b=function(){var a={};Re(this)&&(a[0]=!0,a[1]=!0);return a};
function Re(a){if(!a.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.f=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.f}Pe=new Qe;function Se(a){F.call(this);this.headers=new Ed;this.w=a||null;this.b=!1;this.v=this.a=null;this.g=this.I=this.i="";this.c=this.G=this.h=this.A=!1;this.f=0;this.m=null;this.l=Te;this.o=this.N=!1}t(Se,F);var Te="",Ue=Se.prototype,Ve=Dd("goog.net.XhrIo");Ue.J=Ve;var We=/^https?$/i,Xe=["POST","PUT"];
function Ye(a,b,c,d,e){if(a.a)throw Error("[goog.net.XhrIo] Object is active with another request="+a.i+"; newUri="+b);c=c?c.toUpperCase():"GET";a.i=b;a.g="";a.I=c;a.A=!1;a.b=!0;a.a=a.w?a.w.a():Pe.a();a.v=a.w?Oe(a.w):Oe(Pe);a.a.onreadystatechange=r(a.Ab,a);try{H(a.J,Ze(a,"Opening Xhr")),a.G=!0,a.a.open(c,String(b),!0),a.G=!1}catch(g){H(a.J,Ze(a,"Error opening Xhr: "+g.message));$e(a,g);return}b=d||"";var f=new Ed(a.headers);e&&me(e,function(a,b){f.set(b,a)});e=Fa(f.S());d=k.FormData&&b instanceof
k.FormData;!Ha(Xe,c)||e||d||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");f.forEach(function(a,b){this.a.setRequestHeader(b,a)},a);a.l&&(a.a.responseType=a.l);"withCredentials"in a.a&&a.a.withCredentials!==a.N&&(a.a.withCredentials=a.N);try{af(a),0<a.f&&(a.o=bf(a.a),H(a.J,Ze(a,"Will abort after "+a.f+"ms if incomplete, xhr2 "+a.o)),a.o?(a.a.timeout=a.f,a.a.ontimeout=r(a.Ea,a)):a.m=rd(a.Ea,a.f,a)),H(a.J,Ze(a,"Sending request")),a.h=!0,a.a.send(b),a.h=!1}catch(g){H(a.J,Ze(a,
"Send error: "+g.message)),$e(a,g)}}function bf(a){return y&&jb(9)&&"number"==typeof a.timeout&&void 0!==a.ontimeout}function Ga(a){return"content-type"==a.toLowerCase()}h=Se.prototype;h.Ea=function(){"undefined"!=typeof aa&&this.a&&(this.g="Timed out after "+this.f+"ms, aborting",H(this.J,Ze(this,this.g)),G(this,"timeout"),this.abort(8))};function $e(a,b){a.b=!1;a.a&&(a.c=!0,a.a.abort(),a.c=!1);a.g=b;cf(a);df(a)}function cf(a){a.A||(a.A=!0,G(a,"complete"),G(a,"error"))}
h.abort=function(){this.a&&this.b&&(H(this.J,Ze(this,"Aborting")),this.b=!1,this.c=!0,this.a.abort(),this.c=!1,G(this,"complete"),G(this,"abort"),df(this))};h.ta=function(){this.a&&(this.b&&(this.b=!1,this.c=!0,this.a.abort(),this.c=!1),df(this,!0));Se.ib.ta.call(this)};h.Ab=function(){this.oa||(this.G||this.h||this.c?ef(this):this.jc())};h.jc=function(){ef(this)};
function ef(a){if(a.b&&"undefined"!=typeof aa)if(a.v[1]&&4==ff(a)&&2==gf(a))H(a.J,Ze(a,"Local request error detected and ignored"));else if(a.h&&4==ff(a))rd(a.Ab,0,a);else if(G(a,"readystatechange"),4==ff(a)){H(a.J,Ze(a,"Request complete"));a.b=!1;try{var b=gf(a);a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break a;default:c=!1}var d;if(!(d=c)){var e;if(e=0===b){var f=String(a.i).match(ne)[1]||null;if(!f&&k.self&&k.self.location){var g=k.self.location.protocol;
f=g.substr(0,g.length-1)}e=!We.test(f?f.toLowerCase():"")}d=e}if(d)G(a,"complete"),G(a,"success");else{try{var l=2<ff(a)?a.a.statusText:""}catch(n){H(a.J,"Can not get status: "+n.message),l=""}a.g=l+" ["+gf(a)+"]";cf(a)}}finally{df(a)}}}function df(a,b){if(a.a){af(a);var c=a.a,d=a.v[0]?ca:null;a.a=null;a.v=null;b||G(a,"ready");try{c.onreadystatechange=d}catch(e){(a=a.J)&&a.log(xd,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}
function af(a){a.a&&a.o&&(a.a.ontimeout=null);"number"==typeof a.m&&(k.clearTimeout(a.m),a.m=null)}function ff(a){return a.a?a.a.readyState:0}function gf(a){try{return 2<ff(a)?a.a.status:-1}catch(b){return-1}}function hf(a){try{return a.a?a.a.responseText:""}catch(b){return H(a.J,"Can not get responseText: "+b.message),""}}
h.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.l){case Te:case "text":return this.a.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var a=this.J;a&&a.log(xd,"Response type "+this.l+" is not supported on this browser",void 0);return null}catch(b){return H(this.J,"Can not get response: "+b.message),null}};function Ze(a,b){return b+" ["+a.I+" "+a.i+" "+gf(a)+"]"};var jf=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function kf(a){var b={},c=b.document||document,d=gc(a),e=document.createElement("SCRIPT"),f={Cb:e,Ea:void 0},g=new Nd(lf,f),l=null,n=null!=b.timeout?b.timeout:5E3;0<n&&(l=window.setTimeout(function(){mf(e,!0);var a=new nf(of,"Timeout reached for loading script "+d);Pd(g);Qd(g,!1,a)},n),f.Ea=l);e.onload=e.onreadystatechange=function(){e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(mf(e,b.Sc||!1,l),g.A(null))};e.onerror=function(){mf(e,!0,l);var a=new nf(pf,"Error while loading script "+
d);Pd(g);Qd(g,!1,a)};f=b.attributes||{};Wa(f,{type:"text/javascript",charset:"UTF-8"});xc(e,f);e.src=gc(a);qf(c).appendChild(e);return g}function qf(a){var b;return(b=(a||document).getElementsByTagName("HEAD"))&&0!=b.length?b[0]:a.documentElement}function lf(){if(this&&this.Cb){var a=this.Cb;a&&"SCRIPT"==a.tagName&&mf(a,!0,this.Ea)}}
function mf(a,b,c){null!=c&&k.clearTimeout(c);a.onload=ca;a.onerror=ca;a.onreadystatechange=ca;b&&window.setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a)},0)}var pf=0,of=1;function nf(a,b){var c="Jsloader error (code #"+a+")";b&&(c+=": "+b);u.call(this,c);this.code=a}t(nf,u);function rf(){}t(rf,Ne);rf.prototype.a=function(){var a=new XMLHttpRequest;if("withCredentials"in a)return a;if("undefined"!=typeof XDomainRequest)return new sf;throw Error("Unsupported browser");};rf.prototype.b=function(){return{}};
function sf(){this.a=new XDomainRequest;this.readyState=0;this.onreadystatechange=null;this.responseText="";this.status=-1;this.statusText=this.responseXML=null;this.a.onload=r(this.Wb,this);this.a.onerror=r(this.xb,this);this.a.onprogress=r(this.Xb,this);this.a.ontimeout=r(this.Yb,this)}h=sf.prototype;h.open=function(a,b,c){if(null!=c&&!c)throw Error("Only async requests are supported.");this.a.open(a,b)};
h.send=function(a){if(a)if("string"==typeof a)this.a.send(a);else throw Error("Only string data is supported");else this.a.send()};h.abort=function(){this.a.abort()};h.setRequestHeader=function(){};h.getResponseHeader=function(a){return"content-type"==a.toLowerCase()?this.a.contentType:""};h.Wb=function(){this.status=200;this.responseText=this.a.responseText;tf(this,4)};h.xb=function(){this.status=500;this.responseText="";tf(this,4)};h.Yb=function(){this.xb()};
h.Xb=function(){this.status=200;tf(this,1)};function tf(a,b){a.readyState=b;if(a.onreadystatechange)a.onreadystatechange()}h.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function uf(){var a=J();return y&&!!kb&&11==kb||/Edge\/\d+/.test(a)}function vf(){return k.window&&k.window.location.href||""}function wf(a,b){b=b||k.window;var c="about:blank";a&&(c=nc(pc(a)));b.location.href=c}function xf(a,b){var c=[],d;for(d in a)d in b?typeof a[d]!=typeof b[d]?c.push(d):fa(a[d])?Ta(a[d],b[d])||c.push(d):"object"==typeof a[d]&&null!=a[d]&&null!=b[d]?0<xf(a[d],b[d]).length&&c.push(d):a[d]!==b[d]&&c.push(d):c.push(d);for(d in b)d in a||c.push(d);return c}
function yf(){var a=J();a=zf(a)!=Af?null:(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null;return a&&30>a?!1:!y||!kb||9<kb}function Bf(a){a=(a||J()).toLowerCase();return a.match(/android/)||a.match(/webos/)||a.match(/iphone|ipad|ipod/)||a.match(/blackberry/)||a.match(/windows phone/)||a.match(/iemobile/)?!0:!1}function Cf(a){a=a||k.window;try{a.close()}catch(b){}}
function Df(a,b,c){var d=Math.floor(1E9*Math.random()).toString();b=b||500;c=c||600;var e=(window.screen.availHeight-c)/2,f=(window.screen.availWidth-b)/2;b={width:b,height:c,top:0<e?e:0,left:0<f?f:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1};c=J().toLowerCase();d&&(b.target=d,v(c,"crios/")&&(b.target="_blank"));zf(J())==Ef&&(a=a||"http://localhost",b.scrollbars=!0);c=a||"";(d=b)||(d={});a=window;b=c instanceof lc?c:pc("undefined"!=typeof c.href?c.href:String(c));c=d.target||c.target;e=[];
for(g in d)switch(g){case "width":case "height":case "top":case "left":e.push(g+"="+d[g]);break;case "target":case "noreferrer":break;default:e.push(g+"="+(d[g]?1:0))}var g=e.join(",");(x("iPhone")&&!x("iPod")&&!x("iPad")||x("iPad")||x("iPod"))&&a.navigator&&a.navigator.standalone&&c&&"_self"!=c?(g=a.document.createElement("A"),b instanceof lc||b instanceof lc||(b=b.la?b.ja():String(b),oc.test(b)||(b="about:invalid#zClosurez"),b=qc(b)),g.href=nc(b),g.setAttribute("target",c),d.noreferrer&&g.setAttribute("rel",
"noreferrer"),d=document.createEvent("MouseEvent"),d.initMouseEvent("click",!0,!0,a,1),g.dispatchEvent(d),g={}):d.noreferrer?(g=a.open("",c,g),a=nc(b),g&&(bb&&v(a,";")&&(a="'"+a.replace(/'/g,"%27")+"'"),g.opener=null,dc("b/12014412, meta tag with sanitized URL"),a='<META HTTP-EQUIV="refresh" content="0; url='+qa(a)+'">',a=vc(a),g.document.write(uc(a)),g.document.close())):g=a.open(nc(b),c,g);if(g)try{g.focus()}catch(l){}return g}
function Ff(a){return new z(function(b){function c(){sd(2E3).then(function(){if(!a||a.closed)b();else return c()})}return c()})}var Gf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;function Hf(){var a=null;return(new z(function(b){"complete"==k.document.readyState?b():(a=function(){b()},dd(window,"load",a))})).s(function(b){E(window,"load",a);throw b;})}
function If(){return Jf(void 0)?Hf().then(function(){return new z(function(a,b){var c=k.document,d=setTimeout(function(){b(Error("Cordova framework is not ready."))},1E3);c.addEventListener("deviceready",function(){clearTimeout(d);a()},!1)})}):B(Error("Cordova must run in an Android or iOS file scheme."))}function Jf(a){a=a||J();return!("file:"!==Kf()||!a.toLowerCase().match(/iphone|ipad|ipod|android/))}function Lf(){var a=k.window;try{return!(!a||a==a.top)}catch(b){return!1}}
function K(){return firebase.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":firebase.INTERNAL.hasOwnProperty("node")?"Node":"Browser"}function Mf(){var a=K();return"ReactNative"===a||"Node"===a}var Ef="Firefox",Af="Chrome";
function zf(a){var b=a.toLowerCase();if(v(b,"opera/")||v(b,"opr/")||v(b,"opios/"))return"Opera";if(v(b,"iemobile"))return"IEMobile";if(v(b,"msie")||v(b,"trident/"))return"IE";if(v(b,"edge/"))return"Edge";if(v(b,"firefox/"))return Ef;if(v(b,"silk/"))return"Silk";if(v(b,"blackberry"))return"Blackberry";if(v(b,"webos"))return"Webos";if(!v(b,"safari/")||v(b,"chrome/")||v(b,"crios/")||v(b,"android"))if(!v(b,"chrome/")&&!v(b,"crios/")||v(b,"edge/")){if(v(b,"android"))return"Android";if((a=a.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&
2==a.length)return a[1]}else return Af;else return"Safari";return"Other"}var Nf={Gc:"FirebaseCore-web",Ic:"FirebaseUI-web"};function Of(a,b){b=b||[];var c=[],d={},e;for(e in Nf)d[Nf[e]]=!0;for(e=0;e<b.length;e++)"undefined"!==typeof d[b[e]]&&(delete d[b[e]],c.push(b[e]));c.sort();b=c;b.length||(b=["FirebaseCore-web"]);c=K();d="";"Browser"===c?d=zf(J()):d=c;return d+"/JsCore/"+a+"/"+b.join(",")}function J(){return k.navigator&&k.navigator.userAgent||""}
function L(a,b){a=a.split(".");b=b||k;for(var c=0;c<a.length&&"object"==typeof b&&null!=b;c++)b=b[a[c]];c!=a.length&&(b=void 0);return b}function Pf(){try{var a=k.localStorage,b=Qf();if(a)return a.setItem(b,"1"),a.removeItem(b),uf()?!!k.indexedDB:!0}catch(c){}return!1}function Rf(){return(Sf()||"chrome-extension:"===Kf()||Jf())&&!Mf()&&Pf()}function Sf(){return"http:"===Kf()||"https:"===Kf()}function Kf(){return k.location&&k.location.protocol||null}
function Tf(a){a=a||J();return Bf(a)||zf(a)==Ef?!1:!0}function Uf(a){return"undefined"===typeof a?null:Cc(a)}function Vf(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&null!==a[c]&&void 0!==a[c]&&(b[c]=a[c]);return b}function Wf(a){if(null!==a)return JSON.parse(a)}function Qf(a){return a?a:""+Math.floor(1E9*Math.random()).toString()}function Xf(a){a=a||J();return"Safari"==zf(a)||a.toLowerCase().match(/iphone|ipad|ipod/)?!1:!0}
function Yf(){var a=k.___jsl;if(a&&a.H)for(var b in a.H)if(a.H[b].r=a.H[b].r||[],a.H[b].L=a.H[b].L||[],a.H[b].r=a.H[b].L.concat(),a.CP)for(var c=0;c<a.CP.length;c++)a.CP[c]=null}function Zf(){var a=k.navigator;return a&&"boolean"===typeof a.onLine&&(Sf()||"chrome-extension:"===Kf()||"undefined"!==typeof a.connection)?a.onLine:!0}function $f(a,b,c,d){if(a>b)throw Error("Short delay should be less than long delay!");this.c=a;this.b=b;a=c||J();d=d||K();this.a=Bf(a)||"ReactNative"===d}
$f.prototype.get=function(){return this.a?this.b:this.c};function ag(){var a=k.document;return a&&"undefined"!==typeof a.visibilityState?"visible"==a.visibilityState:!0}function bg(){var a=k.document,b=null;return ag()||!a?A():(new z(function(c){b=function(){ag()&&(a.removeEventListener("visibilitychange",b,!1),c())};a.addEventListener("visibilitychange",b,!1)})).s(function(c){a.removeEventListener("visibilitychange",b,!1);throw c;})}
function cg(a){try{var b=new Date(parseInt(a,10));if(!isNaN(b.getTime())&&!/[^0-9]/.test(a))return b.toUTCString()}catch(c){}return null};var dg={};var eg;try{var fg={};Object.defineProperty(fg,"abcd",{configurable:!0,enumerable:!0,value:1});Object.defineProperty(fg,"abcd",{configurable:!0,enumerable:!0,value:2});eg=2==fg.abcd}catch(a){eg=!1}function M(a,b,c){eg?Object.defineProperty(a,b,{configurable:!0,enumerable:!0,value:c}):a[b]=c}function gg(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&M(a,c,b[c])}function hg(a){var b={};gg(b,a);return b}function ig(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}
function jg(a,b){if(!b||!b.length)return!0;if(!a)return!1;for(var c=0;c<b.length;c++){var d=a[b[c]];if(void 0===d||null===d||""===d)return!1}return!0}function kg(a){var b=a;if("object"==typeof a&&null!=a){b="length"in a?[]:{};for(var c in a)M(b,c,kg(a[c]))}return b};function lg(a){var b={},c=a[mg],d=a[ng];a=a[og];if(!c||!a)throw Error("Invalid provider user info!");b[pg]=d||null;b[qg]=c;M(this,rg,a);M(this,sg,kg(b))}var mg="email",ng="newEmail",og="requestType",qg="email",pg="fromEmail",sg="data",rg="operation";function N(a,b){this.code=tg+a;this.message=b||ug[a]||""}t(N,Error);N.prototype.B=function(){return{code:this.code,message:this.message}};N.prototype.toJSON=function(){return this.B()};function vg(a){var b=a&&a.code;return b?new N(b.substring(tg.length),a.message):null}
var tg="auth/",ug={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",
"code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",
"dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",
"invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"The user's credential is no longer valid. The user must sign in again.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.",
"invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.",
"invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",
"invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",
"invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.",
"auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.",
"missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",
"network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',
"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",
timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.",
"user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function wg(a){var b=a[xg];if("undefined"===typeof b)throw new N("missing-continue-uri");if("string"!==typeof b||"string"===typeof b&&!b.length)throw new N("invalid-continue-uri");this.h=b;this.c=this.a=null;this.g=!1;var c=a[yg];if(c&&"object"===typeof c){b=c[zg];var d=c[Ag];c=c[Bg];if("string"===typeof b&&b.length){this.a=b;if("undefined"!==typeof d&&"boolean"!==typeof d)throw new N("argument-error",Ag+" property must be a boolean when specified.");this.g=!!d;if("undefined"!==typeof c&&("string"!==
typeof c||"string"===typeof c&&!c.length))throw new N("argument-error",Bg+" property must be a non empty string when specified.");this.c=c||null}else{if("undefined"!==typeof b)throw new N("argument-error",zg+" property must be a non empty string when specified.");if("undefined"!==typeof d||"undefined"!==typeof c)throw new N("missing-android-pkg-name");}}else if("undefined"!==typeof c)throw new N("argument-error",yg+" property must be a non null object when specified.");this.b=null;if((b=a[Cg])&&"object"===
typeof b)if(b=b[Dg],"string"===typeof b&&b.length)this.b=b;else{if("undefined"!==typeof b)throw new N("argument-error",Dg+" property must be a non empty string when specified.");}else if("undefined"!==typeof b)throw new N("argument-error",Cg+" property must be a non null object when specified.");a=a[Eg];if("undefined"!==typeof a&&"boolean"!==typeof a)throw new N("argument-error",Eg+" property must be a boolean when specified.");if((this.f=!!a)&&!this.b&&!this.a)throw new N("argument-error",Eg+" property can't be true when no mobile application is provided.");
}var yg="android",Eg="handleCodeInApp",Cg="iOS",xg="url",Ag="installApp",Bg="minimumVersion",zg="packageName",Dg="bundleId";function Fg(a){var b={};b.continueUrl=a.h;b.canHandleCodeInApp=a.f;if(b.androidPackageName=a.a)b.androidMinimumVersion=a.c,b.androidInstallApp=a.g;b.iOSBundleId=a.b;for(var c in b)null===b[c]&&delete b[c];return b};function Gg(a){this.b=a.sub;na();this.a=a.provider_id||a.firebase&&a.firebase.sign_in_provider||null}function Hg(a){a=a.split(".");if(3!=a.length)return null;a=a[1];for(var b=(4-a.length%4)%4,c=0;c<b;c++)a+=".";try{var d=JSON.parse(Kd(a));if(d.sub&&d.iss&&d.aud&&d.exp)return new Gg(d)}catch(e){}return null};var Ig="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Jg=["client_id","response_type","scope","redirect_uri","state"],Kg={Hc:{Ma:"locale",za:500,ya:600,Na:"facebook.com",$a:Jg},Jc:{Ma:null,za:500,ya:620,Na:"github.com",$a:Jg},Kc:{Ma:"hl",za:515,ya:680,Na:"google.com",$a:Jg},Qc:{Ma:"lang",za:485,ya:705,Na:"twitter.com",$a:Ig}};function Lg(a){for(var b in Kg)if(Kg[b].Na==a)return Kg[b];return null};function Mg(a){var b={};b["facebook.com"]=Ng;b["google.com"]=Og;b["github.com"]=Pg;b["twitter.com"]=Qg;var c=a&&a[Rg];try{if(c)return b[c]?new b[c](a):new Sg(a);if("undefined"!==typeof a[Tg])return new Ug(a)}catch(d){}return null}var Tg="idToken",Rg="providerId";
function Ug(a){var b=a[Rg];if(!b&&a[Tg]){var c=Hg(a[Tg]);c&&c.a&&(b=c.a)}if(!b)throw Error("Invalid additional user info!");if("anonymous"==b||"custom"==b)b=null;c=!1;"undefined"!==typeof a.isNewUser?c=!!a.isNewUser:"identitytoolkit#SignupNewUserResponse"===a.kind&&(c=!0);M(this,"providerId",b);M(this,"isNewUser",c)}function Sg(a){Ug.call(this,a);a=Wf(a.rawUserInfo||"{}");M(this,"profile",kg(a||{}))}t(Sg,Ug);
function Ng(a){Sg.call(this,a);if("facebook.com"!=this.providerId)throw Error("Invalid provider ID!");}t(Ng,Sg);function Pg(a){Sg.call(this,a);if("github.com"!=this.providerId)throw Error("Invalid provider ID!");M(this,"username",this.profile&&this.profile.login||null)}t(Pg,Sg);function Og(a){Sg.call(this,a);if("google.com"!=this.providerId)throw Error("Invalid provider ID!");}t(Og,Sg);
function Qg(a){Sg.call(this,a);if("twitter.com"!=this.providerId)throw Error("Invalid provider ID!");M(this,"username",a.screenName||null)}t(Qg,Sg);function Vg(a,b){return a.then(function(a){if(a[O]){var c=Hg(a[O]);if(!c||b!=c.b)throw new N("user-mismatch");return a}throw new N("user-mismatch");}).s(function(a){throw a&&a.code&&a.code==tg+"user-not-found"?new N("user-mismatch"):a;})}
function Wg(a,b){if(b.idToken||b.accessToken)b.idToken&&M(this,"idToken",b.idToken),b.accessToken&&M(this,"accessToken",b.accessToken);else if(b.oauthToken&&b.oauthTokenSecret)M(this,"accessToken",b.oauthToken),M(this,"secret",b.oauthTokenSecret);else throw new N("internal-error","failed to construct a credential");M(this,"providerId",a)}Wg.prototype.wa=function(a){return Xg(a,Yg(this))};Wg.prototype.b=function(a,b){var c=Yg(this);c.idToken=b;return Zg(a,c)};
Wg.prototype.c=function(a,b){var c=Yg(this);return Vg($g(a,c),b)};function Yg(a){var b={};a.idToken&&(b.id_token=a.idToken);a.accessToken&&(b.access_token=a.accessToken);a.secret&&(b.oauth_token_secret=a.secret);b.providerId=a.providerId;return{postBody:Ie(b).toString(),requestUri:"http://localhost"}}
Wg.prototype.B=function(){var a={providerId:this.providerId};this.idToken&&(a.oauthIdToken=this.idToken);this.accessToken&&(a.oauthAccessToken=this.accessToken);this.secret&&(a.oauthTokenSecret=this.secret);return a};function ah(a,b){this.rc=b||[];gg(this,{providerId:a,isOAuthProvider:!0});this.rb={};this.Wa=(Lg(a)||{}).Ma||null;this.Ua=null}ah.prototype.Ba=function(a){this.rb=Ua(a);return this};function P(a){ah.call(this,a,Jg);this.a=[]}t(P,ah);
P.prototype.sa=function(a){Ha(this.a,a)||this.a.push(a);return this};P.prototype.wb=function(){return La(this.a)};P.prototype.credential=function(a,b){if(!a&&!b)throw new N("argument-error","credential failed: must provide the ID token and/or the access token.");return new Wg(this.providerId,{idToken:a||null,accessToken:b||null})};function bh(){P.call(this,"facebook.com")}t(bh,P);M(bh,"PROVIDER_ID","facebook.com");
function ch(a){if(!a)throw new N("argument-error","credential failed: expected 1 argument (the OAuth access token).");var b=a;q(a)&&(b=a.accessToken);return(new bh).credential(null,b)}function dh(){P.call(this,"github.com")}t(dh,P);M(dh,"PROVIDER_ID","github.com");function eh(a){if(!a)throw new N("argument-error","credential failed: expected 1 argument (the OAuth access token).");var b=a;q(a)&&(b=a.accessToken);return(new dh).credential(null,b)}
function fh(){P.call(this,"google.com");this.sa("profile")}t(fh,P);M(fh,"PROVIDER_ID","google.com");function gh(a,b){var c=a;q(a)&&(c=a.idToken,b=a.accessToken);return(new fh).credential(c,b)}function hh(){ah.call(this,"twitter.com",Ig)}t(hh,ah);M(hh,"PROVIDER_ID","twitter.com");
function ih(a,b){var c=a;q(c)||(c={oauthToken:a,oauthTokenSecret:b});if(!c.oauthToken||!c.oauthTokenSecret)throw new N("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Wg("twitter.com",c)}function jh(a,b){this.a=a;this.f=b;M(this,"providerId","password")}jh.prototype.wa=function(a){return Q(a,kh,{email:this.a,password:this.f})};jh.prototype.b=function(a,b){return Q(a,lh,{idToken:b,email:this.a,password:this.f})};
jh.prototype.c=function(a,b){return Vg(this.wa(a),b)};jh.prototype.B=function(){return{email:this.a,password:this.f}};function mh(){gg(this,{providerId:"password",isOAuthProvider:!1})}gg(mh,{PROVIDER_ID:"password"});function nh(a){if(!(a.Pa&&a.Oa||a.Da&&a.Y))throw new N("internal-error");this.a=a;M(this,"providerId","phone")}nh.prototype.wa=function(a){return a.Qa(oh(this))};nh.prototype.b=function(a,b){var c=oh(this);c.idToken=b;return Q(a,ph,c)};
nh.prototype.c=function(a,b){var c=oh(this);c.operation="REAUTH";a=Q(a,qh,c);return Vg(a,b)};nh.prototype.B=function(){var a={providerId:"phone"};this.a.Pa&&(a.verificationId=this.a.Pa);this.a.Oa&&(a.verificationCode=this.a.Oa);this.a.Da&&(a.temporaryProof=this.a.Da);this.a.Y&&(a.phoneNumber=this.a.Y);return a};function oh(a){return a.a.Da&&a.a.Y?{temporaryProof:a.a.Da,phoneNumber:a.a.Y}:{sessionInfo:a.a.Pa,code:a.a.Oa}}
function rh(a){try{this.a=a||firebase.auth()}catch(b){throw new N("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().");}gg(this,{providerId:"phone",isOAuthProvider:!1})}
rh.prototype.Qa=function(a,b){var c=this.a.c;return A(b.verify()).then(function(d){if(!m(d))throw new N("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(b.type){case "recaptcha":return sh(c,{phoneNumber:a,recaptchaToken:d}).then(function(a){"function"===typeof b.reset&&b.reset();return a},function(a){"function"===typeof b.reset&&b.reset();throw a;});default:throw new N("argument-error",
'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');}})};function th(a,b){if(!a)throw new N("missing-verification-id");if(!b)throw new N("missing-verification-code");return new nh({Pa:a,Oa:b})}gg(rh,{PROVIDER_ID:"phone"});
function uh(a){if(a.temporaryProof&&a.phoneNumber)return new nh({Da:a.temporaryProof,Y:a.phoneNumber});var b=a&&a.providerId;if(!b||"password"===b)return null;var c=a&&a.oauthAccessToken,d=a&&a.oauthTokenSecret;a=a&&a.oauthIdToken;try{switch(b){case "google.com":return gh(a,c);case "facebook.com":return ch(c);case "github.com":return eh(c);case "twitter.com":return ih(c,d);default:return(new P(b)).credential(a,c)}}catch(e){return null}}
function vh(a){if(!a.isOAuthProvider)throw new N("invalid-oauth-provider");};function wh(a,b,c,d,e){this.b=a;this.c=b||null;this.f=c||null;this.g=d||null;this.a=e||null;if(this.f||this.a){if(this.f&&this.a)throw new N("invalid-auth-event");if(this.f&&!this.g)throw new N("invalid-auth-event");}else throw new N("invalid-auth-event");}wh.prototype.B=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,error:this.a&&this.a.B()}};function xh(a){a=a||{};return a.type?new wh(a.type,a.eventId,a.urlResponse,a.sessionId,a.error&&vg(a.error)):null};function yh(a){var b="unauthorized-domain",c=void 0,d=De(a);a=d.b;d=d.c;"chrome-extension"==d?c=oa("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):"http"==d||"https"==d?c=oa("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):b="operation-not-supported-in-this-environment";
N.call(this,b,c)}t(yh,N);function zh(a,b,c){N.call(this,a,c);a=b||{};a.sb&&M(this,"email",a.sb);a.Y&&M(this,"phoneNumber",a.Y);a.credential&&M(this,"credential",a.credential)}t(zh,N);zh.prototype.B=function(){var a={code:this.code,message:this.message};this.email&&(a.email=this.email);this.phoneNumber&&(a.phoneNumber=this.phoneNumber);var b=this.credential&&this.credential.B();b&&Wa(a,b);return a};zh.prototype.toJSON=function(){return this.B()};
function Ah(a){if(a.code){var b=a.code||"";0==b.indexOf(tg)&&(b=b.substring(tg.length));var c={credential:uh(a)};if(a.email)c.sb=a.email;else if(a.phoneNumber)c.Y=a.phoneNumber;else return new N(b,a.message||void 0);return new zh(b,c,a.message)}return null};function Bh(a){this.f=a}t(Bh,Ne);Bh.prototype.a=function(){return new this.f};Bh.prototype.b=function(){return{}};
function Ch(a,b,c){var d="Node"==K();d=k.XMLHttpRequest||d&&firebase.INTERNAL.node&&firebase.INTERNAL.node.XMLHttpRequest;if(!d)throw new N("internal-error","The XMLHttpRequest compatibility library was not found.");this.b=a;a=b||{};this.i=a.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token";this.l=a.secureTokenTimeout||Dh;this.c=Ua(a.secureTokenHeaders||Eh);this.g=a.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/";this.h=a.firebaseTimeout||Fh;this.a=
Ua(a.firebaseHeaders||Gh);c&&(this.a["X-Client-Version"]=c,this.c["X-Client-Version"]=c);this.f=new rf;this.o=new Bh(d)}var Hh,O="idToken",Dh=new $f(3E4,6E4),Eh={"Content-Type":"application/x-www-form-urlencoded"},Fh=new $f(3E4,6E4),Gh={"Content-Type":"application/json"};function Ih(a,b){b?a.a["X-Firebase-Locale"]=b:delete a.a["X-Firebase-Locale"]}function Jh(a,b){b?(a.a["X-Client-Version"]=b,a.c["X-Client-Version"]=b):(delete a.a["X-Client-Version"],delete a.c["X-Client-Version"])}
function Kh(a,b,c,d,e,f,g){Zf()?(yf()?a=r(a.m,a):(Hh||(Hh=new z(function(a,b){Lh(a,b)})),a=r(a.u,a)),a(b,c,d,e,f,g)):c&&c(null)}
Ch.prototype.m=function(a,b,c,d,e,f){var g="Node"==K(),l=Mf()?g?new Se(this.o):new Se:new Se(this.f);if(f){l.f=Math.max(0,f);var n=setTimeout(function(){G(l,"timeout")},f)}fd(l,"complete",function(){n&&clearTimeout(n);var a=null;try{a=JSON.parse(hf(this))||null}catch(vb){a=null}b&&b(a)});ld(l,"ready",function(){n&&clearTimeout(n);Lc(this)});ld(l,"timeout",function(){n&&clearTimeout(n);Lc(this);b&&b(null)});Ye(l,a,c,d,e)};
var Mh=dc("https://apis.google.com/js/client.js?onload=%{onload}"),Nh="__fcb"+Math.floor(1E6*Math.random()).toString();function Lh(a,b){if(((window.gapi||{}).client||{}).request)a();else{k[Nh]=function(){((window.gapi||{}).client||{}).request?a():b(Error("CORS_UNSUPPORTED"))};var c=hc(Mh,{onload:Nh});Td(kf(c),function(){b(Error("CORS_UNSUPPORTED"))})}}
Ch.prototype.u=function(a,b,c,d,e){var f=this;Hh.then(function(){window.gapi.client.setApiKey(f.b);var g=window.gapi.auth.getToken();window.gapi.auth.setToken(null);window.gapi.client.request({path:a,method:c,body:d,headers:e,authType:"none",callback:function(a){window.gapi.auth.setToken(g);b&&b(a)}})}).s(function(a){b&&b({error:{message:a&&a.message||"CORS_UNSUPPORTED"}})})};
function Oh(a,b){return new z(function(c,d){"refresh_token"==b.grant_type&&b.refresh_token||"authorization_code"==b.grant_type&&b.code?Kh(a,a.i+"?key="+encodeURIComponent(a.b),function(a){a?a.error?d(Ph(a)):a.access_token&&a.refresh_token?c(a):d(new N("internal-error")):d(new N("network-request-failed"))},"POST",Ie(b).toString(),a.c,a.l.get()):d(new N("internal-error"))})}
function Qh(a,b,c,d,e,f){var g=De(a.g+b);I(g,"key",a.b);f&&I(g,"cb",na().toString());var l="GET"==c;if(l)for(var n in d)d.hasOwnProperty(n)&&I(g,n,d[n]);return new z(function(b,f){Kh(a,g.toString(),function(a){a?a.error?f(Ph(a,e||{})):b(a):f(new N("network-request-failed"))},c,l?void 0:Cc(Vf(d)),a.a,a.h.get())})}function Rh(a){if(!jf.test(a.email))throw new N("invalid-email");}function Sh(a){"email"in a&&Rh(a)}
function Th(a,b){return Q(a,Uh,{identifier:b,continueUri:Sf()?vf():"http://localhost"}).then(function(a){return a.allProviders||[]})}function Vh(a){return Q(a,Wh,{}).then(function(a){return a.authorizedDomains||[]})}function Xh(a){if(!a[O])throw new N("internal-error");}
function Yh(a){if(a.phoneNumber||a.temporaryProof){if(!a.phoneNumber||!a.temporaryProof)throw new N("internal-error");}else{if(!a.sessionInfo)throw new N("missing-verification-id");if(!a.code)throw new N("missing-verification-code");}}Ch.prototype.gb=function(){return Q(this,Zh,{})};Ch.prototype.kb=function(a,b){return Q(this,$h,{idToken:a,email:b})};Ch.prototype.lb=function(a,b){return Q(this,lh,{idToken:a,password:b})};var ai={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};h=Ch.prototype;
h.mb=function(a,b){var c={idToken:a},d=[];Pa(ai,function(a,f){var e=b[f];null===e?d.push(a):f in b&&(c[f]=e)});d.length&&(c.deleteAttribute=d);return Q(this,$h,c)};h.cb=function(a,b){a={requestType:"PASSWORD_RESET",email:a};Wa(a,b);return Q(this,bi,a)};h.bb=function(a,b){a={requestType:"VERIFY_EMAIL",idToken:a};Wa(a,b);return Q(this,ci,a)};function sh(a,b){return Q(a,di,b)}h.Qa=function(a){return Q(this,ei,a)};function fi(a,b,c){return Q(a,gi,{idToken:b,deleteProvider:c})}
function hi(a){if(!a.requestUri||!a.sessionId&&!a.postBody)throw new N("internal-error");}function ii(a){var b=null;a.needConfirmation?(a.code="account-exists-with-different-credential",b=Ah(a)):"FEDERATED_USER_ID_ALREADY_LINKED"==a.errorMessage?(a.code="credential-already-in-use",b=Ah(a)):"EMAIL_EXISTS"==a.errorMessage?(a.code="email-already-in-use",b=Ah(a)):a.errorMessage&&(b=ji(a.errorMessage));if(b)throw b;if(!a[O])throw new N("internal-error");}
function Xg(a,b){b.returnIdpCredential=!0;return Q(a,ki,b)}function Zg(a,b){b.returnIdpCredential=!0;return Q(a,li,b)}function $g(a,b){b.returnIdpCredential=!0;b.autoCreate=!1;return Q(a,mi,b)}function ni(a){if(!a.oobCode)throw new N("invalid-action-code");}h.Ta=function(a,b){return Q(this,oi,{oobCode:a,newPassword:b})};h.Ia=function(a){return Q(this,pi,{oobCode:a})};h.Sa=function(a){return Q(this,qi,{oobCode:a})};
var qi={endpoint:"setAccountInfo",D:ni,ga:"email"},pi={endpoint:"resetPassword",D:ni,O:function(a){if(!a.email||!a.requestType)throw new N("internal-error");}},ri={endpoint:"signupNewUser",D:function(a){Rh(a);if(!a.password)throw new N("weak-password");},O:Xh,T:!0},Uh={endpoint:"createAuthUri"},si={endpoint:"deleteAccount",ea:["idToken"]},gi={endpoint:"setAccountInfo",ea:["idToken","deleteProvider"],D:function(a){if(!fa(a.deleteProvider))throw new N("internal-error");}},ti={endpoint:"getAccountInfo"},
ci={endpoint:"getOobConfirmationCode",ea:["idToken","requestType"],D:function(a){if("VERIFY_EMAIL"!=a.requestType)throw new N("internal-error");},ga:"email"},bi={endpoint:"getOobConfirmationCode",ea:["requestType"],D:function(a){if("PASSWORD_RESET"!=a.requestType)throw new N("internal-error");Rh(a)},ga:"email"},Wh={nb:!0,endpoint:"getProjectConfig",zb:"GET"},ui={nb:!0,endpoint:"getRecaptchaParam",zb:"GET",O:function(a){if(!a.recaptchaSiteKey)throw new N("internal-error");}},oi={endpoint:"resetPassword",
D:ni,ga:"email"},di={endpoint:"sendVerificationCode",ea:["phoneNumber","recaptchaToken"],ga:"sessionInfo"},$h={endpoint:"setAccountInfo",ea:["idToken"],D:Sh,T:!0},lh={endpoint:"setAccountInfo",ea:["idToken"],D:function(a){Sh(a);if(!a.password)throw new N("weak-password");},O:Xh,T:!0},Zh={endpoint:"signupNewUser",O:Xh,T:!0},ki={endpoint:"verifyAssertion",D:hi,O:ii,T:!0},mi={endpoint:"verifyAssertion",D:hi,O:function(a){if(a.errorMessage&&"USER_NOT_FOUND"==a.errorMessage)throw new N("user-not-found");
if(a.errorMessage)throw ji(a.errorMessage);if(!a[O])throw new N("internal-error");},T:!0},li={endpoint:"verifyAssertion",D:function(a){hi(a);if(!a.idToken)throw new N("internal-error");},O:ii,T:!0},vi={endpoint:"verifyCustomToken",D:function(a){if(!a.token)throw new N("invalid-custom-token");},O:Xh,T:!0},kh={endpoint:"verifyPassword",D:function(a){Rh(a);if(!a.password)throw new N("wrong-password");},O:Xh,T:!0},ei={endpoint:"verifyPhoneNumber",D:Yh,O:Xh},ph={endpoint:"verifyPhoneNumber",D:function(a){if(!a.idToken)throw new N("internal-error");
Yh(a)},O:function(a){if(a.temporaryProof)throw a.code="credential-already-in-use",Ah(a);Xh(a)}},qh={Pb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Yh,O:Xh};
function Q(a,b,c){if(!jg(c,b.ea))return B(new N("internal-error"));var d=b.zb||"POST",e;return A(c).then(b.D).then(function(){b.T&&(c.returnSecureToken=!0);return Qh(a,b.endpoint,d,c,b.Pb,b.nb||!1)}).then(function(a){return e=a}).then(b.O).then(function(){if(!b.ga)return e;if(!(b.ga in e))throw new N("internal-error");return e[b.ga]})}function ji(a){return Ph({error:{errors:[{message:a}],code:400,message:a}})}
function Ph(a,b){var c=(a.error&&a.error.errors&&a.error.errors[0]||{}).reason||"";var d={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(c=d[c]?new N(d[c]):null)return c;c=a.error&&a.error.message||"";d={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",
MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",
INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",
INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",
UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"};Wa(d,b||{});b=(b=c.match(/^[^\s]+\s*:\s*(.*)$/))&&1<b.length?b[1]:void 0;for(var e in d)if(0===c.indexOf(e))return new N(d[e],b);!b&&a&&(b=Uf(a));return new N("internal-error",b)};var wi={Mc:{Va:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ab:"https://securetoken.googleapis.com/v1/token",id:"p"},Oc:{Va:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ab:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},Pc:{Va:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ab:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};
function xi(a){for(var b in wi)if(wi[b].id===a)return a=wi[b],{firebaseEndpoint:a.Va,secureTokenEndpoint:a.ab};return null}var yi;yi=xi("__EID__")?"__EID__":void 0;function zi(a){this.b=a;this.a=null;this.Ya=Ai(this)}
function Ai(a){return Bi().then(function(){return new z(function(b,c){L("gapi.iframes.getContext")().open({where:document.body,url:a.b,messageHandlersFilter:L("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(d){function e(){clearTimeout(f);b()}a.a=d;a.a.restyle({setHideOnLeave:!1});var f=setTimeout(function(){c(Error("Network Error"))},Ci.get());d.ping(e).then(e,function(){c(Error("Network Error"))})})})})}
function Di(a,b){return a.Ya.then(function(){return new z(function(c){a.a.send(b.type,b,c,L("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function Ei(a,b){a.Ya.then(function(){a.a.register("authEvent",b,L("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var Fi=dc("https://apis.google.com/js/api.js?onload=%{onload}"),Gi=new $f(3E4,6E4),Ci=new $f(5E3,15E3),Hi=null;
function Bi(){return Hi?Hi:Hi=(new z(function(a,b){if(Zf()){var c=function(){Yf();L("gapi.load")("gapi.iframes",{callback:a,ontimeout:function(){Yf();b(Error("Network Error"))},timeout:Gi.get()})};if(L("gapi.iframes.Iframe"))a();else if(L("gapi.load"))c();else{var d="__iframefcb"+Math.floor(1E6*Math.random()).toString();k[d]=function(){L("gapi.load")?c():b(Error("Network Error"))};d=hc(Fi,{onload:d});A(kf(d)).s(function(){b(Error("Network Error"))})}}else b(Error("Network Error"))})).s(function(a){Hi=
null;throw a;})};function Ii(a,b,c){this.i=a;this.g=b;this.h=c;this.f=null;this.a=Ee(this.i,"/__/auth/iframe");I(this.a,"apiKey",this.g);I(this.a,"appName",this.h);this.b=null;this.c=[]}Ii.prototype.toString=function(){this.f?I(this.a,"v",this.f):Le(this.a.a,"v");this.b?I(this.a,"eid",this.b):Le(this.a.a,"eid");this.c.length?I(this.a,"fw",this.c.join(",")):Le(this.a.a,"fw");return this.a.toString()};function Ji(a,b,c,d,e){this.m=a;this.u=b;this.c=c;this.l=d;this.i=this.g=this.h=null;this.a=e;this.f=null}
Ji.prototype.toString=function(){var a=Ee(this.m,"/__/auth/handler");I(a,"apiKey",this.u);I(a,"appName",this.c);I(a,"authType",this.l);if(this.a.isOAuthProvider){var b=this.a;try{var c=firebase.app(this.c).auth().$()}catch(l){c=null}b.Ua=c;I(a,"providerId",this.a.providerId);b=this.a;c=Vf(b.rb);for(var d in c)c[d]=c[d].toString();d=b.rc;c=Ua(c);for(var e=0;e<d.length;e++){var f=d[e];f in c&&delete c[f]}b.Wa&&b.Ua&&!c[b.Wa]&&(c[b.Wa]=b.Ua);Sa(c)||I(a,"customParameters",Uf(c))}"function"===typeof this.a.wb&&
(b=this.a.wb(),b.length&&I(a,"scopes",b.join(",")));this.h?I(a,"redirectUrl",this.h):Le(a.a,"redirectUrl");this.g?I(a,"eventId",this.g):Le(a.a,"eventId");this.i?I(a,"v",this.i):Le(a.a,"v");if(this.b)for(var g in this.b)this.b.hasOwnProperty(g)&&!Ce(a,g)&&I(a,g,this.b[g]);this.f?I(a,"eid",this.f):Le(a.a,"eid");g=Ki(this.c);g.length&&I(a,"fw",g.join(","));return a.toString()};function Ki(a){try{return firebase.app(a).auth().Ka()}catch(b){return[]}}
function Li(a,b,c,d,e){this.u=a;this.f=b;this.b=c;this.c=d||null;this.h=e||null;this.m=this.o=this.v=null;this.g=[];this.l=this.a=null}
function Mi(a){var b=vf();return Vh(a).then(function(a){a:{var c=De(b),e=c.c;c=c.b;for(var f=0;f<a.length;f++){var g=a[f];var l=c;var n=e;0==g.indexOf("chrome-extension://")?l=De(g).b==l&&"chrome-extension"==n:"http"!=n&&"https"!=n?l=!1:Gf.test(g)?l=l==g:(g=g.split(".").join("\\."),l=(new RegExp("^(.+\\."+g+"|"+g+")$","i")).test(l));if(l){a=!0;break a}}a=!1}if(!a)throw new yh(vf());})}
function Ni(a){if(a.l)return a.l;a.l=Hf().then(function(){if(!a.o){var b=a.c,c=a.h,d=Ki(a.b),e=new Ii(a.u,a.f,a.b);e.f=b;e.b=c;e.c=La(d||[]);a.o=e.toString()}a.i=new zi(a.o);Oi(a)});return a.l}h=Li.prototype;h.Ca=function(a,b,c){var d=new N("popup-closed-by-user"),e=new N("web-storage-unsupported"),f=this,g=!1;return this.ba().then(function(){Pi(f).then(function(c){c||(a&&Cf(a),b(e),g=!0)})}).s(function(){}).then(function(){if(!g)return Ff(a)}).then(function(){if(!g)return sd(c).then(function(){b(d)})})};
h.Db=function(){var a=J();return!Tf(a)&&!Xf(a)};h.yb=function(){return!1};
h.vb=function(a,b,c,d,e,f,g){if(!a)return B(new N("popup-blocked"));if(g&&!Tf())return this.ba().s(function(b){Cf(a);e(b)}),d(),A();this.a||(this.a=Mi(Qi(this)));var l=this;return this.a.then(function(){var b=l.ba().s(function(b){Cf(a);e(b);throw b;});d();return b}).then(function(){vh(c);if(!g){var d=Ri(l.u,l.f,l.b,b,c,null,f,l.c,void 0,l.h);wf(d,a)}}).s(function(a){"auth/network-request-failed"==a.code&&(l.a=null);throw a;})};
function Qi(a){a.m||(a.v=a.c?Of(a.c,Ki(a.b)):null,a.m=new Ch(a.f,xi(a.h),a.v));return a.m}h.Aa=function(a,b,c){this.a||(this.a=Mi(Qi(this)));var d=this;return this.a.then(function(){vh(b);var e=Ri(d.u,d.f,d.b,a,b,vf(),c,d.c,void 0,d.h);wf(e)}).s(function(a){"auth/network-request-failed"==a.code&&(d.a=null);throw a;})};h.ba=function(){var a=this;return Ni(this).then(function(){return a.i.Ya}).s(function(){a.a=null;throw new N("network-request-failed");})};h.Hb=function(){return!0};
function Ri(a,b,c,d,e,f,g,l,n,D){a=new Ji(a,b,c,d,e);a.h=f;a.g=g;a.i=l;a.b=Ua(n||null);a.f=D;return a.toString()}function Oi(a){if(!a.i)throw Error("IfcHandler must be initialized!");Ei(a.i,function(b){var c={};if(b&&b.authEvent){var d=!1;b=xh(b.authEvent);for(c=0;c<a.g.length;c++)d=a.g[c](b)||d;c={};c.status=d?"ACK":"ERROR";return A(c)}c.status="ERROR";return A(c)})}
function Pi(a){var b={type:"webStorageSupport"};return Ni(a).then(function(){return Di(a.i,b)}).then(function(a){if(a&&a.length&&"undefined"!==typeof a[0].webStorageSupport)return a[0].webStorageSupport;throw Error();})}h.ua=function(a){this.g.push(a)};h.Ja=function(a){Ja(this.g,function(b){return b==a})};function Si(a){this.a=a||firebase.INTERNAL.reactNative&&firebase.INTERNAL.reactNative.AsyncStorage;if(!this.a)throw new N("internal-error","The React Native compatibility library was not found.");}h=Si.prototype;h.get=function(a){return A(this.a.getItem(a)).then(function(a){return a&&Wf(a)})};h.set=function(a,b){return A(this.a.setItem(a,Uf(b)))};h.X=function(a){return A(this.a.removeItem(a))};h.ia=function(){};h.da=function(){};function Ti(){this.a={}}h=Ti.prototype;h.get=function(a){return A(this.a[a])};h.set=function(a,b){this.a[a]=b;return A()};h.X=function(a){delete this.a[a];return A()};h.ia=function(){};h.da=function(){};function Ui(a,b,c,d,e,f){try{var g=!!k.indexedDB}catch(l){g=!1}if(!g)throw new N("web-storage-unsupported");this.u=a;this.h=b;this.g=c;this.l=d;this.m=e;this.f={};this.c=[];this.a=0;this.o=f||k.indexedDB}var Vi;function Wi(a){return new z(function(b,c){var d=a.o.open(a.u,a.m);d.onerror=function(a){c(Error(a.target.errorCode))};d.onupgradeneeded=function(b){b=b.target.result;try{b.createObjectStore(a.h,{keyPath:a.g})}catch(f){c(f)}};d.onsuccess=function(a){b(a.target.result)}})}
function Xi(a){a.i||(a.i=Wi(a));return a.i}function Yi(a,b){return b.objectStore(a.h)}function Zi(a,b,c){return b.transaction([a.h],c?"readwrite":"readonly")}function $i(a){return new z(function(b,c){a.onsuccess=function(a){a&&a.target?b(a.target.result):b()};a.onerror=function(a){c(Error(a.target.errorCode))}})}h=Ui.prototype;
h.set=function(a,b){var c=!1,d,e=this;return Qb(Xi(this).then(function(b){d=b;b=Yi(e,Zi(e,d,!0));return $i(b.get(a))}).then(function(f){var g=Yi(e,Zi(e,d,!0));if(f)return f.value=b,$i(g.put(f));e.a++;c=!0;f={};f[e.g]=a;f[e.l]=b;return $i(g.add(f))}).then(function(){e.f[a]=b}),function(){c&&e.a--})};h.get=function(a){var b=this;return Xi(this).then(function(c){return $i(Yi(b,Zi(b,c,!1)).get(a))}).then(function(a){return a&&a.value})};
h.X=function(a){var b=!1,c=this;return Qb(Xi(this).then(function(d){b=!0;c.a++;return $i(Yi(c,Zi(c,d,!0))["delete"](a))}).then(function(){delete c.f[a]}),function(){b&&c.a--})};
h.zc=function(){var a=this;return Xi(this).then(function(b){var c=Yi(a,Zi(a,b,!1));return c.getAll?$i(c.getAll()):new z(function(a,b){var d=[],e=c.openCursor();e.onsuccess=function(b){(b=b.target.result)?(d.push(b.value),b["continue"]()):a(d)};e.onerror=function(a){b(Error(a.target.errorCode))}})}).then(function(b){var c={},d=[];if(0==a.a){for(d=0;d<b.length;d++)c[b[d][a.g]]=b[d][a.l];d=xf(a.f,c);a.f=c}return d})};h.ia=function(a){0==this.c.length&&aj(this);this.c.push(a)};
h.da=function(a){Ja(this.c,function(b){return b==a});0==this.c.length&&this.b&&this.b.cancel("STOP_EVENT")};function aj(a){function b(){a.b=sd(800).then(r(a.zc,a)).then(function(b){0<b.length&&w(a.c,function(a){a(b)})}).then(b).s(function(a){"STOP_EVENT"!=a.message&&b()});return a.b}a.b&&a.b.cancel("STOP_EVENT");b()};function bj(){if(!cj()){if("Node"==K())throw new N("internal-error","The LocalStorage compatibility library was not found.");throw new N("web-storage-unsupported");}this.a=dj()||firebase.INTERNAL.node.localStorage}function dj(){try{var a=k.localStorage,b=Qf();a&&(a.setItem(b,"1"),a.removeItem(b));return a}catch(c){return null}}
function cj(){var a="Node"==K();a=dj()||a&&firebase.INTERNAL.node&&firebase.INTERNAL.node.localStorage;if(!a)return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch(b){return!1}}h=bj.prototype;h.get=function(a){var b=this;return A().then(function(){var c=b.a.getItem(a);return Wf(c)})};h.set=function(a,b){var c=this;return A().then(function(){var d=Uf(b);null===d?c.X(a):c.a.setItem(a,d)})};h.X=function(a){var b=this;return A().then(function(){b.a.removeItem(a)})};
h.ia=function(a){k.window&&cd(k.window,"storage",a)};h.da=function(a){k.window&&E(k.window,"storage",a)};function ej(){}h=ej.prototype;h.get=function(){return A(null)};h.set=function(){return A()};h.X=function(){return A()};h.ia=function(){};h.da=function(){};function fj(){if(!gj()){if("Node"==K())throw new N("internal-error","The SessionStorage compatibility library was not found.");throw new N("web-storage-unsupported");}this.a=hj()||firebase.INTERNAL.node.sessionStorage}function hj(){try{var a=k.sessionStorage,b=Qf();a&&(a.setItem(b,"1"),a.removeItem(b));return a}catch(c){return null}}
function gj(){var a="Node"==K();a=hj()||a&&firebase.INTERNAL.node&&firebase.INTERNAL.node.sessionStorage;if(!a)return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch(b){return!1}}h=fj.prototype;h.get=function(a){var b=this;return A().then(function(){var c=b.a.getItem(a);return Wf(c)})};h.set=function(a,b){var c=this;return A().then(function(){var d=Uf(b);null===d?c.X(a):c.a.setItem(a,d)})};h.X=function(a){var b=this;return A().then(function(){b.a.removeItem(a)})};h.ia=function(){};
h.da=function(){};function ij(){var a={};a.Browser=jj;a.Node=kj;a.ReactNative=lj;this.a=a[K()]}var mj,jj={C:bj,jb:fj},kj={C:bj,jb:fj},lj={C:Si,jb:ej};var nj={Lc:"local",NONE:"none",Nc:"session"};function oj(a){var b=new N("invalid-persistence-type"),c=new N("unsupported-persistence-type");a:{for(d in nj)if(nj[d]==a){var d=!0;break a}d=!1}if(!d||"string"!==typeof a)throw b;switch(K()){case "ReactNative":if("session"===a)throw c;break;case "Node":if("none"!==a)throw c;break;default:if(!Pf()&&"none"!==a)throw c;}}
function pj(a,b,c,d,e){this.i=a;this.g=b;this.A=c;this.u=d;this.v=e;this.a={};mj||(mj=new ij);a=mj;try{if(uf()){Vi||(Vi=new Ui("firebaseLocalStorageDb","firebaseLocalStorage","fbase_key","value",1));var f=Vi}else f=new a.a.C;this.l=f}catch(g){this.l=new Ti,this.u=!0}try{this.o=new a.a.jb}catch(g){this.o=new Ti}this.w=new Ti;this.h=r(this.m,this);this.b={}}var qj;function rj(){qj||(qj=new pj("firebase",":",!Xf(J())&&Lf()?!0:!1,Tf(),Pf()));return qj}
function sj(a,b){switch(b){case "session":return a.o;case "none":return a.w;default:return a.l}}function tj(a,b,c){return a.i+a.g+b.name+(c?a.g+c:"")}pj.prototype.get=function(a,b){return sj(this,a.C).get(tj(this,a,b))};function uj(a,b,c){c=tj(a,b,c);"local"==b.C&&(a.b[c]=null);return sj(a,b.C).X(c)}pj.prototype.set=function(a,b,c){var d=tj(this,a,c),e=this,f=sj(this,a.C);return f.set(d,b).then(function(){return f.get(d)}).then(function(b){"local"==a.C&&(e.b[d]=b)})};
function vj(a,b,c,d){b=tj(a,b,c);a.v&&(a.b[b]=k.localStorage.getItem(b));Sa(a.a)&&(sj(a,"local").ia(a.h),a.u||uf()||!a.v||wj(a));a.a[b]||(a.a[b]=[]);a.a[b].push(d)}function xj(a,b,c){b=tj(a,yj("local"),b);a.a[b]&&(Ja(a.a[b],function(a){return a==c}),0==a.a[b].length&&delete a.a[b]);Sa(a.a)&&zj(a)}
function wj(a){Aj(a);a.f=setInterval(function(){for(var b in a.a){var c=k.localStorage.getItem(b),d=a.b[b];c!=d&&(a.b[b]=c,c=new Qc({type:"storage",key:b,target:window,oldValue:d,newValue:c,a:!0}),a.m(c))}},1E3)}function Aj(a){a.f&&(clearInterval(a.f),a.f=null)}function zj(a){sj(a,"local").da(a.h);Aj(a)}
pj.prototype.m=function(a){if(a&&a.g){var b=a.a.key;if(null==b)for(var c in this.a){var d=this.b[c];"undefined"===typeof d&&(d=null);var e=k.localStorage.getItem(c);e!==d&&(this.b[c]=e,this.c(c))}else if(0==b.indexOf(this.i+this.g)&&this.a[b]){"undefined"!==typeof a.a.a?sj(this,"local").da(this.h):Aj(this);if(this.A)if(c=k.localStorage.getItem(b),d=a.a.newValue,d!==c)null!==d?k.localStorage.setItem(b,d):k.localStorage.removeItem(b);else if(this.b[b]===d&&"undefined"===typeof a.a.a)return;var f=this;
c=function(){if("undefined"!==typeof a.a.a||f.b[b]!==k.localStorage.getItem(b))f.b[b]=k.localStorage.getItem(b),f.c(b)};y&&kb&&10==kb&&k.localStorage.getItem(b)!==a.a.newValue&&a.a.newValue!==a.a.oldValue?setTimeout(c,10):c()}}else w(a,r(this.c,this))};pj.prototype.c=function(a){this.a[a]&&w(this.a[a],function(a){a()})};function Cj(a){this.a=a;this.b=rj()}var Dj={name:"authEvent",C:"local"};function Ej(a){return a.b.get(Dj,a.a).then(function(a){return xh(a)})};function Fj(){this.a=rj()};function Gj(a,b,c,d,e,f,g){this.u=a;this.i=b;this.l=c;this.m=d||null;this.o=g||null;this.h=b+":"+c;this.A=new Fj;this.g=new Cj(this.h);this.f=null;this.b=[];this.v=e||500;this.w=f||2E3;this.a=this.c=null}function Hj(a){return new N("invalid-cordova-configuration",a)}h=Gj.prototype;
h.ba=function(){return this.xa?this.xa:this.xa=If().then(function(){if("function"!==typeof L("universalLinks.subscribe",k))throw Hj("cordova-universal-links-plugin is not installed");if("undefined"===typeof L("BuildInfo.packageName",k))throw Hj("cordova-plugin-buildinfo is not installed");if("function"!==typeof L("cordova.plugins.browsertab.openUrl",k))throw Hj("cordova-plugin-browsertab is not installed");if("function"!==typeof L("cordova.InAppBrowser.open",k))throw Hj("cordova-plugin-inappbrowser is not installed");
},function(){throw new N("cordova-not-ready");})};function Ij(){for(var a=20,b=[];0<a;)b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),a--;return b.join("")}function Jj(a){var b=new ie;he(b,a);a=[];var c=8*b.g;56>b.c?he(b,fe,56-b.c):he(b,fe,b.b-(b.c-56));for(var d=63;56<=d;d--)b.f[d]=c&255,c/=256;ge(b);for(d=c=0;d<b.i;d++)for(var e=24;0<=e;e-=8)a[c++]=b.a[d]>>e&255;return Hd(a)}
h.Ca=function(a,b){b(new N("operation-not-supported-in-this-environment"));return A()};h.vb=function(){return B(new N("operation-not-supported-in-this-environment"))};h.Hb=function(){return!1};h.Db=function(){return!0};h.yb=function(){return!0};
h.Aa=function(a,b,c){if(this.c)return B(new N("redirect-operation-pending"));var d=this,e=k.document,f=null,g=null,l=null,n=null;return this.c=Qb(A().then(function(){vh(b);return Kj(d)}).then(function(){return Lj(d,a,b,c)}).then(function(){return(new z(function(a,b){g=function(){var b=L("cordova.plugins.browsertab.close",k);a();"function"===typeof b&&b();d.a&&"function"===typeof d.a.close&&(d.a.close(),d.a=null);return!1};d.ua(g);l=function(){f||(f=sd(d.w).then(function(){b(new N("redirect-cancelled-by-user"))}))};
n=function(){ag()&&l()};e.addEventListener("resume",l,!1);J().toLowerCase().match(/android/)||e.addEventListener("visibilitychange",n,!1)})).s(function(a){return Mj(d).then(function(){throw a;})})}),function(){l&&e.removeEventListener("resume",l,!1);n&&e.removeEventListener("visibilitychange",n,!1);f&&f.cancel();g&&d.Ja(g);d.c=null})};
function Lj(a,b,c,d){var e=Ij(),f=new wh(b,d,null,e,new N("no-auth-event")),g=L("BuildInfo.packageName",k);if("string"!==typeof g)throw new N("invalid-cordova-configuration");var l=L("BuildInfo.displayName",k),n={};if(J().toLowerCase().match(/iphone|ipad|ipod/))n.ibi=g;else if(J().toLowerCase().match(/android/))n.apn=g;else return B(new N("operation-not-supported-in-this-environment"));l&&(n.appDisplayName=l);e=Jj(e);n.sessionId=e;var D=Ri(a.u,a.i,a.l,b,c,null,d,a.m,n,a.o);return a.ba().then(function(){var b=
a.h;return a.A.a.set(Dj,f.B(),b)}).then(function(){var b=L("cordova.plugins.browsertab.isAvailable",k);if("function"!==typeof b)throw new N("invalid-cordova-configuration");var c=null;b(function(b){if(b){c=L("cordova.plugins.browsertab.openUrl",k);if("function"!==typeof c)throw new N("invalid-cordova-configuration");c(D)}else{c=L("cordova.InAppBrowser.open",k);if("function"!==typeof c)throw new N("invalid-cordova-configuration");b=J();b=!(!b.match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!b.match(/(iPad|iPhone|iPod).*OS 8_\d/i));
a.a=c(D,b?"_blank":"_system","location=yes")}})})}function Nj(a,b){for(var c=0;c<a.b.length;c++)try{a.b[c](b)}catch(d){}}function Kj(a){a.f||(a.f=a.ba().then(function(){return new z(function(b){function c(d){b(d);a.Ja(c);return!1}a.ua(c);Oj(a)})}));return a.f}function Mj(a){var b=null;return Ej(a.g).then(function(c){b=c;c=a.g;return uj(c.b,Dj,c.a)}).then(function(){return b})}
function Oj(a){function b(b){e=!0;f&&f.cancel();Mj(a).then(function(c){var e=d;if(c&&b&&b.url){e=null;var f=b.url;var g=De(f),l=Ce(g,"link"),n=Ce(De(l),"link");g=Ce(g,"deep_link_id");f=Ce(De(g),"link")||g||n||l||f;-1!=f.indexOf("/__/auth/callback")&&(e=De(f),e=Wf(Ce(e,"firebaseError")||null),e=(e="object"===typeof e?vg(e):null)?new wh(c.b,c.c,null,null,e):new wh(c.b,c.c,f,c.g));e=e||d}Nj(a,e)})}var c=L("universalLinks.subscribe",k);if("function"!==typeof c)throw new N("invalid-cordova-configuration");
var d=new wh("unknown",null,null,null,new N("no-auth-event")),e=!1,f=sd(a.v).then(function(){return Mj(a).then(function(){e||Nj(a,d)})}),g=k.handleOpenURL;k.handleOpenURL=function(a){0==a.toLowerCase().indexOf(L("BuildInfo.packageName",k).toLowerCase()+"://")&&b({url:a});if("function"===typeof g)try{g(a)}catch(n){console.error(n)}};c(null,b)}
h.ua=function(a){this.b.push(a);Kj(this).s(function(b){"auth/invalid-cordova-configuration"===b.code&&(b=new wh("unknown",null,null,null,new N("no-auth-event")),a(b))})};h.Ja=function(a){Ja(this.b,function(b){return b==a})};function Pj(a){this.a=a;this.b=rj()}var Qj={name:"pendingRedirect",C:"session"};function Rj(a){return a.b.set(Qj,"pending",a.a)}function Sj(a){return uj(a.b,Qj,a.a)}function Tj(a){return a.b.get(Qj,a.a).then(function(a){return"pending"==a})};function Uj(a,b,c){this.v=a;this.l=b;this.u=c;this.h=[];this.f=!1;this.i=r(this.m,this);this.c=new Vj;this.o=new Wj;this.g=new Pj(this.l+":"+this.u);this.b={};this.b.unknown=this.c;this.b.signInViaRedirect=this.c;this.b.linkViaRedirect=this.c;this.b.reauthViaRedirect=this.c;this.b.signInViaPopup=this.o;this.b.linkViaPopup=this.o;this.b.reauthViaPopup=this.o;this.a=Xj(this.v,this.l,this.u,yi)}
function Xj(a,b,c,d){var e=firebase.SDK_VERSION||null;return Jf()?new Gj(a,b,c,e,void 0,void 0,d):new Li(a,b,c,e,d)}Uj.prototype.reset=function(){this.f=!1;this.a.Ja(this.i);this.a=Xj(this.v,this.l,this.u)};function Yj(a){a.f||(a.f=!0,a.a.ua(a.i));var b=a.a;return a.a.ba().s(function(c){a.a==b&&a.reset();throw c;})}function Zj(a){a.a.Db()&&Yj(a).s(function(b){var c=new wh("unknown",null,null,null,new N("operation-not-supported-in-this-environment"));ak(b)&&a.m(c)});a.a.yb()||bk(a.c)}
Uj.prototype.subscribe=function(a){Ha(this.h,a)||this.h.push(a);if(!this.f){var b=this;Tj(this.g).then(function(a){a?Sj(b.g).then(function(){Yj(b).s(function(a){var c=new wh("unknown",null,null,null,new N("operation-not-supported-in-this-environment"));ak(a)&&b.m(c)})}):Zj(b)}).s(function(){Zj(b)})}};Uj.prototype.unsubscribe=function(a){Ja(this.h,function(b){return b==a})};
Uj.prototype.m=function(a){if(!a)throw new N("invalid-auth-event");for(var b=!1,c=0;c<this.h.length;c++){var d=this.h[c];if(d.ob(a.b,a.c)){(b=this.b[a.b])&&b.h(a,d);b=!0;break}}bk(this.c);return b};var ck=new $f(2E3,1E4),dk=new $f(3E4,6E4);Uj.prototype.aa=function(){return this.c.aa()};function ek(a,b,c,d,e,f){return a.a.vb(b,c,d,function(){a.f||(a.f=!0,a.a.ua(a.i))},function(){a.reset()},e,f)}function ak(a){return a&&"auth/cordova-not-ready"==a.code?!0:!1}
Uj.prototype.Aa=function(a,b,c){var d=this,e;return Rj(this.g).then(function(){return d.a.Aa(a,b,c).s(function(a){if(ak(a))throw new N("operation-not-supported-in-this-environment");e=a;return Sj(d.g).then(function(){throw e;})}).then(function(){return d.a.Hb()?new z(function(){}):Sj(d.g).then(function(){return d.aa()}).then(function(){}).s(function(){})})})};Uj.prototype.Ca=function(a,b,c,d){return this.a.Ca(c,function(c){a.fa(b,null,c,d)},ck.get())};var fk={};
function gk(a,b,c){var d=b+":"+c;fk[d]||(fk[d]=new Uj(a,b,c));return fk[d]}function Vj(){this.b=null;this.f=[];this.c=[];this.a=null;this.g=!1}Vj.prototype.reset=function(){this.b=null;this.a&&(this.a.cancel(),this.a=null)};
Vj.prototype.h=function(a,b){if(!a)return B(new N("invalid-auth-event"));this.reset();this.g=!0;var c=a.b,d=a.c,e=a.a&&"auth/web-storage-unsupported"==a.a.code,f=a.a&&"auth/operation-not-supported-in-this-environment"==a.a.code;"unknown"!=c||e||f?a.a?(hk(this,!0,null,a.a),a=A()):a=b.va(c,d)?ik(this,a,b):B(new N("invalid-auth-event")):(hk(this,!1,null,null),a=A());return a};function bk(a){a.g||(a.g=!0,hk(a,!1,null,null))}
function ik(a,b,c){c=c.va(b.b,b.c);var d=b.f,e=b.g,f=!!b.b.match(/Redirect$/);return c(d,e).then(function(b){hk(a,f,b,null)}).s(function(b){hk(a,f,null,b)})}function jk(a,b){a.b=function(){return B(b)};if(a.c.length)for(var c=0;c<a.c.length;c++)a.c[c](b)}function kk(a,b){a.b=function(){return A(b)};if(a.f.length)for(var c=0;c<a.f.length;c++)a.f[c](b)}function hk(a,b,c,d){b?d?jk(a,d):kk(a,c):kk(a,{user:null});a.f=[];a.c=[]}
Vj.prototype.aa=function(){var a=this;return new z(function(b,c){a.b?a.b().then(b,c):(a.f.push(b),a.c.push(c),lk(a))})};function lk(a){var b=new N("timeout");a.a&&a.a.cancel();a.a=sd(dk.get()).then(function(){a.b||hk(a,!0,null,b)})}function Wj(){}Wj.prototype.h=function(a,b){if(!a)return B(new N("invalid-auth-event"));var c=a.b,d=a.c;a.a?(b.fa(a.b,null,a.a,a.c),a=A()):a=b.va(c,d)?mk(a,b):B(new N("invalid-auth-event"));return a};
function mk(a,b){var c=a.c,d=a.b;return b.va(d,c)(a.f,a.g).then(function(a){b.fa(d,a,null,c)}).s(function(a){b.fa(d,null,a,c)})};function nk(a,b){this.a=b;M(this,"verificationId",a)}nk.prototype.confirm=function(a){a=th(this.verificationId,a);return this.a(a)};function ok(a,b,c,d){return(new rh(a)).Qa(b,c).then(function(a){return new nk(a,d)})};function pk(a,b,c,d,e,f){this.h=a;this.i=b;this.g=c;this.c=d;this.f=e;this.l=!!f;this.b=null;this.a=this.c;if(this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!");}pk.prototype.start=function(){this.a=this.c;qk(this,!0)};function rk(a,b){if(b)return a.a=a.c,a.g();b=a.a;a.a*=2;a.a>a.f&&(a.a=a.f);return b}
function qk(a,b){sk(a);a.b=sd(rk(a,b)).then(function(){return a.l?A():bg()}).then(function(){return a.h()}).then(function(){qk(a,!0)}).s(function(b){a.i(b)&&qk(a,!1)})}function sk(a){a.b&&(a.b.cancel(),a.b=null)};function tk(a){this.f=a;this.b=this.a=null;this.c=0}tk.prototype.B=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}};function uk(a,b){var c=b[O],d=b.refreshToken;b=vk(b.expiresIn);a.b=c;a.c=b;a.a=d}function vk(a){return na()+1E3*parseInt(a,10)}
function wk(a,b){return Oh(a.f,b).then(function(b){a.b=b.access_token;a.c=vk(b.expires_in);a.a=b.refresh_token;return{accessToken:a.b,expirationTime:a.c,refreshToken:a.a}}).s(function(b){"auth/user-token-expired"==b.code&&(a.a=null);throw b;})}tk.prototype.getToken=function(a){a=!!a;return this.b&&!this.a?B(new N("user-token-expired")):a||!this.b||na()>this.c-3E4?this.a?wk(this,{grant_type:"refresh_token",refresh_token:this.a}):A(null):A({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})};function xk(a,b){this.a=a||null;this.b=b||null;gg(this,{lastSignInTime:cg(b||null),creationTime:cg(a||null)})}function yk(a){return new xk(a.a,a.b)}xk.prototype.B=function(){return{lastLoginAt:this.b,createdAt:this.a}};function zk(a,b,c,d,e,f){gg(this,{uid:a,displayName:d||null,photoURL:e||null,email:c||null,phoneNumber:f||null,providerId:b})}function Ak(a,b){C.call(this,a);for(var c in b)this[c]=b[c]}t(Ak,C);
function Bk(a,b,c){this.A=[];this.G=a.apiKey;this.o=a.appName;this.w=a.authDomain||null;a=firebase.SDK_VERSION?Of(firebase.SDK_VERSION):null;this.c=new Ch(this.G,xi(yi),a);this.h=new tk(this.c);Ck(this,b[O]);uk(this.h,b);M(this,"refreshToken",this.h.a);Dk(this,c||{});F.call(this);this.I=!1;this.w&&Rf()&&(this.a=gk(this.w,this.G,this.o));this.N=[];this.i=null;this.l=Ek(this);this.U=r(this.Ga,this);var d=this;this.ha=null;this.ra=function(a){d.na(a.h)};this.W=null;this.R=[];this.qa=function(a){Fk(d,
a.f)};this.V=null}t(Bk,F);Bk.prototype.na=function(a){this.ha=a;Ih(this.c,a)};Bk.prototype.$=function(){return this.ha};function Gk(a,b){a.W&&E(a.W,"languageCodeChanged",a.ra);(a.W=b)&&cd(b,"languageCodeChanged",a.ra)}function Fk(a,b){a.R=b;Jh(a.c,firebase.SDK_VERSION?Of(firebase.SDK_VERSION,a.R):null)}Bk.prototype.Ka=function(){return La(this.R)};function Hk(a,b){a.V&&E(a.V,"frameworkChanged",a.qa);(a.V=b)&&cd(b,"frameworkChanged",a.qa)}Bk.prototype.Ga=function(){this.l.b&&(sk(this.l),this.l.start())};
function Ik(a){try{return firebase.app(a.o).auth()}catch(b){throw new N("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+a.o+"'!");}}function Ek(a){return new pk(function(){return a.F(!0)},function(a){return a&&"auth/network-request-failed"==a.code?!0:!1},function(){var b=a.h.c-na()-3E5;return 0<b?b:0},3E4,96E4,!1)}function Jk(a){a.m||a.l.b||(a.l.start(),E(a,"tokenChanged",a.U),cd(a,"tokenChanged",a.U))}function Kk(a){E(a,"tokenChanged",a.U);sk(a.l)}
function Ck(a,b){a.pa=b;M(a,"_lat",b)}function Lk(a,b){Ja(a.N,function(a){return a==b})}function Mk(a){for(var b=[],c=0;c<a.N.length;c++)b.push(a.N[c](a));return Ob(b).then(function(){return a})}function Nk(a){a.a&&!a.I&&(a.I=!0,a.a.subscribe(a))}
function Dk(a,b){gg(a,{uid:b.uid,displayName:b.displayName||null,photoURL:b.photoURL||null,email:b.email||null,emailVerified:b.emailVerified||!1,phoneNumber:b.phoneNumber||null,isAnonymous:b.isAnonymous||!1,metadata:new xk(b.createdAt,b.lastLoginAt),providerData:[]})}M(Bk.prototype,"providerId","firebase");function Ok(){}function Pk(a){return A().then(function(){if(a.m)throw new N("app-deleted");})}function Qk(a){return Da(a.providerData,function(a){return a.providerId})}
function Rk(a,b){b&&(Sk(a,b.providerId),a.providerData.push(b))}function Sk(a,b){Ja(a.providerData,function(a){return a.providerId==b})}function Tk(a,b,c){("uid"!=b||c)&&a.hasOwnProperty(b)&&M(a,b,c)}
function Uk(a,b){a!=b&&(gg(a,{uid:b.uid,displayName:b.displayName,photoURL:b.photoURL,email:b.email,emailVerified:b.emailVerified,phoneNumber:b.phoneNumber,isAnonymous:b.isAnonymous,providerData:[]}),b.metadata?M(a,"metadata",yk(b.metadata)):M(a,"metadata",new xk),w(b.providerData,function(b){Rk(a,b)}),a.h=b.h,M(a,"refreshToken",a.h.a))}h=Bk.prototype;h.reload=function(){var a=this;return R(this,Pk(this).then(function(){return Vk(a).then(function(){return Mk(a)}).then(Ok)}))};
function Vk(a){return a.F().then(function(b){var c=a.isAnonymous;return Wk(a,b).then(function(){c||Tk(a,"isAnonymous",!1);return b})})}h.F=function(a){var b=this;return R(this,Pk(this).then(function(){return b.h.getToken(a)}).then(function(a){if(!a)throw new N("internal-error");a.accessToken!=b.pa&&(Ck(b,a.accessToken),G(b,new Ak("tokenChanged")));Tk(b,"refreshToken",a.refreshToken);return a.accessToken}))};
h.getToken=function(a){dg["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]||(dg["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn("firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."));return this.F(a)};
function Xk(a,b){b[O]&&a.pa!=b[O]&&(uk(a.h,b),G(a,new Ak("tokenChanged")),Ck(a,b[O]),Tk(a,"refreshToken",a.h.a))}function Wk(a,b){return Q(a.c,ti,{idToken:b}).then(r(a.kc,a))}
h.kc=function(a){a=a.users;if(!a||!a.length)throw new N("internal-error");a=a[0];Dk(this,{uid:a.localId,displayName:a.displayName,photoURL:a.photoUrl,email:a.email,emailVerified:!!a.emailVerified,phoneNumber:a.phoneNumber,lastLoginAt:a.lastLoginAt,createdAt:a.createdAt});for(var b=Yk(a),c=0;c<b.length;c++)Rk(this,b[c]);Tk(this,"isAnonymous",!(this.email&&a.passwordHash)&&!(this.providerData&&this.providerData.length))};
function Yk(a){return(a=a.providerUserInfo)&&a.length?Da(a,function(a){return new zk(a.rawId,a.providerId,a.email,a.displayName,a.photoUrl,a.phoneNumber)}):[]}h.Za=function(a){var b=this,c=null;return R(this,a.c(this.c,this.uid).then(function(a){Xk(b,a);c=Zk(b,a,"reauthenticate");b.i=null;return b.reload()}).then(function(){return c}),!0)};h.mc=function(a){return this.Za(a).then(function(){})};
function $k(a,b){return Vk(a).then(function(){if(Ha(Qk(a),b))return Mk(a).then(function(){throw new N("provider-already-linked");})})}h.Xa=function(a){var b=this,c=null;return R(this,$k(this,a.providerId).then(function(){return b.F()}).then(function(c){return a.b(b.c,c)}).then(function(a){c=Zk(b,a,"link");return al(b,a)}).then(function(){return c}))};h.cc=function(a){return this.Xa(a).then(function(a){return a.user})};
h.dc=function(a,b){var c=this;return R(this,$k(this,"phone").then(function(){return ok(Ik(c),a,b,r(c.Xa,c))}))};h.nc=function(a,b){var c=this;return R(this,A().then(function(){return ok(Ik(c),a,b,r(c.Za,c))}),!0)};function Zk(a,b,c){var d=uh(b);b=Mg(b);return hg({user:a,credential:d,additionalUserInfo:b,operationType:c})}function al(a,b){Xk(a,b);return a.reload().then(function(){return a})}
h.kb=function(a){var b=this;return R(this,this.F().then(function(c){return b.c.kb(c,a)}).then(function(a){Xk(b,a);return b.reload()}))};h.Dc=function(a){var b=this;return R(this,this.F().then(function(c){return a.b(b.c,c)}).then(function(a){Xk(b,a);return b.reload()}))};h.lb=function(a){var b=this;return R(this,this.F().then(function(c){return b.c.lb(c,a)}).then(function(a){Xk(b,a);return b.reload()}))};
h.mb=function(a){if(void 0===a.displayName&&void 0===a.photoURL)return Pk(this);var b=this;return R(this,this.F().then(function(c){return b.c.mb(c,{displayName:a.displayName,photoUrl:a.photoURL})}).then(function(a){Xk(b,a);Tk(b,"displayName",a.displayName||null);Tk(b,"photoURL",a.photoUrl||null);w(b.providerData,function(a){"password"===a.providerId&&(M(a,"displayName",b.displayName),M(a,"photoURL",b.photoURL))});return Mk(b)}).then(Ok))};
h.Cc=function(a){var b=this;return R(this,Vk(this).then(function(c){return Ha(Qk(b),a)?fi(b.c,c,[a]).then(function(a){var c={};w(a.providerUserInfo||[],function(a){c[a.providerId]=!0});w(Qk(b),function(a){c[a]||Sk(b,a)});c[rh.PROVIDER_ID]||M(b,"phoneNumber",null);return Mk(b)}):Mk(b).then(function(){throw new N("no-such-provider");})}))};
h.delete=function(){var a=this;return R(this,this.F().then(function(b){return Q(a.c,si,{idToken:b})}).then(function(){G(a,new Ak("userDeleted"))})).then(function(){for(var b=0;b<a.A.length;b++)a.A[b].cancel("app-deleted");Gk(a,null);Hk(a,null);a.A=[];a.m=!0;Kk(a);M(a,"refreshToken",null);a.a&&a.a.unsubscribe(a)})};
h.ob=function(a,b){return"linkViaPopup"==a&&(this.g||null)==b&&this.f||"reauthViaPopup"==a&&(this.g||null)==b&&this.f||"linkViaRedirect"==a&&(this.Z||null)==b||"reauthViaRedirect"==a&&(this.Z||null)==b?!0:!1};h.fa=function(a,b,c,d){"linkViaPopup"!=a&&"reauthViaPopup"!=a||d!=(this.g||null)||(c&&this.v?this.v(c):b&&!c&&this.f&&this.f(b),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)};
h.va=function(a,b){return"linkViaPopup"==a&&b==(this.g||null)?r(this.tb,this):"reauthViaPopup"==a&&b==(this.g||null)?r(this.ub,this):"linkViaRedirect"==a&&(this.Z||null)==b?r(this.tb,this):"reauthViaRedirect"==a&&(this.Z||null)==b?r(this.ub,this):null};h.ec=function(a){var b=this;return bl(this,"linkViaPopup",a,function(){return $k(b,a.providerId).then(function(){return Mk(b)})},!1)};h.oc=function(a){return bl(this,"reauthViaPopup",a,function(){return A()},!0)};
function bl(a,b,c,d,e){if(!Rf())return B(new N("operation-not-supported-in-this-environment"));if(a.i&&!e)return B(a.i);var f=Lg(c.providerId),g=Qf(a.uid+":::"),l=null;(!Tf()||Lf())&&a.w&&c.isOAuthProvider&&(l=Ri(a.w,a.G,a.o,b,c,null,g,firebase.SDK_VERSION||null));var n=Df(l,f&&f.za,f&&f.ya);d=d().then(function(){cl(a);if(!e)return a.F().then(function(){})}).then(function(){return ek(a.a,n,b,c,g,!!l)}).then(function(){return new z(function(c,d){a.fa(b,null,new N("cancelled-popup-request"),a.g||null);
a.f=c;a.v=d;a.g=g;a.b=a.a.Ca(a,b,n,g)})}).then(function(a){n&&Cf(n);return a?hg(a):null}).s(function(a){n&&Cf(n);throw a;});return R(a,d,e)}h.fc=function(a){var b=this;return dl(this,"linkViaRedirect",a,function(){return $k(b,a.providerId)},!1)};h.pc=function(a){return dl(this,"reauthViaRedirect",a,function(){return A()},!0)};
function dl(a,b,c,d,e){if(!Rf())return B(new N("operation-not-supported-in-this-environment"));if(a.i&&!e)return B(a.i);var f=null,g=Qf(a.uid+":::");d=d().then(function(){cl(a);if(!e)return a.F().then(function(){})}).then(function(){a.Z=g;return Mk(a)}).then(function(b){a.ca&&(b=a.ca,b=b.b.set(el,a.B(),b.a));return b}).then(function(){return a.a.Aa(b,c,g)}).s(function(b){f=b;if(a.ca)return fl(a.ca);throw f;}).then(function(){if(f)throw f;});return R(a,d,e)}
function cl(a){if(!a.a||!a.I){if(a.a&&!a.I)throw new N("internal-error");throw new N("auth-domain-config-required");}}h.tb=function(a,b){var c=this;this.b&&(this.b.cancel(),this.b=null);var d=null,e=this.F().then(function(d){return Zg(c.c,{requestUri:a,sessionId:b,idToken:d})}).then(function(a){d=Zk(c,a,"link");return al(c,a)}).then(function(){return d});return R(this,e)};
h.ub=function(a,b){var c=this;this.b&&(this.b.cancel(),this.b=null);var d=null,e=A().then(function(){return Vg($g(c.c,{requestUri:a,sessionId:b}),c.uid)}).then(function(a){d=Zk(c,a,"reauthenticate");Xk(c,a);c.i=null;return c.reload()}).then(function(){return d});return R(this,e,!0)};h.bb=function(a){var b=this,c=null;return R(this,this.F().then(function(b){c=b;return"undefined"===typeof a||Sa(a)?{}:Fg(new wg(a))}).then(function(a){return b.c.bb(c,a)}).then(function(a){if(b.email!=a)return b.reload()}).then(function(){}))};
function R(a,b,c){var d=gl(a,b,c);a.A.push(d);Qb(d,function(){Ia(a.A,d)});return d}function gl(a,b,c){return a.i&&!c?(b.cancel(),B(a.i)):b.s(function(b){!b||"auth/user-disabled"!=b.code&&"auth/user-token-expired"!=b.code||(a.i||G(a,new Ak("userInvalidated")),a.i=b);throw b;})}h.toJSON=function(){return this.B()};
h.B=function(){var a={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.G,appName:this.o,authDomain:this.w,stsTokenManager:this.h.B(),redirectEventId:this.Z||null};this.metadata&&Wa(a,this.metadata.B());w(this.providerData,function(b){a.providerData.push(ig(b))});return a};
function hl(a){if(!a.apiKey)return null;var b={apiKey:a.apiKey,authDomain:a.authDomain,appName:a.appName},c={};if(a.stsTokenManager&&a.stsTokenManager.accessToken&&a.stsTokenManager.expirationTime)c[O]=a.stsTokenManager.accessToken,c.refreshToken=a.stsTokenManager.refreshToken||null,c.expiresIn=(a.stsTokenManager.expirationTime-na())/1E3;else return null;var d=new Bk(b,c,a);a.providerData&&w(a.providerData,function(a){a&&Rk(d,hg(a))});a.redirectEventId&&(d.Z=a.redirectEventId);return d}
function il(a,b,c,d){var e=new Bk(a,b);c&&(e.ca=c);d&&Fk(e,d);return e.reload().then(function(){return e})};function jl(a){this.a=a;this.b=rj()}var el={name:"redirectUser",C:"session"};function fl(a){return uj(a.b,el,a.a)}function kl(a,b){return a.b.get(el,a.a).then(function(a){a&&b&&(a.authDomain=b);return hl(a||{})})};function ll(a,b){this.a=a;this.b=b||rj();this.c=null;this.f=ml(this);vj(this.b,yj("local"),this.a,r(this.g,this))}ll.prototype.g=function(){var a=this,b=yj("local");nl(this,function(){return A().then(function(){return a.c&&"local"!=a.c.C?a.b.get(b,a.a):null}).then(function(c){if(c)return ol(a,"local").then(function(){a.c=b})})})};function ol(a,b){var c=[],d;for(d in nj)nj[d]!==b&&c.push(uj(a.b,yj(nj[d]),a.a));c.push(uj(a.b,pl,a.a));return Nb(c)}
function ml(a){var b=yj("local"),c=yj("session"),d=yj("none");return a.b.get(c,a.a).then(function(e){return e?c:a.b.get(d,a.a).then(function(c){return c?d:a.b.get(b,a.a).then(function(c){return c?b:a.b.get(pl,a.a).then(function(a){return a?yj(a):b})})})}).then(function(b){a.c=b;return ol(a,b.C)}).s(function(){a.c||(a.c=b)})}var pl={name:"persistence",C:"session"};function yj(a){return{name:"authUser",C:a}}
ll.prototype.eb=function(a){var b=null,c=this;oj(a);return nl(this,function(){return a!=c.c.C?c.b.get(c.c,c.a).then(function(d){b=d;return ol(c,a)}).then(function(){c.c=yj(a);if(b)return c.b.set(c.c,b,c.a)}):A()})};function ql(a){return nl(a,function(){return a.b.set(pl,a.c.C,a.a)})}function rl(a,b){return nl(a,function(){return a.b.set(a.c,b.B(),a.a)})}function sl(a){return nl(a,function(){return uj(a.b,a.c,a.a)})}
function tl(a,b){return nl(a,function(){return a.b.get(a.c,a.a).then(function(a){a&&b&&(a.authDomain=b);return hl(a||{})})})}function nl(a,b){a.f=a.f.then(b,b);return a.f};function ul(a){this.l=!1;M(this,"app",a);if(S(this).options&&S(this).options.apiKey)a=firebase.SDK_VERSION?Of(firebase.SDK_VERSION):null,this.c=new Ch(S(this).options&&S(this).options.apiKey,xi(yi),a);else throw new N("invalid-api-key");this.N=[];this.m=[];this.I=[];this.Kb=firebase.INTERNAL.createSubscribe(r(this.ac,this));this.R=void 0;this.Lb=firebase.INTERNAL.createSubscribe(r(this.bc,this));vl(this,null);this.h=new ll(S(this).options.apiKey+":"+S(this).name);this.G=new jl(S(this).options.apiKey+
":"+S(this).name);this.U=T(this,wl(this));this.i=T(this,xl(this));this.W=!1;this.ha=r(this.yc,this);this.Ga=r(this.ka,this);this.pa=r(this.Tb,this);this.qa=r(this.Zb,this);this.ra=r(this.$b,this);yl(this);this.INTERNAL={};this.INTERNAL["delete"]=r(this.delete,this);this.INTERNAL.logFramework=r(this.gc,this);this.o=0;F.call(this);zl(this);this.A=[]}t(ul,F);function Al(a){C.call(this,"languageCodeChanged");this.h=a}t(Al,C);function Bl(a){C.call(this,"frameworkChanged");this.f=a}t(Bl,C);h=ul.prototype;
h.eb=function(a){a=this.h.eb(a);return T(this,a)};h.na=function(a){this.V===a||this.l||(this.V=a,Ih(this.c,this.V),G(this,new Al(this.$())))};h.$=function(){return this.V};h.Ec=function(){var a=k.navigator;this.na(a?a.languages&&a.languages[0]||a.language||a.userLanguage||null:null)};h.gc=function(a){this.A.push(a);Jh(this.c,firebase.SDK_VERSION?Of(firebase.SDK_VERSION,this.A):null);G(this,new Bl(this.A))};h.Ka=function(){return La(this.A)};
function zl(a){Object.defineProperty(a,"lc",{get:function(){return this.$()},set:function(a){this.na(a)},enumerable:!1});a.V=null}h.toJSON=function(){return{apiKey:S(this).options.apiKey,authDomain:S(this).options.authDomain,appName:S(this).name,currentUser:U(this)&&U(this).B()}};function Cl(a){return a.Jb||B(new N("auth-domain-config-required"))}
function yl(a){var b=S(a).options.authDomain,c=S(a).options.apiKey;b&&Rf()&&(a.Jb=a.U.then(function(){if(!a.l){a.a=gk(b,c,S(a).name);a.a.subscribe(a);U(a)&&Nk(U(a));if(a.w){Nk(a.w);var d=a.w;d.na(a.$());Gk(d,a);d=a.w;Fk(d,a.A);Hk(d,a);a.w=null}return a.a}}))}h.ob=function(a,b){switch(a){case "unknown":case "signInViaRedirect":return!0;case "signInViaPopup":return this.g==b&&!!this.f;default:return!1}};
h.fa=function(a,b,c,d){"signInViaPopup"==a&&this.g==d&&(c&&this.v?this.v(c):b&&!c&&this.f&&this.f(b),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)};h.va=function(a,b){return"signInViaRedirect"==a||"signInViaPopup"==a&&this.g==b&&this.f?r(this.Sb,this):null};
h.Sb=function(a,b){var c=this;a={requestUri:a,sessionId:b};this.b&&(this.b.cancel(),this.b=null);var d=null,e=null,f=Xg(c.c,a).then(function(a){d=uh(a);e=Mg(a);return a});a=c.U.then(function(){return f}).then(function(a){return Dl(c,a)}).then(function(){return hg({user:U(c),credential:d,additionalUserInfo:e,operationType:"signIn"})});return T(this,a)};
h.wc=function(a){if(!Rf())return B(new N("operation-not-supported-in-this-environment"));var b=this,c=Lg(a.providerId),d=Qf(),e=null;(!Tf()||Lf())&&S(this).options.authDomain&&a.isOAuthProvider&&(e=Ri(S(this).options.authDomain,S(this).options.apiKey,S(this).name,"signInViaPopup",a,null,d,firebase.SDK_VERSION||null));var f=Df(e,c&&c.za,c&&c.ya);c=Cl(this).then(function(b){return ek(b,f,"signInViaPopup",a,d,!!e)}).then(function(){return new z(function(a,c){b.fa("signInViaPopup",null,new N("cancelled-popup-request"),
b.g);b.f=a;b.v=c;b.g=d;b.b=b.a.Ca(b,"signInViaPopup",f,d)})}).then(function(a){f&&Cf(f);return a?hg(a):null}).s(function(a){f&&Cf(f);throw a;});return T(this,c)};h.xc=function(a){if(!Rf())return B(new N("operation-not-supported-in-this-environment"));var b=this,c=Cl(this).then(function(){return ql(b.h)}).then(function(){return b.a.Aa("signInViaRedirect",a)});return T(this,c)};
h.aa=function(){if(!Rf())return B(new N("operation-not-supported-in-this-environment"));var a=this,b=Cl(this).then(function(){return a.a.aa()}).then(function(a){return a?hg(a):null});return T(this,b)};function Dl(a,b){var c={};c.apiKey=S(a).options.apiKey;c.authDomain=S(a).options.authDomain;c.appName=S(a).name;return a.U.then(function(){return il(c,b,a.G,a.Ka())}).then(function(b){if(U(a)&&b.uid==U(a).uid)return Uk(U(a),b),a.ka(b);vl(a,b);Nk(b);return a.ka(b)}).then(function(){El(a)})}
function vl(a,b){U(a)&&(Lk(U(a),a.Ga),E(U(a),"tokenChanged",a.pa),E(U(a),"userDeleted",a.qa),E(U(a),"userInvalidated",a.ra),Kk(U(a)));b&&(b.N.push(a.Ga),cd(b,"tokenChanged",a.pa),cd(b,"userDeleted",a.qa),cd(b,"userInvalidated",a.ra),0<a.o&&Jk(b));M(a,"currentUser",b);b&&(b.na(a.$()),Gk(b,a),Fk(b,a.A),Hk(b,a))}h.hb=function(){var a=this,b=this.i.then(function(){if(!U(a))return A();vl(a,null);return sl(a.h).then(function(){El(a)})});return T(this,b)};
function Fl(a){var b=kl(a.G,S(a).options.authDomain).then(function(b){if(a.w=b)b.ca=a.G;return fl(a.G)});return T(a,b)}function wl(a){var b=S(a).options.authDomain,c=Fl(a).then(function(){return tl(a.h,b)}).then(function(b){return b?(b.ca=a.G,a.w&&(a.w.Z||null)==(b.Z||null)?b:b.reload().then(function(){return rl(a.h,b).then(function(){return b})}).s(function(c){return"auth/network-request-failed"==c.code?b:sl(a.h)})):null}).then(function(b){vl(a,b||null)});return T(a,c)}
function xl(a){return a.U.then(function(){return a.aa()}).s(function(){}).then(function(){if(!a.l)return a.ha()}).s(function(){}).then(function(){if(!a.l){a.W=!0;var b=a.h;vj(b.b,yj("local"),b.a,a.ha)}})}
h.yc=function(){var a=this;return tl(this.h,S(this).options.authDomain).then(function(b){if(!a.l){var c;if(c=U(a)&&b){c=U(a).uid;var d=b.uid;c=void 0===c||null===c||""===c||void 0===d||null===d||""===d?!1:c==d}if(c)return Uk(U(a),b),U(a).F();if(U(a)||b)vl(a,b),b&&(Nk(b),b.ca=a.G),a.a&&a.a.subscribe(a),El(a)}})};h.ka=function(a){return rl(this.h,a)};h.Tb=function(){El(this);this.ka(U(this))};h.Zb=function(){this.hb()};h.$b=function(){this.hb()};
function Gl(a,b){var c=null,d=null;return T(a,b.then(function(b){c=uh(b);d=Mg(b);return Dl(a,b)}).then(function(){return hg({user:U(a),credential:c,additionalUserInfo:d,operationType:"signIn"})}))}h.ac=function(a){var b=this;this.addAuthTokenListener(function(){a.next(U(b))})};h.bc=function(a){var b=this;Hl(this,function(){a.next(U(b))})};h.ic=function(a,b,c){var d=this;this.W&&firebase.Promise.resolve().then(function(){p(a)?a(U(d)):p(a.next)&&a.next(U(d))});return this.Kb(a,b,c)};
h.hc=function(a,b,c){var d=this;this.W&&firebase.Promise.resolve().then(function(){d.R=d.getUid();p(a)?a(U(d)):p(a.next)&&a.next(U(d))});return this.Lb(a,b,c)};h.Vb=function(a){var b=this,c=this.i.then(function(){return U(b)?U(b).F(a).then(function(a){return{accessToken:a}}):null});return T(this,c)};h.tc=function(a){return this.Eb(a).then(function(a){return a.user})};
h.Eb=function(a){var b=this;return this.i.then(function(){return Gl(b,Q(b.c,vi,{token:a}))}).then(function(a){var c=a.user;Tk(c,"isAnonymous",!1);b.ka(c);return a})};h.Fb=function(a,b){var c=this;return this.i.then(function(){return Gl(c,Q(c.c,kh,{email:a,password:b}))})};h.uc=function(a,b){return this.Fb(a,b).then(function(a){return a.user})};h.Ob=function(a,b){return this.qb(a,b).then(function(a){return a.user})};
h.qb=function(a,b){var c=this;return this.i.then(function(){return Gl(c,Q(c.c,ri,{email:a,password:b}))})};h.sc=function(a){return this.fb(a).then(function(a){return a.user})};h.fb=function(a){var b=this;return this.i.then(function(){return Gl(b,a.wa(b.c))})};h.gb=function(){return this.Gb().then(function(a){return a.user})};
h.Gb=function(){var a=this;return this.i.then(function(){var b=U(a);if(b&&b.isAnonymous){var c=hg({providerId:null,isNewUser:!1});return hg({user:b,credential:null,additionalUserInfo:c,operationType:"signIn"})}return Gl(a,a.c.gb()).then(function(b){var c=b.user;Tk(c,"isAnonymous",!0);a.ka(c);return b})})};function S(a){return a.app}function U(a){return a.currentUser}h.getUid=function(){return U(this)&&U(this).uid||null};function Il(a){return U(a)&&U(a)._lat||null}
function El(a){if(a.W){for(var b=0;b<a.m.length;b++)if(a.m[b])a.m[b](Il(a));if(a.R!==a.getUid()&&a.I.length)for(a.R=a.getUid(),b=0;b<a.I.length;b++)if(a.I[b])a.I[b](Il(a))}}h.Mb=function(a){this.addAuthTokenListener(a);this.o++;0<this.o&&U(this)&&Jk(U(this))};h.qc=function(a){var b=this;w(this.m,function(c){c==a&&b.o--});0>this.o&&(this.o=0);0==this.o&&U(this)&&Kk(U(this));this.removeAuthTokenListener(a)};
h.addAuthTokenListener=function(a){var b=this;this.m.push(a);T(this,this.i.then(function(){b.l||Ha(b.m,a)&&a(Il(b))}))};h.removeAuthTokenListener=function(a){Ja(this.m,function(b){return b==a})};function Hl(a,b){a.I.push(b);T(a,a.i.then(function(){!a.l&&Ha(a.I,b)&&a.R!==a.getUid()&&(a.R=a.getUid(),b(Il(a)))}))}h.delete=function(){this.l=!0;for(var a=0;a<this.N.length;a++)this.N[a].cancel("app-deleted");this.N=[];this.h&&(a=this.h,xj(a.b,a.a,this.ha));this.a&&this.a.unsubscribe(this);return firebase.Promise.resolve()};
function T(a,b){a.N.push(b);Qb(b,function(){Ia(a.N,b)});return b}h.Rb=function(a){return T(this,Th(this.c,a))};h.Fc=function(a){return this.Ia(a).then(function(a){return a.data.email})};h.Ta=function(a,b){return T(this,this.c.Ta(a,b).then(function(){}))};h.Ia=function(a){return T(this,this.c.Ia(a).then(function(a){return new lg(a)}))};h.Sa=function(a){return T(this,this.c.Sa(a).then(function(){}))};
h.cb=function(a,b){var c=this;return T(this,A().then(function(){return"undefined"===typeof b||Sa(b)?{}:Fg(new wg(b))}).then(function(b){return c.c.cb(a,b)}).then(function(){}))};h.vc=function(a,b){return T(this,ok(this,a,b,r(this.fb,this)))};function Jl(a,b,c,d){a:{c=Array.prototype.slice.call(c);var e=0;for(var f=!1,g=0;g<b.length;g++)if(b[g].optional)f=!0;else{if(f)throw new N("internal-error","Argument validator encountered a required argument after an optional argument.");e++}f=b.length;if(c.length<e||f<c.length)d="Expected "+(e==f?1==e?"1 argument":e+" arguments":e+"-"+f+" arguments")+" but got "+c.length+".";else{for(e=0;e<c.length;e++)if(f=b[e].optional&&void 0===c[e],!b[e].M(c[e])&&!f){b=b[e];if(0>e||e>=Kl.length)throw new N("internal-error",
"Argument validator received an unsupported number of arguments.");c=Kl[e];d=(d?"":c+" argument ")+(b.name?'"'+b.name+'" ':"")+"must be "+b.K+".";break a}d=null}}if(d)throw new N("argument-error",a+" failed: "+d);}var Kl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function V(a,b){return{name:a||"",K:"a valid string",optional:!!b,M:m}}function Ll(){return{name:"opt_forceRefresh",K:"a boolean",optional:!0,M:ba}}
function W(a,b){return{name:a||"",K:"a valid object",optional:!!b,M:q}}function Ml(a,b){return{name:a||"",K:"a function",optional:!!b,M:p}}function Nl(a,b){return{name:a||"",K:"null",optional:!!b,M:ea}}function Ol(){return{name:"",K:"an HTML element",optional:!1,M:function(a){return!!(a&&a instanceof Element)}}}function Pl(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(a){return!!(a&&a instanceof ul)}}}
function Ql(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(a){return!!(a&&a instanceof firebase.app.App)}}}function Rl(a){return{name:a?a+"Credential":"credential",K:a?"a valid "+a+" credential":"a valid credential",optional:!1,M:function(b){if(!b)return!1;var c=!a||b.providerId===a;return!(!b.wa||!c)}}}
function Sl(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}}function Tl(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(a){return!!(a&&m(a.type)&&p(a.verify))}}}function X(a,b,c,d){return{name:c||"",K:a.K+" or "+b.K,optional:!!d,M:function(c){return a.M(c)||b.M(c)}}};function Ul(a,b,c,d,e,f){M(this,"type","recaptcha");this.b=this.c=null;this.m=!1;this.l=b;this.a=c||{theme:"light",type:"image"};this.g=[];if(this.a[Vl])throw new N("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");this.h="invisible"===this.a[Wl];if(!wc(b)||!this.h&&wc(b).hasChildNodes())throw new N("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new Ch(a,f||null,e||null);
this.o=d||function(){return null};var g=this;this.i=[];var l=this.a[Xl];this.a[Xl]=function(a){Yl(g,a);if("function"===typeof l)l(a);else if("string"===typeof l){var b=L(l,k);"function"===typeof b&&b(a)}};var n=this.a[Zl];this.a[Zl]=function(){Yl(g,null);if("function"===typeof n)n();else if("string"===typeof n){var a=L(n,k);"function"===typeof a&&a()}}}var Xl="callback",Zl="expired-callback",Vl="sitekey",Wl="size";function Yl(a,b){for(var c=0;c<a.i.length;c++)try{a.i[c](b)}catch(d){}}
function $l(a,b){Ja(a.i,function(a){return a==b})}function am(a,b){a.g.push(b);Qb(b,function(){Ia(a.g,b)});return b}h=Ul.prototype;
h.xa=function(){var a=this;return this.c?this.c:this.c=am(this,A().then(function(){if(Sf())return Hf();throw new N("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.");}).then(function(){return bm(cm(),a.o())}).then(function(){return Q(a.u,ui,{})}).then(function(b){a.a[Vl]=b.recaptchaSiteKey}).s(function(b){a.c=null;throw b;}))};
h.render=function(){dm(this);var a=this;return am(this,this.xa().then(function(){if(null===a.b){var b=a.l;if(!a.h){var c=wc(b);b=zc("DIV");c.appendChild(b)}a.b=grecaptcha.render(b,a.a)}return a.b}))};h.verify=function(){dm(this);var a=this;return am(this,this.render().then(function(b){return new z(function(c){var d=grecaptcha.getResponse(b);if(d)c(d);else{var e=function(b){b&&($l(a,e),c(b))};a.i.push(e);a.h&&grecaptcha.execute(a.b)}})}))};h.reset=function(){dm(this);null!==this.b&&grecaptcha.reset(this.b)};
function dm(a){if(a.m)throw new N("internal-error","RecaptchaVerifier instance has been destroyed.");}h.clear=function(){dm(this);this.m=!0;cm().b--;for(var a=0;a<this.g.length;a++)this.g[a].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.h){a=wc(this.l);for(var b;b=a.firstChild;)a.removeChild(b)}};var em=dc("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}");
function fm(){this.b=k.grecaptcha?Infinity:0;this.c=null;this.a="__rcb"+Math.floor(1E6*Math.random()).toString()}
function bm(a,b){return new z(function(c,d){if(Zf())if(!k.grecaptcha||b!==a.c&&!a.b){k[a.a]=function(){if(k.grecaptcha){a.c=b;var e=k.grecaptcha.render;k.grecaptcha.render=function(b,c){b=e(b,c);a.b++;return b};c()}else d(new N("internal-error"));delete k[a.a]};var e=hc(em,{onload:a.a,hl:b||""});A(kf(e)).s(function(){d(new N("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else c();else d(new N("network-request-failed"))})}var gm=null;
function cm(){gm||(gm=new fm);return gm}function hm(a,b,c){try{this.f=c||firebase.app()}catch(f){throw new N("argument-error","No firebase.app.App instance is currently initialized.");}if(this.f.options&&this.f.options.apiKey)c=this.f.options.apiKey;else throw new N("invalid-api-key");var d=this,e=null;try{e=this.f.auth().Ka()}catch(f){}e=firebase.SDK_VERSION?Of(firebase.SDK_VERSION,e):null;Ul.call(this,c,a,b,function(){try{var a=d.f.auth().$()}catch(g){a=null}return a},e,xi(yi))}t(hm,Ul);function Y(a,b){for(var c in b){var d=b[c].name;a[d]=im(d,a[c],b[c].j)}}function Z(a,b,c,d){a[b]=im(b,c,d)}function im(a,b,c){function d(){var a=Array.prototype.slice.call(arguments);Jl(e,c,a);return b.apply(this,a)}if(!c)return b;var e=jm(a),f;for(f in b)d[f]=b[f];for(f in b.prototype)d.prototype[f]=b.prototype[f];return d}function jm(a){a=a.split(".");return a[a.length-1]};Y(ul.prototype,{Sa:{name:"applyActionCode",j:[V("code")]},Ia:{name:"checkActionCode",j:[V("code")]},Ta:{name:"confirmPasswordReset",j:[V("code"),V("newPassword")]},Ob:{name:"createUserWithEmailAndPassword",j:[V("email"),V("password")]},qb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[V("email"),V("password")]},Rb:{name:"fetchProvidersForEmail",j:[V("email")]},aa:{name:"getRedirectResult",j:[]},hc:{name:"onAuthStateChanged",j:[X(W(),Ml(),"nextOrObserver"),Ml("opt_error",!0),Ml("opt_completed",
!0)]},ic:{name:"onIdTokenChanged",j:[X(W(),Ml(),"nextOrObserver"),Ml("opt_error",!0),Ml("opt_completed",!0)]},cb:{name:"sendPasswordResetEmail",j:[V("email"),X(W("opt_actionCodeSettings",!0),Nl(null,!0),"opt_actionCodeSettings",!0)]},eb:{name:"setPersistence",j:[V("persistence")]},fb:{name:"signInAndRetrieveDataWithCredential",j:[Rl()]},gb:{name:"signInAnonymously",j:[]},Gb:{name:"signInAnonymouslyAndRetrieveData",j:[]},sc:{name:"signInWithCredential",j:[Rl()]},tc:{name:"signInWithCustomToken",j:[V("token")]},
Eb:{name:"signInAndRetrieveDataWithCustomToken",j:[V("token")]},uc:{name:"signInWithEmailAndPassword",j:[V("email"),V("password")]},Fb:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[V("email"),V("password")]},vc:{name:"signInWithPhoneNumber",j:[V("phoneNumber"),Tl()]},wc:{name:"signInWithPopup",j:[Sl()]},xc:{name:"signInWithRedirect",j:[Sl()]},hb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[V(null,!0)]},Ec:{name:"useDeviceLanguage",j:[]},Fc:{name:"verifyPasswordResetCode",j:[V("code")]}});
(function(a,b){for(var c in b){var d=b[c].name;if(d!==c){var e=b[c].Nb;Object.defineProperty(a,d,{get:function(){return this[c]},set:function(a){Jl(d,[e],[a],!0);this[c]=a},enumerable:!0})}}})(ul.prototype,{lc:{name:"languageCode",Nb:X(V(),Nl(),"languageCode")}});ul.Persistence=nj;ul.Persistence.LOCAL="local";ul.Persistence.SESSION="session";ul.Persistence.NONE="none";
Y(Bk.prototype,{"delete":{name:"delete",j:[]},F:{name:"getIdToken",j:[Ll()]},getToken:{name:"getToken",j:[Ll()]},Xa:{name:"linkAndRetrieveDataWithCredential",j:[Rl()]},cc:{name:"linkWithCredential",j:[Rl()]},dc:{name:"linkWithPhoneNumber",j:[V("phoneNumber"),Tl()]},ec:{name:"linkWithPopup",j:[Sl()]},fc:{name:"linkWithRedirect",j:[Sl()]},Za:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Rl()]},mc:{name:"reauthenticateWithCredential",j:[Rl()]},nc:{name:"reauthenticateWithPhoneNumber",j:[V("phoneNumber"),
Tl()]},oc:{name:"reauthenticateWithPopup",j:[Sl()]},pc:{name:"reauthenticateWithRedirect",j:[Sl()]},reload:{name:"reload",j:[]},bb:{name:"sendEmailVerification",j:[X(W("opt_actionCodeSettings",!0),Nl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[V(null,!0)]},Cc:{name:"unlink",j:[V("provider")]},kb:{name:"updateEmail",j:[V("email")]},lb:{name:"updatePassword",j:[V("password")]},Dc:{name:"updatePhoneNumber",j:[Rl("phone")]},mb:{name:"updateProfile",j:[W("profile")]}});
Y(z.prototype,{s:{name:"catch"},then:{name:"then"}});Y(nk.prototype,{confirm:{name:"confirm",j:[V("verificationCode")]}});Z(mh,"credential",function(a,b){return new jh(a,b)},[V("email"),V("password")]);Y(bh.prototype,{sa:{name:"addScope",j:[V("scope")]},Ba:{name:"setCustomParameters",j:[W("customOAuthParameters")]}});Z(bh,"credential",ch,[X(V(),W(),"token")]);Y(dh.prototype,{sa:{name:"addScope",j:[V("scope")]},Ba:{name:"setCustomParameters",j:[W("customOAuthParameters")]}});
Z(dh,"credential",eh,[X(V(),W(),"token")]);Y(fh.prototype,{sa:{name:"addScope",j:[V("scope")]},Ba:{name:"setCustomParameters",j:[W("customOAuthParameters")]}});Z(fh,"credential",gh,[X(V(),X(W(),Nl()),"idToken"),X(V(),Nl(),"accessToken",!0)]);Y(hh.prototype,{Ba:{name:"setCustomParameters",j:[W("customOAuthParameters")]}});Z(hh,"credential",ih,[X(V(),W(),"token"),V("secret",!0)]);
Y(P.prototype,{sa:{name:"addScope",j:[V("scope")]},credential:{name:"credential",j:[X(V(),Nl(),"idToken",!0),X(V(),Nl(),"accessToken",!0)]},Ba:{name:"setCustomParameters",j:[W("customOAuthParameters")]}});Z(rh,"credential",th,[V("verificationId"),V("verificationCode")]);Y(rh.prototype,{Qa:{name:"verifyPhoneNumber",j:[V("phoneNumber"),Tl()]}});Y(N.prototype,{toJSON:{name:"toJSON",j:[V(null,!0)]}});Y(zh.prototype,{toJSON:{name:"toJSON",j:[V(null,!0)]}});
Y(yh.prototype,{toJSON:{name:"toJSON",j:[V(null,!0)]}});Y(hm.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}});
(function(){if("undefined"!==typeof firebase&&firebase.INTERNAL&&firebase.INTERNAL.registerService){var a={Auth:ul,Error:N};Z(a,"EmailAuthProvider",mh,[]);Z(a,"FacebookAuthProvider",bh,[]);Z(a,"GithubAuthProvider",dh,[]);Z(a,"GoogleAuthProvider",fh,[]);Z(a,"TwitterAuthProvider",hh,[]);Z(a,"OAuthProvider",P,[V("providerId")]);Z(a,"PhoneAuthProvider",rh,[Pl()]);Z(a,"RecaptchaVerifier",hm,[X(V(),Ol(),"recaptchaContainer"),W("recaptchaParameters",!0),Ql()]);firebase.INTERNAL.registerService("auth",function(a,
c){a=new ul(a);c({INTERNAL:{getUid:r(a.getUid,a),getToken:r(a.Vb,a),addAuthTokenListener:r(a.Mb,a),removeAuthTokenListener:r(a.qc,a)}});return a},a,function(a,c){if("create"===a)try{c.auth()}catch(d){}});firebase.INTERNAL.extendNamespace({User:Bk})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");})();
}).call(typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {});

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/index.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var app_1 = __webpack_require__(/*! @firebase/app */ "./node_modules/@firebase/app/dist/esm/index.js");
var Database_1 = __webpack_require__(/*! ./src/api/Database */ "./node_modules/@firebase/database/dist/cjs/src/api/Database.js");
exports.Database = Database_1.Database;
var Query_1 = __webpack_require__(/*! ./src/api/Query */ "./node_modules/@firebase/database/dist/cjs/src/api/Query.js");
exports.Query = Query_1.Query;
var Reference_1 = __webpack_require__(/*! ./src/api/Reference */ "./node_modules/@firebase/database/dist/cjs/src/api/Reference.js");
exports.Reference = Reference_1.Reference;
var util_1 = __webpack_require__(/*! ./src/core/util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
exports.enableLogging = util_1.enableLogging;
var RepoManager_1 = __webpack_require__(/*! ./src/core/RepoManager */ "./node_modules/@firebase/database/dist/cjs/src/core/RepoManager.js");
var INTERNAL = __webpack_require__(/*! ./src/api/internal */ "./node_modules/@firebase/database/dist/cjs/src/api/internal.js");
var TEST_ACCESS = __webpack_require__(/*! ./src/api/test_access */ "./node_modules/@firebase/database/dist/cjs/src/api/test_access.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var ServerValue = Database_1.Database.ServerValue;
exports.ServerValue = ServerValue;
function registerDatabase(instance) {
    // Register the Database Service with the 'firebase' namespace.
    var namespace = instance.INTERNAL.registerService('database', function (app, unused, url) { return RepoManager_1.RepoManager.getInstance().databaseFromApp(app, url); }, 
    // firebase.database namespace properties
    {
        Reference: Reference_1.Reference,
        Query: Query_1.Query,
        Database: Database_1.Database,
        enableLogging: util_1.enableLogging,
        INTERNAL: INTERNAL,
        ServerValue: ServerValue,
        TEST_ACCESS: TEST_ACCESS
    }, null, true);
    if (util_2.isNodeSdk()) {
        module.exports = namespace;
    }
}
exports.registerDatabase = registerDatabase;
registerDatabase(app_1.default);
var DataSnapshot_1 = __webpack_require__(/*! ./src/api/DataSnapshot */ "./node_modules/@firebase/database/dist/cjs/src/api/DataSnapshot.js");
exports.DataSnapshot = DataSnapshot_1.DataSnapshot;
var onDisconnect_1 = __webpack_require__(/*! ./src/api/onDisconnect */ "./node_modules/@firebase/database/dist/cjs/src/api/onDisconnect.js");
exports.OnDisconnect = onDisconnect_1.OnDisconnect;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/api/DataSnapshot.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/api/DataSnapshot.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var validation_1 = __webpack_require__(/*! ../core/util/validation */ "./node_modules/@firebase/database/dist/cjs/src/core/util/validation.js");
var Path_1 = __webpack_require__(/*! ../core/util/Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var PriorityIndex_1 = __webpack_require__(/*! ../core/snap/indexes/PriorityIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PriorityIndex.js");
/**
 * Class representing a firebase data snapshot.  It wraps a SnapshotNode and
 * surfaces the public methods (val, forEach, etc.) we want to expose.
 */
var DataSnapshot = /** @class */ (function () {
    /**
     * @param {!Node} node_ A SnapshotNode to wrap.
     * @param {!Reference} ref_ The ref of the location this snapshot came from.
     * @param {!Index} index_ The iteration order for this snapshot
     */
    function DataSnapshot(node_, ref_, index_) {
        this.node_ = node_;
        this.ref_ = ref_;
        this.index_ = index_;
    }
    /**
     * Retrieves the snapshot contents as JSON.  Returns null if the snapshot is
     * empty.
     *
     * @return {*} JSON representation of the DataSnapshot contents, or null if empty.
     */
    DataSnapshot.prototype.val = function () {
        util_1.validateArgCount('DataSnapshot.val', 0, 0, arguments.length);
        return this.node_.val();
    };
    /**
     * Returns the snapshot contents as JSON, including priorities of node.  Suitable for exporting
     * the entire node contents.
     * @return {*} JSON representation of the DataSnapshot contents, or null if empty.
     */
    DataSnapshot.prototype.exportVal = function () {
        util_1.validateArgCount('DataSnapshot.exportVal', 0, 0, arguments.length);
        return this.node_.val(true);
    };
    // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary
    // for end-users
    DataSnapshot.prototype.toJSON = function () {
        // Optional spacer argument is unnecessary because we're depending on recursion rather than stringifying the content
        util_1.validateArgCount('DataSnapshot.toJSON', 0, 1, arguments.length);
        return this.exportVal();
    };
    /**
     * Returns whether the snapshot contains a non-null value.
     *
     * @return {boolean} Whether the snapshot contains a non-null value, or is empty.
     */
    DataSnapshot.prototype.exists = function () {
        util_1.validateArgCount('DataSnapshot.exists', 0, 0, arguments.length);
        return !this.node_.isEmpty();
    };
    /**
     * Returns a DataSnapshot of the specified child node's contents.
     *
     * @param {!string} childPathString Path to a child.
     * @return {!DataSnapshot} DataSnapshot for child node.
     */
    DataSnapshot.prototype.child = function (childPathString) {
        util_1.validateArgCount('DataSnapshot.child', 0, 1, arguments.length);
        // Ensure the childPath is a string (can be a number)
        childPathString = String(childPathString);
        validation_1.validatePathString('DataSnapshot.child', 1, childPathString, false);
        var childPath = new Path_1.Path(childPathString);
        var childRef = this.ref_.child(childPath);
        return new DataSnapshot(this.node_.getChild(childPath), childRef, PriorityIndex_1.PRIORITY_INDEX);
    };
    /**
     * Returns whether the snapshot contains a child at the specified path.
     *
     * @param {!string} childPathString Path to a child.
     * @return {boolean} Whether the child exists.
     */
    DataSnapshot.prototype.hasChild = function (childPathString) {
        util_1.validateArgCount('DataSnapshot.hasChild', 1, 1, arguments.length);
        validation_1.validatePathString('DataSnapshot.hasChild', 1, childPathString, false);
        var childPath = new Path_1.Path(childPathString);
        return !this.node_.getChild(childPath).isEmpty();
    };
    /**
     * Returns the priority of the object, or null if no priority was set.
     *
     * @return {string|number|null} The priority.
     */
    DataSnapshot.prototype.getPriority = function () {
        util_1.validateArgCount('DataSnapshot.getPriority', 0, 0, arguments.length);
        // typecast here because we never return deferred values or internal priorities (MAX_PRIORITY)
        return this.node_.getPriority().val();
    };
    /**
     * Iterates through child nodes and calls the specified action for each one.
     *
     * @param {function(!DataSnapshot)} action Callback function to be called
     * for each child.
     * @return {boolean} True if forEach was canceled by action returning true for
     * one of the child nodes.
     */
    DataSnapshot.prototype.forEach = function (action) {
        var _this = this;
        util_1.validateArgCount('DataSnapshot.forEach', 1, 1, arguments.length);
        util_1.validateCallback('DataSnapshot.forEach', 1, action, false);
        if (this.node_.isLeafNode())
            return false;
        var childrenNode = this.node_;
        // Sanitize the return value to a boolean. ChildrenNode.forEachChild has a weird return type...
        return !!childrenNode.forEachChild(this.index_, function (key, node) {
            return action(new DataSnapshot(node, _this.ref_.child(key), PriorityIndex_1.PRIORITY_INDEX));
        });
    };
    /**
     * Returns whether this DataSnapshot has children.
     * @return {boolean} True if the DataSnapshot contains 1 or more child nodes.
     */
    DataSnapshot.prototype.hasChildren = function () {
        util_1.validateArgCount('DataSnapshot.hasChildren', 0, 0, arguments.length);
        if (this.node_.isLeafNode())
            return false;
        else
            return !this.node_.isEmpty();
    };
    Object.defineProperty(DataSnapshot.prototype, "key", {
        get: function () {
            return this.ref_.getKey();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Returns the number of children for this DataSnapshot.
     * @return {number} The number of children that this DataSnapshot contains.
     */
    DataSnapshot.prototype.numChildren = function () {
        util_1.validateArgCount('DataSnapshot.numChildren', 0, 0, arguments.length);
        return this.node_.numChildren();
    };
    /**
     * @return {Reference} The Firebase reference for the location this snapshot's data came from.
     */
    DataSnapshot.prototype.getRef = function () {
        util_1.validateArgCount('DataSnapshot.ref', 0, 0, arguments.length);
        return this.ref_;
    };
    Object.defineProperty(DataSnapshot.prototype, "ref", {
        get: function () {
            return this.getRef();
        },
        enumerable: true,
        configurable: true
    });
    return DataSnapshot;
}());
exports.DataSnapshot = DataSnapshot;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/api/Database.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/api/Database.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! ../core/util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var parser_1 = __webpack_require__(/*! ../core/util/libs/parser */ "./node_modules/@firebase/database/dist/cjs/src/core/util/libs/parser.js");
var Path_1 = __webpack_require__(/*! ../core/util/Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var Reference_1 = __webpack_require__(/*! ./Reference */ "./node_modules/@firebase/database/dist/cjs/src/api/Reference.js");
var Repo_1 = __webpack_require__(/*! ../core/Repo */ "./node_modules/@firebase/database/dist/cjs/src/core/Repo.js");
var RepoManager_1 = __webpack_require__(/*! ../core/RepoManager */ "./node_modules/@firebase/database/dist/cjs/src/core/RepoManager.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var validation_1 = __webpack_require__(/*! ../core/util/validation */ "./node_modules/@firebase/database/dist/cjs/src/core/util/validation.js");
/**
 * Class representing a firebase database.
 * @implements {FirebaseService}
 */
var Database = /** @class */ (function () {
    /**
     * The constructor should not be called by users of our public API.
     * @param {!Repo} repo_
     */
    function Database(repo_) {
        this.repo_ = repo_;
        if (!(repo_ instanceof Repo_1.Repo)) {
            util_1.fatal("Don't call new Database() directly - please use firebase.database().");
        }
        /** @type {Reference} */
        this.root_ = new Reference_1.Reference(repo_, Path_1.Path.Empty);
        this.INTERNAL = new DatabaseInternals(this);
    }
    Object.defineProperty(Database.prototype, "app", {
        get: function () {
            return this.repo_.app;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Returns a reference to the root or the path specified in opt_pathString.
     * @param {string=} pathString
     * @return {!Reference} Firebase reference.
     */
    Database.prototype.ref = function (pathString) {
        this.checkDeleted_('ref');
        util_2.validateArgCount('database.ref', 0, 1, arguments.length);
        return pathString !== undefined ? this.root_.child(pathString) : this.root_;
    };
    /**
     * Returns a reference to the root or the path specified in url.
     * We throw a exception if the url is not in the same domain as the
     * current repo.
     * @param {string} url
     * @return {!Reference} Firebase reference.
     */
    Database.prototype.refFromURL = function (url) {
        /** @const {string} */
        var apiName = 'database.refFromURL';
        this.checkDeleted_(apiName);
        util_2.validateArgCount(apiName, 1, 1, arguments.length);
        var parsedURL = parser_1.parseRepoInfo(url);
        validation_1.validateUrl(apiName, 1, parsedURL);
        var repoInfo = parsedURL.repoInfo;
        if (repoInfo.host !== this.repo_.repoInfo_.host) {
            util_1.fatal(apiName +
                ': Host name does not match the current database: ' +
                '(found ' +
                repoInfo.host +
                ' but expected ' +
                this.repo_.repoInfo_.host +
                ')');
        }
        return this.ref(parsedURL.path.toString());
    };
    /**
     * @param {string} apiName
     */
    Database.prototype.checkDeleted_ = function (apiName) {
        if (this.repo_ === null) {
            util_1.fatal('Cannot call ' + apiName + ' on a deleted database.');
        }
    };
    // Make individual repo go offline.
    Database.prototype.goOffline = function () {
        util_2.validateArgCount('database.goOffline', 0, 0, arguments.length);
        this.checkDeleted_('goOffline');
        this.repo_.interrupt();
    };
    Database.prototype.goOnline = function () {
        util_2.validateArgCount('database.goOnline', 0, 0, arguments.length);
        this.checkDeleted_('goOnline');
        this.repo_.resume();
    };
    Database.ServerValue = {
        TIMESTAMP: {
            '.sv': 'timestamp'
        }
    };
    return Database;
}());
exports.Database = Database;
var DatabaseInternals = /** @class */ (function () {
    /** @param {!Database} database */
    function DatabaseInternals(database) {
        this.database = database;
    }
    /** @return {Promise<void>} */
    DatabaseInternals.prototype.delete = function () {
        this.database.checkDeleted_('delete');
        RepoManager_1.RepoManager.getInstance().deleteRepo(this.database.repo_);
        this.database.repo_ = null;
        this.database.root_ = null;
        this.database.INTERNAL = null;
        this.database = null;
        return Promise.resolve();
    };
    return DatabaseInternals;
}());
exports.DatabaseInternals = DatabaseInternals;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/api/Query.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/api/Query.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var KeyIndex_1 = __webpack_require__(/*! ../core/snap/indexes/KeyIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/KeyIndex.js");
var PriorityIndex_1 = __webpack_require__(/*! ../core/snap/indexes/PriorityIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PriorityIndex.js");
var ValueIndex_1 = __webpack_require__(/*! ../core/snap/indexes/ValueIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/ValueIndex.js");
var PathIndex_1 = __webpack_require__(/*! ../core/snap/indexes/PathIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PathIndex.js");
var util_2 = __webpack_require__(/*! ../core/util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var Path_1 = __webpack_require__(/*! ../core/util/Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var validation_1 = __webpack_require__(/*! ../core/util/validation */ "./node_modules/@firebase/database/dist/cjs/src/core/util/validation.js");
var util_3 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var EventRegistration_1 = __webpack_require__(/*! ../core/view/EventRegistration */ "./node_modules/@firebase/database/dist/cjs/src/core/view/EventRegistration.js");
var util_4 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var __referenceConstructor;
/**
 * A Query represents a filter to be applied to a firebase location.  This object purely represents the
 * query expression (and exposes our public API to build the query).  The actual query logic is in ViewBase.js.
 *
 * Since every Firebase reference is a query, Firebase inherits from this object.
 */
var Query = /** @class */ (function () {
    function Query(repo, path, queryParams_, orderByCalled_) {
        this.repo = repo;
        this.path = path;
        this.queryParams_ = queryParams_;
        this.orderByCalled_ = orderByCalled_;
    }
    Object.defineProperty(Query, "__referenceConstructor", {
        get: function () {
            util_1.assert(__referenceConstructor, 'Reference.ts has not been loaded');
            return __referenceConstructor;
        },
        set: function (val) {
            __referenceConstructor = val;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Validates start/end values for queries.
     * @param {!QueryParams} params
     * @private
     */
    Query.validateQueryEndpoints_ = function (params) {
        var startNode = null;
        var endNode = null;
        if (params.hasStart()) {
            startNode = params.getIndexStartValue();
        }
        if (params.hasEnd()) {
            endNode = params.getIndexEndValue();
        }
        if (params.getIndex() === KeyIndex_1.KEY_INDEX) {
            var tooManyArgsError = 'Query: When ordering by key, you may only pass one argument to ' +
                'startAt(), endAt(), or equalTo().';
            var wrongArgTypeError = 'Query: When ordering by key, the argument passed to startAt(), endAt(),' +
                'or equalTo() must be a string.';
            if (params.hasStart()) {
                var startName = params.getIndexStartName();
                if (startName != util_2.MIN_NAME) {
                    throw new Error(tooManyArgsError);
                }
                else if (typeof startNode !== 'string') {
                    throw new Error(wrongArgTypeError);
                }
            }
            if (params.hasEnd()) {
                var endName = params.getIndexEndName();
                if (endName != util_2.MAX_NAME) {
                    throw new Error(tooManyArgsError);
                }
                else if (typeof endNode !== 'string') {
                    throw new Error(wrongArgTypeError);
                }
            }
        }
        else if (params.getIndex() === PriorityIndex_1.PRIORITY_INDEX) {
            if ((startNode != null && !validation_1.isValidPriority(startNode)) ||
                (endNode != null && !validation_1.isValidPriority(endNode))) {
                throw new Error('Query: When ordering by priority, the first argument passed to startAt(), ' +
                    'endAt(), or equalTo() must be a valid priority value (null, a number, or a string).');
            }
        }
        else {
            util_1.assert(params.getIndex() instanceof PathIndex_1.PathIndex ||
                params.getIndex() === ValueIndex_1.VALUE_INDEX, 'unknown index type.');
            if ((startNode != null && typeof startNode === 'object') ||
                (endNode != null && typeof endNode === 'object')) {
                throw new Error('Query: First argument passed to startAt(), endAt(), or equalTo() cannot be ' +
                    'an object.');
            }
        }
    };
    /**
     * Validates that limit* has been called with the correct combination of parameters
     * @param {!QueryParams} params
     * @private
     */
    Query.validateLimit_ = function (params) {
        if (params.hasStart() &&
            params.hasEnd() &&
            params.hasLimit() &&
            !params.hasAnchoredLimit()) {
            throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.");
        }
    };
    /**
     * Validates that no other order by call has been made
     * @param {!string} fnName
     * @private
     */
    Query.prototype.validateNoPreviousOrderByCall_ = function (fnName) {
        if (this.orderByCalled_ === true) {
            throw new Error(fnName + ": You can't combine multiple orderBy calls.");
        }
    };
    /**
     * @return {!QueryParams}
     */
    Query.prototype.getQueryParams = function () {
        return this.queryParams_;
    };
    /**
     * @return {!Reference}
     */
    Query.prototype.getRef = function () {
        util_3.validateArgCount('Query.ref', 0, 0, arguments.length);
        // This is a slight hack. We cannot goog.require('fb.api.Firebase'), since Firebase requires fb.api.Query.
        // However, we will always export 'Firebase' to the global namespace, so it's guaranteed to exist by the time this
        // method gets called.
        return new Query.__referenceConstructor(this.repo, this.path);
    };
    /**
     * @param {!string} eventType
     * @param {!function(DataSnapshot, string=)} callback
     * @param {(function(Error)|Object)=} cancelCallbackOrContext
     * @param {Object=} context
     * @return {!function(DataSnapshot, string=)}
     */
    Query.prototype.on = function (eventType, callback, cancelCallbackOrContext, context) {
        util_3.validateArgCount('Query.on', 2, 4, arguments.length);
        validation_1.validateEventType('Query.on', 1, eventType, false);
        util_3.validateCallback('Query.on', 2, callback, false);
        var ret = Query.getCancelAndContextArgs_('Query.on', cancelCallbackOrContext, context);
        if (eventType === 'value') {
            this.onValueEvent(callback, ret.cancel, ret.context);
        }
        else {
            var callbacks = {};
            callbacks[eventType] = callback;
            this.onChildEvent(callbacks, ret.cancel, ret.context);
        }
        return callback;
    };
    /**
     * @param {!function(!DataSnapshot)} callback
     * @param {?function(Error)} cancelCallback
     * @param {?Object} context
     * @protected
     */
    Query.prototype.onValueEvent = function (callback, cancelCallback, context) {
        var container = new EventRegistration_1.ValueEventRegistration(callback, cancelCallback || null, context || null);
        this.repo.addEventCallbackForQuery(this, container);
    };
    /**
     * @param {!Object.<string, !function(!DataSnapshot, ?string)>} callbacks
     * @param {?function(Error)} cancelCallback
     * @param {?Object} context
     * @protected
     */
    Query.prototype.onChildEvent = function (callbacks, cancelCallback, context) {
        var container = new EventRegistration_1.ChildEventRegistration(callbacks, cancelCallback, context);
        this.repo.addEventCallbackForQuery(this, container);
    };
    /**
     * @param {string=} eventType
     * @param {(function(!DataSnapshot, ?string=))=} callback
     * @param {Object=} context
     */
    Query.prototype.off = function (eventType, callback, context) {
        util_3.validateArgCount('Query.off', 0, 3, arguments.length);
        validation_1.validateEventType('Query.off', 1, eventType, true);
        util_3.validateCallback('Query.off', 2, callback, true);
        util_3.validateContextObject('Query.off', 3, context, true);
        var container = null;
        var callbacks = null;
        if (eventType === 'value') {
            var valueCallback = callback || null;
            container = new EventRegistration_1.ValueEventRegistration(valueCallback, null, context || null);
        }
        else if (eventType) {
            if (callback) {
                callbacks = {};
                callbacks[eventType] = callback;
            }
            container = new EventRegistration_1.ChildEventRegistration(callbacks, null, context || null);
        }
        this.repo.removeEventCallbackForQuery(this, container);
    };
    /**
     * Attaches a listener, waits for the first event, and then removes the listener
     * @param {!string} eventType
     * @param {!function(!DataSnapshot, string=)} userCallback
     * @param cancelOrContext
     * @param context
     * @return {!firebase.Promise}
     */
    Query.prototype.once = function (eventType, userCallback, cancelOrContext, context) {
        var _this = this;
        util_3.validateArgCount('Query.once', 1, 4, arguments.length);
        validation_1.validateEventType('Query.once', 1, eventType, false);
        util_3.validateCallback('Query.once', 2, userCallback, true);
        var ret = Query.getCancelAndContextArgs_('Query.once', cancelOrContext, context);
        // TODO: Implement this more efficiently (in particular, use 'get' wire protocol for 'value' event)
        // TODO: consider actually wiring the callbacks into the promise. We cannot do this without a breaking change
        // because the API currently expects callbacks will be called synchronously if the data is cached, but this is
        // against the Promise specification.
        var firstCall = true;
        var deferred = new util_4.Deferred();
        // A dummy error handler in case a user wasn't expecting promises
        deferred.promise.catch(function () { });
        var onceCallback = function (snapshot) {
            // NOTE: Even though we unsubscribe, we may get called multiple times if a single action (e.g. set() with JSON)
            // triggers multiple events (e.g. child_added or child_changed).
            if (firstCall) {
                firstCall = false;
                _this.off(eventType, onceCallback);
                if (userCallback) {
                    userCallback.bind(ret.context)(snapshot);
                }
                deferred.resolve(snapshot);
            }
        };
        this.on(eventType, onceCallback, 
        /*cancel=*/ function (err) {
            _this.off(eventType, onceCallback);
            if (ret.cancel)
                ret.cancel.bind(ret.context)(err);
            deferred.reject(err);
        });
        return deferred.promise;
    };
    /**
     * Set a limit and anchor it to the start of the window.
     * @param {!number} limit
     * @return {!Query}
     */
    Query.prototype.limitToFirst = function (limit) {
        util_3.validateArgCount('Query.limitToFirst', 1, 1, arguments.length);
        if (typeof limit !== 'number' ||
            Math.floor(limit) !== limit ||
            limit <= 0) {
            throw new Error('Query.limitToFirst: First argument must be a positive integer.');
        }
        if (this.queryParams_.hasLimit()) {
            throw new Error('Query.limitToFirst: Limit was already set (by another call to limit, ' +
                'limitToFirst, or limitToLast).');
        }
        return new Query(this.repo, this.path, this.queryParams_.limitToFirst(limit), this.orderByCalled_);
    };
    /**
     * Set a limit and anchor it to the end of the window.
     * @param {!number} limit
     * @return {!Query}
     */
    Query.prototype.limitToLast = function (limit) {
        util_3.validateArgCount('Query.limitToLast', 1, 1, arguments.length);
        if (typeof limit !== 'number' ||
            Math.floor(limit) !== limit ||
            limit <= 0) {
            throw new Error('Query.limitToLast: First argument must be a positive integer.');
        }
        if (this.queryParams_.hasLimit()) {
            throw new Error('Query.limitToLast: Limit was already set (by another call to limit, ' +
                'limitToFirst, or limitToLast).');
        }
        return new Query(this.repo, this.path, this.queryParams_.limitToLast(limit), this.orderByCalled_);
    };
    /**
     * Given a child path, return a new query ordered by the specified grandchild path.
     * @param {!string} path
     * @return {!Query}
     */
    Query.prototype.orderByChild = function (path) {
        util_3.validateArgCount('Query.orderByChild', 1, 1, arguments.length);
        if (path === '$key') {
            throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');
        }
        else if (path === '$priority') {
            throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');
        }
        else if (path === '$value') {
            throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');
        }
        validation_1.validatePathString('Query.orderByChild', 1, path, false);
        this.validateNoPreviousOrderByCall_('Query.orderByChild');
        var parsedPath = new Path_1.Path(path);
        if (parsedPath.isEmpty()) {
            throw new Error('Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.');
        }
        var index = new PathIndex_1.PathIndex(parsedPath);
        var newParams = this.queryParams_.orderBy(index);
        Query.validateQueryEndpoints_(newParams);
        return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);
    };
    /**
     * Return a new query ordered by the KeyIndex
     * @return {!Query}
     */
    Query.prototype.orderByKey = function () {
        util_3.validateArgCount('Query.orderByKey', 0, 0, arguments.length);
        this.validateNoPreviousOrderByCall_('Query.orderByKey');
        var newParams = this.queryParams_.orderBy(KeyIndex_1.KEY_INDEX);
        Query.validateQueryEndpoints_(newParams);
        return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);
    };
    /**
     * Return a new query ordered by the PriorityIndex
     * @return {!Query}
     */
    Query.prototype.orderByPriority = function () {
        util_3.validateArgCount('Query.orderByPriority', 0, 0, arguments.length);
        this.validateNoPreviousOrderByCall_('Query.orderByPriority');
        var newParams = this.queryParams_.orderBy(PriorityIndex_1.PRIORITY_INDEX);
        Query.validateQueryEndpoints_(newParams);
        return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);
    };
    /**
     * Return a new query ordered by the ValueIndex
     * @return {!Query}
     */
    Query.prototype.orderByValue = function () {
        util_3.validateArgCount('Query.orderByValue', 0, 0, arguments.length);
        this.validateNoPreviousOrderByCall_('Query.orderByValue');
        var newParams = this.queryParams_.orderBy(ValueIndex_1.VALUE_INDEX);
        Query.validateQueryEndpoints_(newParams);
        return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);
    };
    /**
     * @param {number|string|boolean|null} value
     * @param {?string=} name
     * @return {!Query}
     */
    Query.prototype.startAt = function (value, name) {
        if (value === void 0) { value = null; }
        util_3.validateArgCount('Query.startAt', 0, 2, arguments.length);
        validation_1.validateFirebaseDataArg('Query.startAt', 1, value, this.path, true);
        validation_1.validateKey('Query.startAt', 2, name, true);
        var newParams = this.queryParams_.startAt(value, name);
        Query.validateLimit_(newParams);
        Query.validateQueryEndpoints_(newParams);
        if (this.queryParams_.hasStart()) {
            throw new Error('Query.startAt: Starting point was already set (by another call to startAt ' +
                'or equalTo).');
        }
        // Calling with no params tells us to start at the beginning.
        if (value === undefined) {
            value = null;
            name = null;
        }
        return new Query(this.repo, this.path, newParams, this.orderByCalled_);
    };
    /**
     * @param {number|string|boolean|null} value
     * @param {?string=} name
     * @return {!Query}
     */
    Query.prototype.endAt = function (value, name) {
        if (value === void 0) { value = null; }
        util_3.validateArgCount('Query.endAt', 0, 2, arguments.length);
        validation_1.validateFirebaseDataArg('Query.endAt', 1, value, this.path, true);
        validation_1.validateKey('Query.endAt', 2, name, true);
        var newParams = this.queryParams_.endAt(value, name);
        Query.validateLimit_(newParams);
        Query.validateQueryEndpoints_(newParams);
        if (this.queryParams_.hasEnd()) {
            throw new Error('Query.endAt: Ending point was already set (by another call to endAt or ' +
                'equalTo).');
        }
        return new Query(this.repo, this.path, newParams, this.orderByCalled_);
    };
    /**
     * Load the selection of children with exactly the specified value, and, optionally,
     * the specified name.
     * @param {number|string|boolean|null} value
     * @param {string=} name
     * @return {!Query}
     */
    Query.prototype.equalTo = function (value, name) {
        util_3.validateArgCount('Query.equalTo', 1, 2, arguments.length);
        validation_1.validateFirebaseDataArg('Query.equalTo', 1, value, this.path, false);
        validation_1.validateKey('Query.equalTo', 2, name, true);
        if (this.queryParams_.hasStart()) {
            throw new Error('Query.equalTo: Starting point was already set (by another call to startAt or ' +
                'equalTo).');
        }
        if (this.queryParams_.hasEnd()) {
            throw new Error('Query.equalTo: Ending point was already set (by another call to endAt or ' +
                'equalTo).');
        }
        return this.startAt(value, name).endAt(value, name);
    };
    /**
     * @return {!string} URL for this location.
     */
    Query.prototype.toString = function () {
        util_3.validateArgCount('Query.toString', 0, 0, arguments.length);
        return this.repo.toString() + this.path.toUrlEncodedString();
    };
    // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary
    // for end-users.
    Query.prototype.toJSON = function () {
        // An optional spacer argument is unnecessary for a string.
        util_3.validateArgCount('Query.toJSON', 0, 1, arguments.length);
        return this.toString();
    };
    /**
     * An object representation of the query parameters used by this Query.
     * @return {!Object}
     */
    Query.prototype.queryObject = function () {
        return this.queryParams_.getQueryObject();
    };
    /**
     * @return {!string}
     */
    Query.prototype.queryIdentifier = function () {
        var obj = this.queryObject();
        var id = util_2.ObjectToUniqueKey(obj);
        return id === '{}' ? 'default' : id;
    };
    /**
     * Return true if this query and the provided query are equivalent; otherwise, return false.
     * @param {Query} other
     * @return {boolean}
     */
    Query.prototype.isEqual = function (other) {
        util_3.validateArgCount('Query.isEqual', 1, 1, arguments.length);
        if (!(other instanceof Query)) {
            var error = 'Query.isEqual failed: First argument must be an instance of firebase.database.Query.';
            throw new Error(error);
        }
        var sameRepo = this.repo === other.repo;
        var samePath = this.path.equals(other.path);
        var sameQueryIdentifier = this.queryIdentifier() === other.queryIdentifier();
        return sameRepo && samePath && sameQueryIdentifier;
    };
    /**
     * Helper used by .on and .once to extract the context and or cancel arguments.
     * @param {!string} fnName The function name (on or once)
     * @param {(function(Error)|Object)=} cancelOrContext
     * @param {Object=} context
     * @return {{cancel: ?function(Error), context: ?Object}}
     * @private
     */
    Query.getCancelAndContextArgs_ = function (fnName, cancelOrContext, context) {
        var ret = { cancel: null, context: null };
        if (cancelOrContext && context) {
            ret.cancel = cancelOrContext;
            util_3.validateCallback(fnName, 3, ret.cancel, true);
            ret.context = context;
            util_3.validateContextObject(fnName, 4, ret.context, true);
        }
        else if (cancelOrContext) {
            // we have either a cancel callback or a context.
            if (typeof cancelOrContext === 'object' && cancelOrContext !== null) {
                // it's a context!
                ret.context = cancelOrContext;
            }
            else if (typeof cancelOrContext === 'function') {
                ret.cancel = cancelOrContext;
            }
            else {
                throw new Error(util_3.errorPrefix(fnName, 3, true) +
                    ' must either be a cancel callback or a context object.');
            }
        }
        return ret;
    };
    Object.defineProperty(Query.prototype, "ref", {
        get: function () {
            return this.getRef();
        },
        enumerable: true,
        configurable: true
    });
    return Query;
}());
exports.Query = Query;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/api/Reference.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/api/Reference.js ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var onDisconnect_1 = __webpack_require__(/*! ./onDisconnect */ "./node_modules/@firebase/database/dist/cjs/src/api/onDisconnect.js");
var TransactionResult_1 = __webpack_require__(/*! ./TransactionResult */ "./node_modules/@firebase/database/dist/cjs/src/api/TransactionResult.js");
var util_1 = __webpack_require__(/*! ../core/util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var NextPushId_1 = __webpack_require__(/*! ../core/util/NextPushId */ "./node_modules/@firebase/database/dist/cjs/src/core/util/NextPushId.js");
var Query_1 = __webpack_require__(/*! ./Query */ "./node_modules/@firebase/database/dist/cjs/src/api/Query.js");
var Repo_1 = __webpack_require__(/*! ../core/Repo */ "./node_modules/@firebase/database/dist/cjs/src/core/Repo.js");
var Path_1 = __webpack_require__(/*! ../core/util/Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var QueryParams_1 = __webpack_require__(/*! ../core/view/QueryParams */ "./node_modules/@firebase/database/dist/cjs/src/core/view/QueryParams.js");
var validation_1 = __webpack_require__(/*! ../core/util/validation */ "./node_modules/@firebase/database/dist/cjs/src/core/util/validation.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_3 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var SyncPoint_1 = __webpack_require__(/*! ../core/SyncPoint */ "./node_modules/@firebase/database/dist/cjs/src/core/SyncPoint.js");
var Reference = /** @class */ (function (_super) {
    __extends(Reference, _super);
    /**
     * Call options:
     *   new Reference(Repo, Path) or
     *   new Reference(url: string, string|RepoManager)
     *
     * Externally - this is the firebase.database.Reference type.
     *
     * @param {!Repo} repo
     * @param {(!Path)} path
     * @extends {Query}
     */
    function Reference(repo, path) {
        var _this = this;
        if (!(repo instanceof Repo_1.Repo)) {
            throw new Error('new Reference() no longer supported - use app.database().');
        }
        // call Query's constructor, passing in the repo and path.
        _this = _super.call(this, repo, path, QueryParams_1.QueryParams.DEFAULT, false) || this;
        return _this;
    }
    /** @return {?string} */
    Reference.prototype.getKey = function () {
        util_2.validateArgCount('Reference.key', 0, 0, arguments.length);
        if (this.path.isEmpty())
            return null;
        else
            return this.path.getBack();
    };
    /**
     * @param {!(string|Path)} pathString
     * @return {!Reference}
     */
    Reference.prototype.child = function (pathString) {
        util_2.validateArgCount('Reference.child', 1, 1, arguments.length);
        if (typeof pathString === 'number') {
            pathString = String(pathString);
        }
        else if (!(pathString instanceof Path_1.Path)) {
            if (this.path.getFront() === null)
                validation_1.validateRootPathString('Reference.child', 1, pathString, false);
            else
                validation_1.validatePathString('Reference.child', 1, pathString, false);
        }
        return new Reference(this.repo, this.path.child(pathString));
    };
    /** @return {?Reference} */
    Reference.prototype.getParent = function () {
        util_2.validateArgCount('Reference.parent', 0, 0, arguments.length);
        var parentPath = this.path.parent();
        return parentPath === null ? null : new Reference(this.repo, parentPath);
    };
    /** @return {!Reference} */
    Reference.prototype.getRoot = function () {
        util_2.validateArgCount('Reference.root', 0, 0, arguments.length);
        var ref = this;
        while (ref.getParent() !== null) {
            ref = ref.getParent();
        }
        return ref;
    };
    /** @return {!Database} */
    Reference.prototype.databaseProp = function () {
        return this.repo.database;
    };
    /**
     * @param {*} newVal
     * @param {function(?Error)=} onComplete
     * @return {!Promise}
     */
    Reference.prototype.set = function (newVal, onComplete) {
        util_2.validateArgCount('Reference.set', 1, 2, arguments.length);
        validation_1.validateWritablePath('Reference.set', this.path);
        validation_1.validateFirebaseDataArg('Reference.set', 1, newVal, this.path, false);
        util_2.validateCallback('Reference.set', 2, onComplete, true);
        var deferred = new util_3.Deferred();
        this.repo.setWithPriority(this.path, newVal, 
        /*priority=*/ null, deferred.wrapCallback(onComplete));
        return deferred.promise;
    };
    /**
     * @param {!Object} objectToMerge
     * @param {function(?Error)=} onComplete
     * @return {!Promise}
     */
    Reference.prototype.update = function (objectToMerge, onComplete) {
        util_2.validateArgCount('Reference.update', 1, 2, arguments.length);
        validation_1.validateWritablePath('Reference.update', this.path);
        if (Array.isArray(objectToMerge)) {
            var newObjectToMerge = {};
            for (var i = 0; i < objectToMerge.length; ++i) {
                newObjectToMerge['' + i] = objectToMerge[i];
            }
            objectToMerge = newObjectToMerge;
            util_1.warn('Passing an Array to Firebase.update() is deprecated. ' +
                'Use set() if you want to overwrite the existing data, or ' +
                'an Object with integer keys if you really do want to ' +
                'only update some of the children.');
        }
        validation_1.validateFirebaseMergeDataArg('Reference.update', 1, objectToMerge, this.path, false);
        util_2.validateCallback('Reference.update', 2, onComplete, true);
        var deferred = new util_3.Deferred();
        this.repo.update(this.path, objectToMerge, deferred.wrapCallback(onComplete));
        return deferred.promise;
    };
    /**
     * @param {*} newVal
     * @param {string|number|null} newPriority
     * @param {function(?Error)=} onComplete
     * @return {!Promise}
     */
    Reference.prototype.setWithPriority = function (newVal, newPriority, onComplete) {
        util_2.validateArgCount('Reference.setWithPriority', 2, 3, arguments.length);
        validation_1.validateWritablePath('Reference.setWithPriority', this.path);
        validation_1.validateFirebaseDataArg('Reference.setWithPriority', 1, newVal, this.path, false);
        validation_1.validatePriority('Reference.setWithPriority', 2, newPriority, false);
        util_2.validateCallback('Reference.setWithPriority', 3, onComplete, true);
        if (this.getKey() === '.length' || this.getKey() === '.keys')
            throw 'Reference.setWithPriority failed: ' +
                this.getKey() +
                ' is a read-only object.';
        var deferred = new util_3.Deferred();
        this.repo.setWithPriority(this.path, newVal, newPriority, deferred.wrapCallback(onComplete));
        return deferred.promise;
    };
    /**
     * @param {function(?Error)=} onComplete
     * @return {!Promise}
     */
    Reference.prototype.remove = function (onComplete) {
        util_2.validateArgCount('Reference.remove', 0, 1, arguments.length);
        validation_1.validateWritablePath('Reference.remove', this.path);
        util_2.validateCallback('Reference.remove', 1, onComplete, true);
        return this.set(null, onComplete);
    };
    /**
     * @param {function(*):*} transactionUpdate
     * @param {(function(?Error, boolean, ?DataSnapshot))=} onComplete
     * @param {boolean=} applyLocally
     * @return {!Promise}
     */
    Reference.prototype.transaction = function (transactionUpdate, onComplete, applyLocally) {
        util_2.validateArgCount('Reference.transaction', 1, 3, arguments.length);
        validation_1.validateWritablePath('Reference.transaction', this.path);
        util_2.validateCallback('Reference.transaction', 1, transactionUpdate, false);
        util_2.validateCallback('Reference.transaction', 2, onComplete, true);
        // NOTE: applyLocally is an internal-only option for now.  We need to decide if we want to keep it and how
        // to expose it.
        validation_1.validateBoolean('Reference.transaction', 3, applyLocally, true);
        if (this.getKey() === '.length' || this.getKey() === '.keys')
            throw 'Reference.transaction failed: ' +
                this.getKey() +
                ' is a read-only object.';
        if (applyLocally === undefined)
            applyLocally = true;
        var deferred = new util_3.Deferred();
        if (typeof onComplete === 'function') {
            deferred.promise.catch(function () { });
        }
        var promiseComplete = function (error, committed, snapshot) {
            if (error) {
                deferred.reject(error);
            }
            else {
                deferred.resolve(new TransactionResult_1.TransactionResult(committed, snapshot));
            }
            if (typeof onComplete === 'function') {
                onComplete(error, committed, snapshot);
            }
        };
        this.repo.startTransaction(this.path, transactionUpdate, promiseComplete, applyLocally);
        return deferred.promise;
    };
    /**
     * @param {string|number|null} priority
     * @param {function(?Error)=} onComplete
     * @return {!Promise}
     */
    Reference.prototype.setPriority = function (priority, onComplete) {
        util_2.validateArgCount('Reference.setPriority', 1, 2, arguments.length);
        validation_1.validateWritablePath('Reference.setPriority', this.path);
        validation_1.validatePriority('Reference.setPriority', 1, priority, false);
        util_2.validateCallback('Reference.setPriority', 2, onComplete, true);
        var deferred = new util_3.Deferred();
        this.repo.setWithPriority(this.path.child('.priority'), priority, null, deferred.wrapCallback(onComplete));
        return deferred.promise;
    };
    /**
     * @param {*=} value
     * @param {function(?Error)=} onComplete
     * @return {!Reference}
     */
    Reference.prototype.push = function (value, onComplete) {
        util_2.validateArgCount('Reference.push', 0, 2, arguments.length);
        validation_1.validateWritablePath('Reference.push', this.path);
        validation_1.validateFirebaseDataArg('Reference.push', 1, value, this.path, true);
        util_2.validateCallback('Reference.push', 2, onComplete, true);
        var now = this.repo.serverTime();
        var name = NextPushId_1.nextPushId(now);
        // push() returns a ThennableReference whose promise is fulfilled with a regular Reference.
        // We use child() to create handles to two different references. The first is turned into a
        // ThennableReference below by adding then() and catch() methods and is used as the
        // return value of push(). The second remains a regular Reference and is used as the fulfilled
        // value of the first ThennableReference.
        var thennablePushRef = this.child(name);
        var pushRef = this.child(name);
        var promise;
        if (value != null) {
            promise = thennablePushRef.set(value, onComplete).then(function () { return pushRef; });
        }
        else {
            promise = Promise.resolve(pushRef);
        }
        thennablePushRef.then = promise.then.bind(promise);
        thennablePushRef.catch = promise.then.bind(promise, undefined);
        if (typeof onComplete === 'function') {
            promise.catch(function () { });
        }
        return thennablePushRef;
    };
    /**
     * @return {!OnDisconnect}
     */
    Reference.prototype.onDisconnect = function () {
        validation_1.validateWritablePath('Reference.onDisconnect', this.path);
        return new onDisconnect_1.OnDisconnect(this.repo, this.path);
    };
    Object.defineProperty(Reference.prototype, "database", {
        get: function () {
            return this.databaseProp();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Reference.prototype, "key", {
        get: function () {
            return this.getKey();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Reference.prototype, "parent", {
        get: function () {
            return this.getParent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Reference.prototype, "root", {
        get: function () {
            return this.getRoot();
        },
        enumerable: true,
        configurable: true
    });
    return Reference;
}(Query_1.Query));
exports.Reference = Reference;
/**
 * Define reference constructor in various modules
 *
 * We are doing this here to avoid several circular
 * dependency issues
 */
Query_1.Query.__referenceConstructor = Reference;
SyncPoint_1.SyncPoint.__referenceConstructor = Reference;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/api/TransactionResult.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/api/TransactionResult.js ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var TransactionResult = /** @class */ (function () {
    /**
     * A type for the resolve value of Firebase.transaction.
     * @constructor
     * @dict
     * @param {boolean} committed
     * @param {DataSnapshot} snapshot
     */
    function TransactionResult(committed, snapshot) {
        this.committed = committed;
        this.snapshot = snapshot;
    }
    // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary
    // for end-users
    TransactionResult.prototype.toJSON = function () {
        util_1.validateArgCount('TransactionResult.toJSON', 0, 1, arguments.length);
        return { committed: this.committed, snapshot: this.snapshot.toJSON() };
    };
    return TransactionResult;
}());
exports.TransactionResult = TransactionResult;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/api/internal.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/api/internal.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var WebSocketConnection_1 = __webpack_require__(/*! ../realtime/WebSocketConnection */ "./node_modules/@firebase/database/dist/cjs/src/realtime/WebSocketConnection.js");
var BrowserPollConnection_1 = __webpack_require__(/*! ../realtime/BrowserPollConnection */ "./node_modules/@firebase/database/dist/cjs/src/realtime/BrowserPollConnection.js");
/**
 * INTERNAL methods for internal-use only (tests, etc.).
 *
 * Customers shouldn't use these or else should be aware that they could break at any time.
 *
 * @const
 */
exports.forceLongPolling = function () {
    WebSocketConnection_1.WebSocketConnection.forceDisallow();
    BrowserPollConnection_1.BrowserPollConnection.forceAllow();
};
exports.forceWebSockets = function () {
    BrowserPollConnection_1.BrowserPollConnection.forceDisallow();
};
/* Used by App Manager */
exports.isWebSocketsAvailable = function () {
    return WebSocketConnection_1.WebSocketConnection['isAvailable']();
};
exports.setSecurityDebugCallback = function (ref, callback) {
    ref.repo.persistentConnection_.securityDebugCallback_ = callback;
};
exports.stats = function (ref, showDelta) {
    ref.repo.stats(showDelta);
};
exports.statsIncrementCounter = function (ref, metric) {
    ref.repo.statsIncrementCounter(metric);
};
exports.dataUpdateCount = function (ref) {
    return ref.repo.dataUpdateCount;
};
exports.interceptServerData = function (ref, callback) {
    return ref.repo.interceptServerData_(callback);
};



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/api/onDisconnect.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/api/onDisconnect.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var validation_1 = __webpack_require__(/*! ../core/util/validation */ "./node_modules/@firebase/database/dist/cjs/src/core/util/validation.js");
var util_2 = __webpack_require__(/*! ../core/util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var util_3 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * @constructor
 */
var OnDisconnect = /** @class */ (function () {
    /**
     * @param {!Repo} repo_
     * @param {!Path} path_
     */
    function OnDisconnect(repo_, path_) {
        this.repo_ = repo_;
        this.path_ = path_;
    }
    /**
     * @param {function(?Error)=} onComplete
     * @return {!firebase.Promise}
     */
    OnDisconnect.prototype.cancel = function (onComplete) {
        util_1.validateArgCount('OnDisconnect.cancel', 0, 1, arguments.length);
        util_1.validateCallback('OnDisconnect.cancel', 1, onComplete, true);
        var deferred = new util_3.Deferred();
        this.repo_.onDisconnectCancel(this.path_, deferred.wrapCallback(onComplete));
        return deferred.promise;
    };
    /**
     * @param {function(?Error)=} onComplete
     * @return {!firebase.Promise}
     */
    OnDisconnect.prototype.remove = function (onComplete) {
        util_1.validateArgCount('OnDisconnect.remove', 0, 1, arguments.length);
        validation_1.validateWritablePath('OnDisconnect.remove', this.path_);
        util_1.validateCallback('OnDisconnect.remove', 1, onComplete, true);
        var deferred = new util_3.Deferred();
        this.repo_.onDisconnectSet(this.path_, null, deferred.wrapCallback(onComplete));
        return deferred.promise;
    };
    /**
     * @param {*} value
     * @param {function(?Error)=} onComplete
     * @return {!firebase.Promise}
     */
    OnDisconnect.prototype.set = function (value, onComplete) {
        util_1.validateArgCount('OnDisconnect.set', 1, 2, arguments.length);
        validation_1.validateWritablePath('OnDisconnect.set', this.path_);
        validation_1.validateFirebaseDataArg('OnDisconnect.set', 1, value, this.path_, false);
        util_1.validateCallback('OnDisconnect.set', 2, onComplete, true);
        var deferred = new util_3.Deferred();
        this.repo_.onDisconnectSet(this.path_, value, deferred.wrapCallback(onComplete));
        return deferred.promise;
    };
    /**
     * @param {*} value
     * @param {number|string|null} priority
     * @param {function(?Error)=} onComplete
     * @return {!firebase.Promise}
     */
    OnDisconnect.prototype.setWithPriority = function (value, priority, onComplete) {
        util_1.validateArgCount('OnDisconnect.setWithPriority', 2, 3, arguments.length);
        validation_1.validateWritablePath('OnDisconnect.setWithPriority', this.path_);
        validation_1.validateFirebaseDataArg('OnDisconnect.setWithPriority', 1, value, this.path_, false);
        validation_1.validatePriority('OnDisconnect.setWithPriority', 2, priority, false);
        util_1.validateCallback('OnDisconnect.setWithPriority', 3, onComplete, true);
        var deferred = new util_3.Deferred();
        this.repo_.onDisconnectSetWithPriority(this.path_, value, priority, deferred.wrapCallback(onComplete));
        return deferred.promise;
    };
    /**
     * @param {!Object} objectToMerge
     * @param {function(?Error)=} onComplete
     * @return {!firebase.Promise}
     */
    OnDisconnect.prototype.update = function (objectToMerge, onComplete) {
        util_1.validateArgCount('OnDisconnect.update', 1, 2, arguments.length);
        validation_1.validateWritablePath('OnDisconnect.update', this.path_);
        if (Array.isArray(objectToMerge)) {
            var newObjectToMerge = {};
            for (var i = 0; i < objectToMerge.length; ++i) {
                newObjectToMerge['' + i] = objectToMerge[i];
            }
            objectToMerge = newObjectToMerge;
            util_2.warn('Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the ' +
                'existing data, or an Object with integer keys if you really do want to only update some of the children.');
        }
        validation_1.validateFirebaseMergeDataArg('OnDisconnect.update', 1, objectToMerge, this.path_, false);
        util_1.validateCallback('OnDisconnect.update', 2, onComplete, true);
        var deferred = new util_3.Deferred();
        this.repo_.onDisconnectUpdate(this.path_, objectToMerge, deferred.wrapCallback(onComplete));
        return deferred.promise;
    };
    return OnDisconnect;
}());
exports.OnDisconnect = OnDisconnect;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/api/test_access.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/api/test_access.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var RepoInfo_1 = __webpack_require__(/*! ../core/RepoInfo */ "./node_modules/@firebase/database/dist/cjs/src/core/RepoInfo.js");
var PersistentConnection_1 = __webpack_require__(/*! ../core/PersistentConnection */ "./node_modules/@firebase/database/dist/cjs/src/core/PersistentConnection.js");
var RepoManager_1 = __webpack_require__(/*! ../core/RepoManager */ "./node_modules/@firebase/database/dist/cjs/src/core/RepoManager.js");
var Connection_1 = __webpack_require__(/*! ../realtime/Connection */ "./node_modules/@firebase/database/dist/cjs/src/realtime/Connection.js");
exports.DataConnection = PersistentConnection_1.PersistentConnection;
/**
 * @param {!string} pathString
 * @param {function(*)} onComplete
 */
PersistentConnection_1.PersistentConnection.prototype.simpleListen = function (pathString, onComplete) {
    this.sendRequest('q', { p: pathString }, onComplete);
};
/**
 * @param {*} data
 * @param {function(*)} onEcho
 */
PersistentConnection_1.PersistentConnection.prototype.echo = function (data, onEcho) {
    this.sendRequest('echo', { d: data }, onEcho);
};
// RealTimeConnection properties that we use in tests.
exports.RealTimeConnection = Connection_1.Connection;
/**
 * @param {function(): string} newHash
 * @return {function()}
 */
exports.hijackHash = function (newHash) {
    var oldPut = PersistentConnection_1.PersistentConnection.prototype.put;
    PersistentConnection_1.PersistentConnection.prototype.put = function (pathString, data, opt_onComplete, opt_hash) {
        if (opt_hash !== undefined) {
            opt_hash = newHash();
        }
        oldPut.call(this, pathString, data, opt_onComplete, opt_hash);
    };
    return function () {
        PersistentConnection_1.PersistentConnection.prototype.put = oldPut;
    };
};
/**
 * @type {function(new:RepoInfo, !string, boolean, !string, boolean): undefined}
 */
exports.ConnectionTarget = RepoInfo_1.RepoInfo;
/**
 * @param {!Query} query
 * @return {!string}
 */
exports.queryIdentifier = function (query) {
    return query.queryIdentifier();
};
/**
 * @param {!Query} firebaseRef
 * @return {!Object}
 */
exports.listens = function (firebaseRef) {
    return firebaseRef.repo.persistentConnection_.listens_;
};
/**
 * Forces the RepoManager to create Repos that use ReadonlyRestClient instead of PersistentConnection.
 *
 * @param {boolean} forceRestClient
 */
exports.forceRestClient = function (forceRestClient) {
    RepoManager_1.RepoManager.getInstance().forceRestClient(forceRestClient);
};



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/AuthTokenProvider.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/AuthTokenProvider.js ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! ./util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
/**
 * Abstraction around FirebaseApp's token fetching capabilities.
 */
var AuthTokenProvider = /** @class */ (function () {
    /**
     * @param {!FirebaseApp} app_
     */
    function AuthTokenProvider(app_) {
        this.app_ = app_;
    }
    /**
     * @param {boolean} forceRefresh
     * @return {!Promise<FirebaseAuthTokenData>}
     */
    AuthTokenProvider.prototype.getToken = function (forceRefresh) {
        return this.app_['INTERNAL']['getToken'](forceRefresh).then(null, 
        // .catch
        function (error) {
            // TODO: Need to figure out all the cases this is raised and whether
            // this makes sense.
            if (error && error.code === 'auth/token-not-initialized') {
                util_1.log('Got auth/token-not-initialized error.  Treating as null token.');
                return null;
            }
            else {
                return Promise.reject(error);
            }
        });
    };
    AuthTokenProvider.prototype.addTokenChangeListener = function (listener) {
        // TODO: We might want to wrap the listener and call it with no args to
        // avoid a leaky abstraction, but that makes removing the listener harder.
        this.app_['INTERNAL']['addAuthTokenListener'](listener);
    };
    AuthTokenProvider.prototype.removeTokenChangeListener = function (listener) {
        this.app_['INTERNAL']['removeAuthTokenListener'](listener);
    };
    AuthTokenProvider.prototype.notifyForInvalidToken = function () {
        var errorMessage = 'Provided authentication credentials for the app named "' +
            this.app_.name +
            '" are invalid. This usually indicates your app was not ' +
            'initialized correctly. ';
        if ('credential' in this.app_.options) {
            errorMessage +=
                'Make sure the "credential" property provided to initializeApp() ' +
                    'is authorized to access the specified "databaseURL" and is from the correct ' +
                    'project.';
        }
        else if ('serviceAccount' in this.app_.options) {
            errorMessage +=
                'Make sure the "serviceAccount" property provided to initializeApp() ' +
                    'is authorized to access the specified "databaseURL" and is from the correct ' +
                    'project.';
        }
        else {
            errorMessage +=
                'Make sure the "apiKey" and "databaseURL" properties provided to ' +
                    'initializeApp() match the values provided for your app at ' +
                    'https://console.firebase.google.com/.';
        }
        util_1.warn(errorMessage);
    };
    return AuthTokenProvider;
}());
exports.AuthTokenProvider = AuthTokenProvider;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/CompoundWrite.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/CompoundWrite.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var ImmutableTree_1 = __webpack_require__(/*! ./util/ImmutableTree */ "./node_modules/@firebase/database/dist/cjs/src/core/util/ImmutableTree.js");
var Path_1 = __webpack_require__(/*! ./util/Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var Node_1 = __webpack_require__(/*! ./snap/Node */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/Node.js");
var PriorityIndex_1 = __webpack_require__(/*! ./snap/indexes/PriorityIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PriorityIndex.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * This class holds a collection of writes that can be applied to nodes in unison. It abstracts away the logic with
 * dealing with priority writes and multiple nested writes. At any given path there is only allowed to be one write
 * modifying that path. Any write to an existing path or shadowing an existing path will modify that existing write
 * to reflect the write added.
 *
 * @constructor
 * @param {!ImmutableTree.<!Node>} writeTree
 */
var CompoundWrite = /** @class */ (function () {
    function CompoundWrite(writeTree_) {
        this.writeTree_ = writeTree_;
    }
    /**
     * @param {!Path} path
     * @param {!Node} node
     * @return {!CompoundWrite}
     */
    CompoundWrite.prototype.addWrite = function (path, node) {
        if (path.isEmpty()) {
            return new CompoundWrite(new ImmutableTree_1.ImmutableTree(node));
        }
        else {
            var rootmost = this.writeTree_.findRootMostValueAndPath(path);
            if (rootmost != null) {
                var rootMostPath = rootmost.path;
                var value = rootmost.value;
                var relativePath = Path_1.Path.relativePath(rootMostPath, path);
                value = value.updateChild(relativePath, node);
                return new CompoundWrite(this.writeTree_.set(rootMostPath, value));
            }
            else {
                var subtree = new ImmutableTree_1.ImmutableTree(node);
                var newWriteTree = this.writeTree_.setTree(path, subtree);
                return new CompoundWrite(newWriteTree);
            }
        }
    };
    /**
     * @param {!Path} path
     * @param {!Object.<string, !Node>} updates
     * @return {!CompoundWrite}
     */
    CompoundWrite.prototype.addWrites = function (path, updates) {
        var newWrite = this;
        util_1.forEach(updates, function (childKey, node) {
            newWrite = newWrite.addWrite(path.child(childKey), node);
        });
        return newWrite;
    };
    /**
     * Will remove a write at the given path and deeper paths. This will <em>not</em> modify a write at a higher
     * location, which must be removed by calling this method with that path.
     *
     * @param {!Path} path The path at which a write and all deeper writes should be removed
     * @return {!CompoundWrite} The new CompoundWrite with the removed path
     */
    CompoundWrite.prototype.removeWrite = function (path) {
        if (path.isEmpty()) {
            return CompoundWrite.Empty;
        }
        else {
            var newWriteTree = this.writeTree_.setTree(path, ImmutableTree_1.ImmutableTree.Empty);
            return new CompoundWrite(newWriteTree);
        }
    };
    /**
     * Returns whether this CompoundWrite will fully overwrite a node at a given location and can therefore be
     * considered "complete".
     *
     * @param {!Path} path The path to check for
     * @return {boolean} Whether there is a complete write at that path
     */
    CompoundWrite.prototype.hasCompleteWrite = function (path) {
        return this.getCompleteNode(path) != null;
    };
    /**
     * Returns a node for a path if and only if the node is a "complete" overwrite at that path. This will not aggregate
     * writes from deeper paths, but will return child nodes from a more shallow path.
     *
     * @param {!Path} path The path to get a complete write
     * @return {?Node} The node if complete at that path, or null otherwise.
     */
    CompoundWrite.prototype.getCompleteNode = function (path) {
        var rootmost = this.writeTree_.findRootMostValueAndPath(path);
        if (rootmost != null) {
            return this.writeTree_
                .get(rootmost.path)
                .getChild(Path_1.Path.relativePath(rootmost.path, path));
        }
        else {
            return null;
        }
    };
    /**
     * Returns all children that are guaranteed to be a complete overwrite.
     *
     * @return {!Array.<NamedNode>} A list of all complete children.
     */
    CompoundWrite.prototype.getCompleteChildren = function () {
        var children = [];
        var node = this.writeTree_.value;
        if (node != null) {
            // If it's a leaf node, it has no children; so nothing to do.
            if (!node.isLeafNode()) {
                node.forEachChild(PriorityIndex_1.PRIORITY_INDEX, function (childName, childNode) {
                    children.push(new Node_1.NamedNode(childName, childNode));
                });
            }
        }
        else {
            this.writeTree_.children.inorderTraversal(function (childName, childTree) {
                if (childTree.value != null) {
                    children.push(new Node_1.NamedNode(childName, childTree.value));
                }
            });
        }
        return children;
    };
    /**
     * @param {!Path} path
     * @return {!CompoundWrite}
     */
    CompoundWrite.prototype.childCompoundWrite = function (path) {
        if (path.isEmpty()) {
            return this;
        }
        else {
            var shadowingNode = this.getCompleteNode(path);
            if (shadowingNode != null) {
                return new CompoundWrite(new ImmutableTree_1.ImmutableTree(shadowingNode));
            }
            else {
                return new CompoundWrite(this.writeTree_.subtree(path));
            }
        }
    };
    /**
     * Returns true if this CompoundWrite is empty and therefore does not modify any nodes.
     * @return {boolean} Whether this CompoundWrite is empty
     */
    CompoundWrite.prototype.isEmpty = function () {
        return this.writeTree_.isEmpty();
    };
    /**
     * Applies this CompoundWrite to a node. The node is returned with all writes from this CompoundWrite applied to the
     * node
     * @param {!Node} node The node to apply this CompoundWrite to
     * @return {!Node} The node with all writes applied
     */
    CompoundWrite.prototype.apply = function (node) {
        return CompoundWrite.applySubtreeWrite_(Path_1.Path.Empty, this.writeTree_, node);
    };
    /**
     * @type {!CompoundWrite}
     */
    CompoundWrite.Empty = new CompoundWrite(new ImmutableTree_1.ImmutableTree(null));
    /**
     * @param {!Path} relativePath
     * @param {!ImmutableTree.<!Node>} writeTree
     * @param {!Node} node
     * @return {!Node}
     * @private
     */
    CompoundWrite.applySubtreeWrite_ = function (relativePath, writeTree, node) {
        if (writeTree.value != null) {
            // Since there a write is always a leaf, we're done here
            return node.updateChild(relativePath, writeTree.value);
        }
        else {
            var priorityWrite_1 = null;
            writeTree.children.inorderTraversal(function (childKey, childTree) {
                if (childKey === '.priority') {
                    // Apply priorities at the end so we don't update priorities for either empty nodes or forget
                    // to apply priorities to empty nodes that are later filled
                    util_2.assert(childTree.value !== null, 'Priority writes must always be leaf nodes');
                    priorityWrite_1 = childTree.value;
                }
                else {
                    node = CompoundWrite.applySubtreeWrite_(relativePath.child(childKey), childTree, node);
                }
            });
            // If there was a priority write, we only apply it if the node is not empty
            if (!node.getChild(relativePath).isEmpty() && priorityWrite_1 !== null) {
                node = node.updateChild(relativePath.child('.priority'), priorityWrite_1);
            }
            return node;
        }
    };
    return CompoundWrite;
}());
exports.CompoundWrite = CompoundWrite;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/PersistentConnection.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/PersistentConnection.js ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var app_1 = __webpack_require__(/*! @firebase/app */ "./node_modules/@firebase/app/dist/esm/index.js");
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_3 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_4 = __webpack_require__(/*! ./util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var Path_1 = __webpack_require__(/*! ./util/Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var VisibilityMonitor_1 = __webpack_require__(/*! ./util/VisibilityMonitor */ "./node_modules/@firebase/database/dist/cjs/src/core/util/VisibilityMonitor.js");
var OnlineMonitor_1 = __webpack_require__(/*! ./util/OnlineMonitor */ "./node_modules/@firebase/database/dist/cjs/src/core/util/OnlineMonitor.js");
var util_5 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var Connection_1 = __webpack_require__(/*! ../realtime/Connection */ "./node_modules/@firebase/database/dist/cjs/src/realtime/Connection.js");
var util_6 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_7 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var ServerActions_1 = __webpack_require__(/*! ./ServerActions */ "./node_modules/@firebase/database/dist/cjs/src/core/ServerActions.js");
var RECONNECT_MIN_DELAY = 1000;
var RECONNECT_MAX_DELAY_DEFAULT = 60 * 5 * 1000; // 5 minutes in milliseconds (Case: 1858)
var RECONNECT_MAX_DELAY_FOR_ADMINS = 30 * 1000; // 30 seconds for admin clients (likely to be a backend server)
var RECONNECT_DELAY_MULTIPLIER = 1.3;
var RECONNECT_DELAY_RESET_TIMEOUT = 30000; // Reset delay back to MIN_DELAY after being connected for 30sec.
var SERVER_KILL_INTERRUPT_REASON = 'server_kill';
// If auth fails repeatedly, we'll assume something is wrong and log a warning / back off.
var INVALID_AUTH_TOKEN_THRESHOLD = 3;
/**
 * Firebase connection.  Abstracts wire protocol and handles reconnecting.
 *
 * NOTE: All JSON objects sent to the realtime connection must have property names enclosed
 * in quotes to make sure the closure compiler does not minify them.
 */
var PersistentConnection = /** @class */ (function (_super) {
    __extends(PersistentConnection, _super);
    /**
     * @implements {ServerActions}
     * @param {!RepoInfo} repoInfo_ Data about the namespace we are connecting to
     * @param {function(string, *, boolean, ?number)} onDataUpdate_ A callback for new data from the server
     * @param onConnectStatus_
     * @param onServerInfoUpdate_
     * @param authTokenProvider_
     * @param authOverride_
     */
    function PersistentConnection(repoInfo_, onDataUpdate_, onConnectStatus_, onServerInfoUpdate_, authTokenProvider_, authOverride_) {
        var _this = _super.call(this) || this;
        _this.repoInfo_ = repoInfo_;
        _this.onDataUpdate_ = onDataUpdate_;
        _this.onConnectStatus_ = onConnectStatus_;
        _this.onServerInfoUpdate_ = onServerInfoUpdate_;
        _this.authTokenProvider_ = authTokenProvider_;
        _this.authOverride_ = authOverride_;
        // Used for diagnostic logging.
        _this.id = PersistentConnection.nextPersistentConnectionId_++;
        _this.log_ = util_4.logWrapper('p:' + _this.id + ':');
        /** @private {Object} */
        _this.interruptReasons_ = {};
        _this.listens_ = {};
        _this.outstandingPuts_ = [];
        _this.outstandingPutCount_ = 0;
        _this.onDisconnectRequestQueue_ = [];
        _this.connected_ = false;
        _this.reconnectDelay_ = RECONNECT_MIN_DELAY;
        _this.maxReconnectDelay_ = RECONNECT_MAX_DELAY_DEFAULT;
        _this.securityDebugCallback_ = null;
        _this.lastSessionId = null;
        /** @private {number|null} */
        _this.establishConnectionTimer_ = null;
        /** @private {boolean} */
        _this.visible_ = false;
        // Before we get connected, we keep a queue of pending messages to send.
        _this.requestCBHash_ = {};
        _this.requestNumber_ = 0;
        /** @private {?{
         *   sendRequest(Object),
         *   close()
         * }} */
        _this.realtime_ = null;
        /** @private {string|null} */
        _this.authToken_ = null;
        _this.forceTokenRefresh_ = false;
        _this.invalidAuthTokenCount_ = 0;
        _this.firstConnection_ = true;
        _this.lastConnectionAttemptTime_ = null;
        _this.lastConnectionEstablishedTime_ = null;
        if (authOverride_ && !util_7.isNodeSdk()) {
            throw new Error('Auth override specified in options, but not supported on non Node.js platforms');
        }
        _this.scheduleConnect_(0);
        VisibilityMonitor_1.VisibilityMonitor.getInstance().on('visible', _this.onVisible_, _this);
        if (repoInfo_.host.indexOf('fblocal') === -1) {
            OnlineMonitor_1.OnlineMonitor.getInstance().on('online', _this.onOnline_, _this);
        }
        return _this;
    }
    /**
     * @param {!string} action
     * @param {*} body
     * @param {function(*)=} onResponse
     * @protected
     */
    PersistentConnection.prototype.sendRequest = function (action, body, onResponse) {
        var curReqNum = ++this.requestNumber_;
        var msg = { r: curReqNum, a: action, b: body };
        this.log_(util_2.stringify(msg));
        util_3.assert(this.connected_, "sendRequest call when we're not connected not allowed.");
        this.realtime_.sendRequest(msg);
        if (onResponse) {
            this.requestCBHash_[curReqNum] = onResponse;
        }
    };
    /**
     * @inheritDoc
     */
    PersistentConnection.prototype.listen = function (query, currentHashFn, tag, onComplete) {
        var queryId = query.queryIdentifier();
        var pathString = query.path.toString();
        this.log_('Listen called for ' + pathString + ' ' + queryId);
        this.listens_[pathString] = this.listens_[pathString] || {};
        util_3.assert(query.getQueryParams().isDefault() ||
            !query.getQueryParams().loadsAllData(), 'listen() called for non-default but complete query');
        util_3.assert(!this.listens_[pathString][queryId], 'listen() called twice for same path/queryId.');
        var listenSpec = {
            onComplete: onComplete,
            hashFn: currentHashFn,
            query: query,
            tag: tag
        };
        this.listens_[pathString][queryId] = listenSpec;
        if (this.connected_) {
            this.sendListen_(listenSpec);
        }
    };
    /**
     * @param {!{onComplete(),
     *           hashFn():!string,
     *           query: !Query,
     *           tag: ?number}} listenSpec
     * @private
     */
    PersistentConnection.prototype.sendListen_ = function (listenSpec) {
        var _this = this;
        var query = listenSpec.query;
        var pathString = query.path.toString();
        var queryId = query.queryIdentifier();
        this.log_('Listen on ' + pathString + ' for ' + queryId);
        var req = { /*path*/ p: pathString };
        var action = 'q';
        // Only bother to send query if it's non-default.
        if (listenSpec.tag) {
            req['q'] = query.queryObject();
            req['t'] = listenSpec.tag;
        }
        req['h'] = listenSpec.hashFn();
        this.sendRequest(action, req, function (message) {
            var payload = message['d'];
            var status = message['s'];
            // print warnings in any case...
            PersistentConnection.warnOnListenWarnings_(payload, query);
            var currentListenSpec = _this.listens_[pathString] && _this.listens_[pathString][queryId];
            // only trigger actions if the listen hasn't been removed and readded
            if (currentListenSpec === listenSpec) {
                _this.log_('listen response', message);
                if (status !== 'ok') {
                    _this.removeListen_(pathString, queryId);
                }
                if (listenSpec.onComplete) {
                    listenSpec.onComplete(status, payload);
                }
            }
        });
    };
    /**
     * @param {*} payload
     * @param {!Query} query
     * @private
     */
    PersistentConnection.warnOnListenWarnings_ = function (payload, query) {
        if (payload && typeof payload === 'object' && util_1.contains(payload, 'w')) {
            var warnings = util_1.safeGet(payload, 'w');
            if (Array.isArray(warnings) && ~warnings.indexOf('no_index')) {
                var indexSpec = '".indexOn": "' +
                    query
                        .getQueryParams()
                        .getIndex()
                        .toString() +
                    '"';
                var indexPath = query.path.toString();
                util_4.warn("Using an unspecified index. Your data will be downloaded and " +
                    ("filtered on the client. Consider adding " + indexSpec + " at ") +
                    (indexPath + " to your security rules for better performance."));
            }
        }
    };
    /**
     * @inheritDoc
     */
    PersistentConnection.prototype.refreshAuthToken = function (token) {
        this.authToken_ = token;
        this.log_('Auth token refreshed');
        if (this.authToken_) {
            this.tryAuth();
        }
        else {
            //If we're connected we want to let the server know to unauthenticate us. If we're not connected, simply delete
            //the credential so we dont become authenticated next time we connect.
            if (this.connected_) {
                this.sendRequest('unauth', {}, function () { });
            }
        }
        this.reduceReconnectDelayIfAdminCredential_(token);
    };
    /**
     * @param {!string} credential
     * @private
     */
    PersistentConnection.prototype.reduceReconnectDelayIfAdminCredential_ = function (credential) {
        // NOTE: This isn't intended to be bulletproof (a malicious developer can always just modify the client).
        // Additionally, we don't bother resetting the max delay back to the default if auth fails / expires.
        var isFirebaseSecret = credential && credential.length === 40;
        if (isFirebaseSecret || util_5.isAdmin(credential)) {
            this.log_('Admin auth credential detected.  Reducing max reconnect time.');
            this.maxReconnectDelay_ = RECONNECT_MAX_DELAY_FOR_ADMINS;
        }
    };
    /**
     * Attempts to authenticate with the given credentials. If the authentication attempt fails, it's triggered like
     * a auth revoked (the connection is closed).
     */
    PersistentConnection.prototype.tryAuth = function () {
        var _this = this;
        if (this.connected_ && this.authToken_) {
            var token_1 = this.authToken_;
            var authMethod = util_5.isValidFormat(token_1) ? 'auth' : 'gauth';
            var requestData = { cred: token_1 };
            if (this.authOverride_ === null) {
                requestData['noauth'] = true;
            }
            else if (typeof this.authOverride_ === 'object') {
                requestData['authvar'] = this.authOverride_;
            }
            this.sendRequest(authMethod, requestData, function (res) {
                var status = res['s'];
                var data = res['d'] || 'error';
                if (_this.authToken_ === token_1) {
                    if (status === 'ok') {
                        _this.invalidAuthTokenCount_ = 0;
                    }
                    else {
                        // Triggers reconnect and force refresh for auth token
                        _this.onAuthRevoked_(status, data);
                    }
                }
            });
        }
    };
    /**
     * @inheritDoc
     */
    PersistentConnection.prototype.unlisten = function (query, tag) {
        var pathString = query.path.toString();
        var queryId = query.queryIdentifier();
        this.log_('Unlisten called for ' + pathString + ' ' + queryId);
        util_3.assert(query.getQueryParams().isDefault() ||
            !query.getQueryParams().loadsAllData(), 'unlisten() called for non-default but complete query');
        var listen = this.removeListen_(pathString, queryId);
        if (listen && this.connected_) {
            this.sendUnlisten_(pathString, queryId, query.queryObject(), tag);
        }
    };
    PersistentConnection.prototype.sendUnlisten_ = function (pathString, queryId, queryObj, tag) {
        this.log_('Unlisten on ' + pathString + ' for ' + queryId);
        var req = { /*path*/ p: pathString };
        var action = 'n';
        // Only bother sending queryId if it's non-default.
        if (tag) {
            req['q'] = queryObj;
            req['t'] = tag;
        }
        this.sendRequest(action, req);
    };
    /**
     * @inheritDoc
     */
    PersistentConnection.prototype.onDisconnectPut = function (pathString, data, onComplete) {
        if (this.connected_) {
            this.sendOnDisconnect_('o', pathString, data, onComplete);
        }
        else {
            this.onDisconnectRequestQueue_.push({
                pathString: pathString,
                action: 'o',
                data: data,
                onComplete: onComplete
            });
        }
    };
    /**
     * @inheritDoc
     */
    PersistentConnection.prototype.onDisconnectMerge = function (pathString, data, onComplete) {
        if (this.connected_) {
            this.sendOnDisconnect_('om', pathString, data, onComplete);
        }
        else {
            this.onDisconnectRequestQueue_.push({
                pathString: pathString,
                action: 'om',
                data: data,
                onComplete: onComplete
            });
        }
    };
    /**
     * @inheritDoc
     */
    PersistentConnection.prototype.onDisconnectCancel = function (pathString, onComplete) {
        if (this.connected_) {
            this.sendOnDisconnect_('oc', pathString, null, onComplete);
        }
        else {
            this.onDisconnectRequestQueue_.push({
                pathString: pathString,
                action: 'oc',
                data: null,
                onComplete: onComplete
            });
        }
    };
    PersistentConnection.prototype.sendOnDisconnect_ = function (action, pathString, data, onComplete) {
        var request = { /*path*/ p: pathString, /*data*/ d: data };
        this.log_('onDisconnect ' + action, request);
        this.sendRequest(action, request, function (response) {
            if (onComplete) {
                setTimeout(function () {
                    onComplete(response['s'], response['d']);
                }, Math.floor(0));
            }
        });
    };
    /**
     * @inheritDoc
     */
    PersistentConnection.prototype.put = function (pathString, data, onComplete, hash) {
        this.putInternal('p', pathString, data, onComplete, hash);
    };
    /**
     * @inheritDoc
     */
    PersistentConnection.prototype.merge = function (pathString, data, onComplete, hash) {
        this.putInternal('m', pathString, data, onComplete, hash);
    };
    PersistentConnection.prototype.putInternal = function (action, pathString, data, onComplete, hash) {
        var request = {
            /*path*/ p: pathString,
            /*data*/ d: data
        };
        if (hash !== undefined)
            request['h'] = hash;
        // TODO: Only keep track of the most recent put for a given path?
        this.outstandingPuts_.push({
            action: action,
            request: request,
            onComplete: onComplete
        });
        this.outstandingPutCount_++;
        var index = this.outstandingPuts_.length - 1;
        if (this.connected_) {
            this.sendPut_(index);
        }
        else {
            this.log_('Buffering put: ' + pathString);
        }
    };
    PersistentConnection.prototype.sendPut_ = function (index) {
        var _this = this;
        var action = this.outstandingPuts_[index].action;
        var request = this.outstandingPuts_[index].request;
        var onComplete = this.outstandingPuts_[index].onComplete;
        this.outstandingPuts_[index].queued = this.connected_;
        this.sendRequest(action, request, function (message) {
            _this.log_(action + ' response', message);
            delete _this.outstandingPuts_[index];
            _this.outstandingPutCount_--;
            // Clean up array occasionally.
            if (_this.outstandingPutCount_ === 0) {
                _this.outstandingPuts_ = [];
            }
            if (onComplete)
                onComplete(message['s'], message['d']);
        });
    };
    /**
     * @inheritDoc
     */
    PersistentConnection.prototype.reportStats = function (stats) {
        var _this = this;
        // If we're not connected, we just drop the stats.
        if (this.connected_) {
            var request = { /*counters*/ c: stats };
            this.log_('reportStats', request);
            this.sendRequest(/*stats*/ 's', request, function (result) {
                var status = result['s'];
                if (status !== 'ok') {
                    var errorReason = result['d'];
                    _this.log_('reportStats', 'Error sending stats: ' + errorReason);
                }
            });
        }
    };
    /**
     * @param {*} message
     * @private
     */
    PersistentConnection.prototype.onDataMessage_ = function (message) {
        if ('r' in message) {
            // this is a response
            this.log_('from server: ' + util_2.stringify(message));
            var reqNum = message['r'];
            var onResponse = this.requestCBHash_[reqNum];
            if (onResponse) {
                delete this.requestCBHash_[reqNum];
                onResponse(message['b']);
            }
        }
        else if ('error' in message) {
            throw 'A server-side error has occurred: ' + message['error'];
        }
        else if ('a' in message) {
            // a and b are action and body, respectively
            this.onDataPush_(message['a'], message['b']);
        }
    };
    PersistentConnection.prototype.onDataPush_ = function (action, body) {
        this.log_('handleServerMessage', action, body);
        if (action === 'd')
            this.onDataUpdate_(body['p'], body['d'], 
            /*isMerge*/ false, body['t']);
        else if (action === 'm')
            this.onDataUpdate_(body['p'], body['d'], 
            /*isMerge=*/ true, body['t']);
        else if (action === 'c')
            this.onListenRevoked_(body['p'], body['q']);
        else if (action === 'ac')
            this.onAuthRevoked_(body['s'], body['d']);
        else if (action === 'sd')
            this.onSecurityDebugPacket_(body);
        else
            util_4.error('Unrecognized action received from server: ' +
                util_2.stringify(action) +
                '\nAre you using the latest client?');
    };
    PersistentConnection.prototype.onReady_ = function (timestamp, sessionId) {
        this.log_('connection ready');
        this.connected_ = true;
        this.lastConnectionEstablishedTime_ = new Date().getTime();
        this.handleTimestamp_(timestamp);
        this.lastSessionId = sessionId;
        if (this.firstConnection_) {
            this.sendConnectStats_();
        }
        this.restoreState_();
        this.firstConnection_ = false;
        this.onConnectStatus_(true);
    };
    PersistentConnection.prototype.scheduleConnect_ = function (timeout) {
        var _this = this;
        util_3.assert(!this.realtime_, "Scheduling a connect when we're already connected/ing?");
        if (this.establishConnectionTimer_) {
            clearTimeout(this.establishConnectionTimer_);
        }
        // NOTE: Even when timeout is 0, it's important to do a setTimeout to work around an infuriating "Security Error" in
        // Firefox when trying to write to our long-polling iframe in some scenarios (e.g. Forge or our unit tests).
        this.establishConnectionTimer_ = setTimeout(function () {
            _this.establishConnectionTimer_ = null;
            _this.establishConnection_();
        }, Math.floor(timeout));
    };
    /**
     * @param {boolean} visible
     * @private
     */
    PersistentConnection.prototype.onVisible_ = function (visible) {
        // NOTE: Tabbing away and back to a window will defeat our reconnect backoff, but I think that's fine.
        if (visible &&
            !this.visible_ &&
            this.reconnectDelay_ === this.maxReconnectDelay_) {
            this.log_('Window became visible.  Reducing delay.');
            this.reconnectDelay_ = RECONNECT_MIN_DELAY;
            if (!this.realtime_) {
                this.scheduleConnect_(0);
            }
        }
        this.visible_ = visible;
    };
    PersistentConnection.prototype.onOnline_ = function (online) {
        if (online) {
            this.log_('Browser went online.');
            this.reconnectDelay_ = RECONNECT_MIN_DELAY;
            if (!this.realtime_) {
                this.scheduleConnect_(0);
            }
        }
        else {
            this.log_('Browser went offline.  Killing connection.');
            if (this.realtime_) {
                this.realtime_.close();
            }
        }
    };
    PersistentConnection.prototype.onRealtimeDisconnect_ = function () {
        this.log_('data client disconnected');
        this.connected_ = false;
        this.realtime_ = null;
        // Since we don't know if our sent transactions succeeded or not, we need to cancel them.
        this.cancelSentTransactions_();
        // Clear out the pending requests.
        this.requestCBHash_ = {};
        if (this.shouldReconnect_()) {
            if (!this.visible_) {
                this.log_("Window isn't visible.  Delaying reconnect.");
                this.reconnectDelay_ = this.maxReconnectDelay_;
                this.lastConnectionAttemptTime_ = new Date().getTime();
            }
            else if (this.lastConnectionEstablishedTime_) {
                // If we've been connected long enough, reset reconnect delay to minimum.
                var timeSinceLastConnectSucceeded = new Date().getTime() - this.lastConnectionEstablishedTime_;
                if (timeSinceLastConnectSucceeded > RECONNECT_DELAY_RESET_TIMEOUT)
                    this.reconnectDelay_ = RECONNECT_MIN_DELAY;
                this.lastConnectionEstablishedTime_ = null;
            }
            var timeSinceLastConnectAttempt = new Date().getTime() - this.lastConnectionAttemptTime_;
            var reconnectDelay = Math.max(0, this.reconnectDelay_ - timeSinceLastConnectAttempt);
            reconnectDelay = Math.random() * reconnectDelay;
            this.log_('Trying to reconnect in ' + reconnectDelay + 'ms');
            this.scheduleConnect_(reconnectDelay);
            // Adjust reconnect delay for next time.
            this.reconnectDelay_ = Math.min(this.maxReconnectDelay_, this.reconnectDelay_ * RECONNECT_DELAY_MULTIPLIER);
        }
        this.onConnectStatus_(false);
    };
    PersistentConnection.prototype.establishConnection_ = function () {
        if (this.shouldReconnect_()) {
            this.log_('Making a connection attempt');
            this.lastConnectionAttemptTime_ = new Date().getTime();
            this.lastConnectionEstablishedTime_ = null;
            var onDataMessage_1 = this.onDataMessage_.bind(this);
            var onReady_1 = this.onReady_.bind(this);
            var onDisconnect_1 = this.onRealtimeDisconnect_.bind(this);
            var connId_1 = this.id + ':' + PersistentConnection.nextConnectionId_++;
            var self_1 = this;
            var lastSessionId_1 = this.lastSessionId;
            var canceled_1 = false;
            var connection_1 = null;
            var closeFn_1 = function () {
                if (connection_1) {
                    connection_1.close();
                }
                else {
                    canceled_1 = true;
                    onDisconnect_1();
                }
            };
            var sendRequestFn = function (msg) {
                util_3.assert(connection_1, "sendRequest call when we're not connected not allowed.");
                connection_1.sendRequest(msg);
            };
            this.realtime_ = {
                close: closeFn_1,
                sendRequest: sendRequestFn
            };
            var forceRefresh = this.forceTokenRefresh_;
            this.forceTokenRefresh_ = false;
            // First fetch auth token, and establish connection after fetching the token was successful
            this.authTokenProvider_
                .getToken(forceRefresh)
                .then(function (result) {
                if (!canceled_1) {
                    util_4.log('getToken() completed. Creating connection.');
                    self_1.authToken_ = result && result.accessToken;
                    connection_1 = new Connection_1.Connection(connId_1, self_1.repoInfo_, onDataMessage_1, onReady_1, onDisconnect_1, 
                    /* onKill= */ function (reason) {
                        util_4.warn(reason + ' (' + self_1.repoInfo_.toString() + ')');
                        self_1.interrupt(SERVER_KILL_INTERRUPT_REASON);
                    }, lastSessionId_1);
                }
                else {
                    util_4.log('getToken() completed but was canceled');
                }
            })
                .then(null, function (error) {
                self_1.log_('Failed to get token: ' + error);
                if (!canceled_1) {
                    if (util_6.CONSTANTS.NODE_ADMIN) {
                        // This may be a critical error for the Admin Node.js SDK, so log a warning.
                        // But getToken() may also just have temporarily failed, so we still want to
                        // continue retrying.
                        util_4.warn(error);
                    }
                    closeFn_1();
                }
            });
        }
    };
    /**
     * @param {string} reason
     */
    PersistentConnection.prototype.interrupt = function (reason) {
        util_4.log('Interrupting connection for reason: ' + reason);
        this.interruptReasons_[reason] = true;
        if (this.realtime_) {
            this.realtime_.close();
        }
        else {
            if (this.establishConnectionTimer_) {
                clearTimeout(this.establishConnectionTimer_);
                this.establishConnectionTimer_ = null;
            }
            if (this.connected_) {
                this.onRealtimeDisconnect_();
            }
        }
    };
    /**
     * @param {string} reason
     */
    PersistentConnection.prototype.resume = function (reason) {
        util_4.log('Resuming connection for reason: ' + reason);
        delete this.interruptReasons_[reason];
        if (util_1.isEmpty(this.interruptReasons_)) {
            this.reconnectDelay_ = RECONNECT_MIN_DELAY;
            if (!this.realtime_) {
                this.scheduleConnect_(0);
            }
        }
    };
    PersistentConnection.prototype.handleTimestamp_ = function (timestamp) {
        var delta = timestamp - new Date().getTime();
        this.onServerInfoUpdate_({ serverTimeOffset: delta });
    };
    PersistentConnection.prototype.cancelSentTransactions_ = function () {
        for (var i = 0; i < this.outstandingPuts_.length; i++) {
            var put = this.outstandingPuts_[i];
            if (put && /*hash*/ 'h' in put.request && put.queued) {
                if (put.onComplete)
                    put.onComplete('disconnect');
                delete this.outstandingPuts_[i];
                this.outstandingPutCount_--;
            }
        }
        // Clean up array occasionally.
        if (this.outstandingPutCount_ === 0)
            this.outstandingPuts_ = [];
    };
    /**
     * @param {!string} pathString
     * @param {Array.<*>=} query
     * @private
     */
    PersistentConnection.prototype.onListenRevoked_ = function (pathString, query) {
        // Remove the listen and manufacture a "permission_denied" error for the failed listen.
        var queryId;
        if (!query) {
            queryId = 'default';
        }
        else {
            queryId = query.map(function (q) { return util_4.ObjectToUniqueKey(q); }).join('$');
        }
        var listen = this.removeListen_(pathString, queryId);
        if (listen && listen.onComplete)
            listen.onComplete('permission_denied');
    };
    /**
     * @param {!string} pathString
     * @param {!string} queryId
     * @return {{queries:Array.<Query>, onComplete:function(string)}}
     * @private
     */
    PersistentConnection.prototype.removeListen_ = function (pathString, queryId) {
        var normalizedPathString = new Path_1.Path(pathString).toString(); // normalize path.
        var listen;
        if (this.listens_[normalizedPathString] !== undefined) {
            listen = this.listens_[normalizedPathString][queryId];
            delete this.listens_[normalizedPathString][queryId];
            if (util_1.getCount(this.listens_[normalizedPathString]) === 0) {
                delete this.listens_[normalizedPathString];
            }
        }
        else {
            // all listens for this path has already been removed
            listen = undefined;
        }
        return listen;
    };
    PersistentConnection.prototype.onAuthRevoked_ = function (statusCode, explanation) {
        util_4.log('Auth token revoked: ' + statusCode + '/' + explanation);
        this.authToken_ = null;
        this.forceTokenRefresh_ = true;
        this.realtime_.close();
        if (statusCode === 'invalid_token' || statusCode === 'permission_denied') {
            // We'll wait a couple times before logging the warning / increasing the
            // retry period since oauth tokens will report as "invalid" if they're
            // just expired. Plus there may be transient issues that resolve themselves.
            this.invalidAuthTokenCount_++;
            if (this.invalidAuthTokenCount_ >= INVALID_AUTH_TOKEN_THRESHOLD) {
                // Set a long reconnect delay because recovery is unlikely
                this.reconnectDelay_ = RECONNECT_MAX_DELAY_FOR_ADMINS;
                // Notify the auth token provider that the token is invalid, which will log
                // a warning
                this.authTokenProvider_.notifyForInvalidToken();
            }
        }
    };
    PersistentConnection.prototype.onSecurityDebugPacket_ = function (body) {
        if (this.securityDebugCallback_) {
            this.securityDebugCallback_(body);
        }
        else {
            if ('msg' in body && typeof console !== 'undefined') {
                console.log('FIREBASE: ' + body['msg'].replace('\n', '\nFIREBASE: '));
            }
        }
    };
    PersistentConnection.prototype.restoreState_ = function () {
        var _this = this;
        //Re-authenticate ourselves if we have a credential stored.
        this.tryAuth();
        // Puts depend on having received the corresponding data update from the server before they complete, so we must
        // make sure to send listens before puts.
        util_1.forEach(this.listens_, function (pathString, queries) {
            util_1.forEach(queries, function (key, listenSpec) {
                _this.sendListen_(listenSpec);
            });
        });
        for (var i = 0; i < this.outstandingPuts_.length; i++) {
            if (this.outstandingPuts_[i])
                this.sendPut_(i);
        }
        while (this.onDisconnectRequestQueue_.length) {
            var request = this.onDisconnectRequestQueue_.shift();
            this.sendOnDisconnect_(request.action, request.pathString, request.data, request.onComplete);
        }
    };
    /**
     * Sends client stats for first connection
     * @private
     */
    PersistentConnection.prototype.sendConnectStats_ = function () {
        var stats = {};
        var clientName = 'js';
        if (util_6.CONSTANTS.NODE_ADMIN) {
            clientName = 'admin_node';
        }
        else if (util_6.CONSTANTS.NODE_CLIENT) {
            clientName = 'node';
        }
        stats['sdk.' + clientName + '.' + app_1.default.SDK_VERSION.replace(/\./g, '-')] = 1;
        if (util_7.isMobileCordova()) {
            stats['framework.cordova'] = 1;
        }
        else if (util_7.isReactNative()) {
            stats['framework.reactnative'] = 1;
        }
        this.reportStats(stats);
    };
    /**
     * @return {boolean}
     * @private
     */
    PersistentConnection.prototype.shouldReconnect_ = function () {
        var online = OnlineMonitor_1.OnlineMonitor.getInstance().currentlyOnline();
        return util_1.isEmpty(this.interruptReasons_) && online;
    };
    /**
     * @private
     */
    PersistentConnection.nextPersistentConnectionId_ = 0;
    /**
     * Counter for number of connections created. Mainly used for tagging in the logs
     * @type {number}
     * @private
     */
    PersistentConnection.nextConnectionId_ = 0;
    return PersistentConnection;
}(ServerActions_1.ServerActions));
exports.PersistentConnection = PersistentConnection;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/ReadonlyRestClient.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/ReadonlyRestClient.js ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! ./util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var util_3 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_4 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_5 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var ServerActions_1 = __webpack_require__(/*! ./ServerActions */ "./node_modules/@firebase/database/dist/cjs/src/core/ServerActions.js");
/**
 * An implementation of ServerActions that communicates with the server via REST requests.
 * This is mostly useful for compatibility with crawlers, where we don't want to spin up a full
 * persistent connection (using WebSockets or long-polling)
 */
var ReadonlyRestClient = /** @class */ (function (_super) {
    __extends(ReadonlyRestClient, _super);
    /**
     * @param {!RepoInfo} repoInfo_ Data about the namespace we are connecting to
     * @param {function(string, *, boolean, ?number)} onDataUpdate_ A callback for new data from the server
     * @param {AuthTokenProvider} authTokenProvider_
     * @implements {ServerActions}
     */
    function ReadonlyRestClient(repoInfo_, onDataUpdate_, authTokenProvider_) {
        var _this = _super.call(this) || this;
        _this.repoInfo_ = repoInfo_;
        _this.onDataUpdate_ = onDataUpdate_;
        _this.authTokenProvider_ = authTokenProvider_;
        /** @private {function(...[*])} */
        _this.log_ = util_2.logWrapper('p:rest:');
        /**
         * We don't actually need to track listens, except to prevent us calling an onComplete for a listen
         * that's been removed. :-/
         *
         * @private {!Object.<string, !Object>}
         */
        _this.listens_ = {};
        return _this;
    }
    ReadonlyRestClient.prototype.reportStats = function (stats) {
        throw new Error('Method not implemented.');
    };
    /**
     * @param {!Query} query
     * @param {?number=} tag
     * @return {string}
     * @private
     */
    ReadonlyRestClient.getListenId_ = function (query, tag) {
        if (tag !== undefined) {
            return 'tag$' + tag;
        }
        else {
            util_1.assert(query.getQueryParams().isDefault(), "should have a tag if it's not a default query.");
            return query.path.toString();
        }
    };
    /** @inheritDoc */
    ReadonlyRestClient.prototype.listen = function (query, currentHashFn, tag, onComplete) {
        var _this = this;
        var pathString = query.path.toString();
        this.log_('Listen called for ' + pathString + ' ' + query.queryIdentifier());
        // Mark this listener so we can tell if it's removed.
        var listenId = ReadonlyRestClient.getListenId_(query, tag);
        var thisListen = {};
        this.listens_[listenId] = thisListen;
        var queryStringParamaters = query
            .getQueryParams()
            .toRestQueryStringParameters();
        this.restRequest_(pathString + '.json', queryStringParamaters, function (error, result) {
            var data = result;
            if (error === 404) {
                data = null;
                error = null;
            }
            if (error === null) {
                _this.onDataUpdate_(pathString, data, /*isMerge=*/ false, tag);
            }
            if (util_4.safeGet(_this.listens_, listenId) === thisListen) {
                var status_1;
                if (!error) {
                    status_1 = 'ok';
                }
                else if (error == 401) {
                    status_1 = 'permission_denied';
                }
                else {
                    status_1 = 'rest_error:' + error;
                }
                onComplete(status_1, null);
            }
        });
    };
    /** @inheritDoc */
    ReadonlyRestClient.prototype.unlisten = function (query, tag) {
        var listenId = ReadonlyRestClient.getListenId_(query, tag);
        delete this.listens_[listenId];
    };
    /** @inheritDoc */
    ReadonlyRestClient.prototype.refreshAuthToken = function (token) {
        // no-op since we just always call getToken.
    };
    /**
     * Performs a REST request to the given path, with the provided query string parameters,
     * and any auth credentials we have.
     *
     * @param {!string} pathString
     * @param {!Object.<string, *>} queryStringParameters
     * @param {?function(?number, *=)} callback
     * @private
     */
    ReadonlyRestClient.prototype.restRequest_ = function (pathString, queryStringParameters, callback) {
        var _this = this;
        if (queryStringParameters === void 0) { queryStringParameters = {}; }
        queryStringParameters['format'] = 'export';
        this.authTokenProvider_
            .getToken(/*forceRefresh=*/ false)
            .then(function (authTokenData) {
            var authToken = authTokenData && authTokenData.accessToken;
            if (authToken) {
                queryStringParameters['auth'] = authToken;
            }
            var url = (_this.repoInfo_.secure ? 'https://' : 'http://') +
                _this.repoInfo_.host +
                pathString +
                '?' +
                util_5.querystring(queryStringParameters);
            _this.log_('Sending REST request for ' + url);
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (callback && xhr.readyState === 4) {
                    _this.log_('REST Response for ' + url + ' received. status:', xhr.status, 'response:', xhr.responseText);
                    var res = null;
                    if (xhr.status >= 200 && xhr.status < 300) {
                        try {
                            res = util_3.jsonEval(xhr.responseText);
                        }
                        catch (e) {
                            util_2.warn('Failed to parse JSON response for ' +
                                url +
                                ': ' +
                                xhr.responseText);
                        }
                        callback(null, res);
                    }
                    else {
                        // 401 and 404 are expected.
                        if (xhr.status !== 401 && xhr.status !== 404) {
                            util_2.warn('Got unsuccessful REST response for ' +
                                url +
                                ' Status: ' +
                                xhr.status);
                        }
                        callback(xhr.status);
                    }
                    callback = null;
                }
            };
            xhr.open('GET', url, /*asynchronous=*/ true);
            xhr.send();
        });
    };
    return ReadonlyRestClient;
}(ServerActions_1.ServerActions));
exports.ReadonlyRestClient = ReadonlyRestClient;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/Repo.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/Repo.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var ServerValues_1 = __webpack_require__(/*! ./util/ServerValues */ "./node_modules/@firebase/database/dist/cjs/src/core/util/ServerValues.js");
var nodeFromJSON_1 = __webpack_require__(/*! ./snap/nodeFromJSON */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/nodeFromJSON.js");
var Path_1 = __webpack_require__(/*! ./util/Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var SparseSnapshotTree_1 = __webpack_require__(/*! ./SparseSnapshotTree */ "./node_modules/@firebase/database/dist/cjs/src/core/SparseSnapshotTree.js");
var SyncTree_1 = __webpack_require__(/*! ./SyncTree */ "./node_modules/@firebase/database/dist/cjs/src/core/SyncTree.js");
var SnapshotHolder_1 = __webpack_require__(/*! ./SnapshotHolder */ "./node_modules/@firebase/database/dist/cjs/src/core/SnapshotHolder.js");
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! ./util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var util_3 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var AuthTokenProvider_1 = __webpack_require__(/*! ./AuthTokenProvider */ "./node_modules/@firebase/database/dist/cjs/src/core/AuthTokenProvider.js");
var StatsManager_1 = __webpack_require__(/*! ./stats/StatsManager */ "./node_modules/@firebase/database/dist/cjs/src/core/stats/StatsManager.js");
var StatsReporter_1 = __webpack_require__(/*! ./stats/StatsReporter */ "./node_modules/@firebase/database/dist/cjs/src/core/stats/StatsReporter.js");
var StatsListener_1 = __webpack_require__(/*! ./stats/StatsListener */ "./node_modules/@firebase/database/dist/cjs/src/core/stats/StatsListener.js");
var EventQueue_1 = __webpack_require__(/*! ./view/EventQueue */ "./node_modules/@firebase/database/dist/cjs/src/core/view/EventQueue.js");
var PersistentConnection_1 = __webpack_require__(/*! ./PersistentConnection */ "./node_modules/@firebase/database/dist/cjs/src/core/PersistentConnection.js");
var ReadonlyRestClient_1 = __webpack_require__(/*! ./ReadonlyRestClient */ "./node_modules/@firebase/database/dist/cjs/src/core/ReadonlyRestClient.js");
var Database_1 = __webpack_require__(/*! ../api/Database */ "./node_modules/@firebase/database/dist/cjs/src/api/Database.js");
var INTERRUPT_REASON = 'repo_interrupt';
/**
 * A connection to a single data repository.
 */
var Repo = /** @class */ (function () {
    /**
     * @param {!RepoInfo} repoInfo_
     * @param {boolean} forceRestClient
     * @param {!FirebaseApp} app
     */
    function Repo(repoInfo_, forceRestClient, app) {
        var _this = this;
        this.repoInfo_ = repoInfo_;
        this.app = app;
        this.dataUpdateCount = 0;
        this.statsListener_ = null;
        this.eventQueue_ = new EventQueue_1.EventQueue();
        this.nextWriteId_ = 1;
        this.interceptServerDataCallback_ = null;
        // A list of data pieces and paths to be set when this client disconnects.
        this.onDisconnect_ = new SparseSnapshotTree_1.SparseSnapshotTree();
        /**
         * TODO: This should be @private but it's used by test_access.js and internal.js
         * @type {?PersistentConnection}
         */
        this.persistentConnection_ = null;
        /** @type {!AuthTokenProvider} */
        var authTokenProvider = new AuthTokenProvider_1.AuthTokenProvider(app);
        this.stats_ = StatsManager_1.StatsManager.getCollection(repoInfo_);
        if (forceRestClient || util_2.beingCrawled()) {
            this.server_ = new ReadonlyRestClient_1.ReadonlyRestClient(this.repoInfo_, this.onDataUpdate_.bind(this), authTokenProvider);
            // Minor hack: Fire onConnect immediately, since there's no actual connection.
            setTimeout(this.onConnectStatus_.bind(this, true), 0);
        }
        else {
            var authOverride = app.options['databaseAuthVariableOverride'];
            // Validate authOverride
            if (typeof authOverride !== 'undefined' && authOverride !== null) {
                if (typeof authOverride !== 'object') {
                    throw new Error('Only objects are supported for option databaseAuthVariableOverride');
                }
                try {
                    util_1.stringify(authOverride);
                }
                catch (e) {
                    throw new Error('Invalid authOverride provided: ' + e);
                }
            }
            this.persistentConnection_ = new PersistentConnection_1.PersistentConnection(this.repoInfo_, this.onDataUpdate_.bind(this), this.onConnectStatus_.bind(this), this.onServerInfoUpdate_.bind(this), authTokenProvider, authOverride);
            this.server_ = this.persistentConnection_;
        }
        authTokenProvider.addTokenChangeListener(function (token) {
            _this.server_.refreshAuthToken(token);
        });
        // In the case of multiple Repos for the same repoInfo (i.e. there are multiple Firebase.Contexts being used),
        // we only want to create one StatsReporter.  As such, we'll report stats over the first Repo created.
        this.statsReporter_ = StatsManager_1.StatsManager.getOrCreateReporter(repoInfo_, function () { return new StatsReporter_1.StatsReporter(_this.stats_, _this.server_); });
        this.transactions_init_();
        // Used for .info.
        this.infoData_ = new SnapshotHolder_1.SnapshotHolder();
        this.infoSyncTree_ = new SyncTree_1.SyncTree({
            startListening: function (query, tag, currentHashFn, onComplete) {
                var infoEvents = [];
                var node = _this.infoData_.getNode(query.path);
                // This is possibly a hack, but we have different semantics for .info endpoints. We don't raise null events
                // on initial data...
                if (!node.isEmpty()) {
                    infoEvents = _this.infoSyncTree_.applyServerOverwrite(query.path, node);
                    setTimeout(function () {
                        onComplete('ok');
                    }, 0);
                }
                return infoEvents;
            },
            stopListening: function () { }
        });
        this.updateInfo_('connected', false);
        this.serverSyncTree_ = new SyncTree_1.SyncTree({
            startListening: function (query, tag, currentHashFn, onComplete) {
                _this.server_.listen(query, currentHashFn, tag, function (status, data) {
                    var events = onComplete(status, data);
                    _this.eventQueue_.raiseEventsForChangedPath(query.path, events);
                });
                // No synchronous events for network-backed sync trees
                return [];
            },
            stopListening: function (query, tag) {
                _this.server_.unlisten(query, tag);
            }
        });
    }
    /**
     * @return {string}  The URL corresponding to the root of this Firebase.
     */
    Repo.prototype.toString = function () {
        return ((this.repoInfo_.secure ? 'https://' : 'http://') + this.repoInfo_.host);
    };
    /**
     * @return {!string} The namespace represented by the repo.
     */
    Repo.prototype.name = function () {
        return this.repoInfo_.namespace;
    };
    /**
     * @return {!number} The time in milliseconds, taking the server offset into account if we have one.
     */
    Repo.prototype.serverTime = function () {
        var offsetNode = this.infoData_.getNode(new Path_1.Path('.info/serverTimeOffset'));
        var offset = offsetNode.val() || 0;
        return new Date().getTime() + offset;
    };
    /**
     * Generate ServerValues using some variables from the repo object.
     * @return {!Object}
     */
    Repo.prototype.generateServerValues = function () {
        return ServerValues_1.generateWithValues({
            timestamp: this.serverTime()
        });
    };
    /**
     * Called by realtime when we get new messages from the server.
     *
     * @private
     * @param {string} pathString
     * @param {*} data
     * @param {boolean} isMerge
     * @param {?number} tag
     */
    Repo.prototype.onDataUpdate_ = function (pathString, data, isMerge, tag) {
        // For testing.
        this.dataUpdateCount++;
        var path = new Path_1.Path(pathString);
        data = this.interceptServerDataCallback_
            ? this.interceptServerDataCallback_(pathString, data)
            : data;
        var events = [];
        if (tag) {
            if (isMerge) {
                var taggedChildren = util_3.map(data, function (raw) {
                    return nodeFromJSON_1.nodeFromJSON(raw);
                });
                events = this.serverSyncTree_.applyTaggedQueryMerge(path, taggedChildren, tag);
            }
            else {
                var taggedSnap = nodeFromJSON_1.nodeFromJSON(data);
                events = this.serverSyncTree_.applyTaggedQueryOverwrite(path, taggedSnap, tag);
            }
        }
        else if (isMerge) {
            var changedChildren = util_3.map(data, function (raw) {
                return nodeFromJSON_1.nodeFromJSON(raw);
            });
            events = this.serverSyncTree_.applyServerMerge(path, changedChildren);
        }
        else {
            var snap = nodeFromJSON_1.nodeFromJSON(data);
            events = this.serverSyncTree_.applyServerOverwrite(path, snap);
        }
        var affectedPath = path;
        if (events.length > 0) {
            // Since we have a listener outstanding for each transaction, receiving any events
            // is a proxy for some change having occurred.
            affectedPath = this.rerunTransactions_(path);
        }
        this.eventQueue_.raiseEventsForChangedPath(affectedPath, events);
    };
    /**
     * TODO: This should be @private but it's used by test_access.js and internal.js
     * @param {?function(!string, *):*} callback
     * @private
     */
    Repo.prototype.interceptServerData_ = function (callback) {
        this.interceptServerDataCallback_ = callback;
    };
    /**
     * @param {!boolean} connectStatus
     * @private
     */
    Repo.prototype.onConnectStatus_ = function (connectStatus) {
        this.updateInfo_('connected', connectStatus);
        if (connectStatus === false) {
            this.runOnDisconnectEvents_();
        }
    };
    /**
     * @param {!Object} updates
     * @private
     */
    Repo.prototype.onServerInfoUpdate_ = function (updates) {
        var _this = this;
        util_2.each(updates, function (value, key) {
            _this.updateInfo_(key, value);
        });
    };
    /**
     *
     * @param {!string} pathString
     * @param {*} value
     * @private
     */
    Repo.prototype.updateInfo_ = function (pathString, value) {
        var path = new Path_1.Path('/.info/' + pathString);
        var newNode = nodeFromJSON_1.nodeFromJSON(value);
        this.infoData_.updateSnapshot(path, newNode);
        var events = this.infoSyncTree_.applyServerOverwrite(path, newNode);
        this.eventQueue_.raiseEventsForChangedPath(path, events);
    };
    /**
     * @return {!number}
     * @private
     */
    Repo.prototype.getNextWriteId_ = function () {
        return this.nextWriteId_++;
    };
    /**
     * @param {!Path} path
     * @param {*} newVal
     * @param {number|string|null} newPriority
     * @param {?function(?Error, *=)} onComplete
     */
    Repo.prototype.setWithPriority = function (path, newVal, newPriority, onComplete) {
        var _this = this;
        this.log_('set', {
            path: path.toString(),
            value: newVal,
            priority: newPriority
        });
        // TODO: Optimize this behavior to either (a) store flag to skip resolving where possible and / or
        // (b) store unresolved paths on JSON parse
        var serverValues = this.generateServerValues();
        var newNodeUnresolved = nodeFromJSON_1.nodeFromJSON(newVal, newPriority);
        var newNode = ServerValues_1.resolveDeferredValueSnapshot(newNodeUnresolved, serverValues);
        var writeId = this.getNextWriteId_();
        var events = this.serverSyncTree_.applyUserOverwrite(path, newNode, writeId, true);
        this.eventQueue_.queueEvents(events);
        this.server_.put(path.toString(), newNodeUnresolved.val(/*export=*/ true), function (status, errorReason) {
            var success = status === 'ok';
            if (!success) {
                util_2.warn('set at ' + path + ' failed: ' + status);
            }
            var clearEvents = _this.serverSyncTree_.ackUserWrite(writeId, !success);
            _this.eventQueue_.raiseEventsForChangedPath(path, clearEvents);
            _this.callOnCompleteCallback(onComplete, status, errorReason);
        });
        var affectedPath = this.abortTransactions_(path);
        this.rerunTransactions_(affectedPath);
        // We queued the events above, so just flush the queue here
        this.eventQueue_.raiseEventsForChangedPath(affectedPath, []);
    };
    /**
     * @param {!Path} path
     * @param {!Object} childrenToMerge
     * @param {?function(?Error, *=)} onComplete
     */
    Repo.prototype.update = function (path, childrenToMerge, onComplete) {
        var _this = this;
        this.log_('update', { path: path.toString(), value: childrenToMerge });
        // Start with our existing data and merge each child into it.
        var empty = true;
        var serverValues = this.generateServerValues();
        var changedChildren = {};
        util_3.forEach(childrenToMerge, function (changedKey, changedValue) {
            empty = false;
            var newNodeUnresolved = nodeFromJSON_1.nodeFromJSON(changedValue);
            changedChildren[changedKey] = ServerValues_1.resolveDeferredValueSnapshot(newNodeUnresolved, serverValues);
        });
        if (!empty) {
            var writeId_1 = this.getNextWriteId_();
            var events = this.serverSyncTree_.applyUserMerge(path, changedChildren, writeId_1);
            this.eventQueue_.queueEvents(events);
            this.server_.merge(path.toString(), childrenToMerge, function (status, errorReason) {
                var success = status === 'ok';
                if (!success) {
                    util_2.warn('update at ' + path + ' failed: ' + status);
                }
                var clearEvents = _this.serverSyncTree_.ackUserWrite(writeId_1, !success);
                var affectedPath = clearEvents.length > 0 ? _this.rerunTransactions_(path) : path;
                _this.eventQueue_.raiseEventsForChangedPath(affectedPath, clearEvents);
                _this.callOnCompleteCallback(onComplete, status, errorReason);
            });
            util_3.forEach(childrenToMerge, function (changedPath) {
                var affectedPath = _this.abortTransactions_(path.child(changedPath));
                _this.rerunTransactions_(affectedPath);
            });
            // We queued the events above, so just flush the queue here
            this.eventQueue_.raiseEventsForChangedPath(path, []);
        }
        else {
            util_2.log("update() called with empty data.  Don't do anything.");
            this.callOnCompleteCallback(onComplete, 'ok');
        }
    };
    /**
     * Applies all of the changes stored up in the onDisconnect_ tree.
     * @private
     */
    Repo.prototype.runOnDisconnectEvents_ = function () {
        var _this = this;
        this.log_('onDisconnectEvents');
        var serverValues = this.generateServerValues();
        var resolvedOnDisconnectTree = ServerValues_1.resolveDeferredValueTree(this.onDisconnect_, serverValues);
        var events = [];
        resolvedOnDisconnectTree.forEachTree(Path_1.Path.Empty, function (path, snap) {
            events = events.concat(_this.serverSyncTree_.applyServerOverwrite(path, snap));
            var affectedPath = _this.abortTransactions_(path);
            _this.rerunTransactions_(affectedPath);
        });
        this.onDisconnect_ = new SparseSnapshotTree_1.SparseSnapshotTree();
        this.eventQueue_.raiseEventsForChangedPath(Path_1.Path.Empty, events);
    };
    /**
     * @param {!Path} path
     * @param {?function(?Error, *=)} onComplete
     */
    Repo.prototype.onDisconnectCancel = function (path, onComplete) {
        var _this = this;
        this.server_.onDisconnectCancel(path.toString(), function (status, errorReason) {
            if (status === 'ok') {
                _this.onDisconnect_.forget(path);
            }
            _this.callOnCompleteCallback(onComplete, status, errorReason);
        });
    };
    /**
     * @param {!Path} path
     * @param {*} value
     * @param {?function(?Error, *=)} onComplete
     */
    Repo.prototype.onDisconnectSet = function (path, value, onComplete) {
        var _this = this;
        var newNode = nodeFromJSON_1.nodeFromJSON(value);
        this.server_.onDisconnectPut(path.toString(), newNode.val(/*export=*/ true), function (status, errorReason) {
            if (status === 'ok') {
                _this.onDisconnect_.remember(path, newNode);
            }
            _this.callOnCompleteCallback(onComplete, status, errorReason);
        });
    };
    /**
     * @param {!Path} path
     * @param {*} value
     * @param {*} priority
     * @param {?function(?Error, *=)} onComplete
     */
    Repo.prototype.onDisconnectSetWithPriority = function (path, value, priority, onComplete) {
        var _this = this;
        var newNode = nodeFromJSON_1.nodeFromJSON(value, priority);
        this.server_.onDisconnectPut(path.toString(), newNode.val(/*export=*/ true), function (status, errorReason) {
            if (status === 'ok') {
                _this.onDisconnect_.remember(path, newNode);
            }
            _this.callOnCompleteCallback(onComplete, status, errorReason);
        });
    };
    /**
     * @param {!Path} path
     * @param {*} childrenToMerge
     * @param {?function(?Error, *=)} onComplete
     */
    Repo.prototype.onDisconnectUpdate = function (path, childrenToMerge, onComplete) {
        var _this = this;
        if (util_3.isEmpty(childrenToMerge)) {
            util_2.log("onDisconnect().update() called with empty data.  Don't do anything.");
            this.callOnCompleteCallback(onComplete, 'ok');
            return;
        }
        this.server_.onDisconnectMerge(path.toString(), childrenToMerge, function (status, errorReason) {
            if (status === 'ok') {
                util_3.forEach(childrenToMerge, function (childName, childNode) {
                    var newChildNode = nodeFromJSON_1.nodeFromJSON(childNode);
                    _this.onDisconnect_.remember(path.child(childName), newChildNode);
                });
            }
            _this.callOnCompleteCallback(onComplete, status, errorReason);
        });
    };
    /**
     * @param {!Query} query
     * @param {!EventRegistration} eventRegistration
     */
    Repo.prototype.addEventCallbackForQuery = function (query, eventRegistration) {
        var events;
        if (query.path.getFront() === '.info') {
            events = this.infoSyncTree_.addEventRegistration(query, eventRegistration);
        }
        else {
            events = this.serverSyncTree_.addEventRegistration(query, eventRegistration);
        }
        this.eventQueue_.raiseEventsAtPath(query.path, events);
    };
    /**
     * @param {!Query} query
     * @param {?EventRegistration} eventRegistration
     */
    Repo.prototype.removeEventCallbackForQuery = function (query, eventRegistration) {
        // These are guaranteed not to raise events, since we're not passing in a cancelError. However, we can future-proof
        // a little bit by handling the return values anyways.
        var events;
        if (query.path.getFront() === '.info') {
            events = this.infoSyncTree_.removeEventRegistration(query, eventRegistration);
        }
        else {
            events = this.serverSyncTree_.removeEventRegistration(query, eventRegistration);
        }
        this.eventQueue_.raiseEventsAtPath(query.path, events);
    };
    Repo.prototype.interrupt = function () {
        if (this.persistentConnection_) {
            this.persistentConnection_.interrupt(INTERRUPT_REASON);
        }
    };
    Repo.prototype.resume = function () {
        if (this.persistentConnection_) {
            this.persistentConnection_.resume(INTERRUPT_REASON);
        }
    };
    Repo.prototype.stats = function (showDelta) {
        if (showDelta === void 0) { showDelta = false; }
        if (typeof console === 'undefined')
            return;
        var stats;
        if (showDelta) {
            if (!this.statsListener_)
                this.statsListener_ = new StatsListener_1.StatsListener(this.stats_);
            stats = this.statsListener_.get();
        }
        else {
            stats = this.stats_.get();
        }
        var longestName = Object.keys(stats).reduce(function (previousValue, currentValue) {
            return Math.max(currentValue.length, previousValue);
        }, 0);
        util_3.forEach(stats, function (stat, value) {
            // pad stat names to be the same length (plus 2 extra spaces).
            for (var i = stat.length; i < longestName + 2; i++)
                stat += ' ';
            console.log(stat + value);
        });
    };
    Repo.prototype.statsIncrementCounter = function (metric) {
        this.stats_.incrementCounter(metric);
        this.statsReporter_.includeStat(metric);
    };
    /**
     * @param {...*} var_args
     * @private
     */
    Repo.prototype.log_ = function () {
        var var_args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            var_args[_i] = arguments[_i];
        }
        var prefix = '';
        if (this.persistentConnection_) {
            prefix = this.persistentConnection_.id + ':';
        }
        util_2.log.apply(void 0, [prefix].concat(var_args));
    };
    /**
     * @param {?function(?Error, *=)} callback
     * @param {!string} status
     * @param {?string=} errorReason
     */
    Repo.prototype.callOnCompleteCallback = function (callback, status, errorReason) {
        if (callback) {
            util_2.exceptionGuard(function () {
                if (status == 'ok') {
                    callback(null);
                }
                else {
                    var code = (status || 'error').toUpperCase();
                    var message = code;
                    if (errorReason)
                        message += ': ' + errorReason;
                    var error = new Error(message);
                    error.code = code;
                    callback(error);
                }
            });
        }
    };
    Object.defineProperty(Repo.prototype, "database", {
        get: function () {
            return this.__database || (this.__database = new Database_1.Database(this));
        },
        enumerable: true,
        configurable: true
    });
    return Repo;
}());
exports.Repo = Repo;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/RepoInfo.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/RepoInfo.js ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var storage_1 = __webpack_require__(/*! ./storage/storage */ "./node_modules/@firebase/database/dist/cjs/src/core/storage/storage.js");
var Constants_1 = __webpack_require__(/*! ../realtime/Constants */ "./node_modules/@firebase/database/dist/cjs/src/realtime/Constants.js");
/**
 * A class that holds metadata about a Repo object
 *
 * @constructor
 */
var RepoInfo = /** @class */ (function () {
    /**
     * @param {string} host Hostname portion of the url for the repo
     * @param {boolean} secure Whether or not this repo is accessed over ssl
     * @param {string} namespace The namespace represented by the repo
     * @param {boolean} webSocketOnly Whether to prefer websockets over all other transports (used by Nest).
     * @param {string=} persistenceKey Override the default session persistence storage key
     */
    function RepoInfo(host, secure, namespace, webSocketOnly, persistenceKey) {
        if (persistenceKey === void 0) { persistenceKey = ''; }
        this.secure = secure;
        this.namespace = namespace;
        this.webSocketOnly = webSocketOnly;
        this.persistenceKey = persistenceKey;
        this.host = host.toLowerCase();
        this.domain = this.host.substr(this.host.indexOf('.') + 1);
        this.internalHost = storage_1.PersistentStorage.get('host:' + host) || this.host;
    }
    RepoInfo.prototype.needsQueryParam = function () {
        return this.host !== this.internalHost;
    };
    RepoInfo.prototype.isCacheableHost = function () {
        return this.internalHost.substr(0, 2) === 's-';
    };
    RepoInfo.prototype.isDemoHost = function () {
        return this.domain === 'firebaseio-demo.com';
    };
    RepoInfo.prototype.isCustomHost = function () {
        return (this.domain !== 'firebaseio.com' && this.domain !== 'firebaseio-demo.com');
    };
    RepoInfo.prototype.updateHost = function (newHost) {
        if (newHost !== this.internalHost) {
            this.internalHost = newHost;
            if (this.isCacheableHost()) {
                storage_1.PersistentStorage.set('host:' + this.host, this.internalHost);
            }
        }
    };
    /**
     * Returns the websocket URL for this repo
     * @param {string} type of connection
     * @param {Object} params list
     * @return {string} The URL for this repo
     */
    RepoInfo.prototype.connectionURL = function (type, params) {
        util_1.assert(typeof type === 'string', 'typeof type must == string');
        util_1.assert(typeof params === 'object', 'typeof params must == object');
        var connURL;
        if (type === Constants_1.WEBSOCKET) {
            connURL =
                (this.secure ? 'wss://' : 'ws://') + this.internalHost + '/.ws?';
        }
        else if (type === Constants_1.LONG_POLLING) {
            connURL =
                (this.secure ? 'https://' : 'http://') + this.internalHost + '/.lp?';
        }
        else {
            throw new Error('Unknown connection type: ' + type);
        }
        if (this.needsQueryParam()) {
            params['ns'] = this.namespace;
        }
        var pairs = [];
        util_2.forEach(params, function (key, value) {
            pairs.push(key + '=' + value);
        });
        return connURL + pairs.join('&');
    };
    /** @return {string} */
    RepoInfo.prototype.toString = function () {
        var str = this.toURLString();
        if (this.persistenceKey) {
            str += '<' + this.persistenceKey + '>';
        }
        return str;
    };
    /** @return {string} */
    RepoInfo.prototype.toURLString = function () {
        return (this.secure ? 'https://' : 'http://') + this.host;
    };
    return RepoInfo;
}());
exports.RepoInfo = RepoInfo;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/RepoManager.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/RepoManager.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var Repo_1 = __webpack_require__(/*! ./Repo */ "./node_modules/@firebase/database/dist/cjs/src/core/Repo.js");
var util_2 = __webpack_require__(/*! ./util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var parser_1 = __webpack_require__(/*! ./util/libs/parser */ "./node_modules/@firebase/database/dist/cjs/src/core/util/libs/parser.js");
var validation_1 = __webpack_require__(/*! ./util/validation */ "./node_modules/@firebase/database/dist/cjs/src/core/util/validation.js");
__webpack_require__(/*! ./Repo_transaction */ "./node_modules/@firebase/database/dist/cjs/src/core/Repo_transaction.js");
/** @const {string} */
var DATABASE_URL_OPTION = 'databaseURL';
var _staticInstance;
/**
 * Creates and caches Repo instances.
 */
var RepoManager = /** @class */ (function () {
    function RepoManager() {
        /**
         * @private {!Object.<string, Object<string, !fb.core.Repo>>}
         */
        this.repos_ = {};
        /**
         * If true, new Repos will be created to use ReadonlyRestClient (for testing purposes).
         * @private {boolean}
         */
        this.useRestClient_ = false;
    }
    RepoManager.getInstance = function () {
        if (!_staticInstance) {
            _staticInstance = new RepoManager();
        }
        return _staticInstance;
    };
    // TODO(koss): Remove these functions unless used in tests?
    RepoManager.prototype.interrupt = function () {
        for (var appName in this.repos_) {
            for (var dbUrl in this.repos_[appName]) {
                this.repos_[appName][dbUrl].interrupt();
            }
        }
    };
    RepoManager.prototype.resume = function () {
        for (var appName in this.repos_) {
            for (var dbUrl in this.repos_[appName]) {
                this.repos_[appName][dbUrl].resume();
            }
        }
    };
    /**
     * This function should only ever be called to CREATE a new database instance.
     *
     * @param {!FirebaseApp} app
     * @return {!Database}
     */
    RepoManager.prototype.databaseFromApp = function (app, url) {
        var dbUrl = url || app.options[DATABASE_URL_OPTION];
        if (dbUrl === undefined) {
            util_2.fatal("Can't determine Firebase Database URL.  Be sure to include " +
                DATABASE_URL_OPTION +
                ' option when calling firebase.intializeApp().');
        }
        var parsedUrl = parser_1.parseRepoInfo(dbUrl);
        var repoInfo = parsedUrl.repoInfo;
        validation_1.validateUrl('Invalid Firebase Database URL', 1, parsedUrl);
        if (!parsedUrl.path.isEmpty()) {
            util_2.fatal('Database URL must point to the root of a Firebase Database ' +
                '(not including a child path).');
        }
        var repo = this.createRepo(repoInfo, app);
        return repo.database;
    };
    /**
     * Remove the repo and make sure it is disconnected.
     *
     * @param {!Repo} repo
     */
    RepoManager.prototype.deleteRepo = function (repo) {
        var appRepos = util_1.safeGet(this.repos_, repo.app.name);
        // This should never happen...
        if (!appRepos || util_1.safeGet(appRepos, repo.repoInfo_.toURLString()) !== repo) {
            util_2.fatal("Database " + repo.app.name + "(" + repo.repoInfo_ + ") has already been deleted.");
        }
        repo.interrupt();
        delete appRepos[repo.repoInfo_.toURLString()];
    };
    /**
     * Ensures a repo doesn't already exist and then creates one using the
     * provided app.
     *
     * @param {!RepoInfo} repoInfo The metadata about the Repo
     * @param {!FirebaseApp} app
     * @return {!Repo} The Repo object for the specified server / repoName.
     */
    RepoManager.prototype.createRepo = function (repoInfo, app) {
        var appRepos = util_1.safeGet(this.repos_, app.name);
        if (!appRepos) {
            appRepos = {};
            this.repos_[app.name] = appRepos;
        }
        var repo = util_1.safeGet(appRepos, repoInfo.toURLString());
        if (repo) {
            util_2.fatal('Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.');
        }
        repo = new Repo_1.Repo(repoInfo, this.useRestClient_, app);
        appRepos[repoInfo.toURLString()] = repo;
        return repo;
    };
    /**
     * Forces us to use ReadonlyRestClient instead of PersistentConnection for new Repos.
     * @param {boolean} forceRestClient
     */
    RepoManager.prototype.forceRestClient = function (forceRestClient) {
        this.useRestClient_ = forceRestClient;
    };
    return RepoManager;
}());
exports.RepoManager = RepoManager;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/Repo_transaction.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/Repo_transaction.js ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var Reference_1 = __webpack_require__(/*! ../api/Reference */ "./node_modules/@firebase/database/dist/cjs/src/api/Reference.js");
var DataSnapshot_1 = __webpack_require__(/*! ../api/DataSnapshot */ "./node_modules/@firebase/database/dist/cjs/src/api/DataSnapshot.js");
var Path_1 = __webpack_require__(/*! ./util/Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var Tree_1 = __webpack_require__(/*! ./util/Tree */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Tree.js");
var PriorityIndex_1 = __webpack_require__(/*! ./snap/indexes/PriorityIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PriorityIndex.js");
var util_2 = __webpack_require__(/*! ./util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var ServerValues_1 = __webpack_require__(/*! ./util/ServerValues */ "./node_modules/@firebase/database/dist/cjs/src/core/util/ServerValues.js");
var validation_1 = __webpack_require__(/*! ./util/validation */ "./node_modules/@firebase/database/dist/cjs/src/core/util/validation.js");
var util_3 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var nodeFromJSON_1 = __webpack_require__(/*! ./snap/nodeFromJSON */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/nodeFromJSON.js");
var ChildrenNode_1 = __webpack_require__(/*! ./snap/ChildrenNode */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/ChildrenNode.js");
var Repo_1 = __webpack_require__(/*! ./Repo */ "./node_modules/@firebase/database/dist/cjs/src/core/Repo.js");
// TODO: This is pretty messy.  Ideally, a lot of this would move into FirebaseData, or a transaction-specific
// component used by FirebaseData, but it has ties to user callbacks (transaction update and onComplete) as well
// as the realtime connection (to send transactions to the server).  So that all needs to be decoupled first.
// For now it's part of Repo, but in its own file.
/**
 * @enum {number}
 */
var TransactionStatus;
(function (TransactionStatus) {
    // We've run the transaction and updated transactionResultData_ with the result, but it isn't currently sent to the
    // server. A transaction will go from RUN -> SENT -> RUN if it comes back from the server as rejected due to
    // mismatched hash.
    TransactionStatus[TransactionStatus["RUN"] = 0] = "RUN";
    // We've run the transaction and sent it to the server and it's currently outstanding (hasn't come back as accepted
    // or rejected yet).
    TransactionStatus[TransactionStatus["SENT"] = 1] = "SENT";
    // Temporary state used to mark completed transactions (whether successful or aborted).  The transaction will be
    // removed when we get a chance to prune completed ones.
    TransactionStatus[TransactionStatus["COMPLETED"] = 2] = "COMPLETED";
    // Used when an already-sent transaction needs to be aborted (e.g. due to a conflicting set() call that was made).
    // If it comes back as unsuccessful, we'll abort it.
    TransactionStatus[TransactionStatus["SENT_NEEDS_ABORT"] = 3] = "SENT_NEEDS_ABORT";
    // Temporary state used to mark transactions that need to be aborted.
    TransactionStatus[TransactionStatus["NEEDS_ABORT"] = 4] = "NEEDS_ABORT";
})(TransactionStatus = exports.TransactionStatus || (exports.TransactionStatus = {}));
/**
 * If a transaction does not succeed after 25 retries, we abort it.  Among other things this ensure that if there's
 * ever a bug causing a mismatch between client / server hashes for some data, we won't retry indefinitely.
 * @type {number}
 * @const
 * @private
 */
Repo_1.Repo.MAX_TRANSACTION_RETRIES_ = 25;
/**
 * Setup the transaction data structures
 * @private
 */
Repo_1.Repo.prototype.transactions_init_ = function () {
    /**
     * Stores queues of outstanding transactions for Firebase locations.
     *
     * @type {!Tree.<Array.<!Transaction>>}
     * @private
     */
    this.transactionQueueTree_ = new Tree_1.Tree();
};
/**
 * Creates a new transaction, adds it to the transactions we're tracking, and sends it to the server if possible.
 *
 * @param {!Path} path Path at which to do transaction.
 * @param {function(*):*} transactionUpdate Update callback.
 * @param {?function(?Error, boolean, ?DataSnapshot)} onComplete Completion callback.
 * @param {boolean} applyLocally Whether or not to make intermediate results visible
 */
Repo_1.Repo.prototype.startTransaction = function (path, transactionUpdate, onComplete, applyLocally) {
    this.log_('transaction on ' + path);
    // Add a watch to make sure we get server updates.
    var valueCallback = function () { };
    var watchRef = new Reference_1.Reference(this, path);
    watchRef.on('value', valueCallback);
    var unwatcher = function () {
        watchRef.off('value', valueCallback);
    };
    // Initialize transaction.
    var transaction = {
        path: path,
        update: transactionUpdate,
        onComplete: onComplete,
        // One of TransactionStatus enums.
        status: null,
        // Used when combining transactions at different locations to figure out which one goes first.
        order: util_2.LUIDGenerator(),
        // Whether to raise local events for this transaction.
        applyLocally: applyLocally,
        // Count of how many times we've retried the transaction.
        retryCount: 0,
        // Function to call to clean up our .on() listener.
        unwatcher: unwatcher,
        // Stores why a transaction was aborted.
        abortReason: null,
        currentWriteId: null,
        currentInputSnapshot: null,
        currentOutputSnapshotRaw: null,
        currentOutputSnapshotResolved: null
    };
    // Run transaction initially.
    var currentState = this.getLatestState_(path);
    transaction.currentInputSnapshot = currentState;
    var newVal = transaction.update(currentState.val());
    if (newVal === undefined) {
        // Abort transaction.
        transaction.unwatcher();
        transaction.currentOutputSnapshotRaw = null;
        transaction.currentOutputSnapshotResolved = null;
        if (transaction.onComplete) {
            // We just set the input snapshot, so this cast should be safe
            var snapshot = new DataSnapshot_1.DataSnapshot(transaction.currentInputSnapshot, new Reference_1.Reference(this, transaction.path), PriorityIndex_1.PRIORITY_INDEX);
            transaction.onComplete(null, false, snapshot);
        }
    }
    else {
        validation_1.validateFirebaseData('transaction failed: Data returned ', newVal, transaction.path);
        // Mark as run and add to our queue.
        transaction.status = TransactionStatus.RUN;
        var queueNode = this.transactionQueueTree_.subTree(path);
        var nodeQueue = queueNode.getValue() || [];
        nodeQueue.push(transaction);
        queueNode.setValue(nodeQueue);
        // Update visibleData and raise events
        // Note: We intentionally raise events after updating all of our transaction state, since the user could
        // start new transactions from the event callbacks.
        var priorityForNode = void 0;
        if (typeof newVal === 'object' &&
            newVal !== null &&
            util_3.contains(newVal, '.priority')) {
            priorityForNode = util_3.safeGet(newVal, '.priority');
            util_1.assert(validation_1.isValidPriority(priorityForNode), 'Invalid priority returned by transaction. ' +
                'Priority must be a valid string, finite number, server value, or null.');
        }
        else {
            var currentNode = this.serverSyncTree_.calcCompleteEventCache(path) ||
                ChildrenNode_1.ChildrenNode.EMPTY_NODE;
            priorityForNode = currentNode.getPriority().val();
        }
        priorityForNode /** @type {null|number|string} */ = priorityForNode;
        var serverValues = this.generateServerValues();
        var newNodeUnresolved = nodeFromJSON_1.nodeFromJSON(newVal, priorityForNode);
        var newNode = ServerValues_1.resolveDeferredValueSnapshot(newNodeUnresolved, serverValues);
        transaction.currentOutputSnapshotRaw = newNodeUnresolved;
        transaction.currentOutputSnapshotResolved = newNode;
        transaction.currentWriteId = this.getNextWriteId_();
        var events = this.serverSyncTree_.applyUserOverwrite(path, newNode, transaction.currentWriteId, transaction.applyLocally);
        this.eventQueue_.raiseEventsForChangedPath(path, events);
        this.sendReadyTransactions_();
    }
};
/**
 * @param {!Path} path
 * @param {Array.<number>=} excludeSets A specific set to exclude
 * @return {Node}
 * @private
 */
Repo_1.Repo.prototype.getLatestState_ = function (path, excludeSets) {
    return (this.serverSyncTree_.calcCompleteEventCache(path, excludeSets) ||
        ChildrenNode_1.ChildrenNode.EMPTY_NODE);
};
/**
 * Sends any already-run transactions that aren't waiting for outstanding transactions to
 * complete.
 *
 * Externally it's called with no arguments, but it calls itself recursively with a particular
 * transactionQueueTree node to recurse through the tree.
 *
 * @param {Tree.<Array.<Transaction>>=} node  transactionQueueTree node to start at.
 * @private
 */
Repo_1.Repo.prototype.sendReadyTransactions_ = function (node) {
    var _this = this;
    if (node === void 0) { node = this.transactionQueueTree_; }
    // Before recursing, make sure any completed transactions are removed.
    if (!node) {
        this.pruneCompletedTransactionsBelowNode_(node);
    }
    if (node.getValue() !== null) {
        var queue = this.buildTransactionQueue_(node);
        util_1.assert(queue.length > 0, 'Sending zero length transaction queue');
        var allRun = queue.every(function (transaction) { return transaction.status === TransactionStatus.RUN; });
        // If they're all run (and not sent), we can send them.  Else, we must wait.
        if (allRun) {
            this.sendTransactionQueue_(node.path(), queue);
        }
    }
    else if (node.hasChildren()) {
        node.forEachChild(function (childNode) {
            _this.sendReadyTransactions_(childNode);
        });
    }
};
/**
 * Given a list of run transactions, send them to the server and then handle the result (success or failure).
 *
 * @param {!Path} path The location of the queue.
 * @param {!Array.<Transaction>} queue Queue of transactions under the specified location.
 * @private
 */
Repo_1.Repo.prototype.sendTransactionQueue_ = function (path, queue) {
    var _this = this;
    // Mark transactions as sent and increment retry count!
    var setsToIgnore = queue.map(function (txn) {
        return txn.currentWriteId;
    });
    var latestState = this.getLatestState_(path, setsToIgnore);
    var snapToSend = latestState;
    var latestHash = latestState.hash();
    for (var i = 0; i < queue.length; i++) {
        var txn = queue[i];
        util_1.assert(txn.status === TransactionStatus.RUN, 'tryToSendTransactionQueue_: items in queue should all be run.');
        txn.status = TransactionStatus.SENT;
        txn.retryCount++;
        var relativePath = Path_1.Path.relativePath(path, txn.path);
        // If we've gotten to this point, the output snapshot must be defined.
        snapToSend = snapToSend.updateChild(relativePath /**@type {!Node} */, txn.currentOutputSnapshotRaw);
    }
    var dataToSend = snapToSend.val(true);
    var pathToSend = path;
    // Send the put.
    this.server_.put(pathToSend.toString(), dataToSend, function (status) {
        _this.log_('transaction put response', {
            path: pathToSend.toString(),
            status: status
        });
        var events = [];
        if (status === 'ok') {
            // Queue up the callbacks and fire them after cleaning up all of our transaction state, since
            // the callback could trigger more transactions or sets.
            var callbacks = [];
            for (var i = 0; i < queue.length; i++) {
                queue[i].status = TransactionStatus.COMPLETED;
                events = events.concat(_this.serverSyncTree_.ackUserWrite(queue[i].currentWriteId));
                if (queue[i].onComplete) {
                    // We never unset the output snapshot, and given that this transaction is complete, it should be set
                    var node = queue[i].currentOutputSnapshotResolved;
                    var ref = new Reference_1.Reference(_this, queue[i].path);
                    var snapshot = new DataSnapshot_1.DataSnapshot(node, ref, PriorityIndex_1.PRIORITY_INDEX);
                    callbacks.push(queue[i].onComplete.bind(null, null, true, snapshot));
                }
                queue[i].unwatcher();
            }
            // Now remove the completed transactions.
            _this.pruneCompletedTransactionsBelowNode_(_this.transactionQueueTree_.subTree(path));
            // There may be pending transactions that we can now send.
            _this.sendReadyTransactions_();
            _this.eventQueue_.raiseEventsForChangedPath(path, events);
            // Finally, trigger onComplete callbacks.
            for (var i = 0; i < callbacks.length; i++) {
                util_2.exceptionGuard(callbacks[i]);
            }
        }
        else {
            // transactions are no longer sent.  Update their status appropriately.
            if (status === 'datastale') {
                for (var i = 0; i < queue.length; i++) {
                    if (queue[i].status === TransactionStatus.SENT_NEEDS_ABORT)
                        queue[i].status = TransactionStatus.NEEDS_ABORT;
                    else
                        queue[i].status = TransactionStatus.RUN;
                }
            }
            else {
                util_2.warn('transaction at ' + pathToSend.toString() + ' failed: ' + status);
                for (var i = 0; i < queue.length; i++) {
                    queue[i].status = TransactionStatus.NEEDS_ABORT;
                    queue[i].abortReason = status;
                }
            }
            _this.rerunTransactions_(path);
        }
    }, latestHash);
};
/**
 * Finds all transactions dependent on the data at changedPath and reruns them.
 *
 * Should be called any time cached data changes.
 *
 * Return the highest path that was affected by rerunning transactions.  This is the path at which events need to
 * be raised for.
 *
 * @param {!Path} changedPath The path in mergedData that changed.
 * @return {!Path} The rootmost path that was affected by rerunning transactions.
 * @private
 */
Repo_1.Repo.prototype.rerunTransactions_ = function (changedPath) {
    var rootMostTransactionNode = this.getAncestorTransactionNode_(changedPath);
    var path = rootMostTransactionNode.path();
    var queue = this.buildTransactionQueue_(rootMostTransactionNode);
    this.rerunTransactionQueue_(queue, path);
    return path;
};
/**
 * Does all the work of rerunning transactions (as well as cleans up aborted transactions and whatnot).
 *
 * @param {Array.<Transaction>} queue The queue of transactions to run.
 * @param {!Path} path The path the queue is for.
 * @private
 */
Repo_1.Repo.prototype.rerunTransactionQueue_ = function (queue, path) {
    if (queue.length === 0) {
        return; // Nothing to do!
    }
    // Queue up the callbacks and fire them after cleaning up all of our transaction state, since
    // the callback could trigger more transactions or sets.
    var callbacks = [];
    var events = [];
    // Ignore all of the sets we're going to re-run.
    var txnsToRerun = queue.filter(function (q) {
        return q.status === TransactionStatus.RUN;
    });
    var setsToIgnore = txnsToRerun.map(function (q) {
        return q.currentWriteId;
    });
    for (var i = 0; i < queue.length; i++) {
        var transaction = queue[i];
        var relativePath = Path_1.Path.relativePath(path, transaction.path);
        var abortTransaction = false, abortReason = void 0;
        util_1.assert(relativePath !== null, 'rerunTransactionsUnderNode_: relativePath should not be null.');
        if (transaction.status === TransactionStatus.NEEDS_ABORT) {
            abortTransaction = true;
            abortReason = transaction.abortReason;
            events = events.concat(this.serverSyncTree_.ackUserWrite(transaction.currentWriteId, true));
        }
        else if (transaction.status === TransactionStatus.RUN) {
            if (transaction.retryCount >= Repo_1.Repo.MAX_TRANSACTION_RETRIES_) {
                abortTransaction = true;
                abortReason = 'maxretry';
                events = events.concat(this.serverSyncTree_.ackUserWrite(transaction.currentWriteId, true));
            }
            else {
                // This code reruns a transaction
                var currentNode = this.getLatestState_(transaction.path, setsToIgnore);
                transaction.currentInputSnapshot = currentNode;
                var newData = queue[i].update(currentNode.val());
                if (newData !== undefined) {
                    validation_1.validateFirebaseData('transaction failed: Data returned ', newData, transaction.path);
                    var newDataNode = nodeFromJSON_1.nodeFromJSON(newData);
                    var hasExplicitPriority = typeof newData === 'object' &&
                        newData != null &&
                        util_3.contains(newData, '.priority');
                    if (!hasExplicitPriority) {
                        // Keep the old priority if there wasn't a priority explicitly specified.
                        newDataNode = newDataNode.updatePriority(currentNode.getPriority());
                    }
                    var oldWriteId = transaction.currentWriteId;
                    var serverValues = this.generateServerValues();
                    var newNodeResolved = ServerValues_1.resolveDeferredValueSnapshot(newDataNode, serverValues);
                    transaction.currentOutputSnapshotRaw = newDataNode;
                    transaction.currentOutputSnapshotResolved = newNodeResolved;
                    transaction.currentWriteId = this.getNextWriteId_();
                    // Mutates setsToIgnore in place
                    setsToIgnore.splice(setsToIgnore.indexOf(oldWriteId), 1);
                    events = events.concat(this.serverSyncTree_.applyUserOverwrite(transaction.path, newNodeResolved, transaction.currentWriteId, transaction.applyLocally));
                    events = events.concat(this.serverSyncTree_.ackUserWrite(oldWriteId, true));
                }
                else {
                    abortTransaction = true;
                    abortReason = 'nodata';
                    events = events.concat(this.serverSyncTree_.ackUserWrite(transaction.currentWriteId, true));
                }
            }
        }
        this.eventQueue_.raiseEventsForChangedPath(path, events);
        events = [];
        if (abortTransaction) {
            // Abort.
            queue[i].status = TransactionStatus.COMPLETED;
            // Removing a listener can trigger pruning which can muck with mergedData/visibleData (as it prunes data).
            // So defer the unwatcher until we're done.
            (function (unwatcher) {
                setTimeout(unwatcher, Math.floor(0));
            })(queue[i].unwatcher);
            if (queue[i].onComplete) {
                if (abortReason === 'nodata') {
                    var ref = new Reference_1.Reference(this, queue[i].path);
                    // We set this field immediately, so it's safe to cast to an actual snapshot
                    var lastInput /** @type {!Node} */ = queue[i].currentInputSnapshot;
                    var snapshot = new DataSnapshot_1.DataSnapshot(lastInput, ref, PriorityIndex_1.PRIORITY_INDEX);
                    callbacks.push(queue[i].onComplete.bind(null, null, false, snapshot));
                }
                else {
                    callbacks.push(queue[i].onComplete.bind(null, new Error(abortReason), false, null));
                }
            }
        }
    }
    // Clean up completed transactions.
    this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);
    // Now fire callbacks, now that we're in a good, known state.
    for (var i = 0; i < callbacks.length; i++) {
        util_2.exceptionGuard(callbacks[i]);
    }
    // Try to send the transaction result to the server.
    this.sendReadyTransactions_();
};
/**
 * Returns the rootmost ancestor node of the specified path that has a pending transaction on it, or just returns
 * the node for the given path if there are no pending transactions on any ancestor.
 *
 * @param {!Path} path The location to start at.
 * @return {!Tree.<Array.<!Transaction>>} The rootmost node with a transaction.
 * @private
 */
Repo_1.Repo.prototype.getAncestorTransactionNode_ = function (path) {
    var front;
    // Start at the root and walk deeper into the tree towards path until we find a node with pending transactions.
    var transactionNode = this.transactionQueueTree_;
    while ((front = path.getFront()) !== null &&
        transactionNode.getValue() === null) {
        transactionNode = transactionNode.subTree(front);
        path = path.popFront();
    }
    return transactionNode;
};
/**
 * Builds the queue of all transactions at or below the specified transactionNode.
 *
 * @param {!Tree.<Array.<Transaction>>} transactionNode
 * @return {Array.<Transaction>} The generated queue.
 * @private
 */
Repo_1.Repo.prototype.buildTransactionQueue_ = function (transactionNode) {
    // Walk any child transaction queues and aggregate them into a single queue.
    var transactionQueue = [];
    this.aggregateTransactionQueuesForNode_(transactionNode, transactionQueue);
    // Sort them by the order the transactions were created.
    transactionQueue.sort(function (a, b) {
        return a.order - b.order;
    });
    return transactionQueue;
};
/**
 * @param {!Tree.<Array.<Transaction>>} node
 * @param {Array.<Transaction>} queue
 * @private
 */
Repo_1.Repo.prototype.aggregateTransactionQueuesForNode_ = function (node, queue) {
    var _this = this;
    var nodeQueue = node.getValue();
    if (nodeQueue !== null) {
        for (var i = 0; i < nodeQueue.length; i++) {
            queue.push(nodeQueue[i]);
        }
    }
    node.forEachChild(function (child) {
        _this.aggregateTransactionQueuesForNode_(child, queue);
    });
};
/**
 * Remove COMPLETED transactions at or below this node in the transactionQueueTree_.
 *
 * @param {!Tree.<Array.<!Transaction>>} node
 * @private
 */
Repo_1.Repo.prototype.pruneCompletedTransactionsBelowNode_ = function (node) {
    var _this = this;
    var queue = node.getValue();
    if (queue) {
        var to = 0;
        for (var from = 0; from < queue.length; from++) {
            if (queue[from].status !== TransactionStatus.COMPLETED) {
                queue[to] = queue[from];
                to++;
            }
        }
        queue.length = to;
        node.setValue(queue.length > 0 ? queue : null);
    }
    node.forEachChild(function (childNode) {
        _this.pruneCompletedTransactionsBelowNode_(childNode);
    });
};
/**
 * Aborts all transactions on ancestors or descendants of the specified path.  Called when doing a set() or update()
 * since we consider them incompatible with transactions.
 *
 * @param {!Path} path Path for which we want to abort related transactions.
 * @return {!Path}
 * @private
 */
Repo_1.Repo.prototype.abortTransactions_ = function (path) {
    var _this = this;
    var affectedPath = this.getAncestorTransactionNode_(path).path();
    var transactionNode = this.transactionQueueTree_.subTree(path);
    transactionNode.forEachAncestor(function (node) {
        _this.abortTransactionsOnNode_(node);
    });
    this.abortTransactionsOnNode_(transactionNode);
    transactionNode.forEachDescendant(function (node) {
        _this.abortTransactionsOnNode_(node);
    });
    return affectedPath;
};
/**
 * Abort transactions stored in this transaction queue node.
 *
 * @param {!Tree.<Array.<Transaction>>} node Node to abort transactions for.
 * @private
 */
Repo_1.Repo.prototype.abortTransactionsOnNode_ = function (node) {
    var queue = node.getValue();
    if (queue !== null) {
        // Queue up the callbacks and fire them after cleaning up all of our transaction state, since
        // the callback could trigger more transactions or sets.
        var callbacks = [];
        // Go through queue.  Any already-sent transactions must be marked for abort, while the unsent ones
        // can be immediately aborted and removed.
        var events = [];
        var lastSent = -1;
        for (var i = 0; i < queue.length; i++) {
            if (queue[i].status === TransactionStatus.SENT_NEEDS_ABORT) {
                // Already marked.  No action needed.
            }
            else if (queue[i].status === TransactionStatus.SENT) {
                util_1.assert(lastSent === i - 1, 'All SENT items should be at beginning of queue.');
                lastSent = i;
                // Mark transaction for abort when it comes back.
                queue[i].status = TransactionStatus.SENT_NEEDS_ABORT;
                queue[i].abortReason = 'set';
            }
            else {
                util_1.assert(queue[i].status === TransactionStatus.RUN, 'Unexpected transaction status in abort');
                // We can abort it immediately.
                queue[i].unwatcher();
                events = events.concat(this.serverSyncTree_.ackUserWrite(queue[i].currentWriteId, true));
                if (queue[i].onComplete) {
                    var snapshot = null;
                    callbacks.push(queue[i].onComplete.bind(null, new Error('set'), false, snapshot));
                }
            }
        }
        if (lastSent === -1) {
            // We're not waiting for any sent transactions.  We can clear the queue.
            node.setValue(null);
        }
        else {
            // Remove the transactions we aborted.
            queue.length = lastSent + 1;
        }
        // Now fire the callbacks.
        this.eventQueue_.raiseEventsForChangedPath(node.path(), events);
        for (var i = 0; i < callbacks.length; i++) {
            util_2.exceptionGuard(callbacks[i]);
        }
    }
};



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/ServerActions.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/ServerActions.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Interface defining the set of actions that can be performed against the Firebase server
 * (basically corresponds to our wire protocol).
 *
 * @interface
 */
var ServerActions = /** @class */ (function () {
    function ServerActions() {
    }
    /**
     * @param {string} pathString
     * @param {*} data
     * @param {function(string, string)=} onComplete
     * @param {string=} hash
     */
    ServerActions.prototype.put = function (pathString, data, onComplete, hash) { };
    /**
     * @param {string} pathString
     * @param {*} data
     * @param {function(string, ?string)} onComplete
     * @param {string=} hash
     */
    ServerActions.prototype.merge = function (pathString, data, onComplete, hash) { };
    /**
     * Refreshes the auth token for the current connection.
     * @param {string} token The authentication token
     */
    ServerActions.prototype.refreshAuthToken = function (token) { };
    /**
     * @param {string} pathString
     * @param {*} data
     * @param {function(string, string)=} onComplete
     */
    ServerActions.prototype.onDisconnectPut = function (pathString, data, onComplete) { };
    /**
     * @param {string} pathString
     * @param {*} data
     * @param {function(string, string)=} onComplete
     */
    ServerActions.prototype.onDisconnectMerge = function (pathString, data, onComplete) { };
    /**
     * @param {string} pathString
     * @param {function(string, string)=} onComplete
     */
    ServerActions.prototype.onDisconnectCancel = function (pathString, onComplete) { };
    /**
     * @param {Object.<string, *>} stats
     */
    ServerActions.prototype.reportStats = function (stats) { };
    return ServerActions;
}());
exports.ServerActions = ServerActions;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/SnapshotHolder.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/SnapshotHolder.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var ChildrenNode_1 = __webpack_require__(/*! ./snap/ChildrenNode */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/ChildrenNode.js");
/**
 * Mutable object which basically just stores a reference to the "latest" immutable snapshot.
 *
 * @constructor
 */
var SnapshotHolder = /** @class */ (function () {
    function SnapshotHolder() {
        this.rootNode_ = ChildrenNode_1.ChildrenNode.EMPTY_NODE;
    }
    SnapshotHolder.prototype.getNode = function (path) {
        return this.rootNode_.getChild(path);
    };
    SnapshotHolder.prototype.updateSnapshot = function (path, newSnapshotNode) {
        this.rootNode_ = this.rootNode_.updateChild(path, newSnapshotNode);
    };
    return SnapshotHolder;
}());
exports.SnapshotHolder = SnapshotHolder;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/SparseSnapshotTree.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/SparseSnapshotTree.js ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var Path_1 = __webpack_require__(/*! ./util/Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var PriorityIndex_1 = __webpack_require__(/*! ./snap/indexes/PriorityIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PriorityIndex.js");
var CountedSet_1 = __webpack_require__(/*! ./util/CountedSet */ "./node_modules/@firebase/database/dist/cjs/src/core/util/CountedSet.js");
/**
 * Helper class to store a sparse set of snapshots.
 *
 * @constructor
 */
var SparseSnapshotTree = /** @class */ (function () {
    function SparseSnapshotTree() {
        /**
         * @private
         * @type {Node}
         */
        this.value_ = null;
        /**
         * @private
         * @type {CountedSet}
         */
        this.children_ = null;
    }
    /**
     * Gets the node stored at the given path if one exists.
     *
     * @param {!Path} path Path to look up snapshot for.
     * @return {?Node} The retrieved node, or null.
     */
    SparseSnapshotTree.prototype.find = function (path) {
        if (this.value_ != null) {
            return this.value_.getChild(path);
        }
        else if (!path.isEmpty() && this.children_ != null) {
            var childKey = path.getFront();
            path = path.popFront();
            if (this.children_.contains(childKey)) {
                var childTree = this.children_.get(childKey);
                return childTree.find(path);
            }
            else {
                return null;
            }
        }
        else {
            return null;
        }
    };
    /**
     * Stores the given node at the specified path. If there is already a node
     * at a shallower path, it merges the new data into that snapshot node.
     *
     * @param {!Path} path Path to look up snapshot for.
     * @param {!Node} data The new data, or null.
     */
    SparseSnapshotTree.prototype.remember = function (path, data) {
        if (path.isEmpty()) {
            this.value_ = data;
            this.children_ = null;
        }
        else if (this.value_ !== null) {
            this.value_ = this.value_.updateChild(path, data);
        }
        else {
            if (this.children_ == null) {
                this.children_ = new CountedSet_1.CountedSet();
            }
            var childKey = path.getFront();
            if (!this.children_.contains(childKey)) {
                this.children_.add(childKey, new SparseSnapshotTree());
            }
            var child = this.children_.get(childKey);
            path = path.popFront();
            child.remember(path, data);
        }
    };
    /**
     * Purge the data at path from the cache.
     *
     * @param {!Path} path Path to look up snapshot for.
     * @return {boolean} True if this node should now be removed.
     */
    SparseSnapshotTree.prototype.forget = function (path) {
        if (path.isEmpty()) {
            this.value_ = null;
            this.children_ = null;
            return true;
        }
        else {
            if (this.value_ !== null) {
                if (this.value_.isLeafNode()) {
                    // We're trying to forget a node that doesn't exist
                    return false;
                }
                else {
                    var value = this.value_;
                    this.value_ = null;
                    var self_1 = this;
                    value.forEachChild(PriorityIndex_1.PRIORITY_INDEX, function (key, tree) {
                        self_1.remember(new Path_1.Path(key), tree);
                    });
                    return this.forget(path);
                }
            }
            else if (this.children_ !== null) {
                var childKey = path.getFront();
                path = path.popFront();
                if (this.children_.contains(childKey)) {
                    var safeToRemove = this.children_.get(childKey).forget(path);
                    if (safeToRemove) {
                        this.children_.remove(childKey);
                    }
                }
                if (this.children_.isEmpty()) {
                    this.children_ = null;
                    return true;
                }
                else {
                    return false;
                }
            }
            else {
                return true;
            }
        }
    };
    /**
     * Recursively iterates through all of the stored tree and calls the
     * callback on each one.
     *
     * @param {!Path} prefixPath Path to look up node for.
     * @param {!Function} func The function to invoke for each tree.
     */
    SparseSnapshotTree.prototype.forEachTree = function (prefixPath, func) {
        if (this.value_ !== null) {
            func(prefixPath, this.value_);
        }
        else {
            this.forEachChild(function (key, tree) {
                var path = new Path_1.Path(prefixPath.toString() + '/' + key);
                tree.forEachTree(path, func);
            });
        }
    };
    /**
     * Iterates through each immediate child and triggers the callback.
     *
     * @param {!Function} func The function to invoke for each child.
     */
    SparseSnapshotTree.prototype.forEachChild = function (func) {
        if (this.children_ !== null) {
            this.children_.each(function (key, tree) {
                func(key, tree);
            });
        }
    };
    return SparseSnapshotTree;
}());
exports.SparseSnapshotTree = SparseSnapshotTree;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/SyncPoint.js":
/*!************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/SyncPoint.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var CacheNode_1 = __webpack_require__(/*! ./view/CacheNode */ "./node_modules/@firebase/database/dist/cjs/src/core/view/CacheNode.js");
var ChildrenNode_1 = __webpack_require__(/*! ./snap/ChildrenNode */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/ChildrenNode.js");
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var ViewCache_1 = __webpack_require__(/*! ./view/ViewCache */ "./node_modules/@firebase/database/dist/cjs/src/core/view/ViewCache.js");
var View_1 = __webpack_require__(/*! ./view/View */ "./node_modules/@firebase/database/dist/cjs/src/core/view/View.js");
var __referenceConstructor;
/**
 * SyncPoint represents a single location in a SyncTree with 1 or more event registrations, meaning we need to
 * maintain 1 or more Views at this location to cache server data and raise appropriate events for server changes
 * and user writes (set, transaction, update).
 *
 * It's responsible for:
 *  - Maintaining the set of 1 or more views necessary at this location (a SyncPoint with 0 views should be removed).
 *  - Proxying user / server operations to the views as appropriate (i.e. applyServerOverwrite,
 *    applyUserOverwrite, etc.)
 */
var SyncPoint = /** @class */ (function () {
    function SyncPoint() {
        /**
         * The Views being tracked at this location in the tree, stored as a map where the key is a
         * queryId and the value is the View for that query.
         *
         * NOTE: This list will be quite small (usually 1, but perhaps 2 or 3; any more is an odd use case).
         *
         * @type {!Object.<!string, !View>}
         * @private
         */
        this.views_ = {};
    }
    Object.defineProperty(SyncPoint, "__referenceConstructor", {
        get: function () {
            util_1.assert(__referenceConstructor, 'Reference.ts has not been loaded');
            return __referenceConstructor;
        },
        set: function (val) {
            util_1.assert(!__referenceConstructor, '__referenceConstructor has already been defined');
            __referenceConstructor = val;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {boolean}
     */
    SyncPoint.prototype.isEmpty = function () {
        return util_2.isEmpty(this.views_);
    };
    /**
     *
     * @param {!Operation} operation
     * @param {!WriteTreeRef} writesCache
     * @param {?Node} optCompleteServerCache
     * @return {!Array.<!Event>}
     */
    SyncPoint.prototype.applyOperation = function (operation, writesCache, optCompleteServerCache) {
        var queryId = operation.source.queryId;
        if (queryId !== null) {
            var view = util_2.safeGet(this.views_, queryId);
            util_1.assert(view != null, 'SyncTree gave us an op for an invalid query.');
            return view.applyOperation(operation, writesCache, optCompleteServerCache);
        }
        else {
            var events_1 = [];
            util_2.forEach(this.views_, function (key, view) {
                events_1 = events_1.concat(view.applyOperation(operation, writesCache, optCompleteServerCache));
            });
            return events_1;
        }
    };
    /**
     * Add an event callback for the specified query.
     *
     * @param {!Query} query
     * @param {!EventRegistration} eventRegistration
     * @param {!WriteTreeRef} writesCache
     * @param {?Node} serverCache Complete server cache, if we have it.
     * @param {boolean} serverCacheComplete
     * @return {!Array.<!Event>} Events to raise.
     */
    SyncPoint.prototype.addEventRegistration = function (query, eventRegistration, writesCache, serverCache, serverCacheComplete) {
        var queryId = query.queryIdentifier();
        var view = util_2.safeGet(this.views_, queryId);
        if (!view) {
            // TODO: make writesCache take flag for complete server node
            var eventCache = writesCache.calcCompleteEventCache(serverCacheComplete ? serverCache : null);
            var eventCacheComplete = false;
            if (eventCache) {
                eventCacheComplete = true;
            }
            else if (serverCache instanceof ChildrenNode_1.ChildrenNode) {
                eventCache = writesCache.calcCompleteEventChildren(serverCache);
                eventCacheComplete = false;
            }
            else {
                eventCache = ChildrenNode_1.ChildrenNode.EMPTY_NODE;
                eventCacheComplete = false;
            }
            var viewCache = new ViewCache_1.ViewCache(new CacheNode_1.CacheNode(
            /** @type {!Node} */ (eventCache), eventCacheComplete, false), new CacheNode_1.CacheNode(
            /** @type {!Node} */ (serverCache), serverCacheComplete, false));
            view = new View_1.View(query, viewCache);
            this.views_[queryId] = view;
        }
        // This is guaranteed to exist now, we just created anything that was missing
        view.addEventRegistration(eventRegistration);
        return view.getInitialEvents(eventRegistration);
    };
    /**
     * Remove event callback(s).  Return cancelEvents if a cancelError is specified.
     *
     * If query is the default query, we'll check all views for the specified eventRegistration.
     * If eventRegistration is null, we'll remove all callbacks for the specified view(s).
     *
     * @param {!Query} query
     * @param {?EventRegistration} eventRegistration If null, remove all callbacks.
     * @param {Error=} cancelError If a cancelError is provided, appropriate cancel events will be returned.
     * @return {{removed:!Array.<!Query>, events:!Array.<!Event>}} removed queries and any cancel events
     */
    SyncPoint.prototype.removeEventRegistration = function (query, eventRegistration, cancelError) {
        var queryId = query.queryIdentifier();
        var removed = [];
        var cancelEvents = [];
        var hadCompleteView = this.hasCompleteView();
        if (queryId === 'default') {
            // When you do ref.off(...), we search all views for the registration to remove.
            var self_1 = this;
            util_2.forEach(this.views_, function (viewQueryId, view) {
                cancelEvents = cancelEvents.concat(view.removeEventRegistration(eventRegistration, cancelError));
                if (view.isEmpty()) {
                    delete self_1.views_[viewQueryId];
                    // We'll deal with complete views later.
                    if (!view
                        .getQuery()
                        .getQueryParams()
                        .loadsAllData()) {
                        removed.push(view.getQuery());
                    }
                }
            });
        }
        else {
            // remove the callback from the specific view.
            var view = util_2.safeGet(this.views_, queryId);
            if (view) {
                cancelEvents = cancelEvents.concat(view.removeEventRegistration(eventRegistration, cancelError));
                if (view.isEmpty()) {
                    delete this.views_[queryId];
                    // We'll deal with complete views later.
                    if (!view
                        .getQuery()
                        .getQueryParams()
                        .loadsAllData()) {
                        removed.push(view.getQuery());
                    }
                }
            }
        }
        if (hadCompleteView && !this.hasCompleteView()) {
            // We removed our last complete view.
            removed.push(new SyncPoint.__referenceConstructor(query.repo, query.path));
        }
        return { removed: removed, events: cancelEvents };
    };
    /**
     * @return {!Array.<!View>}
     */
    SyncPoint.prototype.getQueryViews = function () {
        var _this = this;
        var values = Object.keys(this.views_).map(function (key) { return _this.views_[key]; });
        return values.filter(function (view) {
            return !view
                .getQuery()
                .getQueryParams()
                .loadsAllData();
        });
    };
    /**
     *
     * @param {!Path} path The path to the desired complete snapshot
     * @return {?Node} A complete cache, if it exists
     */
    SyncPoint.prototype.getCompleteServerCache = function (path) {
        var serverCache = null;
        util_2.forEach(this.views_, function (key, view) {
            serverCache = serverCache || view.getCompleteServerCache(path);
        });
        return serverCache;
    };
    /**
     * @param {!Query} query
     * @return {?View}
     */
    SyncPoint.prototype.viewForQuery = function (query) {
        var params = query.getQueryParams();
        if (params.loadsAllData()) {
            return this.getCompleteView();
        }
        else {
            var queryId = query.queryIdentifier();
            return util_2.safeGet(this.views_, queryId);
        }
    };
    /**
     * @param {!Query} query
     * @return {boolean}
     */
    SyncPoint.prototype.viewExistsForQuery = function (query) {
        return this.viewForQuery(query) != null;
    };
    /**
     * @return {boolean}
     */
    SyncPoint.prototype.hasCompleteView = function () {
        return this.getCompleteView() != null;
    };
    /**
     * @return {?View}
     */
    SyncPoint.prototype.getCompleteView = function () {
        var completeView = util_2.findValue(this.views_, function (view) {
            return view
                .getQuery()
                .getQueryParams()
                .loadsAllData();
        });
        return completeView || null;
    };
    return SyncPoint;
}());
exports.SyncPoint = SyncPoint;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/SyncTree.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/SyncTree.js ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! ./util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var AckUserWrite_1 = __webpack_require__(/*! ./operation/AckUserWrite */ "./node_modules/@firebase/database/dist/cjs/src/core/operation/AckUserWrite.js");
var ChildrenNode_1 = __webpack_require__(/*! ./snap/ChildrenNode */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/ChildrenNode.js");
var util_3 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var ImmutableTree_1 = __webpack_require__(/*! ./util/ImmutableTree */ "./node_modules/@firebase/database/dist/cjs/src/core/util/ImmutableTree.js");
var ListenComplete_1 = __webpack_require__(/*! ./operation/ListenComplete */ "./node_modules/@firebase/database/dist/cjs/src/core/operation/ListenComplete.js");
var Merge_1 = __webpack_require__(/*! ./operation/Merge */ "./node_modules/@firebase/database/dist/cjs/src/core/operation/Merge.js");
var Operation_1 = __webpack_require__(/*! ./operation/Operation */ "./node_modules/@firebase/database/dist/cjs/src/core/operation/Operation.js");
var Overwrite_1 = __webpack_require__(/*! ./operation/Overwrite */ "./node_modules/@firebase/database/dist/cjs/src/core/operation/Overwrite.js");
var Path_1 = __webpack_require__(/*! ./util/Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var SyncPoint_1 = __webpack_require__(/*! ./SyncPoint */ "./node_modules/@firebase/database/dist/cjs/src/core/SyncPoint.js");
var WriteTree_1 = __webpack_require__(/*! ./WriteTree */ "./node_modules/@firebase/database/dist/cjs/src/core/WriteTree.js");
/**
 * SyncTree is the central class for managing event callback registration, data caching, views
 * (query processing), and event generation.  There are typically two SyncTree instances for
 * each Repo, one for the normal Firebase data, and one for the .info data.
 *
 * It has a number of responsibilities, including:
 *  - Tracking all user event callbacks (registered via addEventRegistration() and removeEventRegistration()).
 *  - Applying and caching data changes for user set(), transaction(), and update() calls
 *    (applyUserOverwrite(), applyUserMerge()).
 *  - Applying and caching data changes for server data changes (applyServerOverwrite(),
 *    applyServerMerge()).
 *  - Generating user-facing events for server and user changes (all of the apply* methods
 *    return the set of events that need to be raised as a result).
 *  - Maintaining the appropriate set of server listens to ensure we are always subscribed
 *    to the correct set of paths and queries to satisfy the current set of user event
 *    callbacks (listens are started/stopped using the provided listenProvider).
 *
 * NOTE: Although SyncTree tracks event callbacks and calculates events to raise, the actual
 * events are returned to the caller rather than raised synchronously.
 *
 * @constructor
 */
var SyncTree = /** @class */ (function () {
    /**
     * @param {!ListenProvider} listenProvider_ Used by SyncTree to start / stop listening
     *   to server data.
     */
    function SyncTree(listenProvider_) {
        this.listenProvider_ = listenProvider_;
        /**
         * Tree of SyncPoints.  There's a SyncPoint at any location that has 1 or more views.
         * @type {!ImmutableTree.<!SyncPoint>}
         * @private
         */
        this.syncPointTree_ = ImmutableTree_1.ImmutableTree.Empty;
        /**
         * A tree of all pending user writes (user-initiated set()'s, transaction()'s, update()'s, etc.).
         * @type {!WriteTree}
         * @private
         */
        this.pendingWriteTree_ = new WriteTree_1.WriteTree();
        this.tagToQueryMap_ = {};
        this.queryToTagMap_ = {};
    }
    /**
     * Apply the data changes for a user-generated set() or transaction() call.
     *
     * @param {!Path} path
     * @param {!Node} newData
     * @param {number} writeId
     * @param {boolean=} visible
     * @return {!Array.<!Event>} Events to raise.
     */
    SyncTree.prototype.applyUserOverwrite = function (path, newData, writeId, visible) {
        // Record pending write.
        this.pendingWriteTree_.addOverwrite(path, newData, writeId, visible);
        if (!visible) {
            return [];
        }
        else {
            return this.applyOperationToSyncPoints_(new Overwrite_1.Overwrite(Operation_1.OperationSource.User, path, newData));
        }
    };
    /**
     * Apply the data from a user-generated update() call
     *
     * @param {!Path} path
     * @param {!Object.<string, !Node>} changedChildren
     * @param {!number} writeId
     * @return {!Array.<!Event>} Events to raise.
     */
    SyncTree.prototype.applyUserMerge = function (path, changedChildren, writeId) {
        // Record pending merge.
        this.pendingWriteTree_.addMerge(path, changedChildren, writeId);
        var changeTree = ImmutableTree_1.ImmutableTree.fromObject(changedChildren);
        return this.applyOperationToSyncPoints_(new Merge_1.Merge(Operation_1.OperationSource.User, path, changeTree));
    };
    /**
     * Acknowledge a pending user write that was previously registered with applyUserOverwrite() or applyUserMerge().
     *
     * @param {!number} writeId
     * @param {boolean=} revert True if the given write failed and needs to be reverted
     * @return {!Array.<!Event>} Events to raise.
     */
    SyncTree.prototype.ackUserWrite = function (writeId, revert) {
        if (revert === void 0) { revert = false; }
        var write = this.pendingWriteTree_.getWrite(writeId);
        var needToReevaluate = this.pendingWriteTree_.removeWrite(writeId);
        if (!needToReevaluate) {
            return [];
        }
        else {
            var affectedTree_1 = ImmutableTree_1.ImmutableTree.Empty;
            if (write.snap != null) {
                // overwrite
                affectedTree_1 = affectedTree_1.set(Path_1.Path.Empty, true);
            }
            else {
                util_3.forEach(write.children, function (pathString, node) {
                    affectedTree_1 = affectedTree_1.set(new Path_1.Path(pathString), node);
                });
            }
            return this.applyOperationToSyncPoints_(new AckUserWrite_1.AckUserWrite(write.path, affectedTree_1, revert));
        }
    };
    /**
     * Apply new server data for the specified path..
     *
     * @param {!Path} path
     * @param {!Node} newData
     * @return {!Array.<!Event>} Events to raise.
     */
    SyncTree.prototype.applyServerOverwrite = function (path, newData) {
        return this.applyOperationToSyncPoints_(new Overwrite_1.Overwrite(Operation_1.OperationSource.Server, path, newData));
    };
    /**
     * Apply new server data to be merged in at the specified path.
     *
     * @param {!Path} path
     * @param {!Object.<string, !Node>} changedChildren
     * @return {!Array.<!Event>} Events to raise.
     */
    SyncTree.prototype.applyServerMerge = function (path, changedChildren) {
        var changeTree = ImmutableTree_1.ImmutableTree.fromObject(changedChildren);
        return this.applyOperationToSyncPoints_(new Merge_1.Merge(Operation_1.OperationSource.Server, path, changeTree));
    };
    /**
     * Apply a listen complete for a query
     *
     * @param {!Path} path
     * @return {!Array.<!Event>} Events to raise.
     */
    SyncTree.prototype.applyListenComplete = function (path) {
        return this.applyOperationToSyncPoints_(new ListenComplete_1.ListenComplete(Operation_1.OperationSource.Server, path));
    };
    /**
     * Apply new server data for the specified tagged query.
     *
     * @param {!Path} path
     * @param {!Node} snap
     * @param {!number} tag
     * @return {!Array.<!Event>} Events to raise.
     */
    SyncTree.prototype.applyTaggedQueryOverwrite = function (path, snap, tag) {
        var queryKey = this.queryKeyForTag_(tag);
        if (queryKey != null) {
            var r = SyncTree.parseQueryKey_(queryKey);
            var queryPath = r.path, queryId = r.queryId;
            var relativePath = Path_1.Path.relativePath(queryPath, path);
            var op = new Overwrite_1.Overwrite(Operation_1.OperationSource.forServerTaggedQuery(queryId), relativePath, snap);
            return this.applyTaggedOperation_(queryPath, op);
        }
        else {
            // Query must have been removed already
            return [];
        }
    };
    /**
     * Apply server data to be merged in for the specified tagged query.
     *
     * @param {!Path} path
     * @param {!Object.<string, !Node>} changedChildren
     * @param {!number} tag
     * @return {!Array.<!Event>} Events to raise.
     */
    SyncTree.prototype.applyTaggedQueryMerge = function (path, changedChildren, tag) {
        var queryKey = this.queryKeyForTag_(tag);
        if (queryKey) {
            var r = SyncTree.parseQueryKey_(queryKey);
            var queryPath = r.path, queryId = r.queryId;
            var relativePath = Path_1.Path.relativePath(queryPath, path);
            var changeTree = ImmutableTree_1.ImmutableTree.fromObject(changedChildren);
            var op = new Merge_1.Merge(Operation_1.OperationSource.forServerTaggedQuery(queryId), relativePath, changeTree);
            return this.applyTaggedOperation_(queryPath, op);
        }
        else {
            // We've already removed the query. No big deal, ignore the update
            return [];
        }
    };
    /**
     * Apply a listen complete for a tagged query
     *
     * @param {!Path} path
     * @param {!number} tag
     * @return {!Array.<!Event>} Events to raise.
     */
    SyncTree.prototype.applyTaggedListenComplete = function (path, tag) {
        var queryKey = this.queryKeyForTag_(tag);
        if (queryKey) {
            var r = SyncTree.parseQueryKey_(queryKey);
            var queryPath = r.path, queryId = r.queryId;
            var relativePath = Path_1.Path.relativePath(queryPath, path);
            var op = new ListenComplete_1.ListenComplete(Operation_1.OperationSource.forServerTaggedQuery(queryId), relativePath);
            return this.applyTaggedOperation_(queryPath, op);
        }
        else {
            // We've already removed the query. No big deal, ignore the update
            return [];
        }
    };
    /**
     * Add an event callback for the specified query.
     *
     * @param {!Query} query
     * @param {!EventRegistration} eventRegistration
     * @return {!Array.<!Event>} Events to raise.
     */
    SyncTree.prototype.addEventRegistration = function (query, eventRegistration) {
        var path = query.path;
        var serverCache = null;
        var foundAncestorDefaultView = false;
        // Any covering writes will necessarily be at the root, so really all we need to find is the server cache.
        // Consider optimizing this once there's a better understanding of what actual behavior will be.
        this.syncPointTree_.foreachOnPath(path, function (pathToSyncPoint, sp) {
            var relativePath = Path_1.Path.relativePath(pathToSyncPoint, path);
            serverCache = serverCache || sp.getCompleteServerCache(relativePath);
            foundAncestorDefaultView =
                foundAncestorDefaultView || sp.hasCompleteView();
        });
        var syncPoint = this.syncPointTree_.get(path);
        if (!syncPoint) {
            syncPoint = new SyncPoint_1.SyncPoint();
            this.syncPointTree_ = this.syncPointTree_.set(path, syncPoint);
        }
        else {
            foundAncestorDefaultView =
                foundAncestorDefaultView || syncPoint.hasCompleteView();
            serverCache = serverCache || syncPoint.getCompleteServerCache(Path_1.Path.Empty);
        }
        var serverCacheComplete;
        if (serverCache != null) {
            serverCacheComplete = true;
        }
        else {
            serverCacheComplete = false;
            serverCache = ChildrenNode_1.ChildrenNode.EMPTY_NODE;
            var subtree = this.syncPointTree_.subtree(path);
            subtree.foreachChild(function (childName, childSyncPoint) {
                var completeCache = childSyncPoint.getCompleteServerCache(Path_1.Path.Empty);
                if (completeCache) {
                    serverCache = serverCache.updateImmediateChild(childName, completeCache);
                }
            });
        }
        var viewAlreadyExists = syncPoint.viewExistsForQuery(query);
        if (!viewAlreadyExists && !query.getQueryParams().loadsAllData()) {
            // We need to track a tag for this query
            var queryKey = SyncTree.makeQueryKey_(query);
            util_1.assert(!(queryKey in this.queryToTagMap_), 'View does not exist, but we have a tag');
            var tag = SyncTree.getNextQueryTag_();
            this.queryToTagMap_[queryKey] = tag;
            // Coerce to string to avoid sparse arrays.
            this.tagToQueryMap_['_' + tag] = queryKey;
        }
        var writesCache = this.pendingWriteTree_.childWrites(path);
        var events = syncPoint.addEventRegistration(query, eventRegistration, writesCache, serverCache, serverCacheComplete);
        if (!viewAlreadyExists && !foundAncestorDefaultView) {
            var view /** @type !View */ = syncPoint.viewForQuery(query);
            events = events.concat(this.setupListener_(query, view));
        }
        return events;
    };
    /**
     * Remove event callback(s).
     *
     * If query is the default query, we'll check all queries for the specified eventRegistration.
     * If eventRegistration is null, we'll remove all callbacks for the specified query/queries.
     *
     * @param {!Query} query
     * @param {?EventRegistration} eventRegistration If null, all callbacks are removed.
     * @param {Error=} cancelError If a cancelError is provided, appropriate cancel events will be returned.
     * @return {!Array.<!Event>} Cancel events, if cancelError was provided.
     */
    SyncTree.prototype.removeEventRegistration = function (query, eventRegistration, cancelError) {
        var _this = this;
        // Find the syncPoint first. Then deal with whether or not it has matching listeners
        var path = query.path;
        var maybeSyncPoint = this.syncPointTree_.get(path);
        var cancelEvents = [];
        // A removal on a default query affects all queries at that location. A removal on an indexed query, even one without
        // other query constraints, does *not* affect all queries at that location. So this check must be for 'default', and
        // not loadsAllData().
        if (maybeSyncPoint &&
            (query.queryIdentifier() === 'default' ||
                maybeSyncPoint.viewExistsForQuery(query))) {
            /**
             * @type {{removed: !Array.<!Query>, events: !Array.<!Event>}}
             */
            var removedAndEvents = maybeSyncPoint.removeEventRegistration(query, eventRegistration, cancelError);
            if (maybeSyncPoint.isEmpty()) {
                this.syncPointTree_ = this.syncPointTree_.remove(path);
            }
            var removed = removedAndEvents.removed;
            cancelEvents = removedAndEvents.events;
            // We may have just removed one of many listeners and can short-circuit this whole process
            // We may also not have removed a default listener, in which case all of the descendant listeners should already be
            // properly set up.
            //
            // Since indexed queries can shadow if they don't have other query constraints, check for loadsAllData(), instead of
            // queryId === 'default'
            var removingDefault = -1 !==
                removed.findIndex(function (query) {
                    return query.getQueryParams().loadsAllData();
                });
            var covered = this.syncPointTree_.findOnPath(path, function (relativePath, parentSyncPoint) {
                return parentSyncPoint.hasCompleteView();
            });
            if (removingDefault && !covered) {
                var subtree = this.syncPointTree_.subtree(path);
                // There are potentially child listeners. Determine what if any listens we need to send before executing the
                // removal
                if (!subtree.isEmpty()) {
                    // We need to fold over our subtree and collect the listeners to send
                    var newViews = this.collectDistinctViewsForSubTree_(subtree);
                    // Ok, we've collected all the listens we need. Set them up.
                    for (var i = 0; i < newViews.length; ++i) {
                        var view = newViews[i], newQuery = view.getQuery();
                        var listener = this.createListenerForView_(view);
                        this.listenProvider_.startListening(SyncTree.queryForListening_(newQuery), this.tagForQuery_(newQuery), listener.hashFn, listener.onComplete);
                    }
                }
                else {
                    // There's nothing below us, so nothing we need to start listening on
                }
            }
            // If we removed anything and we're not covered by a higher up listen, we need to stop listening on this query
            // The above block has us covered in terms of making sure we're set up on listens lower in the tree.
            // Also, note that if we have a cancelError, it's already been removed at the provider level.
            if (!covered && removed.length > 0 && !cancelError) {
                // If we removed a default, then we weren't listening on any of the other queries here. Just cancel the one
                // default. Otherwise, we need to iterate through and cancel each individual query
                if (removingDefault) {
                    // We don't tag default listeners
                    var defaultTag = null;
                    this.listenProvider_.stopListening(SyncTree.queryForListening_(query), defaultTag);
                }
                else {
                    removed.forEach(function (queryToRemove) {
                        var tagToRemove = _this.queryToTagMap_[SyncTree.makeQueryKey_(queryToRemove)];
                        _this.listenProvider_.stopListening(SyncTree.queryForListening_(queryToRemove), tagToRemove);
                    });
                }
            }
            // Now, clear all of the tags we're tracking for the removed listens
            this.removeTags_(removed);
        }
        else {
            // No-op, this listener must've been already removed
        }
        return cancelEvents;
    };
    /**
     * Returns a complete cache, if we have one, of the data at a particular path. The location must have a listener above
     * it, but as this is only used by transaction code, that should always be the case anyways.
     *
     * Note: this method will *include* hidden writes from transaction with applyLocally set to false.
     * @param {!Path} path The path to the data we want
     * @param {Array.<number>=} writeIdsToExclude A specific set to be excluded
     * @return {?Node}
     */
    SyncTree.prototype.calcCompleteEventCache = function (path, writeIdsToExclude) {
        var includeHiddenSets = true;
        var writeTree = this.pendingWriteTree_;
        var serverCache = this.syncPointTree_.findOnPath(path, function (pathSoFar, syncPoint) {
            var relativePath = Path_1.Path.relativePath(pathSoFar, path);
            var serverCache = syncPoint.getCompleteServerCache(relativePath);
            if (serverCache) {
                return serverCache;
            }
        });
        return writeTree.calcCompleteEventCache(path, serverCache, writeIdsToExclude, includeHiddenSets);
    };
    /**
     * This collapses multiple unfiltered views into a single view, since we only need a single
     * listener for them.
     *
     * @param {!ImmutableTree.<!SyncPoint>} subtree
     * @return {!Array.<!View>}
     * @private
     */
    SyncTree.prototype.collectDistinctViewsForSubTree_ = function (subtree) {
        return subtree.fold(function (relativePath, maybeChildSyncPoint, childMap) {
            if (maybeChildSyncPoint && maybeChildSyncPoint.hasCompleteView()) {
                var completeView = maybeChildSyncPoint.getCompleteView();
                return [completeView];
            }
            else {
                // No complete view here, flatten any deeper listens into an array
                var views_1 = [];
                if (maybeChildSyncPoint) {
                    views_1 = maybeChildSyncPoint.getQueryViews();
                }
                util_3.forEach(childMap, function (key, childViews) {
                    views_1 = views_1.concat(childViews);
                });
                return views_1;
            }
        });
    };
    /**
     * @param {!Array.<!Query>} queries
     * @private
     */
    SyncTree.prototype.removeTags_ = function (queries) {
        for (var j = 0; j < queries.length; ++j) {
            var removedQuery = queries[j];
            if (!removedQuery.getQueryParams().loadsAllData()) {
                // We should have a tag for this
                var removedQueryKey = SyncTree.makeQueryKey_(removedQuery);
                var removedQueryTag = this.queryToTagMap_[removedQueryKey];
                delete this.queryToTagMap_[removedQueryKey];
                delete this.tagToQueryMap_['_' + removedQueryTag];
            }
        }
    };
    /**
     * Normalizes a query to a query we send the server for listening
     * @param {!Query} query
     * @return {!Query} The normalized query
     * @private
     */
    SyncTree.queryForListening_ = function (query) {
        if (query.getQueryParams().loadsAllData() &&
            !query.getQueryParams().isDefault()) {
            // We treat queries that load all data as default queries
            // Cast is necessary because ref() technically returns Firebase which is actually fb.api.Firebase which inherits
            // from Query
            return /** @type {!Query} */ query.getRef();
        }
        else {
            return query;
        }
    };
    /**
     * For a given new listen, manage the de-duplication of outstanding subscriptions.
     *
     * @param {!Query} query
     * @param {!View} view
     * @return {!Array.<!Event>} This method can return events to support synchronous data sources
     * @private
     */
    SyncTree.prototype.setupListener_ = function (query, view) {
        var path = query.path;
        var tag = this.tagForQuery_(query);
        var listener = this.createListenerForView_(view);
        var events = this.listenProvider_.startListening(SyncTree.queryForListening_(query), tag, listener.hashFn, listener.onComplete);
        var subtree = this.syncPointTree_.subtree(path);
        // The root of this subtree has our query. We're here because we definitely need to send a listen for that, but we
        // may need to shadow other listens as well.
        if (tag) {
            util_1.assert(!subtree.value.hasCompleteView(), "If we're adding a query, it shouldn't be shadowed");
        }
        else {
            // Shadow everything at or below this location, this is a default listener.
            var queriesToStop = subtree.fold(function (relativePath, maybeChildSyncPoint, childMap) {
                if (!relativePath.isEmpty() &&
                    maybeChildSyncPoint &&
                    maybeChildSyncPoint.hasCompleteView()) {
                    return [maybeChildSyncPoint.getCompleteView().getQuery()];
                }
                else {
                    // No default listener here, flatten any deeper queries into an array
                    var queries_1 = [];
                    if (maybeChildSyncPoint) {
                        queries_1 = queries_1.concat(maybeChildSyncPoint.getQueryViews().map(function (view) { return view.getQuery(); }));
                    }
                    util_3.forEach(childMap, function (key, childQueries) {
                        queries_1 = queries_1.concat(childQueries);
                    });
                    return queries_1;
                }
            });
            for (var i = 0; i < queriesToStop.length; ++i) {
                var queryToStop = queriesToStop[i];
                this.listenProvider_.stopListening(SyncTree.queryForListening_(queryToStop), this.tagForQuery_(queryToStop));
            }
        }
        return events;
    };
    /**
     *
     * @param {!View} view
     * @return {{hashFn: function(), onComplete: function(!string, *)}}
     * @private
     */
    SyncTree.prototype.createListenerForView_ = function (view) {
        var _this = this;
        var query = view.getQuery();
        var tag = this.tagForQuery_(query);
        return {
            hashFn: function () {
                var cache = view.getServerCache() || ChildrenNode_1.ChildrenNode.EMPTY_NODE;
                return cache.hash();
            },
            onComplete: function (status) {
                if (status === 'ok') {
                    if (tag) {
                        return _this.applyTaggedListenComplete(query.path, tag);
                    }
                    else {
                        return _this.applyListenComplete(query.path);
                    }
                }
                else {
                    // If a listen failed, kill all of the listeners here, not just the one that triggered the error.
                    // Note that this may need to be scoped to just this listener if we change permissions on filtered children
                    var error = util_2.errorForServerCode(status, query);
                    return _this.removeEventRegistration(query, 
                    /*eventRegistration*/ null, error);
                }
            }
        };
    };
    /**
     * Given a query, computes a "queryKey" suitable for use in our queryToTagMap_.
     * @private
     * @param {!Query} query
     * @return {string}
     */
    SyncTree.makeQueryKey_ = function (query) {
        return query.path.toString() + '$' + query.queryIdentifier();
    };
    /**
     * Given a queryKey (created by makeQueryKey), parse it back into a path and queryId.
     * @private
     * @param {!string} queryKey
     * @return {{queryId: !string, path: !Path}}
     */
    SyncTree.parseQueryKey_ = function (queryKey) {
        var splitIndex = queryKey.indexOf('$');
        util_1.assert(splitIndex !== -1 && splitIndex < queryKey.length - 1, 'Bad queryKey.');
        return {
            queryId: queryKey.substr(splitIndex + 1),
            path: new Path_1.Path(queryKey.substr(0, splitIndex))
        };
    };
    /**
     * Return the query associated with the given tag, if we have one
     * @param {!number} tag
     * @return {?string}
     * @private
     */
    SyncTree.prototype.queryKeyForTag_ = function (tag) {
        return this.tagToQueryMap_['_' + tag];
    };
    /**
     * Return the tag associated with the given query.
     * @param {!Query} query
     * @return {?number}
     * @private
     */
    SyncTree.prototype.tagForQuery_ = function (query) {
        var queryKey = SyncTree.makeQueryKey_(query);
        return util_3.safeGet(this.queryToTagMap_, queryKey);
    };
    /**
     * Static accessor for query tags.
     * @return {number}
     * @private
     */
    SyncTree.getNextQueryTag_ = function () {
        return SyncTree.nextQueryTag_++;
    };
    /**
     * A helper method to apply tagged operations
     *
     * @param {!Path} queryPath
     * @param {!Operation} operation
     * @return {!Array.<!Event>}
     * @private
     */
    SyncTree.prototype.applyTaggedOperation_ = function (queryPath, operation) {
        var syncPoint = this.syncPointTree_.get(queryPath);
        util_1.assert(syncPoint, "Missing sync point for query tag that we're tracking");
        var writesCache = this.pendingWriteTree_.childWrites(queryPath);
        return syncPoint.applyOperation(operation, writesCache, 
        /*serverCache=*/ null);
    };
    /**
     * A helper method that visits all descendant and ancestor SyncPoints, applying the operation.
     *
     * NOTES:
     * - Descendant SyncPoints will be visited first (since we raise events depth-first).
  
     * - We call applyOperation() on each SyncPoint passing three things:
     *   1. A version of the Operation that has been made relative to the SyncPoint location.
     *   2. A WriteTreeRef of any writes we have cached at the SyncPoint location.
     *   3. A snapshot Node with cached server data, if we have it.
  
     * - We concatenate all of the events returned by each SyncPoint and return the result.
     *
     * @param {!Operation} operation
     * @return {!Array.<!Event>}
     * @private
     */
    SyncTree.prototype.applyOperationToSyncPoints_ = function (operation) {
        return this.applyOperationHelper_(operation, this.syncPointTree_, 
        /*serverCache=*/ null, this.pendingWriteTree_.childWrites(Path_1.Path.Empty));
    };
    /**
     * Recursive helper for applyOperationToSyncPoints_
     *
     * @private
     * @param {!Operation} operation
     * @param {ImmutableTree.<!SyncPoint>} syncPointTree
     * @param {?Node} serverCache
     * @param {!WriteTreeRef} writesCache
     * @return {!Array.<!Event>}
     */
    SyncTree.prototype.applyOperationHelper_ = function (operation, syncPointTree, serverCache, writesCache) {
        if (operation.path.isEmpty()) {
            return this.applyOperationDescendantsHelper_(operation, syncPointTree, serverCache, writesCache);
        }
        else {
            var syncPoint = syncPointTree.get(Path_1.Path.Empty);
            // If we don't have cached server data, see if we can get it from this SyncPoint.
            if (serverCache == null && syncPoint != null) {
                serverCache = syncPoint.getCompleteServerCache(Path_1.Path.Empty);
            }
            var events = [];
            var childName = operation.path.getFront();
            var childOperation = operation.operationForChild(childName);
            var childTree = syncPointTree.children.get(childName);
            if (childTree && childOperation) {
                var childServerCache = serverCache
                    ? serverCache.getImmediateChild(childName)
                    : null;
                var childWritesCache = writesCache.child(childName);
                events = events.concat(this.applyOperationHelper_(childOperation, childTree, childServerCache, childWritesCache));
            }
            if (syncPoint) {
                events = events.concat(syncPoint.applyOperation(operation, writesCache, serverCache));
            }
            return events;
        }
    };
    /**
     * Recursive helper for applyOperationToSyncPoints_
     *
     * @private
     * @param {!Operation} operation
     * @param {ImmutableTree.<!SyncPoint>} syncPointTree
     * @param {?Node} serverCache
     * @param {!WriteTreeRef} writesCache
     * @return {!Array.<!Event>}
     */
    SyncTree.prototype.applyOperationDescendantsHelper_ = function (operation, syncPointTree, serverCache, writesCache) {
        var _this = this;
        var syncPoint = syncPointTree.get(Path_1.Path.Empty);
        // If we don't have cached server data, see if we can get it from this SyncPoint.
        if (serverCache == null && syncPoint != null) {
            serverCache = syncPoint.getCompleteServerCache(Path_1.Path.Empty);
        }
        var events = [];
        syncPointTree.children.inorderTraversal(function (childName, childTree) {
            var childServerCache = serverCache
                ? serverCache.getImmediateChild(childName)
                : null;
            var childWritesCache = writesCache.child(childName);
            var childOperation = operation.operationForChild(childName);
            if (childOperation) {
                events = events.concat(_this.applyOperationDescendantsHelper_(childOperation, childTree, childServerCache, childWritesCache));
            }
        });
        if (syncPoint) {
            events = events.concat(syncPoint.applyOperation(operation, writesCache, serverCache));
        }
        return events;
    };
    /**
     * Static tracker for next query tag.
     * @type {number}
     * @private
     */
    SyncTree.nextQueryTag_ = 1;
    return SyncTree;
}());
exports.SyncTree = SyncTree;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/WriteTree.js":
/*!************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/WriteTree.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var Path_1 = __webpack_require__(/*! ./util/Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var CompoundWrite_1 = __webpack_require__(/*! ./CompoundWrite */ "./node_modules/@firebase/database/dist/cjs/src/core/CompoundWrite.js");
var PriorityIndex_1 = __webpack_require__(/*! ./snap/indexes/PriorityIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PriorityIndex.js");
var ChildrenNode_1 = __webpack_require__(/*! ./snap/ChildrenNode */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/ChildrenNode.js");
/**
 * WriteTree tracks all pending user-initiated writes and has methods to calculate the result of merging them
 * with underlying server data (to create "event cache" data).  Pending writes are added with addOverwrite()
 * and addMerge(), and removed with removeWrite().
 *
 * @constructor
 */
var WriteTree = /** @class */ (function () {
    function WriteTree() {
        /**
         * A tree tracking the result of applying all visible writes.  This does not include transactions with
         * applyLocally=false or writes that are completely shadowed by other writes.
         *
         * @type {!CompoundWrite}
         * @private
         */
        this.visibleWrites_ = CompoundWrite_1.CompoundWrite.Empty;
        /**
         * A list of all pending writes, regardless of visibility and shadowed-ness.  Used to calculate arbitrary
         * sets of the changed data, such as hidden writes (from transactions) or changes with certain writes excluded (also
         * used by transactions).
         *
         * @type {!Array.<!WriteRecord>}
         * @private
         */
        this.allWrites_ = [];
        this.lastWriteId_ = -1;
    }
    /**
     * Create a new WriteTreeRef for the given path. For use with a new sync point at the given path.
     *
     * @param {!Path} path
     * @return {!WriteTreeRef}
     */
    WriteTree.prototype.childWrites = function (path) {
        return new WriteTreeRef(path, this);
    };
    /**
     * Record a new overwrite from user code.
     *
     * @param {!Path} path
     * @param {!Node} snap
     * @param {!number} writeId
     * @param {boolean=} visible This is set to false by some transactions. It should be excluded from event caches
     */
    WriteTree.prototype.addOverwrite = function (path, snap, writeId, visible) {
        util_2.assert(writeId > this.lastWriteId_, 'Stacking an older write on top of newer ones');
        if (visible === undefined) {
            visible = true;
        }
        this.allWrites_.push({
            path: path,
            snap: snap,
            writeId: writeId,
            visible: visible
        });
        if (visible) {
            this.visibleWrites_ = this.visibleWrites_.addWrite(path, snap);
        }
        this.lastWriteId_ = writeId;
    };
    /**
     * Record a new merge from user code.
     *
     * @param {!Path} path
     * @param {!Object.<string, !Node>} changedChildren
     * @param {!number} writeId
     */
    WriteTree.prototype.addMerge = function (path, changedChildren, writeId) {
        util_2.assert(writeId > this.lastWriteId_, 'Stacking an older merge on top of newer ones');
        this.allWrites_.push({
            path: path,
            children: changedChildren,
            writeId: writeId,
            visible: true
        });
        this.visibleWrites_ = this.visibleWrites_.addWrites(path, changedChildren);
        this.lastWriteId_ = writeId;
    };
    /**
     * @param {!number} writeId
     * @return {?WriteRecord}
     */
    WriteTree.prototype.getWrite = function (writeId) {
        for (var i = 0; i < this.allWrites_.length; i++) {
            var record = this.allWrites_[i];
            if (record.writeId === writeId) {
                return record;
            }
        }
        return null;
    };
    /**
     * Remove a write (either an overwrite or merge) that has been successfully acknowledge by the server. Recalculates
     * the tree if necessary.  We return true if it may have been visible, meaning views need to reevaluate.
     *
     * @param {!number} writeId
     * @return {boolean} true if the write may have been visible (meaning we'll need to reevaluate / raise
     * events as a result).
     */
    WriteTree.prototype.removeWrite = function (writeId) {
        // Note: disabling this check. It could be a transaction that preempted another transaction, and thus was applied
        // out of order.
        //const validClear = revert || this.allWrites_.length === 0 || writeId <= this.allWrites_[0].writeId;
        //assert(validClear, "Either we don't have this write, or it's the first one in the queue");
        var _this = this;
        var idx = this.allWrites_.findIndex(function (s) {
            return s.writeId === writeId;
        });
        util_2.assert(idx >= 0, 'removeWrite called with nonexistent writeId.');
        var writeToRemove = this.allWrites_[idx];
        this.allWrites_.splice(idx, 1);
        var removedWriteWasVisible = writeToRemove.visible;
        var removedWriteOverlapsWithOtherWrites = false;
        var i = this.allWrites_.length - 1;
        while (removedWriteWasVisible && i >= 0) {
            var currentWrite = this.allWrites_[i];
            if (currentWrite.visible) {
                if (i >= idx &&
                    this.recordContainsPath_(currentWrite, writeToRemove.path)) {
                    // The removed write was completely shadowed by a subsequent write.
                    removedWriteWasVisible = false;
                }
                else if (writeToRemove.path.contains(currentWrite.path)) {
                    // Either we're covering some writes or they're covering part of us (depending on which came first).
                    removedWriteOverlapsWithOtherWrites = true;
                }
            }
            i--;
        }
        if (!removedWriteWasVisible) {
            return false;
        }
        else if (removedWriteOverlapsWithOtherWrites) {
            // There's some shadowing going on. Just rebuild the visible writes from scratch.
            this.resetTree_();
            return true;
        }
        else {
            // There's no shadowing.  We can safely just remove the write(s) from visibleWrites.
            if (writeToRemove.snap) {
                this.visibleWrites_ = this.visibleWrites_.removeWrite(writeToRemove.path);
            }
            else {
                var children = writeToRemove.children;
                util_1.forEach(children, function (childName) {
                    _this.visibleWrites_ = _this.visibleWrites_.removeWrite(writeToRemove.path.child(childName));
                });
            }
            return true;
        }
    };
    /**
     * Return a complete snapshot for the given path if there's visible write data at that path, else null.
     * No server data is considered.
     *
     * @param {!Path} path
     * @return {?Node}
     */
    WriteTree.prototype.getCompleteWriteData = function (path) {
        return this.visibleWrites_.getCompleteNode(path);
    };
    /**
     * Given optional, underlying server data, and an optional set of constraints (exclude some sets, include hidden
     * writes), attempt to calculate a complete snapshot for the given path
     *
     * @param {!Path} treePath
     * @param {?Node} completeServerCache
     * @param {Array.<number>=} writeIdsToExclude An optional set to be excluded
     * @param {boolean=} includeHiddenWrites Defaults to false, whether or not to layer on writes with visible set to false
     * @return {?Node}
     */
    WriteTree.prototype.calcCompleteEventCache = function (treePath, completeServerCache, writeIdsToExclude, includeHiddenWrites) {
        if (!writeIdsToExclude && !includeHiddenWrites) {
            var shadowingNode = this.visibleWrites_.getCompleteNode(treePath);
            if (shadowingNode != null) {
                return shadowingNode;
            }
            else {
                var subMerge = this.visibleWrites_.childCompoundWrite(treePath);
                if (subMerge.isEmpty()) {
                    return completeServerCache;
                }
                else if (completeServerCache == null &&
                    !subMerge.hasCompleteWrite(Path_1.Path.Empty)) {
                    // We wouldn't have a complete snapshot, since there's no underlying data and no complete shadow
                    return null;
                }
                else {
                    var layeredCache = completeServerCache || ChildrenNode_1.ChildrenNode.EMPTY_NODE;
                    return subMerge.apply(layeredCache);
                }
            }
        }
        else {
            var merge = this.visibleWrites_.childCompoundWrite(treePath);
            if (!includeHiddenWrites && merge.isEmpty()) {
                return completeServerCache;
            }
            else {
                // If the server cache is null, and we don't have a complete cache, we need to return null
                if (!includeHiddenWrites &&
                    completeServerCache == null &&
                    !merge.hasCompleteWrite(Path_1.Path.Empty)) {
                    return null;
                }
                else {
                    var filter = function (write) {
                        return ((write.visible || includeHiddenWrites) &&
                            (!writeIdsToExclude ||
                                !~writeIdsToExclude.indexOf(write.writeId)) &&
                            (write.path.contains(treePath) || treePath.contains(write.path)));
                    };
                    var mergeAtPath = WriteTree.layerTree_(this.allWrites_, filter, treePath);
                    var layeredCache = completeServerCache || ChildrenNode_1.ChildrenNode.EMPTY_NODE;
                    return mergeAtPath.apply(layeredCache);
                }
            }
        }
    };
    /**
     * With optional, underlying server data, attempt to return a children node of children that we have complete data for.
     * Used when creating new views, to pre-fill their complete event children snapshot.
     *
     * @param {!Path} treePath
     * @param {?ChildrenNode} completeServerChildren
     * @return {!ChildrenNode}
     */
    WriteTree.prototype.calcCompleteEventChildren = function (treePath, completeServerChildren) {
        var completeChildren = ChildrenNode_1.ChildrenNode.EMPTY_NODE;
        var topLevelSet = this.visibleWrites_.getCompleteNode(treePath);
        if (topLevelSet) {
            if (!topLevelSet.isLeafNode()) {
                // we're shadowing everything. Return the children.
                topLevelSet.forEachChild(PriorityIndex_1.PRIORITY_INDEX, function (childName, childSnap) {
                    completeChildren = completeChildren.updateImmediateChild(childName, childSnap);
                });
            }
            return completeChildren;
        }
        else if (completeServerChildren) {
            // Layer any children we have on top of this
            // We know we don't have a top-level set, so just enumerate existing children
            var merge_1 = this.visibleWrites_.childCompoundWrite(treePath);
            completeServerChildren.forEachChild(PriorityIndex_1.PRIORITY_INDEX, function (childName, childNode) {
                var node = merge_1
                    .childCompoundWrite(new Path_1.Path(childName))
                    .apply(childNode);
                completeChildren = completeChildren.updateImmediateChild(childName, node);
            });
            // Add any complete children we have from the set
            merge_1.getCompleteChildren().forEach(function (namedNode) {
                completeChildren = completeChildren.updateImmediateChild(namedNode.name, namedNode.node);
            });
            return completeChildren;
        }
        else {
            // We don't have anything to layer on top of. Layer on any children we have
            // Note that we can return an empty snap if we have a defined delete
            var merge = this.visibleWrites_.childCompoundWrite(treePath);
            merge.getCompleteChildren().forEach(function (namedNode) {
                completeChildren = completeChildren.updateImmediateChild(namedNode.name, namedNode.node);
            });
            return completeChildren;
        }
    };
    /**
     * Given that the underlying server data has updated, determine what, if anything, needs to be
     * applied to the event cache.
     *
     * Possibilities:
     *
     * 1. No writes are shadowing. Events should be raised, the snap to be applied comes from the server data
     *
     * 2. Some write is completely shadowing. No events to be raised
     *
     * 3. Is partially shadowed. Events
     *
     * Either existingEventSnap or existingServerSnap must exist
     *
     * @param {!Path} treePath
     * @param {!Path} childPath
     * @param {?Node} existingEventSnap
     * @param {?Node} existingServerSnap
     * @return {?Node}
     */
    WriteTree.prototype.calcEventCacheAfterServerOverwrite = function (treePath, childPath, existingEventSnap, existingServerSnap) {
        util_2.assert(existingEventSnap || existingServerSnap, 'Either existingEventSnap or existingServerSnap must exist');
        var path = treePath.child(childPath);
        if (this.visibleWrites_.hasCompleteWrite(path)) {
            // At this point we can probably guarantee that we're in case 2, meaning no events
            // May need to check visibility while doing the findRootMostValueAndPath call
            return null;
        }
        else {
            // No complete shadowing. We're either partially shadowing or not shadowing at all.
            var childMerge = this.visibleWrites_.childCompoundWrite(path);
            if (childMerge.isEmpty()) {
                // We're not shadowing at all. Case 1
                return existingServerSnap.getChild(childPath);
            }
            else {
                // This could be more efficient if the serverNode + updates doesn't change the eventSnap
                // However this is tricky to find out, since user updates don't necessary change the server
                // snap, e.g. priority updates on empty nodes, or deep deletes. Another special case is if the server
                // adds nodes, but doesn't change any existing writes. It is therefore not enough to
                // only check if the updates change the serverNode.
                // Maybe check if the merge tree contains these special cases and only do a full overwrite in that case?
                return childMerge.apply(existingServerSnap.getChild(childPath));
            }
        }
    };
    /**
     * Returns a complete child for a given server snap after applying all user writes or null if there is no
     * complete child for this ChildKey.
     *
     * @param {!Path} treePath
     * @param {!string} childKey
     * @param {!CacheNode} existingServerSnap
     * @return {?Node}
     */
    WriteTree.prototype.calcCompleteChild = function (treePath, childKey, existingServerSnap) {
        var path = treePath.child(childKey);
        var shadowingNode = this.visibleWrites_.getCompleteNode(path);
        if (shadowingNode != null) {
            return shadowingNode;
        }
        else {
            if (existingServerSnap.isCompleteForChild(childKey)) {
                var childMerge = this.visibleWrites_.childCompoundWrite(path);
                return childMerge.apply(existingServerSnap.getNode().getImmediateChild(childKey));
            }
            else {
                return null;
            }
        }
    };
    /**
     * Returns a node if there is a complete overwrite for this path. More specifically, if there is a write at
     * a higher path, this will return the child of that write relative to the write and this path.
     * Returns null if there is no write at this path.
     *
     * @param {!Path} path
     * @return {?Node}
     */
    WriteTree.prototype.shadowingWrite = function (path) {
        return this.visibleWrites_.getCompleteNode(path);
    };
    /**
     * This method is used when processing child remove events on a query. If we can, we pull in children that were outside
     * the window, but may now be in the window.
     *
     * @param {!Path} treePath
     * @param {?Node} completeServerData
     * @param {!NamedNode} startPost
     * @param {!number} count
     * @param {boolean} reverse
     * @param {!Index} index
     * @return {!Array.<!NamedNode>}
     */
    WriteTree.prototype.calcIndexedSlice = function (treePath, completeServerData, startPost, count, reverse, index) {
        var toIterate;
        var merge = this.visibleWrites_.childCompoundWrite(treePath);
        var shadowingNode = merge.getCompleteNode(Path_1.Path.Empty);
        if (shadowingNode != null) {
            toIterate = shadowingNode;
        }
        else if (completeServerData != null) {
            toIterate = merge.apply(completeServerData);
        }
        else {
            // no children to iterate on
            return [];
        }
        toIterate = toIterate.withIndex(index);
        if (!toIterate.isEmpty() && !toIterate.isLeafNode()) {
            var nodes = [];
            var cmp = index.getCompare();
            var iter = reverse
                ? toIterate.getReverseIteratorFrom(startPost, index)
                : toIterate.getIteratorFrom(startPost, index);
            var next = iter.getNext();
            while (next && nodes.length < count) {
                if (cmp(next, startPost) !== 0) {
                    nodes.push(next);
                }
                next = iter.getNext();
            }
            return nodes;
        }
        else {
            return [];
        }
    };
    /**
     * @param {!WriteRecord} writeRecord
     * @param {!Path} path
     * @return {boolean}
     * @private
     */
    WriteTree.prototype.recordContainsPath_ = function (writeRecord, path) {
        if (writeRecord.snap) {
            return writeRecord.path.contains(path);
        }
        else {
            // findKey can return undefined, so use !! to coerce to boolean
            return !!util_1.findKey(writeRecord.children, function (childSnap, childName) {
                return writeRecord.path.child(childName).contains(path);
            });
        }
    };
    /**
     * Re-layer the writes and merges into a tree so we can efficiently calculate event snapshots
     * @private
     */
    WriteTree.prototype.resetTree_ = function () {
        this.visibleWrites_ = WriteTree.layerTree_(this.allWrites_, WriteTree.DefaultFilter_, Path_1.Path.Empty);
        if (this.allWrites_.length > 0) {
            this.lastWriteId_ = this.allWrites_[this.allWrites_.length - 1].writeId;
        }
        else {
            this.lastWriteId_ = -1;
        }
    };
    /**
     * The default filter used when constructing the tree. Keep everything that's visible.
     *
     * @param {!WriteRecord} write
     * @return {boolean}
     * @private
     */
    WriteTree.DefaultFilter_ = function (write) {
        return write.visible;
    };
    /**
     * Static method. Given an array of WriteRecords, a filter for which ones to include, and a path, construct the tree of
     * event data at that path.
     *
     * @param {!Array.<!WriteRecord>} writes
     * @param {!function(!WriteRecord):boolean} filter
     * @param {!Path} treeRoot
     * @return {!CompoundWrite}
     * @private
     */
    WriteTree.layerTree_ = function (writes, filter, treeRoot) {
        var compoundWrite = CompoundWrite_1.CompoundWrite.Empty;
        for (var i = 0; i < writes.length; ++i) {
            var write = writes[i];
            // Theory, a later set will either:
            // a) abort a relevant transaction, so no need to worry about excluding it from calculating that transaction
            // b) not be relevant to a transaction (separate branch), so again will not affect the data for that transaction
            if (filter(write)) {
                var writePath = write.path;
                var relativePath = void 0;
                if (write.snap) {
                    if (treeRoot.contains(writePath)) {
                        relativePath = Path_1.Path.relativePath(treeRoot, writePath);
                        compoundWrite = compoundWrite.addWrite(relativePath, write.snap);
                    }
                    else if (writePath.contains(treeRoot)) {
                        relativePath = Path_1.Path.relativePath(writePath, treeRoot);
                        compoundWrite = compoundWrite.addWrite(Path_1.Path.Empty, write.snap.getChild(relativePath));
                    }
                    else {
                        // There is no overlap between root path and write path, ignore write
                    }
                }
                else if (write.children) {
                    if (treeRoot.contains(writePath)) {
                        relativePath = Path_1.Path.relativePath(treeRoot, writePath);
                        compoundWrite = compoundWrite.addWrites(relativePath, write.children);
                    }
                    else if (writePath.contains(treeRoot)) {
                        relativePath = Path_1.Path.relativePath(writePath, treeRoot);
                        if (relativePath.isEmpty()) {
                            compoundWrite = compoundWrite.addWrites(Path_1.Path.Empty, write.children);
                        }
                        else {
                            var child = util_1.safeGet(write.children, relativePath.getFront());
                            if (child) {
                                // There exists a child in this node that matches the root path
                                var deepNode = child.getChild(relativePath.popFront());
                                compoundWrite = compoundWrite.addWrite(Path_1.Path.Empty, deepNode);
                            }
                        }
                    }
                    else {
                        // There is no overlap between root path and write path, ignore write
                    }
                }
                else {
                    throw util_2.assertionError('WriteRecord should have .snap or .children');
                }
            }
        }
        return compoundWrite;
    };
    return WriteTree;
}());
exports.WriteTree = WriteTree;
/**
 * A WriteTreeRef wraps a WriteTree and a path, for convenient access to a particular subtree.  All of the methods
 * just proxy to the underlying WriteTree.
 *
 * @constructor
 */
var WriteTreeRef = /** @class */ (function () {
    /**
     * @param {!Path} path
     * @param {!WriteTree} writeTree
     */
    function WriteTreeRef(path, writeTree) {
        this.treePath_ = path;
        this.writeTree_ = writeTree;
    }
    /**
     * If possible, returns a complete event cache, using the underlying server data if possible. In addition, can be used
     * to get a cache that includes hidden writes, and excludes arbitrary writes. Note that customizing the returned node
     * can lead to a more expensive calculation.
     *
     * @param {?Node} completeServerCache
     * @param {Array.<number>=} writeIdsToExclude Optional writes to exclude.
     * @param {boolean=} includeHiddenWrites Defaults to false, whether or not to layer on writes with visible set to false
     * @return {?Node}
     */
    WriteTreeRef.prototype.calcCompleteEventCache = function (completeServerCache, writeIdsToExclude, includeHiddenWrites) {
        return this.writeTree_.calcCompleteEventCache(this.treePath_, completeServerCache, writeIdsToExclude, includeHiddenWrites);
    };
    /**
     * If possible, returns a children node containing all of the complete children we have data for. The returned data is a
     * mix of the given server data and write data.
     *
     * @param {?ChildrenNode} completeServerChildren
     * @return {!ChildrenNode}
     */
    WriteTreeRef.prototype.calcCompleteEventChildren = function (completeServerChildren) {
        return this.writeTree_.calcCompleteEventChildren(this.treePath_, completeServerChildren);
    };
    /**
     * Given that either the underlying server data has updated or the outstanding writes have updated, determine what,
     * if anything, needs to be applied to the event cache.
     *
     * Possibilities:
     *
     * 1. No writes are shadowing. Events should be raised, the snap to be applied comes from the server data
     *
     * 2. Some write is completely shadowing. No events to be raised
     *
     * 3. Is partially shadowed. Events should be raised
     *
     * Either existingEventSnap or existingServerSnap must exist, this is validated via an assert
     *
     * @param {!Path} path
     * @param {?Node} existingEventSnap
     * @param {?Node} existingServerSnap
     * @return {?Node}
     */
    WriteTreeRef.prototype.calcEventCacheAfterServerOverwrite = function (path, existingEventSnap, existingServerSnap) {
        return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_, path, existingEventSnap, existingServerSnap);
    };
    /**
     * Returns a node if there is a complete overwrite for this path. More specifically, if there is a write at
     * a higher path, this will return the child of that write relative to the write and this path.
     * Returns null if there is no write at this path.
     *
     * @param {!Path} path
     * @return {?Node}
     */
    WriteTreeRef.prototype.shadowingWrite = function (path) {
        return this.writeTree_.shadowingWrite(this.treePath_.child(path));
    };
    /**
     * This method is used when processing child remove events on a query. If we can, we pull in children that were outside
     * the window, but may now be in the window
     *
     * @param {?Node} completeServerData
     * @param {!NamedNode} startPost
     * @param {!number} count
     * @param {boolean} reverse
     * @param {!Index} index
     * @return {!Array.<!NamedNode>}
     */
    WriteTreeRef.prototype.calcIndexedSlice = function (completeServerData, startPost, count, reverse, index) {
        return this.writeTree_.calcIndexedSlice(this.treePath_, completeServerData, startPost, count, reverse, index);
    };
    /**
     * Returns a complete child for a given server snap after applying all user writes or null if there is no
     * complete child for this ChildKey.
     *
     * @param {!string} childKey
     * @param {!CacheNode} existingServerCache
     * @return {?Node}
     */
    WriteTreeRef.prototype.calcCompleteChild = function (childKey, existingServerCache) {
        return this.writeTree_.calcCompleteChild(this.treePath_, childKey, existingServerCache);
    };
    /**
     * Return a WriteTreeRef for a child.
     *
     * @param {string} childName
     * @return {!WriteTreeRef}
     */
    WriteTreeRef.prototype.child = function (childName) {
        return new WriteTreeRef(this.treePath_.child(childName), this.writeTree_);
    };
    return WriteTreeRef;
}());
exports.WriteTreeRef = WriteTreeRef;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/operation/AckUserWrite.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/operation/AckUserWrite.js ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var Path_1 = __webpack_require__(/*! ../util/Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var Operation_1 = __webpack_require__(/*! ./Operation */ "./node_modules/@firebase/database/dist/cjs/src/core/operation/Operation.js");
var AckUserWrite = /** @class */ (function () {
    /**
     *
     * @param {!Path} path
     * @param {!ImmutableTree<!boolean>} affectedTree A tree containing true for each affected path. Affected paths can't overlap.
     * @param {!boolean} revert
     */
    function AckUserWrite(
        /**@inheritDoc */ path, 
        /**@inheritDoc */ affectedTree, 
        /**@inheritDoc */ revert) {
        this.path = path;
        this.affectedTree = affectedTree;
        this.revert = revert;
        /** @inheritDoc */
        this.type = Operation_1.OperationType.ACK_USER_WRITE;
        /** @inheritDoc */
        this.source = Operation_1.OperationSource.User;
    }
    /**
     * @inheritDoc
     */
    AckUserWrite.prototype.operationForChild = function (childName) {
        if (!this.path.isEmpty()) {
            util_1.assert(this.path.getFront() === childName, 'operationForChild called for unrelated child.');
            return new AckUserWrite(this.path.popFront(), this.affectedTree, this.revert);
        }
        else if (this.affectedTree.value != null) {
            util_1.assert(this.affectedTree.children.isEmpty(), 'affectedTree should not have overlapping affected paths.');
            // All child locations are affected as well; just return same operation.
            return this;
        }
        else {
            var childTree = this.affectedTree.subtree(new Path_1.Path(childName));
            return new AckUserWrite(Path_1.Path.Empty, childTree, this.revert);
        }
    };
    return AckUserWrite;
}());
exports.AckUserWrite = AckUserWrite;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/operation/ListenComplete.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/operation/ListenComplete.js ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var Path_1 = __webpack_require__(/*! ../util/Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var Operation_1 = __webpack_require__(/*! ./Operation */ "./node_modules/@firebase/database/dist/cjs/src/core/operation/Operation.js");
/**
 * @param {!OperationSource} source
 * @param {!Path} path
 * @constructor
 * @implements {Operation}
 */
var ListenComplete = /** @class */ (function () {
    function ListenComplete(source, path) {
        this.source = source;
        this.path = path;
        /** @inheritDoc */
        this.type = Operation_1.OperationType.LISTEN_COMPLETE;
    }
    ListenComplete.prototype.operationForChild = function (childName) {
        if (this.path.isEmpty()) {
            return new ListenComplete(this.source, Path_1.Path.Empty);
        }
        else {
            return new ListenComplete(this.source, this.path.popFront());
        }
    };
    return ListenComplete;
}());
exports.ListenComplete = ListenComplete;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/operation/Merge.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/operation/Merge.js ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var Operation_1 = __webpack_require__(/*! ./Operation */ "./node_modules/@firebase/database/dist/cjs/src/core/operation/Operation.js");
var Overwrite_1 = __webpack_require__(/*! ./Overwrite */ "./node_modules/@firebase/database/dist/cjs/src/core/operation/Overwrite.js");
var Path_1 = __webpack_require__(/*! ../util/Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * @param {!OperationSource} source
 * @param {!Path} path
 * @param {!ImmutableTree.<!Node>} children
 * @constructor
 * @implements {Operation}
 */
var Merge = /** @class */ (function () {
    function Merge(
        /**@inheritDoc */ source, 
        /**@inheritDoc */ path, 
        /**@inheritDoc */ children) {
        this.source = source;
        this.path = path;
        this.children = children;
        /** @inheritDoc */
        this.type = Operation_1.OperationType.MERGE;
    }
    /**
     * @inheritDoc
     */
    Merge.prototype.operationForChild = function (childName) {
        if (this.path.isEmpty()) {
            var childTree = this.children.subtree(new Path_1.Path(childName));
            if (childTree.isEmpty()) {
                // This child is unaffected
                return null;
            }
            else if (childTree.value) {
                // We have a snapshot for the child in question.  This becomes an overwrite of the child.
                return new Overwrite_1.Overwrite(this.source, Path_1.Path.Empty, childTree.value);
            }
            else {
                // This is a merge at a deeper level
                return new Merge(this.source, Path_1.Path.Empty, childTree);
            }
        }
        else {
            util_1.assert(this.path.getFront() === childName, "Can't get a merge for a child not on the path of the operation");
            return new Merge(this.source, this.path.popFront(), this.children);
        }
    };
    /**
     * @inheritDoc
     */
    Merge.prototype.toString = function () {
        return ('Operation(' +
            this.path +
            ': ' +
            this.source.toString() +
            ' merge: ' +
            this.children.toString() +
            ')');
    };
    return Merge;
}());
exports.Merge = Merge;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/operation/Operation.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/operation/Operation.js ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 *
 * @enum
 */
var OperationType;
(function (OperationType) {
    OperationType[OperationType["OVERWRITE"] = 0] = "OVERWRITE";
    OperationType[OperationType["MERGE"] = 1] = "MERGE";
    OperationType[OperationType["ACK_USER_WRITE"] = 2] = "ACK_USER_WRITE";
    OperationType[OperationType["LISTEN_COMPLETE"] = 3] = "LISTEN_COMPLETE";
})(OperationType = exports.OperationType || (exports.OperationType = {}));
/**
 * @param {boolean} fromUser
 * @param {boolean} fromServer
 * @param {?string} queryId
 * @param {boolean} tagged
 * @constructor
 */
var OperationSource = /** @class */ (function () {
    function OperationSource(fromUser, fromServer, queryId, tagged) {
        this.fromUser = fromUser;
        this.fromServer = fromServer;
        this.queryId = queryId;
        this.tagged = tagged;
        util_1.assert(!tagged || fromServer, 'Tagged queries must be from server.');
    }
    /**
     * @const
     * @type {!OperationSource}
     */
    OperationSource.User = new OperationSource(
    /*fromUser=*/ true, false, null, 
    /*tagged=*/ false);
    /**
     * @const
     * @type {!OperationSource}
     */
    OperationSource.Server = new OperationSource(false, 
    /*fromServer=*/ true, null, 
    /*tagged=*/ false);
    /**
     * @param {string} queryId
     * @return {!OperationSource}
     */
    OperationSource.forServerTaggedQuery = function (queryId) {
        return new OperationSource(false, 
        /*fromServer=*/ true, queryId, 
        /*tagged=*/ true);
    };
    return OperationSource;
}());
exports.OperationSource = OperationSource;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/operation/Overwrite.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/operation/Overwrite.js ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var Operation_1 = __webpack_require__(/*! ./Operation */ "./node_modules/@firebase/database/dist/cjs/src/core/operation/Operation.js");
var Path_1 = __webpack_require__(/*! ../util/Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
/**
 * @param {!OperationSource} source
 * @param {!Path} path
 * @param {!Node} snap
 * @constructor
 * @implements {Operation}
 */
var Overwrite = /** @class */ (function () {
    function Overwrite(source, path, snap) {
        this.source = source;
        this.path = path;
        this.snap = snap;
        /** @inheritDoc */
        this.type = Operation_1.OperationType.OVERWRITE;
    }
    Overwrite.prototype.operationForChild = function (childName) {
        if (this.path.isEmpty()) {
            return new Overwrite(this.source, Path_1.Path.Empty, this.snap.getImmediateChild(childName));
        }
        else {
            return new Overwrite(this.source, this.path.popFront(), this.snap);
        }
    };
    return Overwrite;
}());
exports.Overwrite = Overwrite;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/snap/ChildrenNode.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/snap/ChildrenNode.js ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! ../util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var SortedMap_1 = __webpack_require__(/*! ../util/SortedMap */ "./node_modules/@firebase/database/dist/cjs/src/core/util/SortedMap.js");
var Node_1 = __webpack_require__(/*! ./Node */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/Node.js");
var snap_1 = __webpack_require__(/*! ./snap */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/snap.js");
var PriorityIndex_1 = __webpack_require__(/*! ./indexes/PriorityIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PriorityIndex.js");
var KeyIndex_1 = __webpack_require__(/*! ./indexes/KeyIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/KeyIndex.js");
var IndexMap_1 = __webpack_require__(/*! ./IndexMap */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/IndexMap.js");
var LeafNode_1 = __webpack_require__(/*! ./LeafNode */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/LeafNode.js");
var comparators_1 = __webpack_require__(/*! ./comparators */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/comparators.js");
// TODO: For memory savings, don't store priorityNode_ if it's empty.
var EMPTY_NODE;
/**
 * ChildrenNode is a class for storing internal nodes in a DataSnapshot
 * (i.e. nodes with children).  It implements Node and stores the
 * list of children in the children property, sorted by child name.
 *
 * @constructor
 * @implements {Node}
 */
var ChildrenNode = /** @class */ (function () {
    /**
     *
     * @param {!SortedMap.<string, !Node>} children_ List of children
     * of this node..
     * @param {?Node} priorityNode_ The priority of this node (as a snapshot node).
     * @param {!IndexMap} indexMap_
     */
    function ChildrenNode(children_, priorityNode_, indexMap_) {
        this.children_ = children_;
        this.priorityNode_ = priorityNode_;
        this.indexMap_ = indexMap_;
        this.lazyHash_ = null;
        /**
         * Note: The only reason we allow null priority is for EMPTY_NODE, since we can't use
         * EMPTY_NODE as the priority of EMPTY_NODE.  We might want to consider making EMPTY_NODE its own
         * class instead of an empty ChildrenNode.
         */
        if (this.priorityNode_) {
            snap_1.validatePriorityNode(this.priorityNode_);
        }
        if (this.children_.isEmpty()) {
            util_1.assert(!this.priorityNode_ || this.priorityNode_.isEmpty(), 'An empty node cannot have a priority');
        }
    }
    Object.defineProperty(ChildrenNode, "EMPTY_NODE", {
        get: function () {
            return (EMPTY_NODE ||
                (EMPTY_NODE = new ChildrenNode(new SortedMap_1.SortedMap(comparators_1.NAME_COMPARATOR), null, IndexMap_1.IndexMap.Default)));
        },
        enumerable: true,
        configurable: true
    });
    /** @inheritDoc */
    ChildrenNode.prototype.isLeafNode = function () {
        return false;
    };
    /** @inheritDoc */
    ChildrenNode.prototype.getPriority = function () {
        return this.priorityNode_ || EMPTY_NODE;
    };
    /** @inheritDoc */
    ChildrenNode.prototype.updatePriority = function (newPriorityNode) {
        if (this.children_.isEmpty()) {
            // Don't allow priorities on empty nodes
            return this;
        }
        else {
            return new ChildrenNode(this.children_, newPriorityNode, this.indexMap_);
        }
    };
    /** @inheritDoc */
    ChildrenNode.prototype.getImmediateChild = function (childName) {
        // Hack to treat priority as a regular child
        if (childName === '.priority') {
            return this.getPriority();
        }
        else {
            var child = this.children_.get(childName);
            return child === null ? EMPTY_NODE : child;
        }
    };
    /** @inheritDoc */
    ChildrenNode.prototype.getChild = function (path) {
        var front = path.getFront();
        if (front === null)
            return this;
        return this.getImmediateChild(front).getChild(path.popFront());
    };
    /** @inheritDoc */
    ChildrenNode.prototype.hasChild = function (childName) {
        return this.children_.get(childName) !== null;
    };
    /** @inheritDoc */
    ChildrenNode.prototype.updateImmediateChild = function (childName, newChildNode) {
        util_1.assert(newChildNode, 'We should always be passing snapshot nodes');
        if (childName === '.priority') {
            return this.updatePriority(newChildNode);
        }
        else {
            var namedNode = new Node_1.NamedNode(childName, newChildNode);
            var newChildren = void 0, newIndexMap = void 0, newPriority = void 0;
            if (newChildNode.isEmpty()) {
                newChildren = this.children_.remove(childName);
                newIndexMap = this.indexMap_.removeFromIndexes(namedNode, this.children_);
            }
            else {
                newChildren = this.children_.insert(childName, newChildNode);
                newIndexMap = this.indexMap_.addToIndexes(namedNode, this.children_);
            }
            newPriority = newChildren.isEmpty() ? EMPTY_NODE : this.priorityNode_;
            return new ChildrenNode(newChildren, newPriority, newIndexMap);
        }
    };
    /** @inheritDoc */
    ChildrenNode.prototype.updateChild = function (path, newChildNode) {
        var front = path.getFront();
        if (front === null) {
            return newChildNode;
        }
        else {
            util_1.assert(path.getFront() !== '.priority' || path.getLength() === 1, '.priority must be the last token in a path');
            var newImmediateChild = this.getImmediateChild(front).updateChild(path.popFront(), newChildNode);
            return this.updateImmediateChild(front, newImmediateChild);
        }
    };
    /** @inheritDoc */
    ChildrenNode.prototype.isEmpty = function () {
        return this.children_.isEmpty();
    };
    /** @inheritDoc */
    ChildrenNode.prototype.numChildren = function () {
        return this.children_.count();
    };
    /** @inheritDoc */
    ChildrenNode.prototype.val = function (exportFormat) {
        if (this.isEmpty())
            return null;
        var obj = {};
        var numKeys = 0, maxKey = 0, allIntegerKeys = true;
        this.forEachChild(PriorityIndex_1.PRIORITY_INDEX, function (key, childNode) {
            obj[key] = childNode.val(exportFormat);
            numKeys++;
            if (allIntegerKeys && ChildrenNode.INTEGER_REGEXP_.test(key)) {
                maxKey = Math.max(maxKey, Number(key));
            }
            else {
                allIntegerKeys = false;
            }
        });
        if (!exportFormat && allIntegerKeys && maxKey < 2 * numKeys) {
            // convert to array.
            var array = [];
            for (var key in obj)
                array[key] = obj[key];
            return array;
        }
        else {
            if (exportFormat && !this.getPriority().isEmpty()) {
                obj['.priority'] = this.getPriority().val();
            }
            return obj;
        }
    };
    /** @inheritDoc */
    ChildrenNode.prototype.hash = function () {
        if (this.lazyHash_ === null) {
            var toHash_1 = '';
            if (!this.getPriority().isEmpty())
                toHash_1 +=
                    'priority:' +
                        snap_1.priorityHashText(this.getPriority().val()) +
                        ':';
            this.forEachChild(PriorityIndex_1.PRIORITY_INDEX, function (key, childNode) {
                var childHash = childNode.hash();
                if (childHash !== '')
                    toHash_1 += ':' + key + ':' + childHash;
            });
            this.lazyHash_ = toHash_1 === '' ? '' : util_2.sha1(toHash_1);
        }
        return this.lazyHash_;
    };
    /** @inheritDoc */
    ChildrenNode.prototype.getPredecessorChildName = function (childName, childNode, index) {
        var idx = this.resolveIndex_(index);
        if (idx) {
            var predecessor = idx.getPredecessorKey(new Node_1.NamedNode(childName, childNode));
            return predecessor ? predecessor.name : null;
        }
        else {
            return this.children_.getPredecessorKey(childName);
        }
    };
    /**
     * @param {!Index} indexDefinition
     * @return {?string}
     */
    ChildrenNode.prototype.getFirstChildName = function (indexDefinition) {
        var idx = this.resolveIndex_(indexDefinition);
        if (idx) {
            var minKey = idx.minKey();
            return minKey && minKey.name;
        }
        else {
            return this.children_.minKey();
        }
    };
    /**
     * @param {!Index} indexDefinition
     * @return {?NamedNode}
     */
    ChildrenNode.prototype.getFirstChild = function (indexDefinition) {
        var minKey = this.getFirstChildName(indexDefinition);
        if (minKey) {
            return new Node_1.NamedNode(minKey, this.children_.get(minKey));
        }
        else {
            return null;
        }
    };
    /**
     * Given an index, return the key name of the largest value we have, according to that index
     * @param {!Index} indexDefinition
     * @return {?string}
     */
    ChildrenNode.prototype.getLastChildName = function (indexDefinition) {
        var idx = this.resolveIndex_(indexDefinition);
        if (idx) {
            var maxKey = idx.maxKey();
            return maxKey && maxKey.name;
        }
        else {
            return this.children_.maxKey();
        }
    };
    /**
     * @param {!Index} indexDefinition
     * @return {?NamedNode}
     */
    ChildrenNode.prototype.getLastChild = function (indexDefinition) {
        var maxKey = this.getLastChildName(indexDefinition);
        if (maxKey) {
            return new Node_1.NamedNode(maxKey, this.children_.get(maxKey));
        }
        else {
            return null;
        }
    };
    /**
     * @inheritDoc
     */
    ChildrenNode.prototype.forEachChild = function (index, action) {
        var idx = this.resolveIndex_(index);
        if (idx) {
            return idx.inorderTraversal(function (wrappedNode) {
                return action(wrappedNode.name, wrappedNode.node);
            });
        }
        else {
            return this.children_.inorderTraversal(action);
        }
    };
    /**
     * @param {!Index} indexDefinition
     * @return {SortedMapIterator}
     */
    ChildrenNode.prototype.getIterator = function (indexDefinition) {
        return this.getIteratorFrom(indexDefinition.minPost(), indexDefinition);
    };
    /**
     *
     * @param {!NamedNode} startPost
     * @param {!Index} indexDefinition
     * @return {!SortedMapIterator}
     */
    ChildrenNode.prototype.getIteratorFrom = function (startPost, indexDefinition) {
        var idx = this.resolveIndex_(indexDefinition);
        if (idx) {
            return idx.getIteratorFrom(startPost, function (key) { return key; });
        }
        else {
            var iterator = this.children_.getIteratorFrom(startPost.name, Node_1.NamedNode.Wrap);
            var next = iterator.peek();
            while (next != null && indexDefinition.compare(next, startPost) < 0) {
                iterator.getNext();
                next = iterator.peek();
            }
            return iterator;
        }
    };
    /**
     * @param {!Index} indexDefinition
     * @return {!SortedMapIterator}
     */
    ChildrenNode.prototype.getReverseIterator = function (indexDefinition) {
        return this.getReverseIteratorFrom(indexDefinition.maxPost(), indexDefinition);
    };
    /**
     * @param {!NamedNode} endPost
     * @param {!Index} indexDefinition
     * @return {!SortedMapIterator}
     */
    ChildrenNode.prototype.getReverseIteratorFrom = function (endPost, indexDefinition) {
        var idx = this.resolveIndex_(indexDefinition);
        if (idx) {
            return idx.getReverseIteratorFrom(endPost, function (key) {
                return key;
            });
        }
        else {
            var iterator = this.children_.getReverseIteratorFrom(endPost.name, Node_1.NamedNode.Wrap);
            var next = iterator.peek();
            while (next != null && indexDefinition.compare(next, endPost) > 0) {
                iterator.getNext();
                next = iterator.peek();
            }
            return iterator;
        }
    };
    /**
     * @inheritDoc
     */
    ChildrenNode.prototype.compareTo = function (other) {
        if (this.isEmpty()) {
            if (other.isEmpty()) {
                return 0;
            }
            else {
                return -1;
            }
        }
        else if (other.isLeafNode() || other.isEmpty()) {
            return 1;
        }
        else if (other === exports.MAX_NODE) {
            return -1;
        }
        else {
            // Must be another node with children.
            return 0;
        }
    };
    /**
     * @inheritDoc
     */
    ChildrenNode.prototype.withIndex = function (indexDefinition) {
        if (indexDefinition === KeyIndex_1.KEY_INDEX ||
            this.indexMap_.hasIndex(indexDefinition)) {
            return this;
        }
        else {
            var newIndexMap = this.indexMap_.addIndex(indexDefinition, this.children_);
            return new ChildrenNode(this.children_, this.priorityNode_, newIndexMap);
        }
    };
    /**
     * @inheritDoc
     */
    ChildrenNode.prototype.isIndexed = function (index) {
        return index === KeyIndex_1.KEY_INDEX || this.indexMap_.hasIndex(index);
    };
    /**
     * @inheritDoc
     */
    ChildrenNode.prototype.equals = function (other) {
        if (other === this) {
            return true;
        }
        else if (other.isLeafNode()) {
            return false;
        }
        else {
            var otherChildrenNode = other;
            if (!this.getPriority().equals(otherChildrenNode.getPriority())) {
                return false;
            }
            else if (this.children_.count() === otherChildrenNode.children_.count()) {
                var thisIter = this.getIterator(PriorityIndex_1.PRIORITY_INDEX);
                var otherIter = otherChildrenNode.getIterator(PriorityIndex_1.PRIORITY_INDEX);
                var thisCurrent = thisIter.getNext();
                var otherCurrent = otherIter.getNext();
                while (thisCurrent && otherCurrent) {
                    if (thisCurrent.name !== otherCurrent.name ||
                        !thisCurrent.node.equals(otherCurrent.node)) {
                        return false;
                    }
                    thisCurrent = thisIter.getNext();
                    otherCurrent = otherIter.getNext();
                }
                return thisCurrent === null && otherCurrent === null;
            }
            else {
                return false;
            }
        }
    };
    /**
     * Returns a SortedMap ordered by index, or null if the default (by-key) ordering can be used
     * instead.
     *
     * @private
     * @param {!Index} indexDefinition
     * @return {?SortedMap.<NamedNode, Node>}
     */
    ChildrenNode.prototype.resolveIndex_ = function (indexDefinition) {
        if (indexDefinition === KeyIndex_1.KEY_INDEX) {
            return null;
        }
        else {
            return this.indexMap_.get(indexDefinition.toString());
        }
    };
    /**
     * @private
     * @type {RegExp}
     */
    ChildrenNode.INTEGER_REGEXP_ = /^(0|[1-9]\d*)$/;
    return ChildrenNode;
}());
exports.ChildrenNode = ChildrenNode;
/**
 * @constructor
 * @extends {ChildrenNode}
 * @private
 */
var MaxNode = /** @class */ (function (_super) {
    __extends(MaxNode, _super);
    function MaxNode() {
        return _super.call(this, new SortedMap_1.SortedMap(comparators_1.NAME_COMPARATOR), ChildrenNode.EMPTY_NODE, IndexMap_1.IndexMap.Default) || this;
    }
    MaxNode.prototype.compareTo = function (other) {
        if (other === this) {
            return 0;
        }
        else {
            return 1;
        }
    };
    MaxNode.prototype.equals = function (other) {
        // Not that we every compare it, but MAX_NODE is only ever equal to itself
        return other === this;
    };
    MaxNode.prototype.getPriority = function () {
        return this;
    };
    MaxNode.prototype.getImmediateChild = function (childName) {
        return ChildrenNode.EMPTY_NODE;
    };
    MaxNode.prototype.isEmpty = function () {
        return false;
    };
    return MaxNode;
}(ChildrenNode));
exports.MaxNode = MaxNode;
/**
 * Marker that will sort higher than any other snapshot.
 * @type {!MAX_NODE}
 * @const
 */
exports.MAX_NODE = new MaxNode();
Object.defineProperties(Node_1.NamedNode, {
    MIN: {
        value: new Node_1.NamedNode(util_2.MIN_NAME, ChildrenNode.EMPTY_NODE)
    },
    MAX: {
        value: new Node_1.NamedNode(util_2.MAX_NAME, exports.MAX_NODE)
    }
});
/**
 * Reference Extensions
 */
KeyIndex_1.KeyIndex.__EMPTY_NODE = ChildrenNode.EMPTY_NODE;
LeafNode_1.LeafNode.__childrenNodeConstructor = ChildrenNode;
snap_1.setMaxNode(exports.MAX_NODE);
PriorityIndex_1.setMaxNode(exports.MAX_NODE);



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/snap/IndexMap.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/snap/IndexMap.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var childSet_1 = __webpack_require__(/*! ./childSet */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/childSet.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var Node_1 = __webpack_require__(/*! ./Node */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/Node.js");
var PriorityIndex_1 = __webpack_require__(/*! ./indexes/PriorityIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PriorityIndex.js");
var KeyIndex_1 = __webpack_require__(/*! ./indexes/KeyIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/KeyIndex.js");
var _defaultIndexMap;
var fallbackObject = {};
/**
 *
 * @param {Object.<string, FallbackType|SortedMap.<NamedNode, Node>>} indexes
 * @param {Object.<string, Index>} indexSet
 * @constructor
 */
var IndexMap = /** @class */ (function () {
    function IndexMap(indexes_, indexSet_) {
        this.indexes_ = indexes_;
        this.indexSet_ = indexSet_;
    }
    Object.defineProperty(IndexMap, "Default", {
        /**
         * The default IndexMap for nodes without a priority
         * @type {!IndexMap}
         * @const
         */
        get: function () {
            util_1.assert(fallbackObject && PriorityIndex_1.PRIORITY_INDEX, 'ChildrenNode.ts has not been loaded');
            _defaultIndexMap =
                _defaultIndexMap ||
                    new IndexMap({ '.priority': fallbackObject }, { '.priority': PriorityIndex_1.PRIORITY_INDEX });
            return _defaultIndexMap;
        },
        enumerable: true,
        configurable: true
    });
    /**
     *
     * @param {!string} indexKey
     * @return {?SortedMap.<NamedNode, Node>}
     */
    IndexMap.prototype.get = function (indexKey) {
        var sortedMap = util_2.safeGet(this.indexes_, indexKey);
        if (!sortedMap)
            throw new Error('No index defined for ' + indexKey);
        if (sortedMap === fallbackObject) {
            // The index exists, but it falls back to just name comparison. Return null so that the calling code uses the
            // regular child map
            return null;
        }
        else {
            return sortedMap;
        }
    };
    /**
     * @param {!Index} indexDefinition
     * @return {boolean}
     */
    IndexMap.prototype.hasIndex = function (indexDefinition) {
        return util_2.contains(this.indexSet_, indexDefinition.toString());
    };
    /**
     * @param {!Index} indexDefinition
     * @param {!SortedMap.<string, !Node>} existingChildren
     * @return {!IndexMap}
     */
    IndexMap.prototype.addIndex = function (indexDefinition, existingChildren) {
        util_1.assert(indexDefinition !== KeyIndex_1.KEY_INDEX, "KeyIndex always exists and isn't meant to be added to the IndexMap.");
        var childList = [];
        var sawIndexedValue = false;
        var iter = existingChildren.getIterator(Node_1.NamedNode.Wrap);
        var next = iter.getNext();
        while (next) {
            sawIndexedValue =
                sawIndexedValue || indexDefinition.isDefinedOn(next.node);
            childList.push(next);
            next = iter.getNext();
        }
        var newIndex;
        if (sawIndexedValue) {
            newIndex = childSet_1.buildChildSet(childList, indexDefinition.getCompare());
        }
        else {
            newIndex = fallbackObject;
        }
        var indexName = indexDefinition.toString();
        var newIndexSet = util_2.clone(this.indexSet_);
        newIndexSet[indexName] = indexDefinition;
        var newIndexes = util_2.clone(this.indexes_);
        newIndexes[indexName] = newIndex;
        return new IndexMap(newIndexes, newIndexSet);
    };
    /**
     * Ensure that this node is properly tracked in any indexes that we're maintaining
     * @param {!NamedNode} namedNode
     * @param {!SortedMap.<string, !Node>} existingChildren
     * @return {!IndexMap}
     */
    IndexMap.prototype.addToIndexes = function (namedNode, existingChildren) {
        var _this = this;
        var newIndexes = util_2.map(this.indexes_, function (indexedChildren, indexName) {
            var index = util_2.safeGet(_this.indexSet_, indexName);
            util_1.assert(index, 'Missing index implementation for ' + indexName);
            if (indexedChildren === fallbackObject) {
                // Check to see if we need to index everything
                if (index.isDefinedOn(namedNode.node)) {
                    // We need to build this index
                    var childList = [];
                    var iter = existingChildren.getIterator(Node_1.NamedNode.Wrap);
                    var next = iter.getNext();
                    while (next) {
                        if (next.name != namedNode.name) {
                            childList.push(next);
                        }
                        next = iter.getNext();
                    }
                    childList.push(namedNode);
                    return childSet_1.buildChildSet(childList, index.getCompare());
                }
                else {
                    // No change, this remains a fallback
                    return fallbackObject;
                }
            }
            else {
                var existingSnap = existingChildren.get(namedNode.name);
                var newChildren = indexedChildren;
                if (existingSnap) {
                    newChildren = newChildren.remove(new Node_1.NamedNode(namedNode.name, existingSnap));
                }
                return newChildren.insert(namedNode, namedNode.node);
            }
        });
        return new IndexMap(newIndexes, this.indexSet_);
    };
    /**
     * Create a new IndexMap instance with the given value removed
     * @param {!NamedNode} namedNode
     * @param {!SortedMap.<string, !Node>} existingChildren
     * @return {!IndexMap}
     */
    IndexMap.prototype.removeFromIndexes = function (namedNode, existingChildren) {
        var newIndexes = util_2.map(this.indexes_, function (indexedChildren) {
            if (indexedChildren === fallbackObject) {
                // This is the fallback. Just return it, nothing to do in this case
                return indexedChildren;
            }
            else {
                var existingSnap = existingChildren.get(namedNode.name);
                if (existingSnap) {
                    return indexedChildren.remove(new Node_1.NamedNode(namedNode.name, existingSnap));
                }
                else {
                    // No record of this child
                    return indexedChildren;
                }
            }
        });
        return new IndexMap(newIndexes, this.indexSet_);
    };
    return IndexMap;
}());
exports.IndexMap = IndexMap;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/snap/LeafNode.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/snap/LeafNode.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! ../util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var snap_1 = __webpack_require__(/*! ./snap */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/snap.js");
var __childrenNodeConstructor;
/**
 * LeafNode is a class for storing leaf nodes in a DataSnapshot.  It
 * implements Node and stores the value of the node (a string,
 * number, or boolean) accessible via getValue().
 */
var LeafNode = /** @class */ (function () {
    /**
     * @implements {Node}
     * @param {!(string|number|boolean|Object)} value_ The value to store in this leaf node.
     *                                         The object type is possible in the event of a deferred value
     * @param {!Node=} priorityNode_ The priority of this node.
     */
    function LeafNode(value_, priorityNode_) {
        if (priorityNode_ === void 0) { priorityNode_ = LeafNode.__childrenNodeConstructor.EMPTY_NODE; }
        this.value_ = value_;
        this.priorityNode_ = priorityNode_;
        this.lazyHash_ = null;
        util_1.assert(this.value_ !== undefined && this.value_ !== null, "LeafNode shouldn't be created with null/undefined value.");
        snap_1.validatePriorityNode(this.priorityNode_);
    }
    Object.defineProperty(LeafNode, "__childrenNodeConstructor", {
        get: function () {
            return __childrenNodeConstructor;
        },
        set: function (val) {
            __childrenNodeConstructor = val;
        },
        enumerable: true,
        configurable: true
    });
    /** @inheritDoc */
    LeafNode.prototype.isLeafNode = function () {
        return true;
    };
    /** @inheritDoc */
    LeafNode.prototype.getPriority = function () {
        return this.priorityNode_;
    };
    /** @inheritDoc */
    LeafNode.prototype.updatePriority = function (newPriorityNode) {
        return new LeafNode(this.value_, newPriorityNode);
    };
    /** @inheritDoc */
    LeafNode.prototype.getImmediateChild = function (childName) {
        // Hack to treat priority as a regular child
        if (childName === '.priority') {
            return this.priorityNode_;
        }
        else {
            return LeafNode.__childrenNodeConstructor.EMPTY_NODE;
        }
    };
    /** @inheritDoc */
    LeafNode.prototype.getChild = function (path) {
        if (path.isEmpty()) {
            return this;
        }
        else if (path.getFront() === '.priority') {
            return this.priorityNode_;
        }
        else {
            return LeafNode.__childrenNodeConstructor.EMPTY_NODE;
        }
    };
    /**
     * @inheritDoc
     */
    LeafNode.prototype.hasChild = function () {
        return false;
    };
    /** @inheritDoc */
    LeafNode.prototype.getPredecessorChildName = function (childName, childNode) {
        return null;
    };
    /** @inheritDoc */
    LeafNode.prototype.updateImmediateChild = function (childName, newChildNode) {
        if (childName === '.priority') {
            return this.updatePriority(newChildNode);
        }
        else if (newChildNode.isEmpty() && childName !== '.priority') {
            return this;
        }
        else {
            return LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(childName, newChildNode).updatePriority(this.priorityNode_);
        }
    };
    /** @inheritDoc */
    LeafNode.prototype.updateChild = function (path, newChildNode) {
        var front = path.getFront();
        if (front === null) {
            return newChildNode;
        }
        else if (newChildNode.isEmpty() && front !== '.priority') {
            return this;
        }
        else {
            util_1.assert(front !== '.priority' || path.getLength() === 1, '.priority must be the last token in a path');
            return this.updateImmediateChild(front, LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(path.popFront(), newChildNode));
        }
    };
    /** @inheritDoc */
    LeafNode.prototype.isEmpty = function () {
        return false;
    };
    /** @inheritDoc */
    LeafNode.prototype.numChildren = function () {
        return 0;
    };
    /** @inheritDoc */
    LeafNode.prototype.forEachChild = function (index, action) {
        return false;
    };
    /**
     * @inheritDoc
     */
    LeafNode.prototype.val = function (exportFormat) {
        if (exportFormat && !this.getPriority().isEmpty())
            return {
                '.value': this.getValue(),
                '.priority': this.getPriority().val()
            };
        else
            return this.getValue();
    };
    /** @inheritDoc */
    LeafNode.prototype.hash = function () {
        if (this.lazyHash_ === null) {
            var toHash = '';
            if (!this.priorityNode_.isEmpty())
                toHash +=
                    'priority:' +
                        snap_1.priorityHashText(this.priorityNode_.val()) +
                        ':';
            var type = typeof this.value_;
            toHash += type + ':';
            if (type === 'number') {
                toHash += util_2.doubleToIEEE754String(this.value_);
            }
            else {
                toHash += this.value_;
            }
            this.lazyHash_ = util_2.sha1(toHash);
        }
        return this.lazyHash_;
    };
    /**
     * Returns the value of the leaf node.
     * @return {Object|string|number|boolean} The value of the node.
     */
    LeafNode.prototype.getValue = function () {
        return this.value_;
    };
    /**
     * @inheritDoc
     */
    LeafNode.prototype.compareTo = function (other) {
        if (other === LeafNode.__childrenNodeConstructor.EMPTY_NODE) {
            return 1;
        }
        else if (other instanceof LeafNode.__childrenNodeConstructor) {
            return -1;
        }
        else {
            util_1.assert(other.isLeafNode(), 'Unknown node type');
            return this.compareToLeafNode_(other);
        }
    };
    /**
     * Comparison specifically for two leaf nodes
     * @param {!LeafNode} otherLeaf
     * @return {!number}
     * @private
     */
    LeafNode.prototype.compareToLeafNode_ = function (otherLeaf) {
        var otherLeafType = typeof otherLeaf.value_;
        var thisLeafType = typeof this.value_;
        var otherIndex = LeafNode.VALUE_TYPE_ORDER.indexOf(otherLeafType);
        var thisIndex = LeafNode.VALUE_TYPE_ORDER.indexOf(thisLeafType);
        util_1.assert(otherIndex >= 0, 'Unknown leaf type: ' + otherLeafType);
        util_1.assert(thisIndex >= 0, 'Unknown leaf type: ' + thisLeafType);
        if (otherIndex === thisIndex) {
            // Same type, compare values
            if (thisLeafType === 'object') {
                // Deferred value nodes are all equal, but we should also never get to this point...
                return 0;
            }
            else {
                // Note that this works because true > false, all others are number or string comparisons
                if (this.value_ < otherLeaf.value_) {
                    return -1;
                }
                else if (this.value_ === otherLeaf.value_) {
                    return 0;
                }
                else {
                    return 1;
                }
            }
        }
        else {
            return thisIndex - otherIndex;
        }
    };
    /**
     * @inheritDoc
     */
    LeafNode.prototype.withIndex = function () {
        return this;
    };
    /**
     * @inheritDoc
     */
    LeafNode.prototype.isIndexed = function () {
        return true;
    };
    /**
     * @inheritDoc
     */
    LeafNode.prototype.equals = function (other) {
        /**
         * @inheritDoc
         */
        if (other === this) {
            return true;
        }
        else if (other.isLeafNode()) {
            var otherLeaf = other;
            return (this.value_ === otherLeaf.value_ &&
                this.priorityNode_.equals(otherLeaf.priorityNode_));
        }
        else {
            return false;
        }
    };
    /**
     * The sort order for comparing leaf nodes of different types. If two leaf nodes have
     * the same type, the comparison falls back to their value
     * @type {Array.<!string>}
     * @const
     */
    LeafNode.VALUE_TYPE_ORDER = ['object', 'boolean', 'number', 'string'];
    return LeafNode;
}());
exports.LeafNode = LeafNode;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/snap/Node.js":
/*!************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/snap/Node.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
/**
 *
 * @param {!string} name
 * @param {!Node} node
 * @constructor
 * @struct
 */
var NamedNode = /** @class */ (function () {
    function NamedNode(name, node) {
        this.name = name;
        this.node = node;
    }
    /**
     *
     * @param {!string} name
     * @param {!Node} node
     * @return {NamedNode}
     */
    NamedNode.Wrap = function (name, node) {
        return new NamedNode(name, node);
    };
    return NamedNode;
}());
exports.NamedNode = NamedNode;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/snap/childSet.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/snap/childSet.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var SortedMap_1 = __webpack_require__(/*! ../util/SortedMap */ "./node_modules/@firebase/database/dist/cjs/src/core/util/SortedMap.js");
var SortedMap_2 = __webpack_require__(/*! ../util/SortedMap */ "./node_modules/@firebase/database/dist/cjs/src/core/util/SortedMap.js");
var LOG_2 = Math.log(2);
/**
 * @constructor
 */
var Base12Num = /** @class */ (function () {
    /**
     * @param {number} length
     */
    function Base12Num(length) {
        var logBase2 = function (num) {
            return parseInt((Math.log(num) / LOG_2), 10);
        };
        var bitMask = function (bits) { return parseInt(Array(bits + 1).join('1'), 2); };
        this.count = logBase2(length + 1);
        this.current_ = this.count - 1;
        var mask = bitMask(this.count);
        this.bits_ = (length + 1) & mask;
    }
    /**
     * @return {boolean}
     */
    Base12Num.prototype.nextBitIsOne = function () {
        //noinspection JSBitwiseOperatorUsage
        var result = !(this.bits_ & (0x1 << this.current_));
        this.current_--;
        return result;
    };
    return Base12Num;
}());
/**
 * Takes a list of child nodes and constructs a SortedSet using the given comparison
 * function
 *
 * Uses the algorithm described in the paper linked here:
 * http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.46.1458
 *
 * @template K, V
 * @param {Array.<!NamedNode>} childList Unsorted list of children
 * @param {function(!NamedNode, !NamedNode):number} cmp The comparison method to be used
 * @param {(function(NamedNode):K)=} keyFn An optional function to extract K from a node wrapper, if K's
 *                                                        type is not NamedNode
 * @param {(function(K, K):number)=} mapSortFn An optional override for comparator used by the generated sorted map
 * @return {SortedMap.<K, V>}
 */
exports.buildChildSet = function (childList, cmp, keyFn, mapSortFn) {
    childList.sort(cmp);
    var buildBalancedTree = function (low, high) {
        var length = high - low;
        var namedNode;
        var key;
        if (length == 0) {
            return null;
        }
        else if (length == 1) {
            namedNode = childList[low];
            key = keyFn ? keyFn(namedNode) : namedNode;
            return new SortedMap_1.LLRBNode(key, namedNode.node, SortedMap_1.LLRBNode.BLACK, null, null);
        }
        else {
            var middle = parseInt((length / 2), 10) + low;
            var left = buildBalancedTree(low, middle);
            var right = buildBalancedTree(middle + 1, high);
            namedNode = childList[middle];
            key = keyFn ? keyFn(namedNode) : namedNode;
            return new SortedMap_1.LLRBNode(key, namedNode.node, SortedMap_1.LLRBNode.BLACK, left, right);
        }
    };
    var buildFrom12Array = function (base12) {
        var node = null;
        var root = null;
        var index = childList.length;
        var buildPennant = function (chunkSize, color) {
            var low = index - chunkSize;
            var high = index;
            index -= chunkSize;
            var childTree = buildBalancedTree(low + 1, high);
            var namedNode = childList[low];
            var key = keyFn ? keyFn(namedNode) : namedNode;
            attachPennant(new SortedMap_1.LLRBNode(key, namedNode.node, color, null, childTree));
        };
        var attachPennant = function (pennant) {
            if (node) {
                node.left = pennant;
                node = pennant;
            }
            else {
                root = pennant;
                node = pennant;
            }
        };
        for (var i = 0; i < base12.count; ++i) {
            var isOne = base12.nextBitIsOne();
            // The number of nodes taken in each slice is 2^(arr.length - (i + 1))
            var chunkSize = Math.pow(2, base12.count - (i + 1));
            if (isOne) {
                buildPennant(chunkSize, SortedMap_1.LLRBNode.BLACK);
            }
            else {
                // current == 2
                buildPennant(chunkSize, SortedMap_1.LLRBNode.BLACK);
                buildPennant(chunkSize, SortedMap_1.LLRBNode.RED);
            }
        }
        return root;
    };
    var base12 = new Base12Num(childList.length);
    var root = buildFrom12Array(base12);
    return new SortedMap_2.SortedMap(mapSortFn || cmp, root);
};



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/snap/comparators.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/snap/comparators.js ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! ../util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
function NAME_ONLY_COMPARATOR(left, right) {
    return util_1.nameCompare(left.name, right.name);
}
exports.NAME_ONLY_COMPARATOR = NAME_ONLY_COMPARATOR;
function NAME_COMPARATOR(left, right) {
    return util_1.nameCompare(left, right);
}
exports.NAME_COMPARATOR = NAME_COMPARATOR;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/Index.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/Index.js ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var Node_1 = __webpack_require__(/*! ../Node */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/Node.js");
var util_1 = __webpack_require__(/*! ../../util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
/**
 *
 * @constructor
 */
var Index = /** @class */ (function () {
    function Index() {
    }
    /**
     * @return {function(!NamedNode, !NamedNode):number} A standalone comparison function for
     * this index
     */
    Index.prototype.getCompare = function () {
        return this.compare.bind(this);
    };
    /**
     * Given a before and after value for a node, determine if the indexed value has changed. Even if they are different,
     * it's possible that the changes are isolated to parts of the snapshot that are not indexed.
     *
     * @param {!Node} oldNode
     * @param {!Node} newNode
     * @return {boolean} True if the portion of the snapshot being indexed changed between oldNode and newNode
     */
    Index.prototype.indexedValueChanged = function (oldNode, newNode) {
        var oldWrapped = new Node_1.NamedNode(util_1.MIN_NAME, oldNode);
        var newWrapped = new Node_1.NamedNode(util_1.MIN_NAME, newNode);
        return this.compare(oldWrapped, newWrapped) !== 0;
    };
    /**
     * @return {!NamedNode} a node wrapper that will sort equal to or less than
     * any other node wrapper, using this index
     */
    Index.prototype.minPost = function () {
        return Node_1.NamedNode.MIN;
    };
    return Index;
}());
exports.Index = Index;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/KeyIndex.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/KeyIndex.js ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Index_1 = __webpack_require__(/*! ./Index */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/Index.js");
var Node_1 = __webpack_require__(/*! ../Node */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/Node.js");
var util_1 = __webpack_require__(/*! ../../util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var __EMPTY_NODE;
var KeyIndex = /** @class */ (function (_super) {
    __extends(KeyIndex, _super);
    function KeyIndex() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(KeyIndex, "__EMPTY_NODE", {
        get: function () {
            return __EMPTY_NODE;
        },
        set: function (val) {
            __EMPTY_NODE = val;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @inheritDoc
     */
    KeyIndex.prototype.compare = function (a, b) {
        return util_1.nameCompare(a.name, b.name);
    };
    /**
     * @inheritDoc
     */
    KeyIndex.prototype.isDefinedOn = function (node) {
        // We could probably return true here (since every node has a key), but it's never called
        // so just leaving unimplemented for now.
        throw util_2.assertionError('KeyIndex.isDefinedOn not expected to be called.');
    };
    /**
     * @inheritDoc
     */
    KeyIndex.prototype.indexedValueChanged = function (oldNode, newNode) {
        return false; // The key for a node never changes.
    };
    /**
     * @inheritDoc
     */
    KeyIndex.prototype.minPost = function () {
        return Node_1.NamedNode.MIN;
    };
    /**
     * @inheritDoc
     */
    KeyIndex.prototype.maxPost = function () {
        // TODO: This should really be created once and cached in a static property, but
        // NamedNode isn't defined yet, so I can't use it in a static.  Bleh.
        return new Node_1.NamedNode(util_1.MAX_NAME, __EMPTY_NODE);
    };
    /**
     * @param {*} indexValue
     * @param {string} name
     * @return {!NamedNode}
     */
    KeyIndex.prototype.makePost = function (indexValue, name) {
        util_2.assert(typeof indexValue === 'string', 'KeyIndex indexValue must always be a string.');
        // We just use empty node, but it'll never be compared, since our comparator only looks at name.
        return new Node_1.NamedNode(indexValue, __EMPTY_NODE);
    };
    /**
     * @return {!string} String representation for inclusion in a query spec
     */
    KeyIndex.prototype.toString = function () {
        return '.key';
    };
    return KeyIndex;
}(Index_1.Index));
exports.KeyIndex = KeyIndex;
exports.KEY_INDEX = new KeyIndex();



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PathIndex.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PathIndex.js ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! ../../util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var Index_1 = __webpack_require__(/*! ./Index */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/Index.js");
var ChildrenNode_1 = __webpack_require__(/*! ../ChildrenNode */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/ChildrenNode.js");
var Node_1 = __webpack_require__(/*! ../Node */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/Node.js");
var nodeFromJSON_1 = __webpack_require__(/*! ../nodeFromJSON */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/nodeFromJSON.js");
/**
 * @param {!Path} indexPath
 * @constructor
 * @extends {Index}
 */
var PathIndex = /** @class */ (function (_super) {
    __extends(PathIndex, _super);
    function PathIndex(indexPath_) {
        var _this = _super.call(this) || this;
        _this.indexPath_ = indexPath_;
        util_1.assert(!indexPath_.isEmpty() && indexPath_.getFront() !== '.priority', "Can't create PathIndex with empty path or .priority key");
        return _this;
    }
    /**
     * @param {!Node} snap
     * @return {!Node}
     * @protected
     */
    PathIndex.prototype.extractChild = function (snap) {
        return snap.getChild(this.indexPath_);
    };
    /**
     * @inheritDoc
     */
    PathIndex.prototype.isDefinedOn = function (node) {
        return !node.getChild(this.indexPath_).isEmpty();
    };
    /**
     * @inheritDoc
     */
    PathIndex.prototype.compare = function (a, b) {
        var aChild = this.extractChild(a.node);
        var bChild = this.extractChild(b.node);
        var indexCmp = aChild.compareTo(bChild);
        if (indexCmp === 0) {
            return util_2.nameCompare(a.name, b.name);
        }
        else {
            return indexCmp;
        }
    };
    /**
     * @inheritDoc
     */
    PathIndex.prototype.makePost = function (indexValue, name) {
        var valueNode = nodeFromJSON_1.nodeFromJSON(indexValue);
        var node = ChildrenNode_1.ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_, valueNode);
        return new Node_1.NamedNode(name, node);
    };
    /**
     * @inheritDoc
     */
    PathIndex.prototype.maxPost = function () {
        var node = ChildrenNode_1.ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_, ChildrenNode_1.MAX_NODE);
        return new Node_1.NamedNode(util_2.MAX_NAME, node);
    };
    /**
     * @inheritDoc
     */
    PathIndex.prototype.toString = function () {
        return this.indexPath_.slice().join('/');
    };
    return PathIndex;
}(Index_1.Index));
exports.PathIndex = PathIndex;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PriorityIndex.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PriorityIndex.js ***!
  \*****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Index_1 = __webpack_require__(/*! ./Index */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/Index.js");
var util_1 = __webpack_require__(/*! ../../util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var Node_1 = __webpack_require__(/*! ../Node */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/Node.js");
var LeafNode_1 = __webpack_require__(/*! ../LeafNode */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/LeafNode.js");
var nodeFromJSON;
var MAX_NODE;
function setNodeFromJSON(val) {
    nodeFromJSON = val;
}
exports.setNodeFromJSON = setNodeFromJSON;
function setMaxNode(val) {
    MAX_NODE = val;
}
exports.setMaxNode = setMaxNode;
/**
 * @constructor
 * @extends {Index}
 * @private
 */
var PriorityIndex = /** @class */ (function (_super) {
    __extends(PriorityIndex, _super);
    function PriorityIndex() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @inheritDoc
     */
    PriorityIndex.prototype.compare = function (a, b) {
        var aPriority = a.node.getPriority();
        var bPriority = b.node.getPriority();
        var indexCmp = aPriority.compareTo(bPriority);
        if (indexCmp === 0) {
            return util_1.nameCompare(a.name, b.name);
        }
        else {
            return indexCmp;
        }
    };
    /**
     * @inheritDoc
     */
    PriorityIndex.prototype.isDefinedOn = function (node) {
        return !node.getPriority().isEmpty();
    };
    /**
     * @inheritDoc
     */
    PriorityIndex.prototype.indexedValueChanged = function (oldNode, newNode) {
        return !oldNode.getPriority().equals(newNode.getPriority());
    };
    /**
     * @inheritDoc
     */
    PriorityIndex.prototype.minPost = function () {
        return Node_1.NamedNode.MIN;
    };
    /**
     * @inheritDoc
     */
    PriorityIndex.prototype.maxPost = function () {
        return new Node_1.NamedNode(util_1.MAX_NAME, new LeafNode_1.LeafNode('[PRIORITY-POST]', MAX_NODE));
    };
    /**
     * @param {*} indexValue
     * @param {string} name
     * @return {!NamedNode}
     */
    PriorityIndex.prototype.makePost = function (indexValue, name) {
        var priorityNode = nodeFromJSON(indexValue);
        return new Node_1.NamedNode(name, new LeafNode_1.LeafNode('[PRIORITY-POST]', priorityNode));
    };
    /**
     * @return {!string} String representation for inclusion in a query spec
     */
    PriorityIndex.prototype.toString = function () {
        return '.priority';
    };
    return PriorityIndex;
}(Index_1.Index));
exports.PriorityIndex = PriorityIndex;
exports.PRIORITY_INDEX = new PriorityIndex();



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/ValueIndex.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/ValueIndex.js ***!
  \**************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Index_1 = __webpack_require__(/*! ./Index */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/Index.js");
var Node_1 = __webpack_require__(/*! ../Node */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/Node.js");
var util_1 = __webpack_require__(/*! ../../util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var nodeFromJSON_1 = __webpack_require__(/*! ../nodeFromJSON */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/nodeFromJSON.js");
/**
 * @constructor
 * @extends {Index}
 * @private
 */
var ValueIndex = /** @class */ (function (_super) {
    __extends(ValueIndex, _super);
    function ValueIndex() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @inheritDoc
     */
    ValueIndex.prototype.compare = function (a, b) {
        var indexCmp = a.node.compareTo(b.node);
        if (indexCmp === 0) {
            return util_1.nameCompare(a.name, b.name);
        }
        else {
            return indexCmp;
        }
    };
    /**
     * @inheritDoc
     */
    ValueIndex.prototype.isDefinedOn = function (node) {
        return true;
    };
    /**
     * @inheritDoc
     */
    ValueIndex.prototype.indexedValueChanged = function (oldNode, newNode) {
        return !oldNode.equals(newNode);
    };
    /**
     * @inheritDoc
     */
    ValueIndex.prototype.minPost = function () {
        return Node_1.NamedNode.MIN;
    };
    /**
     * @inheritDoc
     */
    ValueIndex.prototype.maxPost = function () {
        return Node_1.NamedNode.MAX;
    };
    /**
     * @param {*} indexValue
     * @param {string} name
     * @return {!NamedNode}
     */
    ValueIndex.prototype.makePost = function (indexValue, name) {
        var valueNode = nodeFromJSON_1.nodeFromJSON(indexValue);
        return new Node_1.NamedNode(name, valueNode);
    };
    /**
     * @return {!string} String representation for inclusion in a query spec
     */
    ValueIndex.prototype.toString = function () {
        return '.value';
    };
    return ValueIndex;
}(Index_1.Index));
exports.ValueIndex = ValueIndex;
exports.VALUE_INDEX = new ValueIndex();



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/snap/nodeFromJSON.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/snap/nodeFromJSON.js ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var ChildrenNode_1 = __webpack_require__(/*! ./ChildrenNode */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/ChildrenNode.js");
var LeafNode_1 = __webpack_require__(/*! ./LeafNode */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/LeafNode.js");
var Node_1 = __webpack_require__(/*! ./Node */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/Node.js");
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var childSet_1 = __webpack_require__(/*! ./childSet */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/childSet.js");
var comparators_1 = __webpack_require__(/*! ./comparators */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/comparators.js");
var IndexMap_1 = __webpack_require__(/*! ./IndexMap */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/IndexMap.js");
var PriorityIndex_1 = __webpack_require__(/*! ./indexes/PriorityIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PriorityIndex.js");
var USE_HINZE = true;
/**
 * Constructs a snapshot node representing the passed JSON and returns it.
 * @param {*} json JSON to create a node for.
 * @param {?string|?number=} priority Optional priority to use.  This will be ignored if the
 * passed JSON contains a .priority property.
 * @return {!Node}
 */
function nodeFromJSON(json, priority) {
    if (priority === void 0) { priority = null; }
    if (json === null) {
        return ChildrenNode_1.ChildrenNode.EMPTY_NODE;
    }
    if (typeof json === 'object' && '.priority' in json) {
        priority = json['.priority'];
    }
    util_2.assert(priority === null ||
        typeof priority === 'string' ||
        typeof priority === 'number' ||
        (typeof priority === 'object' && '.sv' in priority), 'Invalid priority type found: ' + typeof priority);
    if (typeof json === 'object' && '.value' in json && json['.value'] !== null) {
        json = json['.value'];
    }
    // Valid leaf nodes include non-objects or server-value wrapper objects
    if (typeof json !== 'object' || '.sv' in json) {
        var jsonLeaf = json;
        return new LeafNode_1.LeafNode(jsonLeaf, nodeFromJSON(priority));
    }
    if (!(json instanceof Array) && USE_HINZE) {
        var children_1 = [];
        var childrenHavePriority_1 = false;
        var hinzeJsonObj_1 = json;
        util_1.forEach(hinzeJsonObj_1, function (key, child) {
            if (typeof key !== 'string' || key.substring(0, 1) !== '.') {
                // Ignore metadata nodes
                var childNode = nodeFromJSON(hinzeJsonObj_1[key]);
                if (!childNode.isEmpty()) {
                    childrenHavePriority_1 =
                        childrenHavePriority_1 || !childNode.getPriority().isEmpty();
                    children_1.push(new Node_1.NamedNode(key, childNode));
                }
            }
        });
        if (children_1.length == 0) {
            return ChildrenNode_1.ChildrenNode.EMPTY_NODE;
        }
        var childSet = childSet_1.buildChildSet(children_1, comparators_1.NAME_ONLY_COMPARATOR, function (namedNode) { return namedNode.name; }, comparators_1.NAME_COMPARATOR);
        if (childrenHavePriority_1) {
            var sortedChildSet = childSet_1.buildChildSet(children_1, PriorityIndex_1.PRIORITY_INDEX.getCompare());
            return new ChildrenNode_1.ChildrenNode(childSet, nodeFromJSON(priority), new IndexMap_1.IndexMap({ '.priority': sortedChildSet }, { '.priority': PriorityIndex_1.PRIORITY_INDEX }));
        }
        else {
            return new ChildrenNode_1.ChildrenNode(childSet, nodeFromJSON(priority), IndexMap_1.IndexMap.Default);
        }
    }
    else {
        var node_1 = ChildrenNode_1.ChildrenNode.EMPTY_NODE;
        var jsonObj_1 = json;
        util_1.forEach(jsonObj_1, function (key, childData) {
            if (util_1.contains(jsonObj_1, key)) {
                if (key.substring(0, 1) !== '.') {
                    // ignore metadata nodes.
                    var childNode = nodeFromJSON(childData);
                    if (childNode.isLeafNode() || !childNode.isEmpty())
                        node_1 = node_1.updateImmediateChild(key, childNode);
                }
            }
        });
        return node_1.updatePriority(nodeFromJSON(priority));
    }
}
exports.nodeFromJSON = nodeFromJSON;
PriorityIndex_1.setNodeFromJSON(nodeFromJSON);



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/snap/snap.js":
/*!************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/snap/snap.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! ../util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var util_3 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var MAX_NODE;
function setMaxNode(val) {
    MAX_NODE = val;
}
exports.setMaxNode = setMaxNode;
/**
 * @param {(!string|!number)} priority
 * @return {!string}
 */
exports.priorityHashText = function (priority) {
    if (typeof priority === 'number')
        return 'number:' + util_2.doubleToIEEE754String(priority);
    else
        return 'string:' + priority;
};
/**
 * Validates that a priority snapshot Node is valid.
 *
 * @param {!Node} priorityNode
 */
exports.validatePriorityNode = function (priorityNode) {
    if (priorityNode.isLeafNode()) {
        var val = priorityNode.val();
        util_1.assert(typeof val === 'string' ||
            typeof val === 'number' ||
            (typeof val === 'object' && util_3.contains(val, '.sv')), 'Priority must be a string or number.');
    }
    else {
        util_1.assert(priorityNode === MAX_NODE || priorityNode.isEmpty(), 'priority of unexpected type.');
    }
    // Don't call getPriority() on MAX_NODE to avoid hitting assertion.
    util_1.assert(priorityNode === MAX_NODE || priorityNode.getPriority().isEmpty(), "Priority nodes can't have a priority of their own.");
};



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/stats/StatsCollection.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/stats/StatsCollection.js ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * Tracks a collection of stats.
 *
 * @constructor
 */
var StatsCollection = /** @class */ (function () {
    function StatsCollection() {
        this.counters_ = {};
    }
    StatsCollection.prototype.incrementCounter = function (name, amount) {
        if (amount === void 0) { amount = 1; }
        if (!util_2.contains(this.counters_, name))
            this.counters_[name] = 0;
        this.counters_[name] += amount;
    };
    StatsCollection.prototype.get = function () {
        return util_1.deepCopy(this.counters_);
    };
    return StatsCollection;
}());
exports.StatsCollection = StatsCollection;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/stats/StatsListener.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/stats/StatsListener.js ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * Returns the delta from the previous call to get stats.
 *
 * @param collection_ The collection to "listen" to.
 * @constructor
 */
var StatsListener = /** @class */ (function () {
    function StatsListener(collection_) {
        this.collection_ = collection_;
        this.last_ = null;
    }
    StatsListener.prototype.get = function () {
        var newStats = this.collection_.get();
        var delta = util_1.clone(newStats);
        if (this.last_) {
            util_1.forEach(this.last_, function (stat, value) {
                delta[stat] = delta[stat] - value;
            });
        }
        this.last_ = newStats;
        return delta;
    };
    return StatsListener;
}());
exports.StatsListener = StatsListener;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/stats/StatsManager.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/stats/StatsManager.js ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var StatsCollection_1 = __webpack_require__(/*! ./StatsCollection */ "./node_modules/@firebase/database/dist/cjs/src/core/stats/StatsCollection.js");
var StatsManager = /** @class */ (function () {
    function StatsManager() {
    }
    StatsManager.getCollection = function (repoInfo) {
        var hashString = repoInfo.toString();
        if (!this.collections_[hashString]) {
            this.collections_[hashString] = new StatsCollection_1.StatsCollection();
        }
        return this.collections_[hashString];
    };
    StatsManager.getOrCreateReporter = function (repoInfo, creatorFunction) {
        var hashString = repoInfo.toString();
        if (!this.reporters_[hashString]) {
            this.reporters_[hashString] = creatorFunction();
        }
        return this.reporters_[hashString];
    };
    StatsManager.collections_ = {};
    StatsManager.reporters_ = {};
    return StatsManager;
}());
exports.StatsManager = StatsManager;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/stats/StatsReporter.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/stats/StatsReporter.js ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! ../util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var StatsListener_1 = __webpack_require__(/*! ./StatsListener */ "./node_modules/@firebase/database/dist/cjs/src/core/stats/StatsListener.js");
// Assuming some apps may have a short amount of time on page, and a bulk of firebase operations probably
// happen on page load, we try to report our first set of stats pretty quickly, but we wait at least 10
// seconds to try to ensure the Firebase connection is established / settled.
var FIRST_STATS_MIN_TIME = 10 * 1000;
var FIRST_STATS_MAX_TIME = 30 * 1000;
// We'll continue to report stats on average every 5 minutes.
var REPORT_STATS_INTERVAL = 5 * 60 * 1000;
/**
 * @constructor
 */
var StatsReporter = /** @class */ (function () {
    /**
     * @param collection
     * @param server_
     */
    function StatsReporter(collection, server_) {
        this.server_ = server_;
        this.statsToReport_ = {};
        this.statsListener_ = new StatsListener_1.StatsListener(collection);
        var timeout = FIRST_STATS_MIN_TIME +
            (FIRST_STATS_MAX_TIME - FIRST_STATS_MIN_TIME) * Math.random();
        util_2.setTimeoutNonBlocking(this.reportStats_.bind(this), Math.floor(timeout));
    }
    StatsReporter.prototype.includeStat = function (stat) {
        this.statsToReport_[stat] = true;
    };
    StatsReporter.prototype.reportStats_ = function () {
        var _this = this;
        var stats = this.statsListener_.get();
        var reportedStats = {};
        var haveStatsToReport = false;
        util_1.forEach(stats, function (stat, value) {
            if (value > 0 && util_1.contains(_this.statsToReport_, stat)) {
                reportedStats[stat] = value;
                haveStatsToReport = true;
            }
        });
        if (haveStatsToReport) {
            this.server_.reportStats(reportedStats);
        }
        // queue our next run.
        util_2.setTimeoutNonBlocking(this.reportStats_.bind(this), Math.floor(Math.random() * 2 * REPORT_STATS_INTERVAL));
    };
    return StatsReporter;
}());
exports.StatsReporter = StatsReporter;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/storage/DOMStorageWrapper.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/storage/DOMStorageWrapper.js ***!
  \****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * Wraps a DOM Storage object and:
 * - automatically encode objects as JSON strings before storing them to allow us to store arbitrary types.
 * - prefixes names with "firebase:" to avoid collisions with app data.
 *
 * We automatically (see storage.js) create two such wrappers, one for sessionStorage,
 * and one for localStorage.
 *
 * @constructor
 */
var DOMStorageWrapper = /** @class */ (function () {
    /**
     * @param {Storage} domStorage_ The underlying storage object (e.g. localStorage or sessionStorage)
     */
    function DOMStorageWrapper(domStorage_) {
        this.domStorage_ = domStorage_;
        // Use a prefix to avoid collisions with other stuff saved by the app.
        this.prefix_ = 'firebase:';
    }
    /**
     * @param {string} key The key to save the value under
     * @param {?Object} value The value being stored, or null to remove the key.
     */
    DOMStorageWrapper.prototype.set = function (key, value) {
        if (value == null) {
            this.domStorage_.removeItem(this.prefixedName_(key));
        }
        else {
            this.domStorage_.setItem(this.prefixedName_(key), util_1.stringify(value));
        }
    };
    /**
     * @param {string} key
     * @return {*} The value that was stored under this key, or null
     */
    DOMStorageWrapper.prototype.get = function (key) {
        var storedVal = this.domStorage_.getItem(this.prefixedName_(key));
        if (storedVal == null) {
            return null;
        }
        else {
            return util_1.jsonEval(storedVal);
        }
    };
    /**
     * @param {string} key
     */
    DOMStorageWrapper.prototype.remove = function (key) {
        this.domStorage_.removeItem(this.prefixedName_(key));
    };
    /**
     * @param {string} name
     * @return {string}
     */
    DOMStorageWrapper.prototype.prefixedName_ = function (name) {
        return this.prefix_ + name;
    };
    DOMStorageWrapper.prototype.toString = function () {
        return this.domStorage_.toString();
    };
    return DOMStorageWrapper;
}());
exports.DOMStorageWrapper = DOMStorageWrapper;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/storage/MemoryStorage.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/storage/MemoryStorage.js ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * An in-memory storage implementation that matches the API of DOMStorageWrapper
 * (TODO: create interface for both to implement).
 *
 * @constructor
 */
var MemoryStorage = /** @class */ (function () {
    function MemoryStorage() {
        this.cache_ = {};
        this.isInMemoryStorage = true;
    }
    MemoryStorage.prototype.set = function (key, value) {
        if (value == null) {
            delete this.cache_[key];
        }
        else {
            this.cache_[key] = value;
        }
    };
    MemoryStorage.prototype.get = function (key) {
        if (util_1.contains(this.cache_, key)) {
            return this.cache_[key];
        }
        return null;
    };
    MemoryStorage.prototype.remove = function (key) {
        delete this.cache_[key];
    };
    return MemoryStorage;
}());
exports.MemoryStorage = MemoryStorage;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/storage/storage.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/storage/storage.js ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var DOMStorageWrapper_1 = __webpack_require__(/*! ./DOMStorageWrapper */ "./node_modules/@firebase/database/dist/cjs/src/core/storage/DOMStorageWrapper.js");
var MemoryStorage_1 = __webpack_require__(/*! ./MemoryStorage */ "./node_modules/@firebase/database/dist/cjs/src/core/storage/MemoryStorage.js");
/**
 * Helper to create a DOMStorageWrapper or else fall back to MemoryStorage.
 * TODO: Once MemoryStorage and DOMStorageWrapper have a shared interface this method annotation should change
 * to reflect this type
 *
 * @param {string} domStorageName Name of the underlying storage object
 *   (e.g. 'localStorage' or 'sessionStorage').
 * @return {?} Turning off type information until a common interface is defined.
 */
var createStoragefor = function (domStorageName) {
    try {
        // NOTE: just accessing "localStorage" or "window['localStorage']" may throw a security exception,
        // so it must be inside the try/catch.
        if (typeof window !== 'undefined' &&
            typeof window[domStorageName] !== 'undefined') {
            // Need to test cache. Just because it's here doesn't mean it works
            var domStorage = window[domStorageName];
            domStorage.setItem('firebase:sentinel', 'cache');
            domStorage.removeItem('firebase:sentinel');
            return new DOMStorageWrapper_1.DOMStorageWrapper(domStorage);
        }
    }
    catch (e) { }
    // Failed to create wrapper.  Just return in-memory storage.
    // TODO: log?
    return new MemoryStorage_1.MemoryStorage();
};
/** A storage object that lasts across sessions */
exports.PersistentStorage = createStoragefor('localStorage');
/** A storage object that only lasts one session */
exports.SessionStorage = createStoragefor('sessionStorage');



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/util/CountedSet.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/util/CountedSet.js ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * Implements a set with a count of elements.
 *
 * @template K, V
 */
var CountedSet = /** @class */ (function () {
    function CountedSet() {
        this.set = {};
    }
    /**
     * @param {!K} item
     * @param {V} val
     */
    CountedSet.prototype.add = function (item, val) {
        this.set[item] = val !== null ? val : true;
    };
    /**
     * @param {!K} key
     * @return {boolean}
     */
    CountedSet.prototype.contains = function (key) {
        return util_1.contains(this.set, key);
    };
    /**
     * @param {!K} item
     * @return {V}
     */
    CountedSet.prototype.get = function (item) {
        return this.contains(item) ? this.set[item] : undefined;
    };
    /**
     * @param {!K} item
     */
    CountedSet.prototype.remove = function (item) {
        delete this.set[item];
    };
    /**
     * Deletes everything in the set
     */
    CountedSet.prototype.clear = function () {
        this.set = {};
    };
    /**
     * True if there's nothing in the set
     * @return {boolean}
     */
    CountedSet.prototype.isEmpty = function () {
        return util_1.isEmpty(this.set);
    };
    /**
     * @return {number} The number of items in the set
     */
    CountedSet.prototype.count = function () {
        return util_1.getCount(this.set);
    };
    /**
     * Run a function on each k,v pair in the set
     * @param {function(K, V)} fn
     */
    CountedSet.prototype.each = function (fn) {
        util_1.forEach(this.set, function (k, v) { return fn(k, v); });
    };
    /**
     * Mostly for debugging
     * @return {Array.<K>} The keys present in this CountedSet
     */
    CountedSet.prototype.keys = function () {
        var keys = [];
        util_1.forEach(this.set, function (k) {
            keys.push(k);
        });
        return keys;
    };
    return CountedSet;
}());
exports.CountedSet = CountedSet;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/util/EventEmitter.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/util/EventEmitter.js ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * Base class to be used if you want to emit events. Call the constructor with
 * the set of allowed event names.
 */
var EventEmitter = /** @class */ (function () {
    /**
     * @param {!Array.<string>} allowedEvents_
     */
    function EventEmitter(allowedEvents_) {
        this.allowedEvents_ = allowedEvents_;
        this.listeners_ = {};
        util_1.assert(Array.isArray(allowedEvents_) && allowedEvents_.length > 0, 'Requires a non-empty array');
    }
    /**
     * To be called by derived classes to trigger events.
     * @param {!string} eventType
     * @param {...*} var_args
     */
    EventEmitter.prototype.trigger = function (eventType) {
        var var_args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            var_args[_i - 1] = arguments[_i];
        }
        if (Array.isArray(this.listeners_[eventType])) {
            // Clone the list, since callbacks could add/remove listeners.
            var listeners = this.listeners_[eventType].slice();
            for (var i = 0; i < listeners.length; i++) {
                listeners[i].callback.apply(listeners[i].context, var_args);
            }
        }
    };
    EventEmitter.prototype.on = function (eventType, callback, context) {
        this.validateEventType_(eventType);
        this.listeners_[eventType] = this.listeners_[eventType] || [];
        this.listeners_[eventType].push({ callback: callback, context: context });
        var eventData = this.getInitialEvent(eventType);
        if (eventData) {
            callback.apply(context, eventData);
        }
    };
    EventEmitter.prototype.off = function (eventType, callback, context) {
        this.validateEventType_(eventType);
        var listeners = this.listeners_[eventType] || [];
        for (var i = 0; i < listeners.length; i++) {
            if (listeners[i].callback === callback &&
                (!context || context === listeners[i].context)) {
                listeners.splice(i, 1);
                return;
            }
        }
    };
    EventEmitter.prototype.validateEventType_ = function (eventType) {
        util_1.assert(this.allowedEvents_.find(function (et) {
            return et === eventType;
        }), 'Unknown event: ' + eventType);
    };
    return EventEmitter;
}());
exports.EventEmitter = EventEmitter;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/util/ImmutableTree.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/util/ImmutableTree.js ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var SortedMap_1 = __webpack_require__(/*! ./SortedMap */ "./node_modules/@firebase/database/dist/cjs/src/core/util/SortedMap.js");
var Path_1 = __webpack_require__(/*! ./Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var util_1 = __webpack_require__(/*! ./util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var emptyChildrenSingleton;
/**
 * Singleton empty children collection.
 *
 * @const
 * @type {!SortedMap.<string, !ImmutableTree.<?>>}
 */
var EmptyChildren = function () {
    if (!emptyChildrenSingleton) {
        emptyChildrenSingleton = new SortedMap_1.SortedMap(util_1.stringCompare);
    }
    return emptyChildrenSingleton;
};
/**
 * A tree with immutable elements.
 */
var ImmutableTree = /** @class */ (function () {
    /**
     * @template T
     * @param {?T} value
     * @param {SortedMap.<string, !ImmutableTree.<T>>=} children
     */
    function ImmutableTree(value, children) {
        if (children === void 0) { children = EmptyChildren(); }
        this.value = value;
        this.children = children;
    }
    /**
     * @template T
     * @param {!Object.<string, !T>} obj
     * @return {!ImmutableTree.<!T>}
     */
    ImmutableTree.fromObject = function (obj) {
        var tree = ImmutableTree.Empty;
        util_2.forEach(obj, function (childPath, childSnap) {
            tree = tree.set(new Path_1.Path(childPath), childSnap);
        });
        return tree;
    };
    /**
     * True if the value is empty and there are no children
     * @return {boolean}
     */
    ImmutableTree.prototype.isEmpty = function () {
        return this.value === null && this.children.isEmpty();
    };
    /**
     * Given a path and predicate, return the first node and the path to that node
     * where the predicate returns true.
     *
     * TODO Do a perf test -- If we're creating a bunch of {path: value:} objects
     * on the way back out, it may be better to pass down a pathSoFar obj.
     *
     * @param {!Path} relativePath The remainder of the path
     * @param {function(T):boolean} predicate The predicate to satisfy to return a
     *   node
     * @return {?{path:!Path, value:!T}}
     */
    ImmutableTree.prototype.findRootMostMatchingPathAndValue = function (relativePath, predicate) {
        if (this.value != null && predicate(this.value)) {
            return { path: Path_1.Path.Empty, value: this.value };
        }
        else {
            if (relativePath.isEmpty()) {
                return null;
            }
            else {
                var front = relativePath.getFront();
                var child = this.children.get(front);
                if (child !== null) {
                    var childExistingPathAndValue = child.findRootMostMatchingPathAndValue(relativePath.popFront(), predicate);
                    if (childExistingPathAndValue != null) {
                        var fullPath = new Path_1.Path(front).child(childExistingPathAndValue.path);
                        return { path: fullPath, value: childExistingPathAndValue.value };
                    }
                    else {
                        return null;
                    }
                }
                else {
                    return null;
                }
            }
        }
    };
    /**
     * Find, if it exists, the shortest subpath of the given path that points a defined
     * value in the tree
     * @param {!Path} relativePath
     * @return {?{path: !Path, value: !T}}
     */
    ImmutableTree.prototype.findRootMostValueAndPath = function (relativePath) {
        return this.findRootMostMatchingPathAndValue(relativePath, function () { return true; });
    };
    /**
     * @param {!Path} relativePath
     * @return {!ImmutableTree.<T>} The subtree at the given path
     */
    ImmutableTree.prototype.subtree = function (relativePath) {
        if (relativePath.isEmpty()) {
            return this;
        }
        else {
            var front = relativePath.getFront();
            var childTree = this.children.get(front);
            if (childTree !== null) {
                return childTree.subtree(relativePath.popFront());
            }
            else {
                return ImmutableTree.Empty;
            }
        }
    };
    /**
     * Sets a value at the specified path.
     *
     * @param {!Path} relativePath Path to set value at.
     * @param {?T} toSet Value to set.
     * @return {!ImmutableTree.<T>} Resulting tree.
     */
    ImmutableTree.prototype.set = function (relativePath, toSet) {
        if (relativePath.isEmpty()) {
            return new ImmutableTree(toSet, this.children);
        }
        else {
            var front = relativePath.getFront();
            var child = this.children.get(front) || ImmutableTree.Empty;
            var newChild = child.set(relativePath.popFront(), toSet);
            var newChildren = this.children.insert(front, newChild);
            return new ImmutableTree(this.value, newChildren);
        }
    };
    /**
     * Removes the value at the specified path.
     *
     * @param {!Path} relativePath Path to value to remove.
     * @return {!ImmutableTree.<T>} Resulting tree.
     */
    ImmutableTree.prototype.remove = function (relativePath) {
        if (relativePath.isEmpty()) {
            if (this.children.isEmpty()) {
                return ImmutableTree.Empty;
            }
            else {
                return new ImmutableTree(null, this.children);
            }
        }
        else {
            var front = relativePath.getFront();
            var child = this.children.get(front);
            if (child) {
                var newChild = child.remove(relativePath.popFront());
                var newChildren = void 0;
                if (newChild.isEmpty()) {
                    newChildren = this.children.remove(front);
                }
                else {
                    newChildren = this.children.insert(front, newChild);
                }
                if (this.value === null && newChildren.isEmpty()) {
                    return ImmutableTree.Empty;
                }
                else {
                    return new ImmutableTree(this.value, newChildren);
                }
            }
            else {
                return this;
            }
        }
    };
    /**
     * Gets a value from the tree.
     *
     * @param {!Path} relativePath Path to get value for.
     * @return {?T} Value at path, or null.
     */
    ImmutableTree.prototype.get = function (relativePath) {
        if (relativePath.isEmpty()) {
            return this.value;
        }
        else {
            var front = relativePath.getFront();
            var child = this.children.get(front);
            if (child) {
                return child.get(relativePath.popFront());
            }
            else {
                return null;
            }
        }
    };
    /**
     * Replace the subtree at the specified path with the given new tree.
     *
     * @param {!Path} relativePath Path to replace subtree for.
     * @param {!ImmutableTree} newTree New tree.
     * @return {!ImmutableTree} Resulting tree.
     */
    ImmutableTree.prototype.setTree = function (relativePath, newTree) {
        if (relativePath.isEmpty()) {
            return newTree;
        }
        else {
            var front = relativePath.getFront();
            var child = this.children.get(front) || ImmutableTree.Empty;
            var newChild = child.setTree(relativePath.popFront(), newTree);
            var newChildren = void 0;
            if (newChild.isEmpty()) {
                newChildren = this.children.remove(front);
            }
            else {
                newChildren = this.children.insert(front, newChild);
            }
            return new ImmutableTree(this.value, newChildren);
        }
    };
    /**
     * Performs a depth first fold on this tree. Transforms a tree into a single
     * value, given a function that operates on the path to a node, an optional
     * current value, and a map of child names to folded subtrees
     * @template V
     * @param {function(Path, ?T, Object.<string, V>):V} fn
     * @return {V}
     */
    ImmutableTree.prototype.fold = function (fn) {
        return this.fold_(Path_1.Path.Empty, fn);
    };
    /**
     * Recursive helper for public-facing fold() method
     * @template V
     * @param {!Path} pathSoFar
     * @param {function(Path, ?T, Object.<string, V>):V} fn
     * @return {V}
     * @private
     */
    ImmutableTree.prototype.fold_ = function (pathSoFar, fn) {
        var accum = {};
        this.children.inorderTraversal(function (childKey, childTree) {
            accum[childKey] = childTree.fold_(pathSoFar.child(childKey), fn);
        });
        return fn(pathSoFar, this.value, accum);
    };
    /**
     * Find the first matching value on the given path. Return the result of applying f to it.
     * @template V
     * @param {!Path} path
     * @param {!function(!Path, !T):?V} f
     * @return {?V}
     */
    ImmutableTree.prototype.findOnPath = function (path, f) {
        return this.findOnPath_(path, Path_1.Path.Empty, f);
    };
    ImmutableTree.prototype.findOnPath_ = function (pathToFollow, pathSoFar, f) {
        var result = this.value ? f(pathSoFar, this.value) : false;
        if (result) {
            return result;
        }
        else {
            if (pathToFollow.isEmpty()) {
                return null;
            }
            else {
                var front = pathToFollow.getFront();
                var nextChild = this.children.get(front);
                if (nextChild) {
                    return nextChild.findOnPath_(pathToFollow.popFront(), pathSoFar.child(front), f);
                }
                else {
                    return null;
                }
            }
        }
    };
    /**
     *
     * @param {!Path} path
     * @param {!function(!Path, !T)} f
     * @returns {!ImmutableTree.<T>}
     */
    ImmutableTree.prototype.foreachOnPath = function (path, f) {
        return this.foreachOnPath_(path, Path_1.Path.Empty, f);
    };
    ImmutableTree.prototype.foreachOnPath_ = function (pathToFollow, currentRelativePath, f) {
        if (pathToFollow.isEmpty()) {
            return this;
        }
        else {
            if (this.value) {
                f(currentRelativePath, this.value);
            }
            var front = pathToFollow.getFront();
            var nextChild = this.children.get(front);
            if (nextChild) {
                return nextChild.foreachOnPath_(pathToFollow.popFront(), currentRelativePath.child(front), f);
            }
            else {
                return ImmutableTree.Empty;
            }
        }
    };
    /**
     * Calls the given function for each node in the tree that has a value.
     *
     * @param {function(!Path, !T)} f A function to be called with
     *   the path from the root of the tree to a node, and the value at that node.
     *   Called in depth-first order.
     */
    ImmutableTree.prototype.foreach = function (f) {
        this.foreach_(Path_1.Path.Empty, f);
    };
    ImmutableTree.prototype.foreach_ = function (currentRelativePath, f) {
        this.children.inorderTraversal(function (childName, childTree) {
            childTree.foreach_(currentRelativePath.child(childName), f);
        });
        if (this.value) {
            f(currentRelativePath, this.value);
        }
    };
    /**
     *
     * @param {function(string, !T)} f
     */
    ImmutableTree.prototype.foreachChild = function (f) {
        this.children.inorderTraversal(function (childName, childTree) {
            if (childTree.value) {
                f(childName, childTree.value);
            }
        });
    };
    ImmutableTree.Empty = new ImmutableTree(null);
    return ImmutableTree;
}());
exports.ImmutableTree = ImmutableTree;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/util/NextPushId.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/util/NextPushId.js ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * Fancy ID generator that creates 20-character string identifiers with the
 * following properties:
 *
 * 1. They're based on timestamp so that they sort *after* any existing ids.
 * 2. They contain 72-bits of random data after the timestamp so that IDs won't
 *    collide with other clients' IDs.
 * 3. They sort *lexicographically* (so the timestamp is converted to characters
 *    that will sort properly).
 * 4. They're monotonically increasing. Even if you generate more than one in
 *    the same timestamp, the latter ones will sort after the former ones. We do
 *    this by using the previous random bits but "incrementing" them by 1 (only
 *    in the case of a timestamp collision).
 */
exports.nextPushId = (function () {
    // Modeled after base64 web-safe chars, but ordered by ASCII.
    var PUSH_CHARS = '-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz';
    // Timestamp of last push, used to prevent local collisions if you push twice
    // in one ms.
    var lastPushTime = 0;
    // We generate 72-bits of randomness which get turned into 12 characters and
    // appended to the timestamp to prevent collisions with other clients. We
    // store the last characters we generated because in the event of a collision,
    // we'll use those same characters except "incremented" by one.
    var lastRandChars = [];
    return function (now) {
        var duplicateTime = now === lastPushTime;
        lastPushTime = now;
        var i;
        var timeStampChars = new Array(8);
        for (i = 7; i >= 0; i--) {
            timeStampChars[i] = PUSH_CHARS.charAt(now % 64);
            // NOTE: Can't use << here because javascript will convert to int and lose
            // the upper bits.
            now = Math.floor(now / 64);
        }
        util_1.assert(now === 0, 'Cannot push at time == 0');
        var id = timeStampChars.join('');
        if (!duplicateTime) {
            for (i = 0; i < 12; i++) {
                lastRandChars[i] = Math.floor(Math.random() * 64);
            }
        }
        else {
            // If the timestamp hasn't changed since last push, use the same random
            // number, except incremented by 1.
            for (i = 11; i >= 0 && lastRandChars[i] === 63; i--) {
                lastRandChars[i] = 0;
            }
            lastRandChars[i]++;
        }
        for (i = 0; i < 12; i++) {
            id += PUSH_CHARS.charAt(lastRandChars[i]);
        }
        util_1.assert(id.length === 20, 'nextPushId: Length should be 20.');
        return id;
    };
})();



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/util/OnlineMonitor.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/util/OnlineMonitor.js ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var EventEmitter_1 = __webpack_require__(/*! ./EventEmitter */ "./node_modules/@firebase/database/dist/cjs/src/core/util/EventEmitter.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * Monitors online state (as reported by window.online/offline events).
 *
 * The expectation is that this could have many false positives (thinks we are online
 * when we're not), but no false negatives.  So we can safely use it to determine when
 * we definitely cannot reach the internet.
 *
 * @extends {EventEmitter}
 */
var OnlineMonitor = /** @class */ (function (_super) {
    __extends(OnlineMonitor, _super);
    function OnlineMonitor() {
        var _this = _super.call(this, ['online']) || this;
        _this.online_ = true;
        // We've had repeated complaints that Cordova apps can get stuck "offline", e.g.
        // https://forum.ionicframework.com/t/firebase-connection-is-lost-and-never-come-back/43810
        // It would seem that the 'online' event does not always fire consistently. So we disable it
        // for Cordova.
        if (typeof window !== 'undefined' &&
            typeof window.addEventListener !== 'undefined' &&
            !util_2.isMobileCordova()) {
            window.addEventListener('online', function () {
                if (!_this.online_) {
                    _this.online_ = true;
                    _this.trigger('online', true);
                }
            }, false);
            window.addEventListener('offline', function () {
                if (_this.online_) {
                    _this.online_ = false;
                    _this.trigger('online', false);
                }
            }, false);
        }
        return _this;
    }
    OnlineMonitor.getInstance = function () {
        return new OnlineMonitor();
    };
    /**
     * @param {!string} eventType
     * @return {Array.<boolean>}
     */
    OnlineMonitor.prototype.getInitialEvent = function (eventType) {
        util_1.assert(eventType === 'online', 'Unknown event type: ' + eventType);
        return [this.online_];
    };
    /**
     * @return {boolean}
     */
    OnlineMonitor.prototype.currentlyOnline = function () {
        return this.online_;
    };
    return OnlineMonitor;
}(EventEmitter_1.EventEmitter));
exports.OnlineMonitor = OnlineMonitor;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js":
/*!************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! ./util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * An immutable object representing a parsed path.  It's immutable so that you
 * can pass them around to other functions without worrying about them changing
 * it.
 */
var Path = /** @class */ (function () {
    /**
     * @param {string|Array.<string>} pathOrString Path string to parse,
     *      or another path, or the raw tokens array
     * @param {number=} pieceNum
     */
    function Path(pathOrString, pieceNum) {
        if (pieceNum === void 0) {
            this.pieces_ = pathOrString.split('/');
            // Remove empty pieces.
            var copyTo = 0;
            for (var i = 0; i < this.pieces_.length; i++) {
                if (this.pieces_[i].length > 0) {
                    this.pieces_[copyTo] = this.pieces_[i];
                    copyTo++;
                }
            }
            this.pieces_.length = copyTo;
            this.pieceNum_ = 0;
        }
        else {
            this.pieces_ = pathOrString;
            this.pieceNum_ = pieceNum;
        }
    }
    Object.defineProperty(Path, "Empty", {
        /**
         * Singleton to represent an empty path
         *
         * @const
         */
        get: function () {
            return new Path('');
        },
        enumerable: true,
        configurable: true
    });
    Path.prototype.getFront = function () {
        if (this.pieceNum_ >= this.pieces_.length)
            return null;
        return this.pieces_[this.pieceNum_];
    };
    /**
     * @return {number} The number of segments in this path
     */
    Path.prototype.getLength = function () {
        return this.pieces_.length - this.pieceNum_;
    };
    /**
     * @return {!Path}
     */
    Path.prototype.popFront = function () {
        var pieceNum = this.pieceNum_;
        if (pieceNum < this.pieces_.length) {
            pieceNum++;
        }
        return new Path(this.pieces_, pieceNum);
    };
    /**
     * @return {?string}
     */
    Path.prototype.getBack = function () {
        if (this.pieceNum_ < this.pieces_.length)
            return this.pieces_[this.pieces_.length - 1];
        return null;
    };
    Path.prototype.toString = function () {
        var pathString = '';
        for (var i = this.pieceNum_; i < this.pieces_.length; i++) {
            if (this.pieces_[i] !== '')
                pathString += '/' + this.pieces_[i];
        }
        return pathString || '/';
    };
    Path.prototype.toUrlEncodedString = function () {
        var pathString = '';
        for (var i = this.pieceNum_; i < this.pieces_.length; i++) {
            if (this.pieces_[i] !== '')
                pathString += '/' + encodeURIComponent(String(this.pieces_[i]));
        }
        return pathString || '/';
    };
    /**
     * Shallow copy of the parts of the path.
     *
     * @param {number=} begin
     * @return {!Array<string>}
     */
    Path.prototype.slice = function (begin) {
        if (begin === void 0) { begin = 0; }
        return this.pieces_.slice(this.pieceNum_ + begin);
    };
    /**
     * @return {?Path}
     */
    Path.prototype.parent = function () {
        if (this.pieceNum_ >= this.pieces_.length)
            return null;
        var pieces = [];
        for (var i = this.pieceNum_; i < this.pieces_.length - 1; i++)
            pieces.push(this.pieces_[i]);
        return new Path(pieces, 0);
    };
    /**
     * @param {string|!Path} childPathObj
     * @return {!Path}
     */
    Path.prototype.child = function (childPathObj) {
        var pieces = [];
        for (var i = this.pieceNum_; i < this.pieces_.length; i++)
            pieces.push(this.pieces_[i]);
        if (childPathObj instanceof Path) {
            for (var i = childPathObj.pieceNum_; i < childPathObj.pieces_.length; i++) {
                pieces.push(childPathObj.pieces_[i]);
            }
        }
        else {
            var childPieces = childPathObj.split('/');
            for (var i = 0; i < childPieces.length; i++) {
                if (childPieces[i].length > 0)
                    pieces.push(childPieces[i]);
            }
        }
        return new Path(pieces, 0);
    };
    /**
     * @return {boolean} True if there are no segments in this path
     */
    Path.prototype.isEmpty = function () {
        return this.pieceNum_ >= this.pieces_.length;
    };
    /**
     * @param {!Path} outerPath
     * @param {!Path} innerPath
     * @return {!Path} The path from outerPath to innerPath
     */
    Path.relativePath = function (outerPath, innerPath) {
        var outer = outerPath.getFront(), inner = innerPath.getFront();
        if (outer === null) {
            return innerPath;
        }
        else if (outer === inner) {
            return Path.relativePath(outerPath.popFront(), innerPath.popFront());
        }
        else {
            throw new Error('INTERNAL ERROR: innerPath (' +
                innerPath +
                ') is not within ' +
                'outerPath (' +
                outerPath +
                ')');
        }
    };
    /**
     * @param {!Path} left
     * @param {!Path} right
     * @return {number} -1, 0, 1 if left is less, equal, or greater than the right.
     */
    Path.comparePaths = function (left, right) {
        var leftKeys = left.slice();
        var rightKeys = right.slice();
        for (var i = 0; i < leftKeys.length && i < rightKeys.length; i++) {
            var cmp = util_1.nameCompare(leftKeys[i], rightKeys[i]);
            if (cmp !== 0)
                return cmp;
        }
        if (leftKeys.length === rightKeys.length)
            return 0;
        return leftKeys.length < rightKeys.length ? -1 : 1;
    };
    /**
     *
     * @param {Path} other
     * @return {boolean} true if paths are the same.
     */
    Path.prototype.equals = function (other) {
        if (this.getLength() !== other.getLength()) {
            return false;
        }
        for (var i = this.pieceNum_, j = other.pieceNum_; i <= this.pieces_.length; i++, j++) {
            if (this.pieces_[i] !== other.pieces_[j]) {
                return false;
            }
        }
        return true;
    };
    /**
     *
     * @param {!Path} other
     * @return {boolean} True if this path is a parent (or the same as) other
     */
    Path.prototype.contains = function (other) {
        var i = this.pieceNum_;
        var j = other.pieceNum_;
        if (this.getLength() > other.getLength()) {
            return false;
        }
        while (i < this.pieces_.length) {
            if (this.pieces_[i] !== other.pieces_[j]) {
                return false;
            }
            ++i;
            ++j;
        }
        return true;
    };
    return Path;
}()); // end Path
exports.Path = Path;
/**
 * Dynamic (mutable) path used to count path lengths.
 *
 * This class is used to efficiently check paths for valid
 * length (in UTF8 bytes) and depth (used in path validation).
 *
 * Throws Error exception if path is ever invalid.
 *
 * The definition of a path always begins with '/'.
 */
var ValidationPath = /** @class */ (function () {
    /**
     * @param {!Path} path Initial Path.
     * @param {string} errorPrefix_ Prefix for any error messages.
     */
    function ValidationPath(path, errorPrefix_) {
        this.errorPrefix_ = errorPrefix_;
        /** @type {!Array<string>} */
        this.parts_ = path.slice();
        /** @type {number} Initialize to number of '/' chars needed in path. */
        this.byteLength_ = Math.max(1, this.parts_.length);
        for (var i = 0; i < this.parts_.length; i++) {
            this.byteLength_ += util_2.stringLength(this.parts_[i]);
        }
        this.checkValid_();
    }
    Object.defineProperty(ValidationPath, "MAX_PATH_DEPTH", {
        /** @const {number} Maximum key depth. */
        get: function () {
            return 32;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ValidationPath, "MAX_PATH_LENGTH_BYTES", {
        /** @const {number} Maximum number of (UTF8) bytes in a Firebase path. */
        get: function () {
            return 768;
        },
        enumerable: true,
        configurable: true
    });
    /** @param {string} child */
    ValidationPath.prototype.push = function (child) {
        // Count the needed '/'
        if (this.parts_.length > 0) {
            this.byteLength_ += 1;
        }
        this.parts_.push(child);
        this.byteLength_ += util_2.stringLength(child);
        this.checkValid_();
    };
    ValidationPath.prototype.pop = function () {
        var last = this.parts_.pop();
        this.byteLength_ -= util_2.stringLength(last);
        // Un-count the previous '/'
        if (this.parts_.length > 0) {
            this.byteLength_ -= 1;
        }
    };
    ValidationPath.prototype.checkValid_ = function () {
        if (this.byteLength_ > ValidationPath.MAX_PATH_LENGTH_BYTES) {
            throw new Error(this.errorPrefix_ +
                'has a key path longer than ' +
                ValidationPath.MAX_PATH_LENGTH_BYTES +
                ' bytes (' +
                this.byteLength_ +
                ').');
        }
        if (this.parts_.length > ValidationPath.MAX_PATH_DEPTH) {
            throw new Error(this.errorPrefix_ +
                'path specified exceeds the maximum depth that can be written (' +
                ValidationPath.MAX_PATH_DEPTH +
                ') or object contains a cycle ' +
                this.toErrorString());
        }
    };
    /**
     * String for use in error messages - uses '.' notation for path.
     *
     * @return {string}
     */
    ValidationPath.prototype.toErrorString = function () {
        if (this.parts_.length == 0) {
            return '';
        }
        return "in property '" + this.parts_.join('.') + "'";
    };
    return ValidationPath;
}());
exports.ValidationPath = ValidationPath;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/util/ServerValues.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/util/ServerValues.js ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var Path_1 = __webpack_require__(/*! ./Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var SparseSnapshotTree_1 = __webpack_require__(/*! ../SparseSnapshotTree */ "./node_modules/@firebase/database/dist/cjs/src/core/SparseSnapshotTree.js");
var LeafNode_1 = __webpack_require__(/*! ../snap/LeafNode */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/LeafNode.js");
var nodeFromJSON_1 = __webpack_require__(/*! ../snap/nodeFromJSON */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/nodeFromJSON.js");
var PriorityIndex_1 = __webpack_require__(/*! ../snap/indexes/PriorityIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PriorityIndex.js");
/**
 * Generate placeholders for deferred values.
 * @param {?Object} values
 * @return {!Object}
 */
exports.generateWithValues = function (values) {
    values = values || {};
    values['timestamp'] = values['timestamp'] || new Date().getTime();
    return values;
};
/**
 * Value to use when firing local events. When writing server values, fire
 * local events with an approximate value, otherwise return value as-is.
 * @param {(Object|string|number|boolean)} value
 * @param {!Object} serverValues
 * @return {!(string|number|boolean)}
 */
exports.resolveDeferredValue = function (value, serverValues) {
    if (!value || typeof value !== 'object') {
        return value;
    }
    else {
        util_1.assert('.sv' in value, 'Unexpected leaf node or priority contents');
        return serverValues[value['.sv']];
    }
};
/**
 * Recursively replace all deferred values and priorities in the tree with the
 * specified generated replacement values.
 * @param {!SparseSnapshotTree} tree
 * @param {!Object} serverValues
 * @return {!SparseSnapshotTree}
 */
exports.resolveDeferredValueTree = function (tree, serverValues) {
    var resolvedTree = new SparseSnapshotTree_1.SparseSnapshotTree();
    tree.forEachTree(new Path_1.Path(''), function (path, node) {
        resolvedTree.remember(path, exports.resolveDeferredValueSnapshot(node, serverValues));
    });
    return resolvedTree;
};
/**
 * Recursively replace all deferred values and priorities in the node with the
 * specified generated replacement values.  If there are no server values in the node,
 * it'll be returned as-is.
 * @param {!Node} node
 * @param {!Object} serverValues
 * @return {!Node}
 */
exports.resolveDeferredValueSnapshot = function (node, serverValues) {
    var rawPri = node.getPriority().val();
    var priority = exports.resolveDeferredValue(rawPri, serverValues);
    var newNode;
    if (node.isLeafNode()) {
        var leafNode = node;
        var value = exports.resolveDeferredValue(leafNode.getValue(), serverValues);
        if (value !== leafNode.getValue() ||
            priority !== leafNode.getPriority().val()) {
            return new LeafNode_1.LeafNode(value, nodeFromJSON_1.nodeFromJSON(priority));
        }
        else {
            return node;
        }
    }
    else {
        var childrenNode = node;
        newNode = childrenNode;
        if (priority !== childrenNode.getPriority().val()) {
            newNode = newNode.updatePriority(new LeafNode_1.LeafNode(priority));
        }
        childrenNode.forEachChild(PriorityIndex_1.PRIORITY_INDEX, function (childName, childNode) {
            var newChildNode = exports.resolveDeferredValueSnapshot(childNode, serverValues);
            if (newChildNode !== childNode) {
                newNode = newNode.updateImmediateChild(childName, newChildNode);
            }
        });
        return newNode;
    }
};



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/util/SortedMap.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/util/SortedMap.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * An iterator over an LLRBNode.
 */
var SortedMapIterator = /** @class */ (function () {
    /**
     * @template K, V, T
     * @param {LLRBNode|LLRBEmptyNode} node Node to iterate.
     * @param {?K} startKey
     * @param {function(K, K): number} comparator
     * @param {boolean} isReverse_ Whether or not to iterate in reverse
     * @param {(function(K, V):T)=} resultGenerator_
     */
    function SortedMapIterator(node, startKey, comparator, isReverse_, resultGenerator_) {
        if (resultGenerator_ === void 0) { resultGenerator_ = null; }
        this.isReverse_ = isReverse_;
        this.resultGenerator_ = resultGenerator_;
        /** @private
         * @type {Array.<!LLRBNode>}
         */
        this.nodeStack_ = [];
        var cmp = 1;
        while (!node.isEmpty()) {
            node = node;
            cmp = startKey ? comparator(node.key, startKey) : 1;
            // flip the comparison if we're going in reverse
            if (isReverse_)
                cmp *= -1;
            if (cmp < 0) {
                // This node is less than our start key. ignore it
                if (this.isReverse_) {
                    node = node.left;
                }
                else {
                    node = node.right;
                }
            }
            else if (cmp === 0) {
                // This node is exactly equal to our start key. Push it on the stack, but stop iterating;
                this.nodeStack_.push(node);
                break;
            }
            else {
                // This node is greater than our start key, add it to the stack and move to the next one
                this.nodeStack_.push(node);
                if (this.isReverse_) {
                    node = node.right;
                }
                else {
                    node = node.left;
                }
            }
        }
    }
    SortedMapIterator.prototype.getNext = function () {
        if (this.nodeStack_.length === 0)
            return null;
        var node = this.nodeStack_.pop();
        var result;
        if (this.resultGenerator_)
            result = this.resultGenerator_(node.key, node.value);
        else
            result = { key: node.key, value: node.value };
        if (this.isReverse_) {
            node = node.left;
            while (!node.isEmpty()) {
                this.nodeStack_.push(node);
                node = node.right;
            }
        }
        else {
            node = node.right;
            while (!node.isEmpty()) {
                this.nodeStack_.push(node);
                node = node.left;
            }
        }
        return result;
    };
    SortedMapIterator.prototype.hasNext = function () {
        return this.nodeStack_.length > 0;
    };
    SortedMapIterator.prototype.peek = function () {
        if (this.nodeStack_.length === 0)
            return null;
        var node = this.nodeStack_[this.nodeStack_.length - 1];
        if (this.resultGenerator_) {
            return this.resultGenerator_(node.key, node.value);
        }
        else {
            return { key: node.key, value: node.value };
        }
    };
    return SortedMapIterator;
}());
exports.SortedMapIterator = SortedMapIterator;
/**
 * Represents a node in a Left-leaning Red-Black tree.
 */
var LLRBNode = /** @class */ (function () {
    /**
     * @template K, V
     * @param {!K} key Key associated with this node.
     * @param {!V} value Value associated with this node.
     * @param {?boolean} color Whether this node is red.
     * @param {?(LLRBNode|LLRBEmptyNode)=} left Left child.
     * @param {?(LLRBNode|LLRBEmptyNode)=} right Right child.
     */
    function LLRBNode(key, value, color, left, right) {
        this.key = key;
        this.value = value;
        this.color = color != null ? color : LLRBNode.RED;
        this.left =
            left != null ? left : SortedMap.EMPTY_NODE;
        this.right =
            right != null ? right : SortedMap.EMPTY_NODE;
    }
    /**
     * Returns a copy of the current node, optionally replacing pieces of it.
     *
     * @param {?K} key New key for the node, or null.
     * @param {?V} value New value for the node, or null.
     * @param {?boolean} color New color for the node, or null.
     * @param {?LLRBNode|LLRBEmptyNode} left New left child for the node, or null.
     * @param {?LLRBNode|LLRBEmptyNode} right New right child for the node, or null.
     * @return {!LLRBNode} The node copy.
     */
    LLRBNode.prototype.copy = function (key, value, color, left, right) {
        return new LLRBNode(key != null ? key : this.key, value != null ? value : this.value, color != null ? color : this.color, left != null ? left : this.left, right != null ? right : this.right);
    };
    /**
     * @return {number} The total number of nodes in the tree.
     */
    LLRBNode.prototype.count = function () {
        return this.left.count() + 1 + this.right.count();
    };
    /**
     * @return {boolean} True if the tree is empty.
     */
    LLRBNode.prototype.isEmpty = function () {
        return false;
    };
    /**
     * Traverses the tree in key order and calls the specified action function
     * for each node.
     *
     * @param {function(!K, !V):*} action Callback function to be called for each
     *   node.  If it returns true, traversal is aborted.
     * @return {*} The first truthy value returned by action, or the last falsey
     *   value returned by action
     */
    LLRBNode.prototype.inorderTraversal = function (action) {
        return (this.left.inorderTraversal(action) ||
            action(this.key, this.value) ||
            this.right.inorderTraversal(action));
    };
    /**
     * Traverses the tree in reverse key order and calls the specified action function
     * for each node.
     *
     * @param {function(!Object, !Object)} action Callback function to be called for each
     * node.  If it returns true, traversal is aborted.
     * @return {*} True if traversal was aborted.
     */
    LLRBNode.prototype.reverseTraversal = function (action) {
        return (this.right.reverseTraversal(action) ||
            action(this.key, this.value) ||
            this.left.reverseTraversal(action));
    };
    /**
     * @return {!Object} The minimum node in the tree.
     * @private
     */
    LLRBNode.prototype.min_ = function () {
        if (this.left.isEmpty()) {
            return this;
        }
        else {
            return this.left.min_();
        }
    };
    /**
     * @return {!K} The maximum key in the tree.
     */
    LLRBNode.prototype.minKey = function () {
        return this.min_().key;
    };
    /**
     * @return {!K} The maximum key in the tree.
     */
    LLRBNode.prototype.maxKey = function () {
        if (this.right.isEmpty()) {
            return this.key;
        }
        else {
            return this.right.maxKey();
        }
    };
    /**
     *
     * @param {!Object} key Key to insert.
     * @param {!Object} value Value to insert.
     * @param {Comparator} comparator Comparator.
     * @return {!LLRBNode} New tree, with the key/value added.
     */
    LLRBNode.prototype.insert = function (key, value, comparator) {
        var cmp, n;
        n = this;
        cmp = comparator(key, n.key);
        if (cmp < 0) {
            n = n.copy(null, null, null, n.left.insert(key, value, comparator), null);
        }
        else if (cmp === 0) {
            n = n.copy(null, value, null, null, null);
        }
        else {
            n = n.copy(null, null, null, null, n.right.insert(key, value, comparator));
        }
        return n.fixUp_();
    };
    /**
     * @private
     * @return {!LLRBNode|LLRBEmptyNode} New tree, with the minimum key removed.
     */
    LLRBNode.prototype.removeMin_ = function () {
        if (this.left.isEmpty()) {
            return SortedMap.EMPTY_NODE;
        }
        var n = this;
        if (!n.left.isRed_() && !n.left.left.isRed_())
            n = n.moveRedLeft_();
        n = n.copy(null, null, null, n.left.removeMin_(), null);
        return n.fixUp_();
    };
    /**
     * @param {!Object} key The key of the item to remove.
     * @param {Comparator} comparator Comparator.
     * @return {!LLRBNode|LLRBEmptyNode} New tree, with the specified item removed.
     */
    LLRBNode.prototype.remove = function (key, comparator) {
        var n, smallest;
        n = this;
        if (comparator(key, n.key) < 0) {
            if (!n.left.isEmpty() && !n.left.isRed_() && !n.left.left.isRed_()) {
                n = n.moveRedLeft_();
            }
            n = n.copy(null, null, null, n.left.remove(key, comparator), null);
        }
        else {
            if (n.left.isRed_())
                n = n.rotateRight_();
            if (!n.right.isEmpty() && !n.right.isRed_() && !n.right.left.isRed_()) {
                n = n.moveRedRight_();
            }
            if (comparator(key, n.key) === 0) {
                if (n.right.isEmpty()) {
                    return SortedMap.EMPTY_NODE;
                }
                else {
                    smallest = n.right.min_();
                    n = n.copy(smallest.key, smallest.value, null, null, n.right.removeMin_());
                }
            }
            n = n.copy(null, null, null, null, n.right.remove(key, comparator));
        }
        return n.fixUp_();
    };
    /**
     * @private
     * @return {boolean} Whether this is a RED node.
     */
    LLRBNode.prototype.isRed_ = function () {
        return this.color;
    };
    /**
     * @private
     * @return {!LLRBNode} New tree after performing any needed rotations.
     */
    LLRBNode.prototype.fixUp_ = function () {
        var n = this;
        if (n.right.isRed_() && !n.left.isRed_())
            n = n.rotateLeft_();
        if (n.left.isRed_() && n.left.left.isRed_())
            n = n.rotateRight_();
        if (n.left.isRed_() && n.right.isRed_())
            n = n.colorFlip_();
        return n;
    };
    /**
     * @private
     * @return {!LLRBNode} New tree, after moveRedLeft.
     */
    LLRBNode.prototype.moveRedLeft_ = function () {
        var n = this.colorFlip_();
        if (n.right.left.isRed_()) {
            n = n.copy(null, null, null, null, n.right.rotateRight_());
            n = n.rotateLeft_();
            n = n.colorFlip_();
        }
        return n;
    };
    /**
     * @private
     * @return {!LLRBNode} New tree, after moveRedRight.
     */
    LLRBNode.prototype.moveRedRight_ = function () {
        var n = this.colorFlip_();
        if (n.left.left.isRed_()) {
            n = n.rotateRight_();
            n = n.colorFlip_();
        }
        return n;
    };
    /**
     * @private
     * @return {!LLRBNode} New tree, after rotateLeft.
     */
    LLRBNode.prototype.rotateLeft_ = function () {
        var nl = this.copy(null, null, LLRBNode.RED, null, this.right.left);
        return this.right.copy(null, null, this.color, nl, null);
    };
    /**
     * @private
     * @return {!LLRBNode} New tree, after rotateRight.
     */
    LLRBNode.prototype.rotateRight_ = function () {
        var nr = this.copy(null, null, LLRBNode.RED, this.left.right, null);
        return this.left.copy(null, null, this.color, null, nr);
    };
    /**
     * @private
     * @return {!LLRBNode} New tree, after colorFlip.
     */
    LLRBNode.prototype.colorFlip_ = function () {
        var left = this.left.copy(null, null, !this.left.color, null, null);
        var right = this.right.copy(null, null, !this.right.color, null, null);
        return this.copy(null, null, !this.color, left, right);
    };
    /**
     * For testing.
     *
     * @private
     * @return {boolean} True if all is well.
     */
    LLRBNode.prototype.checkMaxDepth_ = function () {
        var blackDepth = this.check_();
        return Math.pow(2.0, blackDepth) <= this.count() + 1;
    };
    /**
     * @private
     * @return {number} Not sure what this returns exactly. :-).
     */
    LLRBNode.prototype.check_ = function () {
        var blackDepth;
        if (this.isRed_() && this.left.isRed_()) {
            throw new Error('Red node has red child(' + this.key + ',' + this.value + ')');
        }
        if (this.right.isRed_()) {
            throw new Error('Right child of (' + this.key + ',' + this.value + ') is red');
        }
        blackDepth = this.left.check_();
        if (blackDepth !== this.right.check_()) {
            throw new Error('Black depths differ');
        }
        else {
            return blackDepth + (this.isRed_() ? 0 : 1);
        }
    };
    LLRBNode.RED = true;
    LLRBNode.BLACK = false;
    return LLRBNode;
}());
exports.LLRBNode = LLRBNode;
/**
 * Represents an empty node (a leaf node in the Red-Black Tree).
 */
var LLRBEmptyNode = /** @class */ (function () {
    function LLRBEmptyNode() {
    }
    /**
     * Returns a copy of the current node.
     *
     * @return {!LLRBEmptyNode} The node copy.
     */
    LLRBEmptyNode.prototype.copy = function (key, value, color, left, right) {
        return this;
    };
    /**
     * Returns a copy of the tree, with the specified key/value added.
     *
     * @param {!K} key Key to be added.
     * @param {!V} value Value to be added.
     * @param {Comparator} comparator Comparator.
     * @return {!LLRBNode} New tree, with item added.
     */
    LLRBEmptyNode.prototype.insert = function (key, value, comparator) {
        return new LLRBNode(key, value, null);
    };
    /**
     * Returns a copy of the tree, with the specified key removed.
     *
     * @param {!K} key The key to remove.
     * @param {Comparator} comparator Comparator.
     * @return {!LLRBEmptyNode} New tree, with item removed.
     */
    LLRBEmptyNode.prototype.remove = function (key, comparator) {
        return this;
    };
    /**
     * @return {number} The total number of nodes in the tree.
     */
    LLRBEmptyNode.prototype.count = function () {
        return 0;
    };
    /**
     * @return {boolean} True if the tree is empty.
     */
    LLRBEmptyNode.prototype.isEmpty = function () {
        return true;
    };
    /**
     * Traverses the tree in key order and calls the specified action function
     * for each node.
     *
     * @param {function(!K, !V):*} action Callback function to be called for each
     * node.  If it returns true, traversal is aborted.
     * @return {boolean} True if traversal was aborted.
     */
    LLRBEmptyNode.prototype.inorderTraversal = function (action) {
        return false;
    };
    /**
     * Traverses the tree in reverse key order and calls the specified action function
     * for each node.
     *
     * @param {function(!K, !V)} action Callback function to be called for each
     * node.  If it returns true, traversal is aborted.
     * @return {boolean} True if traversal was aborted.
     */
    LLRBEmptyNode.prototype.reverseTraversal = function (action) {
        return false;
    };
    /**
     * @return {null}
     */
    LLRBEmptyNode.prototype.minKey = function () {
        return null;
    };
    /**
     * @return {null}
     */
    LLRBEmptyNode.prototype.maxKey = function () {
        return null;
    };
    /**
     * @private
     * @return {number} Not sure what this returns exactly. :-).
     */
    LLRBEmptyNode.prototype.check_ = function () {
        return 0;
    };
    /**
     * @private
     * @return {boolean} Whether this node is red.
     */
    LLRBEmptyNode.prototype.isRed_ = function () {
        return false;
    };
    return LLRBEmptyNode;
}());
exports.LLRBEmptyNode = LLRBEmptyNode;
/**
 * An immutable sorted map implementation, based on a Left-leaning Red-Black
 * tree.
 */
var SortedMap = /** @class */ (function () {
    /**
     * @template K, V
     * @param {function(K, K):number} comparator_ Key comparator.
     * @param {LLRBNode=} root_ (Optional) Root node for the map.
     */
    function SortedMap(comparator_, root_) {
        if (root_ === void 0) { root_ = SortedMap.EMPTY_NODE; }
        this.comparator_ = comparator_;
        this.root_ = root_;
    }
    /**
     * Returns a copy of the map, with the specified key/value added or replaced.
     * (TODO: We should perhaps rename this method to 'put')
     *
     * @param {!K} key Key to be added.
     * @param {!V} value Value to be added.
     * @return {!SortedMap.<K, V>} New map, with item added.
     */
    SortedMap.prototype.insert = function (key, value) {
        return new SortedMap(this.comparator_, this.root_
            .insert(key, value, this.comparator_)
            .copy(null, null, LLRBNode.BLACK, null, null));
    };
    /**
     * Returns a copy of the map, with the specified key removed.
     *
     * @param {!K} key The key to remove.
     * @return {!SortedMap.<K, V>} New map, with item removed.
     */
    SortedMap.prototype.remove = function (key) {
        return new SortedMap(this.comparator_, this.root_
            .remove(key, this.comparator_)
            .copy(null, null, LLRBNode.BLACK, null, null));
    };
    /**
     * Returns the value of the node with the given key, or null.
     *
     * @param {!K} key The key to look up.
     * @return {?V} The value of the node with the given key, or null if the
     * key doesn't exist.
     */
    SortedMap.prototype.get = function (key) {
        var cmp;
        var node = this.root_;
        while (!node.isEmpty()) {
            cmp = this.comparator_(key, node.key);
            if (cmp === 0) {
                return node.value;
            }
            else if (cmp < 0) {
                node = node.left;
            }
            else if (cmp > 0) {
                node = node.right;
            }
        }
        return null;
    };
    /**
     * Returns the key of the item *before* the specified key, or null if key is the first item.
     * @param {K} key The key to find the predecessor of
     * @return {?K} The predecessor key.
     */
    SortedMap.prototype.getPredecessorKey = function (key) {
        var cmp, node = this.root_, rightParent = null;
        while (!node.isEmpty()) {
            cmp = this.comparator_(key, node.key);
            if (cmp === 0) {
                if (!node.left.isEmpty()) {
                    node = node.left;
                    while (!node.right.isEmpty())
                        node = node.right;
                    return node.key;
                }
                else if (rightParent) {
                    return rightParent.key;
                }
                else {
                    return null; // first item.
                }
            }
            else if (cmp < 0) {
                node = node.left;
            }
            else if (cmp > 0) {
                rightParent = node;
                node = node.right;
            }
        }
        throw new Error('Attempted to find predecessor key for a nonexistent key.  What gives?');
    };
    /**
     * @return {boolean} True if the map is empty.
     */
    SortedMap.prototype.isEmpty = function () {
        return this.root_.isEmpty();
    };
    /**
     * @return {number} The total number of nodes in the map.
     */
    SortedMap.prototype.count = function () {
        return this.root_.count();
    };
    /**
     * @return {?K} The minimum key in the map.
     */
    SortedMap.prototype.minKey = function () {
        return this.root_.minKey();
    };
    /**
     * @return {?K} The maximum key in the map.
     */
    SortedMap.prototype.maxKey = function () {
        return this.root_.maxKey();
    };
    /**
     * Traverses the map in key order and calls the specified action function
     * for each key/value pair.
     *
     * @param {function(!K, !V):*} action Callback function to be called
     * for each key/value pair.  If action returns true, traversal is aborted.
     * @return {*} The first truthy value returned by action, or the last falsey
     *   value returned by action
     */
    SortedMap.prototype.inorderTraversal = function (action) {
        return this.root_.inorderTraversal(action);
    };
    /**
     * Traverses the map in reverse key order and calls the specified action function
     * for each key/value pair.
     *
     * @param {function(!Object, !Object)} action Callback function to be called
     * for each key/value pair.  If action returns true, traversal is aborted.
     * @return {*} True if the traversal was aborted.
     */
    SortedMap.prototype.reverseTraversal = function (action) {
        return this.root_.reverseTraversal(action);
    };
    /**
     * Returns an iterator over the SortedMap.
     * @template T
     * @param {(function(K, V):T)=} resultGenerator
     * @return {SortedMapIterator.<K, V, T>} The iterator.
     */
    SortedMap.prototype.getIterator = function (resultGenerator) {
        return new SortedMapIterator(this.root_, null, this.comparator_, false, resultGenerator);
    };
    SortedMap.prototype.getIteratorFrom = function (key, resultGenerator) {
        return new SortedMapIterator(this.root_, key, this.comparator_, false, resultGenerator);
    };
    SortedMap.prototype.getReverseIteratorFrom = function (key, resultGenerator) {
        return new SortedMapIterator(this.root_, key, this.comparator_, true, resultGenerator);
    };
    SortedMap.prototype.getReverseIterator = function (resultGenerator) {
        return new SortedMapIterator(this.root_, null, this.comparator_, true, resultGenerator);
    };
    /**
     * Always use the same empty node, to reduce memory.
     * @const
     */
    SortedMap.EMPTY_NODE = new LLRBEmptyNode();
    return SortedMap;
}());
exports.SortedMap = SortedMap;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/util/Tree.js":
/*!************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/util/Tree.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var Path_1 = __webpack_require__(/*! ./Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * Node in a Tree.
 */
var TreeNode = /** @class */ (function () {
    function TreeNode() {
        // TODO: Consider making accessors that create children and value lazily or
        // separate Internal / Leaf 'types'.
        this.children = {};
        this.childCount = 0;
        this.value = null;
    }
    return TreeNode;
}());
exports.TreeNode = TreeNode;
/**
 * A light-weight tree, traversable by path.  Nodes can have both values and children.
 * Nodes are not enumerated (by forEachChild) unless they have a value or non-empty
 * children.
 */
var Tree = /** @class */ (function () {
    /**
     * @template T
     * @param {string=} name_ Optional name of the node.
     * @param {Tree=} parent_ Optional parent node.
     * @param {TreeNode=} node_ Optional node to wrap.
     */
    function Tree(name_, parent_, node_) {
        if (name_ === void 0) { name_ = ''; }
        if (parent_ === void 0) { parent_ = null; }
        if (node_ === void 0) { node_ = new TreeNode(); }
        this.name_ = name_;
        this.parent_ = parent_;
        this.node_ = node_;
    }
    /**
     * Returns a sub-Tree for the given path.
     *
     * @param {!(string|Path)} pathObj Path to look up.
     * @return {!Tree.<T>} Tree for path.
     */
    Tree.prototype.subTree = function (pathObj) {
        // TODO: Require pathObj to be Path?
        var path = pathObj instanceof Path_1.Path ? pathObj : new Path_1.Path(pathObj);
        var child = this, next;
        while ((next = path.getFront()) !== null) {
            var childNode = util_2.safeGet(child.node_.children, next) || new TreeNode();
            child = new Tree(next, child, childNode);
            path = path.popFront();
        }
        return child;
    };
    /**
     * Returns the data associated with this tree node.
     *
     * @return {?T} The data or null if no data exists.
     */
    Tree.prototype.getValue = function () {
        return this.node_.value;
    };
    /**
     * Sets data to this tree node.
     *
     * @param {!T} value Value to set.
     */
    Tree.prototype.setValue = function (value) {
        util_1.assert(typeof value !== 'undefined', 'Cannot set value to undefined');
        this.node_.value = value;
        this.updateParents_();
    };
    /**
     * Clears the contents of the tree node (its value and all children).
     */
    Tree.prototype.clear = function () {
        this.node_.value = null;
        this.node_.children = {};
        this.node_.childCount = 0;
        this.updateParents_();
    };
    /**
     * @return {boolean} Whether the tree has any children.
     */
    Tree.prototype.hasChildren = function () {
        return this.node_.childCount > 0;
    };
    /**
     * @return {boolean} Whether the tree is empty (no value or children).
     */
    Tree.prototype.isEmpty = function () {
        return this.getValue() === null && !this.hasChildren();
    };
    /**
     * Calls action for each child of this tree node.
     *
     * @param {function(!Tree.<T>)} action Action to be called for each child.
     */
    Tree.prototype.forEachChild = function (action) {
        var _this = this;
        util_2.forEach(this.node_.children, function (child, childTree) {
            action(new Tree(child, _this, childTree));
        });
    };
    /**
     * Does a depth-first traversal of this node's descendants, calling action for each one.
     *
     * @param {function(!Tree.<T>)} action Action to be called for each child.
     * @param {boolean=} includeSelf Whether to call action on this node as well. Defaults to
     *   false.
     * @param {boolean=} childrenFirst Whether to call action on children before calling it on
     *   parent.
     */
    Tree.prototype.forEachDescendant = function (action, includeSelf, childrenFirst) {
        if (includeSelf && !childrenFirst)
            action(this);
        this.forEachChild(function (child) {
            child.forEachDescendant(action, /*includeSelf=*/ true, childrenFirst);
        });
        if (includeSelf && childrenFirst)
            action(this);
    };
    /**
     * Calls action on each ancestor node.
     *
     * @param {function(!Tree.<T>)} action Action to be called on each parent; return
     *   true to abort.
     * @param {boolean=} includeSelf Whether to call action on this node as well.
     * @return {boolean} true if the action callback returned true.
     */
    Tree.prototype.forEachAncestor = function (action, includeSelf) {
        var node = includeSelf ? this : this.parent();
        while (node !== null) {
            if (action(node)) {
                return true;
            }
            node = node.parent();
        }
        return false;
    };
    /**
     * Does a depth-first traversal of this node's descendants.  When a descendant with a value
     * is found, action is called on it and traversal does not continue inside the node.
     * Action is *not* called on this node.
     *
     * @param {function(!Tree.<T>)} action Action to be called for each child.
     */
    Tree.prototype.forEachImmediateDescendantWithValue = function (action) {
        this.forEachChild(function (child) {
            if (child.getValue() !== null)
                action(child);
            else
                child.forEachImmediateDescendantWithValue(action);
        });
    };
    /**
     * @return {!Path} The path of this tree node, as a Path.
     */
    Tree.prototype.path = function () {
        return new Path_1.Path(this.parent_ === null
            ? this.name_
            : this.parent_.path() + '/' + this.name_);
    };
    /**
     * @return {string} The name of the tree node.
     */
    Tree.prototype.name = function () {
        return this.name_;
    };
    /**
     * @return {?Tree} The parent tree node, or null if this is the root of the tree.
     */
    Tree.prototype.parent = function () {
        return this.parent_;
    };
    /**
     * Adds or removes this child from its parent based on whether it's empty or not.
     *
     * @private
     */
    Tree.prototype.updateParents_ = function () {
        if (this.parent_ !== null)
            this.parent_.updateChild_(this.name_, this);
    };
    /**
     * Adds or removes the passed child to this tree node, depending on whether it's empty.
     *
     * @param {string} childName The name of the child to update.
     * @param {!Tree.<T>} child The child to update.
     * @private
     */
    Tree.prototype.updateChild_ = function (childName, child) {
        var childEmpty = child.isEmpty();
        var childExists = util_2.contains(this.node_.children, childName);
        if (childEmpty && childExists) {
            delete this.node_.children[childName];
            this.node_.childCount--;
            this.updateParents_();
        }
        else if (!childEmpty && !childExists) {
            this.node_.children[childName] = child.node_;
            this.node_.childCount++;
            this.updateParents_();
        }
    };
    return Tree;
}());
exports.Tree = Tree;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/util/VisibilityMonitor.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/util/VisibilityMonitor.js ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var EventEmitter_1 = __webpack_require__(/*! ./EventEmitter */ "./node_modules/@firebase/database/dist/cjs/src/core/util/EventEmitter.js");
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * @extends {EventEmitter}
 */
var VisibilityMonitor = /** @class */ (function (_super) {
    __extends(VisibilityMonitor, _super);
    function VisibilityMonitor() {
        var _this = _super.call(this, ['visible']) || this;
        var hidden;
        var visibilityChange;
        if (typeof document !== 'undefined' &&
            typeof document.addEventListener !== 'undefined') {
            if (typeof document['hidden'] !== 'undefined') {
                // Opera 12.10 and Firefox 18 and later support
                visibilityChange = 'visibilitychange';
                hidden = 'hidden';
            }
            else if (typeof document['mozHidden'] !== 'undefined') {
                visibilityChange = 'mozvisibilitychange';
                hidden = 'mozHidden';
            }
            else if (typeof document['msHidden'] !== 'undefined') {
                visibilityChange = 'msvisibilitychange';
                hidden = 'msHidden';
            }
            else if (typeof document['webkitHidden'] !== 'undefined') {
                visibilityChange = 'webkitvisibilitychange';
                hidden = 'webkitHidden';
            }
        }
        // Initially, we always assume we are visible. This ensures that in browsers
        // without page visibility support or in cases where we are never visible
        // (e.g. chrome extension), we act as if we are visible, i.e. don't delay
        // reconnects
        _this.visible_ = true;
        if (visibilityChange) {
            document.addEventListener(visibilityChange, function () {
                var visible = !document[hidden];
                if (visible !== _this.visible_) {
                    _this.visible_ = visible;
                    _this.trigger('visible', visible);
                }
            }, false);
        }
        return _this;
    }
    VisibilityMonitor.getInstance = function () {
        return new VisibilityMonitor();
    };
    /**
     * @param {!string} eventType
     * @return {Array.<boolean>}
     */
    VisibilityMonitor.prototype.getInitialEvent = function (eventType) {
        util_1.assert(eventType === 'visible', 'Unknown event type: ' + eventType);
        return [this.visible_];
    };
    return VisibilityMonitor;
}(EventEmitter_1.EventEmitter));
exports.VisibilityMonitor = VisibilityMonitor;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/util/libs/parser.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/util/libs/parser.js ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var Path_1 = __webpack_require__(/*! ../Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var RepoInfo_1 = __webpack_require__(/*! ../../RepoInfo */ "./node_modules/@firebase/database/dist/cjs/src/core/RepoInfo.js");
var util_1 = __webpack_require__(/*! ../util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
/**
 * @param {!string} pathString
 * @return {string}
 */
function decodePath(pathString) {
    var pathStringDecoded = '';
    var pieces = pathString.split('/');
    for (var i = 0; i < pieces.length; i++) {
        if (pieces[i].length > 0) {
            var piece = pieces[i];
            try {
                piece = decodeURIComponent(piece.replace(/\+/g, ' '));
            }
            catch (e) { }
            pathStringDecoded += '/' + piece;
        }
    }
    return pathStringDecoded;
}
/**
 *
 * @param {!string} dataURL
 * @return {{repoInfo: !RepoInfo, path: !Path}}
 */
exports.parseRepoInfo = function (dataURL) {
    var parsedUrl = exports.parseURL(dataURL), namespace = parsedUrl.subdomain;
    if (parsedUrl.domain === 'firebase') {
        util_1.fatal(parsedUrl.host +
            ' is no longer supported. ' +
            'Please use <YOUR FIREBASE>.firebaseio.com instead');
    }
    // Catch common error of uninitialized namespace value.
    if (!namespace || namespace == 'undefined') {
        util_1.fatal('Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com');
    }
    if (!parsedUrl.secure) {
        util_1.warnIfPageIsSecure();
    }
    var webSocketOnly = parsedUrl.scheme === 'ws' || parsedUrl.scheme === 'wss';
    return {
        repoInfo: new RepoInfo_1.RepoInfo(parsedUrl.host, parsedUrl.secure, namespace, webSocketOnly),
        path: new Path_1.Path(parsedUrl.pathString)
    };
};
/**
 *
 * @param {!string} dataURL
 * @return {{host: string, port: number, domain: string, subdomain: string, secure: boolean, scheme: string, pathString: string}}
 */
exports.parseURL = function (dataURL) {
    // Default to empty strings in the event of a malformed string.
    var host = '', domain = '', subdomain = '', pathString = '';
    // Always default to SSL, unless otherwise specified.
    var secure = true, scheme = 'https', port = 443;
    // Don't do any validation here. The caller is responsible for validating the result of parsing.
    if (typeof dataURL === 'string') {
        // Parse scheme.
        var colonInd = dataURL.indexOf('//');
        if (colonInd >= 0) {
            scheme = dataURL.substring(0, colonInd - 1);
            dataURL = dataURL.substring(colonInd + 2);
        }
        // Parse host and path.
        var slashInd = dataURL.indexOf('/');
        if (slashInd === -1) {
            slashInd = dataURL.length;
        }
        host = dataURL.substring(0, slashInd);
        pathString = decodePath(dataURL.substring(slashInd));
        var parts = host.split('.');
        if (parts.length === 3) {
            // Normalize namespaces to lowercase to share storage / connection.
            domain = parts[1];
            subdomain = parts[0].toLowerCase();
        }
        else if (parts.length === 2) {
            domain = parts[0];
        }
        // If we have a port, use scheme for determining if it's secure.
        colonInd = host.indexOf(':');
        if (colonInd >= 0) {
            secure = scheme === 'https' || scheme === 'wss';
            port = parseInt(host.substring(colonInd + 1), 10);
        }
    }
    return {
        host: host,
        port: port,
        domain: domain,
        subdomain: subdomain,
        secure: secure,
        scheme: scheme,
        pathString: pathString
    };
};



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js":
/*!************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/util/util.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_3 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_4 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_5 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_6 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var storage_1 = __webpack_require__(/*! ../storage/storage */ "./node_modules/@firebase/database/dist/cjs/src/core/storage/storage.js");
var util_7 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * Returns a locally-unique ID (generated by just incrementing up from 0 each time its called).
 * @type {function(): number} Generated ID.
 */
exports.LUIDGenerator = (function () {
    var id = 1;
    return function () {
        return id++;
    };
})();
/**
 * Sha1 hash of the input string
 * @param {!string} str The string to hash
 * @return {!string} The resulting hash
 */
exports.sha1 = function (str) {
    var utf8Bytes = util_5.stringToByteArray(str);
    var sha1 = new util_4.Sha1();
    sha1.update(utf8Bytes);
    var sha1Bytes = sha1.digest();
    return util_3.base64.encodeByteArray(sha1Bytes);
};
/**
 * @param {...*} var_args
 * @return {string}
 * @private
 */
var buildLogMessage_ = function () {
    var var_args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        var_args[_i] = arguments[_i];
    }
    var message = '';
    for (var i = 0; i < var_args.length; i++) {
        if (Array.isArray(var_args[i]) ||
            (var_args[i] &&
                typeof var_args[i] === 'object' &&
                typeof var_args[i].length === 'number')) {
            message += buildLogMessage_.apply(null, var_args[i]);
        }
        else if (typeof var_args[i] === 'object') {
            message += util_6.stringify(var_args[i]);
        }
        else {
            message += var_args[i];
        }
        message += ' ';
    }
    return message;
};
/**
 * Use this for all debug messages in Firebase.
 * @type {?function(string)}
 */
exports.logger = null;
/**
 * Flag to check for log availability on first log message
 * @type {boolean}
 * @private
 */
var firstLog_ = true;
/**
 * The implementation of Firebase.enableLogging (defined here to break dependencies)
 * @param {boolean|?function(string)} logger_ A flag to turn on logging, or a custom logger
 * @param {boolean=} persistent Whether or not to persist logging settings across refreshes
 */
exports.enableLogging = function (logger_, persistent) {
    util_1.assert(!persistent || (logger_ === true || logger_ === false), "Can't turn on custom loggers persistently.");
    if (logger_ === true) {
        if (typeof console !== 'undefined') {
            if (typeof console.log === 'function') {
                exports.logger = console.log.bind(console);
            }
            else if (typeof console.log === 'object') {
                // IE does this.
                exports.logger = function (message) {
                    console.log(message);
                };
            }
        }
        if (persistent)
            storage_1.SessionStorage.set('logging_enabled', true);
    }
    else if (typeof logger_ === 'function') {
        exports.logger = logger_;
    }
    else {
        exports.logger = null;
        storage_1.SessionStorage.remove('logging_enabled');
    }
};
/**
 *
 * @param {...(string|Arguments)} var_args
 */
exports.log = function () {
    var var_args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        var_args[_i] = arguments[_i];
    }
    if (firstLog_ === true) {
        firstLog_ = false;
        if (exports.logger === null && storage_1.SessionStorage.get('logging_enabled') === true)
            exports.enableLogging(true);
    }
    if (exports.logger) {
        var message = buildLogMessage_.apply(null, var_args);
        exports.logger(message);
    }
};
/**
 * @param {!string} prefix
 * @return {function(...[*])}
 */
exports.logWrapper = function (prefix) {
    return function () {
        var var_args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            var_args[_i] = arguments[_i];
        }
        exports.log.apply(void 0, [prefix].concat(var_args));
    };
};
/**
 * @param {...string} var_args
 */
exports.error = function () {
    var var_args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        var_args[_i] = arguments[_i];
    }
    if (typeof console !== 'undefined') {
        var message = 'FIREBASE INTERNAL ERROR: ' + buildLogMessage_.apply(void 0, var_args);
        if (typeof console.error !== 'undefined') {
            console.error(message);
        }
        else {
            console.log(message);
        }
    }
};
/**
 * @param {...string} var_args
 */
exports.fatal = function () {
    var var_args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        var_args[_i] = arguments[_i];
    }
    var message = buildLogMessage_.apply(void 0, var_args);
    throw new Error('FIREBASE FATAL ERROR: ' + message);
};
/**
 * @param {...*} var_args
 */
exports.warn = function () {
    var var_args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        var_args[_i] = arguments[_i];
    }
    if (typeof console !== 'undefined') {
        var message = 'FIREBASE WARNING: ' + buildLogMessage_.apply(void 0, var_args);
        if (typeof console.warn !== 'undefined') {
            console.warn(message);
        }
        else {
            console.log(message);
        }
    }
};
/**
 * Logs a warning if the containing page uses https. Called when a call to new Firebase
 * does not use https.
 */
exports.warnIfPageIsSecure = function () {
    // Be very careful accessing browser globals. Who knows what may or may not exist.
    if (typeof window !== 'undefined' &&
        window.location &&
        window.location.protocol &&
        window.location.protocol.indexOf('https:') !== -1) {
        exports.warn('Insecure Firebase access from a secure page. ' +
            'Please use https in calls to new Firebase().');
    }
};
/**
 * @param {!String} methodName
 */
exports.warnAboutUnsupportedMethod = function (methodName) {
    exports.warn(methodName +
        ' is unsupported and will likely change soon.  ' +
        'Please do not use.');
};
/**
 * Returns true if data is NaN, or +/- Infinity.
 * @param {*} data
 * @return {boolean}
 */
exports.isInvalidJSONNumber = function (data) {
    return (typeof data === 'number' &&
        (data != data || // NaN
            data == Number.POSITIVE_INFINITY ||
            data == Number.NEGATIVE_INFINITY));
};
/**
 * @param {function()} fn
 */
exports.executeWhenDOMReady = function (fn) {
    if (util_7.isNodeSdk() || document.readyState === 'complete') {
        fn();
    }
    else {
        // Modeled after jQuery. Try DOMContentLoaded and onreadystatechange (which
        // fire before onload), but fall back to onload.
        var called_1 = false;
        var wrappedFn_1 = function () {
            if (!document.body) {
                setTimeout(wrappedFn_1, Math.floor(10));
                return;
            }
            if (!called_1) {
                called_1 = true;
                fn();
            }
        };
        if (document.addEventListener) {
            document.addEventListener('DOMContentLoaded', wrappedFn_1, false);
            // fallback to onload.
            window.addEventListener('load', wrappedFn_1, false);
        }
        else if (document.attachEvent) {
            // IE.
            document.attachEvent('onreadystatechange', function () {
                if (document.readyState === 'complete')
                    wrappedFn_1();
            });
            // fallback to onload.
            window.attachEvent('onload', wrappedFn_1);
            // jQuery has an extra hack for IE that we could employ (based on
            // http://javascript.nwbox.com/IEContentLoaded/) But it looks really old.
            // I'm hoping we don't need it.
        }
    }
};
/**
 * Minimum key name. Invalid for actual data, used as a marker to sort before any valid names
 * @type {!string}
 */
exports.MIN_NAME = '[MIN_NAME]';
/**
 * Maximum key name. Invalid for actual data, used as a marker to sort above any valid names
 * @type {!string}
 */
exports.MAX_NAME = '[MAX_NAME]';
/**
 * Compares valid Firebase key names, plus min and max name
 * @param {!string} a
 * @param {!string} b
 * @return {!number}
 */
exports.nameCompare = function (a, b) {
    if (a === b) {
        return 0;
    }
    else if (a === exports.MIN_NAME || b === exports.MAX_NAME) {
        return -1;
    }
    else if (b === exports.MIN_NAME || a === exports.MAX_NAME) {
        return 1;
    }
    else {
        var aAsInt = exports.tryParseInt(a), bAsInt = exports.tryParseInt(b);
        if (aAsInt !== null) {
            if (bAsInt !== null) {
                return aAsInt - bAsInt == 0 ? a.length - b.length : aAsInt - bAsInt;
            }
            else {
                return -1;
            }
        }
        else if (bAsInt !== null) {
            return 1;
        }
        else {
            return a < b ? -1 : 1;
        }
    }
};
/**
 * @param {!string} a
 * @param {!string} b
 * @return {!number} comparison result.
 */
exports.stringCompare = function (a, b) {
    if (a === b) {
        return 0;
    }
    else if (a < b) {
        return -1;
    }
    else {
        return 1;
    }
};
/**
 * @param {string} key
 * @param {Object} obj
 * @return {*}
 */
exports.requireKey = function (key, obj) {
    if (obj && key in obj) {
        return obj[key];
    }
    else {
        throw new Error('Missing required key (' + key + ') in object: ' + util_6.stringify(obj));
    }
};
/**
 * @param {*} obj
 * @return {string}
 */
exports.ObjectToUniqueKey = function (obj) {
    if (typeof obj !== 'object' || obj === null)
        return util_6.stringify(obj);
    var keys = [];
    for (var k in obj) {
        keys.push(k);
    }
    // Export as json, but with the keys sorted.
    keys.sort();
    var key = '{';
    for (var i = 0; i < keys.length; i++) {
        if (i !== 0)
            key += ',';
        key += util_6.stringify(keys[i]);
        key += ':';
        key += exports.ObjectToUniqueKey(obj[keys[i]]);
    }
    key += '}';
    return key;
};
/**
 * Splits a string into a number of smaller segments of maximum size
 * @param {!string} str The string
 * @param {!number} segsize The maximum number of chars in the string.
 * @return {Array.<string>} The string, split into appropriately-sized chunks
 */
exports.splitStringBySize = function (str, segsize) {
    var len = str.length;
    if (len <= segsize) {
        return [str];
    }
    var dataSegs = [];
    for (var c = 0; c < len; c += segsize) {
        if (c + segsize > len) {
            dataSegs.push(str.substring(c, len));
        }
        else {
            dataSegs.push(str.substring(c, c + segsize));
        }
    }
    return dataSegs;
};
/**
 * Apply a function to each (key, value) pair in an object or
 * apply a function to each (index, value) pair in an array
 * @param {!(Object|Array)} obj The object or array to iterate over
 * @param {function(?, ?)} fn The function to apply
 */
exports.each = function (obj, fn) {
    if (Array.isArray(obj)) {
        for (var i = 0; i < obj.length; ++i) {
            fn(i, obj[i]);
        }
    }
    else {
        /**
         * in the conversion of code we removed the goog.object.forEach
         * function which did a value,key callback. We standardized on
         * a single impl that does a key, value callback. So we invert
         * to not have to touch the `each` code points
         */
        util_2.forEach(obj, function (key, val) { return fn(val, key); });
    }
};
/**
 * Like goog.bind, but doesn't bother to create a closure if opt_context is null/undefined.
 * @param {function(*)} callback Callback function.
 * @param {?Object=} context Optional context to bind to.
 * @return {function(*)}
 */
exports.bindCallback = function (callback, context) {
    return context ? callback.bind(context) : callback;
};
/**
 * Borrowed from http://hg.secondlife.com/llsd/src/tip/js/typedarray.js (MIT License)
 * I made one modification at the end and removed the NaN / Infinity
 * handling (since it seemed broken [caused an overflow] and we don't need it).  See MJL comments.
 * @param {!number} v A double
 * @return {string}
 */
exports.doubleToIEEE754String = function (v) {
    util_1.assert(!exports.isInvalidJSONNumber(v), 'Invalid JSON number'); // MJL
    var ebits = 11, fbits = 52;
    var bias = (1 << (ebits - 1)) - 1, s, e, f, ln, i, bits, str;
    // Compute sign, exponent, fraction
    // Skip NaN / Infinity handling --MJL.
    if (v === 0) {
        e = 0;
        f = 0;
        s = 1 / v === -Infinity ? 1 : 0;
    }
    else {
        s = v < 0;
        v = Math.abs(v);
        if (v >= Math.pow(2, 1 - bias)) {
            // Normalized
            ln = Math.min(Math.floor(Math.log(v) / Math.LN2), bias);
            e = ln + bias;
            f = Math.round(v * Math.pow(2, fbits - ln) - Math.pow(2, fbits));
        }
        else {
            // Denormalized
            e = 0;
            f = Math.round(v / Math.pow(2, 1 - bias - fbits));
        }
    }
    // Pack sign, exponent, fraction
    bits = [];
    for (i = fbits; i; i -= 1) {
        bits.push(f % 2 ? 1 : 0);
        f = Math.floor(f / 2);
    }
    for (i = ebits; i; i -= 1) {
        bits.push(e % 2 ? 1 : 0);
        e = Math.floor(e / 2);
    }
    bits.push(s ? 1 : 0);
    bits.reverse();
    str = bits.join('');
    // Return the data as a hex string. --MJL
    var hexByteString = '';
    for (i = 0; i < 64; i += 8) {
        var hexByte = parseInt(str.substr(i, 8), 2).toString(16);
        if (hexByte.length === 1)
            hexByte = '0' + hexByte;
        hexByteString = hexByteString + hexByte;
    }
    return hexByteString.toLowerCase();
};
/**
 * Used to detect if we're in a Chrome content script (which executes in an
 * isolated environment where long-polling doesn't work).
 * @return {boolean}
 */
exports.isChromeExtensionContentScript = function () {
    return !!(typeof window === 'object' &&
        window['chrome'] &&
        window['chrome']['extension'] &&
        !/^chrome/.test(window.location.href));
};
/**
 * Used to detect if we're in a Windows 8 Store app.
 * @return {boolean}
 */
exports.isWindowsStoreApp = function () {
    // Check for the presence of a couple WinRT globals
    return typeof Windows === 'object' && typeof Windows.UI === 'object';
};
/**
 * Converts a server error code to a Javascript Error
 * @param {!string} code
 * @param {!Query} query
 * @return {Error}
 */
exports.errorForServerCode = function (code, query) {
    var reason = 'Unknown Error';
    if (code === 'too_big') {
        reason =
            'The data requested exceeds the maximum size ' +
                'that can be accessed with a single request.';
    }
    else if (code == 'permission_denied') {
        reason = "Client doesn't have permission to access the desired data.";
    }
    else if (code == 'unavailable') {
        reason = 'The service is unavailable';
    }
    var error = new Error(code + ' at ' + query.path.toString() + ': ' + reason);
    error.code = code.toUpperCase();
    return error;
};
/**
 * Used to test for integer-looking strings
 * @type {RegExp}
 * @private
 */
exports.INTEGER_REGEXP_ = new RegExp('^-?\\d{1,10}$');
/**
 * If the string contains a 32-bit integer, return it.  Else return null.
 * @param {!string} str
 * @return {?number}
 */
exports.tryParseInt = function (str) {
    if (exports.INTEGER_REGEXP_.test(str)) {
        var intVal = Number(str);
        if (intVal >= -2147483648 && intVal <= 2147483647) {
            return intVal;
        }
    }
    return null;
};
/**
 * Helper to run some code but catch any exceptions and re-throw them later.
 * Useful for preventing user callbacks from breaking internal code.
 *
 * Re-throwing the exception from a setTimeout is a little evil, but it's very
 * convenient (we don't have to try to figure out when is a safe point to
 * re-throw it), and the behavior seems reasonable:
 *
 * * If you aren't pausing on exceptions, you get an error in the console with
 *   the correct stack trace.
 * * If you're pausing on all exceptions, the debugger will pause on your
 *   exception and then again when we rethrow it.
 * * If you're only pausing on uncaught exceptions, the debugger will only pause
 *   on us re-throwing it.
 *
 * @param {!function()} fn The code to guard.
 */
exports.exceptionGuard = function (fn) {
    try {
        fn();
    }
    catch (e) {
        // Re-throw exception when it's safe.
        setTimeout(function () {
            // It used to be that "throw e" would result in a good console error with
            // relevant context, but as of Chrome 39, you just get the firebase.js
            // file/line number where we re-throw it, which is useless. So we log
            // e.stack explicitly.
            var stack = e.stack || '';
            exports.warn('Exception was thrown by user callback.', stack);
            throw e;
        }, Math.floor(0));
    }
};
/**
 * Helper function to safely call opt_callback with the specified arguments.  It:
 * 1. Turns into a no-op if opt_callback is null or undefined.
 * 2. Wraps the call inside exceptionGuard to prevent exceptions from breaking our state.
 *
 * @param {?Function=} callback Optional onComplete callback.
 * @param {...*} var_args Arbitrary args to be passed to opt_onComplete
 */
exports.callUserCallback = function (callback) {
    var var_args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        var_args[_i - 1] = arguments[_i];
    }
    if (typeof callback === 'function') {
        exports.exceptionGuard(function () {
            callback.apply(void 0, var_args);
        });
    }
};
/**
 * @return {boolean} true if we think we're currently being crawled.
 */
exports.beingCrawled = function () {
    var userAgent = (typeof window === 'object' &&
        window['navigator'] &&
        window['navigator']['userAgent']) ||
        '';
    // For now we whitelist the most popular crawlers.  We should refine this to be the set of crawlers we
    // believe to support JavaScript/AJAX rendering.
    // NOTE: Google Webmaster Tools doesn't really belong, but their "This is how a visitor to your website
    // would have seen the page" is flaky if we don't treat it as a crawler.
    return (userAgent.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i) >= 0);
};
/**
 * Export a property of an object using a getter function.
 *
 * @param {!Object} object
 * @param {string} name
 * @param {!function(): *} fnGet
 */
exports.exportPropGetter = function (object, name, fnGet) {
    Object.defineProperty(object, name, { get: fnGet });
};
/**
 * Same as setTimeout() except on Node.JS it will /not/ prevent the process from exiting.
 *
 * It is removed with clearTimeout() as normal.
 *
 * @param {Function} fn Function to run.
 * @param {number} time Milliseconds to wait before running.
 * @return {number|Object} The setTimeout() return value.
 */
exports.setTimeoutNonBlocking = function (fn, time) {
    var timeout = setTimeout(fn, time);
    if (typeof timeout === 'object' && timeout['unref']) {
        timeout['unref']();
    }
    return timeout;
};



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/util/validation.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/util/validation.js ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var Path_1 = __webpack_require__(/*! ./Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! ./util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var util_3 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_4 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * True for invalid Firebase keys
 * @type {RegExp}
 * @private
 */
exports.INVALID_KEY_REGEX_ = /[\[\].#$\/\u0000-\u001F\u007F]/;
/**
 * True for invalid Firebase paths.
 * Allows '/' in paths.
 * @type {RegExp}
 * @private
 */
exports.INVALID_PATH_REGEX_ = /[\[\].#$\u0000-\u001F\u007F]/;
/**
 * Maximum number of characters to allow in leaf value
 * @type {number}
 * @private
 */
exports.MAX_LEAF_SIZE_ = 10 * 1024 * 1024;
/**
 * @param {*} key
 * @return {boolean}
 */
exports.isValidKey = function (key) {
    return (typeof key === 'string' && key.length !== 0 && !exports.INVALID_KEY_REGEX_.test(key));
};
/**
 * @param {string} pathString
 * @return {boolean}
 */
exports.isValidPathString = function (pathString) {
    return (typeof pathString === 'string' &&
        pathString.length !== 0 &&
        !exports.INVALID_PATH_REGEX_.test(pathString));
};
/**
 * @param {string} pathString
 * @return {boolean}
 */
exports.isValidRootPathString = function (pathString) {
    if (pathString) {
        // Allow '/.info/' at the beginning.
        pathString = pathString.replace(/^\/*\.info(\/|$)/, '/');
    }
    return exports.isValidPathString(pathString);
};
/**
 * @param {*} priority
 * @return {boolean}
 */
exports.isValidPriority = function (priority) {
    return (priority === null ||
        typeof priority === 'string' ||
        (typeof priority === 'number' && !util_2.isInvalidJSONNumber(priority)) ||
        (priority && typeof priority === 'object' && util_1.contains(priority, '.sv')));
};
/**
 * Pre-validate a datum passed as an argument to Firebase function.
 *
 * @param {string} fnName
 * @param {number} argumentNumber
 * @param {*} data
 * @param {!Path} path
 * @param {boolean} optional
 */
exports.validateFirebaseDataArg = function (fnName, argumentNumber, data, path, optional) {
    if (optional && data === undefined)
        return;
    exports.validateFirebaseData(util_3.errorPrefix(fnName, argumentNumber, optional), data, path);
};
/**
 * Validate a data object client-side before sending to server.
 *
 * @param {string} errorPrefix
 * @param {*} data
 * @param {!Path|!ValidationPath} path_
 */
exports.validateFirebaseData = function (errorPrefix, data, path_) {
    var path = path_ instanceof Path_1.Path ? new Path_1.ValidationPath(path_, errorPrefix) : path_;
    if (data === undefined) {
        throw new Error(errorPrefix + 'contains undefined ' + path.toErrorString());
    }
    if (typeof data === 'function') {
        throw new Error(errorPrefix +
            'contains a function ' +
            path.toErrorString() +
            ' with contents = ' +
            data.toString());
    }
    if (util_2.isInvalidJSONNumber(data)) {
        throw new Error(errorPrefix + 'contains ' + data.toString() + ' ' + path.toErrorString());
    }
    // Check max leaf size, but try to avoid the utf8 conversion if we can.
    if (typeof data === 'string' &&
        data.length > exports.MAX_LEAF_SIZE_ / 3 &&
        util_4.stringLength(data) > exports.MAX_LEAF_SIZE_) {
        throw new Error(errorPrefix +
            'contains a string greater than ' +
            exports.MAX_LEAF_SIZE_ +
            ' utf8 bytes ' +
            path.toErrorString() +
            " ('" +
            data.substring(0, 50) +
            "...')");
    }
    // TODO = Perf = Consider combining the recursive validation of keys into NodeFromJSON
    // to save extra walking of large objects.
    if (data && typeof data === 'object') {
        var hasDotValue_1 = false, hasActualChild_1 = false;
        util_1.forEach(data, function (key, value) {
            if (key === '.value') {
                hasDotValue_1 = true;
            }
            else if (key !== '.priority' && key !== '.sv') {
                hasActualChild_1 = true;
                if (!exports.isValidKey(key)) {
                    throw new Error(errorPrefix +
                        ' contains an invalid key (' +
                        key +
                        ') ' +
                        path.toErrorString() +
                        '.  Keys must be non-empty strings ' +
                        'and can\'t contain ".", "#", "$", "/", "[", or "]"');
                }
            }
            path.push(key);
            exports.validateFirebaseData(errorPrefix, value, path);
            path.pop();
        });
        if (hasDotValue_1 && hasActualChild_1) {
            throw new Error(errorPrefix +
                ' contains ".value" child ' +
                path.toErrorString() +
                ' in addition to actual children.');
        }
    }
};
/**
 * Pre-validate paths passed in the firebase function.
 *
 * @param {string} errorPrefix
 * @param {Array<!Path>} mergePaths
 */
exports.validateFirebaseMergePaths = function (errorPrefix, mergePaths) {
    var i, curPath;
    for (i = 0; i < mergePaths.length; i++) {
        curPath = mergePaths[i];
        var keys = curPath.slice();
        for (var j = 0; j < keys.length; j++) {
            if (keys[j] === '.priority' && j === keys.length - 1) {
                // .priority is OK
            }
            else if (!exports.isValidKey(keys[j])) {
                throw new Error(errorPrefix +
                    'contains an invalid key (' +
                    keys[j] +
                    ') in path ' +
                    curPath.toString() +
                    '. Keys must be non-empty strings ' +
                    'and can\'t contain ".", "#", "$", "/", "[", or "]"');
            }
        }
    }
    // Check that update keys are not descendants of each other.
    // We rely on the property that sorting guarantees that ancestors come
    // right before descendants.
    mergePaths.sort(Path_1.Path.comparePaths);
    var prevPath = null;
    for (i = 0; i < mergePaths.length; i++) {
        curPath = mergePaths[i];
        if (prevPath !== null && prevPath.contains(curPath)) {
            throw new Error(errorPrefix +
                'contains a path ' +
                prevPath.toString() +
                ' that is ancestor of another path ' +
                curPath.toString());
        }
        prevPath = curPath;
    }
};
/**
 * pre-validate an object passed as an argument to firebase function (
 * must be an object - e.g. for firebase.update()).
 *
 * @param {string} fnName
 * @param {number} argumentNumber
 * @param {*} data
 * @param {!Path} path
 * @param {boolean} optional
 */
exports.validateFirebaseMergeDataArg = function (fnName, argumentNumber, data, path, optional) {
    if (optional && data === undefined)
        return;
    var errorPrefix = util_3.errorPrefix(fnName, argumentNumber, optional);
    if (!(data && typeof data === 'object') || Array.isArray(data)) {
        throw new Error(errorPrefix + ' must be an object containing the children to replace.');
    }
    var mergePaths = [];
    util_1.forEach(data, function (key, value) {
        var curPath = new Path_1.Path(key);
        exports.validateFirebaseData(errorPrefix, value, path.child(curPath));
        if (curPath.getBack() === '.priority') {
            if (!exports.isValidPriority(value)) {
                throw new Error(errorPrefix +
                    "contains an invalid value for '" +
                    curPath.toString() +
                    "', which must be a valid " +
                    'Firebase priority (a string, finite number, server value, or null).');
            }
        }
        mergePaths.push(curPath);
    });
    exports.validateFirebaseMergePaths(errorPrefix, mergePaths);
};
exports.validatePriority = function (fnName, argumentNumber, priority, optional) {
    if (optional && priority === undefined)
        return;
    if (util_2.isInvalidJSONNumber(priority))
        throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +
            'is ' +
            priority.toString() +
            ', but must be a valid Firebase priority (a string, finite number, ' +
            'server value, or null).');
    // Special case to allow importing data with a .sv.
    if (!exports.isValidPriority(priority))
        throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +
            'must be a valid Firebase priority ' +
            '(a string, finite number, server value, or null).');
};
exports.validateEventType = function (fnName, argumentNumber, eventType, optional) {
    if (optional && eventType === undefined)
        return;
    switch (eventType) {
        case 'value':
        case 'child_added':
        case 'child_removed':
        case 'child_changed':
        case 'child_moved':
            break;
        default:
            throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +
                'must be a valid event type = "value", "child_added", "child_removed", ' +
                '"child_changed", or "child_moved".');
    }
};
exports.validateKey = function (fnName, argumentNumber, key, optional) {
    if (optional && key === undefined)
        return;
    if (!exports.isValidKey(key))
        throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +
            'was an invalid key = "' +
            key +
            '".  Firebase keys must be non-empty strings and ' +
            'can\'t contain ".", "#", "$", "/", "[", or "]").');
};
exports.validatePathString = function (fnName, argumentNumber, pathString, optional) {
    if (optional && pathString === undefined)
        return;
    if (!exports.isValidPathString(pathString))
        throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +
            'was an invalid path = "' +
            pathString +
            '". Paths must be non-empty strings and ' +
            'can\'t contain ".", "#", "$", "[", or "]"');
};
exports.validateRootPathString = function (fnName, argumentNumber, pathString, optional) {
    if (pathString) {
        // Allow '/.info/' at the beginning.
        pathString = pathString.replace(/^\/*\.info(\/|$)/, '/');
    }
    exports.validatePathString(fnName, argumentNumber, pathString, optional);
};
exports.validateWritablePath = function (fnName, path) {
    if (path.getFront() === '.info') {
        throw new Error(fnName + " failed = Can't modify data under /.info/");
    }
};
exports.validateUrl = function (fnName, argumentNumber, parsedUrl) {
    // TODO = Validate server better.
    var pathString = parsedUrl.path.toString();
    if (!(typeof parsedUrl.repoInfo.host === 'string') ||
        parsedUrl.repoInfo.host.length === 0 ||
        !exports.isValidKey(parsedUrl.repoInfo.namespace) ||
        (pathString.length !== 0 && !exports.isValidRootPathString(pathString))) {
        throw new Error(util_3.errorPrefix(fnName, argumentNumber, false) +
            'must be a valid firebase URL and ' +
            'the path can\'t contain ".", "#", "$", "[", or "]".');
    }
};
exports.validateCredential = function (fnName, argumentNumber, cred, optional) {
    if (optional && cred === undefined)
        return;
    if (!(typeof cred === 'string'))
        throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +
            'must be a valid credential (a string).');
};
exports.validateBoolean = function (fnName, argumentNumber, bool, optional) {
    if (optional && bool === undefined)
        return;
    if (typeof bool !== 'boolean')
        throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) + 'must be a boolean.');
};
exports.validateString = function (fnName, argumentNumber, string, optional) {
    if (optional && string === undefined)
        return;
    if (!(typeof string === 'string')) {
        throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +
            'must be a valid string.');
    }
};
exports.validateObject = function (fnName, argumentNumber, obj, optional) {
    if (optional && obj === undefined)
        return;
    if (!(obj && typeof obj === 'object') || obj === null) {
        throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +
            'must be a valid object.');
    }
};
exports.validateObjectContainsKey = function (fnName, argumentNumber, obj, key, optional, opt_type) {
    var objectContainsKey = obj && typeof obj === 'object' && util_1.contains(obj, key);
    if (!objectContainsKey) {
        if (optional) {
            return;
        }
        else {
            throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +
                'must contain the key "' +
                key +
                '"');
        }
    }
    if (opt_type) {
        var val = util_1.safeGet(obj, key);
        if ((opt_type === 'number' && !(typeof val === 'number')) ||
            (opt_type === 'string' && !(typeof val === 'string')) ||
            (opt_type === 'boolean' && !(typeof val === 'boolean')) ||
            (opt_type === 'function' && !(typeof val === 'function')) ||
            (opt_type === 'object' && !(typeof val === 'object') && val)) {
            if (optional) {
                throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +
                    'contains invalid value for key "' +
                    key +
                    '" (must be of type "' +
                    opt_type +
                    '")');
            }
            else {
                throw new Error(util_3.errorPrefix(fnName, argumentNumber, optional) +
                    'must contain the key "' +
                    key +
                    '" with type "' +
                    opt_type +
                    '"');
            }
        }
    }
};



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/view/CacheNode.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/view/CacheNode.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * A cache node only stores complete children. Additionally it holds a flag whether the node can be considered fully
 * initialized in the sense that we know at one point in time this represented a valid state of the world, e.g.
 * initialized with data from the server, or a complete overwrite by the client. The filtered flag also tracks
 * whether a node potentially had children removed due to a filter.
 */
var CacheNode = /** @class */ (function () {
    /**
     * @param {!Node} node_
     * @param {boolean} fullyInitialized_
     * @param {boolean} filtered_
     */
    function CacheNode(node_, fullyInitialized_, filtered_) {
        this.node_ = node_;
        this.fullyInitialized_ = fullyInitialized_;
        this.filtered_ = filtered_;
    }
    /**
     * Returns whether this node was fully initialized with either server data or a complete overwrite by the client
     * @return {boolean}
     */
    CacheNode.prototype.isFullyInitialized = function () {
        return this.fullyInitialized_;
    };
    /**
     * Returns whether this node is potentially missing children due to a filter applied to the node
     * @return {boolean}
     */
    CacheNode.prototype.isFiltered = function () {
        return this.filtered_;
    };
    /**
     * @param {!Path} path
     * @return {boolean}
     */
    CacheNode.prototype.isCompleteForPath = function (path) {
        if (path.isEmpty()) {
            return this.isFullyInitialized() && !this.filtered_;
        }
        var childKey = path.getFront();
        return this.isCompleteForChild(childKey);
    };
    /**
     * @param {!string} key
     * @return {boolean}
     */
    CacheNode.prototype.isCompleteForChild = function (key) {
        return ((this.isFullyInitialized() && !this.filtered_) || this.node_.hasChild(key));
    };
    /**
     * @return {!Node}
     */
    CacheNode.prototype.getNode = function () {
        return this.node_;
    };
    return CacheNode;
}());
exports.CacheNode = CacheNode;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/view/Change.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/view/Change.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * @constructor
 * @struct
 * @param {!string} type The event type
 * @param {!Node} snapshotNode The data
 * @param {string=} childName The name for this child, if it's a child event
 * @param {Node=} oldSnap Used for intermediate processing of child changed events
 * @param {string=} prevName The name for the previous child, if applicable
 */
var Change = /** @class */ (function () {
    function Change(type, snapshotNode, childName, oldSnap, prevName) {
        this.type = type;
        this.snapshotNode = snapshotNode;
        this.childName = childName;
        this.oldSnap = oldSnap;
        this.prevName = prevName;
    }
    /**
     * @param {!Node} snapshot
     * @return {!Change}
     */
    Change.valueChange = function (snapshot) {
        return new Change(Change.VALUE, snapshot);
    };
    /**
     * @param {string} childKey
     * @param {!Node} snapshot
     * @return {!Change}
     */
    Change.childAddedChange = function (childKey, snapshot) {
        return new Change(Change.CHILD_ADDED, snapshot, childKey);
    };
    /**
     * @param {string} childKey
     * @param {!Node} snapshot
     * @return {!Change}
     */
    Change.childRemovedChange = function (childKey, snapshot) {
        return new Change(Change.CHILD_REMOVED, snapshot, childKey);
    };
    /**
     * @param {string} childKey
     * @param {!Node} newSnapshot
     * @param {!Node} oldSnapshot
     * @return {!Change}
     */
    Change.childChangedChange = function (childKey, newSnapshot, oldSnapshot) {
        return new Change(Change.CHILD_CHANGED, newSnapshot, childKey, oldSnapshot);
    };
    /**
     * @param {string} childKey
     * @param {!Node} snapshot
     * @return {!Change}
     */
    Change.childMovedChange = function (childKey, snapshot) {
        return new Change(Change.CHILD_MOVED, snapshot, childKey);
    };
    //event types
    /** Event type for a child added */
    Change.CHILD_ADDED = 'child_added';
    /** Event type for a child removed */
    Change.CHILD_REMOVED = 'child_removed';
    /** Event type for a child changed */
    Change.CHILD_CHANGED = 'child_changed';
    /** Event type for a child moved */
    Change.CHILD_MOVED = 'child_moved';
    /** Event type for a value change */
    Change.VALUE = 'value';
    return Change;
}());
exports.Change = Change;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/view/ChildChangeAccumulator.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/view/ChildChangeAccumulator.js ***!
  \******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var Change_1 = __webpack_require__(/*! ./Change */ "./node_modules/@firebase/database/dist/cjs/src/core/view/Change.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * @constructor
 */
var ChildChangeAccumulator = /** @class */ (function () {
    function ChildChangeAccumulator() {
        this.changeMap_ = {};
    }
    /**
     * @param {!Change} change
     */
    ChildChangeAccumulator.prototype.trackChildChange = function (change) {
        var type = change.type;
        var childKey /** @type {!string} */ = change.childName;
        util_2.assert(type == Change_1.Change.CHILD_ADDED ||
            type == Change_1.Change.CHILD_CHANGED ||
            type == Change_1.Change.CHILD_REMOVED, 'Only child changes supported for tracking');
        util_2.assert(childKey !== '.priority', 'Only non-priority child changes can be tracked.');
        var oldChange = util_1.safeGet(this.changeMap_, childKey);
        if (oldChange) {
            var oldType = oldChange.type;
            if (type == Change_1.Change.CHILD_ADDED && oldType == Change_1.Change.CHILD_REMOVED) {
                this.changeMap_[childKey] = Change_1.Change.childChangedChange(childKey, change.snapshotNode, oldChange.snapshotNode);
            }
            else if (type == Change_1.Change.CHILD_REMOVED &&
                oldType == Change_1.Change.CHILD_ADDED) {
                delete this.changeMap_[childKey];
            }
            else if (type == Change_1.Change.CHILD_REMOVED &&
                oldType == Change_1.Change.CHILD_CHANGED) {
                this.changeMap_[childKey] = Change_1.Change.childRemovedChange(childKey, oldChange.oldSnap);
            }
            else if (type == Change_1.Change.CHILD_CHANGED &&
                oldType == Change_1.Change.CHILD_ADDED) {
                this.changeMap_[childKey] = Change_1.Change.childAddedChange(childKey, change.snapshotNode);
            }
            else if (type == Change_1.Change.CHILD_CHANGED &&
                oldType == Change_1.Change.CHILD_CHANGED) {
                this.changeMap_[childKey] = Change_1.Change.childChangedChange(childKey, change.snapshotNode, oldChange.oldSnap);
            }
            else {
                throw util_2.assertionError('Illegal combination of changes: ' +
                    change +
                    ' occurred after ' +
                    oldChange);
            }
        }
        else {
            this.changeMap_[childKey] = change;
        }
    };
    /**
     * @return {!Array.<!Change>}
     */
    ChildChangeAccumulator.prototype.getChanges = function () {
        return util_1.getValues(this.changeMap_);
    };
    return ChildChangeAccumulator;
}());
exports.ChildChangeAccumulator = ChildChangeAccumulator;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/view/CompleteChildSource.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/view/CompleteChildSource.js ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var CacheNode_1 = __webpack_require__(/*! ./CacheNode */ "./node_modules/@firebase/database/dist/cjs/src/core/view/CacheNode.js");
/**
 * An implementation of CompleteChildSource that never returns any additional children
 *
 * @private
 * @constructor
 * @implements CompleteChildSource
 */
var NoCompleteChildSource_ = /** @class */ (function () {
    function NoCompleteChildSource_() {
    }
    /**
     * @inheritDoc
     */
    NoCompleteChildSource_.prototype.getCompleteChild = function (childKey) {
        return null;
    };
    /**
     * @inheritDoc
     */
    NoCompleteChildSource_.prototype.getChildAfterChild = function (index, child, reverse) {
        return null;
    };
    return NoCompleteChildSource_;
}());
exports.NoCompleteChildSource_ = NoCompleteChildSource_;
/**
 * Singleton instance.
 * @const
 * @type {!CompleteChildSource}
 */
exports.NO_COMPLETE_CHILD_SOURCE = new NoCompleteChildSource_();
/**
 * An implementation of CompleteChildSource that uses a WriteTree in addition to any other server data or
 * old event caches available to calculate complete children.
 *
 *
 * @implements CompleteChildSource
 */
var WriteTreeCompleteChildSource = /** @class */ (function () {
    /**
     * @param {!WriteTreeRef} writes_
     * @param {!ViewCache} viewCache_
     * @param {?Node} optCompleteServerCache_
     */
    function WriteTreeCompleteChildSource(writes_, viewCache_, optCompleteServerCache_) {
        if (optCompleteServerCache_ === void 0) { optCompleteServerCache_ = null; }
        this.writes_ = writes_;
        this.viewCache_ = viewCache_;
        this.optCompleteServerCache_ = optCompleteServerCache_;
    }
    /**
     * @inheritDoc
     */
    WriteTreeCompleteChildSource.prototype.getCompleteChild = function (childKey) {
        var node = this.viewCache_.getEventCache();
        if (node.isCompleteForChild(childKey)) {
            return node.getNode().getImmediateChild(childKey);
        }
        else {
            var serverNode = this.optCompleteServerCache_ != null
                ? new CacheNode_1.CacheNode(this.optCompleteServerCache_, true, false)
                : this.viewCache_.getServerCache();
            return this.writes_.calcCompleteChild(childKey, serverNode);
        }
    };
    /**
     * @inheritDoc
     */
    WriteTreeCompleteChildSource.prototype.getChildAfterChild = function (index, child, reverse) {
        var completeServerData = this.optCompleteServerCache_ != null
            ? this.optCompleteServerCache_
            : this.viewCache_.getCompleteServerSnap();
        var nodes = this.writes_.calcIndexedSlice(completeServerData, child, 1, reverse, index);
        if (nodes.length === 0) {
            return null;
        }
        else {
            return nodes[0];
        }
    };
    return WriteTreeCompleteChildSource;
}());
exports.WriteTreeCompleteChildSource = WriteTreeCompleteChildSource;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/view/Event.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/view/Event.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * Encapsulates the data needed to raise an event
 * @implements {Event}
 */
var DataEvent = /** @class */ (function () {
    /**
     * @param {!string} eventType One of: value, child_added, child_changed, child_moved, child_removed
     * @param {!EventRegistration} eventRegistration The function to call to with the event data. User provided
     * @param {!DataSnapshot} snapshot The data backing the event
     * @param {?string=} prevName Optional, the name of the previous child for child_* events.
     */
    function DataEvent(eventType, eventRegistration, snapshot, prevName) {
        this.eventType = eventType;
        this.eventRegistration = eventRegistration;
        this.snapshot = snapshot;
        this.prevName = prevName;
    }
    /**
     * @inheritDoc
     */
    DataEvent.prototype.getPath = function () {
        var ref = this.snapshot.getRef();
        if (this.eventType === 'value') {
            return ref.path;
        }
        else {
            return ref.getParent().path;
        }
    };
    /**
     * @inheritDoc
     */
    DataEvent.prototype.getEventType = function () {
        return this.eventType;
    };
    /**
     * @inheritDoc
     */
    DataEvent.prototype.getEventRunner = function () {
        return this.eventRegistration.getEventRunner(this);
    };
    /**
     * @inheritDoc
     */
    DataEvent.prototype.toString = function () {
        return (this.getPath().toString() +
            ':' +
            this.eventType +
            ':' +
            util_1.stringify(this.snapshot.exportVal()));
    };
    return DataEvent;
}());
exports.DataEvent = DataEvent;
var CancelEvent = /** @class */ (function () {
    /**
     * @param {EventRegistration} eventRegistration
     * @param {Error} error
     * @param {!Path} path
     */
    function CancelEvent(eventRegistration, error, path) {
        this.eventRegistration = eventRegistration;
        this.error = error;
        this.path = path;
    }
    /**
     * @inheritDoc
     */
    CancelEvent.prototype.getPath = function () {
        return this.path;
    };
    /**
     * @inheritDoc
     */
    CancelEvent.prototype.getEventType = function () {
        return 'cancel';
    };
    /**
     * @inheritDoc
     */
    CancelEvent.prototype.getEventRunner = function () {
        return this.eventRegistration.getEventRunner(this);
    };
    /**
     * @inheritDoc
     */
    CancelEvent.prototype.toString = function () {
        return this.path.toString() + ':cancel';
    };
    return CancelEvent;
}());
exports.CancelEvent = CancelEvent;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/view/EventGenerator.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/view/EventGenerator.js ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var Node_1 = __webpack_require__(/*! ../snap/Node */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/Node.js");
var Change_1 = __webpack_require__(/*! ./Change */ "./node_modules/@firebase/database/dist/cjs/src/core/view/Change.js");
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * An EventGenerator is used to convert "raw" changes (Change) as computed by the
 * CacheDiffer into actual events (Event) that can be raised.  See generateEventsForChanges()
 * for details.
 *
 * @constructor
 */
var EventGenerator = /** @class */ (function () {
    /**
     *
     * @param {!Query} query_
     */
    function EventGenerator(query_) {
        this.query_ = query_;
        /**
         * @private
         * @type {!Index}
         */
        this.index_ = this.query_.getQueryParams().getIndex();
    }
    /**
     * Given a set of raw changes (no moved events and prevName not specified yet), and a set of
     * EventRegistrations that should be notified of these changes, generate the actual events to be raised.
     *
     * Notes:
     *  - child_moved events will be synthesized at this time for any child_changed events that affect
     *    our index.
     *  - prevName will be calculated based on the index ordering.
     *
     * @param {!Array.<!Change>} changes
     * @param {!Node} eventCache
     * @param {!Array.<!EventRegistration>} eventRegistrations
     * @return {!Array.<!Event>}
     */
    EventGenerator.prototype.generateEventsForChanges = function (changes, eventCache, eventRegistrations) {
        var _this = this;
        var events = [];
        var moves = [];
        changes.forEach(function (change) {
            if (change.type === Change_1.Change.CHILD_CHANGED &&
                _this.index_.indexedValueChanged(change.oldSnap, change.snapshotNode)) {
                moves.push(Change_1.Change.childMovedChange(change.childName, change.snapshotNode));
            }
        });
        this.generateEventsForType_(events, Change_1.Change.CHILD_REMOVED, changes, eventRegistrations, eventCache);
        this.generateEventsForType_(events, Change_1.Change.CHILD_ADDED, changes, eventRegistrations, eventCache);
        this.generateEventsForType_(events, Change_1.Change.CHILD_MOVED, moves, eventRegistrations, eventCache);
        this.generateEventsForType_(events, Change_1.Change.CHILD_CHANGED, changes, eventRegistrations, eventCache);
        this.generateEventsForType_(events, Change_1.Change.VALUE, changes, eventRegistrations, eventCache);
        return events;
    };
    /**
     * Given changes of a single change type, generate the corresponding events.
     *
     * @param {!Array.<!Event>} events
     * @param {!string} eventType
     * @param {!Array.<!Change>} changes
     * @param {!Array.<!EventRegistration>} registrations
     * @param {!Node} eventCache
     * @private
     */
    EventGenerator.prototype.generateEventsForType_ = function (events, eventType, changes, registrations, eventCache) {
        var _this = this;
        var filteredChanges = changes.filter(function (change) { return change.type === eventType; });
        filteredChanges.sort(this.compareChanges_.bind(this));
        filteredChanges.forEach(function (change) {
            var materializedChange = _this.materializeSingleChange_(change, eventCache);
            registrations.forEach(function (registration) {
                if (registration.respondsTo(change.type)) {
                    events.push(registration.createEvent(materializedChange, _this.query_));
                }
            });
        });
    };
    /**
     * @param {!Change} change
     * @param {!Node} eventCache
     * @return {!Change}
     * @private
     */
    EventGenerator.prototype.materializeSingleChange_ = function (change, eventCache) {
        if (change.type === 'value' || change.type === 'child_removed') {
            return change;
        }
        else {
            change.prevName = eventCache.getPredecessorChildName(
            /** @type {!string} */
            change.childName, change.snapshotNode, this.index_);
            return change;
        }
    };
    /**
     * @param {!Change} a
     * @param {!Change} b
     * @return {number}
     * @private
     */
    EventGenerator.prototype.compareChanges_ = function (a, b) {
        if (a.childName == null || b.childName == null) {
            throw util_1.assertionError('Should only compare child_ events.');
        }
        var aWrapped = new Node_1.NamedNode(a.childName, a.snapshotNode);
        var bWrapped = new Node_1.NamedNode(b.childName, b.snapshotNode);
        return this.index_.compare(aWrapped, bWrapped);
    };
    return EventGenerator;
}());
exports.EventGenerator = EventGenerator;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/view/EventQueue.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/view/EventQueue.js ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! ../util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
/**
 * The event queue serves a few purposes:
 * 1. It ensures we maintain event order in the face of event callbacks doing operations that result in more
 *    events being queued.
 * 2. raiseQueuedEvents() handles being called reentrantly nicely.  That is, if in the course of raising events,
 *    raiseQueuedEvents() is called again, the "inner" call will pick up raising events where the "outer" call
 *    left off, ensuring that the events are still raised synchronously and in order.
 * 3. You can use raiseEventsAtPath and raiseEventsForChangedPath to ensure only relevant previously-queued
 *    events are raised synchronously.
 *
 * NOTE: This can all go away if/when we move to async events.
 *
 * @constructor
 */
var EventQueue = /** @class */ (function () {
    function EventQueue() {
        /**
         * @private
         * @type {!Array.<EventList>}
         */
        this.eventLists_ = [];
        /**
         * Tracks recursion depth of raiseQueuedEvents_, for debugging purposes.
         * @private
         * @type {!number}
         */
        this.recursionDepth_ = 0;
    }
    /**
     * @param {!Array.<Event>} eventDataList The new events to queue.
     */
    EventQueue.prototype.queueEvents = function (eventDataList) {
        // We group events by path, storing them in a single EventList, to make it easier to skip over them quickly.
        var currList = null;
        for (var i = 0; i < eventDataList.length; i++) {
            var eventData = eventDataList[i];
            var eventPath = eventData.getPath();
            if (currList !== null && !eventPath.equals(currList.getPath())) {
                this.eventLists_.push(currList);
                currList = null;
            }
            if (currList === null) {
                currList = new EventList(eventPath);
            }
            currList.add(eventData);
        }
        if (currList) {
            this.eventLists_.push(currList);
        }
    };
    /**
     * Queues the specified events and synchronously raises all events (including previously queued ones)
     * for the specified path.
     *
     * It is assumed that the new events are all for the specified path.
     *
     * @param {!Path} path The path to raise events for.
     * @param {!Array.<Event>} eventDataList The new events to raise.
     */
    EventQueue.prototype.raiseEventsAtPath = function (path, eventDataList) {
        this.queueEvents(eventDataList);
        this.raiseQueuedEventsMatchingPredicate_(function (eventPath) {
            return eventPath.equals(path);
        });
    };
    /**
     * Queues the specified events and synchronously raises all events (including previously queued ones) for
     * locations related to the specified change path (i.e. all ancestors and descendants).
     *
     * It is assumed that the new events are all related (ancestor or descendant) to the specified path.
     *
     * @param {!Path} changedPath The path to raise events for.
     * @param {!Array.<!Event>} eventDataList The events to raise
     */
    EventQueue.prototype.raiseEventsForChangedPath = function (changedPath, eventDataList) {
        this.queueEvents(eventDataList);
        this.raiseQueuedEventsMatchingPredicate_(function (eventPath) {
            return eventPath.contains(changedPath) || changedPath.contains(eventPath);
        });
    };
    /**
     * @param {!function(!Path):boolean} predicate
     * @private
     */
    EventQueue.prototype.raiseQueuedEventsMatchingPredicate_ = function (predicate) {
        this.recursionDepth_++;
        var sentAll = true;
        for (var i = 0; i < this.eventLists_.length; i++) {
            var eventList = this.eventLists_[i];
            if (eventList) {
                var eventPath = eventList.getPath();
                if (predicate(eventPath)) {
                    this.eventLists_[i].raise();
                    this.eventLists_[i] = null;
                }
                else {
                    sentAll = false;
                }
            }
        }
        if (sentAll) {
            this.eventLists_ = [];
        }
        this.recursionDepth_--;
    };
    return EventQueue;
}());
exports.EventQueue = EventQueue;
/**
 * @param {!Path} path
 * @constructor
 */
var EventList = /** @class */ (function () {
    function EventList(path_) {
        this.path_ = path_;
        /**
         * @type {!Array.<Event>}
         * @private
         */
        this.events_ = [];
    }
    /**
     * @param {!Event} eventData
     */
    EventList.prototype.add = function (eventData) {
        this.events_.push(eventData);
    };
    /**
     * Iterates through the list and raises each event
     */
    EventList.prototype.raise = function () {
        for (var i = 0; i < this.events_.length; i++) {
            var eventData = this.events_[i];
            if (eventData !== null) {
                this.events_[i] = null;
                var eventFn = eventData.getEventRunner();
                if (util_1.logger) {
                    util_1.log('event: ' + eventData.toString());
                }
                util_1.exceptionGuard(eventFn);
            }
        }
    };
    /**
     * @return {!Path}
     */
    EventList.prototype.getPath = function () {
        return this.path_;
    };
    return EventList;
}());
exports.EventList = EventList;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/view/EventRegistration.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/view/EventRegistration.js ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var DataSnapshot_1 = __webpack_require__(/*! ../../api/DataSnapshot */ "./node_modules/@firebase/database/dist/cjs/src/api/DataSnapshot.js");
var Event_1 = __webpack_require__(/*! ./Event */ "./node_modules/@firebase/database/dist/cjs/src/core/view/Event.js");
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * Represents registration for 'value' events.
 */
var ValueEventRegistration = /** @class */ (function () {
    /**
     * @param {?function(!DataSnapshot)} callback_
     * @param {?function(Error)} cancelCallback_
     * @param {?Object} context_
     */
    function ValueEventRegistration(callback_, cancelCallback_, context_) {
        this.callback_ = callback_;
        this.cancelCallback_ = cancelCallback_;
        this.context_ = context_;
    }
    /**
     * @inheritDoc
     */
    ValueEventRegistration.prototype.respondsTo = function (eventType) {
        return eventType === 'value';
    };
    /**
     * @inheritDoc
     */
    ValueEventRegistration.prototype.createEvent = function (change, query) {
        var index = query.getQueryParams().getIndex();
        return new Event_1.DataEvent('value', this, new DataSnapshot_1.DataSnapshot(change.snapshotNode, query.getRef(), index));
    };
    /**
     * @inheritDoc
     */
    ValueEventRegistration.prototype.getEventRunner = function (eventData) {
        var ctx = this.context_;
        if (eventData.getEventType() === 'cancel') {
            util_2.assert(this.cancelCallback_, 'Raising a cancel event on a listener with no cancel callback');
            var cancelCB_1 = this.cancelCallback_;
            return function () {
                // We know that error exists, we checked above that this is a cancel event
                cancelCB_1.call(ctx, eventData.error);
            };
        }
        else {
            var cb_1 = this.callback_;
            return function () {
                cb_1.call(ctx, eventData.snapshot);
            };
        }
    };
    /**
     * @inheritDoc
     */
    ValueEventRegistration.prototype.createCancelEvent = function (error, path) {
        if (this.cancelCallback_) {
            return new Event_1.CancelEvent(this, error, path);
        }
        else {
            return null;
        }
    };
    /**
     * @inheritDoc
     */
    ValueEventRegistration.prototype.matches = function (other) {
        if (!(other instanceof ValueEventRegistration)) {
            return false;
        }
        else if (!other.callback_ || !this.callback_) {
            // If no callback specified, we consider it to match any callback.
            return true;
        }
        else {
            return (other.callback_ === this.callback_ && other.context_ === this.context_);
        }
    };
    /**
     * @inheritDoc
     */
    ValueEventRegistration.prototype.hasAnyCallback = function () {
        return this.callback_ !== null;
    };
    return ValueEventRegistration;
}());
exports.ValueEventRegistration = ValueEventRegistration;
/**
 * Represents the registration of 1 or more child_xxx events.
 *
 * Currently, it is always exactly 1 child_xxx event, but the idea is we might let you
 * register a group of callbacks together in the future.
 *
 * @constructor
 * @implements {EventRegistration}
 */
var ChildEventRegistration = /** @class */ (function () {
    /**
     * @param {?Object.<string, function(!DataSnapshot, ?string=)>} callbacks_
     * @param {?function(Error)} cancelCallback_
     * @param {Object=} context_
     */
    function ChildEventRegistration(callbacks_, cancelCallback_, context_) {
        this.callbacks_ = callbacks_;
        this.cancelCallback_ = cancelCallback_;
        this.context_ = context_;
    }
    /**
     * @inheritDoc
     */
    ChildEventRegistration.prototype.respondsTo = function (eventType) {
        var eventToCheck = eventType === 'children_added' ? 'child_added' : eventType;
        eventToCheck =
            eventToCheck === 'children_removed' ? 'child_removed' : eventToCheck;
        return util_1.contains(this.callbacks_, eventToCheck);
    };
    /**
     * @inheritDoc
     */
    ChildEventRegistration.prototype.createCancelEvent = function (error, path) {
        if (this.cancelCallback_) {
            return new Event_1.CancelEvent(this, error, path);
        }
        else {
            return null;
        }
    };
    /**
     * @inheritDoc
     */
    ChildEventRegistration.prototype.createEvent = function (change, query) {
        util_2.assert(change.childName != null, 'Child events should have a childName.');
        var ref = query.getRef().child(/** @type {!string} */ (change.childName));
        var index = query.getQueryParams().getIndex();
        return new Event_1.DataEvent(change.type, this, new DataSnapshot_1.DataSnapshot(change.snapshotNode, ref, index), change.prevName);
    };
    /**
     * @inheritDoc
     */
    ChildEventRegistration.prototype.getEventRunner = function (eventData) {
        var ctx = this.context_;
        if (eventData.getEventType() === 'cancel') {
            util_2.assert(this.cancelCallback_, 'Raising a cancel event on a listener with no cancel callback');
            var cancelCB_2 = this.cancelCallback_;
            return function () {
                // We know that error exists, we checked above that this is a cancel event
                cancelCB_2.call(ctx, eventData.error);
            };
        }
        else {
            var cb_2 = this.callbacks_[eventData.eventType];
            return function () {
                cb_2.call(ctx, eventData.snapshot, eventData.prevName);
            };
        }
    };
    /**
     * @inheritDoc
     */
    ChildEventRegistration.prototype.matches = function (other) {
        if (other instanceof ChildEventRegistration) {
            if (!this.callbacks_ || !other.callbacks_) {
                return true;
            }
            else if (this.context_ === other.context_) {
                var otherCount = util_1.getCount(other.callbacks_);
                var thisCount = util_1.getCount(this.callbacks_);
                if (otherCount === thisCount) {
                    // If count is 1, do an exact match on eventType, if either is defined but null, it's a match.
                    //  If event types don't match, not a match
                    // If count is not 1, exact match across all
                    if (otherCount === 1) {
                        var otherKey /** @type {!string} */ = util_1.getAnyKey(other.callbacks_);
                        var thisKey /** @type {!string} */ = util_1.getAnyKey(this.callbacks_);
                        return (thisKey === otherKey &&
                            (!other.callbacks_[otherKey] ||
                                !this.callbacks_[thisKey] ||
                                other.callbacks_[otherKey] === this.callbacks_[thisKey]));
                    }
                    else {
                        // Exact match on each key.
                        return util_1.every(this.callbacks_, function (eventType, cb) { return other.callbacks_[eventType] === cb; });
                    }
                }
            }
        }
        return false;
    };
    /**
     * @inheritDoc
     */
    ChildEventRegistration.prototype.hasAnyCallback = function () {
        return this.callbacks_ !== null;
    };
    return ChildEventRegistration;
}());
exports.ChildEventRegistration = ChildEventRegistration;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/view/QueryParams.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/view/QueryParams.js ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! ../util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var KeyIndex_1 = __webpack_require__(/*! ../snap/indexes/KeyIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/KeyIndex.js");
var PriorityIndex_1 = __webpack_require__(/*! ../snap/indexes/PriorityIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PriorityIndex.js");
var ValueIndex_1 = __webpack_require__(/*! ../snap/indexes/ValueIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/ValueIndex.js");
var PathIndex_1 = __webpack_require__(/*! ../snap/indexes/PathIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PathIndex.js");
var IndexedFilter_1 = __webpack_require__(/*! ./filter/IndexedFilter */ "./node_modules/@firebase/database/dist/cjs/src/core/view/filter/IndexedFilter.js");
var LimitedFilter_1 = __webpack_require__(/*! ./filter/LimitedFilter */ "./node_modules/@firebase/database/dist/cjs/src/core/view/filter/LimitedFilter.js");
var RangedFilter_1 = __webpack_require__(/*! ./filter/RangedFilter */ "./node_modules/@firebase/database/dist/cjs/src/core/view/filter/RangedFilter.js");
var util_3 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/**
 * This class is an immutable-from-the-public-api struct containing a set of query parameters defining a
 * range to be returned for a particular location. It is assumed that validation of parameters is done at the
 * user-facing API level, so it is not done here.
 * @constructor
 */
var QueryParams = /** @class */ (function () {
    function QueryParams() {
        this.limitSet_ = false;
        this.startSet_ = false;
        this.startNameSet_ = false;
        this.endSet_ = false;
        this.endNameSet_ = false;
        this.limit_ = 0;
        this.viewFrom_ = '';
        this.indexStartValue_ = null;
        this.indexStartName_ = '';
        this.indexEndValue_ = null;
        this.indexEndName_ = '';
        this.index_ = PriorityIndex_1.PRIORITY_INDEX;
    }
    /**
     * @return {boolean}
     */
    QueryParams.prototype.hasStart = function () {
        return this.startSet_;
    };
    /**
     * @return {boolean} True if it would return from left.
     */
    QueryParams.prototype.isViewFromLeft = function () {
        if (this.viewFrom_ === '') {
            // limit(), rather than limitToFirst or limitToLast was called.
            // This means that only one of startSet_ and endSet_ is true. Use them
            // to calculate which side of the view to anchor to. If neither is set,
            // anchor to the end.
            return this.startSet_;
        }
        else {
            return (this.viewFrom_ === QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT);
        }
    };
    /**
     * Only valid to call if hasStart() returns true
     * @return {*}
     */
    QueryParams.prototype.getIndexStartValue = function () {
        util_1.assert(this.startSet_, 'Only valid if start has been set');
        return this.indexStartValue_;
    };
    /**
     * Only valid to call if hasStart() returns true.
     * Returns the starting key name for the range defined by these query parameters
     * @return {!string}
     */
    QueryParams.prototype.getIndexStartName = function () {
        util_1.assert(this.startSet_, 'Only valid if start has been set');
        if (this.startNameSet_) {
            return this.indexStartName_;
        }
        else {
            return util_2.MIN_NAME;
        }
    };
    /**
     * @return {boolean}
     */
    QueryParams.prototype.hasEnd = function () {
        return this.endSet_;
    };
    /**
     * Only valid to call if hasEnd() returns true.
     * @return {*}
     */
    QueryParams.prototype.getIndexEndValue = function () {
        util_1.assert(this.endSet_, 'Only valid if end has been set');
        return this.indexEndValue_;
    };
    /**
     * Only valid to call if hasEnd() returns true.
     * Returns the end key name for the range defined by these query parameters
     * @return {!string}
     */
    QueryParams.prototype.getIndexEndName = function () {
        util_1.assert(this.endSet_, 'Only valid if end has been set');
        if (this.endNameSet_) {
            return this.indexEndName_;
        }
        else {
            return util_2.MAX_NAME;
        }
    };
    /**
     * @return {boolean}
     */
    QueryParams.prototype.hasLimit = function () {
        return this.limitSet_;
    };
    /**
     * @return {boolean} True if a limit has been set and it has been explicitly anchored
     */
    QueryParams.prototype.hasAnchoredLimit = function () {
        return this.limitSet_ && this.viewFrom_ !== '';
    };
    /**
     * Only valid to call if hasLimit() returns true
     * @return {!number}
     */
    QueryParams.prototype.getLimit = function () {
        util_1.assert(this.limitSet_, 'Only valid if limit has been set');
        return this.limit_;
    };
    /**
     * @return {!Index}
     */
    QueryParams.prototype.getIndex = function () {
        return this.index_;
    };
    /**
     * @return {!QueryParams}
     * @private
     */
    QueryParams.prototype.copy_ = function () {
        var copy = new QueryParams();
        copy.limitSet_ = this.limitSet_;
        copy.limit_ = this.limit_;
        copy.startSet_ = this.startSet_;
        copy.indexStartValue_ = this.indexStartValue_;
        copy.startNameSet_ = this.startNameSet_;
        copy.indexStartName_ = this.indexStartName_;
        copy.endSet_ = this.endSet_;
        copy.indexEndValue_ = this.indexEndValue_;
        copy.endNameSet_ = this.endNameSet_;
        copy.indexEndName_ = this.indexEndName_;
        copy.index_ = this.index_;
        copy.viewFrom_ = this.viewFrom_;
        return copy;
    };
    /**
     * @param {!number} newLimit
     * @return {!QueryParams}
     */
    QueryParams.prototype.limit = function (newLimit) {
        var newParams = this.copy_();
        newParams.limitSet_ = true;
        newParams.limit_ = newLimit;
        newParams.viewFrom_ = '';
        return newParams;
    };
    /**
     * @param {!number} newLimit
     * @return {!QueryParams}
     */
    QueryParams.prototype.limitToFirst = function (newLimit) {
        var newParams = this.copy_();
        newParams.limitSet_ = true;
        newParams.limit_ = newLimit;
        newParams.viewFrom_ = QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT;
        return newParams;
    };
    /**
     * @param {!number} newLimit
     * @return {!QueryParams}
     */
    QueryParams.prototype.limitToLast = function (newLimit) {
        var newParams = this.copy_();
        newParams.limitSet_ = true;
        newParams.limit_ = newLimit;
        newParams.viewFrom_ = QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT;
        return newParams;
    };
    /**
     * @param {*} indexValue
     * @param {?string=} key
     * @return {!QueryParams}
     */
    QueryParams.prototype.startAt = function (indexValue, key) {
        var newParams = this.copy_();
        newParams.startSet_ = true;
        if (!(indexValue !== undefined)) {
            indexValue = null;
        }
        newParams.indexStartValue_ = indexValue;
        if (key != null) {
            newParams.startNameSet_ = true;
            newParams.indexStartName_ = key;
        }
        else {
            newParams.startNameSet_ = false;
            newParams.indexStartName_ = '';
        }
        return newParams;
    };
    /**
     * @param {*} indexValue
     * @param {?string=} key
     * @return {!QueryParams}
     */
    QueryParams.prototype.endAt = function (indexValue, key) {
        var newParams = this.copy_();
        newParams.endSet_ = true;
        if (!(indexValue !== undefined)) {
            indexValue = null;
        }
        newParams.indexEndValue_ = indexValue;
        if (key !== undefined) {
            newParams.endNameSet_ = true;
            newParams.indexEndName_ = key;
        }
        else {
            newParams.endNameSet_ = false;
            newParams.indexEndName_ = '';
        }
        return newParams;
    };
    /**
     * @param {!Index} index
     * @return {!QueryParams}
     */
    QueryParams.prototype.orderBy = function (index) {
        var newParams = this.copy_();
        newParams.index_ = index;
        return newParams;
    };
    /**
     * @return {!Object}
     */
    QueryParams.prototype.getQueryObject = function () {
        var WIRE_PROTOCOL_CONSTANTS = QueryParams.WIRE_PROTOCOL_CONSTANTS_;
        var obj = {};
        if (this.startSet_) {
            obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_VALUE] = this.indexStartValue_;
            if (this.startNameSet_) {
                obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_NAME] = this.indexStartName_;
            }
        }
        if (this.endSet_) {
            obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_VALUE] = this.indexEndValue_;
            if (this.endNameSet_) {
                obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_NAME] = this.indexEndName_;
            }
        }
        if (this.limitSet_) {
            obj[WIRE_PROTOCOL_CONSTANTS.LIMIT] = this.limit_;
            var viewFrom = this.viewFrom_;
            if (viewFrom === '') {
                if (this.isViewFromLeft()) {
                    viewFrom = WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_LEFT;
                }
                else {
                    viewFrom = WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_RIGHT;
                }
            }
            obj[WIRE_PROTOCOL_CONSTANTS.VIEW_FROM] = viewFrom;
        }
        // For now, priority index is the default, so we only specify if it's some other index
        if (this.index_ !== PriorityIndex_1.PRIORITY_INDEX) {
            obj[WIRE_PROTOCOL_CONSTANTS.INDEX] = this.index_.toString();
        }
        return obj;
    };
    /**
     * @return {boolean}
     */
    QueryParams.prototype.loadsAllData = function () {
        return !(this.startSet_ || this.endSet_ || this.limitSet_);
    };
    /**
     * @return {boolean}
     */
    QueryParams.prototype.isDefault = function () {
        return this.loadsAllData() && this.index_ == PriorityIndex_1.PRIORITY_INDEX;
    };
    /**
     * @return {!NodeFilter}
     */
    QueryParams.prototype.getNodeFilter = function () {
        if (this.loadsAllData()) {
            return new IndexedFilter_1.IndexedFilter(this.getIndex());
        }
        else if (this.hasLimit()) {
            return new LimitedFilter_1.LimitedFilter(this);
        }
        else {
            return new RangedFilter_1.RangedFilter(this);
        }
    };
    /**
     * Returns a set of REST query string parameters representing this query.
     *
     * @return {!Object.<string,*>} query string parameters
     */
    QueryParams.prototype.toRestQueryStringParameters = function () {
        var REST_CONSTANTS = QueryParams.REST_QUERY_CONSTANTS_;
        var qs = {};
        if (this.isDefault()) {
            return qs;
        }
        var orderBy;
        if (this.index_ === PriorityIndex_1.PRIORITY_INDEX) {
            orderBy = REST_CONSTANTS.PRIORITY_INDEX;
        }
        else if (this.index_ === ValueIndex_1.VALUE_INDEX) {
            orderBy = REST_CONSTANTS.VALUE_INDEX;
        }
        else if (this.index_ === KeyIndex_1.KEY_INDEX) {
            orderBy = REST_CONSTANTS.KEY_INDEX;
        }
        else {
            util_1.assert(this.index_ instanceof PathIndex_1.PathIndex, 'Unrecognized index type!');
            orderBy = this.index_.toString();
        }
        qs[REST_CONSTANTS.ORDER_BY] = util_3.stringify(orderBy);
        if (this.startSet_) {
            qs[REST_CONSTANTS.START_AT] = util_3.stringify(this.indexStartValue_);
            if (this.startNameSet_) {
                qs[REST_CONSTANTS.START_AT] += ',' + util_3.stringify(this.indexStartName_);
            }
        }
        if (this.endSet_) {
            qs[REST_CONSTANTS.END_AT] = util_3.stringify(this.indexEndValue_);
            if (this.endNameSet_) {
                qs[REST_CONSTANTS.END_AT] += ',' + util_3.stringify(this.indexEndName_);
            }
        }
        if (this.limitSet_) {
            if (this.isViewFromLeft()) {
                qs[REST_CONSTANTS.LIMIT_TO_FIRST] = this.limit_;
            }
            else {
                qs[REST_CONSTANTS.LIMIT_TO_LAST] = this.limit_;
            }
        }
        return qs;
    };
    /**
     * Wire Protocol Constants
     * @const
     * @enum {string}
     * @private
     */
    QueryParams.WIRE_PROTOCOL_CONSTANTS_ = {
        INDEX_START_VALUE: 'sp',
        INDEX_START_NAME: 'sn',
        INDEX_END_VALUE: 'ep',
        INDEX_END_NAME: 'en',
        LIMIT: 'l',
        VIEW_FROM: 'vf',
        VIEW_FROM_LEFT: 'l',
        VIEW_FROM_RIGHT: 'r',
        INDEX: 'i'
    };
    /**
     * REST Query Constants
     * @const
     * @enum {string}
     * @private
     */
    QueryParams.REST_QUERY_CONSTANTS_ = {
        ORDER_BY: 'orderBy',
        PRIORITY_INDEX: '$priority',
        VALUE_INDEX: '$value',
        KEY_INDEX: '$key',
        START_AT: 'startAt',
        END_AT: 'endAt',
        LIMIT_TO_FIRST: 'limitToFirst',
        LIMIT_TO_LAST: 'limitToLast'
    };
    /**
     * Default, empty query parameters
     * @type {!QueryParams}
     * @const
     */
    QueryParams.DEFAULT = new QueryParams();
    return QueryParams;
}());
exports.QueryParams = QueryParams;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/view/View.js":
/*!************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/view/View.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var IndexedFilter_1 = __webpack_require__(/*! ./filter/IndexedFilter */ "./node_modules/@firebase/database/dist/cjs/src/core/view/filter/IndexedFilter.js");
var ViewProcessor_1 = __webpack_require__(/*! ./ViewProcessor */ "./node_modules/@firebase/database/dist/cjs/src/core/view/ViewProcessor.js");
var ChildrenNode_1 = __webpack_require__(/*! ../snap/ChildrenNode */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/ChildrenNode.js");
var CacheNode_1 = __webpack_require__(/*! ./CacheNode */ "./node_modules/@firebase/database/dist/cjs/src/core/view/CacheNode.js");
var ViewCache_1 = __webpack_require__(/*! ./ViewCache */ "./node_modules/@firebase/database/dist/cjs/src/core/view/ViewCache.js");
var EventGenerator_1 = __webpack_require__(/*! ./EventGenerator */ "./node_modules/@firebase/database/dist/cjs/src/core/view/EventGenerator.js");
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var Operation_1 = __webpack_require__(/*! ../operation/Operation */ "./node_modules/@firebase/database/dist/cjs/src/core/operation/Operation.js");
var Change_1 = __webpack_require__(/*! ./Change */ "./node_modules/@firebase/database/dist/cjs/src/core/view/Change.js");
var PriorityIndex_1 = __webpack_require__(/*! ../snap/indexes/PriorityIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PriorityIndex.js");
/**
 * A view represents a specific location and query that has 1 or more event registrations.
 *
 * It does several things:
 *  - Maintains the list of event registrations for this location/query.
 *  - Maintains a cache of the data visible for this location/query.
 *  - Applies new operations (via applyOperation), updates the cache, and based on the event
 *    registrations returns the set of events to be raised.
 * @constructor
 */
var View = /** @class */ (function () {
    /**
     *
     * @param {!Query} query_
     * @param {!ViewCache} initialViewCache
     */
    function View(query_, initialViewCache) {
        this.query_ = query_;
        this.eventRegistrations_ = [];
        var params = this.query_.getQueryParams();
        var indexFilter = new IndexedFilter_1.IndexedFilter(params.getIndex());
        var filter = params.getNodeFilter();
        /**
         * @type {ViewProcessor}
         * @private
         */
        this.processor_ = new ViewProcessor_1.ViewProcessor(filter);
        var initialServerCache = initialViewCache.getServerCache();
        var initialEventCache = initialViewCache.getEventCache();
        // Don't filter server node with other filter than index, wait for tagged listen
        var serverSnap = indexFilter.updateFullNode(ChildrenNode_1.ChildrenNode.EMPTY_NODE, initialServerCache.getNode(), null);
        var eventSnap = filter.updateFullNode(ChildrenNode_1.ChildrenNode.EMPTY_NODE, initialEventCache.getNode(), null);
        var newServerCache = new CacheNode_1.CacheNode(serverSnap, initialServerCache.isFullyInitialized(), indexFilter.filtersNodes());
        var newEventCache = new CacheNode_1.CacheNode(eventSnap, initialEventCache.isFullyInitialized(), filter.filtersNodes());
        /**
         * @type {!ViewCache}
         * @private
         */
        this.viewCache_ = new ViewCache_1.ViewCache(newEventCache, newServerCache);
        /**
         * @type {!EventGenerator}
         * @private
         */
        this.eventGenerator_ = new EventGenerator_1.EventGenerator(this.query_);
    }
    /**
     * @return {!Query}
     */
    View.prototype.getQuery = function () {
        return this.query_;
    };
    /**
     * @return {?Node}
     */
    View.prototype.getServerCache = function () {
        return this.viewCache_.getServerCache().getNode();
    };
    /**
     * @param {!Path} path
     * @return {?Node}
     */
    View.prototype.getCompleteServerCache = function (path) {
        var cache = this.viewCache_.getCompleteServerSnap();
        if (cache) {
            // If this isn't a "loadsAllData" view, then cache isn't actually a complete cache and
            // we need to see if it contains the child we're interested in.
            if (this.query_.getQueryParams().loadsAllData() ||
                (!path.isEmpty() && !cache.getImmediateChild(path.getFront()).isEmpty())) {
                return cache.getChild(path);
            }
        }
        return null;
    };
    /**
     * @return {boolean}
     */
    View.prototype.isEmpty = function () {
        return this.eventRegistrations_.length === 0;
    };
    /**
     * @param {!EventRegistration} eventRegistration
     */
    View.prototype.addEventRegistration = function (eventRegistration) {
        this.eventRegistrations_.push(eventRegistration);
    };
    /**
     * @param {?EventRegistration} eventRegistration If null, remove all callbacks.
     * @param {Error=} cancelError If a cancelError is provided, appropriate cancel events will be returned.
     * @return {!Array.<!Event>} Cancel events, if cancelError was provided.
     */
    View.prototype.removeEventRegistration = function (eventRegistration, cancelError) {
        var cancelEvents = [];
        if (cancelError) {
            util_1.assert(eventRegistration == null, 'A cancel should cancel all event registrations.');
            var path_1 = this.query_.path;
            this.eventRegistrations_.forEach(function (registration) {
                cancelError /** @type {!Error} */ = cancelError;
                var maybeEvent = registration.createCancelEvent(cancelError, path_1);
                if (maybeEvent) {
                    cancelEvents.push(maybeEvent);
                }
            });
        }
        if (eventRegistration) {
            var remaining = [];
            for (var i = 0; i < this.eventRegistrations_.length; ++i) {
                var existing = this.eventRegistrations_[i];
                if (!existing.matches(eventRegistration)) {
                    remaining.push(existing);
                }
                else if (eventRegistration.hasAnyCallback()) {
                    // We're removing just this one
                    remaining = remaining.concat(this.eventRegistrations_.slice(i + 1));
                    break;
                }
            }
            this.eventRegistrations_ = remaining;
        }
        else {
            this.eventRegistrations_ = [];
        }
        return cancelEvents;
    };
    /**
     * Applies the given Operation, updates our cache, and returns the appropriate events.
     *
     * @param {!Operation} operation
     * @param {!WriteTreeRef} writesCache
     * @param {?Node} completeServerCache
     * @return {!Array.<!Event>}
     */
    View.prototype.applyOperation = function (operation, writesCache, completeServerCache) {
        if (operation.type === Operation_1.OperationType.MERGE &&
            operation.source.queryId !== null) {
            util_1.assert(this.viewCache_.getCompleteServerSnap(), 'We should always have a full cache before handling merges');
            util_1.assert(this.viewCache_.getCompleteEventSnap(), 'Missing event cache, even though we have a server cache');
        }
        var oldViewCache = this.viewCache_;
        var result = this.processor_.applyOperation(oldViewCache, operation, writesCache, completeServerCache);
        this.processor_.assertIndexed(result.viewCache);
        util_1.assert(result.viewCache.getServerCache().isFullyInitialized() ||
            !oldViewCache.getServerCache().isFullyInitialized(), 'Once a server snap is complete, it should never go back');
        this.viewCache_ = result.viewCache;
        return this.generateEventsForChanges_(result.changes, result.viewCache.getEventCache().getNode(), null);
    };
    /**
     * @param {!EventRegistration} registration
     * @return {!Array.<!Event>}
     */
    View.prototype.getInitialEvents = function (registration) {
        var eventSnap = this.viewCache_.getEventCache();
        var initialChanges = [];
        if (!eventSnap.getNode().isLeafNode()) {
            var eventNode = eventSnap.getNode();
            eventNode.forEachChild(PriorityIndex_1.PRIORITY_INDEX, function (key, childNode) {
                initialChanges.push(Change_1.Change.childAddedChange(key, childNode));
            });
        }
        if (eventSnap.isFullyInitialized()) {
            initialChanges.push(Change_1.Change.valueChange(eventSnap.getNode()));
        }
        return this.generateEventsForChanges_(initialChanges, eventSnap.getNode(), registration);
    };
    /**
     * @private
     * @param {!Array.<!Change>} changes
     * @param {!Node} eventCache
     * @param {EventRegistration=} eventRegistration
     * @return {!Array.<!Event>}
     */
    View.prototype.generateEventsForChanges_ = function (changes, eventCache, eventRegistration) {
        var registrations = eventRegistration
            ? [eventRegistration]
            : this.eventRegistrations_;
        return this.eventGenerator_.generateEventsForChanges(changes, eventCache, registrations);
    };
    return View;
}());
exports.View = View;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/view/ViewCache.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/view/ViewCache.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var ChildrenNode_1 = __webpack_require__(/*! ../snap/ChildrenNode */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/ChildrenNode.js");
var CacheNode_1 = __webpack_require__(/*! ./CacheNode */ "./node_modules/@firebase/database/dist/cjs/src/core/view/CacheNode.js");
/**
 * Stores the data we have cached for a view.
 *
 * serverSnap is the cached server data, eventSnap is the cached event data (server data plus any local writes).
 *
 * @constructor
 */
var ViewCache = /** @class */ (function () {
    /**
     *
     * @param {!CacheNode} eventCache_
     * @param {!CacheNode} serverCache_
     */
    function ViewCache(eventCache_, serverCache_) {
        this.eventCache_ = eventCache_;
        this.serverCache_ = serverCache_;
    }
    /**
     * @param {!Node} eventSnap
     * @param {boolean} complete
     * @param {boolean} filtered
     * @return {!ViewCache}
     */
    ViewCache.prototype.updateEventSnap = function (eventSnap, complete, filtered) {
        return new ViewCache(new CacheNode_1.CacheNode(eventSnap, complete, filtered), this.serverCache_);
    };
    /**
     * @param {!Node} serverSnap
     * @param {boolean} complete
     * @param {boolean} filtered
     * @return {!ViewCache}
     */
    ViewCache.prototype.updateServerSnap = function (serverSnap, complete, filtered) {
        return new ViewCache(this.eventCache_, new CacheNode_1.CacheNode(serverSnap, complete, filtered));
    };
    /**
     * @return {!CacheNode}
     */
    ViewCache.prototype.getEventCache = function () {
        return this.eventCache_;
    };
    /**
     * @return {?Node}
     */
    ViewCache.prototype.getCompleteEventSnap = function () {
        return this.eventCache_.isFullyInitialized()
            ? this.eventCache_.getNode()
            : null;
    };
    /**
     * @return {!CacheNode}
     */
    ViewCache.prototype.getServerCache = function () {
        return this.serverCache_;
    };
    /**
     * @return {?Node}
     */
    ViewCache.prototype.getCompleteServerSnap = function () {
        return this.serverCache_.isFullyInitialized()
            ? this.serverCache_.getNode()
            : null;
    };
    /**
     * @const
     * @type {ViewCache}
     */
    ViewCache.Empty = new ViewCache(new CacheNode_1.CacheNode(ChildrenNode_1.ChildrenNode.EMPTY_NODE, 
    /*fullyInitialized=*/ false, 
    /*filtered=*/ false), new CacheNode_1.CacheNode(ChildrenNode_1.ChildrenNode.EMPTY_NODE, 
    /*fullyInitialized=*/ false, 
    /*filtered=*/ false));
    return ViewCache;
}());
exports.ViewCache = ViewCache;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/view/ViewProcessor.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/view/ViewProcessor.js ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var Operation_1 = __webpack_require__(/*! ../operation/Operation */ "./node_modules/@firebase/database/dist/cjs/src/core/operation/Operation.js");
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var ChildChangeAccumulator_1 = __webpack_require__(/*! ./ChildChangeAccumulator */ "./node_modules/@firebase/database/dist/cjs/src/core/view/ChildChangeAccumulator.js");
var Change_1 = __webpack_require__(/*! ./Change */ "./node_modules/@firebase/database/dist/cjs/src/core/view/Change.js");
var ChildrenNode_1 = __webpack_require__(/*! ../snap/ChildrenNode */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/ChildrenNode.js");
var KeyIndex_1 = __webpack_require__(/*! ../snap/indexes/KeyIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/KeyIndex.js");
var ImmutableTree_1 = __webpack_require__(/*! ../util/ImmutableTree */ "./node_modules/@firebase/database/dist/cjs/src/core/util/ImmutableTree.js");
var Path_1 = __webpack_require__(/*! ../util/Path */ "./node_modules/@firebase/database/dist/cjs/src/core/util/Path.js");
var CompleteChildSource_1 = __webpack_require__(/*! ./CompleteChildSource */ "./node_modules/@firebase/database/dist/cjs/src/core/view/CompleteChildSource.js");
/**
 * @constructor
 * @struct
 */
var ProcessorResult = /** @class */ (function () {
    /**
     * @param {!ViewCache} viewCache
     * @param {!Array.<!Change>} changes
     */
    function ProcessorResult(viewCache, changes) {
        this.viewCache = viewCache;
        this.changes = changes;
    }
    return ProcessorResult;
}());
exports.ProcessorResult = ProcessorResult;
/**
 * @constructor
 */
var ViewProcessor = /** @class */ (function () {
    /**
     * @param {!NodeFilter} filter_
     */
    function ViewProcessor(filter_) {
        this.filter_ = filter_;
    }
    /**
     * @param {!ViewCache} viewCache
     */
    ViewProcessor.prototype.assertIndexed = function (viewCache) {
        util_1.assert(viewCache
            .getEventCache()
            .getNode()
            .isIndexed(this.filter_.getIndex()), 'Event snap not indexed');
        util_1.assert(viewCache
            .getServerCache()
            .getNode()
            .isIndexed(this.filter_.getIndex()), 'Server snap not indexed');
    };
    /**
     * @param {!ViewCache} oldViewCache
     * @param {!Operation} operation
     * @param {!WriteTreeRef} writesCache
     * @param {?Node} completeCache
     * @return {!ProcessorResult}
     */
    ViewProcessor.prototype.applyOperation = function (oldViewCache, operation, writesCache, completeCache) {
        var accumulator = new ChildChangeAccumulator_1.ChildChangeAccumulator();
        var newViewCache, filterServerNode;
        if (operation.type === Operation_1.OperationType.OVERWRITE) {
            var overwrite = operation;
            if (overwrite.source.fromUser) {
                newViewCache = this.applyUserOverwrite_(oldViewCache, overwrite.path, overwrite.snap, writesCache, completeCache, accumulator);
            }
            else {
                util_1.assert(overwrite.source.fromServer, 'Unknown source.');
                // We filter the node if it's a tagged update or the node has been previously filtered  and the
                // update is not at the root in which case it is ok (and necessary) to mark the node unfiltered
                // again
                filterServerNode =
                    overwrite.source.tagged ||
                        (oldViewCache.getServerCache().isFiltered() &&
                            !overwrite.path.isEmpty());
                newViewCache = this.applyServerOverwrite_(oldViewCache, overwrite.path, overwrite.snap, writesCache, completeCache, filterServerNode, accumulator);
            }
        }
        else if (operation.type === Operation_1.OperationType.MERGE) {
            var merge = operation;
            if (merge.source.fromUser) {
                newViewCache = this.applyUserMerge_(oldViewCache, merge.path, merge.children, writesCache, completeCache, accumulator);
            }
            else {
                util_1.assert(merge.source.fromServer, 'Unknown source.');
                // We filter the node if it's a tagged update or the node has been previously filtered
                filterServerNode =
                    merge.source.tagged || oldViewCache.getServerCache().isFiltered();
                newViewCache = this.applyServerMerge_(oldViewCache, merge.path, merge.children, writesCache, completeCache, filterServerNode, accumulator);
            }
        }
        else if (operation.type === Operation_1.OperationType.ACK_USER_WRITE) {
            var ackUserWrite = operation;
            if (!ackUserWrite.revert) {
                newViewCache = this.ackUserWrite_(oldViewCache, ackUserWrite.path, ackUserWrite.affectedTree, writesCache, completeCache, accumulator);
            }
            else {
                newViewCache = this.revertUserWrite_(oldViewCache, ackUserWrite.path, writesCache, completeCache, accumulator);
            }
        }
        else if (operation.type === Operation_1.OperationType.LISTEN_COMPLETE) {
            newViewCache = this.listenComplete_(oldViewCache, operation.path, writesCache, accumulator);
        }
        else {
            throw util_1.assertionError('Unknown operation type: ' + operation.type);
        }
        var changes = accumulator.getChanges();
        ViewProcessor.maybeAddValueEvent_(oldViewCache, newViewCache, changes);
        return new ProcessorResult(newViewCache, changes);
    };
    /**
     * @param {!ViewCache} oldViewCache
     * @param {!ViewCache} newViewCache
     * @param {!Array.<!Change>} accumulator
     * @private
     */
    ViewProcessor.maybeAddValueEvent_ = function (oldViewCache, newViewCache, accumulator) {
        var eventSnap = newViewCache.getEventCache();
        if (eventSnap.isFullyInitialized()) {
            var isLeafOrEmpty = eventSnap.getNode().isLeafNode() || eventSnap.getNode().isEmpty();
            var oldCompleteSnap = oldViewCache.getCompleteEventSnap();
            if (accumulator.length > 0 ||
                !oldViewCache.getEventCache().isFullyInitialized() ||
                (isLeafOrEmpty &&
                    !eventSnap
                        .getNode()
                        .equals(/** @type {!Node} */ (oldCompleteSnap))) ||
                !eventSnap
                    .getNode()
                    .getPriority()
                    .equals(oldCompleteSnap.getPriority())) {
                accumulator.push(Change_1.Change.valueChange(
                /** @type {!Node} */ newViewCache.getCompleteEventSnap()));
            }
        }
    };
    /**
     * @param {!ViewCache} viewCache
     * @param {!Path} changePath
     * @param {!WriteTreeRef} writesCache
     * @param {!CompleteChildSource} source
     * @param {!ChildChangeAccumulator} accumulator
     * @return {!ViewCache}
     * @private
     */
    ViewProcessor.prototype.generateEventCacheAfterServerEvent_ = function (viewCache, changePath, writesCache, source, accumulator) {
        var oldEventSnap = viewCache.getEventCache();
        if (writesCache.shadowingWrite(changePath) != null) {
            // we have a shadowing write, ignore changes
            return viewCache;
        }
        else {
            var newEventCache = void 0, serverNode = void 0;
            if (changePath.isEmpty()) {
                // TODO: figure out how this plays with "sliding ack windows"
                util_1.assert(viewCache.getServerCache().isFullyInitialized(), 'If change path is empty, we must have complete server data');
                if (viewCache.getServerCache().isFiltered()) {
                    // We need to special case this, because we need to only apply writes to complete children, or
                    // we might end up raising events for incomplete children. If the server data is filtered deep
                    // writes cannot be guaranteed to be complete
                    var serverCache = viewCache.getCompleteServerSnap();
                    var completeChildren = serverCache instanceof ChildrenNode_1.ChildrenNode
                        ? serverCache
                        : ChildrenNode_1.ChildrenNode.EMPTY_NODE;
                    var completeEventChildren = writesCache.calcCompleteEventChildren(completeChildren);
                    newEventCache = this.filter_.updateFullNode(viewCache.getEventCache().getNode(), completeEventChildren, accumulator);
                }
                else {
                    var completeNode = writesCache.calcCompleteEventCache(viewCache.getCompleteServerSnap());
                    newEventCache = this.filter_.updateFullNode(viewCache.getEventCache().getNode(), completeNode, accumulator);
                }
            }
            else {
                var childKey = changePath.getFront();
                if (childKey == '.priority') {
                    util_1.assert(changePath.getLength() == 1, "Can't have a priority with additional path components");
                    var oldEventNode = oldEventSnap.getNode();
                    serverNode = viewCache.getServerCache().getNode();
                    // we might have overwrites for this priority
                    var updatedPriority = writesCache.calcEventCacheAfterServerOverwrite(changePath, oldEventNode, serverNode);
                    if (updatedPriority != null) {
                        newEventCache = this.filter_.updatePriority(oldEventNode, updatedPriority);
                    }
                    else {
                        // priority didn't change, keep old node
                        newEventCache = oldEventSnap.getNode();
                    }
                }
                else {
                    var childChangePath = changePath.popFront();
                    // update child
                    var newEventChild = void 0;
                    if (oldEventSnap.isCompleteForChild(childKey)) {
                        serverNode = viewCache.getServerCache().getNode();
                        var eventChildUpdate = writesCache.calcEventCacheAfterServerOverwrite(changePath, oldEventSnap.getNode(), serverNode);
                        if (eventChildUpdate != null) {
                            newEventChild = oldEventSnap
                                .getNode()
                                .getImmediateChild(childKey)
                                .updateChild(childChangePath, eventChildUpdate);
                        }
                        else {
                            // Nothing changed, just keep the old child
                            newEventChild = oldEventSnap
                                .getNode()
                                .getImmediateChild(childKey);
                        }
                    }
                    else {
                        newEventChild = writesCache.calcCompleteChild(childKey, viewCache.getServerCache());
                    }
                    if (newEventChild != null) {
                        newEventCache = this.filter_.updateChild(oldEventSnap.getNode(), childKey, newEventChild, childChangePath, source, accumulator);
                    }
                    else {
                        // no complete child available or no change
                        newEventCache = oldEventSnap.getNode();
                    }
                }
            }
            return viewCache.updateEventSnap(newEventCache, oldEventSnap.isFullyInitialized() || changePath.isEmpty(), this.filter_.filtersNodes());
        }
    };
    /**
     * @param {!ViewCache} oldViewCache
     * @param {!Path} changePath
     * @param {!Node} changedSnap
     * @param {!WriteTreeRef} writesCache
     * @param {?Node} completeCache
     * @param {boolean} filterServerNode
     * @param {!ChildChangeAccumulator} accumulator
     * @return {!ViewCache}
     * @private
     */
    ViewProcessor.prototype.applyServerOverwrite_ = function (oldViewCache, changePath, changedSnap, writesCache, completeCache, filterServerNode, accumulator) {
        var oldServerSnap = oldViewCache.getServerCache();
        var newServerCache;
        var serverFilter = filterServerNode
            ? this.filter_
            : this.filter_.getIndexedFilter();
        if (changePath.isEmpty()) {
            newServerCache = serverFilter.updateFullNode(oldServerSnap.getNode(), changedSnap, null);
        }
        else if (serverFilter.filtersNodes() && !oldServerSnap.isFiltered()) {
            // we want to filter the server node, but we didn't filter the server node yet, so simulate a full update
            var newServerNode = oldServerSnap
                .getNode()
                .updateChild(changePath, changedSnap);
            newServerCache = serverFilter.updateFullNode(oldServerSnap.getNode(), newServerNode, null);
        }
        else {
            var childKey = changePath.getFront();
            if (!oldServerSnap.isCompleteForPath(changePath) &&
                changePath.getLength() > 1) {
                // We don't update incomplete nodes with updates intended for other listeners
                return oldViewCache;
            }
            var childChangePath = changePath.popFront();
            var childNode = oldServerSnap.getNode().getImmediateChild(childKey);
            var newChildNode = childNode.updateChild(childChangePath, changedSnap);
            if (childKey == '.priority') {
                newServerCache = serverFilter.updatePriority(oldServerSnap.getNode(), newChildNode);
            }
            else {
                newServerCache = serverFilter.updateChild(oldServerSnap.getNode(), childKey, newChildNode, childChangePath, CompleteChildSource_1.NO_COMPLETE_CHILD_SOURCE, null);
            }
        }
        var newViewCache = oldViewCache.updateServerSnap(newServerCache, oldServerSnap.isFullyInitialized() || changePath.isEmpty(), serverFilter.filtersNodes());
        var source = new CompleteChildSource_1.WriteTreeCompleteChildSource(writesCache, newViewCache, completeCache);
        return this.generateEventCacheAfterServerEvent_(newViewCache, changePath, writesCache, source, accumulator);
    };
    /**
     * @param {!ViewCache} oldViewCache
     * @param {!Path} changePath
     * @param {!Node} changedSnap
     * @param {!WriteTreeRef} writesCache
     * @param {?Node} completeCache
     * @param {!ChildChangeAccumulator} accumulator
     * @return {!ViewCache}
     * @private
     */
    ViewProcessor.prototype.applyUserOverwrite_ = function (oldViewCache, changePath, changedSnap, writesCache, completeCache, accumulator) {
        var oldEventSnap = oldViewCache.getEventCache();
        var newViewCache, newEventCache;
        var source = new CompleteChildSource_1.WriteTreeCompleteChildSource(writesCache, oldViewCache, completeCache);
        if (changePath.isEmpty()) {
            newEventCache = this.filter_.updateFullNode(oldViewCache.getEventCache().getNode(), changedSnap, accumulator);
            newViewCache = oldViewCache.updateEventSnap(newEventCache, true, this.filter_.filtersNodes());
        }
        else {
            var childKey = changePath.getFront();
            if (childKey === '.priority') {
                newEventCache = this.filter_.updatePriority(oldViewCache.getEventCache().getNode(), changedSnap);
                newViewCache = oldViewCache.updateEventSnap(newEventCache, oldEventSnap.isFullyInitialized(), oldEventSnap.isFiltered());
            }
            else {
                var childChangePath = changePath.popFront();
                var oldChild = oldEventSnap.getNode().getImmediateChild(childKey);
                var newChild = void 0;
                if (childChangePath.isEmpty()) {
                    // Child overwrite, we can replace the child
                    newChild = changedSnap;
                }
                else {
                    var childNode = source.getCompleteChild(childKey);
                    if (childNode != null) {
                        if (childChangePath.getBack() === '.priority' &&
                            childNode.getChild(childChangePath.parent()).isEmpty()) {
                            // This is a priority update on an empty node. If this node exists on the server, the
                            // server will send down the priority in the update, so ignore for now
                            newChild = childNode;
                        }
                        else {
                            newChild = childNode.updateChild(childChangePath, changedSnap);
                        }
                    }
                    else {
                        // There is no complete child node available
                        newChild = ChildrenNode_1.ChildrenNode.EMPTY_NODE;
                    }
                }
                if (!oldChild.equals(newChild)) {
                    var newEventSnap = this.filter_.updateChild(oldEventSnap.getNode(), childKey, newChild, childChangePath, source, accumulator);
                    newViewCache = oldViewCache.updateEventSnap(newEventSnap, oldEventSnap.isFullyInitialized(), this.filter_.filtersNodes());
                }
                else {
                    newViewCache = oldViewCache;
                }
            }
        }
        return newViewCache;
    };
    /**
     * @param {!ViewCache} viewCache
     * @param {string} childKey
     * @return {boolean}
     * @private
     */
    ViewProcessor.cacheHasChild_ = function (viewCache, childKey) {
        return viewCache.getEventCache().isCompleteForChild(childKey);
    };
    /**
     * @param {!ViewCache} viewCache
     * @param {!Path} path
     * @param {ImmutableTree.<!Node>} changedChildren
     * @param {!WriteTreeRef} writesCache
     * @param {?Node} serverCache
     * @param {!ChildChangeAccumulator} accumulator
     * @return {!ViewCache}
     * @private
     */
    ViewProcessor.prototype.applyUserMerge_ = function (viewCache, path, changedChildren, writesCache, serverCache, accumulator) {
        var _this = this;
        // HACK: In the case of a limit query, there may be some changes that bump things out of the
        // window leaving room for new items.  It's important we process these changes first, so we
        // iterate the changes twice, first processing any that affect items currently in view.
        // TODO: I consider an item "in view" if cacheHasChild is true, which checks both the server
        // and event snap.  I'm not sure if this will result in edge cases when a child is in one but
        // not the other.
        var curViewCache = viewCache;
        changedChildren.foreach(function (relativePath, childNode) {
            var writePath = path.child(relativePath);
            if (ViewProcessor.cacheHasChild_(viewCache, writePath.getFront())) {
                curViewCache = _this.applyUserOverwrite_(curViewCache, writePath, childNode, writesCache, serverCache, accumulator);
            }
        });
        changedChildren.foreach(function (relativePath, childNode) {
            var writePath = path.child(relativePath);
            if (!ViewProcessor.cacheHasChild_(viewCache, writePath.getFront())) {
                curViewCache = _this.applyUserOverwrite_(curViewCache, writePath, childNode, writesCache, serverCache, accumulator);
            }
        });
        return curViewCache;
    };
    /**
     * @param {!Node} node
     * @param {ImmutableTree.<!Node>} merge
     * @return {!Node}
     * @private
     */
    ViewProcessor.prototype.applyMerge_ = function (node, merge) {
        merge.foreach(function (relativePath, childNode) {
            node = node.updateChild(relativePath, childNode);
        });
        return node;
    };
    /**
     * @param {!ViewCache} viewCache
     * @param {!Path} path
     * @param {!ImmutableTree.<!Node>} changedChildren
     * @param {!WriteTreeRef} writesCache
     * @param {?Node} serverCache
     * @param {boolean} filterServerNode
     * @param {!ChildChangeAccumulator} accumulator
     * @return {!ViewCache}
     * @private
     */
    ViewProcessor.prototype.applyServerMerge_ = function (viewCache, path, changedChildren, writesCache, serverCache, filterServerNode, accumulator) {
        var _this = this;
        // If we don't have a cache yet, this merge was intended for a previously listen in the same location. Ignore it and
        // wait for the complete data update coming soon.
        if (viewCache
            .getServerCache()
            .getNode()
            .isEmpty() &&
            !viewCache.getServerCache().isFullyInitialized()) {
            return viewCache;
        }
        // HACK: In the case of a limit query, there may be some changes that bump things out of the
        // window leaving room for new items.  It's important we process these changes first, so we
        // iterate the changes twice, first processing any that affect items currently in view.
        // TODO: I consider an item "in view" if cacheHasChild is true, which checks both the server
        // and event snap.  I'm not sure if this will result in edge cases when a child is in one but
        // not the other.
        var curViewCache = viewCache;
        var viewMergeTree;
        if (path.isEmpty()) {
            viewMergeTree = changedChildren;
        }
        else {
            viewMergeTree = ImmutableTree_1.ImmutableTree.Empty.setTree(path, changedChildren);
        }
        var serverNode = viewCache.getServerCache().getNode();
        viewMergeTree.children.inorderTraversal(function (childKey, childTree) {
            if (serverNode.hasChild(childKey)) {
                var serverChild = viewCache
                    .getServerCache()
                    .getNode()
                    .getImmediateChild(childKey);
                var newChild = _this.applyMerge_(serverChild, childTree);
                curViewCache = _this.applyServerOverwrite_(curViewCache, new Path_1.Path(childKey), newChild, writesCache, serverCache, filterServerNode, accumulator);
            }
        });
        viewMergeTree.children.inorderTraversal(function (childKey, childMergeTree) {
            var isUnknownDeepMerge = !viewCache.getServerCache().isCompleteForChild(childKey) &&
                childMergeTree.value == null;
            if (!serverNode.hasChild(childKey) && !isUnknownDeepMerge) {
                var serverChild = viewCache
                    .getServerCache()
                    .getNode()
                    .getImmediateChild(childKey);
                var newChild = _this.applyMerge_(serverChild, childMergeTree);
                curViewCache = _this.applyServerOverwrite_(curViewCache, new Path_1.Path(childKey), newChild, writesCache, serverCache, filterServerNode, accumulator);
            }
        });
        return curViewCache;
    };
    /**
     * @param {!ViewCache} viewCache
     * @param {!Path} ackPath
     * @param {!ImmutableTree<!boolean>} affectedTree
     * @param {!WriteTreeRef} writesCache
     * @param {?Node} completeCache
     * @param {!ChildChangeAccumulator} accumulator
     * @return {!ViewCache}
     * @private
     */
    ViewProcessor.prototype.ackUserWrite_ = function (viewCache, ackPath, affectedTree, writesCache, completeCache, accumulator) {
        if (writesCache.shadowingWrite(ackPath) != null) {
            return viewCache;
        }
        // Only filter server node if it is currently filtered
        var filterServerNode = viewCache.getServerCache().isFiltered();
        // Essentially we'll just get our existing server cache for the affected paths and re-apply it as a server update
        // now that it won't be shadowed.
        var serverCache = viewCache.getServerCache();
        if (affectedTree.value != null) {
            // This is an overwrite.
            if ((ackPath.isEmpty() && serverCache.isFullyInitialized()) ||
                serverCache.isCompleteForPath(ackPath)) {
                return this.applyServerOverwrite_(viewCache, ackPath, serverCache.getNode().getChild(ackPath), writesCache, completeCache, filterServerNode, accumulator);
            }
            else if (ackPath.isEmpty()) {
                // This is a goofy edge case where we are acking data at this location but don't have full data.  We
                // should just re-apply whatever we have in our cache as a merge.
                var changedChildren_1 = ImmutableTree_1.ImmutableTree.Empty;
                serverCache.getNode().forEachChild(KeyIndex_1.KEY_INDEX, function (name, node) {
                    changedChildren_1 = changedChildren_1.set(new Path_1.Path(name), node);
                });
                return this.applyServerMerge_(viewCache, ackPath, changedChildren_1, writesCache, completeCache, filterServerNode, accumulator);
            }
            else {
                return viewCache;
            }
        }
        else {
            // This is a merge.
            var changedChildren_2 = ImmutableTree_1.ImmutableTree.Empty;
            affectedTree.foreach(function (mergePath, value) {
                var serverCachePath = ackPath.child(mergePath);
                if (serverCache.isCompleteForPath(serverCachePath)) {
                    changedChildren_2 = changedChildren_2.set(mergePath, serverCache.getNode().getChild(serverCachePath));
                }
            });
            return this.applyServerMerge_(viewCache, ackPath, changedChildren_2, writesCache, completeCache, filterServerNode, accumulator);
        }
    };
    /**
     * @param {!ViewCache} viewCache
     * @param {!Path} path
     * @param {!WriteTreeRef} writesCache
     * @param {!ChildChangeAccumulator} accumulator
     * @return {!ViewCache}
     * @private
     */
    ViewProcessor.prototype.listenComplete_ = function (viewCache, path, writesCache, accumulator) {
        var oldServerNode = viewCache.getServerCache();
        var newViewCache = viewCache.updateServerSnap(oldServerNode.getNode(), oldServerNode.isFullyInitialized() || path.isEmpty(), oldServerNode.isFiltered());
        return this.generateEventCacheAfterServerEvent_(newViewCache, path, writesCache, CompleteChildSource_1.NO_COMPLETE_CHILD_SOURCE, accumulator);
    };
    /**
     * @param {!ViewCache} viewCache
     * @param {!Path} path
     * @param {!WriteTreeRef} writesCache
     * @param {?Node} completeServerCache
     * @param {!ChildChangeAccumulator} accumulator
     * @return {!ViewCache}
     * @private
     */
    ViewProcessor.prototype.revertUserWrite_ = function (viewCache, path, writesCache, completeServerCache, accumulator) {
        var complete;
        if (writesCache.shadowingWrite(path) != null) {
            return viewCache;
        }
        else {
            var source = new CompleteChildSource_1.WriteTreeCompleteChildSource(writesCache, viewCache, completeServerCache);
            var oldEventCache = viewCache.getEventCache().getNode();
            var newEventCache = void 0;
            if (path.isEmpty() || path.getFront() === '.priority') {
                var newNode = void 0;
                if (viewCache.getServerCache().isFullyInitialized()) {
                    newNode = writesCache.calcCompleteEventCache(viewCache.getCompleteServerSnap());
                }
                else {
                    var serverChildren = viewCache.getServerCache().getNode();
                    util_1.assert(serverChildren instanceof ChildrenNode_1.ChildrenNode, 'serverChildren would be complete if leaf node');
                    newNode = writesCache.calcCompleteEventChildren(serverChildren);
                }
                newNode = newNode;
                newEventCache = this.filter_.updateFullNode(oldEventCache, newNode, accumulator);
            }
            else {
                var childKey = path.getFront();
                var newChild = writesCache.calcCompleteChild(childKey, viewCache.getServerCache());
                if (newChild == null &&
                    viewCache.getServerCache().isCompleteForChild(childKey)) {
                    newChild = oldEventCache.getImmediateChild(childKey);
                }
                if (newChild != null) {
                    newEventCache = this.filter_.updateChild(oldEventCache, childKey, newChild, path.popFront(), source, accumulator);
                }
                else if (viewCache
                    .getEventCache()
                    .getNode()
                    .hasChild(childKey)) {
                    // No complete child available, delete the existing one, if any
                    newEventCache = this.filter_.updateChild(oldEventCache, childKey, ChildrenNode_1.ChildrenNode.EMPTY_NODE, path.popFront(), source, accumulator);
                }
                else {
                    newEventCache = oldEventCache;
                }
                if (newEventCache.isEmpty() &&
                    viewCache.getServerCache().isFullyInitialized()) {
                    // We might have reverted all child writes. Maybe the old event was a leaf node
                    complete = writesCache.calcCompleteEventCache(viewCache.getCompleteServerSnap());
                    if (complete.isLeafNode()) {
                        newEventCache = this.filter_.updateFullNode(newEventCache, complete, accumulator);
                    }
                }
            }
            complete =
                viewCache.getServerCache().isFullyInitialized() ||
                    writesCache.shadowingWrite(Path_1.Path.Empty) != null;
            return viewCache.updateEventSnap(newEventCache, complete, this.filter_.filtersNodes());
        }
    };
    return ViewProcessor;
}());
exports.ViewProcessor = ViewProcessor;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/view/filter/IndexedFilter.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/view/filter/IndexedFilter.js ***!
  \****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var Change_1 = __webpack_require__(/*! ../Change */ "./node_modules/@firebase/database/dist/cjs/src/core/view/Change.js");
var ChildrenNode_1 = __webpack_require__(/*! ../../snap/ChildrenNode */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/ChildrenNode.js");
var PriorityIndex_1 = __webpack_require__(/*! ../../snap/indexes/PriorityIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PriorityIndex.js");
/**
 * Doesn't really filter nodes but applies an index to the node and keeps track of any changes
 *
 * @constructor
 * @implements {NodeFilter}
 * @param {!Index} index
 */
var IndexedFilter = /** @class */ (function () {
    function IndexedFilter(index_) {
        this.index_ = index_;
    }
    IndexedFilter.prototype.updateChild = function (snap, key, newChild, affectedPath, source, optChangeAccumulator) {
        util_1.assert(snap.isIndexed(this.index_), 'A node must be indexed if only a child is updated');
        var oldChild = snap.getImmediateChild(key);
        // Check if anything actually changed.
        if (oldChild.getChild(affectedPath).equals(newChild.getChild(affectedPath))) {
            // There's an edge case where a child can enter or leave the view because affectedPath was set to null.
            // In this case, affectedPath will appear null in both the old and new snapshots.  So we need
            // to avoid treating these cases as "nothing changed."
            if (oldChild.isEmpty() == newChild.isEmpty()) {
                // Nothing changed.
                // This assert should be valid, but it's expensive (can dominate perf testing) so don't actually do it.
                //assert(oldChild.equals(newChild), 'Old and new snapshots should be equal.');
                return snap;
            }
        }
        if (optChangeAccumulator != null) {
            if (newChild.isEmpty()) {
                if (snap.hasChild(key)) {
                    optChangeAccumulator.trackChildChange(Change_1.Change.childRemovedChange(key, oldChild));
                }
                else {
                    util_1.assert(snap.isLeafNode(), 'A child remove without an old child only makes sense on a leaf node');
                }
            }
            else if (oldChild.isEmpty()) {
                optChangeAccumulator.trackChildChange(Change_1.Change.childAddedChange(key, newChild));
            }
            else {
                optChangeAccumulator.trackChildChange(Change_1.Change.childChangedChange(key, newChild, oldChild));
            }
        }
        if (snap.isLeafNode() && newChild.isEmpty()) {
            return snap;
        }
        else {
            // Make sure the node is indexed
            return snap.updateImmediateChild(key, newChild).withIndex(this.index_);
        }
    };
    /**
     * @inheritDoc
     */
    IndexedFilter.prototype.updateFullNode = function (oldSnap, newSnap, optChangeAccumulator) {
        if (optChangeAccumulator != null) {
            if (!oldSnap.isLeafNode()) {
                oldSnap.forEachChild(PriorityIndex_1.PRIORITY_INDEX, function (key, childNode) {
                    if (!newSnap.hasChild(key)) {
                        optChangeAccumulator.trackChildChange(Change_1.Change.childRemovedChange(key, childNode));
                    }
                });
            }
            if (!newSnap.isLeafNode()) {
                newSnap.forEachChild(PriorityIndex_1.PRIORITY_INDEX, function (key, childNode) {
                    if (oldSnap.hasChild(key)) {
                        var oldChild = oldSnap.getImmediateChild(key);
                        if (!oldChild.equals(childNode)) {
                            optChangeAccumulator.trackChildChange(Change_1.Change.childChangedChange(key, childNode, oldChild));
                        }
                    }
                    else {
                        optChangeAccumulator.trackChildChange(Change_1.Change.childAddedChange(key, childNode));
                    }
                });
            }
        }
        return newSnap.withIndex(this.index_);
    };
    /**
     * @inheritDoc
     */
    IndexedFilter.prototype.updatePriority = function (oldSnap, newPriority) {
        if (oldSnap.isEmpty()) {
            return ChildrenNode_1.ChildrenNode.EMPTY_NODE;
        }
        else {
            return oldSnap.updatePriority(newPriority);
        }
    };
    /**
     * @inheritDoc
     */
    IndexedFilter.prototype.filtersNodes = function () {
        return false;
    };
    /**
     * @inheritDoc
     */
    IndexedFilter.prototype.getIndexedFilter = function () {
        return this;
    };
    /**
     * @inheritDoc
     */
    IndexedFilter.prototype.getIndex = function () {
        return this.index_;
    };
    return IndexedFilter;
}());
exports.IndexedFilter = IndexedFilter;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/view/filter/LimitedFilter.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/view/filter/LimitedFilter.js ***!
  \****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var RangedFilter_1 = __webpack_require__(/*! ./RangedFilter */ "./node_modules/@firebase/database/dist/cjs/src/core/view/filter/RangedFilter.js");
var ChildrenNode_1 = __webpack_require__(/*! ../../snap/ChildrenNode */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/ChildrenNode.js");
var Node_1 = __webpack_require__(/*! ../../snap/Node */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/Node.js");
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var Change_1 = __webpack_require__(/*! ../Change */ "./node_modules/@firebase/database/dist/cjs/src/core/view/Change.js");
/**
 * Applies a limit and a range to a node and uses RangedFilter to do the heavy lifting where possible
 *
 * @constructor
 * @implements {NodeFilter}
 */
var LimitedFilter = /** @class */ (function () {
    /**
     * @param {!QueryParams} params
     */
    function LimitedFilter(params) {
        this.rangedFilter_ = new RangedFilter_1.RangedFilter(params);
        this.index_ = params.getIndex();
        this.limit_ = params.getLimit();
        this.reverse_ = !params.isViewFromLeft();
    }
    /**
     * @inheritDoc
     */
    LimitedFilter.prototype.updateChild = function (snap, key, newChild, affectedPath, source, optChangeAccumulator) {
        if (!this.rangedFilter_.matches(new Node_1.NamedNode(key, newChild))) {
            newChild = ChildrenNode_1.ChildrenNode.EMPTY_NODE;
        }
        if (snap.getImmediateChild(key).equals(newChild)) {
            // No change
            return snap;
        }
        else if (snap.numChildren() < this.limit_) {
            return this.rangedFilter_
                .getIndexedFilter()
                .updateChild(snap, key, newChild, affectedPath, source, optChangeAccumulator);
        }
        else {
            return this.fullLimitUpdateChild_(snap, key, newChild, source, optChangeAccumulator);
        }
    };
    /**
     * @inheritDoc
     */
    LimitedFilter.prototype.updateFullNode = function (oldSnap, newSnap, optChangeAccumulator) {
        var filtered;
        if (newSnap.isLeafNode() || newSnap.isEmpty()) {
            // Make sure we have a children node with the correct index, not a leaf node;
            filtered = ChildrenNode_1.ChildrenNode.EMPTY_NODE.withIndex(this.index_);
        }
        else {
            if (this.limit_ * 2 < newSnap.numChildren() &&
                newSnap.isIndexed(this.index_)) {
                // Easier to build up a snapshot, since what we're given has more than twice the elements we want
                filtered = ChildrenNode_1.ChildrenNode.EMPTY_NODE.withIndex(this.index_);
                // anchor to the startPost, endPost, or last element as appropriate
                var iterator = void 0;
                if (this.reverse_) {
                    iterator = newSnap.getReverseIteratorFrom(this.rangedFilter_.getEndPost(), this.index_);
                }
                else {
                    iterator = newSnap.getIteratorFrom(this.rangedFilter_.getStartPost(), this.index_);
                }
                var count = 0;
                while (iterator.hasNext() && count < this.limit_) {
                    var next = iterator.getNext();
                    var inRange = void 0;
                    if (this.reverse_) {
                        inRange =
                            this.index_.compare(this.rangedFilter_.getStartPost(), next) <= 0;
                    }
                    else {
                        inRange =
                            this.index_.compare(next, this.rangedFilter_.getEndPost()) <= 0;
                    }
                    if (inRange) {
                        filtered = filtered.updateImmediateChild(next.name, next.node);
                        count++;
                    }
                    else {
                        // if we have reached the end post, we cannot keep adding elemments
                        break;
                    }
                }
            }
            else {
                // The snap contains less than twice the limit. Faster to delete from the snap than build up a new one
                filtered = newSnap.withIndex(this.index_);
                // Don't support priorities on queries
                filtered = filtered.updatePriority(ChildrenNode_1.ChildrenNode.EMPTY_NODE);
                var startPost = void 0;
                var endPost = void 0;
                var cmp = void 0;
                var iterator = void 0;
                if (this.reverse_) {
                    iterator = filtered.getReverseIterator(this.index_);
                    startPost = this.rangedFilter_.getEndPost();
                    endPost = this.rangedFilter_.getStartPost();
                    var indexCompare_1 = this.index_.getCompare();
                    cmp = function (a, b) { return indexCompare_1(b, a); };
                }
                else {
                    iterator = filtered.getIterator(this.index_);
                    startPost = this.rangedFilter_.getStartPost();
                    endPost = this.rangedFilter_.getEndPost();
                    cmp = this.index_.getCompare();
                }
                var count = 0;
                var foundStartPost = false;
                while (iterator.hasNext()) {
                    var next = iterator.getNext();
                    if (!foundStartPost && cmp(startPost, next) <= 0) {
                        // start adding
                        foundStartPost = true;
                    }
                    var inRange = foundStartPost && count < this.limit_ && cmp(next, endPost) <= 0;
                    if (inRange) {
                        count++;
                    }
                    else {
                        filtered = filtered.updateImmediateChild(next.name, ChildrenNode_1.ChildrenNode.EMPTY_NODE);
                    }
                }
            }
        }
        return this.rangedFilter_
            .getIndexedFilter()
            .updateFullNode(oldSnap, filtered, optChangeAccumulator);
    };
    /**
     * @inheritDoc
     */
    LimitedFilter.prototype.updatePriority = function (oldSnap, newPriority) {
        // Don't support priorities on queries
        return oldSnap;
    };
    /**
     * @inheritDoc
     */
    LimitedFilter.prototype.filtersNodes = function () {
        return true;
    };
    /**
     * @inheritDoc
     */
    LimitedFilter.prototype.getIndexedFilter = function () {
        return this.rangedFilter_.getIndexedFilter();
    };
    /**
     * @inheritDoc
     */
    LimitedFilter.prototype.getIndex = function () {
        return this.index_;
    };
    /**
     * @param {!Node} snap
     * @param {string} childKey
     * @param {!Node} childSnap
     * @param {!CompleteChildSource} source
     * @param {?ChildChangeAccumulator} changeAccumulator
     * @return {!Node}
     * @private
     */
    LimitedFilter.prototype.fullLimitUpdateChild_ = function (snap, childKey, childSnap, source, changeAccumulator) {
        // TODO: rename all cache stuff etc to general snap terminology
        var cmp;
        if (this.reverse_) {
            var indexCmp_1 = this.index_.getCompare();
            cmp = function (a, b) { return indexCmp_1(b, a); };
        }
        else {
            cmp = this.index_.getCompare();
        }
        var oldEventCache = snap;
        util_1.assert(oldEventCache.numChildren() == this.limit_, '');
        var newChildNamedNode = new Node_1.NamedNode(childKey, childSnap);
        var windowBoundary = this.reverse_
            ? oldEventCache.getFirstChild(this.index_)
            : oldEventCache.getLastChild(this.index_);
        var inRange = this.rangedFilter_.matches(newChildNamedNode);
        if (oldEventCache.hasChild(childKey)) {
            var oldChildSnap = oldEventCache.getImmediateChild(childKey);
            var nextChild = source.getChildAfterChild(this.index_, windowBoundary, this.reverse_);
            while (nextChild != null &&
                (nextChild.name == childKey || oldEventCache.hasChild(nextChild.name))) {
                // There is a weird edge case where a node is updated as part of a merge in the write tree, but hasn't
                // been applied to the limited filter yet. Ignore this next child which will be updated later in
                // the limited filter...
                nextChild = source.getChildAfterChild(this.index_, nextChild, this.reverse_);
            }
            var compareNext = nextChild == null ? 1 : cmp(nextChild, newChildNamedNode);
            var remainsInWindow = inRange && !childSnap.isEmpty() && compareNext >= 0;
            if (remainsInWindow) {
                if (changeAccumulator != null) {
                    changeAccumulator.trackChildChange(Change_1.Change.childChangedChange(childKey, childSnap, oldChildSnap));
                }
                return oldEventCache.updateImmediateChild(childKey, childSnap);
            }
            else {
                if (changeAccumulator != null) {
                    changeAccumulator.trackChildChange(Change_1.Change.childRemovedChange(childKey, oldChildSnap));
                }
                var newEventCache = oldEventCache.updateImmediateChild(childKey, ChildrenNode_1.ChildrenNode.EMPTY_NODE);
                var nextChildInRange = nextChild != null && this.rangedFilter_.matches(nextChild);
                if (nextChildInRange) {
                    if (changeAccumulator != null) {
                        changeAccumulator.trackChildChange(Change_1.Change.childAddedChange(nextChild.name, nextChild.node));
                    }
                    return newEventCache.updateImmediateChild(nextChild.name, nextChild.node);
                }
                else {
                    return newEventCache;
                }
            }
        }
        else if (childSnap.isEmpty()) {
            // we're deleting a node, but it was not in the window, so ignore it
            return snap;
        }
        else if (inRange) {
            if (cmp(windowBoundary, newChildNamedNode) >= 0) {
                if (changeAccumulator != null) {
                    changeAccumulator.trackChildChange(Change_1.Change.childRemovedChange(windowBoundary.name, windowBoundary.node));
                    changeAccumulator.trackChildChange(Change_1.Change.childAddedChange(childKey, childSnap));
                }
                return oldEventCache
                    .updateImmediateChild(childKey, childSnap)
                    .updateImmediateChild(windowBoundary.name, ChildrenNode_1.ChildrenNode.EMPTY_NODE);
            }
            else {
                return snap;
            }
        }
        else {
            return snap;
        }
    };
    return LimitedFilter;
}());
exports.LimitedFilter = LimitedFilter;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/core/view/filter/RangedFilter.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/core/view/filter/RangedFilter.js ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var IndexedFilter_1 = __webpack_require__(/*! ./IndexedFilter */ "./node_modules/@firebase/database/dist/cjs/src/core/view/filter/IndexedFilter.js");
var PriorityIndex_1 = __webpack_require__(/*! ../../snap/indexes/PriorityIndex */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/indexes/PriorityIndex.js");
var Node_1 = __webpack_require__(/*! ../../../core/snap/Node */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/Node.js");
var ChildrenNode_1 = __webpack_require__(/*! ../../snap/ChildrenNode */ "./node_modules/@firebase/database/dist/cjs/src/core/snap/ChildrenNode.js");
/**
 * Filters nodes by range and uses an IndexFilter to track any changes after filtering the node
 *
 * @constructor
 * @implements {NodeFilter}
 */
var RangedFilter = /** @class */ (function () {
    /**
     * @param {!QueryParams} params
     */
    function RangedFilter(params) {
        this.indexedFilter_ = new IndexedFilter_1.IndexedFilter(params.getIndex());
        this.index_ = params.getIndex();
        this.startPost_ = RangedFilter.getStartPost_(params);
        this.endPost_ = RangedFilter.getEndPost_(params);
    }
    /**
     * @return {!NamedNode}
     */
    RangedFilter.prototype.getStartPost = function () {
        return this.startPost_;
    };
    /**
     * @return {!NamedNode}
     */
    RangedFilter.prototype.getEndPost = function () {
        return this.endPost_;
    };
    /**
     * @param {!NamedNode} node
     * @return {boolean}
     */
    RangedFilter.prototype.matches = function (node) {
        return (this.index_.compare(this.getStartPost(), node) <= 0 &&
            this.index_.compare(node, this.getEndPost()) <= 0);
    };
    /**
     * @inheritDoc
     */
    RangedFilter.prototype.updateChild = function (snap, key, newChild, affectedPath, source, optChangeAccumulator) {
        if (!this.matches(new Node_1.NamedNode(key, newChild))) {
            newChild = ChildrenNode_1.ChildrenNode.EMPTY_NODE;
        }
        return this.indexedFilter_.updateChild(snap, key, newChild, affectedPath, source, optChangeAccumulator);
    };
    /**
     * @inheritDoc
     */
    RangedFilter.prototype.updateFullNode = function (oldSnap, newSnap, optChangeAccumulator) {
        if (newSnap.isLeafNode()) {
            // Make sure we have a children node with the correct index, not a leaf node;
            newSnap = ChildrenNode_1.ChildrenNode.EMPTY_NODE;
        }
        var filtered = newSnap.withIndex(this.index_);
        // Don't support priorities on queries
        filtered = filtered.updatePriority(ChildrenNode_1.ChildrenNode.EMPTY_NODE);
        var self = this;
        newSnap.forEachChild(PriorityIndex_1.PRIORITY_INDEX, function (key, childNode) {
            if (!self.matches(new Node_1.NamedNode(key, childNode))) {
                filtered = filtered.updateImmediateChild(key, ChildrenNode_1.ChildrenNode.EMPTY_NODE);
            }
        });
        return this.indexedFilter_.updateFullNode(oldSnap, filtered, optChangeAccumulator);
    };
    /**
     * @inheritDoc
     */
    RangedFilter.prototype.updatePriority = function (oldSnap, newPriority) {
        // Don't support priorities on queries
        return oldSnap;
    };
    /**
     * @inheritDoc
     */
    RangedFilter.prototype.filtersNodes = function () {
        return true;
    };
    /**
     * @inheritDoc
     */
    RangedFilter.prototype.getIndexedFilter = function () {
        return this.indexedFilter_;
    };
    /**
     * @inheritDoc
     */
    RangedFilter.prototype.getIndex = function () {
        return this.index_;
    };
    /**
     * @param {!QueryParams} params
     * @return {!NamedNode}
     * @private
     */
    RangedFilter.getStartPost_ = function (params) {
        if (params.hasStart()) {
            var startName = params.getIndexStartName();
            return params.getIndex().makePost(params.getIndexStartValue(), startName);
        }
        else {
            return params.getIndex().minPost();
        }
    };
    /**
     * @param {!QueryParams} params
     * @return {!NamedNode}
     * @private
     */
    RangedFilter.getEndPost_ = function (params) {
        if (params.hasEnd()) {
            var endName = params.getIndexEndName();
            return params.getIndex().makePost(params.getIndexEndValue(), endName);
        }
        else {
            return params.getIndex().maxPost();
        }
    };
    return RangedFilter;
}());
exports.RangedFilter = RangedFilter;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/realtime/BrowserPollConnection.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/realtime/BrowserPollConnection.js ***!
  \****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! ../core/util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var CountedSet_1 = __webpack_require__(/*! ../core/util/CountedSet */ "./node_modules/@firebase/database/dist/cjs/src/core/util/CountedSet.js");
var StatsManager_1 = __webpack_require__(/*! ../core/stats/StatsManager */ "./node_modules/@firebase/database/dist/cjs/src/core/stats/StatsManager.js");
var PacketReceiver_1 = __webpack_require__(/*! ./polling/PacketReceiver */ "./node_modules/@firebase/database/dist/cjs/src/realtime/polling/PacketReceiver.js");
var Constants_1 = __webpack_require__(/*! ./Constants */ "./node_modules/@firebase/database/dist/cjs/src/realtime/Constants.js");
var util_2 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_3 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
// URL query parameters associated with longpolling
exports.FIREBASE_LONGPOLL_START_PARAM = 'start';
exports.FIREBASE_LONGPOLL_CLOSE_COMMAND = 'close';
exports.FIREBASE_LONGPOLL_COMMAND_CB_NAME = 'pLPCommand';
exports.FIREBASE_LONGPOLL_DATA_CB_NAME = 'pRTLPCB';
exports.FIREBASE_LONGPOLL_ID_PARAM = 'id';
exports.FIREBASE_LONGPOLL_PW_PARAM = 'pw';
exports.FIREBASE_LONGPOLL_SERIAL_PARAM = 'ser';
exports.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM = 'cb';
exports.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM = 'seg';
exports.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET = 'ts';
exports.FIREBASE_LONGPOLL_DATA_PARAM = 'd';
exports.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM = 'disconn';
exports.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM = 'dframe';
//Data size constants.
//TODO: Perf: the maximum length actually differs from browser to browser.
// We should check what browser we're on and set accordingly.
var MAX_URL_DATA_SIZE = 1870;
var SEG_HEADER_SIZE = 30; //ie: &seg=8299234&ts=982389123&d=
var MAX_PAYLOAD_SIZE = MAX_URL_DATA_SIZE - SEG_HEADER_SIZE;
/**
 * Keepalive period
 * send a fresh request at minimum every 25 seconds. Opera has a maximum request
 * length of 30 seconds that we can't exceed.
 * @const
 * @type {number}
 */
var KEEPALIVE_REQUEST_INTERVAL = 25000;
/**
 * How long to wait before aborting a long-polling connection attempt.
 * @const
 * @type {number}
 */
var LP_CONNECT_TIMEOUT = 30000;
/**
 * This class manages a single long-polling connection.
 *
 * @constructor
 * @implements {Transport}
 */
var BrowserPollConnection = /** @class */ (function () {
    /**
     * @param {string} connId An identifier for this connection, used for logging
     * @param {RepoInfo} repoInfo The info for the endpoint to send data to.
     * @param {string=} transportSessionId Optional transportSessionid if we are reconnecting for an existing
     *                                         transport session
     * @param {string=}  lastSessionId Optional lastSessionId if the PersistentConnection has already created a
     *                                     connection previously
     */
    function BrowserPollConnection(connId, repoInfo, transportSessionId, lastSessionId) {
        this.connId = connId;
        this.repoInfo = repoInfo;
        this.transportSessionId = transportSessionId;
        this.lastSessionId = lastSessionId;
        this.bytesSent = 0;
        this.bytesReceived = 0;
        this.everConnected_ = false;
        this.log_ = util_1.logWrapper(connId);
        this.stats_ = StatsManager_1.StatsManager.getCollection(repoInfo);
        this.urlFn = function (params) {
            return repoInfo.connectionURL(Constants_1.LONG_POLLING, params);
        };
    }
    /**
     *
     * @param {function(Object)} onMessage Callback when messages arrive
     * @param {function()} onDisconnect Callback with connection lost.
     */
    BrowserPollConnection.prototype.open = function (onMessage, onDisconnect) {
        var _this = this;
        this.curSegmentNum = 0;
        this.onDisconnect_ = onDisconnect;
        this.myPacketOrderer = new PacketReceiver_1.PacketReceiver(onMessage);
        this.isClosed_ = false;
        this.connectTimeoutTimer_ = setTimeout(function () {
            _this.log_('Timed out trying to connect.');
            // Make sure we clear the host cache
            _this.onClosed_();
            _this.connectTimeoutTimer_ = null;
        }, Math.floor(LP_CONNECT_TIMEOUT));
        // Ensure we delay the creation of the iframe until the DOM is loaded.
        util_1.executeWhenDOMReady(function () {
            if (_this.isClosed_)
                return;
            //Set up a callback that gets triggered once a connection is set up.
            _this.scriptTagHolder = new FirebaseIFrameScriptHolder(function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                var command = args[0], arg1 = args[1], arg2 = args[2], arg3 = args[3], arg4 = args[4];
                _this.incrementIncomingBytes_(args);
                if (!_this.scriptTagHolder)
                    return; // we closed the connection.
                if (_this.connectTimeoutTimer_) {
                    clearTimeout(_this.connectTimeoutTimer_);
                    _this.connectTimeoutTimer_ = null;
                }
                _this.everConnected_ = true;
                if (command == exports.FIREBASE_LONGPOLL_START_PARAM) {
                    _this.id = arg1;
                    _this.password = arg2;
                }
                else if (command === exports.FIREBASE_LONGPOLL_CLOSE_COMMAND) {
                    // Don't clear the host cache. We got a response from the server, so we know it's reachable
                    if (arg1) {
                        // We aren't expecting any more data (other than what the server's already in the process of sending us
                        // through our already open polls), so don't send any more.
                        _this.scriptTagHolder.sendNewPolls = false;
                        // arg1 in this case is the last response number sent by the server. We should try to receive
                        // all of the responses up to this one before closing
                        _this.myPacketOrderer.closeAfter(arg1, function () {
                            _this.onClosed_();
                        });
                    }
                    else {
                        _this.onClosed_();
                    }
                }
                else {
                    throw new Error('Unrecognized command received: ' + command);
                }
            }, function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                var pN = args[0], data = args[1];
                _this.incrementIncomingBytes_(args);
                _this.myPacketOrderer.handleResponse(pN, data);
            }, function () {
                _this.onClosed_();
            }, _this.urlFn);
            //Send the initial request to connect. The serial number is simply to keep the browser from pulling previous results
            //from cache.
            var urlParams = {};
            urlParams[exports.FIREBASE_LONGPOLL_START_PARAM] = 't';
            urlParams[exports.FIREBASE_LONGPOLL_SERIAL_PARAM] = Math.floor(Math.random() * 100000000);
            if (_this.scriptTagHolder.uniqueCallbackIdentifier)
                urlParams[exports.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM] = _this.scriptTagHolder.uniqueCallbackIdentifier;
            urlParams[Constants_1.VERSION_PARAM] = Constants_1.PROTOCOL_VERSION;
            if (_this.transportSessionId) {
                urlParams[Constants_1.TRANSPORT_SESSION_PARAM] = _this.transportSessionId;
            }
            if (_this.lastSessionId) {
                urlParams[Constants_1.LAST_SESSION_PARAM] = _this.lastSessionId;
            }
            if (!util_3.isNodeSdk() &&
                typeof location !== 'undefined' &&
                location.href &&
                location.href.indexOf(Constants_1.FORGE_DOMAIN) !== -1) {
                urlParams[Constants_1.REFERER_PARAM] = Constants_1.FORGE_REF;
            }
            var connectURL = _this.urlFn(urlParams);
            _this.log_('Connecting via long-poll to ' + connectURL);
            _this.scriptTagHolder.addTag(connectURL, function () {
                /* do nothing */
            });
        });
    };
    /**
     * Call this when a handshake has completed successfully and we want to consider the connection established
     */
    BrowserPollConnection.prototype.start = function () {
        this.scriptTagHolder.startLongPoll(this.id, this.password);
        this.addDisconnectPingFrame(this.id, this.password);
    };
    /**
     * Forces long polling to be considered as a potential transport
     */
    BrowserPollConnection.forceAllow = function () {
        BrowserPollConnection.forceAllow_ = true;
    };
    /**
     * Forces longpolling to not be considered as a potential transport
     */
    BrowserPollConnection.forceDisallow = function () {
        BrowserPollConnection.forceDisallow_ = true;
    };
    // Static method, use string literal so it can be accessed in a generic way
    BrowserPollConnection.isAvailable = function () {
        // NOTE: In React-Native there's normally no 'document', but if you debug a React-Native app in
        // the Chrome debugger, 'document' is defined, but document.createElement is null (2015/06/08).
        return (BrowserPollConnection.forceAllow_ ||
            (!BrowserPollConnection.forceDisallow_ &&
                typeof document !== 'undefined' &&
                document.createElement != null &&
                !util_1.isChromeExtensionContentScript() &&
                !util_1.isWindowsStoreApp() &&
                !util_3.isNodeSdk()));
    };
    /**
     * No-op for polling
     */
    BrowserPollConnection.prototype.markConnectionHealthy = function () { };
    /**
     * Stops polling and cleans up the iframe
     * @private
     */
    BrowserPollConnection.prototype.shutdown_ = function () {
        this.isClosed_ = true;
        if (this.scriptTagHolder) {
            this.scriptTagHolder.close();
            this.scriptTagHolder = null;
        }
        //remove the disconnect frame, which will trigger an XHR call to the server to tell it we're leaving.
        if (this.myDisconnFrame) {
            document.body.removeChild(this.myDisconnFrame);
            this.myDisconnFrame = null;
        }
        if (this.connectTimeoutTimer_) {
            clearTimeout(this.connectTimeoutTimer_);
            this.connectTimeoutTimer_ = null;
        }
    };
    /**
     * Triggered when this transport is closed
     * @private
     */
    BrowserPollConnection.prototype.onClosed_ = function () {
        if (!this.isClosed_) {
            this.log_('Longpoll is closing itself');
            this.shutdown_();
            if (this.onDisconnect_) {
                this.onDisconnect_(this.everConnected_);
                this.onDisconnect_ = null;
            }
        }
    };
    /**
     * External-facing close handler. RealTime has requested we shut down. Kill our connection and tell the server
     * that we've left.
     */
    BrowserPollConnection.prototype.close = function () {
        if (!this.isClosed_) {
            this.log_('Longpoll is being closed.');
            this.shutdown_();
        }
    };
    /**
     * Send the JSON object down to the server. It will need to be stringified, base64 encoded, and then
     * broken into chunks (since URLs have a small maximum length).
     * @param {!Object} data The JSON data to transmit.
     */
    BrowserPollConnection.prototype.send = function (data) {
        var dataStr = util_2.stringify(data);
        this.bytesSent += dataStr.length;
        this.stats_.incrementCounter('bytes_sent', dataStr.length);
        //first, lets get the base64-encoded data
        var base64data = util_2.base64Encode(dataStr);
        //We can only fit a certain amount in each URL, so we need to split this request
        //up into multiple pieces if it doesn't fit in one request.
        var dataSegs = util_1.splitStringBySize(base64data, MAX_PAYLOAD_SIZE);
        //Enqueue each segment for transmission. We assign each chunk a sequential ID and a total number
        //of segments so that we can reassemble the packet on the server.
        for (var i = 0; i < dataSegs.length; i++) {
            this.scriptTagHolder.enqueueSegment(this.curSegmentNum, dataSegs.length, dataSegs[i]);
            this.curSegmentNum++;
        }
    };
    /**
     * This is how we notify the server that we're leaving.
     * We aren't able to send requests with DHTML on a window close event, but we can
     * trigger XHR requests in some browsers (everything but Opera basically).
     * @param {!string} id
     * @param {!string} pw
     */
    BrowserPollConnection.prototype.addDisconnectPingFrame = function (id, pw) {
        if (util_3.isNodeSdk())
            return;
        this.myDisconnFrame = document.createElement('iframe');
        var urlParams = {};
        urlParams[exports.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM] = 't';
        urlParams[exports.FIREBASE_LONGPOLL_ID_PARAM] = id;
        urlParams[exports.FIREBASE_LONGPOLL_PW_PARAM] = pw;
        this.myDisconnFrame.src = this.urlFn(urlParams);
        this.myDisconnFrame.style.display = 'none';
        document.body.appendChild(this.myDisconnFrame);
    };
    /**
     * Used to track the bytes received by this client
     * @param {*} args
     * @private
     */
    BrowserPollConnection.prototype.incrementIncomingBytes_ = function (args) {
        // TODO: This is an annoying perf hit just to track the number of incoming bytes.  Maybe it should be opt-in.
        var bytesReceived = util_2.stringify(args).length;
        this.bytesReceived += bytesReceived;
        this.stats_.incrementCounter('bytes_received', bytesReceived);
    };
    return BrowserPollConnection;
}());
exports.BrowserPollConnection = BrowserPollConnection;
/*********************************************************************************************
 * A wrapper around an iframe that is used as a long-polling script holder.
 * @constructor
 *********************************************************************************************/
var FirebaseIFrameScriptHolder = /** @class */ (function () {
    /**
     * @param commandCB - The callback to be called when control commands are recevied from the server.
     * @param onMessageCB - The callback to be triggered when responses arrive from the server.
     * @param onDisconnect - The callback to be triggered when this tag holder is closed
     * @param urlFn - A function that provides the URL of the endpoint to send data to.
     */
    function FirebaseIFrameScriptHolder(commandCB, onMessageCB, onDisconnect, urlFn) {
        this.onDisconnect = onDisconnect;
        this.urlFn = urlFn;
        //We maintain a count of all of the outstanding requests, because if we have too many active at once it can cause
        //problems in some browsers.
        /**
         * @type {CountedSet.<number, number>}
         */
        this.outstandingRequests = new CountedSet_1.CountedSet();
        //A queue of the pending segments waiting for transmission to the server.
        this.pendingSegs = [];
        //A serial number. We use this for two things:
        // 1) A way to ensure the browser doesn't cache responses to polls
        // 2) A way to make the server aware when long-polls arrive in a different order than we started them. The
        //    server needs to release both polls in this case or it will cause problems in Opera since Opera can only execute
        //    JSONP code in the order it was added to the iframe.
        this.currentSerial = Math.floor(Math.random() * 100000000);
        // This gets set to false when we're "closing down" the connection (e.g. we're switching transports but there's still
        // incoming data from the server that we're waiting for).
        this.sendNewPolls = true;
        if (!util_3.isNodeSdk()) {
            //Each script holder registers a couple of uniquely named callbacks with the window. These are called from the
            //iframes where we put the long-polling script tags. We have two callbacks:
            //   1) Command Callback - Triggered for control issues, like starting a connection.
            //   2) Message Callback - Triggered when new data arrives.
            this.uniqueCallbackIdentifier = util_1.LUIDGenerator();
            window[exports.FIREBASE_LONGPOLL_COMMAND_CB_NAME + this.uniqueCallbackIdentifier] = commandCB;
            window[exports.FIREBASE_LONGPOLL_DATA_CB_NAME + this.uniqueCallbackIdentifier] = onMessageCB;
            //Create an iframe for us to add script tags to.
            this.myIFrame = FirebaseIFrameScriptHolder.createIFrame_();
            // Set the iframe's contents.
            var script = '';
            // if we set a javascript url, it's IE and we need to set the document domain. The javascript url is sufficient
            // for ie9, but ie8 needs to do it again in the document itself.
            if (this.myIFrame.src &&
                this.myIFrame.src.substr(0, 'javascript:'.length) === 'javascript:') {
                var currentDomain = document.domain;
                script = '<script>document.domain="' + currentDomain + '";</script>';
            }
            var iframeContents = '<html><body>' + script + '</body></html>';
            try {
                this.myIFrame.doc.open();
                this.myIFrame.doc.write(iframeContents);
                this.myIFrame.doc.close();
            }
            catch (e) {
                util_1.log('frame writing exception');
                if (e.stack) {
                    util_1.log(e.stack);
                }
                util_1.log(e);
            }
        }
        else {
            this.commandCB = commandCB;
            this.onMessageCB = onMessageCB;
        }
    }
    /**
     * Each browser has its own funny way to handle iframes. Here we mush them all together into one object that I can
     * actually use.
     * @private
     * @return {Element}
     */
    FirebaseIFrameScriptHolder.createIFrame_ = function () {
        var iframe = document.createElement('iframe');
        iframe.style.display = 'none';
        // This is necessary in order to initialize the document inside the iframe
        if (document.body) {
            document.body.appendChild(iframe);
            try {
                // If document.domain has been modified in IE, this will throw an error, and we need to set the
                // domain of the iframe's document manually. We can do this via a javascript: url as the src attribute
                // Also note that we must do this *after* the iframe has been appended to the page. Otherwise it doesn't work.
                var a = iframe.contentWindow.document;
                if (!a) {
                    // Apologies for the log-spam, I need to do something to keep closure from optimizing out the assignment above.
                    util_1.log('No IE domain setting required');
                }
            }
            catch (e) {
                var domain = document.domain;
                iframe.src =
                    "javascript:void((function(){document.open();document.domain='" +
                        domain +
                        "';document.close();})())";
            }
        }
        else {
            // LongPollConnection attempts to delay initialization until the document is ready, so hopefully this
            // never gets hit.
            throw 'Document body has not initialized. Wait to initialize Firebase until after the document is ready.';
        }
        // Get the document of the iframe in a browser-specific way.
        if (iframe.contentDocument) {
            iframe.doc = iframe.contentDocument; // Firefox, Opera, Safari
        }
        else if (iframe.contentWindow) {
            iframe.doc = iframe.contentWindow.document; // Internet Explorer
        }
        else if (iframe.document) {
            iframe.doc = iframe.document; //others?
        }
        return iframe;
    };
    /**
     * Cancel all outstanding queries and remove the frame.
     */
    FirebaseIFrameScriptHolder.prototype.close = function () {
        var _this = this;
        //Mark this iframe as dead, so no new requests are sent.
        this.alive = false;
        if (this.myIFrame) {
            //We have to actually remove all of the html inside this iframe before removing it from the
            //window, or IE will continue loading and executing the script tags we've already added, which
            //can lead to some errors being thrown. Setting innerHTML seems to be the easiest way to do this.
            this.myIFrame.doc.body.innerHTML = '';
            setTimeout(function () {
                if (_this.myIFrame !== null) {
                    document.body.removeChild(_this.myIFrame);
                    _this.myIFrame = null;
                }
            }, Math.floor(0));
        }
        if (util_3.isNodeSdk() && this.myID) {
            var urlParams = {};
            urlParams[exports.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM] = 't';
            urlParams[exports.FIREBASE_LONGPOLL_ID_PARAM] = this.myID;
            urlParams[exports.FIREBASE_LONGPOLL_PW_PARAM] = this.myPW;
            var theURL = this.urlFn(urlParams);
            FirebaseIFrameScriptHolder.nodeRestRequest(theURL);
        }
        // Protect from being called recursively.
        var onDisconnect = this.onDisconnect;
        if (onDisconnect) {
            this.onDisconnect = null;
            onDisconnect();
        }
    };
    /**
     * Actually start the long-polling session by adding the first script tag(s) to the iframe.
     * @param {!string} id - The ID of this connection
     * @param {!string} pw - The password for this connection
     */
    FirebaseIFrameScriptHolder.prototype.startLongPoll = function (id, pw) {
        this.myID = id;
        this.myPW = pw;
        this.alive = true;
        //send the initial request. If there are requests queued, make sure that we transmit as many as we are currently able to.
        while (this.newRequest_()) { }
    };
    /**
     * This is called any time someone might want a script tag to be added. It adds a script tag when there aren't
     * too many outstanding requests and we are still alive.
     *
     * If there are outstanding packet segments to send, it sends one. If there aren't, it sends a long-poll anyways if
     * needed.
     */
    FirebaseIFrameScriptHolder.prototype.newRequest_ = function () {
        // We keep one outstanding request open all the time to receive data, but if we need to send data
        // (pendingSegs.length > 0) then we create a new request to send the data.  The server will automatically
        // close the old request.
        if (this.alive &&
            this.sendNewPolls &&
            this.outstandingRequests.count() < (this.pendingSegs.length > 0 ? 2 : 1)) {
            //construct our url
            this.currentSerial++;
            var urlParams = {};
            urlParams[exports.FIREBASE_LONGPOLL_ID_PARAM] = this.myID;
            urlParams[exports.FIREBASE_LONGPOLL_PW_PARAM] = this.myPW;
            urlParams[exports.FIREBASE_LONGPOLL_SERIAL_PARAM] = this.currentSerial;
            var theURL = this.urlFn(urlParams);
            //Now add as much data as we can.
            var curDataString = '';
            var i = 0;
            while (this.pendingSegs.length > 0) {
                //first, lets see if the next segment will fit.
                var nextSeg = this.pendingSegs[0];
                if (nextSeg.d.length + SEG_HEADER_SIZE + curDataString.length <=
                    MAX_URL_DATA_SIZE) {
                    //great, the segment will fit. Lets append it.
                    var theSeg = this.pendingSegs.shift();
                    curDataString =
                        curDataString +
                            '&' +
                            exports.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM +
                            i +
                            '=' +
                            theSeg.seg +
                            '&' +
                            exports.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET +
                            i +
                            '=' +
                            theSeg.ts +
                            '&' +
                            exports.FIREBASE_LONGPOLL_DATA_PARAM +
                            i +
                            '=' +
                            theSeg.d;
                    i++;
                }
                else {
                    break;
                }
            }
            theURL = theURL + curDataString;
            this.addLongPollTag_(theURL, this.currentSerial);
            return true;
        }
        else {
            return false;
        }
    };
    /**
     * Queue a packet for transmission to the server.
     * @param segnum - A sequential id for this packet segment used for reassembly
     * @param totalsegs - The total number of segments in this packet
     * @param data - The data for this segment.
     */
    FirebaseIFrameScriptHolder.prototype.enqueueSegment = function (segnum, totalsegs, data) {
        //add this to the queue of segments to send.
        this.pendingSegs.push({ seg: segnum, ts: totalsegs, d: data });
        //send the data immediately if there isn't already data being transmitted, unless
        //startLongPoll hasn't been called yet.
        if (this.alive) {
            this.newRequest_();
        }
    };
    /**
     * Add a script tag for a regular long-poll request.
     * @param {!string} url - The URL of the script tag.
     * @param {!number} serial - The serial number of the request.
     * @private
     */
    FirebaseIFrameScriptHolder.prototype.addLongPollTag_ = function (url, serial) {
        var _this = this;
        //remember that we sent this request.
        this.outstandingRequests.add(serial, 1);
        var doNewRequest = function () {
            _this.outstandingRequests.remove(serial);
            _this.newRequest_();
        };
        // If this request doesn't return on its own accord (by the server sending us some data), we'll
        // create a new one after the KEEPALIVE interval to make sure we always keep a fresh request open.
        var keepaliveTimeout = setTimeout(doNewRequest, Math.floor(KEEPALIVE_REQUEST_INTERVAL));
        var readyStateCB = function () {
            // Request completed.  Cancel the keepalive.
            clearTimeout(keepaliveTimeout);
            // Trigger a new request so we can continue receiving data.
            doNewRequest();
        };
        this.addTag(url, readyStateCB);
    };
    /**
     * Add an arbitrary script tag to the iframe.
     * @param {!string} url - The URL for the script tag source.
     * @param {!function()} loadCB - A callback to be triggered once the script has loaded.
     */
    FirebaseIFrameScriptHolder.prototype.addTag = function (url, loadCB) {
        var _this = this;
        if (util_3.isNodeSdk()) {
            this.doNodeLongPoll(url, loadCB);
        }
        else {
            setTimeout(function () {
                try {
                    // if we're already closed, don't add this poll
                    if (!_this.sendNewPolls)
                        return;
                    var newScript_1 = _this.myIFrame.doc.createElement('script');
                    newScript_1.type = 'text/javascript';
                    newScript_1.async = true;
                    newScript_1.src = url;
                    newScript_1.onload = newScript_1.onreadystatechange = function () {
                        var rstate = newScript_1.readyState;
                        if (!rstate || rstate === 'loaded' || rstate === 'complete') {
                            newScript_1.onload = newScript_1.onreadystatechange = null;
                            if (newScript_1.parentNode) {
                                newScript_1.parentNode.removeChild(newScript_1);
                            }
                            loadCB();
                        }
                    };
                    newScript_1.onerror = function () {
                        util_1.log('Long-poll script failed to load: ' + url);
                        _this.sendNewPolls = false;
                        _this.close();
                    };
                    _this.myIFrame.doc.body.appendChild(newScript_1);
                }
                catch (e) {
                    // TODO: we should make this error visible somehow
                }
            }, Math.floor(1));
        }
    };
    return FirebaseIFrameScriptHolder;
}());
exports.FirebaseIFrameScriptHolder = FirebaseIFrameScriptHolder;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/realtime/Connection.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/realtime/Connection.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! ../core/util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var storage_1 = __webpack_require__(/*! ../core/storage/storage */ "./node_modules/@firebase/database/dist/cjs/src/core/storage/storage.js");
var Constants_1 = __webpack_require__(/*! ./Constants */ "./node_modules/@firebase/database/dist/cjs/src/realtime/Constants.js");
var TransportManager_1 = __webpack_require__(/*! ./TransportManager */ "./node_modules/@firebase/database/dist/cjs/src/realtime/TransportManager.js");
// Abort upgrade attempt if it takes longer than 60s.
var UPGRADE_TIMEOUT = 60000;
// For some transports (WebSockets), we need to "validate" the transport by exchanging a few requests and responses.
// If we haven't sent enough requests within 5s, we'll start sending noop ping requests.
var DELAY_BEFORE_SENDING_EXTRA_REQUESTS = 5000;
// If the initial data sent triggers a lot of bandwidth (i.e. it's a large put or a listen for a large amount of data)
// then we may not be able to exchange our ping/pong requests within the healthy timeout.  So if we reach the timeout
// but we've sent/received enough bytes, we don't cancel the connection.
var BYTES_SENT_HEALTHY_OVERRIDE = 10 * 1024;
var BYTES_RECEIVED_HEALTHY_OVERRIDE = 100 * 1024;
var MESSAGE_TYPE = 't';
var MESSAGE_DATA = 'd';
var CONTROL_SHUTDOWN = 's';
var CONTROL_RESET = 'r';
var CONTROL_ERROR = 'e';
var CONTROL_PONG = 'o';
var SWITCH_ACK = 'a';
var END_TRANSMISSION = 'n';
var PING = 'p';
var SERVER_HELLO = 'h';
/**
 * Creates a new real-time connection to the server using whichever method works
 * best in the current browser.
 *
 * @constructor
 */
var Connection = /** @class */ (function () {
    /**
     * @param {!string} id - an id for this connection
     * @param {!RepoInfo} repoInfo_ - the info for the endpoint to connect to
     * @param {function(Object)} onMessage_ - the callback to be triggered when a server-push message arrives
     * @param {function(number, string)} onReady_ - the callback to be triggered when this connection is ready to send messages.
     * @param {function()} onDisconnect_ - the callback to be triggered when a connection was lost
     * @param {function(string)} onKill_ - the callback to be triggered when this connection has permanently shut down.
     * @param {string=} lastSessionId - last session id in persistent connection. is used to clean up old session in real-time server
     */
    function Connection(id, repoInfo_, onMessage_, onReady_, onDisconnect_, onKill_, lastSessionId) {
        this.id = id;
        this.repoInfo_ = repoInfo_;
        this.onMessage_ = onMessage_;
        this.onReady_ = onReady_;
        this.onDisconnect_ = onDisconnect_;
        this.onKill_ = onKill_;
        this.lastSessionId = lastSessionId;
        this.connectionCount = 0;
        this.pendingDataMessages = [];
        this.state_ = 0 /* CONNECTING */;
        this.log_ = util_1.logWrapper('c:' + this.id + ':');
        this.transportManager_ = new TransportManager_1.TransportManager(repoInfo_);
        this.log_('Connection created');
        this.start_();
    }
    /**
     * Starts a connection attempt
     * @private
     */
    Connection.prototype.start_ = function () {
        var _this = this;
        var conn = this.transportManager_.initialTransport();
        this.conn_ = new conn(this.nextTransportId_(), this.repoInfo_, undefined, this.lastSessionId);
        // For certain transports (WebSockets), we need to send and receive several messages back and forth before we
        // can consider the transport healthy.
        this.primaryResponsesRequired_ = conn['responsesRequiredToBeHealthy'] || 0;
        var onMessageReceived = this.connReceiver_(this.conn_);
        var onConnectionLost = this.disconnReceiver_(this.conn_);
        this.tx_ = this.conn_;
        this.rx_ = this.conn_;
        this.secondaryConn_ = null;
        this.isHealthy_ = false;
        /*
         * Firefox doesn't like when code from one iframe tries to create another iframe by way of the parent frame.
         * This can occur in the case of a redirect, i.e. we guessed wrong on what server to connect to and received a reset.
         * Somehow, setTimeout seems to make this ok. That doesn't make sense from a security perspective, since you should
         * still have the context of your originating frame.
         */
        setTimeout(function () {
            // this.conn_ gets set to null in some of the tests. Check to make sure it still exists before using it
            _this.conn_ && _this.conn_.open(onMessageReceived, onConnectionLost);
        }, Math.floor(0));
        var healthyTimeout_ms = conn['healthyTimeout'] || 0;
        if (healthyTimeout_ms > 0) {
            this.healthyTimeout_ = util_1.setTimeoutNonBlocking(function () {
                _this.healthyTimeout_ = null;
                if (!_this.isHealthy_) {
                    if (_this.conn_ &&
                        _this.conn_.bytesReceived > BYTES_RECEIVED_HEALTHY_OVERRIDE) {
                        _this.log_('Connection exceeded healthy timeout but has received ' +
                            _this.conn_.bytesReceived +
                            ' bytes.  Marking connection healthy.');
                        _this.isHealthy_ = true;
                        _this.conn_.markConnectionHealthy();
                    }
                    else if (_this.conn_ &&
                        _this.conn_.bytesSent > BYTES_SENT_HEALTHY_OVERRIDE) {
                        _this.log_('Connection exceeded healthy timeout but has sent ' +
                            _this.conn_.bytesSent +
                            ' bytes.  Leaving connection alive.');
                        // NOTE: We don't want to mark it healthy, since we have no guarantee that the bytes have made it to
                        // the server.
                    }
                    else {
                        _this.log_('Closing unhealthy connection after timeout.');
                        _this.close();
                    }
                }
            }, Math.floor(healthyTimeout_ms));
        }
    };
    /**
     * @return {!string}
     * @private
     */
    Connection.prototype.nextTransportId_ = function () {
        return 'c:' + this.id + ':' + this.connectionCount++;
    };
    Connection.prototype.disconnReceiver_ = function (conn) {
        var _this = this;
        return function (everConnected) {
            if (conn === _this.conn_) {
                _this.onConnectionLost_(everConnected);
            }
            else if (conn === _this.secondaryConn_) {
                _this.log_('Secondary connection lost.');
                _this.onSecondaryConnectionLost_();
            }
            else {
                _this.log_('closing an old connection');
            }
        };
    };
    Connection.prototype.connReceiver_ = function (conn) {
        var _this = this;
        return function (message) {
            if (_this.state_ != 2 /* DISCONNECTED */) {
                if (conn === _this.rx_) {
                    _this.onPrimaryMessageReceived_(message);
                }
                else if (conn === _this.secondaryConn_) {
                    _this.onSecondaryMessageReceived_(message);
                }
                else {
                    _this.log_('message on old connection');
                }
            }
        };
    };
    /**
     *
     * @param {Object} dataMsg An arbitrary data message to be sent to the server
     */
    Connection.prototype.sendRequest = function (dataMsg) {
        // wrap in a data message envelope and send it on
        var msg = { t: 'd', d: dataMsg };
        this.sendData_(msg);
    };
    Connection.prototype.tryCleanupConnection = function () {
        if (this.tx_ === this.secondaryConn_ && this.rx_ === this.secondaryConn_) {
            this.log_('cleaning up and promoting a connection: ' + this.secondaryConn_.connId);
            this.conn_ = this.secondaryConn_;
            this.secondaryConn_ = null;
            // the server will shutdown the old connection
        }
    };
    Connection.prototype.onSecondaryControl_ = function (controlData) {
        if (MESSAGE_TYPE in controlData) {
            var cmd = controlData[MESSAGE_TYPE];
            if (cmd === SWITCH_ACK) {
                this.upgradeIfSecondaryHealthy_();
            }
            else if (cmd === CONTROL_RESET) {
                // Most likely the session wasn't valid. Abandon the switch attempt
                this.log_('Got a reset on secondary, closing it');
                this.secondaryConn_.close();
                // If we were already using this connection for something, than we need to fully close
                if (this.tx_ === this.secondaryConn_ ||
                    this.rx_ === this.secondaryConn_) {
                    this.close();
                }
            }
            else if (cmd === CONTROL_PONG) {
                this.log_('got pong on secondary.');
                this.secondaryResponsesRequired_--;
                this.upgradeIfSecondaryHealthy_();
            }
        }
    };
    Connection.prototype.onSecondaryMessageReceived_ = function (parsedData) {
        var layer = util_1.requireKey('t', parsedData);
        var data = util_1.requireKey('d', parsedData);
        if (layer == 'c') {
            this.onSecondaryControl_(data);
        }
        else if (layer == 'd') {
            // got a data message, but we're still second connection. Need to buffer it up
            this.pendingDataMessages.push(data);
        }
        else {
            throw new Error('Unknown protocol layer: ' + layer);
        }
    };
    Connection.prototype.upgradeIfSecondaryHealthy_ = function () {
        if (this.secondaryResponsesRequired_ <= 0) {
            this.log_('Secondary connection is healthy.');
            this.isHealthy_ = true;
            this.secondaryConn_.markConnectionHealthy();
            this.proceedWithUpgrade_();
        }
        else {
            // Send a ping to make sure the connection is healthy.
            this.log_('sending ping on secondary.');
            this.secondaryConn_.send({ t: 'c', d: { t: PING, d: {} } });
        }
    };
    Connection.prototype.proceedWithUpgrade_ = function () {
        // tell this connection to consider itself open
        this.secondaryConn_.start();
        // send ack
        this.log_('sending client ack on secondary');
        this.secondaryConn_.send({ t: 'c', d: { t: SWITCH_ACK, d: {} } });
        // send end packet on primary transport, switch to sending on this one
        // can receive on this one, buffer responses until end received on primary transport
        this.log_('Ending transmission on primary');
        this.conn_.send({ t: 'c', d: { t: END_TRANSMISSION, d: {} } });
        this.tx_ = this.secondaryConn_;
        this.tryCleanupConnection();
    };
    Connection.prototype.onPrimaryMessageReceived_ = function (parsedData) {
        // Must refer to parsedData properties in quotes, so closure doesn't touch them.
        var layer = util_1.requireKey('t', parsedData);
        var data = util_1.requireKey('d', parsedData);
        if (layer == 'c') {
            this.onControl_(data);
        }
        else if (layer == 'd') {
            this.onDataMessage_(data);
        }
    };
    Connection.prototype.onDataMessage_ = function (message) {
        this.onPrimaryResponse_();
        // We don't do anything with data messages, just kick them up a level
        this.onMessage_(message);
    };
    Connection.prototype.onPrimaryResponse_ = function () {
        if (!this.isHealthy_) {
            this.primaryResponsesRequired_--;
            if (this.primaryResponsesRequired_ <= 0) {
                this.log_('Primary connection is healthy.');
                this.isHealthy_ = true;
                this.conn_.markConnectionHealthy();
            }
        }
    };
    Connection.prototype.onControl_ = function (controlData) {
        var cmd = util_1.requireKey(MESSAGE_TYPE, controlData);
        if (MESSAGE_DATA in controlData) {
            var payload = controlData[MESSAGE_DATA];
            if (cmd === SERVER_HELLO) {
                this.onHandshake_(payload);
            }
            else if (cmd === END_TRANSMISSION) {
                this.log_('recvd end transmission on primary');
                this.rx_ = this.secondaryConn_;
                for (var i = 0; i < this.pendingDataMessages.length; ++i) {
                    this.onDataMessage_(this.pendingDataMessages[i]);
                }
                this.pendingDataMessages = [];
                this.tryCleanupConnection();
            }
            else if (cmd === CONTROL_SHUTDOWN) {
                // This was previously the 'onKill' callback passed to the lower-level connection
                // payload in this case is the reason for the shutdown. Generally a human-readable error
                this.onConnectionShutdown_(payload);
            }
            else if (cmd === CONTROL_RESET) {
                // payload in this case is the host we should contact
                this.onReset_(payload);
            }
            else if (cmd === CONTROL_ERROR) {
                util_1.error('Server Error: ' + payload);
            }
            else if (cmd === CONTROL_PONG) {
                this.log_('got pong on primary.');
                this.onPrimaryResponse_();
                this.sendPingOnPrimaryIfNecessary_();
            }
            else {
                util_1.error('Unknown control packet command: ' + cmd);
            }
        }
    };
    /**
     *
     * @param {Object} handshake The handshake data returned from the server
     * @private
     */
    Connection.prototype.onHandshake_ = function (handshake) {
        var timestamp = handshake.ts;
        var version = handshake.v;
        var host = handshake.h;
        this.sessionId = handshake.s;
        this.repoInfo_.updateHost(host);
        // if we've already closed the connection, then don't bother trying to progress further
        if (this.state_ == 0 /* CONNECTING */) {
            this.conn_.start();
            this.onConnectionEstablished_(this.conn_, timestamp);
            if (Constants_1.PROTOCOL_VERSION !== version) {
                util_1.warn('Protocol version mismatch detected');
            }
            // TODO: do we want to upgrade? when? maybe a delay?
            this.tryStartUpgrade_();
        }
    };
    Connection.prototype.tryStartUpgrade_ = function () {
        var conn = this.transportManager_.upgradeTransport();
        if (conn) {
            this.startUpgrade_(conn);
        }
    };
    Connection.prototype.startUpgrade_ = function (conn) {
        var _this = this;
        this.secondaryConn_ = new conn(this.nextTransportId_(), this.repoInfo_, this.sessionId);
        // For certain transports (WebSockets), we need to send and receive several messages back and forth before we
        // can consider the transport healthy.
        this.secondaryResponsesRequired_ =
            conn['responsesRequiredToBeHealthy'] || 0;
        var onMessage = this.connReceiver_(this.secondaryConn_);
        var onDisconnect = this.disconnReceiver_(this.secondaryConn_);
        this.secondaryConn_.open(onMessage, onDisconnect);
        // If we haven't successfully upgraded after UPGRADE_TIMEOUT, give up and kill the secondary.
        util_1.setTimeoutNonBlocking(function () {
            if (_this.secondaryConn_) {
                _this.log_('Timed out trying to upgrade.');
                _this.secondaryConn_.close();
            }
        }, Math.floor(UPGRADE_TIMEOUT));
    };
    Connection.prototype.onReset_ = function (host) {
        this.log_('Reset packet received.  New host: ' + host);
        this.repoInfo_.updateHost(host);
        // TODO: if we're already "connected", we need to trigger a disconnect at the next layer up.
        // We don't currently support resets after the connection has already been established
        if (this.state_ === 1 /* CONNECTED */) {
            this.close();
        }
        else {
            // Close whatever connections we have open and start again.
            this.closeConnections_();
            this.start_();
        }
    };
    Connection.prototype.onConnectionEstablished_ = function (conn, timestamp) {
        var _this = this;
        this.log_('Realtime connection established.');
        this.conn_ = conn;
        this.state_ = 1 /* CONNECTED */;
        if (this.onReady_) {
            this.onReady_(timestamp, this.sessionId);
            this.onReady_ = null;
        }
        // If after 5 seconds we haven't sent enough requests to the server to get the connection healthy,
        // send some pings.
        if (this.primaryResponsesRequired_ === 0) {
            this.log_('Primary connection is healthy.');
            this.isHealthy_ = true;
        }
        else {
            util_1.setTimeoutNonBlocking(function () {
                _this.sendPingOnPrimaryIfNecessary_();
            }, Math.floor(DELAY_BEFORE_SENDING_EXTRA_REQUESTS));
        }
    };
    Connection.prototype.sendPingOnPrimaryIfNecessary_ = function () {
        // If the connection isn't considered healthy yet, we'll send a noop ping packet request.
        if (!this.isHealthy_ && this.state_ === 1 /* CONNECTED */) {
            this.log_('sending ping on primary.');
            this.sendData_({ t: 'c', d: { t: PING, d: {} } });
        }
    };
    Connection.prototype.onSecondaryConnectionLost_ = function () {
        var conn = this.secondaryConn_;
        this.secondaryConn_ = null;
        if (this.tx_ === conn || this.rx_ === conn) {
            // we are relying on this connection already in some capacity. Therefore, a failure is real
            this.close();
        }
    };
    /**
     *
     * @param {boolean} everConnected Whether or not the connection ever reached a server. Used to determine if
     * we should flush the host cache
     * @private
     */
    Connection.prototype.onConnectionLost_ = function (everConnected) {
        this.conn_ = null;
        // NOTE: IF you're seeing a Firefox error for this line, I think it might be because it's getting
        // called on window close and RealtimeState.CONNECTING is no longer defined.  Just a guess.
        if (!everConnected && this.state_ === 0 /* CONNECTING */) {
            this.log_('Realtime connection failed.');
            // Since we failed to connect at all, clear any cached entry for this namespace in case the machine went away
            if (this.repoInfo_.isCacheableHost()) {
                storage_1.PersistentStorage.remove('host:' + this.repoInfo_.host);
                // reset the internal host to what we would show the user, i.e. <ns>.firebaseio.com
                this.repoInfo_.internalHost = this.repoInfo_.host;
            }
        }
        else if (this.state_ === 1 /* CONNECTED */) {
            this.log_('Realtime connection lost.');
        }
        this.close();
    };
    /**
     *
     * @param {string} reason
     * @private
     */
    Connection.prototype.onConnectionShutdown_ = function (reason) {
        this.log_('Connection shutdown command received. Shutting down...');
        if (this.onKill_) {
            this.onKill_(reason);
            this.onKill_ = null;
        }
        // We intentionally don't want to fire onDisconnect (kill is a different case),
        // so clear the callback.
        this.onDisconnect_ = null;
        this.close();
    };
    Connection.prototype.sendData_ = function (data) {
        if (this.state_ !== 1 /* CONNECTED */) {
            throw 'Connection is not connected';
        }
        else {
            this.tx_.send(data);
        }
    };
    /**
     * Cleans up this connection, calling the appropriate callbacks
     */
    Connection.prototype.close = function () {
        if (this.state_ !== 2 /* DISCONNECTED */) {
            this.log_('Closing realtime connection.');
            this.state_ = 2 /* DISCONNECTED */;
            this.closeConnections_();
            if (this.onDisconnect_) {
                this.onDisconnect_();
                this.onDisconnect_ = null;
            }
        }
    };
    /**
     *
     * @private
     */
    Connection.prototype.closeConnections_ = function () {
        this.log_('Shutting down all connections');
        if (this.conn_) {
            this.conn_.close();
            this.conn_ = null;
        }
        if (this.secondaryConn_) {
            this.secondaryConn_.close();
            this.secondaryConn_ = null;
        }
        if (this.healthyTimeout_) {
            clearTimeout(this.healthyTimeout_);
            this.healthyTimeout_ = null;
        }
    };
    return Connection;
}());
exports.Connection = Connection;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/realtime/Constants.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/realtime/Constants.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.PROTOCOL_VERSION = '5';
exports.VERSION_PARAM = 'v';
exports.TRANSPORT_SESSION_PARAM = 's';
exports.REFERER_PARAM = 'r';
exports.FORGE_REF = 'f';
exports.FORGE_DOMAIN = 'firebaseio.com';
exports.LAST_SESSION_PARAM = 'ls';
exports.WEBSOCKET = 'websocket';
exports.LONG_POLLING = 'long_polling';



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/realtime/TransportManager.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/realtime/TransportManager.js ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var BrowserPollConnection_1 = __webpack_require__(/*! ./BrowserPollConnection */ "./node_modules/@firebase/database/dist/cjs/src/realtime/BrowserPollConnection.js");
var WebSocketConnection_1 = __webpack_require__(/*! ./WebSocketConnection */ "./node_modules/@firebase/database/dist/cjs/src/realtime/WebSocketConnection.js");
var util_1 = __webpack_require__(/*! ../core/util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
/**
 * Currently simplistic, this class manages what transport a Connection should use at various stages of its
 * lifecycle.
 *
 * It starts with longpolling in a browser, and httppolling on node. It then upgrades to websockets if
 * they are available.
 * @constructor
 */
var TransportManager = /** @class */ (function () {
    /**
     * @param {!RepoInfo} repoInfo Metadata around the namespace we're connecting to
     */
    function TransportManager(repoInfo) {
        this.initTransports_(repoInfo);
    }
    Object.defineProperty(TransportManager, "ALL_TRANSPORTS", {
        /**
         * @const
         * @type {!Array.<function(new:Transport, string, RepoInfo, string=)>}
         */
        get: function () {
            return [BrowserPollConnection_1.BrowserPollConnection, WebSocketConnection_1.WebSocketConnection];
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {!RepoInfo} repoInfo
     * @private
     */
    TransportManager.prototype.initTransports_ = function (repoInfo) {
        var isWebSocketsAvailable = WebSocketConnection_1.WebSocketConnection && WebSocketConnection_1.WebSocketConnection['isAvailable']();
        var isSkipPollConnection = isWebSocketsAvailable && !WebSocketConnection_1.WebSocketConnection.previouslyFailed();
        if (repoInfo.webSocketOnly) {
            if (!isWebSocketsAvailable)
                util_1.warn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway.");
            isSkipPollConnection = true;
        }
        if (isSkipPollConnection) {
            this.transports_ = [WebSocketConnection_1.WebSocketConnection];
        }
        else {
            var transports_1 = (this.transports_ = []);
            util_1.each(TransportManager.ALL_TRANSPORTS, function (i, transport) {
                if (transport && transport['isAvailable']()) {
                    transports_1.push(transport);
                }
            });
        }
    };
    /**
     * @return {function(new:Transport, !string, !RepoInfo, string=, string=)} The constructor for the
     * initial transport to use
     */
    TransportManager.prototype.initialTransport = function () {
        if (this.transports_.length > 0) {
            return this.transports_[0];
        }
        else {
            throw new Error('No transports available');
        }
    };
    /**
     * @return {?function(new:Transport, function(),function(), string=)} The constructor for the next
     * transport, or null
     */
    TransportManager.prototype.upgradeTransport = function () {
        if (this.transports_.length > 1) {
            return this.transports_[1];
        }
        else {
            return null;
        }
    };
    return TransportManager;
}());
exports.TransportManager = TransportManager;



/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/realtime/WebSocketConnection.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/realtime/WebSocketConnection.js ***!
  \**************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process) {
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var app_1 = __webpack_require__(/*! @firebase/app */ "./node_modules/@firebase/app/dist/esm/index.js");
var util_1 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_2 = __webpack_require__(/*! ../core/util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
var StatsManager_1 = __webpack_require__(/*! ../core/stats/StatsManager */ "./node_modules/@firebase/database/dist/cjs/src/core/stats/StatsManager.js");
var Constants_1 = __webpack_require__(/*! ./Constants */ "./node_modules/@firebase/database/dist/cjs/src/realtime/Constants.js");
var util_3 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var storage_1 = __webpack_require__(/*! ../core/storage/storage */ "./node_modules/@firebase/database/dist/cjs/src/core/storage/storage.js");
var util_4 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var util_5 = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
var WEBSOCKET_MAX_FRAME_SIZE = 16384;
var WEBSOCKET_KEEPALIVE_INTERVAL = 45000;
var WebSocketImpl = null;
if (typeof MozWebSocket !== 'undefined') {
    WebSocketImpl = MozWebSocket;
}
else if (typeof WebSocket !== 'undefined') {
    WebSocketImpl = WebSocket;
}
function setWebSocketImpl(impl) {
    WebSocketImpl = impl;
}
exports.setWebSocketImpl = setWebSocketImpl;
/**
 * Create a new websocket connection with the given callbacks.
 * @constructor
 * @implements {Transport}
 */
var WebSocketConnection = /** @class */ (function () {
    /**
     * @param {string} connId identifier for this transport
     * @param {RepoInfo} repoInfo The info for the websocket endpoint.
     * @param {string=} transportSessionId Optional transportSessionId if this is connecting to an existing transport
     *                                         session
     * @param {string=} lastSessionId Optional lastSessionId if there was a previous connection
     */
    function WebSocketConnection(connId, repoInfo, transportSessionId, lastSessionId) {
        this.connId = connId;
        this.keepaliveTimer = null;
        this.frames = null;
        this.totalFrames = 0;
        this.bytesSent = 0;
        this.bytesReceived = 0;
        this.log_ = util_2.logWrapper(this.connId);
        this.stats_ = StatsManager_1.StatsManager.getCollection(repoInfo);
        this.connURL = WebSocketConnection.connectionURL_(repoInfo, transportSessionId, lastSessionId);
    }
    /**
     * @param {RepoInfo} repoInfo The info for the websocket endpoint.
     * @param {string=} transportSessionId Optional transportSessionId if this is connecting to an existing transport
     *                                         session
     * @param {string=} lastSessionId Optional lastSessionId if there was a previous connection
     * @return {string} connection url
     * @private
     */
    WebSocketConnection.connectionURL_ = function (repoInfo, transportSessionId, lastSessionId) {
        var urlParams = {};
        urlParams[Constants_1.VERSION_PARAM] = Constants_1.PROTOCOL_VERSION;
        if (!util_5.isNodeSdk() &&
            typeof location !== 'undefined' &&
            location.href &&
            location.href.indexOf(Constants_1.FORGE_DOMAIN) !== -1) {
            urlParams[Constants_1.REFERER_PARAM] = Constants_1.FORGE_REF;
        }
        if (transportSessionId) {
            urlParams[Constants_1.TRANSPORT_SESSION_PARAM] = transportSessionId;
        }
        if (lastSessionId) {
            urlParams[Constants_1.LAST_SESSION_PARAM] = lastSessionId;
        }
        return repoInfo.connectionURL(Constants_1.WEBSOCKET, urlParams);
    };
    /**
     *
     * @param onMessage Callback when messages arrive
     * @param onDisconnect Callback with connection lost.
     */
    WebSocketConnection.prototype.open = function (onMessage, onDisconnect) {
        var _this = this;
        this.onDisconnect = onDisconnect;
        this.onMessage = onMessage;
        this.log_('Websocket connecting to ' + this.connURL);
        this.everConnected_ = false;
        // Assume failure until proven otherwise.
        storage_1.PersistentStorage.set('previous_websocket_failure', true);
        try {
            if (util_5.isNodeSdk()) {
                var device = util_3.CONSTANTS.NODE_ADMIN ? 'AdminNode' : 'Node';
                // UA Format: Firebase/<wire_protocol>/<sdk_version>/<platform>/<device>
                var options = {
                    headers: {
                        'User-Agent': "Firebase/" + Constants_1.PROTOCOL_VERSION + "/" + app_1.default.SDK_VERSION + "/" + process.platform + "/" + device
                    }
                };
                // Plumb appropriate http_proxy environment variable into faye-websocket if it exists.
                var env = process['env'];
                var proxy = this.connURL.indexOf('wss://') == 0
                    ? env['HTTPS_PROXY'] || env['https_proxy']
                    : env['HTTP_PROXY'] || env['http_proxy'];
                if (proxy) {
                    options['proxy'] = { origin: proxy };
                }
                this.mySock = new WebSocketImpl(this.connURL, [], options);
            }
            else {
                this.mySock = new WebSocketImpl(this.connURL);
            }
        }
        catch (e) {
            this.log_('Error instantiating WebSocket.');
            var error = e.message || e.data;
            if (error) {
                this.log_(error);
            }
            this.onClosed_();
            return;
        }
        this.mySock.onopen = function () {
            _this.log_('Websocket connected.');
            _this.everConnected_ = true;
        };
        this.mySock.onclose = function () {
            _this.log_('Websocket connection was disconnected.');
            _this.mySock = null;
            _this.onClosed_();
        };
        this.mySock.onmessage = function (m) {
            _this.handleIncomingFrame(m);
        };
        this.mySock.onerror = function (e) {
            _this.log_('WebSocket error.  Closing connection.');
            var error = e.message || e.data;
            if (error) {
                _this.log_(error);
            }
            _this.onClosed_();
        };
    };
    /**
     * No-op for websockets, we don't need to do anything once the connection is confirmed as open
     */
    WebSocketConnection.prototype.start = function () { };
    WebSocketConnection.forceDisallow = function () {
        WebSocketConnection.forceDisallow_ = true;
    };
    WebSocketConnection.isAvailable = function () {
        var isOldAndroid = false;
        if (typeof navigator !== 'undefined' && navigator.userAgent) {
            var oldAndroidRegex = /Android ([0-9]{0,}\.[0-9]{0,})/;
            var oldAndroidMatch = navigator.userAgent.match(oldAndroidRegex);
            if (oldAndroidMatch && oldAndroidMatch.length > 1) {
                if (parseFloat(oldAndroidMatch[1]) < 4.4) {
                    isOldAndroid = true;
                }
            }
        }
        return (!isOldAndroid &&
            WebSocketImpl !== null &&
            !WebSocketConnection.forceDisallow_);
    };
    /**
     * Returns true if we previously failed to connect with this transport.
     * @return {boolean}
     */
    WebSocketConnection.previouslyFailed = function () {
        // If our persistent storage is actually only in-memory storage,
        // we default to assuming that it previously failed to be safe.
        return (storage_1.PersistentStorage.isInMemoryStorage ||
            storage_1.PersistentStorage.get('previous_websocket_failure') === true);
    };
    WebSocketConnection.prototype.markConnectionHealthy = function () {
        storage_1.PersistentStorage.remove('previous_websocket_failure');
    };
    WebSocketConnection.prototype.appendFrame_ = function (data) {
        this.frames.push(data);
        if (this.frames.length == this.totalFrames) {
            var fullMess = this.frames.join('');
            this.frames = null;
            var jsonMess = util_4.jsonEval(fullMess);
            //handle the message
            this.onMessage(jsonMess);
        }
    };
    /**
     * @param {number} frameCount The number of frames we are expecting from the server
     * @private
     */
    WebSocketConnection.prototype.handleNewFrameCount_ = function (frameCount) {
        this.totalFrames = frameCount;
        this.frames = [];
    };
    /**
     * Attempts to parse a frame count out of some text. If it can't, assumes a value of 1
     * @param {!String} data
     * @return {?String} Any remaining data to be process, or null if there is none
     * @private
     */
    WebSocketConnection.prototype.extractFrameCount_ = function (data) {
        util_1.assert(this.frames === null, 'We already have a frame buffer');
        // TODO: The server is only supposed to send up to 9999 frames (i.e. length <= 4), but that isn't being enforced
        // currently.  So allowing larger frame counts (length <= 6).  See https://app.asana.com/0/search/8688598998380/8237608042508
        if (data.length <= 6) {
            var frameCount = Number(data);
            if (!isNaN(frameCount)) {
                this.handleNewFrameCount_(frameCount);
                return null;
            }
        }
        this.handleNewFrameCount_(1);
        return data;
    };
    /**
     * Process a websocket frame that has arrived from the server.
     * @param mess The frame data
     */
    WebSocketConnection.prototype.handleIncomingFrame = function (mess) {
        if (this.mySock === null)
            return; // Chrome apparently delivers incoming packets even after we .close() the connection sometimes.
        var data = mess['data'];
        this.bytesReceived += data.length;
        this.stats_.incrementCounter('bytes_received', data.length);
        this.resetKeepAlive();
        if (this.frames !== null) {
            // we're buffering
            this.appendFrame_(data);
        }
        else {
            // try to parse out a frame count, otherwise, assume 1 and process it
            var remainingData = this.extractFrameCount_(data);
            if (remainingData !== null) {
                this.appendFrame_(remainingData);
            }
        }
    };
    /**
     * Send a message to the server
     * @param {Object} data The JSON object to transmit
     */
    WebSocketConnection.prototype.send = function (data) {
        this.resetKeepAlive();
        var dataStr = util_4.stringify(data);
        this.bytesSent += dataStr.length;
        this.stats_.incrementCounter('bytes_sent', dataStr.length);
        //We can only fit a certain amount in each websocket frame, so we need to split this request
        //up into multiple pieces if it doesn't fit in one request.
        var dataSegs = util_2.splitStringBySize(dataStr, WEBSOCKET_MAX_FRAME_SIZE);
        //Send the length header
        if (dataSegs.length > 1) {
            this.sendString_(String(dataSegs.length));
        }
        //Send the actual data in segments.
        for (var i = 0; i < dataSegs.length; i++) {
            this.sendString_(dataSegs[i]);
        }
    };
    WebSocketConnection.prototype.shutdown_ = function () {
        this.isClosed_ = true;
        if (this.keepaliveTimer) {
            clearInterval(this.keepaliveTimer);
            this.keepaliveTimer = null;
        }
        if (this.mySock) {
            this.mySock.close();
            this.mySock = null;
        }
    };
    WebSocketConnection.prototype.onClosed_ = function () {
        if (!this.isClosed_) {
            this.log_('WebSocket is closing itself');
            this.shutdown_();
            // since this is an internal close, trigger the close listener
            if (this.onDisconnect) {
                this.onDisconnect(this.everConnected_);
                this.onDisconnect = null;
            }
        }
    };
    /**
     * External-facing close handler.
     * Close the websocket and kill the connection.
     */
    WebSocketConnection.prototype.close = function () {
        if (!this.isClosed_) {
            this.log_('WebSocket is being closed');
            this.shutdown_();
        }
    };
    /**
     * Kill the current keepalive timer and start a new one, to ensure that it always fires N seconds after
     * the last activity.
     */
    WebSocketConnection.prototype.resetKeepAlive = function () {
        var _this = this;
        clearInterval(this.keepaliveTimer);
        this.keepaliveTimer = setInterval(function () {
            //If there has been no websocket activity for a while, send a no-op
            if (_this.mySock) {
                _this.sendString_('0');
            }
            _this.resetKeepAlive();
        }, Math.floor(WEBSOCKET_KEEPALIVE_INTERVAL));
    };
    /**
     * Send a string over the websocket.
     *
     * @param {string} str String to send.
     * @private
     */
    WebSocketConnection.prototype.sendString_ = function (str) {
        // Firefox seems to sometimes throw exceptions (NS_ERROR_UNEXPECTED) from websocket .send()
        // calls for some unknown reason.  We treat these as an error and disconnect.
        // See https://app.asana.com/0/58926111402292/68021340250410
        try {
            this.mySock.send(str);
        }
        catch (e) {
            this.log_('Exception thrown from WebSocket.send():', e.message || e.data, 'Closing connection.');
            setTimeout(this.onClosed_.bind(this), 0);
        }
    };
    /**
     * Number of response before we consider the connection "healthy."
     * @type {number}
     */
    WebSocketConnection.responsesRequiredToBeHealthy = 2;
    /**
     * Time to wait for the connection te become healthy before giving up.
     * @type {number}
     */
    WebSocketConnection.healthyTimeout = 30000;
    return WebSocketConnection;
}());
exports.WebSocketConnection = WebSocketConnection;


/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../../../process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/@firebase/database/dist/cjs/src/realtime/polling/PacketReceiver.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@firebase/database/dist/cjs/src/realtime/polling/PacketReceiver.js ***!
  \*****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__(/*! ../../core/util/util */ "./node_modules/@firebase/database/dist/cjs/src/core/util/util.js");
/**
 * This class ensures the packets from the server arrive in order
 * This class takes data from the server and ensures it gets passed into the callbacks in order.
 * @constructor
 */
var PacketReceiver = /** @class */ (function () {
    /**
     * @param onMessage_
     */
    function PacketReceiver(onMessage_) {
        this.onMessage_ = onMessage_;
        this.pendingResponses = [];
        this.currentResponseNum = 0;
        this.closeAfterResponse = -1;
        this.onClose = null;
    }
    PacketReceiver.prototype.closeAfter = function (responseNum, callback) {
        this.closeAfterResponse = responseNum;
        this.onClose = callback;
        if (this.closeAfterResponse < this.currentResponseNum) {
            this.onClose();
            this.onClose = null;
        }
    };
    /**
     * Each message from the server comes with a response number, and an array of data. The responseNumber
     * allows us to ensure that we process them in the right order, since we can't be guaranteed that all
     * browsers will respond in the same order as the requests we sent
     * @param {number} requestNum
     * @param {Array} data
     */
    PacketReceiver.prototype.handleResponse = function (requestNum, data) {
        var _this = this;
        this.pendingResponses[requestNum] = data;
        var _loop_1 = function () {
            var toProcess = this_1.pendingResponses[this_1.currentResponseNum];
            delete this_1.pendingResponses[this_1.currentResponseNum];
            var _loop_2 = function (i) {
                if (toProcess[i]) {
                    util_1.exceptionGuard(function () {
                        _this.onMessage_(toProcess[i]);
                    });
                }
            };
            for (var i = 0; i < toProcess.length; ++i) {
                _loop_2(i);
            }
            if (this_1.currentResponseNum === this_1.closeAfterResponse) {
                if (this_1.onClose) {
                    this_1.onClose();
                    this_1.onClose = null;
                }
                return "break";
            }
            this_1.currentResponseNum++;
        };
        var this_1 = this;
        while (this.pendingResponses[this.currentResponseNum]) {
            var state_1 = _loop_1();
            if (state_1 === "break")
                break;
        }
    };
    return PacketReceiver;
}());
exports.PacketReceiver = PacketReceiver;



/***/ }),

/***/ "./node_modules/@firebase/messaging/dist/esm/index.js":
/*!************************************************************!*\
  !*** ./node_modules/@firebase/messaging/dist/esm/index.js ***!
  \************************************************************/
/*! exports provided: registerMessaging */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "registerMessaging", function() { return registerMessaging; });
/* harmony import */ var _src_controllers_window_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/controllers/window-controller */ "./node_modules/@firebase/messaging/dist/esm/src/controllers/window-controller.js");
/* harmony import */ var _src_controllers_sw_controller__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/controllers/sw-controller */ "./node_modules/@firebase/messaging/dist/esm/src/controllers/sw-controller.js");
/* harmony import */ var _firebase_app__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @firebase/app */ "./node_modules/@firebase/app/dist/esm/index.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */




function registerMessaging(instance) {
    var messagingName = 'messaging';
    var factoryMethod = function (app) {
        if (self && 'ServiceWorkerGlobalScope' in self) {
            return new _src_controllers_sw_controller__WEBPACK_IMPORTED_MODULE_1__["default"](app);
        }
        // Assume we are in the window context.
        return new _src_controllers_window_controller__WEBPACK_IMPORTED_MODULE_0__["default"](app);
    };
    var namespaceExports = {
        // no-inline
        Messaging: _src_controllers_window_controller__WEBPACK_IMPORTED_MODULE_0__["default"]
    };
    instance.INTERNAL.registerService(messagingName, factoryMethod, namespaceExports);
}
registerMessaging(_firebase_app__WEBPACK_IMPORTED_MODULE_2__["default"]);



/***/ }),

/***/ "./node_modules/@firebase/messaging/dist/esm/src/controllers/controller-interface.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@firebase/messaging/dist/esm/src/controllers/controller-interface.js ***!
  \*******************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_firebase_util__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _models_errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/errors */ "./node_modules/@firebase/messaging/dist/esm/src/models/errors.js");
/* harmony import */ var _models_token_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/token-manager */ "./node_modules/@firebase/messaging/dist/esm/src/models/token-manager.js");
/* harmony import */ var _models_notification_permission__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/notification-permission */ "./node_modules/@firebase/messaging/dist/esm/src/models/notification-permission.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */





var SENDER_ID_OPTION_NAME = 'messagingSenderId';
var ControllerInterface = /** @class */ (function () {
    /**
     * An interface of the Messaging Service API
     * @param {!firebase.app.App} app
     */
    function ControllerInterface(app) {
        var _this = this;
        this.errorFactory_ = new _firebase_util__WEBPACK_IMPORTED_MODULE_0__["ErrorFactory"]('messaging', 'Messaging', _models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].map);
        if (!app.options[SENDER_ID_OPTION_NAME] ||
            typeof app.options[SENDER_ID_OPTION_NAME] !== 'string') {
            throw this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.BAD_SENDER_ID);
        }
        this.messagingSenderId_ = app.options[SENDER_ID_OPTION_NAME];
        this.tokenManager_ = new _models_token_manager__WEBPACK_IMPORTED_MODULE_2__["default"]();
        this.app = app;
        this.INTERNAL = {};
        this.INTERNAL.delete = function () { return _this.delete; };
    }
    /**
     * @export
     * @return {Promise<string> | Promise<null>} Returns a promise that
     * resolves to an FCM token.
     */
    ControllerInterface.prototype.getToken = function () {
        var _this = this;
        // Check with permissions
        var currentPermission = this.getNotificationPermission_();
        if (currentPermission !== _models_notification_permission__WEBPACK_IMPORTED_MODULE_3__["default"].granted) {
            if (currentPermission === _models_notification_permission__WEBPACK_IMPORTED_MODULE_3__["default"].denied) {
                return Promise.reject(this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.NOTIFICATIONS_BLOCKED));
            }
            // We must wait for permission to be granted
            return Promise.resolve(null);
        }
        return this.getSWRegistration_().then(function (registration) {
            return _this.tokenManager_
                .getSavedToken(_this.messagingSenderId_, registration)
                .then(function (token) {
                if (token) {
                    return token;
                }
                return _this.tokenManager_.createToken(_this.messagingSenderId_, registration);
            });
        });
    };
    /**
     * This method deletes tokens that the token manager looks after and then
     * unregisters the push subscription if it exists.
     * @export
     * @param {string} token
     * @return {Promise<void>}
     */
    ControllerInterface.prototype.deleteToken = function (token) {
        var _this = this;
        return this.tokenManager_.deleteToken(token).then(function () {
            return _this.getSWRegistration_()
                .then(function (registration) {
                if (registration) {
                    return registration.pushManager.getSubscription();
                }
            })
                .then(function (subscription) {
                if (subscription) {
                    return subscription.unsubscribe();
                }
            });
        });
    };
    ControllerInterface.prototype.getSWRegistration_ = function () {
        throw this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.SHOULD_BE_INHERITED);
    };
    //
    // The following methods should only be available in the window.
    //
    ControllerInterface.prototype.requestPermission = function () {
        throw this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.AVAILABLE_IN_WINDOW);
    };
    /**
     * @export
     * @param {!ServiceWorkerRegistration} registration
     */
    ControllerInterface.prototype.useServiceWorker = function (registration) {
        throw this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.AVAILABLE_IN_WINDOW);
    };
    /**
     * @export
     * @param {!firebase.Observer|function(*)} nextOrObserver
     * @param {function(!Error)=} optError
     * @param {function()=} optCompleted
     * @return {!function()}
     */
    ControllerInterface.prototype.onMessage = function (nextOrObserver, optError, optCompleted) {
        throw this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.AVAILABLE_IN_WINDOW);
    };
    /**
     * @export
     * @param {!firebase.Observer|function()} nextOrObserver An observer object
     * or a function triggered on token refresh.
     * @param {function(!Error)=} optError Optional A function
     * triggered on token refresh error.
     * @param {function()=} optCompleted Optional function triggered when the
     * observer is removed.
     * @return {!function()} The unsubscribe function for the observer.
     */
    ControllerInterface.prototype.onTokenRefresh = function (nextOrObserver, optError, optCompleted) {
        throw this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.AVAILABLE_IN_WINDOW);
    };
    //
    // The following methods are used by the service worker only.
    //
    /**
     * @export
     * @param {function(Object)} callback
     */
    ControllerInterface.prototype.setBackgroundMessageHandler = function (callback) {
        throw this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.AVAILABLE_IN_SW);
    };
    //
    // The following methods are used by the service themselves and not exposed
    // publicly or not expected to be used by developers.
    //
    /**
     * This method is required to adhere to the Firebase interface.
     * It closes any currently open indexdb database connections.
     */
    ControllerInterface.prototype.delete = function () {
        return this.tokenManager_.closeDatabase();
    };
    /**
     * Returns the current Notification Permission state.
     * @private
     * @return {string} The currenct permission state.
     */
    ControllerInterface.prototype.getNotificationPermission_ = function () {
        return Notification.permission;
    };
    /**
     * @protected
     * @returns {TokenManager}
     */
    ControllerInterface.prototype.getTokenManager = function () {
        return this.tokenManager_;
    };
    return ControllerInterface;
}());
/* harmony default export */ __webpack_exports__["default"] = (ControllerInterface);



/***/ }),

/***/ "./node_modules/@firebase/messaging/dist/esm/src/controllers/sw-controller.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@firebase/messaging/dist/esm/src/controllers/sw-controller.js ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _controller_interface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./controller-interface */ "./node_modules/@firebase/messaging/dist/esm/src/controllers/controller-interface.js");
/* harmony import */ var _models_errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/errors */ "./node_modules/@firebase/messaging/dist/esm/src/models/errors.js");
/* harmony import */ var _models_worker_page_message__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/worker-page-message */ "./node_modules/@firebase/messaging/dist/esm/src/models/worker-page-message.js");
/* harmony import */ var _models_fcm_details__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/fcm-details */ "./node_modules/@firebase/messaging/dist/esm/src/models/fcm-details.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();




var FCM_MSG = 'FCM_MSG';
var SWController = /** @class */ (function (_super) {
    __extends(SWController, _super);
    function SWController(app) {
        var _this = _super.call(this, app) || this;
        self.addEventListener('push', function (e) { return _this.onPush_(e); }, false);
        self.addEventListener('pushsubscriptionchange', function (e) { return _this.onSubChange_(e); }, false);
        self.addEventListener('notificationclick', function (e) { return _this.onNotificationClick_(e); }, false);
        /**
         * @private
         * @type {function(Object)|null}
         */
        _this.bgMessageHandler_ = null;
        return _this;
    }
    /**
     * A handler for push events that shows notifications based on the content of
     * the payload.
     *
     * The payload must be a JSON-encoded Object with a `notification` key. The
     * value of the `notification` property will be used as the NotificationOptions
     * object passed to showNotification. Additionally, the `title` property of the
     * notification object will be used as the title.
     *
     * If there is no notification data in the payload then no notification will be
     * shown.
     * @private
     */
    SWController.prototype.onPush_ = function (event) {
        var _this = this;
        var msgPayload;
        try {
            msgPayload = event.data.json();
        }
        catch (err) {
            // Not JSON so not an FCM message
            return;
        }
        var handleMsgPromise = this.hasVisibleClients_().then(function (hasVisibleClients) {
            if (hasVisibleClients) {
                // Do not need to show a notification.
                if (msgPayload.notification || _this.bgMessageHandler_) {
                    // Send to page
                    return _this.sendMessageToWindowClients_(msgPayload);
                }
                return;
            }
            var notificationDetails = _this.getNotificationData_(msgPayload);
            if (notificationDetails) {
                var notificationTitle = notificationDetails.title || '';
                return self.registration.showNotification(notificationTitle, notificationDetails);
            }
            else if (_this.bgMessageHandler_) {
                return _this.bgMessageHandler_(msgPayload);
            }
        });
        event.waitUntil(handleMsgPromise);
    };
    /**
     * @private
     */
    SWController.prototype.onSubChange_ = function (event) {
        var _this = this;
        var promiseChain = this.getToken().then(function (token) {
            if (!token) {
                // We can't resubscribe if we don't have an FCM token for this scope.
                throw _this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.NO_FCM_TOKEN_FOR_RESUBSCRIBE);
            }
            var tokenDetails = null;
            var tokenManager = _this.getTokenManager();
            return tokenManager
                .getTokenDetailsFromToken(token)
                .then(function (details) {
                tokenDetails = details;
                if (!tokenDetails) {
                    throw _this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.INVALID_SAVED_TOKEN);
                }
                // Attempt to get a new subscription
                return self.registration.pushManager.subscribe(_models_fcm_details__WEBPACK_IMPORTED_MODULE_3__["default"].SUBSCRIPTION_OPTIONS);
            })
                .then(function (newSubscription) {
                // Send new subscription to FCM.
                return tokenManager.subscribeToFCM(tokenDetails.fcmSenderId, newSubscription, tokenDetails.fcmPushSet);
            })
                .catch(function (err) {
                // The best thing we can do is log this to the terminal so
                // developers might notice the error.
                return tokenManager.deleteToken(tokenDetails.fcmToken).then(function () {
                    throw _this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.UNABLE_TO_RESUBSCRIBE, {
                        message: err
                    });
                });
            });
        });
        event.waitUntil(promiseChain);
    };
    /**
     * @private
     */
    SWController.prototype.onNotificationClick_ = function (event) {
        var _this = this;
        if (!(event.notification &&
            event.notification.data &&
            event.notification.data[FCM_MSG])) {
            // Not an FCM notification, do nothing.
            return;
        }
        // Prevent other listeners from receiving the event
        event.stopImmediatePropagation();
        event.notification.close();
        var msgPayload = event.notification.data[FCM_MSG];
        var clickAction = msgPayload['notification']['click_action'];
        if (!clickAction) {
            // Nothing to do.
            return;
        }
        var promiseChain = this.getWindowClient_(clickAction)
            .then(function (windowClient) {
            if (!windowClient) {
                // Unable to find window client so need to open one.
                return self.clients.openWindow(clickAction);
            }
            return windowClient;
        })
            .then(function (windowClient) {
            if (!windowClient) {
                // Window Client will not be returned if it's for a third party origin.
                return;
            }
            // Delete notification data from payload before sending to the page.
            var notificationData = msgPayload['notification'];
            delete msgPayload['notification'];
            var internalMsg = _models_worker_page_message__WEBPACK_IMPORTED_MODULE_2__["default"].createNewMsg(_models_worker_page_message__WEBPACK_IMPORTED_MODULE_2__["default"].TYPES_OF_MSG.NOTIFICATION_CLICKED, msgPayload);
            // Attempt to send a message to the client to handle the data
            // Is affected by: https://github.com/slightlyoff/ServiceWorker/issues/728
            return _this.attemptToMessageClient_(windowClient, internalMsg);
        });
        event.waitUntil(promiseChain);
    };
    /**
     * @private
     * @param {Object} msgPayload
     * @return {NotificationOptions|undefined}
     */
    SWController.prototype.getNotificationData_ = function (msgPayload) {
        if (!msgPayload) {
            return;
        }
        if (typeof msgPayload.notification !== 'object') {
            return;
        }
        var notificationInformation = Object.assign({}, msgPayload.notification);
        // Put the message payload under FCM_MSG name so we can identify the
        // notification as being an FCM notification vs a notification from
        // somewhere else (i.e. normal web push or developer generated
        // notification).
        notificationInformation['data'] = (_a = {},
            _a[FCM_MSG] = msgPayload,
            _a);
        return notificationInformation;
        var _a;
    };
    /**
     * Calling setBackgroundMessageHandler will opt in to some specific
     * behaviours.
     * 1.) If a notification doesn't need to be shown due to a window already
     * being visible, then push messages will be sent to the page.
     * 2.) If a notification needs to be shown, and the message contains no
     * notification data this method will be called
     * and the promise it returns will be passed to event.waitUntil.
     * If you do not set this callback then all push messages will let and the
     * developer can handle them in a their own 'push' event callback
     * @export
     * @param {function(Object)} callback The callback to be called when a push
     * message is received and a notification must be shown. The callback will
     * be given the data from the push message.
     */
    SWController.prototype.setBackgroundMessageHandler = function (callback) {
        if (callback && typeof callback !== 'function') {
            throw this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.BG_HANDLER_FUNCTION_EXPECTED);
        }
        this.bgMessageHandler_ = callback;
    };
    /**
     * @private
     * @param {string} url The URL to look for when focusing a client.
     * @return {Object} Returns an existing window client or a newly opened
     * WindowClient.
     */
    SWController.prototype.getWindowClient_ = function (url) {
        // Use URL to normalize the URL when comparing to windowClients.
        // This at least handles whether to include trailing slashes or not
        var parsedURL = new URL(url).href;
        return self.clients
            .matchAll({
            type: 'window',
            includeUncontrolled: true
        })
            .then(function (clientList) {
            var suitableClient = null;
            for (var i = 0; i < clientList.length; i++) {
                var parsedClientUrl = new URL(clientList[i].url).href;
                if (parsedClientUrl === parsedURL) {
                    suitableClient = clientList[i];
                    break;
                }
            }
            if (suitableClient) {
                suitableClient.focus();
                return suitableClient;
            }
        });
    };
    /**
     * This message will attempt to send the message to a window client.
     * @private
     * @param {Object} client The WindowClient to send the message to.
     * @param {Object} message The message to send to the client.
     * @returns {Promise} Returns a promise that resolves after sending the
     * message. This does not guarantee that the message was successfully
     * received.
     */
    SWController.prototype.attemptToMessageClient_ = function (client, message) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            if (!client) {
                return reject(_this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.NO_WINDOW_CLIENT_TO_MSG));
            }
            client.postMessage(message);
            resolve();
        });
    };
    /**
     * @private
     * @returns {Promise<boolean>} If there is currently a visible WindowClient,
     * this method will resolve to true, otherwise false.
     */
    SWController.prototype.hasVisibleClients_ = function () {
        return self.clients
            .matchAll({
            type: 'window',
            includeUncontrolled: true
        })
            .then(function (clientList) {
            return clientList.some(function (client) { return client.visibilityState === 'visible'; });
        });
    };
    /**
     * @private
     * @param {Object} msgPayload The data from the push event that should be sent
     * to all available pages.
     * @returns {Promise} Returns a promise that resolves once the message
     * has been sent to all WindowClients.
     */
    SWController.prototype.sendMessageToWindowClients_ = function (msgPayload) {
        var _this = this;
        return self.clients
            .matchAll({
            type: 'window',
            includeUncontrolled: true
        })
            .then(function (clientList) {
            var internalMsg = _models_worker_page_message__WEBPACK_IMPORTED_MODULE_2__["default"].createNewMsg(_models_worker_page_message__WEBPACK_IMPORTED_MODULE_2__["default"].TYPES_OF_MSG.PUSH_MSG_RECEIVED, msgPayload);
            return Promise.all(clientList.map(function (client) {
                return _this.attemptToMessageClient_(client, internalMsg);
            }));
        });
    };
    /**
     * This will register the default service worker and return the registration.
     * @private
     * @return {Promise<!ServiceWorkerRegistration>} The service worker
     * registration to be used for the push service.
     */
    SWController.prototype.getSWRegistration_ = function () {
        return Promise.resolve(self.registration);
    };
    return SWController;
}(_controller_interface__WEBPACK_IMPORTED_MODULE_0__["default"]));
/* harmony default export */ __webpack_exports__["default"] = (SWController);



/***/ }),

/***/ "./node_modules/@firebase/messaging/dist/esm/src/controllers/window-controller.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@firebase/messaging/dist/esm/src/controllers/window-controller.js ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _controller_interface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./controller-interface */ "./node_modules/@firebase/messaging/dist/esm/src/controllers/controller-interface.js");
/* harmony import */ var _models_errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/errors */ "./node_modules/@firebase/messaging/dist/esm/src/models/errors.js");
/* harmony import */ var _models_worker_page_message__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/worker-page-message */ "./node_modules/@firebase/messaging/dist/esm/src/models/worker-page-message.js");
/* harmony import */ var _models_default_sw__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/default-sw */ "./node_modules/@firebase/messaging/dist/esm/src/models/default-sw.js");
/* harmony import */ var _models_notification_permission__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../models/notification-permission */ "./node_modules/@firebase/messaging/dist/esm/src/models/notification-permission.js");
/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_firebase_util__WEBPACK_IMPORTED_MODULE_5__);
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();






var WindowController = /** @class */ (function (_super) {
    __extends(WindowController, _super);
    /**
     * A service that provides a MessagingService instance.
     * @param {!firebase.app.App} app
     */
    function WindowController(app) {
        var _this = _super.call(this, app) || this;
        /**
         * @private
         * @type {ServiceWorkerRegistration}
         */
        _this.registrationToUse_;
        /**
         * @private
         * @type {Promise}
         */
        _this.manifestCheckPromise_;
        /**
         * @private
         * @type {firebase.Observer}
         */
        _this.messageObserver_ = null;
        /**
         * @private {!firebase.Subscribe} The subscribe function to the onMessage
         * observer.
         */
        _this.onMessage_ = Object(_firebase_util__WEBPACK_IMPORTED_MODULE_5__["createSubscribe"])(function (observer) {
            _this.messageObserver_ = observer;
        });
        /**
         * @private
         * @type {firebase.Observer}
         */
        _this.tokenRefreshObserver_ = null;
        _this.onTokenRefresh_ = Object(_firebase_util__WEBPACK_IMPORTED_MODULE_5__["createSubscribe"])(function (observer) {
            _this.tokenRefreshObserver_ = observer;
        });
        _this.setupSWMessageListener_();
        return _this;
    }
    /**
     * This method returns an FCM token if it can be generated.
     * The return promise will reject if the browser doesn't support
     * FCM, if permission is denied for notifications or it's not
     * possible to generate a token.
     * @export
     * @return {Promise<string> | Promise<null>} Returns a promise the
     * resolves to an FCM token or null if permission isn't granted.
     */
    WindowController.prototype.getToken = function () {
        var _this = this;
        // Check that the required API's are available
        if (!this.isSupported_()) {
            return Promise.reject(this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.UNSUPPORTED_BROWSER));
        }
        return this.manifestCheck_().then(function () {
            return _super.prototype.getToken.call(_this);
        });
    };
    /**
     * The method checks that a manifest is defined and has the correct GCM
     * sender ID.
     * @private
     * @return {Promise} Returns a promise that resolves if the manifest matches
     * our required sender ID
     */
    WindowController.prototype.manifestCheck_ = function () {
        var _this = this;
        if (this.manifestCheckPromise_) {
            return this.manifestCheckPromise_;
        }
        var manifestTag = document.querySelector('link[rel="manifest"]');
        if (!manifestTag) {
            this.manifestCheckPromise_ = Promise.resolve();
        }
        else {
            this.manifestCheckPromise_ = fetch(manifestTag.href)
                .then(function (response) {
                return response.json();
            })
                .catch(function () {
                // If the download or parsing fails allow check.
                // We only want to error if we KNOW that the gcm_sender_id is incorrect.
                return Promise.resolve();
            })
                .then(function (manifestContent) {
                if (!manifestContent) {
                    return;
                }
                if (!manifestContent['gcm_sender_id']) {
                    return;
                }
                if (manifestContent['gcm_sender_id'] !== '103953800507') {
                    throw _this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.INCORRECT_GCM_SENDER_ID);
                }
            });
        }
        return this.manifestCheckPromise_;
    };
    /**
     * Request permission if it is not currently granted
     * @export
     * @returns {Promise} Resolves if the permission was granted, otherwise
     * rejects
     */
    WindowController.prototype.requestPermission = function () {
        var _this = this;
        if (Notification.permission === _models_notification_permission__WEBPACK_IMPORTED_MODULE_4__["default"].granted) {
            return Promise.resolve();
        }
        return new Promise(function (resolve, reject) {
            var managePermissionResult = function (result) {
                if (result === _models_notification_permission__WEBPACK_IMPORTED_MODULE_4__["default"].granted) {
                    return resolve();
                }
                else if (result === _models_notification_permission__WEBPACK_IMPORTED_MODULE_4__["default"].denied) {
                    return reject(_this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.PERMISSION_BLOCKED));
                }
                else {
                    return reject(_this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.PERMISSION_DEFAULT));
                }
            };
            // The Notification.requestPermission API was changed to
            // return a promise so now have to handle both in case
            // browsers stop support callbacks for promised version
            var permissionPromise = Notification.requestPermission(function (result) {
                if (permissionPromise) {
                    // Let the promise manage this
                    return;
                }
                managePermissionResult(result);
            });
            if (permissionPromise) {
                // Prefer the promise version as it's the future API.
                permissionPromise.then(managePermissionResult);
            }
        });
    };
    /**
     * This method allows a developer to override the default service worker and
     * instead use a custom service worker.
     * @export
     * @param {!ServiceWorkerRegistration} registration The service worker
     * registration that should be used to receive the push messages.
     */
    WindowController.prototype.useServiceWorker = function (registration) {
        if (!(registration instanceof ServiceWorkerRegistration)) {
            throw this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.SW_REGISTRATION_EXPECTED);
        }
        if (typeof this.registrationToUse_ !== 'undefined') {
            throw this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.USE_SW_BEFORE_GET_TOKEN);
        }
        this.registrationToUse_ = registration;
    };
    /**
     * @export
     * @param {!firebase.Observer|function(*)} nextOrObserver An observer object
     * or a function triggered on message.
     * @param {function(!Error)=} optError Optional A function triggered on
     * message error.
     * @param {function()=} optCompleted Optional function triggered when the
     * observer is removed.
     * @return {!function()} The unsubscribe function for the observer.
     */
    WindowController.prototype.onMessage = function (nextOrObserver, optError, optCompleted) {
        return this.onMessage_(nextOrObserver, optError, optCompleted);
    };
    /**
     * @export
     * @param {!firebase.Observer|function()} nextOrObserver An observer object
     * or a function triggered on token refresh.
     * @param {function(!Error)=} optError Optional A function
     * triggered on token refresh error.
     * @param {function()=} optCompleted Optional function triggered when the
     * observer is removed.
     * @return {!function()} The unsubscribe function for the observer.
     */
    WindowController.prototype.onTokenRefresh = function (nextOrObserver, optError, optCompleted) {
        return this.onTokenRefresh_(nextOrObserver, optError, optCompleted);
    };
    /**
     * Given a registration, wait for the service worker it relates to
     * become activer
     * @private
     * @param  {ServiceWorkerRegistration} registration Registration to wait
     * for service worker to become active
     * @return {Promise<!ServiceWorkerRegistration>} Wait for service worker
     * registration to become active
     */
    WindowController.prototype.waitForRegistrationToActivate_ = function (registration) {
        var _this = this;
        var serviceWorker = registration.installing || registration.waiting || registration.active;
        return new Promise(function (resolve, reject) {
            if (!serviceWorker) {
                // This is a rare scenario but has occured in firefox
                reject(_this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.NO_SW_IN_REG));
                return;
            }
            // Because the Promise function is called on next tick there is a
            // small chance that the worker became active or redundant already.
            if (serviceWorker.state === 'activated') {
                resolve(registration);
                return;
            }
            if (serviceWorker.state === 'redundant') {
                reject(_this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.SW_REG_REDUNDANT));
                return;
            }
            var stateChangeListener = function () {
                if (serviceWorker.state === 'activated') {
                    resolve(registration);
                }
                else if (serviceWorker.state === 'redundant') {
                    reject(_this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.SW_REG_REDUNDANT));
                }
                else {
                    // Return early and wait to next state change
                    return;
                }
                serviceWorker.removeEventListener('statechange', stateChangeListener);
            };
            serviceWorker.addEventListener('statechange', stateChangeListener);
        });
    };
    /**
     * This will regiater the default service worker and return the registration
     * @private
     * @return {Promise<!ServiceWorkerRegistration>} The service worker
     * registration to be used for the push service.
     */
    WindowController.prototype.getSWRegistration_ = function () {
        var _this = this;
        if (this.registrationToUse_) {
            return this.waitForRegistrationToActivate_(this.registrationToUse_);
        }
        // Make the registration null so we know useServiceWorker will not
        // use a new service worker as registrationToUse_ is no longer undefined
        this.registrationToUse_ = null;
        return navigator.serviceWorker
            .register(_models_default_sw__WEBPACK_IMPORTED_MODULE_3__["default"].path, {
            scope: _models_default_sw__WEBPACK_IMPORTED_MODULE_3__["default"].scope
        })
            .catch(function (err) {
            throw _this.errorFactory_.create(_models_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.FAILED_DEFAULT_REGISTRATION, {
                browserErrorMessage: err.message
            });
        })
            .then(function (registration) {
            return _this.waitForRegistrationToActivate_(registration).then(function () {
                _this.registrationToUse_ = registration;
                // We update after activation due to an issue with Firefox v49 where
                // a race condition occassionally causes the service work to not
                // install
                registration.update();
                return registration;
            });
        });
    };
    /**
     * This method will set up a message listener to handle
     * events from the service worker that should trigger
     * events in the page.
     *
     * @private
     */
    WindowController.prototype.setupSWMessageListener_ = function () {
        var _this = this;
        if (!('serviceWorker' in navigator)) {
            return;
        }
        navigator.serviceWorker.addEventListener('message', function (event) {
            if (!event.data || !event.data[_models_worker_page_message__WEBPACK_IMPORTED_MODULE_2__["default"].PARAMS.TYPE_OF_MSG]) {
                // Not a message from FCM
                return;
            }
            var workerPageMessage = event.data;
            switch (workerPageMessage[_models_worker_page_message__WEBPACK_IMPORTED_MODULE_2__["default"].PARAMS.TYPE_OF_MSG]) {
                case _models_worker_page_message__WEBPACK_IMPORTED_MODULE_2__["default"].TYPES_OF_MSG.PUSH_MSG_RECEIVED:
                case _models_worker_page_message__WEBPACK_IMPORTED_MODULE_2__["default"].TYPES_OF_MSG.NOTIFICATION_CLICKED:
                    var pushMessage = workerPageMessage[_models_worker_page_message__WEBPACK_IMPORTED_MODULE_2__["default"].PARAMS.DATA];
                    _this.messageObserver_.next(pushMessage);
                    break;
                default:
                    // Noop.
                    break;
            }
        }, false);
    };
    /**
     * Checks to see if the required API's are valid or not.
     * @private
     * @return {boolean} Returns true if the desired APIs are available.
     */
    WindowController.prototype.isSupported_ = function () {
        return ('serviceWorker' in navigator &&
            'PushManager' in window &&
            'Notification' in window &&
            'fetch' in window &&
            ServiceWorkerRegistration.prototype.hasOwnProperty('showNotification') &&
            PushSubscription.prototype.hasOwnProperty('getKey'));
    };
    return WindowController;
}(_controller_interface__WEBPACK_IMPORTED_MODULE_0__["default"]));
/* harmony default export */ __webpack_exports__["default"] = (WindowController);



/***/ }),

/***/ "./node_modules/@firebase/messaging/dist/esm/src/helpers/array-buffer-to-base64.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@firebase/messaging/dist/esm/src/helpers/array-buffer-to-base64.js ***!
  \*****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function toBase64(arrayBuffer) {
    var uint8Version = new Uint8Array(arrayBuffer);
    return window.btoa(String.fromCharCode.apply(null, uint8Version));
}
/* harmony default export */ __webpack_exports__["default"] = (function (arrayBuffer) {
    var base64String = toBase64(arrayBuffer);
    return base64String
        .replace(/=/g, '')
        .replace(/\+/g, '-')
        .replace(/\//g, '_');
});;



/***/ }),

/***/ "./node_modules/@firebase/messaging/dist/esm/src/models/default-sw.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@firebase/messaging/dist/esm/src/models/default-sw.js ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* harmony default export */ __webpack_exports__["default"] = ({
    path: '/firebase-messaging-sw.js',
    scope: '/firebase-cloud-messaging-push-scope'
});



/***/ }),

/***/ "./node_modules/@firebase/messaging/dist/esm/src/models/errors.js":
/*!************************************************************************!*\
  !*** ./node_modules/@firebase/messaging/dist/esm/src/models/errors.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var CODES = {
    AVAILABLE_IN_WINDOW: 'only-available-in-window',
    AVAILABLE_IN_SW: 'only-available-in-sw',
    SHOULD_BE_INHERITED: 'should-be-overriden',
    BAD_SENDER_ID: 'bad-sender-id',
    INCORRECT_GCM_SENDER_ID: 'incorrect-gcm-sender-id',
    PERMISSION_DEFAULT: 'permission-default',
    PERMISSION_BLOCKED: 'permission-blocked',
    UNSUPPORTED_BROWSER: 'unsupported-browser',
    NOTIFICATIONS_BLOCKED: 'notifications-blocked',
    FAILED_DEFAULT_REGISTRATION: 'failed-serviceworker-registration',
    SW_REGISTRATION_EXPECTED: 'sw-registration-expected',
    GET_SUBSCRIPTION_FAILED: 'get-subscription-failed',
    INVALID_SAVED_TOKEN: 'invalid-saved-token',
    SW_REG_REDUNDANT: 'sw-reg-redundant',
    TOKEN_SUBSCRIBE_FAILED: 'token-subscribe-failed',
    TOKEN_SUBSCRIBE_NO_TOKEN: 'token-subscribe-no-token',
    TOKEN_SUBSCRIBE_NO_PUSH_SET: 'token-subscribe-no-push-set',
    USE_SW_BEFORE_GET_TOKEN: 'use-sw-before-get-token',
    INVALID_DELETE_TOKEN: 'invalid-delete-token',
    DELETE_TOKEN_NOT_FOUND: 'delete-token-not-found',
    DELETE_SCOPE_NOT_FOUND: 'delete-scope-not-found',
    BG_HANDLER_FUNCTION_EXPECTED: 'bg-handler-function-expected',
    NO_WINDOW_CLIENT_TO_MSG: 'no-window-client-to-msg',
    UNABLE_TO_RESUBSCRIBE: 'unable-to-resubscribe',
    NO_FCM_TOKEN_FOR_RESUBSCRIBE: 'no-fcm-token-for-resubscribe',
    FAILED_TO_DELETE_TOKEN: 'failed-to-delete-token',
    NO_SW_IN_REG: 'no-sw-in-reg',
    BAD_SCOPE: 'bad-scope',
    BAD_VAPID_KEY: 'bad-vapid-key',
    BAD_SUBSCRIPTION: 'bad-subscription',
    BAD_TOKEN: 'bad-token',
    BAD_PUSH_SET: 'bad-push-set',
    FAILED_DELETE_VAPID_KEY: 'failed-delete-vapid-key'
};
var ERROR_MAP = (_a = {},
    _a[CODES.AVAILABLE_IN_WINDOW] = 'This method is available in a Window context.',
    _a[CODES.AVAILABLE_IN_SW] = 'This method is available in a service worker ' + 'context.',
    _a[CODES.SHOULD_BE_INHERITED] = 'This method should be overriden by ' + 'extended classes.',
    _a[CODES.BAD_SENDER_ID] = "Please ensure that 'messagingSenderId' is set " +
        'correctly in the options passed into firebase.initializeApp().',
    _a[CODES.PERMISSION_DEFAULT] = 'The required permissions were not granted and ' + 'dismissed instead.',
    _a[CODES.PERMISSION_BLOCKED] = 'The required permissions were not granted and ' + 'blocked instead.',
    _a[CODES.UNSUPPORTED_BROWSER] = "This browser doesn't support the API's " +
        'required to use the firebase SDK.',
    _a[CODES.NOTIFICATIONS_BLOCKED] = 'Notifications have been blocked.',
    _a[CODES.FAILED_DEFAULT_REGISTRATION] = 'We are unable to register the ' +
        'default service worker. {$browserErrorMessage}',
    _a[CODES.SW_REGISTRATION_EXPECTED] = 'A service worker registration was the ' + 'expected input.',
    _a[CODES.GET_SUBSCRIPTION_FAILED] = 'There was an error when trying to get ' +
        'any existing Push Subscriptions.',
    _a[CODES.INVALID_SAVED_TOKEN] = 'Unable to access details of the saved token.',
    _a[CODES.SW_REG_REDUNDANT] = 'The service worker being used for push was made ' + 'redundant.',
    _a[CODES.TOKEN_SUBSCRIBE_FAILED] = 'A problem occured while subscribing the ' + 'user to FCM: {$message}',
    _a[CODES.TOKEN_SUBSCRIBE_NO_TOKEN] = 'FCM returned no token when subscribing ' + 'the user to push.',
    _a[CODES.TOKEN_SUBSCRIBE_NO_PUSH_SET] = 'FCM returned an invalid response ' + 'when getting an FCM token.',
    _a[CODES.USE_SW_BEFORE_GET_TOKEN] = 'You must call useServiceWorker() before ' +
        'calling getToken() to ensure your service worker is used.',
    _a[CODES.INVALID_DELETE_TOKEN] = 'You must pass a valid token into ' +
        'deleteToken(), i.e. the token from getToken().',
    _a[CODES.DELETE_TOKEN_NOT_FOUND] = 'The deletion attempt for token could not ' +
        'be performed as the token was not found.',
    _a[CODES.DELETE_SCOPE_NOT_FOUND] = 'The deletion attempt for service worker ' +
        'scope could not be performed as the scope was not found.',
    _a[CODES.BG_HANDLER_FUNCTION_EXPECTED] = 'The input to ' + 'setBackgroundMessageHandler() must be a function.',
    _a[CODES.NO_WINDOW_CLIENT_TO_MSG] = 'An attempt was made to message a ' + 'non-existant window client.',
    _a[CODES.UNABLE_TO_RESUBSCRIBE] = 'There was an error while re-subscribing ' +
        'the FCM token for push messaging. Will have to resubscribe the ' +
        'user on next visit. {$message}',
    _a[CODES.NO_FCM_TOKEN_FOR_RESUBSCRIBE] = 'Could not find an FCM token ' +
        'and as a result, unable to resubscribe. Will have to resubscribe the ' +
        'user on next visit.',
    _a[CODES.FAILED_TO_DELETE_TOKEN] = 'Unable to delete the currently saved token.',
    _a[CODES.NO_SW_IN_REG] = 'Even though the service worker registration was ' +
        'successful, there was a problem accessing the service worker itself.',
    _a[CODES.INCORRECT_GCM_SENDER_ID] = "Please change your web app manifest's " +
        "'gcm_sender_id' value to '103953800507' to use Firebase messaging.",
    _a[CODES.BAD_SCOPE] = 'The service worker scope must be a string with at ' +
        'least one character.',
    _a[CODES.BAD_VAPID_KEY] = 'The public VAPID key must be a string with at ' + 'least one character.',
    _a[CODES.BAD_SUBSCRIPTION] = 'The subscription must be a valid ' + 'PushSubscription.',
    _a[CODES.BAD_TOKEN] = 'The FCM Token used for storage / lookup was not ' +
        'a valid token string.',
    _a[CODES.BAD_PUSH_SET] = 'The FCM push set used for storage / lookup was not ' +
        'not a valid push set string.',
    _a[CODES.FAILED_DELETE_VAPID_KEY] = 'The VAPID key could not be deleted.',
    _a);
/* harmony default export */ __webpack_exports__["default"] = ({
    codes: CODES,
    map: ERROR_MAP
});
var _a;



/***/ }),

/***/ "./node_modules/@firebase/messaging/dist/esm/src/models/fcm-details.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@firebase/messaging/dist/esm/src/models/fcm-details.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var FCM_APPLICATION_SERVER_KEY = [
    0x04,
    0x33,
    0x94,
    0xf7,
    0xdf,
    0xa1,
    0xeb,
    0xb1,
    0xdc,
    0x03,
    0xa2,
    0x5e,
    0x15,
    0x71,
    0xdb,
    0x48,
    0xd3,
    0x2e,
    0xed,
    0xed,
    0xb2,
    0x34,
    0xdb,
    0xb7,
    0x47,
    0x3a,
    0x0c,
    0x8f,
    0xc4,
    0xcc,
    0xe1,
    0x6f,
    0x3c,
    0x8c,
    0x84,
    0xdf,
    0xab,
    0xb6,
    0x66,
    0x3e,
    0xf2,
    0x0c,
    0xd4,
    0x8b,
    0xfe,
    0xe3,
    0xf9,
    0x76,
    0x2f,
    0x14,
    0x1c,
    0x63,
    0x08,
    0x6a,
    0x6f,
    0x2d,
    0xb1,
    0x1a,
    0x95,
    0xb0,
    0xce,
    0x37,
    0xc0,
    0x9c,
    0x6e
];
var SUBSCRIPTION_DETAILS = {
    userVisibleOnly: true,
    applicationServerKey: new Uint8Array(FCM_APPLICATION_SERVER_KEY)
};
/* harmony default export */ __webpack_exports__["default"] = ({
    ENDPOINT: 'https://fcm.googleapis.com',
    APPLICATION_SERVER_KEY: FCM_APPLICATION_SERVER_KEY,
    SUBSCRIPTION_OPTIONS: SUBSCRIPTION_DETAILS
});



/***/ }),

/***/ "./node_modules/@firebase/messaging/dist/esm/src/models/notification-permission.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@firebase/messaging/dist/esm/src/models/notification-permission.js ***!
  \*****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* harmony default export */ __webpack_exports__["default"] = ({
    granted: 'granted',
    default: 'default',
    denied: 'denied'
});



/***/ }),

/***/ "./node_modules/@firebase/messaging/dist/esm/src/models/token-manager.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@firebase/messaging/dist/esm/src/models/token-manager.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/util */ "./node_modules/@firebase/util/dist/cjs/index.js");
/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_firebase_util__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors */ "./node_modules/@firebase/messaging/dist/esm/src/models/errors.js");
/* harmony import */ var _helpers_array_buffer_to_base64__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helpers/array-buffer-to-base64 */ "./node_modules/@firebase/messaging/dist/esm/src/helpers/array-buffer-to-base64.js");
/* harmony import */ var _fcm_details__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./fcm-details */ "./node_modules/@firebase/messaging/dist/esm/src/models/fcm-details.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */





var FCM_TOKEN_OBJ_STORE = 'fcm_token_object_Store';
var FCM_TOKEN_DETAILS_DB_VERSION = 1;
var TokenManager = /** @class */ (function () {
    function TokenManager() {
        this.errorFactory_ = new _firebase_util__WEBPACK_IMPORTED_MODULE_0__["ErrorFactory"]('messaging', 'Messaging', _errors__WEBPACK_IMPORTED_MODULE_1__["default"].map);
        this.openDbPromise_ = null;
    }
    /**
     * Get the indexedDB as a promsie.
     * @private
     * @return {Promise<IDBDatabase>} The IndexedDB database
     */
    TokenManager.prototype.openDatabase_ = function () {
        if (this.openDbPromise_) {
            return this.openDbPromise_;
        }
        this.openDbPromise_ = new Promise(function (resolve, reject) {
            var request = indexedDB.open(TokenManager.DB_NAME, FCM_TOKEN_DETAILS_DB_VERSION);
            request.onerror = function (event) {
                reject(event.target.error);
            };
            request.onsuccess = function (event) {
                resolve(event.target.result);
            };
            request.onupgradeneeded = function (event) {
                var db = event.target.result;
                var objectStore = db.createObjectStore(FCM_TOKEN_OBJ_STORE, {
                    keyPath: 'swScope'
                });
                // Make sure the sender ID can be searched
                objectStore.createIndex('fcmSenderId', 'fcmSenderId', {
                    unique: false
                });
                objectStore.createIndex('fcmToken', 'fcmToken', {
                    unique: true
                });
            };
        });
        return this.openDbPromise_;
    };
    /**
     * Close the currently open database.
     * @return {Promise<?>} Returns the result of the promise chain.
     */
    TokenManager.prototype.closeDatabase = function () {
        var _this = this;
        if (this.openDbPromise_) {
            return this.openDbPromise_.then(function (db) {
                db.close();
                _this.openDbPromise_ = null;
            });
        }
        return Promise.resolve();
    };
    /**
     * Given a token, this method will look up the details in indexedDB.
     * @public
     * @param {string} fcmToken
     * @return {Promise<Object>} The details associated with that token.
     */
    TokenManager.prototype.getTokenDetailsFromToken = function (fcmToken) {
        return this.openDatabase_().then(function (db) {
            return new Promise(function (resolve, reject) {
                var transaction = db.transaction([FCM_TOKEN_OBJ_STORE]);
                var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);
                var index = objectStore.index('fcmToken');
                var request = index.get(fcmToken);
                request.onerror = function (event) {
                    reject(event.target.error);
                };
                request.onsuccess = function (event) {
                    resolve(event.target.result);
                };
            });
        });
    };
    TokenManager.prototype.getTokenDetailsFromSWScope_ = function (swScope) {
        return this.openDatabase_().then(function (db) {
            return new Promise(function (resolve, reject) {
                var transaction = db.transaction([FCM_TOKEN_OBJ_STORE]);
                var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);
                var scopeRequest = objectStore.get(swScope);
                scopeRequest.onerror = function (event) {
                    reject(event.target.error);
                };
                scopeRequest.onsuccess = function (event) {
                    resolve(event.target.result);
                };
            });
        });
    };
    TokenManager.prototype.getAllTokenDetailsForSenderId_ = function (senderId) {
        return this.openDatabase_().then(function (db) {
            return new Promise(function (resolve, reject) {
                var transaction = db.transaction([FCM_TOKEN_OBJ_STORE]);
                var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);
                var senderIdTokens = [];
                var cursorRequest = objectStore.openCursor();
                cursorRequest.onerror = function (event) {
                    reject(event.target.error);
                };
                cursorRequest.onsuccess = function (event) {
                    var cursor = event.target.result;
                    if (cursor) {
                        if (cursor.value['fcmSenderId'] === senderId) {
                            senderIdTokens.push(cursor.value);
                        }
                        cursor.continue();
                    }
                    else {
                        resolve(senderIdTokens);
                    }
                };
            });
        });
    };
    /**
     * Given a PushSubscription and messagingSenderId, get an FCM token.
     * @public
     * @param  {string} senderId The 'messagingSenderId' to tie the token to.
     * @param  {PushSubscription} subscription The PushSusbcription to "federate".
     * @param  {string=} pushSet If defined this will swap the subscription for
     * matching FCM token.
     * @return {Promise<!Object>} Returns the FCM token to be used in place
     * of the PushSubscription.
     */
    TokenManager.prototype.subscribeToFCM = function (senderId, subscription, pushSet) {
        var _this = this;
        var p256dh = Object(_helpers_array_buffer_to_base64__WEBPACK_IMPORTED_MODULE_2__["default"])(subscription['getKey']('p256dh'));
        var auth = Object(_helpers_array_buffer_to_base64__WEBPACK_IMPORTED_MODULE_2__["default"])(subscription['getKey']('auth'));
        var fcmSubscribeBody = "authorized_entity=" + senderId + "&" +
            ("endpoint=" + subscription.endpoint + "&") +
            ("encryption_key=" + p256dh + "&") +
            ("encryption_auth=" + auth);
        if (pushSet) {
            fcmSubscribeBody += "&pushSet=" + pushSet;
        }
        var headers = new Headers();
        headers.append('Content-Type', 'application/x-www-form-urlencoded');
        var subscribeOptions = {
            method: 'POST',
            headers: headers,
            body: fcmSubscribeBody
        };
        return fetch(_fcm_details__WEBPACK_IMPORTED_MODULE_3__["default"].ENDPOINT + '/fcm/connect/subscribe', subscribeOptions)
            .then(function (response) { return response.json(); })
            .then(function (response) {
            var fcmTokenResponse = response;
            if (fcmTokenResponse['error']) {
                var message = fcmTokenResponse['error']['message'];
                throw _this.errorFactory_.create(_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.TOKEN_SUBSCRIBE_FAILED, {
                    message: message
                });
            }
            if (!fcmTokenResponse['token']) {
                throw _this.errorFactory_.create(_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.TOKEN_SUBSCRIBE_NO_TOKEN);
            }
            if (!fcmTokenResponse['pushSet']) {
                throw _this.errorFactory_.create(_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.TOKEN_SUBSCRIBE_NO_PUSH_SET);
            }
            return {
                token: fcmTokenResponse['token'],
                pushSet: fcmTokenResponse['pushSet']
            };
        });
    };
    /**
     * Checks the that fields in the PushSubscription are equivalent to the
     * details stores in the masterTokenDetails.
     * @private
     * @param  {PushSubscription} subscription The push subscription we expect
     * the master token to match.
     * @param  {Object}  masterTokenDetails The saved details we wish to compare
     * with the PushSubscription
     * @return {boolean} true if the subscription and token details are
     * equivalent.
     */
    TokenManager.prototype.isSameSubscription_ = function (subscription, masterTokenDetails) {
        // getKey() isn't defined in the PushSubscription externs file, hence
        // subscription['getKey']('<key name>').
        return (subscription.endpoint === masterTokenDetails['endpoint'] &&
            Object(_helpers_array_buffer_to_base64__WEBPACK_IMPORTED_MODULE_2__["default"])(subscription['getKey']('auth')) ===
                masterTokenDetails['auth'] &&
            Object(_helpers_array_buffer_to_base64__WEBPACK_IMPORTED_MODULE_2__["default"])(subscription['getKey']('p256dh')) ===
                masterTokenDetails['p256dh']);
    };
    /**
     * Save the details for the fcm token for re-use at a later date.
     * @private
     * @param  {string} senderId The 'messagingSenderId' used for this project
     * @param  {ServiceWorkerRegistration} swRegistration The service worker
     * used to subscribe the user for web push
     * @param  {PushSubscription} subscription The push subscription passed to
     * FCM for the current token.
     * @param  {string} fcmToken The FCM token currently used on this
     * device.
     * @param  {string} fcmPushSet The FCM push tied to the fcm token.
     * @return {Promise<void>}
     */
    TokenManager.prototype.saveTokenDetails_ = function (senderId, swRegistration, subscription, fcmToken, fcmPushSet) {
        var details = {
            swScope: swRegistration.scope,
            endpoint: subscription.endpoint,
            auth: Object(_helpers_array_buffer_to_base64__WEBPACK_IMPORTED_MODULE_2__["default"])(subscription['getKey']('auth')),
            p256dh: Object(_helpers_array_buffer_to_base64__WEBPACK_IMPORTED_MODULE_2__["default"])(subscription['getKey']('p256dh')),
            fcmToken: fcmToken,
            fcmPushSet: fcmPushSet,
            fcmSenderId: senderId
        };
        return this.openDatabase_().then(function (db) {
            return new Promise(function (resolve, reject) {
                var transaction = db.transaction([FCM_TOKEN_OBJ_STORE], 'readwrite');
                var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);
                var request = objectStore.put(details);
                request.onerror = function (event) {
                    reject(event.target.error);
                };
                request.onsuccess = function (event) {
                    resolve();
                };
            });
        });
    };
    /**
     * Returns the saved FCM Token if one is available and still valid,
     * otherwise `null` is returned.
     * @param {string} senderId This should be the sender ID associated with the
     * FCM Token being retrieved.
     * @param {ServiceWorkerRegistration} swRegistration Registration to be used
     * to subscribe the user to push.
     * @return {Promise<string> | Promise} Returns the saved FCM Token if
     * avilable and valid.
     * @export
     */
    TokenManager.prototype.getSavedToken = function (senderId, swRegistration) {
        var _this = this;
        if (!(swRegistration instanceof ServiceWorkerRegistration)) {
            return Promise.reject(this.errorFactory_.create(_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.SW_REGISTRATION_EXPECTED));
        }
        if (typeof senderId !== 'string' || senderId.length === 0) {
            return Promise.reject(this.errorFactory_.create(_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.BAD_SENDER_ID));
        }
        return this.getAllTokenDetailsForSenderId_(senderId)
            .then(function (allTokenDetails) {
            if (allTokenDetails.length === 0) {
                return;
            }
            var index = allTokenDetails.findIndex(function (tokenDetails) {
                return (swRegistration.scope === tokenDetails['swScope'] &&
                    senderId === tokenDetails['fcmSenderId']);
            });
            if (index === -1) {
                return;
            }
            return allTokenDetails[index];
        })
            .then(function (tokenDetails) {
            if (!tokenDetails) {
                return;
            }
            return swRegistration.pushManager
                .getSubscription()
                .catch(function (err) {
                throw _this.errorFactory_.create(_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.GET_SUBSCRIPTION_FAILED);
            })
                .then(function (subscription) {
                if (subscription &&
                    _this.isSameSubscription_(subscription, tokenDetails)) {
                    return tokenDetails['fcmToken'];
                }
            });
        });
    };
    /**
     * Creates a new FCM token.
     */
    TokenManager.prototype.createToken = function (senderId, swRegistration) {
        var _this = this;
        if (typeof senderId !== 'string' || senderId.length === 0) {
            return Promise.reject(this.errorFactory_.create(_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.BAD_SENDER_ID));
        }
        if (!(swRegistration instanceof ServiceWorkerRegistration)) {
            return Promise.reject(this.errorFactory_.create(_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.SW_REGISTRATION_EXPECTED));
        }
        // Check for existing subscription first
        var subscription;
        var fcmTokenDetails;
        return swRegistration.pushManager
            .getSubscription()
            .then(function (subscription) {
            if (subscription) {
                return subscription;
            }
            return swRegistration.pushManager.subscribe(_fcm_details__WEBPACK_IMPORTED_MODULE_3__["default"].SUBSCRIPTION_OPTIONS);
        })
            .then(function (sub) {
            subscription = sub;
            return _this.subscribeToFCM(senderId, subscription);
        })
            .then(function (tokenDetails) {
            fcmTokenDetails = tokenDetails;
            return _this.saveTokenDetails_(senderId, swRegistration, subscription, fcmTokenDetails['token'], fcmTokenDetails['pushSet']);
        })
            .then(function () { return fcmTokenDetails['token']; });
    };
    /**
     * This method deletes details of the current FCM token.
     * It's returning a promise in case we need to move to an async
     * method for deleting at a later date.
     * @param {string} token Token to be deleted
     * @return {Promise<Object>} Resolves once the FCM token details have been
     * deleted and returns the deleted details.
     */
    TokenManager.prototype.deleteToken = function (token) {
        var _this = this;
        if (typeof token !== 'string' || token.length === 0) {
            return Promise.reject(this.errorFactory_.create(_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.INVALID_DELETE_TOKEN));
        }
        return this.getTokenDetailsFromToken(token).then(function (details) {
            if (!details) {
                throw _this.errorFactory_.create(_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.DELETE_TOKEN_NOT_FOUND);
            }
            return _this.openDatabase_().then(function (db) {
                return new Promise(function (resolve, reject) {
                    var transaction = db.transaction([FCM_TOKEN_OBJ_STORE], 'readwrite');
                    var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);
                    var request = objectStore.delete(details['swScope']);
                    request.onerror = function (event) {
                        reject(event.target.error);
                    };
                    request.onsuccess = function (event) {
                        if (event.target.result === 0) {
                            reject(_this.errorFactory_.create(_errors__WEBPACK_IMPORTED_MODULE_1__["default"].codes.FAILED_TO_DELETE_TOKEN));
                            return;
                        }
                        resolve(details);
                    };
                });
            });
        });
    };
    return TokenManager;
}());
/* harmony default export */ __webpack_exports__["default"] = (TokenManager);



/***/ }),

/***/ "./node_modules/@firebase/messaging/dist/esm/src/models/worker-page-message.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@firebase/messaging/dist/esm/src/models/worker-page-message.js ***!
  \*************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// These fields are strings to prevent closure from thinking goog.getMsg
// should be used to initialise the values
var PARAMS = {
    TYPE_OF_MSG: 'firebase-messaging-msg-type',
    DATA: 'firebase-messaging-msg-data'
};
// This value isn't using the TYPE_OF_MSG short hand as closure
// expects the variable to be defined via goog.getMsg
var msgType = {
    PUSH_MSG_RECEIVED: 'push-msg-received',
    NOTIFICATION_CLICKED: 'notification-clicked'
};
var createNewMsg = function (msgType, msgData) {
    var message = (_a = {},
        _a[PARAMS.TYPE_OF_MSG] = msgType,
        _a[PARAMS.DATA] = msgData,
        _a);
    return message;
    var _a;
};
/* harmony default export */ __webpack_exports__["default"] = ({
    PARAMS: PARAMS,
    TYPES_OF_MSG: msgType,
    createNewMsg: createNewMsg
});



/***/ }),

/***/ "./node_modules/@firebase/polyfill/dist/esm/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@firebase/polyfill/dist/esm/index.js ***!
  \***********************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _src_polyfills_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/polyfills/promise */ "./node_modules/@firebase/polyfill/dist/esm/src/polyfills/promise.js");
/* harmony import */ var _src_polyfills_promise__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_src_polyfills_promise__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _src_shims_find__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/shims/find */ "./node_modules/@firebase/polyfill/dist/esm/src/shims/find.js");
/* harmony import */ var _src_shims_find__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_src_shims_find__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _src_shims_findIndex__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/shims/findIndex */ "./node_modules/@firebase/polyfill/dist/esm/src/shims/findIndex.js");
/* harmony import */ var _src_shims_findIndex__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_src_shims_findIndex__WEBPACK_IMPORTED_MODULE_2__);
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */






/***/ }),

/***/ "./node_modules/@firebase/polyfill/dist/esm/src/polyfills/promise.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@firebase/polyfill/dist/esm/src/polyfills/promise.js ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var __global = (function () {
    if (typeof global !== 'undefined') {
        return global;
    }
    if (typeof window !== 'undefined') {
        return window;
    }
    if (typeof self !== 'undefined') {
        return self;
    }
    throw new Error('unable to locate global object');
})();
// Polyfill Promise
if (typeof Promise === 'undefined') {
    // HACK: TS throws an error if I attempt to use 'dot-notation'
    __global['Promise'] = Promise = __webpack_require__(/*! promise-polyfill */ "./node_modules/promise-polyfill/promise.js");
}


/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/@firebase/polyfill/dist/esm/src/shims/find.js":
/*!********************************************************************!*\
  !*** ./node_modules/@firebase/polyfill/dist/esm/src/shims/find.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * This is the Array.prototype.find polyfill from MDN
 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find
 * https://tc39.github.io/ecma262/#sec-array.prototype.find
 */
if (!Array.prototype.find) {
    Object.defineProperty(Array.prototype, 'find', {
        value: function (predicate) {
            // 1. Let O be ? ToObject(this value).
            if (this == null) {
                throw new TypeError('"this" is null or not defined');
            }
            var o = Object(this);
            // 2. Let len be ? ToLength(? Get(O, "length")).
            var len = o.length >>> 0;
            // 3. If IsCallable(predicate) is false, throw a TypeError exception.
            if (typeof predicate !== 'function') {
                throw new TypeError('predicate must be a function');
            }
            // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.
            var thisArg = arguments[1];
            // 5. Let k be 0.
            var k = 0;
            // 6. Repeat, while k < len
            while (k < len) {
                // a. Let Pk be ! ToString(k).
                // b. Let kValue be ? Get(O, Pk).
                // c. Let testResult be ToBoolean(? Call(predicate, T,  kValue, k, O )).
                // d. If testResult is true, return kValue.
                var kValue = o[k];
                if (predicate.call(thisArg, kValue, k, o)) {
                    return kValue;
                }
                // e. Increase k by 1.
                k++;
            }
            // 7. Return undefined.
            return undefined;
        }
    });
}



/***/ }),

/***/ "./node_modules/@firebase/polyfill/dist/esm/src/shims/findIndex.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@firebase/polyfill/dist/esm/src/shims/findIndex.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * This is the Array.prototype.findIndex polyfill from MDN
 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex
 * https://tc39.github.io/ecma262/#sec-array.prototype.findIndex
 */
if (!Array.prototype.findIndex) {
    Object.defineProperty(Array.prototype, 'findIndex', {
        value: function (predicate) {
            // 1. Let O be ? ToObject(this value).
            if (this == null) {
                throw new TypeError('"this" is null or not defined');
            }
            var o = Object(this);
            // 2. Let len be ? ToLength(? Get(O, "length")).
            var len = o.length >>> 0;
            // 3. If IsCallable(predicate) is false, throw a TypeError exception.
            if (typeof predicate !== 'function') {
                throw new TypeError('predicate must be a function');
            }
            // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.
            var thisArg = arguments[1];
            // 5. Let k be 0.
            var k = 0;
            // 6. Repeat, while k < len
            while (k < len) {
                // a. Let Pk be ! ToString(k).
                // b. Let kValue be ? Get(O, Pk).
                // c. Let testResult be ToBoolean(? Call(predicate, T,  kValue, k, O )).
                // d. If testResult is true, return k.
                var kValue = o[k];
                if (predicate.call(thisArg, kValue, k, o)) {
                    return k;
                }
                // e. Increase k by 1.
                k++;
            }
            // 7. Return -1.
            return -1;
        }
    });
}



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/index.js ***!
  \**********************************************************/
/*! exports provided: registerStorage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "registerStorage", function() { return registerStorage; });
/* harmony import */ var _firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/app */ "./node_modules/@firebase/app/dist/esm/index.js");
/* harmony import */ var _src_implementation_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/implementation/string */ "./node_modules/@firebase/storage/dist/esm/src/implementation/string.js");
/* harmony import */ var _src_implementation_taskenums__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/implementation/taskenums */ "./node_modules/@firebase/storage/dist/esm/src/implementation/taskenums.js");
/* harmony import */ var _src_implementation_xhriopool__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/implementation/xhriopool */ "./node_modules/@firebase/storage/dist/esm/src/implementation/xhriopool.js");
/* harmony import */ var _src_reference__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./src/reference */ "./node_modules/@firebase/storage/dist/esm/src/reference.js");
/* harmony import */ var _src_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./src/service */ "./node_modules/@firebase/storage/dist/esm/src/service.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */







/**
 * Type constant for Firebase Storage.
 */
var STORAGE_TYPE = 'storage';
function factory(app, unused, opt_url) {
    return new _src_service__WEBPACK_IMPORTED_MODULE_5__["Service"](app, new _src_implementation_xhriopool__WEBPACK_IMPORTED_MODULE_3__["XhrIoPool"](), opt_url);
}
function registerStorage(instance) {
    var namespaceExports = {
        // no-inline
        TaskState: _src_implementation_taskenums__WEBPACK_IMPORTED_MODULE_2__["TaskState"],
        TaskEvent: _src_implementation_taskenums__WEBPACK_IMPORTED_MODULE_2__["TaskEvent"],
        StringFormat: _src_implementation_string__WEBPACK_IMPORTED_MODULE_1__["StringFormat"],
        Storage: _src_service__WEBPACK_IMPORTED_MODULE_5__["Service"],
        Reference: _src_reference__WEBPACK_IMPORTED_MODULE_4__["Reference"]
    };
    instance.INTERNAL.registerService(STORAGE_TYPE, factory, namespaceExports, undefined, 
    // Allow multiple storage instances per app.
    true);
}
registerStorage(_firebase_app__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/args.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/args.js ***!
  \****************************************************************************/
/*! exports provided: validate, ArgSpec, and_, stringSpec, uploadDataSpec, metadataSpec, nonNegativeNumberSpec, looseObjectSpec, nullFunctionSpec */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "validate", function() { return validate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ArgSpec", function() { return ArgSpec; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "and_", function() { return and_; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stringSpec", function() { return stringSpec; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "uploadDataSpec", function() { return uploadDataSpec; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "metadataSpec", function() { return metadataSpec; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nonNegativeNumberSpec", function() { return nonNegativeNumberSpec; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "looseObjectSpec", function() { return looseObjectSpec; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nullFunctionSpec", function() { return nullFunctionSpec; });
/* harmony import */ var _error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./error */ "./node_modules/@firebase/storage/dist/esm/src/implementation/error.js");
/* harmony import */ var _metadata__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./metadata */ "./node_modules/@firebase/storage/dist/esm/src/implementation/metadata.js");
/* harmony import */ var _type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./type */ "./node_modules/@firebase/storage/dist/esm/src/implementation/type.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */



/**
 * @param name Name of the function.
 * @param specs Argument specs.
 * @param passed The actual arguments passed to the function.
 * @throws {fbs.Error} If the arguments are invalid.
 */
function validate(name, specs, passed) {
    var minArgs = specs.length;
    var maxArgs = specs.length;
    for (var i = 0; i < specs.length; i++) {
        if (specs[i].optional) {
            minArgs = i;
            break;
        }
    }
    var validLength = minArgs <= passed.length && passed.length <= maxArgs;
    if (!validLength) {
        throw _error__WEBPACK_IMPORTED_MODULE_0__["invalidArgumentCount"](minArgs, maxArgs, name, passed.length);
    }
    for (var i = 0; i < passed.length; i++) {
        try {
            specs[i].validator(passed[i]);
        }
        catch (e) {
            if (e instanceof Error) {
                throw _error__WEBPACK_IMPORTED_MODULE_0__["invalidArgument"](i, name, e.message);
            }
            else {
                throw _error__WEBPACK_IMPORTED_MODULE_0__["invalidArgument"](i, name, e);
            }
        }
    }
}
/**
 * @struct
 */
var ArgSpec = /** @class */ (function () {
    function ArgSpec(validator, opt_optional) {
        var self = this;
        this.validator = function (p) {
            if (self.optional && !_type__WEBPACK_IMPORTED_MODULE_2__["isJustDef"](p)) {
                return;
            }
            validator(p);
        };
        this.optional = !!opt_optional;
    }
    return ArgSpec;
}());

function and_(v1, v2) {
    return function (p) {
        v1(p);
        v2(p);
    };
}
function stringSpec(opt_validator, opt_optional) {
    function stringValidator(p) {
        if (!_type__WEBPACK_IMPORTED_MODULE_2__["isString"](p)) {
            throw 'Expected string.';
        }
    }
    var validator;
    if (opt_validator) {
        validator = and_(stringValidator, opt_validator);
    }
    else {
        validator = stringValidator;
    }
    return new ArgSpec(validator, opt_optional);
}
function uploadDataSpec() {
    function validator(p) {
        var valid = p instanceof Uint8Array ||
            p instanceof ArrayBuffer ||
            (_type__WEBPACK_IMPORTED_MODULE_2__["isNativeBlobDefined"]() && p instanceof Blob);
        if (!valid) {
            throw 'Expected Blob or File.';
        }
    }
    return new ArgSpec(validator);
}
function metadataSpec(opt_optional) {
    return new ArgSpec(_metadata__WEBPACK_IMPORTED_MODULE_1__["metadataValidator"], opt_optional);
}
function nonNegativeNumberSpec() {
    function validator(p) {
        var valid = _type__WEBPACK_IMPORTED_MODULE_2__["isNumber"](p) && p >= 0;
        if (!valid) {
            throw 'Expected a number 0 or greater.';
        }
    }
    return new ArgSpec(validator);
}
function looseObjectSpec(opt_validator, opt_optional) {
    function validator(p) {
        var isLooseObject = p === null || (_type__WEBPACK_IMPORTED_MODULE_2__["isDef"](p) && p instanceof Object);
        if (!isLooseObject) {
            throw 'Expected an Object.';
        }
        if (opt_validator !== undefined && opt_validator !== null) {
            opt_validator(p);
        }
    }
    return new ArgSpec(validator, opt_optional);
}
function nullFunctionSpec(opt_optional) {
    function validator(p) {
        var valid = p === null || _type__WEBPACK_IMPORTED_MODULE_2__["isFunction"](p);
        if (!valid) {
            throw 'Expected a Function.';
        }
    }
    return new ArgSpec(validator, opt_optional);
}



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/array.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/array.js ***!
  \*****************************************************************************/
/*! exports provided: contains, clone, remove */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "contains", function() { return contains; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "remove", function() { return remove; });
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * Returns true if the object is contained in the array (compared with ===).
 * @template T
 */
function contains(array, elem) {
    return array.indexOf(elem) !== -1;
}
/**
 * Returns a shallow copy of the array or array-like object (e.g. arguments).
 * @template T
 */
function clone(arraylike) {
    return Array.prototype.slice.call(arraylike);
}
/**
 * Removes the given element from the given array, if it is contained.
 * Directly modifies the passed-in array.
 * @template T
 */
function remove(array, elem) {
    var i = array.indexOf(elem);
    if (i !== -1) {
        array.splice(i, 1);
    }
}



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/async.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/async.js ***!
  \*****************************************************************************/
/*! exports provided: async */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "async", function() { return async; });
/* harmony import */ var _promise_external__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./promise_external */ "./node_modules/@firebase/storage/dist/esm/src/implementation/promise_external.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @fileoverview Method for invoking a callback asynchronously.
 */

/**
 * Returns a function that invokes f with its arguments asynchronously as a
 * microtask, i.e. as soon as possible after the current script returns back
 * into browser code.
 */
function async(f) {
    return function () {
        var argsToForward = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            argsToForward[_i] = arguments[_i];
        }
        _promise_external__WEBPACK_IMPORTED_MODULE_0__["resolve"](true).then(function () {
            f.apply(null, argsToForward);
        });
    };
}



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/authwrapper.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/authwrapper.js ***!
  \***********************************************************************************/
/*! exports provided: AuthWrapper */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthWrapper", function() { return AuthWrapper; });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "./node_modules/@firebase/storage/dist/esm/src/implementation/constants.js");
/* harmony import */ var _error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./error */ "./node_modules/@firebase/storage/dist/esm/src/implementation/error.js");
/* harmony import */ var _failrequest__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./failrequest */ "./node_modules/@firebase/storage/dist/esm/src/implementation/failrequest.js");
/* harmony import */ var _location__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./location */ "./node_modules/@firebase/storage/dist/esm/src/implementation/location.js");
/* harmony import */ var _promise_external__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./promise_external */ "./node_modules/@firebase/storage/dist/esm/src/implementation/promise_external.js");
/* harmony import */ var _requestmap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./requestmap */ "./node_modules/@firebase/storage/dist/esm/src/implementation/requestmap.js");
/* harmony import */ var _type__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./type */ "./node_modules/@firebase/storage/dist/esm/src/implementation/type.js");







/**
 * @param app If null, getAuthToken always resolves with null.
 * @param service The storage service associated with this auth wrapper.
 *     Untyped to avoid circular type dependencies.
 * @struct
 */
var AuthWrapper = /** @class */ (function () {
    function AuthWrapper(app, maker, requestMaker, service, pool) {
        this.bucket_ = null;
        this.deleted_ = false;
        this.app_ = app;
        if (this.app_ !== null) {
            var options = this.app_.options;
            if (_type__WEBPACK_IMPORTED_MODULE_6__["isDef"](options)) {
                this.bucket_ = AuthWrapper.extractBucket_(options);
            }
        }
        this.storageRefMaker_ = maker;
        this.requestMaker_ = requestMaker;
        this.pool_ = pool;
        this.service_ = service;
        this.maxOperationRetryTime_ = _constants__WEBPACK_IMPORTED_MODULE_0__["defaultMaxOperationRetryTime"];
        this.maxUploadRetryTime_ = _constants__WEBPACK_IMPORTED_MODULE_0__["defaultMaxUploadRetryTime"];
        this.requestMap_ = new _requestmap__WEBPACK_IMPORTED_MODULE_5__["RequestMap"]();
    }
    AuthWrapper.extractBucket_ = function (config) {
        var bucketString = config[_constants__WEBPACK_IMPORTED_MODULE_0__["configOption"]] || null;
        if (bucketString == null) {
            return null;
        }
        var loc = _location__WEBPACK_IMPORTED_MODULE_3__["Location"].makeFromBucketSpec(bucketString);
        return loc.bucket;
    };
    AuthWrapper.prototype.getAuthToken = function () {
        // TODO(andysoto): remove ifDef checks after firebase-app implements stubs
        // (b/28673818).
        if (this.app_ !== null &&
            _type__WEBPACK_IMPORTED_MODULE_6__["isDef"](this.app_.INTERNAL) &&
            _type__WEBPACK_IMPORTED_MODULE_6__["isDef"](this.app_.INTERNAL.getToken)) {
            return this.app_.INTERNAL.getToken().then(function (response) {
                if (response !== null) {
                    return response.accessToken;
                }
                else {
                    return null;
                }
            }, function (_error) {
                return null;
            });
        }
        else {
            return _promise_external__WEBPACK_IMPORTED_MODULE_4__["resolve"](null);
        }
    };
    AuthWrapper.prototype.bucket = function () {
        if (this.deleted_) {
            throw _error__WEBPACK_IMPORTED_MODULE_1__["appDeleted"]();
        }
        else {
            return this.bucket_;
        }
    };
    /**
     * The service associated with this auth wrapper. Untyped to avoid circular
     * type dependencies.
     */
    AuthWrapper.prototype.service = function () {
        return this.service_;
    };
    /**
     * Returns a new firebaseStorage.Reference object referencing this AuthWrapper
     * at the given Location.
     * @param loc The Location.
     * @return Actually a firebaseStorage.Reference, typing not allowed
     *     because of circular dependency problems.
     */
    AuthWrapper.prototype.makeStorageReference = function (loc) {
        return this.storageRefMaker_(this, loc);
    };
    AuthWrapper.prototype.makeRequest = function (requestInfo, authToken) {
        if (!this.deleted_) {
            var request = this.requestMaker_(requestInfo, authToken, this.pool_);
            this.requestMap_.addRequest(request);
            return request;
        }
        else {
            return new _failrequest__WEBPACK_IMPORTED_MODULE_2__["FailRequest"](_error__WEBPACK_IMPORTED_MODULE_1__["appDeleted"]());
        }
    };
    /**
     * Stop running requests and prevent more from being created.
     */
    AuthWrapper.prototype.deleteApp = function () {
        this.deleted_ = true;
        this.app_ = null;
        this.requestMap_.clear();
    };
    AuthWrapper.prototype.maxUploadRetryTime = function () {
        return this.maxUploadRetryTime_;
    };
    AuthWrapper.prototype.setMaxUploadRetryTime = function (time) {
        this.maxUploadRetryTime_ = time;
    };
    AuthWrapper.prototype.maxOperationRetryTime = function () {
        return this.maxOperationRetryTime_;
    };
    AuthWrapper.prototype.setMaxOperationRetryTime = function (time) {
        this.maxOperationRetryTime_ = time;
    };
    return AuthWrapper;
}());




/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/backoff.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/backoff.js ***!
  \*******************************************************************************/
/*! exports provided: start, stop */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "start", function() { return start; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stop", function() { return stop; });
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @param f May be invoked
 *     before the function returns.
 * @param callback Get all the arguments passed to the function
 *     passed to f, including the initial boolean.
 */
function start(f, callback, timeout) {
    // TODO(andysoto): make this code cleaner (probably refactor into an actual
    // type instead of a bunch of functions with state shared in the closure)
    var waitSeconds = 1;
    // Would type this as "number" but that doesn't work for Node so \_()_/
    var timeoutId = null;
    var hitTimeout = false;
    var cancelState = 0;
    function canceled() {
        return cancelState === 2;
    }
    var triggeredCallback = false;
    function triggerCallback() {
        if (!triggeredCallback) {
            triggeredCallback = true;
            callback.apply(null, arguments);
        }
    }
    function callWithDelay(millis) {
        timeoutId = setTimeout(function () {
            timeoutId = null;
            f(handler, canceled());
        }, millis);
    }
    function handler(success) {
        var var_args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            var_args[_i - 1] = arguments[_i];
        }
        if (triggeredCallback) {
            return;
        }
        if (success) {
            triggerCallback.apply(null, arguments);
            return;
        }
        var mustStop = canceled() || hitTimeout;
        if (mustStop) {
            triggerCallback.apply(null, arguments);
            return;
        }
        if (waitSeconds < 64) {
            /* TODO(andysoto): don't back off so quickly if we know we're offline. */
            waitSeconds *= 2;
        }
        var waitMillis;
        if (cancelState === 1) {
            cancelState = 2;
            waitMillis = 0;
        }
        else {
            waitMillis = (waitSeconds + Math.random()) * 1000;
        }
        callWithDelay(waitMillis);
    }
    var stopped = false;
    function stop(wasTimeout) {
        if (stopped) {
            return;
        }
        stopped = true;
        if (triggeredCallback) {
            return;
        }
        if (timeoutId !== null) {
            if (!wasTimeout) {
                cancelState = 2;
            }
            clearTimeout(timeoutId);
            callWithDelay(0);
        }
        else {
            if (!wasTimeout) {
                cancelState = 1;
            }
        }
    }
    callWithDelay(0);
    setTimeout(function () {
        hitTimeout = true;
        stop(true);
    }, timeout);
    return stop;
}
/**
 * Stops the retry loop from repeating.
 * If the function is currently "in between" retries, it is invoked immediately
 * with the second parameter as "true". Otherwise, it will be invoked once more
 * after the current invocation finishes iff the current invocation would have
 * triggered another retry.
 */
function stop(id) {
    id(false);
}



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/blob.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/blob.js ***!
  \****************************************************************************/
/*! exports provided: FbsBlob */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FbsBlob", function() { return FbsBlob; });
/* harmony import */ var _fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fs */ "./node_modules/@firebase/storage/dist/esm/src/implementation/fs.js");
/* harmony import */ var _string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./string */ "./node_modules/@firebase/storage/dist/esm/src/implementation/string.js");
/* harmony import */ var _type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./type */ "./node_modules/@firebase/storage/dist/esm/src/implementation/type.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @file Provides a Blob-like wrapper for various binary types (including the
 * native Blob type). This makes it possible to upload types like ArrayBuffers,
 * making uploads possible in environments without the native Blob type.
 */




/**
 * @param opt_elideCopy If true, doesn't copy mutable input data
 *     (e.g. Uint8Arrays). Pass true only if you know the objects will not be
 *     modified after this blob's construction.
 */
var FbsBlob = /** @class */ (function () {
    function FbsBlob(data, opt_elideCopy) {
        var size = 0;
        var blobType = '';
        if (_type__WEBPACK_IMPORTED_MODULE_2__["isNativeBlob"](data)) {
            this.data_ = data;
            size = data.size;
            blobType = data.type;
        }
        else if (data instanceof ArrayBuffer) {
            if (opt_elideCopy) {
                this.data_ = new Uint8Array(data);
            }
            else {
                this.data_ = new Uint8Array(data.byteLength);
                this.data_.set(new Uint8Array(data));
            }
            size = this.data_.length;
        }
        else if (data instanceof Uint8Array) {
            if (opt_elideCopy) {
                this.data_ = data;
            }
            else {
                this.data_ = new Uint8Array(data.length);
                this.data_.set(data);
            }
            size = data.length;
        }
        this.size_ = size;
        this.type_ = blobType;
    }
    FbsBlob.prototype.size = function () {
        return this.size_;
    };
    FbsBlob.prototype.type = function () {
        return this.type_;
    };
    FbsBlob.prototype.slice = function (startByte, endByte) {
        if (_type__WEBPACK_IMPORTED_MODULE_2__["isNativeBlob"](this.data_)) {
            var realBlob = this.data_;
            var sliced = _fs__WEBPACK_IMPORTED_MODULE_0__["sliceBlob"](realBlob, startByte, endByte);
            if (sliced === null) {
                return null;
            }
            return new FbsBlob(sliced);
        }
        else {
            var slice = new Uint8Array(this.data_.buffer, startByte, endByte - startByte);
            return new FbsBlob(slice, true);
        }
    };
    FbsBlob.getBlob = function () {
        var var_args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            var_args[_i] = arguments[_i];
        }
        if (_type__WEBPACK_IMPORTED_MODULE_2__["isNativeBlobDefined"]()) {
            var blobby = var_args.map(function (val) {
                if (val instanceof FbsBlob) {
                    return val.data_;
                }
                else {
                    return val;
                }
            });
            return new FbsBlob(_fs__WEBPACK_IMPORTED_MODULE_0__["getBlob"].apply(null, blobby));
        }
        else {
            var uint8Arrays = var_args.map(function (val) {
                if (_type__WEBPACK_IMPORTED_MODULE_2__["isString"](val)) {
                    return _string__WEBPACK_IMPORTED_MODULE_1__["dataFromString"](_string__WEBPACK_IMPORTED_MODULE_1__["StringFormat"].RAW, val).data;
                }
                else {
                    // Blobs don't exist, so this has to be a Uint8Array.
                    return val.data_;
                }
            });
            var finalLength_1 = 0;
            uint8Arrays.forEach(function (array) {
                finalLength_1 += array.byteLength;
            });
            var merged_1 = new Uint8Array(finalLength_1);
            var index_1 = 0;
            uint8Arrays.forEach(function (array) {
                for (var i = 0; i < array.length; i++) {
                    merged_1[index_1++] = array[i];
                }
            });
            return new FbsBlob(merged_1, true);
        }
    };
    FbsBlob.prototype.uploadData = function () {
        return this.data_;
    };
    return FbsBlob;
}());




/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/constants.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/constants.js ***!
  \*********************************************************************************/
/*! exports provided: domainBase, downloadBase, apiBaseUrl, apiUploadBaseUrl, setDomainBase, configOption, shortMaxOperationRetryTime, defaultMaxOperationRetryTime, defaultMaxUploadRetryTime, minSafeInteger */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "domainBase", function() { return domainBase; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "downloadBase", function() { return downloadBase; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "apiBaseUrl", function() { return apiBaseUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "apiUploadBaseUrl", function() { return apiUploadBaseUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setDomainBase", function() { return setDomainBase; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "configOption", function() { return configOption; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shortMaxOperationRetryTime", function() { return shortMaxOperationRetryTime; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultMaxOperationRetryTime", function() { return defaultMaxOperationRetryTime; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultMaxUploadRetryTime", function() { return defaultMaxUploadRetryTime; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "minSafeInteger", function() { return minSafeInteger; });
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @fileoverview Constants used in the Firebase Storage library.
 */
/**
 * Domain and scheme for API calls.
 */
var domainBase = 'https://firebasestorage.googleapis.com';
/**
 * Domain and scheme for object downloads.
 */
var downloadBase = 'https://firebasestorage.googleapis.com';
/**
 * Base URL for non-upload calls to the API.
 */
var apiBaseUrl = '/v0';
/**
 * Base URL for upload calls to the API.
 */
var apiUploadBaseUrl = '/v0';
function setDomainBase(domainBase) {
    domainBase = domainBase;
}
var configOption = 'storageBucket';
/**
 * 1 minute
 */
var shortMaxOperationRetryTime = 1 * 60 * 1000;
/**
 * 2 minutes
 */
var defaultMaxOperationRetryTime = 2 * 60 * 1000;
/**
 * 10 minutes
 */
var defaultMaxUploadRetryTime = 10 * 60 * 100;
/**
 * This is the value of Number.MIN_SAFE_INTEGER, which is not well supported
 * enough for us to use it directly.
 */
var minSafeInteger = -9007199254740991;



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/error.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/error.js ***!
  \*****************************************************************************/
/*! exports provided: FirebaseStorageError, errors, Code, prependCode, unknown, objectNotFound, bucketNotFound, projectNotFound, quotaExceeded, unauthenticated, unauthorized, retryLimitExceeded, invalidChecksum, canceled, invalidEventName, invalidUrl, invalidDefaultBucket, noDefaultBucket, cannotSliceBlob, serverFileWrongSize, noDownloadURL, invalidArgument, invalidArgumentCount, appDeleted, invalidRootOperation, invalidFormat, internalError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FirebaseStorageError", function() { return FirebaseStorageError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "errors", function() { return errors; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Code", function() { return Code; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prependCode", function() { return prependCode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unknown", function() { return unknown; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "objectNotFound", function() { return objectNotFound; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bucketNotFound", function() { return bucketNotFound; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "projectNotFound", function() { return projectNotFound; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "quotaExceeded", function() { return quotaExceeded; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unauthenticated", function() { return unauthenticated; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unauthorized", function() { return unauthorized; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "retryLimitExceeded", function() { return retryLimitExceeded; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "invalidChecksum", function() { return invalidChecksum; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "canceled", function() { return canceled; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "invalidEventName", function() { return invalidEventName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "invalidUrl", function() { return invalidUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "invalidDefaultBucket", function() { return invalidDefaultBucket; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "noDefaultBucket", function() { return noDefaultBucket; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cannotSliceBlob", function() { return cannotSliceBlob; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "serverFileWrongSize", function() { return serverFileWrongSize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "noDownloadURL", function() { return noDownloadURL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "invalidArgument", function() { return invalidArgument; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "invalidArgumentCount", function() { return invalidArgumentCount; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "appDeleted", function() { return appDeleted; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "invalidRootOperation", function() { return invalidRootOperation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "invalidFormat", function() { return invalidFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "internalError", function() { return internalError; });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "./node_modules/@firebase/storage/dist/esm/src/implementation/constants.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var FirebaseStorageError = /** @class */ (function () {
    function FirebaseStorageError(code, message) {
        this.code_ = prependCode(code);
        this.message_ = 'Firebase Storage: ' + message;
        this.serverResponse_ = null;
        this.name_ = 'FirebaseError';
    }
    FirebaseStorageError.prototype.codeProp = function () {
        return this.code;
    };
    FirebaseStorageError.prototype.codeEquals = function (code) {
        return prependCode(code) === this.codeProp();
    };
    FirebaseStorageError.prototype.serverResponseProp = function () {
        return this.serverResponse_;
    };
    FirebaseStorageError.prototype.setServerResponseProp = function (serverResponse) {
        this.serverResponse_ = serverResponse;
    };
    Object.defineProperty(FirebaseStorageError.prototype, "name", {
        get: function () {
            return this.name_;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FirebaseStorageError.prototype, "code", {
        get: function () {
            return this.code_;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FirebaseStorageError.prototype, "message", {
        get: function () {
            return this.message_;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FirebaseStorageError.prototype, "serverResponse", {
        get: function () {
            return this.serverResponse_;
        },
        enumerable: true,
        configurable: true
    });
    return FirebaseStorageError;
}());

var errors = {};
var Code = {
    // Shared between all platforms
    UNKNOWN: 'unknown',
    OBJECT_NOT_FOUND: 'object-not-found',
    BUCKET_NOT_FOUND: 'bucket-not-found',
    PROJECT_NOT_FOUND: 'project-not-found',
    QUOTA_EXCEEDED: 'quota-exceeded',
    UNAUTHENTICATED: 'unauthenticated',
    UNAUTHORIZED: 'unauthorized',
    RETRY_LIMIT_EXCEEDED: 'retry-limit-exceeded',
    INVALID_CHECKSUM: 'invalid-checksum',
    CANCELED: 'canceled',
    // JS specific
    INVALID_EVENT_NAME: 'invalid-event-name',
    INVALID_URL: 'invalid-url',
    INVALID_DEFAULT_BUCKET: 'invalid-default-bucket',
    NO_DEFAULT_BUCKET: 'no-default-bucket',
    CANNOT_SLICE_BLOB: 'cannot-slice-blob',
    SERVER_FILE_WRONG_SIZE: 'server-file-wrong-size',
    NO_DOWNLOAD_URL: 'no-download-url',
    INVALID_ARGUMENT: 'invalid-argument',
    INVALID_ARGUMENT_COUNT: 'invalid-argument-count',
    APP_DELETED: 'app-deleted',
    INVALID_ROOT_OPERATION: 'invalid-root-operation',
    INVALID_FORMAT: 'invalid-format',
    INTERNAL_ERROR: 'internal-error'
};
function prependCode(code) {
    return 'storage/' + code;
}
function unknown() {
    var message = 'An unknown error occurred, please check the error payload for ' +
        'server response.';
    return new FirebaseStorageError(Code.UNKNOWN, message);
}
function objectNotFound(path) {
    return new FirebaseStorageError(Code.OBJECT_NOT_FOUND, "Object '" + path + "' does not exist.");
}
function bucketNotFound(bucket) {
    return new FirebaseStorageError(Code.BUCKET_NOT_FOUND, "Bucket '" + bucket + "' does not exist.");
}
function projectNotFound(project) {
    return new FirebaseStorageError(Code.PROJECT_NOT_FOUND, "Project '" + project + "' does not exist.");
}
function quotaExceeded(bucket) {
    return new FirebaseStorageError(Code.QUOTA_EXCEEDED, "Quota for bucket '" +
        bucket +
        "' exceeded, please view quota on " +
        'https://firebase.google.com/pricing/.');
}
function unauthenticated() {
    var message = 'User is not authenticated, please authenticate using Firebase ' +
        'Authentication and try again.';
    return new FirebaseStorageError(Code.UNAUTHENTICATED, message);
}
function unauthorized(path) {
    return new FirebaseStorageError(Code.UNAUTHORIZED, "User does not have permission to access '" + path + "'.");
}
function retryLimitExceeded() {
    return new FirebaseStorageError(Code.RETRY_LIMIT_EXCEEDED, 'Max retry time for operation exceeded, please try again.');
}
function invalidChecksum(path, checksum, calculated) {
    return new FirebaseStorageError(Code.INVALID_CHECKSUM, "Uploaded/downloaded object '" +
        path +
        "' has checksum '" +
        checksum +
        "' which does not match '" +
        calculated +
        "'. Please retry the upload/download.");
}
function canceled() {
    return new FirebaseStorageError(Code.CANCELED, 'User canceled the upload/download.');
}
function invalidEventName(name) {
    return new FirebaseStorageError(Code.INVALID_EVENT_NAME, "Invalid event name '" + name + "'.");
}
function invalidUrl(url) {
    return new FirebaseStorageError(Code.INVALID_URL, "Invalid URL '" + url + "'.");
}
function invalidDefaultBucket(bucket) {
    return new FirebaseStorageError(Code.INVALID_DEFAULT_BUCKET, "Invalid default bucket '" + bucket + "'.");
}
function noDefaultBucket() {
    return new FirebaseStorageError(Code.NO_DEFAULT_BUCKET, 'No default bucket ' +
        "found. Did you set the '" +
        _constants__WEBPACK_IMPORTED_MODULE_0__["configOption"] +
        "' property when initializing the app?");
}
function cannotSliceBlob() {
    return new FirebaseStorageError(Code.CANNOT_SLICE_BLOB, 'Cannot slice blob for upload. Please retry the upload.');
}
function serverFileWrongSize() {
    return new FirebaseStorageError(Code.SERVER_FILE_WRONG_SIZE, 'Server recorded incorrect upload file size, please retry the upload.');
}
function noDownloadURL() {
    return new FirebaseStorageError(Code.NO_DOWNLOAD_URL, 'The given file does not have any download URLs.');
}
function invalidArgument(index, fnName, message) {
    return new FirebaseStorageError(Code.INVALID_ARGUMENT, 'Invalid argument in `' + fnName + '` at index ' + index + ': ' + message);
}
function invalidArgumentCount(argMin, argMax, fnName, real) {
    var countPart;
    var plural;
    if (argMin === argMax) {
        countPart = argMin;
        plural = argMin === 1 ? 'argument' : 'arguments';
    }
    else {
        countPart = 'between ' + argMin + ' and ' + argMax;
        plural = 'arguments';
    }
    return new FirebaseStorageError(Code.INVALID_ARGUMENT_COUNT, 'Invalid argument count in `' +
        fnName +
        '`: Expected ' +
        countPart +
        ' ' +
        plural +
        ', received ' +
        real +
        '.');
}
function appDeleted() {
    return new FirebaseStorageError(Code.APP_DELETED, 'The Firebase app was deleted.');
}
/**
 * @param name The name of the operation that was invalid.
 */
function invalidRootOperation(name) {
    return new FirebaseStorageError(Code.INVALID_ROOT_OPERATION, "The operation '" +
        name +
        "' cannot be performed on a root reference, create a non-root " +
        "reference using child, such as .child('file.png').");
}
/**
 * @param format The format that was not valid.
 * @param message A message describing the format violation.
 */
function invalidFormat(format, message) {
    return new FirebaseStorageError(Code.INVALID_FORMAT, "String does not match format '" + format + "': " + message);
}
/**
 * @param message A message describing the internal error.
 */
function internalError(message) {
    throw new FirebaseStorageError(Code.INTERNAL_ERROR, 'Internal error: ' + message);
}



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/failrequest.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/failrequest.js ***!
  \***********************************************************************************/
/*! exports provided: FailRequest */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FailRequest", function() { return FailRequest; });
/* harmony import */ var _promise_external__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./promise_external */ "./node_modules/@firebase/storage/dist/esm/src/implementation/promise_external.js");

/**
 * A request whose promise always fails.
 * @struct
 * @template T
 */
var FailRequest = /** @class */ (function () {
    function FailRequest(error) {
        this.promise_ = _promise_external__WEBPACK_IMPORTED_MODULE_0__["reject"](error);
    }
    /** @inheritDoc */
    FailRequest.prototype.getPromise = function () {
        return this.promise_;
    };
    /** @inheritDoc */
    FailRequest.prototype.cancel = function (appDelete) {
        if (appDelete === void 0) { appDelete = false; }
    };
    return FailRequest;
}());




/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/fs.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/fs.js ***!
  \**************************************************************************/
/*! exports provided: getBlob, sliceBlob */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getBlob", function() { return getBlob; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sliceBlob", function() { return sliceBlob; });
/* harmony import */ var _type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./type */ "./node_modules/@firebase/storage/dist/esm/src/implementation/type.js");

function getBlobBuilder() {
    if (typeof BlobBuilder !== 'undefined') {
        return BlobBuilder;
    }
    else if (typeof WebKitBlobBuilder !== 'undefined') {
        return WebKitBlobBuilder;
    }
    else {
        return undefined;
    }
}
/**
 * Concatenates one or more values together and converts them to a Blob.
 *
 * @param var_args The values that will make up the resulting blob.
 * @return The blob.
 */
function getBlob() {
    var var_args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        var_args[_i] = arguments[_i];
    }
    var BlobBuilder = getBlobBuilder();
    if (BlobBuilder !== undefined) {
        var bb = new BlobBuilder();
        for (var i = 0; i < var_args.length; i++) {
            bb.append(var_args[i]);
        }
        return bb.getBlob();
    }
    else {
        if (_type__WEBPACK_IMPORTED_MODULE_0__["isNativeBlobDefined"]()) {
            return new Blob(var_args);
        }
        else {
            throw Error("This browser doesn't seem to support creating Blobs");
        }
    }
}
/**
 * Slices the blob. The returned blob contains data from the start byte
 * (inclusive) till the end byte (exclusive). Negative indices cannot be used.
 *
 * @param blob The blob to be sliced.
 * @param start Index of the starting byte.
 * @param end Index of the ending byte.
 * @return The blob slice or null if not supported.
 */
function sliceBlob(blob, start, end) {
    if (blob.webkitSlice) {
        return blob.webkitSlice(start, end);
    }
    else if (blob.mozSlice) {
        return blob.mozSlice(start, end);
    }
    else if (blob.slice) {
        return blob.slice(start, end);
    }
    return null;
}



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/json.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/json.js ***!
  \****************************************************************************/
/*! exports provided: jsonObjectOrNull */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "jsonObjectOrNull", function() { return jsonObjectOrNull; });
/* harmony import */ var _type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./type */ "./node_modules/@firebase/storage/dist/esm/src/implementation/type.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * Returns the Object resulting from parsing the given JSON, or null if the
 * given string does not represent a JSON object.
 */
function jsonObjectOrNull(s) {
    var obj;
    try {
        obj = JSON.parse(s);
    }
    catch (e) {
        return null;
    }
    if (_type__WEBPACK_IMPORTED_MODULE_0__["isNonArrayObject"](obj)) {
        return obj;
    }
    else {
        return null;
    }
}



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/location.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/location.js ***!
  \********************************************************************************/
/*! exports provided: Location */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Location", function() { return Location; });
/* harmony import */ var _error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./error */ "./node_modules/@firebase/storage/dist/esm/src/implementation/error.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @fileoverview Functionality related to the parsing/composition of bucket/
 * object location.
 */

/**
 * @struct
 */
var Location = /** @class */ (function () {
    function Location(bucket, path) {
        this.bucket = bucket;
        this.path_ = path;
    }
    Object.defineProperty(Location.prototype, "path", {
        get: function () {
            return this.path_;
        },
        enumerable: true,
        configurable: true
    });
    Location.prototype.fullServerUrl = function () {
        var encode = encodeURIComponent;
        return '/b/' + encode(this.bucket) + '/o/' + encode(this.path);
    };
    Location.prototype.bucketOnlyServerUrl = function () {
        var encode = encodeURIComponent;
        return '/b/' + encode(this.bucket) + '/o';
    };
    Location.makeFromBucketSpec = function (bucketString) {
        var bucketLocation;
        try {
            bucketLocation = Location.makeFromUrl(bucketString);
        }
        catch (e) {
            // Not valid URL, use as-is. This lets you put bare bucket names in
            // config.
            return new Location(bucketString, '');
        }
        if (bucketLocation.path === '') {
            return bucketLocation;
        }
        else {
            throw _error__WEBPACK_IMPORTED_MODULE_0__["invalidDefaultBucket"](bucketString);
        }
    };
    Location.makeFromUrl = function (url) {
        var location = null;
        var bucketDomain = '([A-Za-z0-9.\\-]+)';
        function gsModify(loc) {
            if (loc.path.charAt(loc.path.length - 1) === '/') {
                loc.path_ = loc.path_.slice(0, -1);
            }
        }
        var gsPath = '(/(.*))?$';
        var path = '(/([^?#]*).*)?$';
        var gsRegex = new RegExp('^gs://' + bucketDomain + gsPath, 'i');
        var gsIndices = { bucket: 1, path: 3 };
        function httpModify(loc) {
            loc.path_ = decodeURIComponent(loc.path);
        }
        var version = 'v[A-Za-z0-9_]+';
        var httpRegex = new RegExp('^https?://firebasestorage\\.googleapis\\.com/' +
            version +
            '/b/' +
            bucketDomain +
            '/o' +
            path, 'i');
        var httpIndices = { bucket: 1, path: 3 };
        var groups = [
            { regex: gsRegex, indices: gsIndices, postModify: gsModify },
            { regex: httpRegex, indices: httpIndices, postModify: httpModify }
        ];
        for (var i = 0; i < groups.length; i++) {
            var group = groups[i];
            var captures = group.regex.exec(url);
            if (captures) {
                var bucketValue = captures[group.indices.bucket];
                var pathValue = captures[group.indices.path];
                if (!pathValue) {
                    pathValue = '';
                }
                location = new Location(bucketValue, pathValue);
                group.postModify(location);
                break;
            }
        }
        if (location == null) {
            throw _error__WEBPACK_IMPORTED_MODULE_0__["invalidUrl"](url);
        }
        return location;
    };
    return Location;
}());




/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/metadata.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/metadata.js ***!
  \********************************************************************************/
/*! exports provided: noXform_, Mapping, xformPath, getMappings, addRef, fromResource, fromResourceString, toResourceString, metadataValidator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "noXform_", function() { return noXform_; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Mapping", function() { return Mapping; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "xformPath", function() { return xformPath; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMappings", function() { return getMappings; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addRef", function() { return addRef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromResource", function() { return fromResource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromResourceString", function() { return fromResourceString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toResourceString", function() { return toResourceString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "metadataValidator", function() { return metadataValidator; });
/* harmony import */ var _json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./json */ "./node_modules/@firebase/storage/dist/esm/src/implementation/json.js");
/* harmony import */ var _location__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./location */ "./node_modules/@firebase/storage/dist/esm/src/implementation/location.js");
/* harmony import */ var _path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./path */ "./node_modules/@firebase/storage/dist/esm/src/implementation/path.js");
/* harmony import */ var _type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./type */ "./node_modules/@firebase/storage/dist/esm/src/implementation/type.js");
/* harmony import */ var _url__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./url */ "./node_modules/@firebase/storage/dist/esm/src/implementation/url.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */





function noXform_(metadata, value) {
    return value;
}
/**
 * @struct
 */
var Mapping = /** @class */ (function () {
    function Mapping(server, opt_local, opt_writable, opt_xform) {
        this.server = server;
        this.local = opt_local || server;
        this.writable = !!opt_writable;
        this.xform = opt_xform || noXform_;
    }
    return Mapping;
}());

var mappings_ = null;
function xformPath(fullPath) {
    var valid = _type__WEBPACK_IMPORTED_MODULE_3__["isString"](fullPath);
    if (!valid || fullPath.length < 2) {
        return fullPath;
    }
    else {
        fullPath = fullPath;
        return _path__WEBPACK_IMPORTED_MODULE_2__["lastComponent"](fullPath);
    }
}
function getMappings() {
    if (mappings_) {
        return mappings_;
    }
    var mappings = [];
    mappings.push(new Mapping('bucket'));
    mappings.push(new Mapping('generation'));
    mappings.push(new Mapping('metageneration'));
    mappings.push(new Mapping('name', 'fullPath', true));
    function mappingsXformPath(metadata, fullPath) {
        return xformPath(fullPath);
    }
    var nameMapping = new Mapping('name');
    nameMapping.xform = mappingsXformPath;
    mappings.push(nameMapping);
    /**
     * Coerces the second param to a number, if it is defined.
     */
    function xformSize(metadata, size) {
        if (_type__WEBPACK_IMPORTED_MODULE_3__["isDef"](size)) {
            return +size;
        }
        else {
            return size;
        }
    }
    var sizeMapping = new Mapping('size');
    sizeMapping.xform = xformSize;
    mappings.push(sizeMapping);
    mappings.push(new Mapping('timeCreated'));
    mappings.push(new Mapping('updated'));
    mappings.push(new Mapping('md5Hash', null, true));
    mappings.push(new Mapping('cacheControl', null, true));
    mappings.push(new Mapping('contentDisposition', null, true));
    mappings.push(new Mapping('contentEncoding', null, true));
    mappings.push(new Mapping('contentLanguage', null, true));
    mappings.push(new Mapping('contentType', null, true));
    mappings.push(new Mapping('metadata', 'customMetadata', true));
    /**
     * Transforms a comma-separated string of tokens into a list of download
     * URLs.
     */
    function xformTokens(metadata, tokens) {
        var valid = _type__WEBPACK_IMPORTED_MODULE_3__["isString"](tokens) && tokens.length > 0;
        if (!valid) {
            // This can happen if objects are uploaded through GCS and retrieved
            // through list, so we don't want to throw an Error.
            return [];
        }
        var encode = encodeURIComponent;
        var tokensList = tokens.split(',');
        var urls = tokensList.map(function (token) {
            var bucket = metadata['bucket'];
            var path = metadata['fullPath'];
            var urlPart = '/b/' + encode(bucket) + '/o/' + encode(path);
            var base = _url__WEBPACK_IMPORTED_MODULE_4__["makeDownloadUrl"](urlPart);
            var queryString = _url__WEBPACK_IMPORTED_MODULE_4__["makeQueryString"]({
                alt: 'media',
                token: token
            });
            return base + queryString;
        });
        return urls;
    }
    mappings.push(new Mapping('downloadTokens', 'downloadURLs', false, xformTokens));
    mappings_ = mappings;
    return mappings_;
}
function addRef(metadata, authWrapper) {
    function generateRef() {
        var bucket = metadata['bucket'];
        var path = metadata['fullPath'];
        var loc = new _location__WEBPACK_IMPORTED_MODULE_1__["Location"](bucket, path);
        return authWrapper.makeStorageReference(loc);
    }
    Object.defineProperty(metadata, 'ref', { get: generateRef });
}
function fromResource(authWrapper, resource, mappings) {
    var metadata = {};
    metadata['type'] = 'file';
    var len = mappings.length;
    for (var i = 0; i < len; i++) {
        var mapping = mappings[i];
        metadata[mapping.local] = mapping.xform(metadata, resource[mapping.server]);
    }
    addRef(metadata, authWrapper);
    return metadata;
}
function fromResourceString(authWrapper, resourceString, mappings) {
    var obj = _json__WEBPACK_IMPORTED_MODULE_0__["jsonObjectOrNull"](resourceString);
    if (obj === null) {
        return null;
    }
    var resource = obj;
    return fromResource(authWrapper, resource, mappings);
}
function toResourceString(metadata, mappings) {
    var resource = {};
    var len = mappings.length;
    for (var i = 0; i < len; i++) {
        var mapping = mappings[i];
        if (mapping.writable) {
            resource[mapping.server] = metadata[mapping.local];
        }
    }
    return JSON.stringify(resource);
}
function metadataValidator(p) {
    var validType = p && _type__WEBPACK_IMPORTED_MODULE_3__["isObject"](p);
    if (!validType) {
        throw 'Expected Metadata object.';
    }
    for (var key in p) {
        var val = p[key];
        if (key === 'customMetadata') {
            if (!_type__WEBPACK_IMPORTED_MODULE_3__["isObject"](val)) {
                throw 'Expected object for \'customMetadata\' mapping.';
            }
        }
        else {
            if (_type__WEBPACK_IMPORTED_MODULE_3__["isNonNullObject"](val)) {
                throw "Mapping for '" + key + "' cannot be an object.";
            }
        }
    }
}



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/object.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/object.js ***!
  \******************************************************************************/
/*! exports provided: contains, forEach, clone */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "contains", function() { return contains; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "forEach", function() { return forEach; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @fileoverview Contains methods for working with objects.
 */
function contains(obj, prop) {
    return Object.prototype.hasOwnProperty.call(obj, prop);
}
function forEach(obj, f) {
    for (var key in obj) {
        if (contains(obj, key)) {
            f(key, obj[key]);
        }
    }
}
function clone(obj) {
    if (obj == null) {
        return {};
    }
    var c = {};
    forEach(obj, function (key, val) {
        c[key] = val;
    });
    return c;
}



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/observer.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/observer.js ***!
  \********************************************************************************/
/*! exports provided: Observer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Observer", function() { return Observer; });
/* harmony import */ var _type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./type */ "./node_modules/@firebase/storage/dist/esm/src/implementation/type.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * @struct
 */
var Observer = /** @class */ (function () {
    function Observer(nextOrObserver, opt_error, opt_complete) {
        var asFunctions = _type__WEBPACK_IMPORTED_MODULE_0__["isFunction"](nextOrObserver) ||
            _type__WEBPACK_IMPORTED_MODULE_0__["isDef"](opt_error) ||
            _type__WEBPACK_IMPORTED_MODULE_0__["isDef"](opt_complete);
        if (asFunctions) {
            this.next = nextOrObserver;
            this.error = opt_error || null;
            this.complete = opt_complete || null;
        }
        else {
            var observer = nextOrObserver;
            this.next = observer.next || null;
            this.error = observer.error || null;
            this.complete = observer.complete || null;
        }
    }
    return Observer;
}());




/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/path.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/path.js ***!
  \****************************************************************************/
/*! exports provided: parent, child, lastComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parent", function() { return parent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "child", function() { return child; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lastComponent", function() { return lastComponent; });
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @fileoverview Contains helper methods for manipulating paths.
 */
/**
 * @return Null if the path is already at the root.
 */
function parent(path) {
    if (path.length == 0) {
        return null;
    }
    var index = path.lastIndexOf('/');
    if (index === -1) {
        return '';
    }
    var newPath = path.slice(0, index);
    return newPath;
}
function child(path, childPath) {
    var canonicalChildPath = childPath
        .split('/')
        .filter(function (component) {
        return component.length > 0;
    })
        .join('/');
    if (path.length === 0) {
        return canonicalChildPath;
    }
    else {
        return path + '/' + canonicalChildPath;
    }
}
/**
 * Returns the last component of a path.
 * '/foo/bar' -> 'bar'
 * '/foo/bar/baz/' -> 'baz/'
 * '/a' -> 'a'
 */
function lastComponent(path) {
    var index = path.lastIndexOf('/', path.length - 2);
    if (index === -1) {
        return path;
    }
    else {
        return path.slice(index + 1);
    }
}



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/promise_external.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/promise_external.js ***!
  \****************************************************************************************/
/*! exports provided: make, resolve, reject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "make", function() { return make; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resolve", function() { return resolve; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "reject", function() { return reject; });
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @fileoverview Implements the promise abstraction interface for external
 * (public SDK) packaging, which just passes through to the firebase-app impl.
 */
/**
 * @template T
 * @param {function((function(T): void),
 *                  (function(!Error): void))} resolver
 */
function make(resolver) {
    return new Promise(resolver);
}
/**
 * @template T
 */
function resolve(value) {
    return Promise.resolve(value);
}
function reject(error) {
    return Promise.reject(error);
}



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/request.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/request.js ***!
  \*******************************************************************************/
/*! exports provided: RequestEndStatus, addAuthHeader_, addVersionHeader_, makeRequest */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RequestEndStatus", function() { return RequestEndStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addAuthHeader_", function() { return addAuthHeader_; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addVersionHeader_", function() { return addVersionHeader_; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeRequest", function() { return makeRequest; });
/* harmony import */ var _firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/app */ "./node_modules/@firebase/app/dist/esm/index.js");
/* harmony import */ var _array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./array */ "./node_modules/@firebase/storage/dist/esm/src/implementation/array.js");
/* harmony import */ var _backoff__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./backoff */ "./node_modules/@firebase/storage/dist/esm/src/implementation/backoff.js");
/* harmony import */ var _error__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./error */ "./node_modules/@firebase/storage/dist/esm/src/implementation/error.js");
/* harmony import */ var _object__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./object */ "./node_modules/@firebase/storage/dist/esm/src/implementation/object.js");
/* harmony import */ var _promise_external__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./promise_external */ "./node_modules/@firebase/storage/dist/esm/src/implementation/promise_external.js");
/* harmony import */ var _type__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./type */ "./node_modules/@firebase/storage/dist/esm/src/implementation/type.js");
/* harmony import */ var _url__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./url */ "./node_modules/@firebase/storage/dist/esm/src/implementation/url.js");
/* harmony import */ var _xhrio__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./xhrio */ "./node_modules/@firebase/storage/dist/esm/src/implementation/xhrio.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @fileoverview Defines methods used to actually send HTTP requests from
 * abstract representations.
 */









/**
 * @struct
 * @template T
 */
var NetworkRequest = /** @class */ (function () {
    function NetworkRequest(url, method, headers, body, successCodes, additionalRetryCodes, callback, errorCallback, timeout, progressCallback, pool) {
        this.pendingXhr_ = null;
        this.backoffId_ = null;
        this.resolve_ = null;
        this.reject_ = null;
        this.canceled_ = false;
        this.appDelete_ = false;
        this.url_ = url;
        this.method_ = method;
        this.headers_ = headers;
        this.body_ = body;
        this.successCodes_ = successCodes.slice();
        this.additionalRetryCodes_ = additionalRetryCodes.slice();
        this.callback_ = callback;
        this.errorCallback_ = errorCallback;
        this.progressCallback_ = progressCallback;
        this.timeout_ = timeout;
        this.pool_ = pool;
        var self = this;
        this.promise_ = _promise_external__WEBPACK_IMPORTED_MODULE_5__["make"](function (resolve, reject) {
            self.resolve_ = resolve;
            self.reject_ = reject;
            self.start_();
        });
    }
    /**
     * Actually starts the retry loop.
     */
    NetworkRequest.prototype.start_ = function () {
        var self = this;
        function doTheRequest(backoffCallback, canceled) {
            if (canceled) {
                backoffCallback(false, new RequestEndStatus(false, null, true));
                return;
            }
            var xhr = self.pool_.createXhrIo();
            self.pendingXhr_ = xhr;
            function progressListener(progressEvent) {
                var loaded = progressEvent.loaded;
                var total = progressEvent.lengthComputable ? progressEvent.total : -1;
                if (self.progressCallback_ !== null) {
                    self.progressCallback_(loaded, total);
                }
            }
            if (self.progressCallback_ !== null) {
                xhr.addUploadProgressListener(progressListener);
            }
            xhr
                .send(self.url_, self.method_, self.body_, self.headers_)
                .then(function (xhr) {
                if (self.progressCallback_ !== null) {
                    xhr.removeUploadProgressListener(progressListener);
                }
                self.pendingXhr_ = null;
                xhr = xhr;
                var hitServer = xhr.getErrorCode() === _xhrio__WEBPACK_IMPORTED_MODULE_8__["ErrorCode"].NO_ERROR;
                var status = xhr.getStatus();
                if (!hitServer || self.isRetryStatusCode_(status)) {
                    var wasCanceled = xhr.getErrorCode() === _xhrio__WEBPACK_IMPORTED_MODULE_8__["ErrorCode"].ABORT;
                    backoffCallback(false, new RequestEndStatus(false, null, wasCanceled));
                    return;
                }
                var successCode = _array__WEBPACK_IMPORTED_MODULE_1__["contains"](self.successCodes_, status);
                backoffCallback(true, new RequestEndStatus(successCode, xhr));
            });
        }
        /**
         * @param requestWentThrough True if the request eventually went
         *     through, false if it hit the retry limit or was canceled.
         */
        function backoffDone(requestWentThrough, status) {
            var resolve = self.resolve_;
            var reject = self.reject_;
            var xhr = status.xhr;
            if (status.wasSuccessCode) {
                try {
                    var result = self.callback_(xhr, xhr.getResponseText());
                    if (_type__WEBPACK_IMPORTED_MODULE_6__["isJustDef"](result)) {
                        resolve(result);
                    }
                    else {
                        resolve();
                    }
                }
                catch (e) {
                    reject(e);
                }
            }
            else {
                if (xhr !== null) {
                    var err = _error__WEBPACK_IMPORTED_MODULE_3__["unknown"]();
                    err.setServerResponseProp(xhr.getResponseText());
                    if (self.errorCallback_) {
                        reject(self.errorCallback_(xhr, err));
                    }
                    else {
                        reject(err);
                    }
                }
                else {
                    if (status.canceled) {
                        var err = self.appDelete_
                            ? _error__WEBPACK_IMPORTED_MODULE_3__["appDeleted"]()
                            : _error__WEBPACK_IMPORTED_MODULE_3__["canceled"]();
                        reject(err);
                    }
                    else {
                        var err = _error__WEBPACK_IMPORTED_MODULE_3__["retryLimitExceeded"]();
                        reject(err);
                    }
                }
            }
        }
        if (this.canceled_) {
            backoffDone(false, new RequestEndStatus(false, null, true));
        }
        else {
            this.backoffId_ = _backoff__WEBPACK_IMPORTED_MODULE_2__["start"](doTheRequest, backoffDone, this.timeout_);
        }
    };
    /** @inheritDoc */
    NetworkRequest.prototype.getPromise = function () {
        return this.promise_;
    };
    /** @inheritDoc */
    NetworkRequest.prototype.cancel = function (appDelete) {
        this.canceled_ = true;
        this.appDelete_ = appDelete || false;
        if (this.backoffId_ !== null) {
            _backoff__WEBPACK_IMPORTED_MODULE_2__["stop"](this.backoffId_);
        }
        if (this.pendingXhr_ !== null) {
            this.pendingXhr_.abort();
        }
    };
    NetworkRequest.prototype.isRetryStatusCode_ = function (status) {
        // The codes for which to retry came from this page:
        // https://cloud.google.com/storage/docs/exponential-backoff
        var isFiveHundredCode = status >= 500 && status < 600;
        var extraRetryCodes = [
            // Request Timeout: web server didn't receive full request in time.
            408,
            // Too Many Requests: you're getting rate-limited, basically.
            429
        ];
        var isExtraRetryCode = _array__WEBPACK_IMPORTED_MODULE_1__["contains"](extraRetryCodes, status);
        var isRequestSpecificRetryCode = _array__WEBPACK_IMPORTED_MODULE_1__["contains"](this.additionalRetryCodes_, status);
        return isFiveHundredCode || isExtraRetryCode || isRequestSpecificRetryCode;
    };
    return NetworkRequest;
}());
/**
 * A collection of information about the result of a network request.
 * @param opt_canceled Defaults to false.
 * @struct
 */
var RequestEndStatus = /** @class */ (function () {
    function RequestEndStatus(wasSuccessCode, xhr, opt_canceled) {
        this.wasSuccessCode = wasSuccessCode;
        this.xhr = xhr;
        this.canceled = !!opt_canceled;
    }
    return RequestEndStatus;
}());

function addAuthHeader_(headers, authToken) {
    if (authToken !== null && authToken.length > 0) {
        headers['Authorization'] = 'Firebase ' + authToken;
    }
}
function addVersionHeader_(headers) {
    var number = typeof _firebase_app__WEBPACK_IMPORTED_MODULE_0__["default"] !== 'undefined' ? _firebase_app__WEBPACK_IMPORTED_MODULE_0__["default"].SDK_VERSION : 'AppManager';
    headers['X-Firebase-Storage-Version'] = 'webjs/' + number;
}
/**
 * @template T
 */
function makeRequest(requestInfo, authToken, pool) {
    var queryPart = _url__WEBPACK_IMPORTED_MODULE_7__["makeQueryString"](requestInfo.urlParams);
    var url = requestInfo.url + queryPart;
    var headers = _object__WEBPACK_IMPORTED_MODULE_4__["clone"](requestInfo.headers);
    addAuthHeader_(headers, authToken);
    addVersionHeader_(headers);
    return new NetworkRequest(url, requestInfo.method, headers, requestInfo.body, requestInfo.successCodes, requestInfo.additionalRetryCodes, requestInfo.handler, requestInfo.errorHandler, requestInfo.timeout, requestInfo.progressCallback, pool);
}



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/requestinfo.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/requestinfo.js ***!
  \***********************************************************************************/
/*! exports provided: RequestInfo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RequestInfo", function() { return RequestInfo; });
var RequestInfo = /** @class */ (function () {
    function RequestInfo(url, method, 
        /**
         * Returns the value with which to resolve the request's promise. Only called
         * if the request is successful. Throw from this function to reject the
         * returned Request's promise with the thrown error.
         * Note: The XhrIo passed to this function may be reused after this callback
         * returns. Do not keep a reference to it in any way.
         */
        handler, timeout) {
        this.url = url;
        this.method = method;
        this.handler = handler;
        this.timeout = timeout;
        this.urlParams = {};
        this.headers = {};
        this.body = null;
        this.errorHandler = null;
        /**
         * Called with the current number of bytes uploaded and total size (-1 if not
         * computable) of the request body (i.e. used to report upload progress).
         */
        this.progressCallback = null;
        this.successCodes = [200];
        this.additionalRetryCodes = [];
    }
    return RequestInfo;
}());




/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/requestmap.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/requestmap.js ***!
  \**********************************************************************************/
/*! exports provided: RequestMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RequestMap", function() { return RequestMap; });
/* harmony import */ var _object__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./object */ "./node_modules/@firebase/storage/dist/esm/src/implementation/object.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ "./node_modules/@firebase/storage/dist/esm/src/implementation/constants.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


/**
 * @struct
 */
var RequestMap = /** @class */ (function () {
    function RequestMap() {
        this.map_ = {};
        this.id_ = _constants__WEBPACK_IMPORTED_MODULE_1__["minSafeInteger"];
    }
    /**
     * Registers the given request with this map.
     * The request is unregistered when it completes.
     * @param r The request to register.
     */
    RequestMap.prototype.addRequest = function (r) {
        var id = this.id_;
        this.id_++;
        this.map_[id] = r;
        var self = this;
        function unmap() {
            delete self.map_[id];
        }
        r.getPromise().then(unmap, unmap);
    };
    /**
     * Cancels all registered requests.
     */
    RequestMap.prototype.clear = function () {
        _object__WEBPACK_IMPORTED_MODULE_0__["forEach"](this.map_, function (key, val) {
            if (val) {
                val.cancel(true);
            }
        });
        this.map_ = {};
    };
    return RequestMap;
}());




/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/requests.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/requests.js ***!
  \********************************************************************************/
/*! exports provided: handlerCheck, metadataHandler, sharedErrorHandler, objectErrorHandler, getMetadata, updateMetadata, deleteObject, determineContentType_, metadataForUpload_, multipartUpload, ResumableUploadStatus, checkResumeHeader_, createResumableUpload, getResumableUploadStatus, resumableUploadChunkSize, continueResumableUpload */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "handlerCheck", function() { return handlerCheck; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "metadataHandler", function() { return metadataHandler; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sharedErrorHandler", function() { return sharedErrorHandler; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "objectErrorHandler", function() { return objectErrorHandler; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMetadata", function() { return getMetadata; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateMetadata", function() { return updateMetadata; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deleteObject", function() { return deleteObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "determineContentType_", function() { return determineContentType_; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "metadataForUpload_", function() { return metadataForUpload_; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multipartUpload", function() { return multipartUpload; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResumableUploadStatus", function() { return ResumableUploadStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "checkResumeHeader_", function() { return checkResumeHeader_; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createResumableUpload", function() { return createResumableUpload; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getResumableUploadStatus", function() { return getResumableUploadStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resumableUploadChunkSize", function() { return resumableUploadChunkSize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "continueResumableUpload", function() { return continueResumableUpload; });
/* harmony import */ var _array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./array */ "./node_modules/@firebase/storage/dist/esm/src/implementation/array.js");
/* harmony import */ var _blob__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./blob */ "./node_modules/@firebase/storage/dist/esm/src/implementation/blob.js");
/* harmony import */ var _error__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./error */ "./node_modules/@firebase/storage/dist/esm/src/implementation/error.js");
/* harmony import */ var _metadata__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./metadata */ "./node_modules/@firebase/storage/dist/esm/src/implementation/metadata.js");
/* harmony import */ var _object__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./object */ "./node_modules/@firebase/storage/dist/esm/src/implementation/object.js");
/* harmony import */ var _requestinfo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./requestinfo */ "./node_modules/@firebase/storage/dist/esm/src/implementation/requestinfo.js");
/* harmony import */ var _type__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./type */ "./node_modules/@firebase/storage/dist/esm/src/implementation/type.js");
/* harmony import */ var _url__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./url */ "./node_modules/@firebase/storage/dist/esm/src/implementation/url.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */








/**
 * Throws the UNKNOWN FirebaseStorageError if cndn is false.
 */
function handlerCheck(cndn) {
    if (!cndn) {
        throw _error__WEBPACK_IMPORTED_MODULE_2__["unknown"]();
    }
}
function metadataHandler(authWrapper, mappings) {
    function handler(xhr, text) {
        var metadata = _metadata__WEBPACK_IMPORTED_MODULE_3__["fromResourceString"](authWrapper, text, mappings);
        handlerCheck(metadata !== null);
        return metadata;
    }
    return handler;
}
function sharedErrorHandler(location) {
    function errorHandler(xhr, err) {
        var newErr;
        if (xhr.getStatus() === 401) {
            newErr = _error__WEBPACK_IMPORTED_MODULE_2__["unauthenticated"]();
        }
        else {
            if (xhr.getStatus() === 402) {
                newErr = _error__WEBPACK_IMPORTED_MODULE_2__["quotaExceeded"](location.bucket);
            }
            else {
                if (xhr.getStatus() === 403) {
                    newErr = _error__WEBPACK_IMPORTED_MODULE_2__["unauthorized"](location.path);
                }
                else {
                    newErr = err;
                }
            }
        }
        newErr.setServerResponseProp(err.serverResponseProp());
        return newErr;
    }
    return errorHandler;
}
function objectErrorHandler(location) {
    var shared = sharedErrorHandler(location);
    function errorHandler(xhr, err) {
        var newErr = shared(xhr, err);
        if (xhr.getStatus() === 404) {
            newErr = _error__WEBPACK_IMPORTED_MODULE_2__["objectNotFound"](location.path);
        }
        newErr.setServerResponseProp(err.serverResponseProp());
        return newErr;
    }
    return errorHandler;
}
function getMetadata(authWrapper, location, mappings) {
    var urlPart = location.fullServerUrl();
    var url = _url__WEBPACK_IMPORTED_MODULE_7__["makeNormalUrl"](urlPart);
    var method = 'GET';
    var timeout = authWrapper.maxOperationRetryTime();
    var requestInfo = new _requestinfo__WEBPACK_IMPORTED_MODULE_5__["RequestInfo"](url, method, metadataHandler(authWrapper, mappings), timeout);
    requestInfo.errorHandler = objectErrorHandler(location);
    return requestInfo;
}
function updateMetadata(authWrapper, location, metadata, mappings) {
    var urlPart = location.fullServerUrl();
    var url = _url__WEBPACK_IMPORTED_MODULE_7__["makeNormalUrl"](urlPart);
    var method = 'PATCH';
    var body = _metadata__WEBPACK_IMPORTED_MODULE_3__["toResourceString"](metadata, mappings);
    var headers = { 'Content-Type': 'application/json; charset=utf-8' };
    var timeout = authWrapper.maxOperationRetryTime();
    var requestInfo = new _requestinfo__WEBPACK_IMPORTED_MODULE_5__["RequestInfo"](url, method, metadataHandler(authWrapper, mappings), timeout);
    requestInfo.headers = headers;
    requestInfo.body = body;
    requestInfo.errorHandler = objectErrorHandler(location);
    return requestInfo;
}
function deleteObject(authWrapper, location) {
    var urlPart = location.fullServerUrl();
    var url = _url__WEBPACK_IMPORTED_MODULE_7__["makeNormalUrl"](urlPart);
    var method = 'DELETE';
    var timeout = authWrapper.maxOperationRetryTime();
    function handler(xhr, text) { }
    var requestInfo = new _requestinfo__WEBPACK_IMPORTED_MODULE_5__["RequestInfo"](url, method, handler, timeout);
    requestInfo.successCodes = [200, 204];
    requestInfo.errorHandler = objectErrorHandler(location);
    return requestInfo;
}
function determineContentType_(metadata, blob) {
    return ((metadata && metadata['contentType']) ||
        (blob && blob.type()) ||
        'application/octet-stream');
}
function metadataForUpload_(location, blob, opt_metadata) {
    var metadata = _object__WEBPACK_IMPORTED_MODULE_4__["clone"](opt_metadata);
    metadata['fullPath'] = location.path;
    metadata['size'] = blob.size();
    if (!metadata['contentType']) {
        metadata['contentType'] = determineContentType_(null, blob);
    }
    return metadata;
}
function multipartUpload(authWrapper, location, mappings, blob, opt_metadata) {
    var urlPart = location.bucketOnlyServerUrl();
    var headers = {
        'X-Goog-Upload-Protocol': 'multipart'
    };
    function genBoundary() {
        var str = '';
        for (var i = 0; i < 2; i++) {
            str =
                str +
                    Math.random()
                        .toString()
                        .slice(2);
        }
        return str;
    }
    var boundary = genBoundary();
    headers['Content-Type'] = 'multipart/related; boundary=' + boundary;
    var metadata = metadataForUpload_(location, blob, opt_metadata);
    var metadataString = _metadata__WEBPACK_IMPORTED_MODULE_3__["toResourceString"](metadata, mappings);
    var preBlobPart = '--' +
        boundary +
        '\r\n' +
        'Content-Type: application/json; charset=utf-8\r\n\r\n' +
        metadataString +
        '\r\n--' +
        boundary +
        '\r\n' +
        'Content-Type: ' +
        metadata['contentType'] +
        '\r\n\r\n';
    var postBlobPart = '\r\n--' + boundary + '--';
    var body = _blob__WEBPACK_IMPORTED_MODULE_1__["FbsBlob"].getBlob(preBlobPart, blob, postBlobPart);
    if (body === null) {
        throw _error__WEBPACK_IMPORTED_MODULE_2__["cannotSliceBlob"]();
    }
    var urlParams = { name: metadata['fullPath'] };
    var url = _url__WEBPACK_IMPORTED_MODULE_7__["makeUploadUrl"](urlPart);
    var method = 'POST';
    var timeout = authWrapper.maxUploadRetryTime();
    var requestInfo = new _requestinfo__WEBPACK_IMPORTED_MODULE_5__["RequestInfo"](url, method, metadataHandler(authWrapper, mappings), timeout);
    requestInfo.urlParams = urlParams;
    requestInfo.headers = headers;
    requestInfo.body = body.uploadData();
    requestInfo.errorHandler = sharedErrorHandler(location);
    return requestInfo;
}
/**
 * @param current The number of bytes that have been uploaded so far.
 * @param total The total number of bytes in the upload.
 * @param opt_finalized True if the server has finished the upload.
 * @param opt_metadata The upload metadata, should
 *     only be passed if opt_finalized is true.
 * @struct
 */
var ResumableUploadStatus = /** @class */ (function () {
    function ResumableUploadStatus(current, total, finalized, metadata) {
        this.current = current;
        this.total = total;
        this.finalized = !!finalized;
        this.metadata = metadata || null;
    }
    return ResumableUploadStatus;
}());

function checkResumeHeader_(xhr, opt_allowed) {
    var status;
    try {
        status = xhr.getResponseHeader('X-Goog-Upload-Status');
    }
    catch (e) {
        handlerCheck(false);
    }
    var allowed = opt_allowed || ['active'];
    handlerCheck(_array__WEBPACK_IMPORTED_MODULE_0__["contains"](allowed, status));
    return status;
}
function createResumableUpload(authWrapper, location, mappings, blob, opt_metadata) {
    var urlPart = location.bucketOnlyServerUrl();
    var metadata = metadataForUpload_(location, blob, opt_metadata);
    var urlParams = { name: metadata['fullPath'] };
    var url = _url__WEBPACK_IMPORTED_MODULE_7__["makeUploadUrl"](urlPart);
    var method = 'POST';
    var headers = {
        'X-Goog-Upload-Protocol': 'resumable',
        'X-Goog-Upload-Command': 'start',
        'X-Goog-Upload-Header-Content-Length': blob.size(),
        'X-Goog-Upload-Header-Content-Type': metadata['contentType'],
        'Content-Type': 'application/json; charset=utf-8'
    };
    var body = _metadata__WEBPACK_IMPORTED_MODULE_3__["toResourceString"](metadata, mappings);
    var timeout = authWrapper.maxUploadRetryTime();
    function handler(xhr, text) {
        checkResumeHeader_(xhr);
        var url;
        try {
            url = xhr.getResponseHeader('X-Goog-Upload-URL');
        }
        catch (e) {
            handlerCheck(false);
        }
        handlerCheck(_type__WEBPACK_IMPORTED_MODULE_6__["isString"](url));
        return url;
    }
    var requestInfo = new _requestinfo__WEBPACK_IMPORTED_MODULE_5__["RequestInfo"](url, method, handler, timeout);
    requestInfo.urlParams = urlParams;
    requestInfo.headers = headers;
    requestInfo.body = body;
    requestInfo.errorHandler = sharedErrorHandler(location);
    return requestInfo;
}
/**
 * @param url From a call to fbs.requests.createResumableUpload.
 */
function getResumableUploadStatus(authWrapper, location, url, blob) {
    var headers = { 'X-Goog-Upload-Command': 'query' };
    function handler(xhr, text) {
        var status = checkResumeHeader_(xhr, ['active', 'final']);
        var sizeString;
        try {
            sizeString = xhr.getResponseHeader('X-Goog-Upload-Size-Received');
        }
        catch (e) {
            handlerCheck(false);
        }
        var size = parseInt(sizeString, 10);
        handlerCheck(!isNaN(size));
        return new ResumableUploadStatus(size, blob.size(), status === 'final');
    }
    var method = 'POST';
    var timeout = authWrapper.maxUploadRetryTime();
    var requestInfo = new _requestinfo__WEBPACK_IMPORTED_MODULE_5__["RequestInfo"](url, method, handler, timeout);
    requestInfo.headers = headers;
    requestInfo.errorHandler = sharedErrorHandler(location);
    return requestInfo;
}
/**
 * Any uploads via the resumable upload API must transfer a number of bytes
 * that is a multiple of this number.
 */
var resumableUploadChunkSize = 256 * 1024;
/**
 * @param url From a call to fbs.requests.createResumableUpload.
 * @param chunkSize Number of bytes to upload.
 * @param opt_status The previous status.
 *     If not passed or null, we start from the beginning.
 * @throws fbs.Error If the upload is already complete, the passed in status
 *     has a final size inconsistent with the blob, or the blob cannot be sliced
 *     for upload.
 */
function continueResumableUpload(location, authWrapper, url, blob, chunkSize, mappings, opt_status, opt_progressCallback) {
    // TODO(andysoto): standardize on internal asserts
    // assert(!(opt_status && opt_status.finalized));
    var status = new ResumableUploadStatus(0, 0);
    if (opt_status) {
        status.current = opt_status.current;
        status.total = opt_status.total;
    }
    else {
        status.current = 0;
        status.total = blob.size();
    }
    if (blob.size() !== status.total) {
        throw _error__WEBPACK_IMPORTED_MODULE_2__["serverFileWrongSize"]();
    }
    var bytesLeft = status.total - status.current;
    var bytesToUpload = bytesLeft;
    if (chunkSize > 0) {
        bytesToUpload = Math.min(bytesToUpload, chunkSize);
    }
    var startByte = status.current;
    var endByte = startByte + bytesToUpload;
    var uploadCommand = bytesToUpload === bytesLeft ? 'upload, finalize' : 'upload';
    var headers = {
        'X-Goog-Upload-Command': uploadCommand,
        'X-Goog-Upload-Offset': status.current
    };
    var body = blob.slice(startByte, endByte);
    if (body === null) {
        throw _error__WEBPACK_IMPORTED_MODULE_2__["cannotSliceBlob"]();
    }
    function handler(xhr, text) {
        // TODO(andysoto): Verify the MD5 of each uploaded range:
        // the 'x-range-md5' header comes back with status code 308 responses.
        // We'll only be able to bail out though, because you can't re-upload a
        // range that you previously uploaded.
        var uploadStatus = checkResumeHeader_(xhr, ['active', 'final']);
        var newCurrent = status.current + bytesToUpload;
        var size = blob.size();
        var metadata;
        if (uploadStatus === 'final') {
            metadata = metadataHandler(authWrapper, mappings)(xhr, text);
        }
        else {
            metadata = null;
        }
        return new ResumableUploadStatus(newCurrent, size, uploadStatus === 'final', metadata);
    }
    var method = 'POST';
    var timeout = authWrapper.maxUploadRetryTime();
    var requestInfo = new _requestinfo__WEBPACK_IMPORTED_MODULE_5__["RequestInfo"](url, method, handler, timeout);
    requestInfo.headers = headers;
    requestInfo.body = body.uploadData();
    requestInfo.progressCallback = opt_progressCallback || null;
    requestInfo.errorHandler = sharedErrorHandler(location);
    return requestInfo;
}



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/string.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/string.js ***!
  \******************************************************************************/
/*! exports provided: StringFormat, formatValidator, StringData, dataFromString, utf8Bytes_, percentEncodedBytes_, base64Bytes_, dataURLBytes_, dataURLContentType_ */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StringFormat", function() { return StringFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatValidator", function() { return formatValidator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StringData", function() { return StringData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dataFromString", function() { return dataFromString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utf8Bytes_", function() { return utf8Bytes_; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "percentEncodedBytes_", function() { return percentEncodedBytes_; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "base64Bytes_", function() { return base64Bytes_; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dataURLBytes_", function() { return dataURLBytes_; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dataURLContentType_", function() { return dataURLContentType_; });
/* harmony import */ var _error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./error */ "./node_modules/@firebase/storage/dist/esm/src/implementation/error.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var StringFormat = {
    RAW: 'raw',
    BASE64: 'base64',
    BASE64URL: 'base64url',
    DATA_URL: 'data_url'
};
function formatValidator(stringFormat) {
    switch (stringFormat) {
        case StringFormat.RAW:
        case StringFormat.BASE64:
        case StringFormat.BASE64URL:
        case StringFormat.DATA_URL:
            return;
        default:
            throw 'Expected one of the event types: [' +
                StringFormat.RAW +
                ', ' +
                StringFormat.BASE64 +
                ', ' +
                StringFormat.BASE64URL +
                ', ' +
                StringFormat.DATA_URL +
                '].';
    }
}
/**
 * @struct
 */
var StringData = /** @class */ (function () {
    function StringData(data, opt_contentType) {
        this.data = data;
        this.contentType = opt_contentType || null;
    }
    return StringData;
}());

function dataFromString(format, string) {
    switch (format) {
        case StringFormat.RAW:
            return new StringData(utf8Bytes_(string));
        case StringFormat.BASE64:
        case StringFormat.BASE64URL:
            return new StringData(base64Bytes_(format, string));
        case StringFormat.DATA_URL:
            return new StringData(dataURLBytes_(string), dataURLContentType_(string));
    }
    // assert(false);
    throw _error__WEBPACK_IMPORTED_MODULE_0__["unknown"]();
}
function utf8Bytes_(string) {
    var b = [];
    for (var i = 0; i < string.length; i++) {
        var c = string.charCodeAt(i);
        if (c <= 127) {
            b.push(c);
        }
        else {
            if (c <= 2047) {
                b.push(192 | (c >> 6), 128 | (c & 63));
            }
            else {
                if ((c & 64512) == 55296) {
                    // The start of a surrogate pair.
                    var valid = i < string.length - 1 &&
                        (string.charCodeAt(i + 1) & 64512) == 56320;
                    if (!valid) {
                        // The second surrogate wasn't there.
                        b.push(239, 191, 189);
                    }
                    else {
                        var hi = c;
                        var lo = string.charCodeAt(++i);
                        c = 65536 | ((hi & 1023) << 10) | (lo & 1023);
                        b.push(240 | (c >> 18), 128 | ((c >> 12) & 63), 128 | ((c >> 6) & 63), 128 | (c & 63));
                    }
                }
                else {
                    if ((c & 64512) == 56320) {
                        // Invalid low surrogate.
                        b.push(239, 191, 189);
                    }
                    else {
                        b.push(224 | (c >> 12), 128 | ((c >> 6) & 63), 128 | (c & 63));
                    }
                }
            }
        }
    }
    return new Uint8Array(b);
}
function percentEncodedBytes_(string) {
    var decoded;
    try {
        decoded = decodeURIComponent(string);
    }
    catch (e) {
        throw _error__WEBPACK_IMPORTED_MODULE_0__["invalidFormat"](StringFormat.DATA_URL, 'Malformed data URL.');
    }
    return utf8Bytes_(decoded);
}
function base64Bytes_(format, string) {
    switch (format) {
        case StringFormat.BASE64: {
            var hasMinus = string.indexOf('-') !== -1;
            var hasUnder = string.indexOf('_') !== -1;
            if (hasMinus || hasUnder) {
                var invalidChar = hasMinus ? '-' : '_';
                throw _error__WEBPACK_IMPORTED_MODULE_0__["invalidFormat"](format, "Invalid character '" +
                    invalidChar +
                    "' found: is it base64url encoded?");
            }
            break;
        }
        case StringFormat.BASE64URL: {
            var hasPlus = string.indexOf('+') !== -1;
            var hasSlash = string.indexOf('/') !== -1;
            if (hasPlus || hasSlash) {
                var invalidChar = hasPlus ? '+' : '/';
                throw _error__WEBPACK_IMPORTED_MODULE_0__["invalidFormat"](format, "Invalid character '" + invalidChar + "' found: is it base64 encoded?");
            }
            string = string.replace(/-/g, '+').replace(/_/g, '/');
            break;
        }
    }
    var bytes;
    try {
        bytes = atob(string);
    }
    catch (e) {
        throw _error__WEBPACK_IMPORTED_MODULE_0__["invalidFormat"](format, 'Invalid character found');
    }
    var array = new Uint8Array(bytes.length);
    for (var i = 0; i < bytes.length; i++) {
        array[i] = bytes.charCodeAt(i);
    }
    return array;
}
/**
 * @struct
 */
var DataURLParts = /** @class */ (function () {
    function DataURLParts(dataURL) {
        this.base64 = false;
        this.contentType = null;
        var matches = dataURL.match(/^data:([^,]+)?,/);
        if (matches === null) {
            throw _error__WEBPACK_IMPORTED_MODULE_0__["invalidFormat"](StringFormat.DATA_URL, "Must be formatted 'data:[<mediatype>][;base64],<data>");
        }
        var middle = matches[1] || null;
        if (middle != null) {
            this.base64 = endsWith(middle, ';base64');
            this.contentType = this.base64
                ? middle.substring(0, middle.length - ';base64'.length)
                : middle;
        }
        this.rest = dataURL.substring(dataURL.indexOf(',') + 1);
    }
    return DataURLParts;
}());
function dataURLBytes_(string) {
    var parts = new DataURLParts(string);
    if (parts.base64) {
        return base64Bytes_(StringFormat.BASE64, parts.rest);
    }
    else {
        return percentEncodedBytes_(parts.rest);
    }
}
function dataURLContentType_(string) {
    var parts = new DataURLParts(string);
    return parts.contentType;
}
function endsWith(s, end) {
    var longEnough = s.length >= end.length;
    if (!longEnough) {
        return false;
    }
    return s.substring(s.length - end.length) === end;
}



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/taskenums.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/taskenums.js ***!
  \*********************************************************************************/
/*! exports provided: TaskEvent, InternalTaskState, TaskState, taskStateFromInternalTaskState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskEvent", function() { return TaskEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InternalTaskState", function() { return InternalTaskState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskState", function() { return TaskState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "taskStateFromInternalTaskState", function() { return taskStateFromInternalTaskState; });
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var TaskEvent = {
    /** Triggered whenever the task changes or progress is updated. */
    STATE_CHANGED: 'state_changed'
};
var InternalTaskState = {
    RUNNING: 'running',
    PAUSING: 'pausing',
    PAUSED: 'paused',
    SUCCESS: 'success',
    CANCELING: 'canceling',
    CANCELED: 'canceled',
    ERROR: 'error'
};
var TaskState = {
    /** The task is currently transferring data. */
    RUNNING: 'running',
    /** The task was paused by the user. */
    PAUSED: 'paused',
    /** The task completed successfully. */
    SUCCESS: 'success',
    /** The task was canceled. */
    CANCELED: 'canceled',
    /** The task failed with an error. */
    ERROR: 'error'
};
function taskStateFromInternalTaskState(state) {
    switch (state) {
        case InternalTaskState.RUNNING:
        case InternalTaskState.PAUSING:
        case InternalTaskState.CANCELING:
            return TaskState.RUNNING;
        case InternalTaskState.PAUSED:
            return TaskState.PAUSED;
        case InternalTaskState.SUCCESS:
            return TaskState.SUCCESS;
        case InternalTaskState.CANCELED:
            return TaskState.CANCELED;
        case InternalTaskState.ERROR:
            return TaskState.ERROR;
        default:
            // TODO(andysoto): assert(false);
            return TaskState.ERROR;
    }
}



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/type.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/type.js ***!
  \****************************************************************************/
/*! exports provided: isDef, isJustDef, isFunction, isObject, isNonNullObject, isNonArrayObject, isString, isNumber, isNativeBlob, isNativeBlobDefined */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isDef", function() { return isDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isJustDef", function() { return isJustDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isFunction", function() { return isFunction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isObject", function() { return isObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isNonNullObject", function() { return isNonNullObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isNonArrayObject", function() { return isNonArrayObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isString", function() { return isString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isNumber", function() { return isNumber; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isNativeBlob", function() { return isNativeBlob; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isNativeBlobDefined", function() { return isNativeBlobDefined; });
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @return False if the object is undefined or null, true otherwise.
 */
function isDef(p) {
    return p != null;
}
function isJustDef(p) {
    return p !== void 0;
}
function isFunction(p) {
    return typeof p === 'function';
}
function isObject(p) {
    return typeof p === 'object';
}
function isNonNullObject(p) {
    return isObject(p) && p !== null;
}
function isNonArrayObject(p) {
    return isObject(p) && !Array.isArray(p);
}
function isString(p) {
    return typeof p === 'string' || p instanceof String;
}
function isNumber(p) {
    return typeof p === 'number' || p instanceof Number;
}
function isNativeBlob(p) {
    return isNativeBlobDefined() && p instanceof Blob;
}
function isNativeBlobDefined() {
    return typeof Blob !== 'undefined';
}



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/url.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/url.js ***!
  \***************************************************************************/
/*! exports provided: makeNormalUrl, makeDownloadUrl, makeUploadUrl, makeQueryString */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeNormalUrl", function() { return makeNormalUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeDownloadUrl", function() { return makeDownloadUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeUploadUrl", function() { return makeUploadUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeQueryString", function() { return makeQueryString; });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "./node_modules/@firebase/storage/dist/esm/src/implementation/constants.js");
/* harmony import */ var _object__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./object */ "./node_modules/@firebase/storage/dist/esm/src/implementation/object.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @fileoverview Functions to create and manipulate URLs for the server API.
 */


function makeNormalUrl(urlPart) {
    return _constants__WEBPACK_IMPORTED_MODULE_0__["domainBase"] + _constants__WEBPACK_IMPORTED_MODULE_0__["apiBaseUrl"] + urlPart;
}
function makeDownloadUrl(urlPart) {
    return _constants__WEBPACK_IMPORTED_MODULE_0__["downloadBase"] + _constants__WEBPACK_IMPORTED_MODULE_0__["apiBaseUrl"] + urlPart;
}
function makeUploadUrl(urlPart) {
    return _constants__WEBPACK_IMPORTED_MODULE_0__["domainBase"] + _constants__WEBPACK_IMPORTED_MODULE_0__["apiUploadBaseUrl"] + urlPart;
}
function makeQueryString(params) {
    var encode = encodeURIComponent;
    var queryPart = '?';
    _object__WEBPACK_IMPORTED_MODULE_1__["forEach"](params, function (key, val) {
        var nextPart = encode(key) + '=' + encode(val);
        queryPart = queryPart + nextPart + '&';
    });
    // Chop off the extra '&' or '?' on the end
    queryPart = queryPart.slice(0, -1);
    return queryPart;
}



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/xhrio.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/xhrio.js ***!
  \*****************************************************************************/
/*! exports provided: ErrorCode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ErrorCode", function() { return ErrorCode; });
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @enum{number}
 */
var ErrorCode;
(function (ErrorCode) {
    ErrorCode[ErrorCode["NO_ERROR"] = 0] = "NO_ERROR";
    ErrorCode[ErrorCode["NETWORK_ERROR"] = 1] = "NETWORK_ERROR";
    ErrorCode[ErrorCode["ABORT"] = 2] = "ABORT";
})(ErrorCode || (ErrorCode = {}));



/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/xhrio_network.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/xhrio_network.js ***!
  \*************************************************************************************/
/*! exports provided: NetworkXhrIo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NetworkXhrIo", function() { return NetworkXhrIo; });
/* harmony import */ var _error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./error */ "./node_modules/@firebase/storage/dist/esm/src/implementation/error.js");
/* harmony import */ var _object__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./object */ "./node_modules/@firebase/storage/dist/esm/src/implementation/object.js");
/* harmony import */ var _promise_external__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./promise_external */ "./node_modules/@firebase/storage/dist/esm/src/implementation/promise_external.js");
/* harmony import */ var _type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./type */ "./node_modules/@firebase/storage/dist/esm/src/implementation/type.js");
/* harmony import */ var _xhrio__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./xhrio */ "./node_modules/@firebase/storage/dist/esm/src/implementation/xhrio.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */





/**
 * We use this instead of goog.net.XhrIo because goog.net.XhrIo is hyuuuuge and
 * doesn't work in React Native on Android.
 */
var NetworkXhrIo = /** @class */ (function () {
    function NetworkXhrIo() {
        var _this = this;
        this.sent_ = false;
        this.xhr_ = new XMLHttpRequest();
        this.errorCode_ = _xhrio__WEBPACK_IMPORTED_MODULE_4__["ErrorCode"].NO_ERROR;
        this.sendPromise_ = _promise_external__WEBPACK_IMPORTED_MODULE_2__["make"](function (resolve, reject) {
            _this.xhr_.addEventListener('abort', function (event) {
                _this.errorCode_ = _xhrio__WEBPACK_IMPORTED_MODULE_4__["ErrorCode"].ABORT;
                resolve(_this);
            });
            _this.xhr_.addEventListener('error', function (event) {
                _this.errorCode_ = _xhrio__WEBPACK_IMPORTED_MODULE_4__["ErrorCode"].NETWORK_ERROR;
                resolve(_this);
            });
            _this.xhr_.addEventListener('load', function (event) {
                resolve(_this);
            });
        });
    }
    /**
     * @override
     */
    NetworkXhrIo.prototype.send = function (url, method, opt_body, opt_headers) {
        var _this = this;
        if (this.sent_) {
            throw _error__WEBPACK_IMPORTED_MODULE_0__["internalError"]('cannot .send() more than once');
        }
        this.sent_ = true;
        this.xhr_.open(method, url, true);
        if (_type__WEBPACK_IMPORTED_MODULE_3__["isDef"](opt_headers)) {
            var headers = opt_headers;
            _object__WEBPACK_IMPORTED_MODULE_1__["forEach"](headers, function (key, val) {
                _this.xhr_.setRequestHeader(key, val.toString());
            });
        }
        if (_type__WEBPACK_IMPORTED_MODULE_3__["isDef"](opt_body)) {
            this.xhr_.send(opt_body);
        }
        else {
            this.xhr_.send();
        }
        return this.sendPromise_;
    };
    /**
     * @override
     */
    NetworkXhrIo.prototype.getErrorCode = function () {
        if (!this.sent_) {
            throw _error__WEBPACK_IMPORTED_MODULE_0__["internalError"]('cannot .getErrorCode() before sending');
        }
        return this.errorCode_;
    };
    /**
     * @override
     */
    NetworkXhrIo.prototype.getStatus = function () {
        if (!this.sent_) {
            throw _error__WEBPACK_IMPORTED_MODULE_0__["internalError"]('cannot .getStatus() before sending');
        }
        try {
            return this.xhr_.status;
        }
        catch (e) {
            return -1;
        }
    };
    /**
     * @override
     */
    NetworkXhrIo.prototype.getResponseText = function () {
        if (!this.sent_) {
            throw _error__WEBPACK_IMPORTED_MODULE_0__["internalError"]('cannot .getResponseText() before sending');
        }
        return this.xhr_.responseText;
    };
    /**
     * Aborts the request.
     * @override
     */
    NetworkXhrIo.prototype.abort = function () {
        this.xhr_.abort();
    };
    /**
     * @override
     */
    NetworkXhrIo.prototype.getResponseHeader = function (header) {
        return this.xhr_.getResponseHeader(header);
    };
    /**
     * @override
     */
    NetworkXhrIo.prototype.addUploadProgressListener = function (listener) {
        if (_type__WEBPACK_IMPORTED_MODULE_3__["isDef"](this.xhr_.upload)) {
            this.xhr_.upload.addEventListener('progress', listener);
        }
    };
    /**
     * @override
     */
    NetworkXhrIo.prototype.removeUploadProgressListener = function (listener) {
        if (_type__WEBPACK_IMPORTED_MODULE_3__["isDef"](this.xhr_.upload)) {
            this.xhr_.upload.removeEventListener('progress', listener);
        }
    };
    return NetworkXhrIo;
}());




/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/implementation/xhriopool.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/implementation/xhriopool.js ***!
  \*********************************************************************************/
/*! exports provided: XhrIoPool */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "XhrIoPool", function() { return XhrIoPool; });
/* harmony import */ var _xhrio_network__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./xhrio_network */ "./node_modules/@firebase/storage/dist/esm/src/implementation/xhrio_network.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * Factory-like class for creating XhrIo instances.
 */
var XhrIoPool = /** @class */ (function () {
    function XhrIoPool() {
    }
    XhrIoPool.prototype.createXhrIo = function () {
        return new _xhrio_network__WEBPACK_IMPORTED_MODULE_0__["NetworkXhrIo"]();
    };
    return XhrIoPool;
}());




/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/reference.js":
/*!******************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/reference.js ***!
  \******************************************************************/
/*! exports provided: Reference */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Reference", function() { return Reference; });
/* harmony import */ var _implementation_args__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./implementation/args */ "./node_modules/@firebase/storage/dist/esm/src/implementation/args.js");
/* harmony import */ var _implementation_blob__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./implementation/blob */ "./node_modules/@firebase/storage/dist/esm/src/implementation/blob.js");
/* harmony import */ var _implementation_error__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./implementation/error */ "./node_modules/@firebase/storage/dist/esm/src/implementation/error.js");
/* harmony import */ var _implementation_location__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./implementation/location */ "./node_modules/@firebase/storage/dist/esm/src/implementation/location.js");
/* harmony import */ var _implementation_metadata__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./implementation/metadata */ "./node_modules/@firebase/storage/dist/esm/src/implementation/metadata.js");
/* harmony import */ var _implementation_object__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./implementation/object */ "./node_modules/@firebase/storage/dist/esm/src/implementation/object.js");
/* harmony import */ var _implementation_path__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./implementation/path */ "./node_modules/@firebase/storage/dist/esm/src/implementation/path.js");
/* harmony import */ var _implementation_requests__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./implementation/requests */ "./node_modules/@firebase/storage/dist/esm/src/implementation/requests.js");
/* harmony import */ var _implementation_string__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./implementation/string */ "./node_modules/@firebase/storage/dist/esm/src/implementation/string.js");
/* harmony import */ var _implementation_type__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./implementation/type */ "./node_modules/@firebase/storage/dist/esm/src/implementation/type.js");
/* harmony import */ var _task__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./task */ "./node_modules/@firebase/storage/dist/esm/src/task.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @fileoverview Defines the Firebase Storage Reference class.
 */












/**
 * Provides methods to interact with a bucket in the Firebase Storage service.
 * @param location An fbs.location, or the URL at
 *     which to base this object, in one of the following forms:
 *         gs://<bucket>/<object-path>
 *         http[s]://firebasestorage.googleapis.com/
 *                     <api-version>/b/<bucket>/o/<object-path>
 *     Any query or fragment strings will be ignored in the http[s]
 *     format. If no value is passed, the storage object will use a URL based on
 *     the project ID of the base firebase.App instance.
 */
var Reference = /** @class */ (function () {
    function Reference(authWrapper, location) {
        this.authWrapper = authWrapper;
        if (location instanceof _implementation_location__WEBPACK_IMPORTED_MODULE_3__["Location"]) {
            this.location = location;
        }
        else {
            this.location = _implementation_location__WEBPACK_IMPORTED_MODULE_3__["Location"].makeFromUrl(location);
        }
    }
    /**
     * @return The URL for the bucket and path this object references,
     *     in the form gs://<bucket>/<object-path>
     * @override
     */
    Reference.prototype.toString = function () {
        _implementation_args__WEBPACK_IMPORTED_MODULE_0__["validate"]('toString', [], arguments);
        return 'gs://' + this.location.bucket + '/' + this.location.path;
    };
    Reference.prototype.newRef = function (authWrapper, location) {
        return new Reference(authWrapper, location);
    };
    Reference.prototype.mappings = function () {
        return _implementation_metadata__WEBPACK_IMPORTED_MODULE_4__["getMappings"]();
    };
    /**
     * @return A reference to the object obtained by
     *     appending childPath, removing any duplicate, beginning, or trailing
     *     slashes.
     */
    Reference.prototype.child = function (childPath) {
        _implementation_args__WEBPACK_IMPORTED_MODULE_0__["validate"]('child', [_implementation_args__WEBPACK_IMPORTED_MODULE_0__["stringSpec"]()], arguments);
        var newPath = _implementation_path__WEBPACK_IMPORTED_MODULE_6__["child"](this.location.path, childPath);
        var location = new _implementation_location__WEBPACK_IMPORTED_MODULE_3__["Location"](this.location.bucket, newPath);
        return this.newRef(this.authWrapper, location);
    };
    Object.defineProperty(Reference.prototype, "parent", {
        /**
         * @return A reference to the parent of the
         *     current object, or null if the current object is the root.
         */
        get: function () {
            var newPath = _implementation_path__WEBPACK_IMPORTED_MODULE_6__["parent"](this.location.path);
            if (newPath === null) {
                return null;
            }
            var location = new _implementation_location__WEBPACK_IMPORTED_MODULE_3__["Location"](this.location.bucket, newPath);
            return this.newRef(this.authWrapper, location);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Reference.prototype, "root", {
        /**
         * @return An reference to the root of this
         *     object's bucket.
         */
        get: function () {
            var location = new _implementation_location__WEBPACK_IMPORTED_MODULE_3__["Location"](this.location.bucket, '');
            return this.newRef(this.authWrapper, location);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Reference.prototype, "bucket", {
        get: function () {
            return this.location.bucket;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Reference.prototype, "fullPath", {
        get: function () {
            return this.location.path;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Reference.prototype, "name", {
        get: function () {
            return _implementation_path__WEBPACK_IMPORTED_MODULE_6__["lastComponent"](this.location.path);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Reference.prototype, "storage", {
        get: function () {
            return this.authWrapper.service();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Uploads a blob to this object's location.
     * @param data The blob to upload.
     * @return An UploadTask that lets you control and
     *     observe the upload.
     */
    Reference.prototype.put = function (data, metadata) {
        if (metadata === void 0) { metadata = null; }
        _implementation_args__WEBPACK_IMPORTED_MODULE_0__["validate"]('put', [_implementation_args__WEBPACK_IMPORTED_MODULE_0__["uploadDataSpec"](), _implementation_args__WEBPACK_IMPORTED_MODULE_0__["metadataSpec"](true)], arguments);
        this.throwIfRoot_('put');
        return new _task__WEBPACK_IMPORTED_MODULE_10__["UploadTask"](this, this.authWrapper, this.location, this.mappings(), new _implementation_blob__WEBPACK_IMPORTED_MODULE_1__["FbsBlob"](data), metadata);
    };
    /**
     * Uploads a string to this object's location.
     * @param string The string to upload.
     * @param opt_format The format of the string to upload.
     * @return An UploadTask that lets you control and
     *     observe the upload.
     */
    Reference.prototype.putString = function (string, format, opt_metadata) {
        if (format === void 0) { format = _implementation_string__WEBPACK_IMPORTED_MODULE_8__["StringFormat"].RAW; }
        _implementation_args__WEBPACK_IMPORTED_MODULE_0__["validate"]('putString', [
            _implementation_args__WEBPACK_IMPORTED_MODULE_0__["stringSpec"](),
            _implementation_args__WEBPACK_IMPORTED_MODULE_0__["stringSpec"](_implementation_string__WEBPACK_IMPORTED_MODULE_8__["formatValidator"], true),
            _implementation_args__WEBPACK_IMPORTED_MODULE_0__["metadataSpec"](true)
        ], arguments);
        this.throwIfRoot_('putString');
        var data = _implementation_string__WEBPACK_IMPORTED_MODULE_8__["dataFromString"](format, string);
        var metadata = _implementation_object__WEBPACK_IMPORTED_MODULE_5__["clone"](opt_metadata);
        if (!_implementation_type__WEBPACK_IMPORTED_MODULE_9__["isDef"](metadata['contentType']) && _implementation_type__WEBPACK_IMPORTED_MODULE_9__["isDef"](data.contentType)) {
            metadata['contentType'] = data.contentType;
        }
        return new _task__WEBPACK_IMPORTED_MODULE_10__["UploadTask"](this, this.authWrapper, this.location, this.mappings(), new _implementation_blob__WEBPACK_IMPORTED_MODULE_1__["FbsBlob"](data.data, true), metadata);
    };
    /**
     * Deletes the object at this location.
     * @return A promise that resolves if the deletion succeeds.
     */
    Reference.prototype.delete = function () {
        _implementation_args__WEBPACK_IMPORTED_MODULE_0__["validate"]('delete', [], arguments);
        this.throwIfRoot_('delete');
        var self = this;
        return this.authWrapper.getAuthToken().then(function (authToken) {
            var requestInfo = _implementation_requests__WEBPACK_IMPORTED_MODULE_7__["deleteObject"](self.authWrapper, self.location);
            return self.authWrapper.makeRequest(requestInfo, authToken).getPromise();
        });
    };
    /**
     *     A promise that resolves with the metadata for this object. If this
     *     object doesn't exist or metadata cannot be retreived, the promise is
     *     rejected.
     */
    Reference.prototype.getMetadata = function () {
        _implementation_args__WEBPACK_IMPORTED_MODULE_0__["validate"]('getMetadata', [], arguments);
        this.throwIfRoot_('getMetadata');
        var self = this;
        return this.authWrapper.getAuthToken().then(function (authToken) {
            var requestInfo = _implementation_requests__WEBPACK_IMPORTED_MODULE_7__["getMetadata"](self.authWrapper, self.location, self.mappings());
            return self.authWrapper.makeRequest(requestInfo, authToken).getPromise();
        });
    };
    /**
     * Updates the metadata for this object.
     * @param metadata The new metadata for the object.
     *     Only values that have been explicitly set will be changed. Explicitly
     *     setting a value to null will remove the metadata.
     * @return A promise that resolves
     *     with the new metadata for this object.
     *     @see firebaseStorage.Reference.prototype.getMetadata
     */
    Reference.prototype.updateMetadata = function (metadata) {
        _implementation_args__WEBPACK_IMPORTED_MODULE_0__["validate"]('updateMetadata', [_implementation_args__WEBPACK_IMPORTED_MODULE_0__["metadataSpec"]()], arguments);
        this.throwIfRoot_('updateMetadata');
        var self = this;
        return this.authWrapper.getAuthToken().then(function (authToken) {
            var requestInfo = _implementation_requests__WEBPACK_IMPORTED_MODULE_7__["updateMetadata"](self.authWrapper, self.location, metadata, self.mappings());
            return self.authWrapper.makeRequest(requestInfo, authToken).getPromise();
        });
    };
    /**
     * @return A promise that resolves with the download
     *     URL for this object.
     */
    Reference.prototype.getDownloadURL = function () {
        _implementation_args__WEBPACK_IMPORTED_MODULE_0__["validate"]('getDownloadURL', [], arguments);
        this.throwIfRoot_('getDownloadURL');
        return this.getMetadata().then(function (metadata) {
            var url = metadata['downloadURLs'][0];
            if (_implementation_type__WEBPACK_IMPORTED_MODULE_9__["isDef"](url)) {
                return url;
            }
            else {
                throw _implementation_error__WEBPACK_IMPORTED_MODULE_2__["noDownloadURL"]();
            }
        });
    };
    Reference.prototype.throwIfRoot_ = function (name) {
        if (this.location.path === '') {
            throw _implementation_error__WEBPACK_IMPORTED_MODULE_2__["invalidRootOperation"](name);
        }
    };
    return Reference;
}());




/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/service.js":
/*!****************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/service.js ***!
  \****************************************************************/
/*! exports provided: Service, ServiceInternals */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Service", function() { return Service; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ServiceInternals", function() { return ServiceInternals; });
/* harmony import */ var _implementation_args__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./implementation/args */ "./node_modules/@firebase/storage/dist/esm/src/implementation/args.js");
/* harmony import */ var _implementation_authwrapper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./implementation/authwrapper */ "./node_modules/@firebase/storage/dist/esm/src/implementation/authwrapper.js");
/* harmony import */ var _implementation_location__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./implementation/location */ "./node_modules/@firebase/storage/dist/esm/src/implementation/location.js");
/* harmony import */ var _implementation_promise_external__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./implementation/promise_external */ "./node_modules/@firebase/storage/dist/esm/src/implementation/promise_external.js");
/* harmony import */ var _implementation_request__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./implementation/request */ "./node_modules/@firebase/storage/dist/esm/src/implementation/request.js");
/* harmony import */ var _reference__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./reference */ "./node_modules/@firebase/storage/dist/esm/src/reference.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */






/**
 * A service that provides firebaseStorage.Reference instances.
 * @param opt_url gs:// url to a custom Storage Bucket
 *
 * @struct
 */
var Service = /** @class */ (function () {
    function Service(app, pool, url) {
        this.bucket_ = null;
        function maker(authWrapper, loc) {
            return new _reference__WEBPACK_IMPORTED_MODULE_5__["Reference"](authWrapper, loc);
        }
        this.authWrapper_ = new _implementation_authwrapper__WEBPACK_IMPORTED_MODULE_1__["AuthWrapper"](app, maker, _implementation_request__WEBPACK_IMPORTED_MODULE_4__["makeRequest"], this, pool);
        this.app_ = app;
        if (url != null) {
            this.bucket_ = _implementation_location__WEBPACK_IMPORTED_MODULE_2__["Location"].makeFromBucketSpec(url);
        }
        else {
            var authWrapperBucket = this.authWrapper_.bucket();
            if (authWrapperBucket != null) {
                this.bucket_ = new _implementation_location__WEBPACK_IMPORTED_MODULE_2__["Location"](authWrapperBucket, '');
            }
        }
        this.internals_ = new ServiceInternals(this);
    }
    /**
     * Returns a firebaseStorage.Reference for the given path in the default
     * bucket.
     */
    Service.prototype.ref = function (path) {
        function validator(path) {
            if (/^[A-Za-z]+:\/\//.test(path)) {
                throw 'Expected child path but got a URL, use refFromURL instead.';
            }
        }
        _implementation_args__WEBPACK_IMPORTED_MODULE_0__["validate"]('ref', [_implementation_args__WEBPACK_IMPORTED_MODULE_0__["stringSpec"](validator, true)], arguments);
        if (this.bucket_ == null) {
            throw new Error('No Storage Bucket defined in Firebase Options.');
        }
        var ref = new _reference__WEBPACK_IMPORTED_MODULE_5__["Reference"](this.authWrapper_, this.bucket_);
        if (path != null) {
            return ref.child(path);
        }
        else {
            return ref;
        }
    };
    /**
     * Returns a firebaseStorage.Reference object for the given absolute URL,
     * which must be a gs:// or http[s]:// URL.
     */
    Service.prototype.refFromURL = function (url) {
        function validator(p) {
            if (!/^[A-Za-z]+:\/\//.test(p)) {
                throw 'Expected full URL but got a child path, use ref instead.';
            }
            try {
                _implementation_location__WEBPACK_IMPORTED_MODULE_2__["Location"].makeFromUrl(p);
            }
            catch (e) {
                throw 'Expected valid full URL but got an invalid one.';
            }
        }
        _implementation_args__WEBPACK_IMPORTED_MODULE_0__["validate"]('refFromURL', [_implementation_args__WEBPACK_IMPORTED_MODULE_0__["stringSpec"](validator, false)], arguments);
        return new _reference__WEBPACK_IMPORTED_MODULE_5__["Reference"](this.authWrapper_, url);
    };
    Object.defineProperty(Service.prototype, "maxUploadRetryTime", {
        get: function () {
            return this.authWrapper_.maxUploadRetryTime();
        },
        enumerable: true,
        configurable: true
    });
    Service.prototype.setMaxUploadRetryTime = function (time) {
        _implementation_args__WEBPACK_IMPORTED_MODULE_0__["validate"]('setMaxUploadRetryTime', [_implementation_args__WEBPACK_IMPORTED_MODULE_0__["nonNegativeNumberSpec"]()], arguments);
        this.authWrapper_.setMaxUploadRetryTime(time);
    };
    Object.defineProperty(Service.prototype, "maxOperationRetryTime", {
        get: function () {
            return this.authWrapper_.maxOperationRetryTime();
        },
        enumerable: true,
        configurable: true
    });
    Service.prototype.setMaxOperationRetryTime = function (time) {
        _implementation_args__WEBPACK_IMPORTED_MODULE_0__["validate"]('setMaxOperationRetryTime', [_implementation_args__WEBPACK_IMPORTED_MODULE_0__["nonNegativeNumberSpec"]()], arguments);
        this.authWrapper_.setMaxOperationRetryTime(time);
    };
    Object.defineProperty(Service.prototype, "app", {
        get: function () {
            return this.app_;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Service.prototype, "INTERNAL", {
        get: function () {
            return this.internals_;
        },
        enumerable: true,
        configurable: true
    });
    return Service;
}());

/**
 * @struct
 */
var ServiceInternals = /** @class */ (function () {
    function ServiceInternals(service) {
        this.service_ = service;
    }
    /**
     * Called when the associated app is deleted.
     * @see {!fbs.AuthWrapper.prototype.deleteApp}
     */
    ServiceInternals.prototype.delete = function () {
        this.service_.authWrapper_.deleteApp();
        return _implementation_promise_external__WEBPACK_IMPORTED_MODULE_3__["resolve"](undefined);
    };
    return ServiceInternals;
}());




/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/task.js":
/*!*************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/task.js ***!
  \*************************************************************/
/*! exports provided: UploadTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UploadTask", function() { return UploadTask; });
/* harmony import */ var _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./implementation/taskenums */ "./node_modules/@firebase/storage/dist/esm/src/implementation/taskenums.js");
/* harmony import */ var _implementation_observer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./implementation/observer */ "./node_modules/@firebase/storage/dist/esm/src/implementation/observer.js");
/* harmony import */ var _tasksnapshot__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tasksnapshot */ "./node_modules/@firebase/storage/dist/esm/src/tasksnapshot.js");
/* harmony import */ var _implementation_args__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./implementation/args */ "./node_modules/@firebase/storage/dist/esm/src/implementation/args.js");
/* harmony import */ var _implementation_array__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./implementation/array */ "./node_modules/@firebase/storage/dist/esm/src/implementation/array.js");
/* harmony import */ var _implementation_async__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./implementation/async */ "./node_modules/@firebase/storage/dist/esm/src/implementation/async.js");
/* harmony import */ var _implementation_error__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./implementation/error */ "./node_modules/@firebase/storage/dist/esm/src/implementation/error.js");
/* harmony import */ var _implementation_promise_external__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./implementation/promise_external */ "./node_modules/@firebase/storage/dist/esm/src/implementation/promise_external.js");
/* harmony import */ var _implementation_requests__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./implementation/requests */ "./node_modules/@firebase/storage/dist/esm/src/implementation/requests.js");
/* harmony import */ var _implementation_type__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./implementation/type */ "./node_modules/@firebase/storage/dist/esm/src/implementation/type.js");
/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @fileoverview Defines types for interacting with blob transfer tasks.
 */












/**
 * Represents a blob being uploaded. Can be used to pause/resume/cancel the
 * upload and manage callbacks for various events.
 */
var UploadTask = /** @class */ (function () {
    /**
     * @param ref The firebaseStorage.Reference object this task came
     *     from, untyped to avoid cyclic dependencies.
     * @param blob The blob to upload.
     */
    function UploadTask(ref, authWrapper, location, mappings, blob, metadata) {
        if (metadata === void 0) { metadata = null; }
        var _this = this;
        this.transferred_ = 0;
        this.needToFetchStatus_ = false;
        this.needToFetchMetadata_ = false;
        this.observers_ = [];
        this.error_ = null;
        this.uploadUrl_ = null;
        this.request_ = null;
        this.chunkMultiplier_ = 1;
        this.resolve_ = null;
        this.reject_ = null;
        this.ref_ = ref;
        this.authWrapper_ = authWrapper;
        this.location_ = location;
        this.blob_ = blob;
        this.metadata_ = metadata;
        this.mappings_ = mappings;
        this.resumable_ = this.shouldDoResumable_(this.blob_);
        this.state_ = _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].RUNNING;
        this.errorHandler_ = function (error) {
            _this.request_ = null;
            _this.chunkMultiplier_ = 1;
            if (error.codeEquals(_implementation_error__WEBPACK_IMPORTED_MODULE_6__["Code"].CANCELED)) {
                _this.needToFetchStatus_ = true;
                _this.completeTransitions_();
            }
            else {
                _this.error_ = error;
                _this.transition_(_implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].ERROR);
            }
        };
        this.metadataErrorHandler_ = function (error) {
            _this.request_ = null;
            if (error.codeEquals(_implementation_error__WEBPACK_IMPORTED_MODULE_6__["Code"].CANCELED)) {
                _this.completeTransitions_();
            }
            else {
                _this.error_ = error;
                _this.transition_(_implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].ERROR);
            }
        };
        this.promise_ = _implementation_promise_external__WEBPACK_IMPORTED_MODULE_7__["make"](function (resolve, reject) {
            _this.resolve_ = resolve;
            _this.reject_ = reject;
            _this.start_();
        });
        // Prevent uncaught rejections on the internal promise from bubbling out
        // to the top level with a dummy handler.
        this.promise_.then(null, function () { });
    }
    UploadTask.prototype.makeProgressCallback_ = function () {
        var _this = this;
        var sizeBefore = this.transferred_;
        return function (loaded, total) {
            _this.updateProgress_(sizeBefore + loaded);
        };
    };
    UploadTask.prototype.shouldDoResumable_ = function (blob) {
        return blob.size() > 256 * 1024;
    };
    UploadTask.prototype.start_ = function () {
        if (this.state_ !== _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].RUNNING) {
            // This can happen if someone pauses us in a resume callback, for example.
            return;
        }
        if (this.request_ !== null) {
            return;
        }
        if (this.resumable_) {
            if (this.uploadUrl_ === null) {
                this.createResumable_();
            }
            else {
                if (this.needToFetchStatus_) {
                    this.fetchStatus_();
                }
                else {
                    if (this.needToFetchMetadata_) {
                        // Happens if we miss the metadata on upload completion.
                        this.fetchMetadata_();
                    }
                    else {
                        this.continueUpload_();
                    }
                }
            }
        }
        else {
            this.oneShotUpload_();
        }
    };
    UploadTask.prototype.resolveToken_ = function (callback) {
        var _this = this;
        this.authWrapper_.getAuthToken().then(function (authToken) {
            switch (_this.state_) {
                case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].RUNNING:
                    callback(authToken);
                    break;
                case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].CANCELING:
                    _this.transition_(_implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].CANCELED);
                    break;
                case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].PAUSING:
                    _this.transition_(_implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].PAUSED);
                    break;
                default:
            }
        });
    };
    // TODO(andysoto): assert false
    UploadTask.prototype.createResumable_ = function () {
        var _this = this;
        this.resolveToken_(function (authToken) {
            var requestInfo = _implementation_requests__WEBPACK_IMPORTED_MODULE_8__["createResumableUpload"](_this.authWrapper_, _this.location_, _this.mappings_, _this.blob_, _this.metadata_);
            var createRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);
            _this.request_ = createRequest;
            createRequest.getPromise().then(function (url) {
                _this.request_ = null;
                _this.uploadUrl_ = url;
                _this.needToFetchStatus_ = false;
                _this.completeTransitions_();
            }, _this.errorHandler_);
        });
    };
    UploadTask.prototype.fetchStatus_ = function () {
        var _this = this;
        // TODO(andysoto): assert(this.uploadUrl_ !== null);
        var url = this.uploadUrl_;
        this.resolveToken_(function (authToken) {
            var requestInfo = _implementation_requests__WEBPACK_IMPORTED_MODULE_8__["getResumableUploadStatus"](_this.authWrapper_, _this.location_, url, _this.blob_);
            var statusRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);
            _this.request_ = statusRequest;
            statusRequest.getPromise().then(function (status) {
                status = status;
                _this.request_ = null;
                _this.updateProgress_(status.current);
                _this.needToFetchStatus_ = false;
                if (status.finalized) {
                    _this.needToFetchMetadata_ = true;
                }
                _this.completeTransitions_();
            }, _this.errorHandler_);
        });
    };
    UploadTask.prototype.continueUpload_ = function () {
        var _this = this;
        var chunkSize = _implementation_requests__WEBPACK_IMPORTED_MODULE_8__["resumableUploadChunkSize"] * this.chunkMultiplier_;
        var status = new _implementation_requests__WEBPACK_IMPORTED_MODULE_8__["ResumableUploadStatus"](this.transferred_, this.blob_.size());
        // TODO(andysoto): assert(this.uploadUrl_ !== null);
        var url = this.uploadUrl_;
        this.resolveToken_(function (authToken) {
            var requestInfo;
            try {
                requestInfo = _implementation_requests__WEBPACK_IMPORTED_MODULE_8__["continueResumableUpload"](_this.location_, _this.authWrapper_, url, _this.blob_, chunkSize, _this.mappings_, status, _this.makeProgressCallback_());
            }
            catch (e) {
                _this.error_ = e;
                _this.transition_(_implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].ERROR);
                return;
            }
            var uploadRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);
            _this.request_ = uploadRequest;
            uploadRequest
                .getPromise()
                .then(function (newStatus) {
                _this.increaseMultiplier_();
                _this.request_ = null;
                _this.updateProgress_(newStatus.current);
                if (newStatus.finalized) {
                    _this.metadata_ = newStatus.metadata;
                    _this.transition_(_implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].SUCCESS);
                }
                else {
                    _this.completeTransitions_();
                }
            }, _this.errorHandler_);
        });
    };
    UploadTask.prototype.increaseMultiplier_ = function () {
        var currentSize = _implementation_requests__WEBPACK_IMPORTED_MODULE_8__["resumableUploadChunkSize"] * this.chunkMultiplier_;
        // Max chunk size is 32M.
        if (currentSize < 32 * 1024 * 1024) {
            this.chunkMultiplier_ *= 2;
        }
    };
    UploadTask.prototype.fetchMetadata_ = function () {
        var _this = this;
        this.resolveToken_(function (authToken) {
            var requestInfo = _implementation_requests__WEBPACK_IMPORTED_MODULE_8__["getMetadata"](_this.authWrapper_, _this.location_, _this.mappings_);
            var metadataRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);
            _this.request_ = metadataRequest;
            metadataRequest.getPromise().then(function (metadata) {
                _this.request_ = null;
                _this.metadata_ = metadata;
                _this.transition_(_implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].SUCCESS);
            }, _this.metadataErrorHandler_);
        });
    };
    UploadTask.prototype.oneShotUpload_ = function () {
        var _this = this;
        this.resolveToken_(function (authToken) {
            var requestInfo = _implementation_requests__WEBPACK_IMPORTED_MODULE_8__["multipartUpload"](_this.authWrapper_, _this.location_, _this.mappings_, _this.blob_, _this.metadata_);
            var multipartRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);
            _this.request_ = multipartRequest;
            multipartRequest.getPromise().then(function (metadata) {
                _this.request_ = null;
                _this.metadata_ = metadata;
                _this.updateProgress_(_this.blob_.size());
                _this.transition_(_implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].SUCCESS);
            }, _this.errorHandler_);
        });
    };
    UploadTask.prototype.updateProgress_ = function (transferred) {
        var old = this.transferred_;
        this.transferred_ = transferred;
        // A progress update can make the "transferred" value smaller (e.g. a
        // partial upload not completed by server, after which the "transferred"
        // value may reset to the value at the beginning of the request).
        if (this.transferred_ !== old) {
            this.notifyObservers_();
        }
    };
    UploadTask.prototype.transition_ = function (state) {
        if (this.state_ === state) {
            return;
        }
        switch (state) {
            case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].CANCELING:
                // TODO(andysoto):
                // assert(this.state_ === InternalTaskState.RUNNING ||
                //        this.state_ === InternalTaskState.PAUSING);
                this.state_ = state;
                if (this.request_ !== null) {
                    this.request_.cancel();
                }
                break;
            case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].PAUSING:
                // TODO(andysoto):
                // assert(this.state_ === InternalTaskState.RUNNING);
                this.state_ = state;
                if (this.request_ !== null) {
                    this.request_.cancel();
                }
                break;
            case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].RUNNING:
                // TODO(andysoto):
                // assert(this.state_ === InternalTaskState.PAUSED ||
                //        this.state_ === InternalTaskState.PAUSING);
                var wasPaused = this.state_ === _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].PAUSED;
                this.state_ = state;
                if (wasPaused) {
                    this.notifyObservers_();
                    this.start_();
                }
                break;
            case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].PAUSED:
                // TODO(andysoto):
                // assert(this.state_ === InternalTaskState.PAUSING);
                this.state_ = state;
                this.notifyObservers_();
                break;
            case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].CANCELED:
                // TODO(andysoto):
                // assert(this.state_ === InternalTaskState.PAUSED ||
                //        this.state_ === InternalTaskState.CANCELING);
                this.error_ = _implementation_error__WEBPACK_IMPORTED_MODULE_6__["canceled"]();
                this.state_ = state;
                this.notifyObservers_();
                break;
            case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].ERROR:
                // TODO(andysoto):
                // assert(this.state_ === InternalTaskState.RUNNING ||
                //        this.state_ === InternalTaskState.PAUSING ||
                //        this.state_ === InternalTaskState.CANCELING);
                this.state_ = state;
                this.notifyObservers_();
                break;
            case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].SUCCESS:
                // TODO(andysoto):
                // assert(this.state_ === InternalTaskState.RUNNING ||
                //        this.state_ === InternalTaskState.PAUSING ||
                //        this.state_ === InternalTaskState.CANCELING);
                this.state_ = state;
                this.notifyObservers_();
                break;
        }
    };
    UploadTask.prototype.completeTransitions_ = function () {
        switch (this.state_) {
            case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].PAUSING:
                this.transition_(_implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].PAUSED);
                break;
            case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].CANCELING:
                this.transition_(_implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].CANCELED);
                break;
            case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].RUNNING:
                this.start_();
                break;
            default:
                // TODO(andysoto): assert(false);
                break;
        }
    };
    Object.defineProperty(UploadTask.prototype, "snapshot", {
        get: function () {
            var externalState = _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["taskStateFromInternalTaskState"](this.state_);
            return new _tasksnapshot__WEBPACK_IMPORTED_MODULE_2__["UploadTaskSnapshot"](this.transferred_, this.blob_.size(), externalState, this.metadata_, this, this.ref_);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Adds a callback for an event.
     * @param type The type of event to listen for.
     */
    UploadTask.prototype.on = function (type, nextOrObserver, error, completed) {
        if (nextOrObserver === void 0) { nextOrObserver = undefined; }
        if (error === void 0) { error = undefined; }
        if (completed === void 0) { completed = undefined; }
        function typeValidator(_p) {
            if (type !== _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["TaskEvent"].STATE_CHANGED) {
                throw "Expected one of the event types: [" + _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["TaskEvent"].STATE_CHANGED + "].";
            }
        }
        var nextOrObserverMessage = 'Expected a function or an Object with one of ' +
            '`next`, `error`, `complete` properties.';
        var nextValidator = _implementation_args__WEBPACK_IMPORTED_MODULE_3__["nullFunctionSpec"](true).validator;
        var observerValidator = _implementation_args__WEBPACK_IMPORTED_MODULE_3__["looseObjectSpec"](null, true).validator;
        function nextOrObserverValidator(p) {
            try {
                nextValidator(p);
                return;
            }
            catch (e) { }
            try {
                observerValidator(p);
                var anyDefined = _implementation_type__WEBPACK_IMPORTED_MODULE_9__["isJustDef"](p['next']) ||
                    _implementation_type__WEBPACK_IMPORTED_MODULE_9__["isJustDef"](p['error']) ||
                    _implementation_type__WEBPACK_IMPORTED_MODULE_9__["isJustDef"](p['complete']);
                if (!anyDefined) {
                    throw '';
                }
                return;
            }
            catch (e) {
                throw nextOrObserverMessage;
            }
        }
        var specs = [
            _implementation_args__WEBPACK_IMPORTED_MODULE_3__["stringSpec"](typeValidator),
            _implementation_args__WEBPACK_IMPORTED_MODULE_3__["looseObjectSpec"](nextOrObserverValidator, true),
            _implementation_args__WEBPACK_IMPORTED_MODULE_3__["nullFunctionSpec"](true),
            _implementation_args__WEBPACK_IMPORTED_MODULE_3__["nullFunctionSpec"](true)
        ];
        _implementation_args__WEBPACK_IMPORTED_MODULE_3__["validate"]('on', specs, arguments);
        var self = this;
        function makeBinder(specs) {
            function binder(nextOrObserver, error, opt_complete) {
                if (specs !== null) {
                    _implementation_args__WEBPACK_IMPORTED_MODULE_3__["validate"]('on', specs, arguments);
                }
                var observer = new _implementation_observer__WEBPACK_IMPORTED_MODULE_1__["Observer"](nextOrObserver, error, completed);
                self.addObserver_(observer);
                return function () {
                    self.removeObserver_(observer);
                };
            }
            return binder;
        }
        function binderNextOrObserverValidator(p) {
            if (p === null) {
                throw nextOrObserverMessage;
            }
            nextOrObserverValidator(p);
        }
        var binderSpecs = [
            _implementation_args__WEBPACK_IMPORTED_MODULE_3__["looseObjectSpec"](binderNextOrObserverValidator),
            _implementation_args__WEBPACK_IMPORTED_MODULE_3__["nullFunctionSpec"](true),
            _implementation_args__WEBPACK_IMPORTED_MODULE_3__["nullFunctionSpec"](true)
        ];
        var typeOnly = !(_implementation_type__WEBPACK_IMPORTED_MODULE_9__["isJustDef"](nextOrObserver) ||
            _implementation_type__WEBPACK_IMPORTED_MODULE_9__["isJustDef"](error) ||
            _implementation_type__WEBPACK_IMPORTED_MODULE_9__["isJustDef"](completed));
        if (typeOnly) {
            return makeBinder(binderSpecs);
        }
        else {
            return makeBinder(null)(nextOrObserver, error, completed);
        }
    };
    /**
     * This object behaves like a Promise, and resolves with its snapshot data
     * when the upload completes.
     * @param onFulfilled The fulfillment callback. Promise chaining works as normal.
     * @param onRejected The rejection callback.
     */
    UploadTask.prototype.then = function (onFulfilled, onRejected) {
        // These casts are needed so that TypeScript can infer the types of the
        // resulting Promise.
        return this.promise_.then(onFulfilled, onRejected);
    };
    /**
     * Equivalent to calling `then(null, onRejected)`.
     */
    UploadTask.prototype.catch = function (onRejected) {
        return this.then(null, onRejected);
    };
    /**
     * Adds the given observer.
     */
    UploadTask.prototype.addObserver_ = function (observer) {
        this.observers_.push(observer);
        this.notifyObserver_(observer);
    };
    /**
     * Removes the given observer.
     */
    UploadTask.prototype.removeObserver_ = function (observer) {
        _implementation_array__WEBPACK_IMPORTED_MODULE_4__["remove"](this.observers_, observer);
    };
    UploadTask.prototype.notifyObservers_ = function () {
        var _this = this;
        this.finishPromise_();
        var observers = _implementation_array__WEBPACK_IMPORTED_MODULE_4__["clone"](this.observers_);
        observers.forEach(function (observer) {
            _this.notifyObserver_(observer);
        });
    };
    UploadTask.prototype.finishPromise_ = function () {
        if (this.resolve_ !== null) {
            var triggered = true;
            switch (_implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["taskStateFromInternalTaskState"](this.state_)) {
                case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["TaskState"].SUCCESS:
                    Object(_implementation_async__WEBPACK_IMPORTED_MODULE_5__["async"])(this.resolve_.bind(null, this.snapshot))();
                    break;
                case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["TaskState"].CANCELED:
                case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["TaskState"].ERROR:
                    var toCall = this.reject_;
                    Object(_implementation_async__WEBPACK_IMPORTED_MODULE_5__["async"])(toCall.bind(null, this.error_))();
                    break;
                default:
                    triggered = false;
                    break;
            }
            if (triggered) {
                this.resolve_ = null;
                this.reject_ = null;
            }
        }
    };
    UploadTask.prototype.notifyObserver_ = function (observer) {
        var externalState = _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["taskStateFromInternalTaskState"](this.state_);
        switch (externalState) {
            case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["TaskState"].RUNNING:
            case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["TaskState"].PAUSED:
                if (observer.next !== null) {
                    Object(_implementation_async__WEBPACK_IMPORTED_MODULE_5__["async"])(observer.next.bind(observer, this.snapshot))();
                }
                break;
            case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["TaskState"].SUCCESS:
                if (observer.complete !== null) {
                    Object(_implementation_async__WEBPACK_IMPORTED_MODULE_5__["async"])(observer.complete.bind(observer))();
                }
                break;
            case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["TaskState"].CANCELED:
            case _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["TaskState"].ERROR:
                if (observer.error !== null) {
                    Object(_implementation_async__WEBPACK_IMPORTED_MODULE_5__["async"])(observer.error.bind(observer, this.error_))();
                }
                break;
            default:
                // TODO(andysoto): assert(false);
                if (observer.error !== null) {
                    Object(_implementation_async__WEBPACK_IMPORTED_MODULE_5__["async"])(observer.error.bind(observer, this.error_))();
                }
        }
    };
    /**
     * Resumes a paused task. Has no effect on a currently running or failed task.
     * @return True if the operation took effect, false if ignored.
     */
    UploadTask.prototype.resume = function () {
        _implementation_args__WEBPACK_IMPORTED_MODULE_3__["validate"]('resume', [], arguments);
        var valid = this.state_ === _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].PAUSED ||
            this.state_ === _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].PAUSING;
        if (valid) {
            this.transition_(_implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].RUNNING);
        }
        return valid;
    };
    /**
     * Pauses a currently running task. Has no effect on a paused or failed task.
     * @return True if the operation took effect, false if ignored.
     */
    UploadTask.prototype.pause = function () {
        _implementation_args__WEBPACK_IMPORTED_MODULE_3__["validate"]('pause', [], arguments);
        var valid = this.state_ === _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].RUNNING;
        if (valid) {
            this.transition_(_implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].PAUSING);
        }
        return valid;
    };
    /**
     * Cancels a currently running or paused task. Has no effect on a complete or
     * failed task.
     * @return True if the operation took effect, false if ignored.
     */
    UploadTask.prototype.cancel = function () {
        _implementation_args__WEBPACK_IMPORTED_MODULE_3__["validate"]('cancel', [], arguments);
        var valid = this.state_ === _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].RUNNING ||
            this.state_ === _implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].PAUSING;
        if (valid) {
            this.transition_(_implementation_taskenums__WEBPACK_IMPORTED_MODULE_0__["InternalTaskState"].CANCELING);
        }
        return valid;
    };
    return UploadTask;
}());




/***/ }),

/***/ "./node_modules/@firebase/storage/dist/esm/src/tasksnapshot.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@firebase/storage/dist/esm/src/tasksnapshot.js ***!
  \*********************************************************************/
/*! exports provided: UploadTaskSnapshot */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UploadTaskSnapshot", function() { return UploadTaskSnapshot; });
var UploadTaskSnapshot = /** @class */ (function () {
    function UploadTaskSnapshot(bytesTransferred, totalBytes, state, metadata, task, ref) {
        this.bytesTransferred = bytesTransferred;
        this.totalBytes = totalBytes;
        this.state = state;
        this.metadata = metadata;
        this.task = task;
        this.ref = ref;
    }
    Object.defineProperty(UploadTaskSnapshot.prototype, "downloadURL", {
        get: function () {
            if (this.metadata !== null) {
                var urls = this.metadata['downloadURLs'];
                if (urls != null && urls[0] != null) {
                    return urls[0];
                }
                else {
                    return null;
                }
            }
            else {
                return null;
            }
        },
        enumerable: true,
        configurable: true
    });
    return UploadTaskSnapshot;
}());




/***/ }),

/***/ "./node_modules/@firebase/util/dist/cjs/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/@firebase/util/dist/cjs/index.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
__export(__webpack_require__(/*! ./src/assert */ "./node_modules/@firebase/util/dist/cjs/src/assert.js"));
__export(__webpack_require__(/*! ./src/crypt */ "./node_modules/@firebase/util/dist/cjs/src/crypt.js"));
__export(__webpack_require__(/*! ./src/constants */ "./node_modules/@firebase/util/dist/cjs/src/constants.js"));
__export(__webpack_require__(/*! ./src/deepCopy */ "./node_modules/@firebase/util/dist/cjs/src/deepCopy.js"));
__export(__webpack_require__(/*! ./src/deferred */ "./node_modules/@firebase/util/dist/cjs/src/deferred.js"));
__export(__webpack_require__(/*! ./src/environment */ "./node_modules/@firebase/util/dist/cjs/src/environment.js"));
__export(__webpack_require__(/*! ./src/errors */ "./node_modules/@firebase/util/dist/cjs/src/errors.js"));
__export(__webpack_require__(/*! ./src/json */ "./node_modules/@firebase/util/dist/cjs/src/json.js"));
__export(__webpack_require__(/*! ./src/jwt */ "./node_modules/@firebase/util/dist/cjs/src/jwt.js"));
__export(__webpack_require__(/*! ./src/obj */ "./node_modules/@firebase/util/dist/cjs/src/obj.js"));
__export(__webpack_require__(/*! ./src/query */ "./node_modules/@firebase/util/dist/cjs/src/query.js"));
__export(__webpack_require__(/*! ./src/sha1 */ "./node_modules/@firebase/util/dist/cjs/src/sha1.js"));
__export(__webpack_require__(/*! ./src/subscribe */ "./node_modules/@firebase/util/dist/cjs/src/subscribe.js"));
__export(__webpack_require__(/*! ./src/validation */ "./node_modules/@firebase/util/dist/cjs/src/validation.js"));
__export(__webpack_require__(/*! ./src/utf8 */ "./node_modules/@firebase/util/dist/cjs/src/utf8.js"));



/***/ }),

/***/ "./node_modules/@firebase/util/dist/cjs/src/assert.js":
/*!************************************************************!*\
  !*** ./node_modules/@firebase/util/dist/cjs/src/assert.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var constants_1 = __webpack_require__(/*! ./constants */ "./node_modules/@firebase/util/dist/cjs/src/constants.js");
/**
 * Throws an error if the provided assertion is falsy
 * @param {*} assertion The assertion to be tested for falsiness
 * @param {!string} message The message to display if the check fails
 */
exports.assert = function (assertion, message) {
    if (!assertion) {
        throw exports.assertionError(message);
    }
};
/**
 * Returns an Error object suitable for throwing.
 * @param {string} message
 * @return {!Error}
 */
exports.assertionError = function (message) {
    return new Error('Firebase Database (' +
        constants_1.CONSTANTS.SDK_VERSION +
        ') INTERNAL ASSERT FAILED: ' +
        message);
};



/***/ }),

/***/ "./node_modules/@firebase/util/dist/cjs/src/constants.js":
/*!***************************************************************!*\
  !*** ./node_modules/@firebase/util/dist/cjs/src/constants.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * @fileoverview Firebase constants.  Some of these (@defines) can be overridden at compile-time.
 */
exports.CONSTANTS = {
    /**
     * @define {boolean} Whether this is the client Node.js SDK.
     */
    NODE_CLIENT: false,
    /**
     * @define {boolean} Whether this is the Admin Node.js SDK.
     */
    NODE_ADMIN: false,
    /**
     * Firebase SDK Version
     */
    SDK_VERSION: '${JSCORE_VERSION}'
};



/***/ }),

/***/ "./node_modules/@firebase/util/dist/cjs/src/crypt.js":
/*!***********************************************************!*\
  !*** ./node_modules/@firebase/util/dist/cjs/src/crypt.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var stringToByteArray = function (str) {
    var output = [], p = 0;
    for (var i = 0; i < str.length; i++) {
        var c = str.charCodeAt(i);
        while (c > 255) {
            output[p++] = c & 255;
            c >>= 8;
        }
        output[p++] = c;
    }
    return output;
};
/**
 * Turns an array of numbers into the string given by the concatenation of the
 * characters to which the numbers correspond.
 * @param {Array<number>} bytes Array of numbers representing characters.
 * @return {string} Stringification of the array.
 */
var byteArrayToString = function (bytes) {
    var CHUNK_SIZE = 8192;
    // Special-case the simple case for speed's sake.
    if (bytes.length < CHUNK_SIZE) {
        return String.fromCharCode.apply(null, bytes);
    }
    // The remaining logic splits conversion by chunks since
    // Function#apply() has a maximum parameter count.
    // See discussion: http://goo.gl/LrWmZ9
    var str = '';
    for (var i = 0; i < bytes.length; i += CHUNK_SIZE) {
        var chunk = bytes.slice(i, i + CHUNK_SIZE);
        str += String.fromCharCode.apply(null, chunk);
    }
    return str;
};
// Static lookup maps, lazily populated by init_()
exports.base64 = {
    /**
     * Maps bytes to characters.
     * @type {Object}
     * @private
     */
    byteToCharMap_: null,
    /**
     * Maps characters to bytes.
     * @type {Object}
     * @private
     */
    charToByteMap_: null,
    /**
     * Maps bytes to websafe characters.
     * @type {Object}
     * @private
     */
    byteToCharMapWebSafe_: null,
    /**
     * Maps websafe characters to bytes.
     * @type {Object}
     * @private
     */
    charToByteMapWebSafe_: null,
    /**
     * Our default alphabet, shared between
     * ENCODED_VALS and ENCODED_VALS_WEBSAFE
     * @type {string}
     */
    ENCODED_VALS_BASE: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',
    /**
     * Our default alphabet. Value 64 (=) is special; it means "nothing."
     * @type {string}
     */
    get ENCODED_VALS() {
        return this.ENCODED_VALS_BASE + '+/=';
    },
    /**
     * Our websafe alphabet.
     * @type {string}
     */
    get ENCODED_VALS_WEBSAFE() {
        return this.ENCODED_VALS_BASE + '-_.';
    },
    /**
     * Whether this browser supports the atob and btoa functions. This extension
     * started at Mozilla but is now implemented by many browsers. We use the
     * ASSUME_* variables to avoid pulling in the full useragent detection library
     * but still allowing the standard per-browser compilations.
     *
     * @type {boolean}
     */
    HAS_NATIVE_SUPPORT: typeof atob === 'function',
    /**
     * Base64-encode an array of bytes.
     *
     * @param {Array<number>|Uint8Array} input An array of bytes (numbers with
     *     value in [0, 255]) to encode.
     * @param {boolean=} opt_webSafe Boolean indicating we should use the
     *     alternative alphabet.
     * @return {string} The base64 encoded string.
     */
    encodeByteArray: function (input, opt_webSafe) {
        if (!Array.isArray(input)) {
            throw Error('encodeByteArray takes an array as a parameter');
        }
        this.init_();
        var byteToCharMap = opt_webSafe
            ? this.byteToCharMapWebSafe_
            : this.byteToCharMap_;
        var output = [];
        for (var i = 0; i < input.length; i += 3) {
            var byte1 = input[i];
            var haveByte2 = i + 1 < input.length;
            var byte2 = haveByte2 ? input[i + 1] : 0;
            var haveByte3 = i + 2 < input.length;
            var byte3 = haveByte3 ? input[i + 2] : 0;
            var outByte1 = byte1 >> 2;
            var outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);
            var outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);
            var outByte4 = byte3 & 0x3f;
            if (!haveByte3) {
                outByte4 = 64;
                if (!haveByte2) {
                    outByte3 = 64;
                }
            }
            output.push(byteToCharMap[outByte1], byteToCharMap[outByte2], byteToCharMap[outByte3], byteToCharMap[outByte4]);
        }
        return output.join('');
    },
    /**
     * Base64-encode a string.
     *
     * @param {string} input A string to encode.
     * @param {boolean=} opt_webSafe If true, we should use the
     *     alternative alphabet.
     * @return {string} The base64 encoded string.
     */
    encodeString: function (input, opt_webSafe) {
        // Shortcut for Mozilla browsers that implement
        // a native base64 encoder in the form of "btoa/atob"
        if (this.HAS_NATIVE_SUPPORT && !opt_webSafe) {
            return btoa(input);
        }
        return this.encodeByteArray(stringToByteArray(input), opt_webSafe);
    },
    /**
     * Base64-decode a string.
     *
     * @param {string} input to decode.
     * @param {boolean=} opt_webSafe True if we should use the
     *     alternative alphabet.
     * @return {string} string representing the decoded value.
     */
    decodeString: function (input, opt_webSafe) {
        // Shortcut for Mozilla browsers that implement
        // a native base64 encoder in the form of "btoa/atob"
        if (this.HAS_NATIVE_SUPPORT && !opt_webSafe) {
            return atob(input);
        }
        return byteArrayToString(this.decodeStringToByteArray(input, opt_webSafe));
    },
    /**
     * Base64-decode a string.
     *
     * In base-64 decoding, groups of four characters are converted into three
     * bytes.  If the encoder did not apply padding, the input length may not
     * be a multiple of 4.
     *
     * In this case, the last group will have fewer than 4 characters, and
     * padding will be inferred.  If the group has one or two characters, it decodes
     * to one byte.  If the group has three characters, it decodes to two bytes.
     *
     * @param {string} input Input to decode.
     * @param {boolean=} opt_webSafe True if we should use the web-safe alphabet.
     * @return {!Array<number>} bytes representing the decoded value.
     */
    decodeStringToByteArray: function (input, opt_webSafe) {
        this.init_();
        var charToByteMap = opt_webSafe
            ? this.charToByteMapWebSafe_
            : this.charToByteMap_;
        var output = [];
        for (var i = 0; i < input.length;) {
            var byte1 = charToByteMap[input.charAt(i++)];
            var haveByte2 = i < input.length;
            var byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;
            ++i;
            var haveByte3 = i < input.length;
            var byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;
            ++i;
            var haveByte4 = i < input.length;
            var byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;
            ++i;
            if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {
                throw Error();
            }
            var outByte1 = (byte1 << 2) | (byte2 >> 4);
            output.push(outByte1);
            if (byte3 != 64) {
                var outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);
                output.push(outByte2);
                if (byte4 != 64) {
                    var outByte3 = ((byte3 << 6) & 0xc0) | byte4;
                    output.push(outByte3);
                }
            }
        }
        return output;
    },
    /**
     * Lazy static initialization function. Called before
     * accessing any of the static map variables.
     * @private
     */
    init_: function () {
        if (!this.byteToCharMap_) {
            this.byteToCharMap_ = {};
            this.charToByteMap_ = {};
            this.byteToCharMapWebSafe_ = {};
            this.charToByteMapWebSafe_ = {};
            // We want quick mappings back and forth, so we precompute two maps.
            for (var i = 0; i < this.ENCODED_VALS.length; i++) {
                this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);
                this.charToByteMap_[this.byteToCharMap_[i]] = i;
                this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);
                this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;
                // Be forgiving when decoding and correctly decode both encodings.
                if (i >= this.ENCODED_VALS_BASE.length) {
                    this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;
                    this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;
                }
            }
        }
    }
};
/**
 * URL-safe base64 encoding
 * @param {!string} str
 * @return {!string}
 */
exports.base64Encode = function (str) {
    var utf8Bytes = stringToByteArray(str);
    return exports.base64.encodeByteArray(utf8Bytes, true);
};
/**
 * URL-safe base64 decoding
 *
 * NOTE: DO NOT use the global atob() function - it does NOT support the
 * base64Url variant encoding.
 *
 * @param {string} str To be decoded
 * @return {?string} Decoded result, if possible
 */
exports.base64Decode = function (str) {
    try {
        return exports.base64.decodeString(str, true);
    }
    catch (e) {
        console.error('base64Decode failed: ', e);
    }
    return null;
};



/***/ }),

/***/ "./node_modules/@firebase/util/dist/cjs/src/deepCopy.js":
/*!**************************************************************!*\
  !*** ./node_modules/@firebase/util/dist/cjs/src/deepCopy.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Do a deep-copy of basic JavaScript Objects or Arrays.
 */
function deepCopy(value) {
    return deepExtend(undefined, value);
}
exports.deepCopy = deepCopy;
/**
 * Copy properties from source to target (recursively allows extension
 * of Objects and Arrays).  Scalar values in the target are over-written.
 * If target is undefined, an object of the appropriate type will be created
 * (and returned).
 *
 * We recursively copy all child properties of plain Objects in the source- so
 * that namespace- like dictionaries are merged.
 *
 * Note that the target can be a function, in which case the properties in
 * the source Object are copied onto it as static properties of the Function.
 */
function deepExtend(target, source) {
    if (!(source instanceof Object)) {
        return source;
    }
    switch (source.constructor) {
        case Date:
            // Treat Dates like scalars; if the target date object had any child
            // properties - they will be lost!
            var dateValue = source;
            return new Date(dateValue.getTime());
        case Object:
            if (target === undefined) {
                target = {};
            }
            break;
        case Array:
            // Always copy the array source and overwrite the target.
            target = [];
            break;
        default:
            // Not a plain Object - treat it as a scalar.
            return source;
    }
    for (var prop in source) {
        if (!source.hasOwnProperty(prop)) {
            continue;
        }
        target[prop] = deepExtend(target[prop], source[prop]);
    }
    return target;
}
exports.deepExtend = deepExtend;
// TODO: Really needed (for JSCompiler type checking)?
function patchProperty(obj, prop, value) {
    obj[prop] = value;
}
exports.patchProperty = patchProperty;



/***/ }),

/***/ "./node_modules/@firebase/util/dist/cjs/src/deferred.js":
/*!**************************************************************!*\
  !*** ./node_modules/@firebase/util/dist/cjs/src/deferred.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var Deferred = /** @class */ (function () {
    function Deferred() {
        var _this = this;
        this.promise = new Promise(function (resolve, reject) {
            _this.resolve = resolve;
            _this.reject = reject;
        });
    }
    /**
     * Our API internals are not promiseified and cannot because our callback APIs have subtle expectations around
     * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback
     * and returns a node-style callback which will resolve or reject the Deferred's promise.
     * @param {((?function(?(Error)): (?|undefined))| (?function(?(Error),?=): (?|undefined)))=} callback
     * @return {!function(?(Error), ?=)}
     */
    Deferred.prototype.wrapCallback = function (callback) {
        var _this = this;
        return function (error, value) {
            if (error) {
                _this.reject(error);
            }
            else {
                _this.resolve(value);
            }
            if (typeof callback === 'function') {
                // Attaching noop handler just in case developer wasn't expecting
                // promises
                _this.promise.catch(function () { });
                // Some of our callbacks don't expect a value and our own tests
                // assert that the parameter length is 1
                if (callback.length === 1) {
                    callback(error);
                }
                else {
                    callback(error, value);
                }
            }
        };
    };
    return Deferred;
}());
exports.Deferred = Deferred;



/***/ }),

/***/ "./node_modules/@firebase/util/dist/cjs/src/environment.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@firebase/util/dist/cjs/src/environment.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var constants_1 = __webpack_require__(/*! ./constants */ "./node_modules/@firebase/util/dist/cjs/src/constants.js");
/**
 * Returns navigator.userAgent string or '' if it's not defined.
 * @return {string} user agent string
 */
exports.getUA = function () {
    if (typeof navigator !== 'undefined' &&
        typeof navigator['userAgent'] === 'string') {
        return navigator['userAgent'];
    }
    else {
        return '';
    }
};
/**
 * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.
 *
 * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap in the Ripple emulator) nor
 * Cordova `onDeviceReady`, which would normally wait for a callback.
 *
 * @return {boolean} isMobileCordova
 */
exports.isMobileCordova = function () {
    return (typeof window !== 'undefined' &&
        !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) &&
        /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(exports.getUA()));
};
/**
 * Detect React Native.
 *
 * @return {boolean} True if ReactNative environment is detected.
 */
exports.isReactNative = function () {
    return (typeof navigator === 'object' && navigator['product'] === 'ReactNative');
};
/**
 * Detect Node.js.
 *
 * @return {boolean} True if Node.js environment is detected.
 */
exports.isNodeSdk = function () {
    return constants_1.CONSTANTS.NODE_CLIENT === true || constants_1.CONSTANTS.NODE_ADMIN === true;
};



/***/ }),

/***/ "./node_modules/@firebase/util/dist/cjs/src/errors.js":
/*!************************************************************!*\
  !*** ./node_modules/@firebase/util/dist/cjs/src/errors.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ERROR_NAME = 'FirebaseError';
var captureStackTrace = Error
    .captureStackTrace;
// Export for faking in tests
function patchCapture(captureFake) {
    var result = captureStackTrace;
    captureStackTrace = captureFake;
    return result;
}
exports.patchCapture = patchCapture;
var FirebaseError = /** @class */ (function () {
    function FirebaseError(code, message) {
        this.code = code;
        this.message = message;
        var stack;
        // We want the stack value, if implemented by Error
        if (captureStackTrace) {
            // Patches this.stack, omitted calls above ErrorFactory#create
            captureStackTrace(this, ErrorFactory.prototype.create);
        }
        else {
            var err_1 = Error.apply(this, arguments);
            this.name = ERROR_NAME;
            // Make non-enumerable getter for the property.
            Object.defineProperty(this, 'stack', {
                get: function () {
                    return err_1.stack;
                }
            });
        }
    }
    return FirebaseError;
}());
exports.FirebaseError = FirebaseError;
// Back-door inheritance
FirebaseError.prototype = Object.create(Error.prototype);
FirebaseError.prototype.constructor = FirebaseError;
FirebaseError.prototype.name = ERROR_NAME;
var ErrorFactory = /** @class */ (function () {
    function ErrorFactory(service, serviceName, errors) {
        this.service = service;
        this.serviceName = serviceName;
        this.errors = errors;
        // Matches {$name}, by default.
        this.pattern = /\{\$([^}]+)}/g;
        // empty
    }
    ErrorFactory.prototype.create = function (code, data) {
        if (data === undefined) {
            data = {};
        }
        var template = this.errors[code];
        var fullCode = this.service + '/' + code;
        var message;
        if (template === undefined) {
            message = 'Error';
        }
        else {
            message = template.replace(this.pattern, function (match, key) {
                var value = data[key];
                return value !== undefined ? value.toString() : '<' + key + '?>';
            });
        }
        // Service: Error message (service/code).
        message = this.serviceName + ': ' + message + ' (' + fullCode + ').';
        var err = new FirebaseError(fullCode, message);
        // Populate the Error object with message parts for programmatic
        // accesses (e.g., e.file).
        for (var prop in data) {
            if (!data.hasOwnProperty(prop) || prop.slice(-1) === '_') {
                continue;
            }
            err[prop] = data[prop];
        }
        return err;
    };
    return ErrorFactory;
}());
exports.ErrorFactory = ErrorFactory;



/***/ }),

/***/ "./node_modules/@firebase/util/dist/cjs/src/hash.js":
/*!**********************************************************!*\
  !*** ./node_modules/@firebase/util/dist/cjs/src/hash.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright 2011 The Closure Library Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
/**
 * @fileoverview Abstract cryptographic hash interface.
 *
 * See Sha1 and Md5 for sample implementations.
 *
 */
/**
 * Create a cryptographic hash instance.
 *
 * @constructor
 * @struct
 */
var Hash = /** @class */ (function () {
    function Hash() {
        /**
         * The block size for the hasher.
         * @type {number}
         */
        this.blockSize = -1;
    }
    return Hash;
}());
exports.Hash = Hash;



/***/ }),

/***/ "./node_modules/@firebase/util/dist/cjs/src/json.js":
/*!**********************************************************!*\
  !*** ./node_modules/@firebase/util/dist/cjs/src/json.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Evaluates a JSON string into a javascript object.
 *
 * @param {string} str A string containing JSON.
 * @return {*} The javascript object representing the specified JSON.
 */
function jsonEval(str) {
    return JSON.parse(str);
}
exports.jsonEval = jsonEval;
/**
 * Returns JSON representing a javascript object.
 * @param {*} data Javascript object to be stringified.
 * @return {string} The JSON contents of the object.
 */
function stringify(data) {
    return JSON.stringify(data);
}
exports.stringify = stringify;



/***/ }),

/***/ "./node_modules/@firebase/util/dist/cjs/src/jwt.js":
/*!*********************************************************!*\
  !*** ./node_modules/@firebase/util/dist/cjs/src/jwt.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var crypt_1 = __webpack_require__(/*! ./crypt */ "./node_modules/@firebase/util/dist/cjs/src/crypt.js");
var json_1 = __webpack_require__(/*! ./json */ "./node_modules/@firebase/util/dist/cjs/src/json.js");
/**
 * Decodes a Firebase auth. token into constituent parts.
 *
 * Notes:
 * - May return with invalid / incomplete claims if there's no native base64 decoding support.
 * - Doesn't check if the token is actually valid.
 *
 * @param {?string} token
 * @return {{header: *, claims: *, data: *, signature: string}}
 */
exports.decode = function (token) {
    var header = {}, claims = {}, data = {}, signature = '';
    try {
        var parts = token.split('.');
        header = json_1.jsonEval(crypt_1.base64Decode(parts[0]) || '');
        claims = json_1.jsonEval(crypt_1.base64Decode(parts[1]) || '');
        signature = parts[2];
        data = claims['d'] || {};
        delete claims['d'];
    }
    catch (e) { }
    return {
        header: header,
        claims: claims,
        data: data,
        signature: signature
    };
};
/**
 * Decodes a Firebase auth. token and checks the validity of its time-based claims. Will return true if the
 * token is within the time window authorized by the 'nbf' (not-before) and 'iat' (issued-at) claims.
 *
 * Notes:
 * - May return a false negative if there's no native base64 decoding support.
 * - Doesn't check if the token is actually valid.
 *
 * @param {?string} token
 * @return {boolean}
 */
exports.isValidTimestamp = function (token) {
    var claims = exports.decode(token).claims, now = Math.floor(new Date().getTime() / 1000), validSince, validUntil;
    if (typeof claims === 'object') {
        if (claims.hasOwnProperty('nbf')) {
            validSince = claims['nbf'];
        }
        else if (claims.hasOwnProperty('iat')) {
            validSince = claims['iat'];
        }
        if (claims.hasOwnProperty('exp')) {
            validUntil = claims['exp'];
        }
        else {
            // token will expire after 24h by default
            validUntil = validSince + 86400;
        }
    }
    return (now && validSince && validUntil && now >= validSince && now <= validUntil);
};
/**
 * Decodes a Firebase auth. token and returns its issued at time if valid, null otherwise.
 *
 * Notes:
 * - May return null if there's no native base64 decoding support.
 * - Doesn't check if the token is actually valid.
 *
 * @param {?string} token
 * @return {?number}
 */
exports.issuedAtTime = function (token) {
    var claims = exports.decode(token).claims;
    if (typeof claims === 'object' && claims.hasOwnProperty('iat')) {
        return claims['iat'];
    }
    return null;
};
/**
 * Decodes a Firebase auth. token and checks the validity of its format. Expects a valid issued-at time and non-empty
 * signature.
 *
 * Notes:
 * - May return a false negative if there's no native base64 decoding support.
 * - Doesn't check if the token is actually valid.
 *
 * @param {?string} token
 * @return {boolean}
 */
exports.isValidFormat = function (token) {
    var decoded = exports.decode(token), claims = decoded.claims;
    return (!!decoded.signature &&
        !!claims &&
        typeof claims === 'object' &&
        claims.hasOwnProperty('iat'));
};
/**
 * Attempts to peer into an auth token and determine if it's an admin auth token by looking at the claims portion.
 *
 * Notes:
 * - May return a false negative if there's no native base64 decoding support.
 * - Doesn't check if the token is actually valid.
 *
 * @param {?string} token
 * @return {boolean}
 */
exports.isAdmin = function (token) {
    var claims = exports.decode(token).claims;
    return typeof claims === 'object' && claims['admin'] === true;
};



/***/ }),

/***/ "./node_modules/@firebase/util/dist/cjs/src/obj.js":
/*!*********************************************************!*\
  !*** ./node_modules/@firebase/util/dist/cjs/src/obj.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
// See http://www.devthought.com/2012/01/18/an-object-is-not-a-hash/
exports.contains = function (obj, key) {
    return Object.prototype.hasOwnProperty.call(obj, key);
};
exports.safeGet = function (obj, key) {
    if (Object.prototype.hasOwnProperty.call(obj, key))
        return obj[key];
    // else return undefined.
};
/**
 * Enumerates the keys/values in an object, excluding keys defined on the prototype.
 *
 * @param {?Object.<K,V>} obj Object to enumerate.
 * @param {!function(K, V)} fn Function to call for each key and value.
 * @template K,V
 */
exports.forEach = function (obj, fn) {
    for (var key in obj) {
        if (Object.prototype.hasOwnProperty.call(obj, key)) {
            fn(key, obj[key]);
        }
    }
};
/**
 * Copies all the (own) properties from one object to another.
 * @param {!Object} objTo
 * @param {!Object} objFrom
 * @return {!Object} objTo
 */
exports.extend = function (objTo, objFrom) {
    exports.forEach(objFrom, function (key, value) {
        objTo[key] = value;
    });
    return objTo;
};
/**
 * Returns a clone of the specified object.
 * @param {!Object} obj
 * @return {!Object} cloned obj.
 */
exports.clone = function (obj) {
    return exports.extend({}, obj);
};
/**
 * Returns true if obj has typeof "object" and is not null.  Unlike goog.isObject(), does not return true
 * for functions.
 *
 * @param obj {*} A potential object.
 * @returns {boolean} True if it's an object.
 */
exports.isNonNullObject = function (obj) {
    return typeof obj === 'object' && obj !== null;
};
exports.isEmpty = function (obj) {
    for (var key in obj) {
        return false;
    }
    return true;
};
exports.getCount = function (obj) {
    var rv = 0;
    for (var key in obj) {
        rv++;
    }
    return rv;
};
exports.map = function (obj, f, opt_obj) {
    var res = {};
    for (var key in obj) {
        res[key] = f.call(opt_obj, obj[key], key, obj);
    }
    return res;
};
exports.findKey = function (obj, fn, opt_this) {
    for (var key in obj) {
        if (fn.call(opt_this, obj[key], key, obj)) {
            return key;
        }
    }
    return undefined;
};
exports.findValue = function (obj, fn, opt_this) {
    var key = exports.findKey(obj, fn, opt_this);
    return key && obj[key];
};
exports.getAnyKey = function (obj) {
    for (var key in obj) {
        return key;
    }
};
exports.getValues = function (obj) {
    var res = [];
    var i = 0;
    for (var key in obj) {
        res[i++] = obj[key];
    }
    return res;
};
/**
 * Tests whether every key/value pair in an object pass the test implemented
 * by the provided function
 *
 * @param {?Object.<K,V>} obj Object to test.
 * @param {!function(K, V)} fn Function to call for each key and value.
 * @template K,V
 */
exports.every = function (obj, fn) {
    for (var key in obj) {
        if (Object.prototype.hasOwnProperty.call(obj, key)) {
            if (!fn(key, obj[key])) {
                return false;
            }
        }
    }
    return true;
};



/***/ }),

/***/ "./node_modules/@firebase/util/dist/cjs/src/query.js":
/*!***********************************************************!*\
  !*** ./node_modules/@firebase/util/dist/cjs/src/query.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var obj_1 = __webpack_require__(/*! ./obj */ "./node_modules/@firebase/util/dist/cjs/src/obj.js");
/**
 * Returns a querystring-formatted string (e.g. &arg=val&arg2=val2) from a params
 * object (e.g. {arg: 'val', arg2: 'val2'})
 * Note: You must prepend it with ? when adding it to a URL.
 *
 * @param {!Object} querystringParams
 * @return {string}
 */
exports.querystring = function (querystringParams) {
    var params = [];
    obj_1.forEach(querystringParams, function (key, value) {
        if (Array.isArray(value)) {
            value.forEach(function (arrayVal) {
                params.push(encodeURIComponent(key) + '=' + encodeURIComponent(arrayVal));
            });
        }
        else {
            params.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));
        }
    });
    return params.length ? '&' + params.join('&') : '';
};
/**
 * Decodes a querystring (e.g. ?arg=val&arg2=val2) into a params object (e.g. {arg: 'val', arg2: 'val2'})
 *
 * @param {string} querystring
 * @return {!Object}
 */
exports.querystringDecode = function (querystring) {
    var obj = {};
    var tokens = querystring.replace(/^\?/, '').split('&');
    tokens.forEach(function (token) {
        if (token) {
            var key = token.split('=');
            obj[key[0]] = key[1];
        }
    });
    return obj;
};



/***/ }),

/***/ "./node_modules/@firebase/util/dist/cjs/src/sha1.js":
/*!**********************************************************!*\
  !*** ./node_modules/@firebase/util/dist/cjs/src/sha1.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var hash_1 = __webpack_require__(/*! ./hash */ "./node_modules/@firebase/util/dist/cjs/src/hash.js");
/**
 * @fileoverview SHA-1 cryptographic hash.
 * Variable names follow the notation in FIPS PUB 180-3:
 * http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf.
 *
 * Usage:
 *   var sha1 = new sha1();
 *   sha1.update(bytes);
 *   var hash = sha1.digest();
 *
 * Performance:
 *   Chrome 23:   ~400 Mbit/s
 *   Firefox 16:  ~250 Mbit/s
 *
 */
/**
 * SHA-1 cryptographic hash constructor.
 *
 * The properties declared here are discussed in the above algorithm document.
 * @constructor
 * @extends {Hash}
 * @final
 * @struct
 */
var Sha1 = /** @class */ (function (_super) {
    __extends(Sha1, _super);
    function Sha1() {
        var _this = _super.call(this) || this;
        /**
         * Holds the previous values of accumulated variables a-e in the compress_
         * function.
         * @type {!Array<number>}
         * @private
         */
        _this.chain_ = [];
        /**
         * A buffer holding the partially computed hash result.
         * @type {!Array<number>}
         * @private
         */
        _this.buf_ = [];
        /**
         * An array of 80 bytes, each a part of the message to be hashed.  Referred to
         * as the message schedule in the docs.
         * @type {!Array<number>}
         * @private
         */
        _this.W_ = [];
        /**
         * Contains data needed to pad messages less than 64 bytes.
         * @type {!Array<number>}
         * @private
         */
        _this.pad_ = [];
        /**
         * @private {number}
         */
        _this.inbuf_ = 0;
        /**
         * @private {number}
         */
        _this.total_ = 0;
        _this.blockSize = 512 / 8;
        _this.pad_[0] = 128;
        for (var i = 1; i < _this.blockSize; ++i) {
            _this.pad_[i] = 0;
        }
        _this.reset();
        return _this;
    }
    Sha1.prototype.reset = function () {
        this.chain_[0] = 0x67452301;
        this.chain_[1] = 0xefcdab89;
        this.chain_[2] = 0x98badcfe;
        this.chain_[3] = 0x10325476;
        this.chain_[4] = 0xc3d2e1f0;
        this.inbuf_ = 0;
        this.total_ = 0;
    };
    /**
     * Internal compress helper function.
     * @param {!Array<number>|!Uint8Array|string} buf Block to compress.
     * @param {number=} opt_offset Offset of the block in the buffer.
     * @private
     */
    Sha1.prototype.compress_ = function (buf, opt_offset) {
        if (!opt_offset) {
            opt_offset = 0;
        }
        var W = this.W_;
        // get 16 big endian words
        if (typeof buf === 'string') {
            for (var i = 0; i < 16; i++) {
                // TODO(user): [bug 8140122] Recent versions of Safari for Mac OS and iOS
                // have a bug that turns the post-increment ++ operator into pre-increment
                // during JIT compilation.  We have code that depends heavily on SHA-1 for
                // correctness and which is affected by this bug, so I've removed all uses
                // of post-increment ++ in which the result value is used.  We can revert
                // this change once the Safari bug
                // (https://bugs.webkit.org/show_bug.cgi?id=109036) has been fixed and
                // most clients have been updated.
                W[i] =
                    (buf.charCodeAt(opt_offset) << 24) |
                        (buf.charCodeAt(opt_offset + 1) << 16) |
                        (buf.charCodeAt(opt_offset + 2) << 8) |
                        buf.charCodeAt(opt_offset + 3);
                opt_offset += 4;
            }
        }
        else {
            for (var i = 0; i < 16; i++) {
                W[i] =
                    (buf[opt_offset] << 24) |
                        (buf[opt_offset + 1] << 16) |
                        (buf[opt_offset + 2] << 8) |
                        buf[opt_offset + 3];
                opt_offset += 4;
            }
        }
        // expand to 80 words
        for (var i = 16; i < 80; i++) {
            var t = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];
            W[i] = ((t << 1) | (t >>> 31)) & 0xffffffff;
        }
        var a = this.chain_[0];
        var b = this.chain_[1];
        var c = this.chain_[2];
        var d = this.chain_[3];
        var e = this.chain_[4];
        var f, k;
        // TODO(user): Try to unroll this loop to speed up the computation.
        for (var i = 0; i < 80; i++) {
            if (i < 40) {
                if (i < 20) {
                    f = d ^ (b & (c ^ d));
                    k = 0x5a827999;
                }
                else {
                    f = b ^ c ^ d;
                    k = 0x6ed9eba1;
                }
            }
            else {
                if (i < 60) {
                    f = (b & c) | (d & (b | c));
                    k = 0x8f1bbcdc;
                }
                else {
                    f = b ^ c ^ d;
                    k = 0xca62c1d6;
                }
            }
            var t = (((a << 5) | (a >>> 27)) + f + e + k + W[i]) & 0xffffffff;
            e = d;
            d = c;
            c = ((b << 30) | (b >>> 2)) & 0xffffffff;
            b = a;
            a = t;
        }
        this.chain_[0] = (this.chain_[0] + a) & 0xffffffff;
        this.chain_[1] = (this.chain_[1] + b) & 0xffffffff;
        this.chain_[2] = (this.chain_[2] + c) & 0xffffffff;
        this.chain_[3] = (this.chain_[3] + d) & 0xffffffff;
        this.chain_[4] = (this.chain_[4] + e) & 0xffffffff;
    };
    Sha1.prototype.update = function (bytes, opt_length) {
        // TODO(johnlenz): tighten the function signature and remove this check
        if (bytes == null) {
            return;
        }
        if (opt_length === undefined) {
            opt_length = bytes.length;
        }
        var lengthMinusBlock = opt_length - this.blockSize;
        var n = 0;
        // Using local instead of member variables gives ~5% speedup on Firefox 16.
        var buf = this.buf_;
        var inbuf = this.inbuf_;
        // The outer while loop should execute at most twice.
        while (n < opt_length) {
            // When we have no data in the block to top up, we can directly process the
            // input buffer (assuming it contains sufficient data). This gives ~25%
            // speedup on Chrome 23 and ~15% speedup on Firefox 16, but requires that
            // the data is provided in large chunks (or in multiples of 64 bytes).
            if (inbuf == 0) {
                while (n <= lengthMinusBlock) {
                    this.compress_(bytes, n);
                    n += this.blockSize;
                }
            }
            if (typeof bytes === 'string') {
                while (n < opt_length) {
                    buf[inbuf] = bytes.charCodeAt(n);
                    ++inbuf;
                    ++n;
                    if (inbuf == this.blockSize) {
                        this.compress_(buf);
                        inbuf = 0;
                        // Jump to the outer loop so we use the full-block optimization.
                        break;
                    }
                }
            }
            else {
                while (n < opt_length) {
                    buf[inbuf] = bytes[n];
                    ++inbuf;
                    ++n;
                    if (inbuf == this.blockSize) {
                        this.compress_(buf);
                        inbuf = 0;
                        // Jump to the outer loop so we use the full-block optimization.
                        break;
                    }
                }
            }
        }
        this.inbuf_ = inbuf;
        this.total_ += opt_length;
    };
    /** @override */
    Sha1.prototype.digest = function () {
        var digest = [];
        var totalBits = this.total_ * 8;
        // Add pad 0x80 0x00*.
        if (this.inbuf_ < 56) {
            this.update(this.pad_, 56 - this.inbuf_);
        }
        else {
            this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));
        }
        // Add # bits.
        for (var i = this.blockSize - 1; i >= 56; i--) {
            this.buf_[i] = totalBits & 255;
            totalBits /= 256; // Don't use bit-shifting here!
        }
        this.compress_(this.buf_);
        var n = 0;
        for (var i = 0; i < 5; i++) {
            for (var j = 24; j >= 0; j -= 8) {
                digest[n] = (this.chain_[i] >> j) & 255;
                ++n;
            }
        }
        return digest;
    };
    return Sha1;
}(hash_1.Hash));
exports.Sha1 = Sha1;



/***/ }),

/***/ "./node_modules/@firebase/util/dist/cjs/src/subscribe.js":
/*!***************************************************************!*\
  !*** ./node_modules/@firebase/util/dist/cjs/src/subscribe.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Helper to make a Subscribe function (just like Promise helps make a
 * Thenable).
 *
 * @param executor Function which can make calls to a single Observer
 *     as a proxy.
 * @param onNoObservers Callback when count of Observers goes to zero.
 */
function createSubscribe(executor, onNoObservers) {
    var proxy = new ObserverProxy(executor, onNoObservers);
    return proxy.subscribe.bind(proxy);
}
exports.createSubscribe = createSubscribe;
/**
 * Implement fan-out for any number of Observers attached via a subscribe
 * function.
 */
var ObserverProxy = /** @class */ (function () {
    /**
     * @param executor Function which can make calls to a single Observer
     *     as a proxy.
     * @param onNoObservers Callback when count of Observers goes to zero.
     */
    function ObserverProxy(executor, onNoObservers) {
        var _this = this;
        this.observers = [];
        this.unsubscribes = [];
        this.observerCount = 0;
        // Micro-task scheduling by calling task.then().
        this.task = Promise.resolve();
        this.finalized = false;
        this.onNoObservers = onNoObservers;
        // Call the executor asynchronously so subscribers that are called
        // synchronously after the creation of the subscribe function
        // can still receive the very first value generated in the executor.
        this.task
            .then(function () {
            executor(_this);
        })
            .catch(function (e) {
            _this.error(e);
        });
    }
    ObserverProxy.prototype.next = function (value) {
        this.forEachObserver(function (observer) {
            observer.next(value);
        });
    };
    ObserverProxy.prototype.error = function (error) {
        this.forEachObserver(function (observer) {
            observer.error(error);
        });
        this.close(error);
    };
    ObserverProxy.prototype.complete = function () {
        this.forEachObserver(function (observer) {
            observer.complete();
        });
        this.close();
    };
    /**
     * Subscribe function that can be used to add an Observer to the fan-out list.
     *
     * - We require that no event is sent to a subscriber sychronously to their
     *   call to subscribe().
     */
    ObserverProxy.prototype.subscribe = function (nextOrObserver, error, complete) {
        var _this = this;
        var observer;
        if (nextOrObserver === undefined &&
            error === undefined &&
            complete === undefined) {
            throw new Error('Missing Observer.');
        }
        // Assemble an Observer object when passed as callback functions.
        if (implementsAnyMethods(nextOrObserver, ['next', 'error', 'complete'])) {
            observer = nextOrObserver;
        }
        else {
            observer = {
                next: nextOrObserver,
                error: error,
                complete: complete
            };
        }
        if (observer.next === undefined) {
            observer.next = noop;
        }
        if (observer.error === undefined) {
            observer.error = noop;
        }
        if (observer.complete === undefined) {
            observer.complete = noop;
        }
        var unsub = this.unsubscribeOne.bind(this, this.observers.length);
        // Attempt to subscribe to a terminated Observable - we
        // just respond to the Observer with the final error or complete
        // event.
        if (this.finalized) {
            this.task.then(function () {
                try {
                    if (_this.finalError) {
                        observer.error(_this.finalError);
                    }
                    else {
                        observer.complete();
                    }
                }
                catch (e) {
                    // nothing
                }
                return;
            });
        }
        this.observers.push(observer);
        return unsub;
    };
    // Unsubscribe is synchronous - we guarantee that no events are sent to
    // any unsubscribed Observer.
    ObserverProxy.prototype.unsubscribeOne = function (i) {
        if (this.observers === undefined || this.observers[i] === undefined) {
            return;
        }
        delete this.observers[i];
        this.observerCount -= 1;
        if (this.observerCount === 0 && this.onNoObservers !== undefined) {
            this.onNoObservers(this);
        }
    };
    ObserverProxy.prototype.forEachObserver = function (fn) {
        if (this.finalized) {
            // Already closed by previous event....just eat the additional values.
            return;
        }
        // Since sendOne calls asynchronously - there is no chance that
        // this.observers will become undefined.
        for (var i = 0; i < this.observers.length; i++) {
            this.sendOne(i, fn);
        }
    };
    // Call the Observer via one of it's callback function. We are careful to
    // confirm that the observe has not been unsubscribed since this asynchronous
    // function had been queued.
    ObserverProxy.prototype.sendOne = function (i, fn) {
        var _this = this;
        // Execute the callback asynchronously
        this.task.then(function () {
            if (_this.observers !== undefined && _this.observers[i] !== undefined) {
                try {
                    fn(_this.observers[i]);
                }
                catch (e) {
                    // Ignore exceptions raised in Observers or missing methods of an
                    // Observer.
                    // Log error to console. b/31404806
                    if (typeof console !== 'undefined' && console.error) {
                        console.error(e);
                    }
                }
            }
        });
    };
    ObserverProxy.prototype.close = function (err) {
        var _this = this;
        if (this.finalized) {
            return;
        }
        this.finalized = true;
        if (err !== undefined) {
            this.finalError = err;
        }
        // Proxy is no longer needed - garbage collect references
        this.task.then(function () {
            _this.observers = undefined;
            _this.onNoObservers = undefined;
        });
    };
    return ObserverProxy;
}());
/** Turn synchronous function into one called asynchronously. */
function async(fn, onError) {
    return function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        Promise.resolve(true)
            .then(function () {
            fn.apply(void 0, args);
        })
            .catch(function (error) {
            if (onError) {
                onError(error);
            }
        });
    };
}
exports.async = async;
/**
 * Return true if the object passed in implements any of the named methods.
 */
function implementsAnyMethods(obj, methods) {
    if (typeof obj !== 'object' || obj === null) {
        return false;
    }
    for (var _i = 0, methods_1 = methods; _i < methods_1.length; _i++) {
        var method = methods_1[_i];
        if (method in obj && typeof obj[method] === 'function') {
            return true;
        }
    }
    return false;
}
function noop() {
    // do nothing
}



/***/ }),

/***/ "./node_modules/@firebase/util/dist/cjs/src/utf8.js":
/*!**********************************************************!*\
  !*** ./node_modules/@firebase/util/dist/cjs/src/utf8.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var assert_1 = __webpack_require__(/*! ./assert */ "./node_modules/@firebase/util/dist/cjs/src/assert.js");
// Code originally came from goog.crypt.stringToUtf8ByteArray, but for some reason they
// automatically replaced '\r\n' with '\n', and they didn't handle surrogate pairs,
// so it's been modified.
// Note that not all Unicode characters appear as single characters in JavaScript strings.
// fromCharCode returns the UTF-16 encoding of a character - so some Unicode characters
// use 2 characters in Javascript.  All 4-byte UTF-8 characters begin with a first
// character in the range 0xD800 - 0xDBFF (the first character of a so-called surrogate
// pair).
// See http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.3
/**
 * @param {string} str
 * @return {Array}
 */
exports.stringToByteArray = function (str) {
    var out = [], p = 0;
    for (var i = 0; i < str.length; i++) {
        var c = str.charCodeAt(i);
        // Is this the lead surrogate in a surrogate pair?
        if (c >= 0xd800 && c <= 0xdbff) {
            var high = c - 0xd800; // the high 10 bits.
            i++;
            assert_1.assert(i < str.length, 'Surrogate pair missing trail surrogate.');
            var low = str.charCodeAt(i) - 0xdc00; // the low 10 bits.
            c = 0x10000 + (high << 10) + low;
        }
        if (c < 128) {
            out[p++] = c;
        }
        else if (c < 2048) {
            out[p++] = (c >> 6) | 192;
            out[p++] = (c & 63) | 128;
        }
        else if (c < 65536) {
            out[p++] = (c >> 12) | 224;
            out[p++] = ((c >> 6) & 63) | 128;
            out[p++] = (c & 63) | 128;
        }
        else {
            out[p++] = (c >> 18) | 240;
            out[p++] = ((c >> 12) & 63) | 128;
            out[p++] = ((c >> 6) & 63) | 128;
            out[p++] = (c & 63) | 128;
        }
    }
    return out;
};
/**
 * Calculate length without actually converting; useful for doing cheaper validation.
 * @param {string} str
 * @return {number}
 */
exports.stringLength = function (str) {
    var p = 0;
    for (var i = 0; i < str.length; i++) {
        var c = str.charCodeAt(i);
        if (c < 128) {
            p++;
        }
        else if (c < 2048) {
            p += 2;
        }
        else if (c >= 0xd800 && c <= 0xdbff) {
            // Lead surrogate of a surrogate pair.  The pair together will take 4 bytes to represent.
            p += 4;
            i++; // skip trail surrogate.
        }
        else {
            p += 3;
        }
    }
    return p;
};



/***/ }),

/***/ "./node_modules/@firebase/util/dist/cjs/src/validation.js":
/*!****************************************************************!*\
  !*** ./node_modules/@firebase/util/dist/cjs/src/validation.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Check to make sure the appropriate number of arguments are provided for a public function.
 * Throws an error if it fails.
 *
 * @param {!string} fnName The function name
 * @param {!number} minCount The minimum number of arguments to allow for the function call
 * @param {!number} maxCount The maximum number of argument to allow for the function call
 * @param {!number} argCount The actual number of arguments provided.
 */
exports.validateArgCount = function (fnName, minCount, maxCount, argCount) {
    var argError;
    if (argCount < minCount) {
        argError = 'at least ' + minCount;
    }
    else if (argCount > maxCount) {
        argError = maxCount === 0 ? 'none' : 'no more than ' + maxCount;
    }
    if (argError) {
        var error = fnName +
            ' failed: Was called with ' +
            argCount +
            (argCount === 1 ? ' argument.' : ' arguments.') +
            ' Expects ' +
            argError +
            '.';
        throw new Error(error);
    }
};
/**
 * Generates a string to prefix an error message about failed argument validation
 *
 * @param {!string} fnName The function name
 * @param {!number} argumentNumber The index of the argument
 * @param {boolean} optional Whether or not the argument is optional
 * @return {!string} The prefix to add to the error thrown for validation.
 */
function errorPrefix(fnName, argumentNumber, optional) {
    var argName = '';
    switch (argumentNumber) {
        case 1:
            argName = optional ? 'first' : 'First';
            break;
        case 2:
            argName = optional ? 'second' : 'Second';
            break;
        case 3:
            argName = optional ? 'third' : 'Third';
            break;
        case 4:
            argName = optional ? 'fourth' : 'Fourth';
            break;
        default:
            throw new Error('errorPrefix called with argumentNumber > 4.  Need to update it?');
    }
    var error = fnName + ' failed: ';
    error += argName + ' argument ';
    return error;
}
exports.errorPrefix = errorPrefix;
/**
 * @param {!string} fnName
 * @param {!number} argumentNumber
 * @param {!string} namespace
 * @param {boolean} optional
 */
function validateNamespace(fnName, argumentNumber, namespace, optional) {
    if (optional && !namespace)
        return;
    if (typeof namespace !== 'string') {
        //TODO: I should do more validation here. We only allow certain chars in namespaces.
        throw new Error(errorPrefix(fnName, argumentNumber, optional) +
            'must be a valid firebase namespace.');
    }
}
exports.validateNamespace = validateNamespace;
function validateCallback(fnName, argumentNumber, callback, optional) {
    if (optional && !callback)
        return;
    if (typeof callback !== 'function')
        throw new Error(errorPrefix(fnName, argumentNumber, optional) +
            'must be a valid function.');
}
exports.validateCallback = validateCallback;
function validateContextObject(fnName, argumentNumber, context, optional) {
    if (optional && !context)
        return;
    if (typeof context !== 'object' || context === null)
        throw new Error(errorPrefix(fnName, argumentNumber, optional) +
            'must be a valid context object.');
}
exports.validateContextObject = validateContextObject;



/***/ }),

/***/ "./node_modules/axios/index.js":
/*!*************************************!*\
  !*** ./node_modules/axios/index.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! ./lib/axios */ "./node_modules/axios/lib/axios.js");

/***/ }),

/***/ "./node_modules/axios/lib/adapters/xhr.js":
/*!************************************************!*\
  !*** ./node_modules/axios/lib/adapters/xhr.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");
var settle = __webpack_require__(/*! ./../core/settle */ "./node_modules/axios/lib/core/settle.js");
var buildURL = __webpack_require__(/*! ./../helpers/buildURL */ "./node_modules/axios/lib/helpers/buildURL.js");
var buildFullPath = __webpack_require__(/*! ../core/buildFullPath */ "./node_modules/axios/lib/core/buildFullPath.js");
var parseHeaders = __webpack_require__(/*! ./../helpers/parseHeaders */ "./node_modules/axios/lib/helpers/parseHeaders.js");
var isURLSameOrigin = __webpack_require__(/*! ./../helpers/isURLSameOrigin */ "./node_modules/axios/lib/helpers/isURLSameOrigin.js");
var createError = __webpack_require__(/*! ../core/createError */ "./node_modules/axios/lib/core/createError.js");

module.exports = function xhrAdapter(config) {
  return new Promise(function dispatchXhrRequest(resolve, reject) {
    var requestData = config.data;
    var requestHeaders = config.headers;

    if (utils.isFormData(requestData)) {
      delete requestHeaders['Content-Type']; // Let the browser set it
    }

    var request = new XMLHttpRequest();

    // HTTP basic authentication
    if (config.auth) {
      var username = config.auth.username || '';
      var password = config.auth.password || '';
      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);
    }

    var fullPath = buildFullPath(config.baseURL, config.url);
    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);

    // Set the request timeout in MS
    request.timeout = config.timeout;

    // Listen for ready state
    request.onreadystatechange = function handleLoad() {
      if (!request || request.readyState !== 4) {
        return;
      }

      // The request errored out and we didn't get a response, this will be
      // handled by onerror instead
      // With one exception: request that using file: protocol, most browsers
      // will return status as 0 even though it's a successful request
      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {
        return;
      }

      // Prepare the response
      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;
      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;
      var response = {
        data: responseData,
        status: request.status,
        statusText: request.statusText,
        headers: responseHeaders,
        config: config,
        request: request
      };

      settle(resolve, reject, response);

      // Clean up request
      request = null;
    };

    // Handle browser request cancellation (as opposed to a manual cancellation)
    request.onabort = function handleAbort() {
      if (!request) {
        return;
      }

      reject(createError('Request aborted', config, 'ECONNABORTED', request));

      // Clean up request
      request = null;
    };

    // Handle low level network errors
    request.onerror = function handleError() {
      // Real errors are hidden from us by the browser
      // onerror should only fire if it's a network error
      reject(createError('Network Error', config, null, request));

      // Clean up request
      request = null;
    };

    // Handle timeout
    request.ontimeout = function handleTimeout() {
      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';
      if (config.timeoutErrorMessage) {
        timeoutErrorMessage = config.timeoutErrorMessage;
      }
      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED',
        request));

      // Clean up request
      request = null;
    };

    // Add xsrf header
    // This is only done if running in a standard browser environment.
    // Specifically not if we're in a web worker, or react-native.
    if (utils.isStandardBrowserEnv()) {
      var cookies = __webpack_require__(/*! ./../helpers/cookies */ "./node_modules/axios/lib/helpers/cookies.js");

      // Add xsrf header
      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?
        cookies.read(config.xsrfCookieName) :
        undefined;

      if (xsrfValue) {
        requestHeaders[config.xsrfHeaderName] = xsrfValue;
      }
    }

    // Add headers to the request
    if ('setRequestHeader' in request) {
      utils.forEach(requestHeaders, function setRequestHeader(val, key) {
        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {
          // Remove Content-Type if data is undefined
          delete requestHeaders[key];
        } else {
          // Otherwise add header to the request
          request.setRequestHeader(key, val);
        }
      });
    }

    // Add withCredentials to request if needed
    if (!utils.isUndefined(config.withCredentials)) {
      request.withCredentials = !!config.withCredentials;
    }

    // Add responseType to request if needed
    if (config.responseType) {
      try {
        request.responseType = config.responseType;
      } catch (e) {
        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.
        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.
        if (config.responseType !== 'json') {
          throw e;
        }
      }
    }

    // Handle progress if needed
    if (typeof config.onDownloadProgress === 'function') {
      request.addEventListener('progress', config.onDownloadProgress);
    }

    // Not all browsers support upload events
    if (typeof config.onUploadProgress === 'function' && request.upload) {
      request.upload.addEventListener('progress', config.onUploadProgress);
    }

    if (config.cancelToken) {
      // Handle cancellation
      config.cancelToken.promise.then(function onCanceled(cancel) {
        if (!request) {
          return;
        }

        request.abort();
        reject(cancel);
        // Clean up request
        request = null;
      });
    }

    if (requestData === undefined) {
      requestData = null;
    }

    // Send the request
    request.send(requestData);
  });
};


/***/ }),

/***/ "./node_modules/axios/lib/axios.js":
/*!*****************************************!*\
  !*** ./node_modules/axios/lib/axios.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./utils */ "./node_modules/axios/lib/utils.js");
var bind = __webpack_require__(/*! ./helpers/bind */ "./node_modules/axios/lib/helpers/bind.js");
var Axios = __webpack_require__(/*! ./core/Axios */ "./node_modules/axios/lib/core/Axios.js");
var mergeConfig = __webpack_require__(/*! ./core/mergeConfig */ "./node_modules/axios/lib/core/mergeConfig.js");
var defaults = __webpack_require__(/*! ./defaults */ "./node_modules/axios/lib/defaults.js");

/**
 * Create an instance of Axios
 *
 * @param {Object} defaultConfig The default config for the instance
 * @return {Axios} A new instance of Axios
 */
function createInstance(defaultConfig) {
  var context = new Axios(defaultConfig);
  var instance = bind(Axios.prototype.request, context);

  // Copy axios.prototype to instance
  utils.extend(instance, Axios.prototype, context);

  // Copy context to instance
  utils.extend(instance, context);

  return instance;
}

// Create the default instance to be exported
var axios = createInstance(defaults);

// Expose Axios class to allow class inheritance
axios.Axios = Axios;

// Factory for creating new instances
axios.create = function create(instanceConfig) {
  return createInstance(mergeConfig(axios.defaults, instanceConfig));
};

// Expose Cancel & CancelToken
axios.Cancel = __webpack_require__(/*! ./cancel/Cancel */ "./node_modules/axios/lib/cancel/Cancel.js");
axios.CancelToken = __webpack_require__(/*! ./cancel/CancelToken */ "./node_modules/axios/lib/cancel/CancelToken.js");
axios.isCancel = __webpack_require__(/*! ./cancel/isCancel */ "./node_modules/axios/lib/cancel/isCancel.js");

// Expose all/spread
axios.all = function all(promises) {
  return Promise.all(promises);
};
axios.spread = __webpack_require__(/*! ./helpers/spread */ "./node_modules/axios/lib/helpers/spread.js");

module.exports = axios;

// Allow use of default import syntax in TypeScript
module.exports.default = axios;


/***/ }),

/***/ "./node_modules/axios/lib/cancel/Cancel.js":
/*!*************************************************!*\
  !*** ./node_modules/axios/lib/cancel/Cancel.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * A `Cancel` is an object that is thrown when an operation is canceled.
 *
 * @class
 * @param {string=} message The message.
 */
function Cancel(message) {
  this.message = message;
}

Cancel.prototype.toString = function toString() {
  return 'Cancel' + (this.message ? ': ' + this.message : '');
};

Cancel.prototype.__CANCEL__ = true;

module.exports = Cancel;


/***/ }),

/***/ "./node_modules/axios/lib/cancel/CancelToken.js":
/*!******************************************************!*\
  !*** ./node_modules/axios/lib/cancel/CancelToken.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var Cancel = __webpack_require__(/*! ./Cancel */ "./node_modules/axios/lib/cancel/Cancel.js");

/**
 * A `CancelToken` is an object that can be used to request cancellation of an operation.
 *
 * @class
 * @param {Function} executor The executor function.
 */
function CancelToken(executor) {
  if (typeof executor !== 'function') {
    throw new TypeError('executor must be a function.');
  }

  var resolvePromise;
  this.promise = new Promise(function promiseExecutor(resolve) {
    resolvePromise = resolve;
  });

  var token = this;
  executor(function cancel(message) {
    if (token.reason) {
      // Cancellation has already been requested
      return;
    }

    token.reason = new Cancel(message);
    resolvePromise(token.reason);
  });
}

/**
 * Throws a `Cancel` if cancellation has been requested.
 */
CancelToken.prototype.throwIfRequested = function throwIfRequested() {
  if (this.reason) {
    throw this.reason;
  }
};

/**
 * Returns an object that contains a new `CancelToken` and a function that, when called,
 * cancels the `CancelToken`.
 */
CancelToken.source = function source() {
  var cancel;
  var token = new CancelToken(function executor(c) {
    cancel = c;
  });
  return {
    token: token,
    cancel: cancel
  };
};

module.exports = CancelToken;


/***/ }),

/***/ "./node_modules/axios/lib/cancel/isCancel.js":
/*!***************************************************!*\
  !*** ./node_modules/axios/lib/cancel/isCancel.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function isCancel(value) {
  return !!(value && value.__CANCEL__);
};


/***/ }),

/***/ "./node_modules/axios/lib/core/Axios.js":
/*!**********************************************!*\
  !*** ./node_modules/axios/lib/core/Axios.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");
var buildURL = __webpack_require__(/*! ../helpers/buildURL */ "./node_modules/axios/lib/helpers/buildURL.js");
var InterceptorManager = __webpack_require__(/*! ./InterceptorManager */ "./node_modules/axios/lib/core/InterceptorManager.js");
var dispatchRequest = __webpack_require__(/*! ./dispatchRequest */ "./node_modules/axios/lib/core/dispatchRequest.js");
var mergeConfig = __webpack_require__(/*! ./mergeConfig */ "./node_modules/axios/lib/core/mergeConfig.js");

/**
 * Create a new instance of Axios
 *
 * @param {Object} instanceConfig The default config for the instance
 */
function Axios(instanceConfig) {
  this.defaults = instanceConfig;
  this.interceptors = {
    request: new InterceptorManager(),
    response: new InterceptorManager()
  };
}

/**
 * Dispatch a request
 *
 * @param {Object} config The config specific for this request (merged with this.defaults)
 */
Axios.prototype.request = function request(config) {
  /*eslint no-param-reassign:0*/
  // Allow for axios('example/url'[, config]) a la fetch API
  if (typeof config === 'string') {
    config = arguments[1] || {};
    config.url = arguments[0];
  } else {
    config = config || {};
  }

  config = mergeConfig(this.defaults, config);

  // Set config.method
  if (config.method) {
    config.method = config.method.toLowerCase();
  } else if (this.defaults.method) {
    config.method = this.defaults.method.toLowerCase();
  } else {
    config.method = 'get';
  }

  // Hook up interceptors middleware
  var chain = [dispatchRequest, undefined];
  var promise = Promise.resolve(config);

  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {
    chain.unshift(interceptor.fulfilled, interceptor.rejected);
  });

  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {
    chain.push(interceptor.fulfilled, interceptor.rejected);
  });

  while (chain.length) {
    promise = promise.then(chain.shift(), chain.shift());
  }

  return promise;
};

Axios.prototype.getUri = function getUri(config) {
  config = mergeConfig(this.defaults, config);
  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\?/, '');
};

// Provide aliases for supported request methods
utils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {
  /*eslint func-names:0*/
  Axios.prototype[method] = function(url, config) {
    return this.request(utils.merge(config || {}, {
      method: method,
      url: url
    }));
  };
});

utils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {
  /*eslint func-names:0*/
  Axios.prototype[method] = function(url, data, config) {
    return this.request(utils.merge(config || {}, {
      method: method,
      url: url,
      data: data
    }));
  };
});

module.exports = Axios;


/***/ }),

/***/ "./node_modules/axios/lib/core/InterceptorManager.js":
/*!***********************************************************!*\
  !*** ./node_modules/axios/lib/core/InterceptorManager.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

function InterceptorManager() {
  this.handlers = [];
}

/**
 * Add a new interceptor to the stack
 *
 * @param {Function} fulfilled The function to handle `then` for a `Promise`
 * @param {Function} rejected The function to handle `reject` for a `Promise`
 *
 * @return {Number} An ID used to remove interceptor later
 */
InterceptorManager.prototype.use = function use(fulfilled, rejected) {
  this.handlers.push({
    fulfilled: fulfilled,
    rejected: rejected
  });
  return this.handlers.length - 1;
};

/**
 * Remove an interceptor from the stack
 *
 * @param {Number} id The ID that was returned by `use`
 */
InterceptorManager.prototype.eject = function eject(id) {
  if (this.handlers[id]) {
    this.handlers[id] = null;
  }
};

/**
 * Iterate over all the registered interceptors
 *
 * This method is particularly useful for skipping over any
 * interceptors that may have become `null` calling `eject`.
 *
 * @param {Function} fn The function to call for each interceptor
 */
InterceptorManager.prototype.forEach = function forEach(fn) {
  utils.forEach(this.handlers, function forEachHandler(h) {
    if (h !== null) {
      fn(h);
    }
  });
};

module.exports = InterceptorManager;


/***/ }),

/***/ "./node_modules/axios/lib/core/buildFullPath.js":
/*!******************************************************!*\
  !*** ./node_modules/axios/lib/core/buildFullPath.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var isAbsoluteURL = __webpack_require__(/*! ../helpers/isAbsoluteURL */ "./node_modules/axios/lib/helpers/isAbsoluteURL.js");
var combineURLs = __webpack_require__(/*! ../helpers/combineURLs */ "./node_modules/axios/lib/helpers/combineURLs.js");

/**
 * Creates a new URL by combining the baseURL with the requestedURL,
 * only when the requestedURL is not already an absolute URL.
 * If the requestURL is absolute, this function returns the requestedURL untouched.
 *
 * @param {string} baseURL The base URL
 * @param {string} requestedURL Absolute or relative URL to combine
 * @returns {string} The combined full path
 */
module.exports = function buildFullPath(baseURL, requestedURL) {
  if (baseURL && !isAbsoluteURL(requestedURL)) {
    return combineURLs(baseURL, requestedURL);
  }
  return requestedURL;
};


/***/ }),

/***/ "./node_modules/axios/lib/core/createError.js":
/*!****************************************************!*\
  !*** ./node_modules/axios/lib/core/createError.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var enhanceError = __webpack_require__(/*! ./enhanceError */ "./node_modules/axios/lib/core/enhanceError.js");

/**
 * Create an Error with the specified message, config, error code, request and response.
 *
 * @param {string} message The error message.
 * @param {Object} config The config.
 * @param {string} [code] The error code (for example, 'ECONNABORTED').
 * @param {Object} [request] The request.
 * @param {Object} [response] The response.
 * @returns {Error} The created error.
 */
module.exports = function createError(message, config, code, request, response) {
  var error = new Error(message);
  return enhanceError(error, config, code, request, response);
};


/***/ }),

/***/ "./node_modules/axios/lib/core/dispatchRequest.js":
/*!********************************************************!*\
  !*** ./node_modules/axios/lib/core/dispatchRequest.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");
var transformData = __webpack_require__(/*! ./transformData */ "./node_modules/axios/lib/core/transformData.js");
var isCancel = __webpack_require__(/*! ../cancel/isCancel */ "./node_modules/axios/lib/cancel/isCancel.js");
var defaults = __webpack_require__(/*! ../defaults */ "./node_modules/axios/lib/defaults.js");

/**
 * Throws a `Cancel` if cancellation has been requested.
 */
function throwIfCancellationRequested(config) {
  if (config.cancelToken) {
    config.cancelToken.throwIfRequested();
  }
}

/**
 * Dispatch a request to the server using the configured adapter.
 *
 * @param {object} config The config that is to be used for the request
 * @returns {Promise} The Promise to be fulfilled
 */
module.exports = function dispatchRequest(config) {
  throwIfCancellationRequested(config);

  // Ensure headers exist
  config.headers = config.headers || {};

  // Transform request data
  config.data = transformData(
    config.data,
    config.headers,
    config.transformRequest
  );

  // Flatten headers
  config.headers = utils.merge(
    config.headers.common || {},
    config.headers[config.method] || {},
    config.headers
  );

  utils.forEach(
    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],
    function cleanHeaderConfig(method) {
      delete config.headers[method];
    }
  );

  var adapter = config.adapter || defaults.adapter;

  return adapter(config).then(function onAdapterResolution(response) {
    throwIfCancellationRequested(config);

    // Transform response data
    response.data = transformData(
      response.data,
      response.headers,
      config.transformResponse
    );

    return response;
  }, function onAdapterRejection(reason) {
    if (!isCancel(reason)) {
      throwIfCancellationRequested(config);

      // Transform response data
      if (reason && reason.response) {
        reason.response.data = transformData(
          reason.response.data,
          reason.response.headers,
          config.transformResponse
        );
      }
    }

    return Promise.reject(reason);
  });
};


/***/ }),

/***/ "./node_modules/axios/lib/core/enhanceError.js":
/*!*****************************************************!*\
  !*** ./node_modules/axios/lib/core/enhanceError.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Update an Error with the specified config, error code, and response.
 *
 * @param {Error} error The error to update.
 * @param {Object} config The config.
 * @param {string} [code] The error code (for example, 'ECONNABORTED').
 * @param {Object} [request] The request.
 * @param {Object} [response] The response.
 * @returns {Error} The error.
 */
module.exports = function enhanceError(error, config, code, request, response) {
  error.config = config;
  if (code) {
    error.code = code;
  }

  error.request = request;
  error.response = response;
  error.isAxiosError = true;

  error.toJSON = function() {
    return {
      // Standard
      message: this.message,
      name: this.name,
      // Microsoft
      description: this.description,
      number: this.number,
      // Mozilla
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      // Axios
      config: this.config,
      code: this.code
    };
  };
  return error;
};


/***/ }),

/***/ "./node_modules/axios/lib/core/mergeConfig.js":
/*!****************************************************!*\
  !*** ./node_modules/axios/lib/core/mergeConfig.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ../utils */ "./node_modules/axios/lib/utils.js");

/**
 * Config-specific merge-function which creates a new config-object
 * by merging two configuration objects together.
 *
 * @param {Object} config1
 * @param {Object} config2
 * @returns {Object} New object resulting from merging config2 to config1
 */
module.exports = function mergeConfig(config1, config2) {
  // eslint-disable-next-line no-param-reassign
  config2 = config2 || {};
  var config = {};

  var valueFromConfig2Keys = ['url', 'method', 'params', 'data'];
  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy'];
  var defaultToConfig2Keys = [
    'baseURL', 'url', 'transformRequest', 'transformResponse', 'paramsSerializer',
    'timeout', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',
    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress',
    'maxContentLength', 'validateStatus', 'maxRedirects', 'httpAgent',
    'httpsAgent', 'cancelToken', 'socketPath'
  ];

  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {
    if (typeof config2[prop] !== 'undefined') {
      config[prop] = config2[prop];
    }
  });

  utils.forEach(mergeDeepPropertiesKeys, function mergeDeepProperties(prop) {
    if (utils.isObject(config2[prop])) {
      config[prop] = utils.deepMerge(config1[prop], config2[prop]);
    } else if (typeof config2[prop] !== 'undefined') {
      config[prop] = config2[prop];
    } else if (utils.isObject(config1[prop])) {
      config[prop] = utils.deepMerge(config1[prop]);
    } else if (typeof config1[prop] !== 'undefined') {
      config[prop] = config1[prop];
    }
  });

  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {
    if (typeof config2[prop] !== 'undefined') {
      config[prop] = config2[prop];
    } else if (typeof config1[prop] !== 'undefined') {
      config[prop] = config1[prop];
    }
  });

  var axiosKeys = valueFromConfig2Keys
    .concat(mergeDeepPropertiesKeys)
    .concat(defaultToConfig2Keys);

  var otherKeys = Object
    .keys(config2)
    .filter(function filterAxiosKeys(key) {
      return axiosKeys.indexOf(key) === -1;
    });

  utils.forEach(otherKeys, function otherKeysDefaultToConfig2(prop) {
    if (typeof config2[prop] !== 'undefined') {
      config[prop] = config2[prop];
    } else if (typeof config1[prop] !== 'undefined') {
      config[prop] = config1[prop];
    }
  });

  return config;
};


/***/ }),

/***/ "./node_modules/axios/lib/core/settle.js":
/*!***********************************************!*\
  !*** ./node_modules/axios/lib/core/settle.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var createError = __webpack_require__(/*! ./createError */ "./node_modules/axios/lib/core/createError.js");

/**
 * Resolve or reject a Promise based on response status.
 *
 * @param {Function} resolve A function that resolves the promise.
 * @param {Function} reject A function that rejects the promise.
 * @param {object} response The response.
 */
module.exports = function settle(resolve, reject, response) {
  var validateStatus = response.config.validateStatus;
  if (!validateStatus || validateStatus(response.status)) {
    resolve(response);
  } else {
    reject(createError(
      'Request failed with status code ' + response.status,
      response.config,
      null,
      response.request,
      response
    ));
  }
};


/***/ }),

/***/ "./node_modules/axios/lib/core/transformData.js":
/*!******************************************************!*\
  !*** ./node_modules/axios/lib/core/transformData.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

/**
 * Transform the data for a request or a response
 *
 * @param {Object|String} data The data to be transformed
 * @param {Array} headers The headers for the request or response
 * @param {Array|Function} fns A single function or Array of functions
 * @returns {*} The resulting transformed data
 */
module.exports = function transformData(data, headers, fns) {
  /*eslint no-param-reassign:0*/
  utils.forEach(fns, function transform(fn) {
    data = fn(data, headers);
  });

  return data;
};


/***/ }),

/***/ "./node_modules/axios/lib/defaults.js":
/*!********************************************!*\
  !*** ./node_modules/axios/lib/defaults.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process) {

var utils = __webpack_require__(/*! ./utils */ "./node_modules/axios/lib/utils.js");
var normalizeHeaderName = __webpack_require__(/*! ./helpers/normalizeHeaderName */ "./node_modules/axios/lib/helpers/normalizeHeaderName.js");

var DEFAULT_CONTENT_TYPE = {
  'Content-Type': 'application/x-www-form-urlencoded'
};

function setContentTypeIfUnset(headers, value) {
  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {
    headers['Content-Type'] = value;
  }
}

function getDefaultAdapter() {
  var adapter;
  if (typeof XMLHttpRequest !== 'undefined') {
    // For browsers use XHR adapter
    adapter = __webpack_require__(/*! ./adapters/xhr */ "./node_modules/axios/lib/adapters/xhr.js");
  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {
    // For node use HTTP adapter
    adapter = __webpack_require__(/*! ./adapters/http */ "./node_modules/axios/lib/adapters/xhr.js");
  }
  return adapter;
}

var defaults = {
  adapter: getDefaultAdapter(),

  transformRequest: [function transformRequest(data, headers) {
    normalizeHeaderName(headers, 'Accept');
    normalizeHeaderName(headers, 'Content-Type');
    if (utils.isFormData(data) ||
      utils.isArrayBuffer(data) ||
      utils.isBuffer(data) ||
      utils.isStream(data) ||
      utils.isFile(data) ||
      utils.isBlob(data)
    ) {
      return data;
    }
    if (utils.isArrayBufferView(data)) {
      return data.buffer;
    }
    if (utils.isURLSearchParams(data)) {
      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');
      return data.toString();
    }
    if (utils.isObject(data)) {
      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');
      return JSON.stringify(data);
    }
    return data;
  }],

  transformResponse: [function transformResponse(data) {
    /*eslint no-param-reassign:0*/
    if (typeof data === 'string') {
      try {
        data = JSON.parse(data);
      } catch (e) { /* Ignore */ }
    }
    return data;
  }],

  /**
   * A timeout in milliseconds to abort a request. If set to 0 (default) a
   * timeout is not created.
   */
  timeout: 0,

  xsrfCookieName: 'XSRF-TOKEN',
  xsrfHeaderName: 'X-XSRF-TOKEN',

  maxContentLength: -1,

  validateStatus: function validateStatus(status) {
    return status >= 200 && status < 300;
  }
};

defaults.headers = {
  common: {
    'Accept': 'application/json, text/plain, */*'
  }
};

utils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {
  defaults.headers[method] = {};
});

utils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {
  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);
});

module.exports = defaults;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/axios/lib/helpers/bind.js":
/*!************************************************!*\
  !*** ./node_modules/axios/lib/helpers/bind.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function bind(fn, thisArg) {
  return function wrap() {
    var args = new Array(arguments.length);
    for (var i = 0; i < args.length; i++) {
      args[i] = arguments[i];
    }
    return fn.apply(thisArg, args);
  };
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/buildURL.js":
/*!****************************************************!*\
  !*** ./node_modules/axios/lib/helpers/buildURL.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

function encode(val) {
  return encodeURIComponent(val).
    replace(/%40/gi, '@').
    replace(/%3A/gi, ':').
    replace(/%24/g, '$').
    replace(/%2C/gi, ',').
    replace(/%20/g, '+').
    replace(/%5B/gi, '[').
    replace(/%5D/gi, ']');
}

/**
 * Build a URL by appending params to the end
 *
 * @param {string} url The base of the url (e.g., http://www.google.com)
 * @param {object} [params] The params to be appended
 * @returns {string} The formatted url
 */
module.exports = function buildURL(url, params, paramsSerializer) {
  /*eslint no-param-reassign:0*/
  if (!params) {
    return url;
  }

  var serializedParams;
  if (paramsSerializer) {
    serializedParams = paramsSerializer(params);
  } else if (utils.isURLSearchParams(params)) {
    serializedParams = params.toString();
  } else {
    var parts = [];

    utils.forEach(params, function serialize(val, key) {
      if (val === null || typeof val === 'undefined') {
        return;
      }

      if (utils.isArray(val)) {
        key = key + '[]';
      } else {
        val = [val];
      }

      utils.forEach(val, function parseValue(v) {
        if (utils.isDate(v)) {
          v = v.toISOString();
        } else if (utils.isObject(v)) {
          v = JSON.stringify(v);
        }
        parts.push(encode(key) + '=' + encode(v));
      });
    });

    serializedParams = parts.join('&');
  }

  if (serializedParams) {
    var hashmarkIndex = url.indexOf('#');
    if (hashmarkIndex !== -1) {
      url = url.slice(0, hashmarkIndex);
    }

    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;
  }

  return url;
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/combineURLs.js":
/*!*******************************************************!*\
  !*** ./node_modules/axios/lib/helpers/combineURLs.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Creates a new URL by combining the specified URLs
 *
 * @param {string} baseURL The base URL
 * @param {string} relativeURL The relative URL
 * @returns {string} The combined URL
 */
module.exports = function combineURLs(baseURL, relativeURL) {
  return relativeURL
    ? baseURL.replace(/\/+$/, '') + '/' + relativeURL.replace(/^\/+/, '')
    : baseURL;
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/cookies.js":
/*!***************************************************!*\
  !*** ./node_modules/axios/lib/helpers/cookies.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

module.exports = (
  utils.isStandardBrowserEnv() ?

  // Standard browser envs support document.cookie
    (function standardBrowserEnv() {
      return {
        write: function write(name, value, expires, path, domain, secure) {
          var cookie = [];
          cookie.push(name + '=' + encodeURIComponent(value));

          if (utils.isNumber(expires)) {
            cookie.push('expires=' + new Date(expires).toGMTString());
          }

          if (utils.isString(path)) {
            cookie.push('path=' + path);
          }

          if (utils.isString(domain)) {
            cookie.push('domain=' + domain);
          }

          if (secure === true) {
            cookie.push('secure');
          }

          document.cookie = cookie.join('; ');
        },

        read: function read(name) {
          var match = document.cookie.match(new RegExp('(^|;\\s*)(' + name + ')=([^;]*)'));
          return (match ? decodeURIComponent(match[3]) : null);
        },

        remove: function remove(name) {
          this.write(name, '', Date.now() - 86400000);
        }
      };
    })() :

  // Non standard browser env (web workers, react-native) lack needed support.
    (function nonStandardBrowserEnv() {
      return {
        write: function write() {},
        read: function read() { return null; },
        remove: function remove() {}
      };
    })()
);


/***/ }),

/***/ "./node_modules/axios/lib/helpers/isAbsoluteURL.js":
/*!*********************************************************!*\
  !*** ./node_modules/axios/lib/helpers/isAbsoluteURL.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Determines whether the specified URL is absolute
 *
 * @param {string} url The URL to test
 * @returns {boolean} True if the specified URL is absolute, otherwise false
 */
module.exports = function isAbsoluteURL(url) {
  // A URL is considered absolute if it begins with "<scheme>://" or "//" (protocol-relative URL).
  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed
  // by any combination of letters, digits, plus, period, or hyphen.
  return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(url);
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/isURLSameOrigin.js":
/*!***********************************************************!*\
  !*** ./node_modules/axios/lib/helpers/isURLSameOrigin.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

module.exports = (
  utils.isStandardBrowserEnv() ?

  // Standard browser envs have full support of the APIs needed to test
  // whether the request URL is of the same origin as current location.
    (function standardBrowserEnv() {
      var msie = /(msie|trident)/i.test(navigator.userAgent);
      var urlParsingNode = document.createElement('a');
      var originURL;

      /**
    * Parse a URL to discover it's components
    *
    * @param {String} url The URL to be parsed
    * @returns {Object}
    */
      function resolveURL(url) {
        var href = url;

        if (msie) {
        // IE needs attribute set twice to normalize properties
          urlParsingNode.setAttribute('href', href);
          href = urlParsingNode.href;
        }

        urlParsingNode.setAttribute('href', href);

        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils
        return {
          href: urlParsingNode.href,
          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',
          host: urlParsingNode.host,
          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\?/, '') : '',
          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',
          hostname: urlParsingNode.hostname,
          port: urlParsingNode.port,
          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?
            urlParsingNode.pathname :
            '/' + urlParsingNode.pathname
        };
      }

      originURL = resolveURL(window.location.href);

      /**
    * Determine if a URL shares the same origin as the current location
    *
    * @param {String} requestURL The URL to test
    * @returns {boolean} True if URL shares the same origin, otherwise false
    */
      return function isURLSameOrigin(requestURL) {
        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;
        return (parsed.protocol === originURL.protocol &&
            parsed.host === originURL.host);
      };
    })() :

  // Non standard browser envs (web workers, react-native) lack needed support.
    (function nonStandardBrowserEnv() {
      return function isURLSameOrigin() {
        return true;
      };
    })()
);


/***/ }),

/***/ "./node_modules/axios/lib/helpers/normalizeHeaderName.js":
/*!***************************************************************!*\
  !*** ./node_modules/axios/lib/helpers/normalizeHeaderName.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ../utils */ "./node_modules/axios/lib/utils.js");

module.exports = function normalizeHeaderName(headers, normalizedName) {
  utils.forEach(headers, function processHeader(value, name) {
    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {
      headers[normalizedName] = value;
      delete headers[name];
    }
  });
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/parseHeaders.js":
/*!********************************************************!*\
  !*** ./node_modules/axios/lib/helpers/parseHeaders.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

// Headers whose duplicates are ignored by node
// c.f. https://nodejs.org/api/http.html#http_message_headers
var ignoreDuplicateOf = [
  'age', 'authorization', 'content-length', 'content-type', 'etag',
  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',
  'last-modified', 'location', 'max-forwards', 'proxy-authorization',
  'referer', 'retry-after', 'user-agent'
];

/**
 * Parse headers into an object
 *
 * ```
 * Date: Wed, 27 Aug 2014 08:58:49 GMT
 * Content-Type: application/json
 * Connection: keep-alive
 * Transfer-Encoding: chunked
 * ```
 *
 * @param {String} headers Headers needing to be parsed
 * @returns {Object} Headers parsed into an object
 */
module.exports = function parseHeaders(headers) {
  var parsed = {};
  var key;
  var val;
  var i;

  if (!headers) { return parsed; }

  utils.forEach(headers.split('\n'), function parser(line) {
    i = line.indexOf(':');
    key = utils.trim(line.substr(0, i)).toLowerCase();
    val = utils.trim(line.substr(i + 1));

    if (key) {
      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {
        return;
      }
      if (key === 'set-cookie') {
        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);
      } else {
        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;
      }
    }
  });

  return parsed;
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/spread.js":
/*!**************************************************!*\
  !*** ./node_modules/axios/lib/helpers/spread.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Syntactic sugar for invoking a function and expanding an array for arguments.
 *
 * Common use case would be to use `Function.prototype.apply`.
 *
 *  ```js
 *  function f(x, y, z) {}
 *  var args = [1, 2, 3];
 *  f.apply(null, args);
 *  ```
 *
 * With `spread` this example can be re-written.
 *
 *  ```js
 *  spread(function(x, y, z) {})([1, 2, 3]);
 *  ```
 *
 * @param {Function} callback
 * @returns {Function}
 */
module.exports = function spread(callback) {
  return function wrap(arr) {
    return callback.apply(null, arr);
  };
};


/***/ }),

/***/ "./node_modules/axios/lib/utils.js":
/*!*****************************************!*\
  !*** ./node_modules/axios/lib/utils.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var bind = __webpack_require__(/*! ./helpers/bind */ "./node_modules/axios/lib/helpers/bind.js");

/*global toString:true*/

// utils is a library of generic helper functions non-specific to axios

var toString = Object.prototype.toString;

/**
 * Determine if a value is an Array
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is an Array, otherwise false
 */
function isArray(val) {
  return toString.call(val) === '[object Array]';
}

/**
 * Determine if a value is undefined
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if the value is undefined, otherwise false
 */
function isUndefined(val) {
  return typeof val === 'undefined';
}

/**
 * Determine if a value is a Buffer
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Buffer, otherwise false
 */
function isBuffer(val) {
  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)
    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);
}

/**
 * Determine if a value is an ArrayBuffer
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is an ArrayBuffer, otherwise false
 */
function isArrayBuffer(val) {
  return toString.call(val) === '[object ArrayBuffer]';
}

/**
 * Determine if a value is a FormData
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is an FormData, otherwise false
 */
function isFormData(val) {
  return (typeof FormData !== 'undefined') && (val instanceof FormData);
}

/**
 * Determine if a value is a view on an ArrayBuffer
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false
 */
function isArrayBufferView(val) {
  var result;
  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {
    result = ArrayBuffer.isView(val);
  } else {
    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);
  }
  return result;
}

/**
 * Determine if a value is a String
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a String, otherwise false
 */
function isString(val) {
  return typeof val === 'string';
}

/**
 * Determine if a value is a Number
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Number, otherwise false
 */
function isNumber(val) {
  return typeof val === 'number';
}

/**
 * Determine if a value is an Object
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is an Object, otherwise false
 */
function isObject(val) {
  return val !== null && typeof val === 'object';
}

/**
 * Determine if a value is a Date
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Date, otherwise false
 */
function isDate(val) {
  return toString.call(val) === '[object Date]';
}

/**
 * Determine if a value is a File
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a File, otherwise false
 */
function isFile(val) {
  return toString.call(val) === '[object File]';
}

/**
 * Determine if a value is a Blob
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Blob, otherwise false
 */
function isBlob(val) {
  return toString.call(val) === '[object Blob]';
}

/**
 * Determine if a value is a Function
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Function, otherwise false
 */
function isFunction(val) {
  return toString.call(val) === '[object Function]';
}

/**
 * Determine if a value is a Stream
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Stream, otherwise false
 */
function isStream(val) {
  return isObject(val) && isFunction(val.pipe);
}

/**
 * Determine if a value is a URLSearchParams object
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a URLSearchParams object, otherwise false
 */
function isURLSearchParams(val) {
  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;
}

/**
 * Trim excess whitespace off the beginning and end of a string
 *
 * @param {String} str The String to trim
 * @returns {String} The String freed of excess whitespace
 */
function trim(str) {
  return str.replace(/^\s*/, '').replace(/\s*$/, '');
}

/**
 * Determine if we're running in a standard browser environment
 *
 * This allows axios to run in a web worker, and react-native.
 * Both environments support XMLHttpRequest, but not fully standard globals.
 *
 * web workers:
 *  typeof window -> undefined
 *  typeof document -> undefined
 *
 * react-native:
 *  navigator.product -> 'ReactNative'
 * nativescript
 *  navigator.product -> 'NativeScript' or 'NS'
 */
function isStandardBrowserEnv() {
  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||
                                           navigator.product === 'NativeScript' ||
                                           navigator.product === 'NS')) {
    return false;
  }
  return (
    typeof window !== 'undefined' &&
    typeof document !== 'undefined'
  );
}

/**
 * Iterate over an Array or an Object invoking a function for each item.
 *
 * If `obj` is an Array callback will be called passing
 * the value, index, and complete array for each item.
 *
 * If 'obj' is an Object callback will be called passing
 * the value, key, and complete object for each property.
 *
 * @param {Object|Array} obj The object to iterate
 * @param {Function} fn The callback to invoke for each item
 */
function forEach(obj, fn) {
  // Don't bother if no value provided
  if (obj === null || typeof obj === 'undefined') {
    return;
  }

  // Force an array if not already something iterable
  if (typeof obj !== 'object') {
    /*eslint no-param-reassign:0*/
    obj = [obj];
  }

  if (isArray(obj)) {
    // Iterate over array values
    for (var i = 0, l = obj.length; i < l; i++) {
      fn.call(null, obj[i], i, obj);
    }
  } else {
    // Iterate over object keys
    for (var key in obj) {
      if (Object.prototype.hasOwnProperty.call(obj, key)) {
        fn.call(null, obj[key], key, obj);
      }
    }
  }
}

/**
 * Accepts varargs expecting each argument to be an object, then
 * immutably merges the properties of each object and returns result.
 *
 * When multiple objects contain the same key the later object in
 * the arguments list will take precedence.
 *
 * Example:
 *
 * ```js
 * var result = merge({foo: 123}, {foo: 456});
 * console.log(result.foo); // outputs 456
 * ```
 *
 * @param {Object} obj1 Object to merge
 * @returns {Object} Result of all merge properties
 */
function merge(/* obj1, obj2, obj3, ... */) {
  var result = {};
  function assignValue(val, key) {
    if (typeof result[key] === 'object' && typeof val === 'object') {
      result[key] = merge(result[key], val);
    } else {
      result[key] = val;
    }
  }

  for (var i = 0, l = arguments.length; i < l; i++) {
    forEach(arguments[i], assignValue);
  }
  return result;
}

/**
 * Function equal to merge with the difference being that no reference
 * to original objects is kept.
 *
 * @see merge
 * @param {Object} obj1 Object to merge
 * @returns {Object} Result of all merge properties
 */
function deepMerge(/* obj1, obj2, obj3, ... */) {
  var result = {};
  function assignValue(val, key) {
    if (typeof result[key] === 'object' && typeof val === 'object') {
      result[key] = deepMerge(result[key], val);
    } else if (typeof val === 'object') {
      result[key] = deepMerge({}, val);
    } else {
      result[key] = val;
    }
  }

  for (var i = 0, l = arguments.length; i < l; i++) {
    forEach(arguments[i], assignValue);
  }
  return result;
}

/**
 * Extends object a by mutably adding to it the properties of object b.
 *
 * @param {Object} a The object to be extended
 * @param {Object} b The object to copy properties from
 * @param {Object} thisArg The object to bind function to
 * @return {Object} The resulting value of object a
 */
function extend(a, b, thisArg) {
  forEach(b, function assignValue(val, key) {
    if (thisArg && typeof val === 'function') {
      a[key] = bind(val, thisArg);
    } else {
      a[key] = val;
    }
  });
  return a;
}

module.exports = {
  isArray: isArray,
  isArrayBuffer: isArrayBuffer,
  isBuffer: isBuffer,
  isFormData: isFormData,
  isArrayBufferView: isArrayBufferView,
  isString: isString,
  isNumber: isNumber,
  isObject: isObject,
  isUndefined: isUndefined,
  isDate: isDate,
  isFile: isFile,
  isBlob: isBlob,
  isFunction: isFunction,
  isStream: isStream,
  isURLSearchParams: isURLSearchParams,
  isStandardBrowserEnv: isStandardBrowserEnv,
  forEach: forEach,
  merge: merge,
  deepMerge: deepMerge,
  extend: extend,
  trim: trim
};


/***/ }),

/***/ "./node_modules/firebase/app/index.js":
/*!********************************************!*\
  !*** ./node_modules/firebase/app/index.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

__webpack_require__(/*! @firebase/polyfill */ "./node_modules/@firebase/polyfill/dist/esm/index.js");
module.exports = __webpack_require__(/*! @firebase/app */ "./node_modules/@firebase/app/dist/esm/index.js").default;


/***/ }),

/***/ "./node_modules/firebase/auth/index.js":
/*!*********************************************!*\
  !*** ./node_modules/firebase/auth/index.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

__webpack_require__(/*! @firebase/auth */ "./node_modules/@firebase/auth/dist/auth.js");


/***/ }),

/***/ "./node_modules/firebase/database/index.js":
/*!*************************************************!*\
  !*** ./node_modules/firebase/database/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

module.exports = __webpack_require__(/*! @firebase/database */ "./node_modules/@firebase/database/dist/cjs/index.js");


/***/ }),

/***/ "./node_modules/firebase/index.js":
/*!****************************************!*\
  !*** ./node_modules/firebase/index.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var firebase = __webpack_require__(/*! ./app */ "./node_modules/firebase/app/index.js");
__webpack_require__(/*! ./auth */ "./node_modules/firebase/auth/index.js");
__webpack_require__(/*! ./database */ "./node_modules/firebase/database/index.js");
__webpack_require__(/*! ./messaging */ "./node_modules/firebase/messaging/index.js");
__webpack_require__(/*! ./storage */ "./node_modules/firebase/storage/index.js");

module.exports = firebase;


/***/ }),

/***/ "./node_modules/firebase/messaging/index.js":
/*!**************************************************!*\
  !*** ./node_modules/firebase/messaging/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

__webpack_require__(/*! @firebase/messaging */ "./node_modules/@firebase/messaging/dist/esm/index.js");


/***/ }),

/***/ "./node_modules/firebase/storage/index.js":
/*!************************************************!*\
  !*** ./node_modules/firebase/storage/index.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

__webpack_require__(/*! @firebase/storage */ "./node_modules/@firebase/storage/dist/esm/index.js");


/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };


/***/ }),

/***/ "./node_modules/promise-polyfill/promise.js":
/*!**************************************************!*\
  !*** ./node_modules/promise-polyfill/promise.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(setImmediate) {(function (root) {

  // Store setTimeout reference so promise-polyfill will be unaffected by
  // other code modifying setTimeout (like sinon.useFakeTimers())
  var setTimeoutFunc = setTimeout;

  function noop() {}
  
  // Polyfill for Function.prototype.bind
  function bind(fn, thisArg) {
    return function () {
      fn.apply(thisArg, arguments);
    };
  }

  function Promise(fn) {
    if (!(this instanceof Promise)) throw new TypeError('Promises must be constructed via new');
    if (typeof fn !== 'function') throw new TypeError('not a function');
    this._state = 0;
    this._handled = false;
    this._value = undefined;
    this._deferreds = [];

    doResolve(fn, this);
  }

  function handle(self, deferred) {
    while (self._state === 3) {
      self = self._value;
    }
    if (self._state === 0) {
      self._deferreds.push(deferred);
      return;
    }
    self._handled = true;
    Promise._immediateFn(function () {
      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;
      if (cb === null) {
        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);
        return;
      }
      var ret;
      try {
        ret = cb(self._value);
      } catch (e) {
        reject(deferred.promise, e);
        return;
      }
      resolve(deferred.promise, ret);
    });
  }

  function resolve(self, newValue) {
    try {
      // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure
      if (newValue === self) throw new TypeError('A promise cannot be resolved with itself.');
      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {
        var then = newValue.then;
        if (newValue instanceof Promise) {
          self._state = 3;
          self._value = newValue;
          finale(self);
          return;
        } else if (typeof then === 'function') {
          doResolve(bind(then, newValue), self);
          return;
        }
      }
      self._state = 1;
      self._value = newValue;
      finale(self);
    } catch (e) {
      reject(self, e);
    }
  }

  function reject(self, newValue) {
    self._state = 2;
    self._value = newValue;
    finale(self);
  }

  function finale(self) {
    if (self._state === 2 && self._deferreds.length === 0) {
      Promise._immediateFn(function() {
        if (!self._handled) {
          Promise._unhandledRejectionFn(self._value);
        }
      });
    }

    for (var i = 0, len = self._deferreds.length; i < len; i++) {
      handle(self, self._deferreds[i]);
    }
    self._deferreds = null;
  }

  function Handler(onFulfilled, onRejected, promise) {
    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;
    this.onRejected = typeof onRejected === 'function' ? onRejected : null;
    this.promise = promise;
  }

  /**
   * Take a potentially misbehaving resolver function and make sure
   * onFulfilled and onRejected are only called once.
   *
   * Makes no guarantees about asynchrony.
   */
  function doResolve(fn, self) {
    var done = false;
    try {
      fn(function (value) {
        if (done) return;
        done = true;
        resolve(self, value);
      }, function (reason) {
        if (done) return;
        done = true;
        reject(self, reason);
      });
    } catch (ex) {
      if (done) return;
      done = true;
      reject(self, ex);
    }
  }

  Promise.prototype['catch'] = function (onRejected) {
    return this.then(null, onRejected);
  };

  Promise.prototype.then = function (onFulfilled, onRejected) {
    var prom = new (this.constructor)(noop);

    handle(this, new Handler(onFulfilled, onRejected, prom));
    return prom;
  };

  Promise.all = function (arr) {
    return new Promise(function (resolve, reject) {
      if (!arr || typeof arr.length === 'undefined') throw new TypeError('Promise.all accepts an array');
      var args = Array.prototype.slice.call(arr);
      if (args.length === 0) return resolve([]);
      var remaining = args.length;

      function res(i, val) {
        try {
          if (val && (typeof val === 'object' || typeof val === 'function')) {
            var then = val.then;
            if (typeof then === 'function') {
              then.call(val, function (val) {
                res(i, val);
              }, reject);
              return;
            }
          }
          args[i] = val;
          if (--remaining === 0) {
            resolve(args);
          }
        } catch (ex) {
          reject(ex);
        }
      }

      for (var i = 0; i < args.length; i++) {
        res(i, args[i]);
      }
    });
  };

  Promise.resolve = function (value) {
    if (value && typeof value === 'object' && value.constructor === Promise) {
      return value;
    }

    return new Promise(function (resolve) {
      resolve(value);
    });
  };

  Promise.reject = function (value) {
    return new Promise(function (resolve, reject) {
      reject(value);
    });
  };

  Promise.race = function (values) {
    return new Promise(function (resolve, reject) {
      for (var i = 0, len = values.length; i < len; i++) {
        values[i].then(resolve, reject);
      }
    });
  };

  // Use polyfill for setImmediate for performance gains
  Promise._immediateFn = (typeof setImmediate === 'function' && function (fn) { setImmediate(fn); }) ||
    function (fn) {
      setTimeoutFunc(fn, 0);
    };

  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {
    if (typeof console !== 'undefined' && console) {
      console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console
    }
  };

  /**
   * Set the immediate function to execute callbacks
   * @param fn {function} Function to execute
   * @deprecated
   */
  Promise._setImmediateFn = function _setImmediateFn(fn) {
    Promise._immediateFn = fn;
  };

  /**
   * Change the function to execute on unhandled rejection
   * @param {function} fn Function to execute on unhandled rejection
   * @deprecated
   */
  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {
    Promise._unhandledRejectionFn = fn;
  };
  
  if ( true && module.exports) {
    module.exports = Promise;
  } else if (!root.Promise) {
    root.Promise = Promise;
  }

})(this);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../timers-browserify/main.js */ "./node_modules/timers-browserify/main.js").setImmediate))

/***/ }),

/***/ "./node_modules/setimmediate/setImmediate.js":
/*!***************************************************!*\
  !*** ./node_modules/setimmediate/setImmediate.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {
    "use strict";

    if (global.setImmediate) {
        return;
    }

    var nextHandle = 1; // Spec says greater than zero
    var tasksByHandle = {};
    var currentlyRunningATask = false;
    var doc = global.document;
    var registerImmediate;

    function setImmediate(callback) {
      // Callback can either be a function or a string
      if (typeof callback !== "function") {
        callback = new Function("" + callback);
      }
      // Copy function arguments
      var args = new Array(arguments.length - 1);
      for (var i = 0; i < args.length; i++) {
          args[i] = arguments[i + 1];
      }
      // Store and register the task
      var task = { callback: callback, args: args };
      tasksByHandle[nextHandle] = task;
      registerImmediate(nextHandle);
      return nextHandle++;
    }

    function clearImmediate(handle) {
        delete tasksByHandle[handle];
    }

    function run(task) {
        var callback = task.callback;
        var args = task.args;
        switch (args.length) {
        case 0:
            callback();
            break;
        case 1:
            callback(args[0]);
            break;
        case 2:
            callback(args[0], args[1]);
            break;
        case 3:
            callback(args[0], args[1], args[2]);
            break;
        default:
            callback.apply(undefined, args);
            break;
        }
    }

    function runIfPresent(handle) {
        // From the spec: "Wait until any invocations of this algorithm started before this one have completed."
        // So if we're currently running a task, we'll need to delay this invocation.
        if (currentlyRunningATask) {
            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a
            // "too much recursion" error.
            setTimeout(runIfPresent, 0, handle);
        } else {
            var task = tasksByHandle[handle];
            if (task) {
                currentlyRunningATask = true;
                try {
                    run(task);
                } finally {
                    clearImmediate(handle);
                    currentlyRunningATask = false;
                }
            }
        }
    }

    function installNextTickImplementation() {
        registerImmediate = function(handle) {
            process.nextTick(function () { runIfPresent(handle); });
        };
    }

    function canUsePostMessage() {
        // The test against `importScripts` prevents this implementation from being installed inside a web worker,
        // where `global.postMessage` means something completely different and can't be used for this purpose.
        if (global.postMessage && !global.importScripts) {
            var postMessageIsAsynchronous = true;
            var oldOnMessage = global.onmessage;
            global.onmessage = function() {
                postMessageIsAsynchronous = false;
            };
            global.postMessage("", "*");
            global.onmessage = oldOnMessage;
            return postMessageIsAsynchronous;
        }
    }

    function installPostMessageImplementation() {
        // Installs an event handler on `global` for the `message` event: see
        // * https://developer.mozilla.org/en/DOM/window.postMessage
        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages

        var messagePrefix = "setImmediate$" + Math.random() + "$";
        var onGlobalMessage = function(event) {
            if (event.source === global &&
                typeof event.data === "string" &&
                event.data.indexOf(messagePrefix) === 0) {
                runIfPresent(+event.data.slice(messagePrefix.length));
            }
        };

        if (global.addEventListener) {
            global.addEventListener("message", onGlobalMessage, false);
        } else {
            global.attachEvent("onmessage", onGlobalMessage);
        }

        registerImmediate = function(handle) {
            global.postMessage(messagePrefix + handle, "*");
        };
    }

    function installMessageChannelImplementation() {
        var channel = new MessageChannel();
        channel.port1.onmessage = function(event) {
            var handle = event.data;
            runIfPresent(handle);
        };

        registerImmediate = function(handle) {
            channel.port2.postMessage(handle);
        };
    }

    function installReadyStateChangeImplementation() {
        var html = doc.documentElement;
        registerImmediate = function(handle) {
            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted
            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.
            var script = doc.createElement("script");
            script.onreadystatechange = function () {
                runIfPresent(handle);
                script.onreadystatechange = null;
                html.removeChild(script);
                script = null;
            };
            html.appendChild(script);
        };
    }

    function installSetTimeoutImplementation() {
        registerImmediate = function(handle) {
            setTimeout(runIfPresent, 0, handle);
        };
    }

    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.
    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);
    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;

    // Don't get fooled by e.g. browserify environments.
    if ({}.toString.call(global.process) === "[object process]") {
        // For Node.js before 0.9
        installNextTickImplementation();

    } else if (canUsePostMessage()) {
        // For non-IE10 modern browsers
        installPostMessageImplementation();

    } else if (global.MessageChannel) {
        // For web workers, where supported
        installMessageChannelImplementation();

    } else if (doc && "onreadystatechange" in doc.createElement("script")) {
        // For IE 68
        installReadyStateChangeImplementation();

    } else {
        // For older browsers
        installSetTimeoutImplementation();
    }

    attachTo.setImmediate = setImmediate;
    attachTo.clearImmediate = clearImmediate;
}(typeof self === "undefined" ? typeof global === "undefined" ? this : global : self));

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js"), __webpack_require__(/*! ./../process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/timers-browserify/main.js":
/*!************************************************!*\
  !*** ./node_modules/timers-browserify/main.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var scope = (typeof global !== "undefined" && global) ||
            (typeof self !== "undefined" && self) ||
            window;
var apply = Function.prototype.apply;

// DOM APIs, for completeness

exports.setTimeout = function() {
  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);
};
exports.setInterval = function() {
  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);
};
exports.clearTimeout =
exports.clearInterval = function(timeout) {
  if (timeout) {
    timeout.close();
  }
};

function Timeout(id, clearFn) {
  this._id = id;
  this._clearFn = clearFn;
}
Timeout.prototype.unref = Timeout.prototype.ref = function() {};
Timeout.prototype.close = function() {
  this._clearFn.call(scope, this._id);
};

// Does not start the time, just sets up the members needed.
exports.enroll = function(item, msecs) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = msecs;
};

exports.unenroll = function(item) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = -1;
};

exports._unrefActive = exports.active = function(item) {
  clearTimeout(item._idleTimeoutId);

  var msecs = item._idleTimeout;
  if (msecs >= 0) {
    item._idleTimeoutId = setTimeout(function onTimeout() {
      if (item._onTimeout)
        item._onTimeout();
    }, msecs);
  }
};

// setimmediate attaches itself to the global object
__webpack_require__(/*! setimmediate */ "./node_modules/setimmediate/setImmediate.js");
// On some exotic environments, it's not clear which object `setimmediate` was
// able to install onto.  Search each possibility in the same order as the
// `setimmediate` library.
exports.setImmediate = (typeof self !== "undefined" && self.setImmediate) ||
                       (typeof global !== "undefined" && global.setImmediate) ||
                       (this && this.setImmediate);
exports.clearImmediate = (typeof self !== "undefined" && self.clearImmediate) ||
                         (typeof global !== "undefined" && global.clearImmediate) ||
                         (this && this.clearImmediate);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "./src/client/app.ts":
/*!***************************!*\
  !*** ./src/client/app.ts ***!
  \***************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils_helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/helpers */ "./src/client/utils/helpers.ts");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }



var firebase = __webpack_require__(/*! firebase */ "./node_modules/firebase/index.js");

var InitializeFirebase = function InitializeFirebase() {
  _classCallCheck(this, InitializeFirebase);

  // console.log('admin - ', admin);
  var firebaseConfig = {
    apiKey: "AIzaSyChdiU0uyXYye-bk8aRYqT1lqJFWeTZm_s",
    authDomain: "auth-24107.firebaseapp.com",
    databaseURL: "https://auth-24107.firebaseio.com",
    projectId: "auth-24107",
    storageBucket: "auth-24107.appspot.com",
    messagingSenderId: "512747461237",
    appId: "1:512747461237:web:3e83acf34bfc188e36363c",
    measurementId: "G-YKL3KFXBKL"
  }; // Initialize Firebase

  firebase.initializeApp(firebaseConfig); // admin.initializeApp(firebaseConfig);
  // const db = admin.firestore();
  // firebase.analytics();
};

var fb = new InitializeFirebase();
Object(_utils_helpers__WEBPACK_IMPORTED_MODULE_0__["redirect"])('signup');

/***/ }),

/***/ "./src/client/components/baseComponent.ts":
/*!************************************************!*\
  !*** ./src/client/components/baseComponent.ts ***!
  \************************************************/
/*! exports provided: Component */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Component", function() { return Component; });
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

// import { Database } from "../database/database.js";
var Component = function Component(templateId, hostId, newElementId) {
  _classCallCheck(this, Component);

  _defineProperty(this, "templateEl", void 0);

  _defineProperty(this, "hostEl", void 0);

  _defineProperty(this, "element", void 0);

  this.templateEl = document.getElementById(templateId);
  this.hostEl = document.getElementById(hostId);
  var importedNode = document.importNode(this.templateEl.content, true);
  this.element = importedNode.firstElementChild;
  this.hostEl.insertAdjacentElement('afterbegin', this.element);

  if (newElementId) {
    this.hostEl.id = newElementId;
  }
};

/***/ }),

/***/ "./src/client/components/homePanel.ts":
/*!********************************************!*\
  !*** ./src/client/components/homePanel.ts ***!
  \********************************************/
/*! exports provided: HomePanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HomePanel", function() { return HomePanel; });
/* harmony import */ var _baseComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseComponent */ "./src/client/components/baseComponent.ts");
/* harmony import */ var _utils_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/error */ "./src/client/utils/error.ts");
function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }




var firebase = __webpack_require__(/*! firebase */ "./node_modules/firebase/index.js");

var axios = __webpack_require__(/*! axios */ "./node_modules/axios/index.js");

var HomePanel = /*#__PURE__*/function (_Component) {
  _inherits(HomePanel, _Component);

  var _super = _createSuper(HomePanel);

  function HomePanel() {
    var _this;

    _classCallCheck(this, HomePanel);

    _this = _super.call(this, 'home-page', 'home', "homePanel");

    _defineProperty(_assertThisInitialized(_this), "name", "");

    _this.getCurrentLoggedInUserData();

    _this.element.querySelector('#logout-btn').addEventListener('submit', _this.LogOutUser.bind(_assertThisInitialized(_this)));

    return _this;
  }

  _createClass(HomePanel, [{
    key: "setUserDetails",
    value: function setUserDetails(userData) {
      this.name = userData.name;
      this.hostEl.querySelector("#userName").innerHTML = "Hi " + this.name;
    }
  }, {
    key: "getCurrentLoggedInUserData",
    value: function getCurrentLoggedInUserData() {
      var _this2 = this;

      var userUIDObj = {
        uid: firebase.auth().currentUser.uid
      };
      axios.post('http://localhost:4000/getUserData', userUIDObj).then(function (response) {
        _this2.setUserDetails(response.data);
      })["catch"](function (error) {
        Object(_utils_error__WEBPACK_IMPORTED_MODULE_1__["showError"])('Error while fetching user Data', error);
      });
    }
  }, {
    key: "removeHomePanel",
    value: function removeHomePanel() {
      this.element.classList.add("hide");
    }
  }, {
    key: "LogOutUser",
    value: function LogOutUser() {
      this.removeHomePanel();
      firebase.auth().signOut().then(function (res) {
        console.log('res - ', res); // redirect('login');
      })["catch"](function (err) {
        Object(_utils_error__WEBPACK_IMPORTED_MODULE_1__["showError"])('Error while signout', err);
      });
    }
  }]);

  return HomePanel;
}(_baseComponent__WEBPACK_IMPORTED_MODULE_0__["Component"]);

/***/ }),

/***/ "./src/client/components/loginPanel.ts":
/*!*********************************************!*\
  !*** ./src/client/components/loginPanel.ts ***!
  \*********************************************/
/*! exports provided: LoginPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoginPanel", function() { return LoginPanel; });
/* harmony import */ var _baseComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseComponent */ "./src/client/components/baseComponent.ts");
/* harmony import */ var _utils_validations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/validations */ "./src/client/utils/validations.ts");
/* harmony import */ var _utils_error__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/error */ "./src/client/utils/error.ts");
/* harmony import */ var _utils_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/helpers */ "./src/client/utils/helpers.ts");
function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }






var firebase = __webpack_require__(/*! firebase */ "./node_modules/firebase/index.js");

var LoginPanel = /*#__PURE__*/function (_Component) {
  _inherits(LoginPanel, _Component);

  var _super = _createSuper(LoginPanel);

  function LoginPanel() {
    var _this$element$querySe;

    var _this;

    _classCallCheck(this, LoginPanel);

    _this = _super.call(this, 'login', 'login-panel', 'loginPanel');

    _defineProperty(_assertThisInitialized(_this), "email", void 0);

    _defineProperty(_assertThisInitialized(_this), "password", void 0);

    _this.email = _this.element.querySelector("#si-email");
    _this.password = _this.element.querySelector("#si-password");

    _this.element.addEventListener('submit', _this.submitEventHandeler.bind(_assertThisInitialized(_this)));

    (_this$element$querySe = _this.element.querySelector('#signup-btn')) === null || _this$element$querySe === void 0 ? void 0 : _this$element$querySe.addEventListener('click', _this.redirectToSignUpPanel.bind(_assertThisInitialized(_this)));
    return _this;
  }

  _createClass(LoginPanel, [{
    key: "redirectToSignUpPanel",
    value: function redirectToSignUpPanel() {
      this.removeLoginPanel();
      Object(_utils_helpers__WEBPACK_IMPORTED_MODULE_3__["redirect"])('signup');
    }
  }, {
    key: "removeLoginPanel",
    value: function removeLoginPanel() {
      this.clearInput();
      this.hostEl.classList.add("hide");
    }
  }, {
    key: "clearInput",
    value: function clearInput() {
      this.email.value = "";
      this.password.value = "";
    }
  }, {
    key: "getUserInput",
    value: function getUserInput() {
      var emailObj = {
        value: this.email.value,
        required: true
      };
      var passwordObj = {
        value: this.password.value,
        required: true,
        maxLength: 12,
        minLength: 6
      };

      if (!Object(_utils_validations__WEBPACK_IMPORTED_MODULE_1__["isFieldValid"])(emailObj) || !Object(_utils_validations__WEBPACK_IMPORTED_MODULE_1__["isFieldValid"])(passwordObj)) {
        alert('Invalid data supplied');
        return;
      } else {
        return [emailObj.value, passwordObj.value];
      }
    }
  }, {
    key: "submitEventHandeler",
    value: function submitEventHandeler(event) {
      event.preventDefault();
      var userInput = this.getUserInput();

      if (userInput) {
        var _userInput = _slicedToArray(userInput, 2),
            userEmail = _userInput[0],
            userPassword = _userInput[1];

        this.login(userEmail, userPassword);
        this.clearInput();
      }
    }
  }, {
    key: "login",
    value: function login(email, password) {
      var _this2 = this;

      firebase.auth().signInWithEmailAndPassword(email, password).then(function (res) {
        if (typeof res.uid === "string") {
          document.getElementById("sign-in-btn").disabled = true;
          document.getElementById("alert-msg").classList.add("success-alert");
          document.getElementById("alert-msg").innerHTML = "Logging In ....";
          setTimeout(function () {
            _this2.removeLoginPanel();

            Object(_utils_helpers__WEBPACK_IMPORTED_MODULE_3__["redirect"])('home');
          }, 2000);
        }
      })["catch"](function (error) {
        Object(_utils_error__WEBPACK_IMPORTED_MODULE_2__["showError"])('Error while logging in', error);
      });
    }
  }]);

  return LoginPanel;
}(_baseComponent__WEBPACK_IMPORTED_MODULE_0__["Component"]);

/***/ }),

/***/ "./src/client/components/signupPanel.ts":
/*!**********************************************!*\
  !*** ./src/client/components/signupPanel.ts ***!
  \**********************************************/
/*! exports provided: SignUpPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SignUpPanel", function() { return SignUpPanel; });
/* harmony import */ var _baseComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseComponent */ "./src/client/components/baseComponent.ts");
/* harmony import */ var _utils_validations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/validations */ "./src/client/utils/validations.ts");
/* harmony import */ var _utils_error__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/error */ "./src/client/utils/error.ts");
/* harmony import */ var _utils_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/helpers */ "./src/client/utils/helpers.ts");
function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }






var firebase = __webpack_require__(/*! firebase */ "./node_modules/firebase/index.js");

var axios = __webpack_require__(/*! axios */ "./node_modules/axios/index.js");

var SignUpPanel = /*#__PURE__*/function (_Component) {
  _inherits(SignUpPanel, _Component);

  var _super = _createSuper(SignUpPanel);

  function SignUpPanel() {
    var _this$element$querySe;

    var _this;

    _classCallCheck(this, SignUpPanel);

    _this = _super.call(this, 'signup', 'signup-panel', 'signupPanel');

    _defineProperty(_assertThisInitialized(_this), "name", void 0);

    _defineProperty(_assertThisInitialized(_this), "email", void 0);

    _defineProperty(_assertThisInitialized(_this), "password", void 0);

    _defineProperty(_assertThisInitialized(_this), "repeatPassword", void 0);

    _this.name = _this.element.querySelector("#su-name");
    _this.email = _this.element.querySelector("#su-email");
    _this.password = _this.element.querySelector("#su-password");
    _this.repeatPassword = _this.element.querySelector("#su-rep-password");

    _this.element.addEventListener('submit', _this.submitEventHandeler.bind(_assertThisInitialized(_this)));

    (_this$element$querySe = _this.element.querySelector('#login-btn')) === null || _this$element$querySe === void 0 ? void 0 : _this$element$querySe.addEventListener('click', _this.redirectToLoginPanel.bind(_assertThisInitialized(_this)));
    return _this;
  }

  _createClass(SignUpPanel, [{
    key: "redirectToLoginPanel",
    value: function redirectToLoginPanel() {
      this.removeSignUpPanel();
      Object(_utils_helpers__WEBPACK_IMPORTED_MODULE_3__["redirect"])('login');
    }
  }, {
    key: "removeSignUpPanel",
    value: function removeSignUpPanel() {
      this.clearInput();
      this.hostEl.classList.add("hide");
    }
  }, {
    key: "clearInput",
    value: function clearInput() {
      this.name.value = "";
      this.email.value = "";
      this.password.value = "";
      this.repeatPassword.value = "";
    }
  }, {
    key: "getUserInput",
    value: function getUserInput() {
      var nameObj = {
        value: this.name.value,
        required: true,
        maxLength: 20,
        minLength: 2
      };
      var emailObj = {
        value: this.email.value,
        required: true
      };
      var passwordObj = {
        value: this.password.value,
        required: true,
        maxLength: 12,
        minLength: 4
      };
      var repeatPasswordObj = {
        value: this.repeatPassword.value,
        required: true,
        maxLength: 12,
        minLength: 4
      };

      if (!Object(_utils_validations__WEBPACK_IMPORTED_MODULE_1__["isFieldValid"])(nameObj) || !Object(_utils_validations__WEBPACK_IMPORTED_MODULE_1__["isFieldValid"])(emailObj) || !Object(_utils_validations__WEBPACK_IMPORTED_MODULE_1__["isFieldValid"])(passwordObj) || !Object(_utils_validations__WEBPACK_IMPORTED_MODULE_1__["isFieldValid"])(passwordObj) || !Object(_utils_validations__WEBPACK_IMPORTED_MODULE_1__["doesPasswordMatch"])(passwordObj.value, repeatPasswordObj.value)) {
        alert('Invalid data supplied');
        return;
      } else {
        return [nameObj.value, emailObj.value, passwordObj.value];
      }
    }
  }, {
    key: "resetOldAlerts",
    value: function resetOldAlerts() {
      document.getElementById("alert-msg").classList.remove('danger-alert');
    }
  }, {
    key: "submitEventHandeler",
    value: function submitEventHandeler(event) {
      this.resetOldAlerts();
      event.preventDefault();
      var userInput = this.getUserInput();

      if (userInput) {
        var _userInput = _slicedToArray(userInput, 3),
            userName = _userInput[0],
            userEmail = _userInput[1],
            userPassword = _userInput[2];

        this.createUser(userName, userEmail, userPassword);
      }
    }
  }, {
    key: "createUser",
    value: function createUser(name, email, password) {
      var _this2 = this;

      firebase.auth().createUserWithEmailAndPassword(email, password).then(function (res) {
        console.log('User created successfully');
        document.getElementById("sign-up-btn").disabled = true;
        document.getElementById("alert-msg").innerHTML = "Account created successfully";
        document.getElementById("alert-msg").classList.add("success-alert");
        setTimeout(function () {
          var user = {
            uid: res.uid.toString(),
            name: name,
            email: email
          };
          axios.post("http://localhost:4000/storeUserData", user).then(function (response) {
            _this2.removeSignUpPanel();

            Object(_utils_helpers__WEBPACK_IMPORTED_MODULE_3__["redirect"])('home');
          })["catch"](function (error) {
            console.log(error);
          });
        }, 2000);
      })["catch"](function (error) {
        document.getElementById("alert-msg").innerHTML = error.message;
        document.getElementById("alert-msg").classList.add("danger-alert");
        Object(_utils_error__WEBPACK_IMPORTED_MODULE_2__["showError"])('Error while creating user', error);
      });
    }
  }]);

  return SignUpPanel;
}(_baseComponent__WEBPACK_IMPORTED_MODULE_0__["Component"]);

/***/ }),

/***/ "./src/client/utils/error.ts":
/*!***********************************!*\
  !*** ./src/client/utils/error.ts ***!
  \***********************************/
/*! exports provided: showError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showError", function() { return showError; });
function showError(errMsg, error) {
  console.log(errMsg, error);
  throw new Error(errMsg);
}

/***/ }),

/***/ "./src/client/utils/helpers.ts":
/*!*************************************!*\
  !*** ./src/client/utils/helpers.ts ***!
  \*************************************/
/*! exports provided: redirect */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "redirect", function() { return redirect; });
/* harmony import */ var _components_loginPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/loginPanel */ "./src/client/components/loginPanel.ts");
/* harmony import */ var _components_signupPanel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/signupPanel */ "./src/client/components/signupPanel.ts");
/* harmony import */ var _components_homePanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/homePanel */ "./src/client/components/homePanel.ts");



function redirect(redirectTo) {
  if (redirectTo === "login") {
    if (document.getElementById('loginPanel')) {
      document.getElementById('loginPanel').classList.remove('hide');
    } else {
      new _components_loginPanel__WEBPACK_IMPORTED_MODULE_0__["LoginPanel"]();
    }
  } else if (redirectTo === "signup") {
    if (document.getElementById('signupPanel')) {
      document.getElementById('signupPanel').classList.remove('hide');
    } else {
      new _components_signupPanel__WEBPACK_IMPORTED_MODULE_1__["SignUpPanel"]();
    }
  } else if (redirectTo === "home") {
    if (document.getElementById('homePanel')) {
      document.getElementById('homePanel').classList.remove('hide');
    } else {
      new _components_homePanel__WEBPACK_IMPORTED_MODULE_2__["HomePanel"]();
    }
  }
}

/***/ }),

/***/ "./src/client/utils/validations.ts":
/*!*****************************************!*\
  !*** ./src/client/utils/validations.ts ***!
  \*****************************************/
/*! exports provided: isFieldValid, doesPasswordMatch */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isFieldValid", function() { return isFieldValid; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "doesPasswordMatch", function() { return doesPasswordMatch; });
function isFieldValid(validatableInput) {
  var isValid = true;

  if (validatableInput.required) {
    isValid = isValid && validatableInput.value.toString().trim().length !== 0;
  }

  if (validatableInput.minLength != null && typeof validatableInput.value === 'string') {
    isValid = isValid && validatableInput.value.length >= validatableInput.minLength;
  }

  if (validatableInput.maxLength != null && typeof validatableInput.value === 'string') {
    isValid = isValid && validatableInput.value.length <= validatableInput.maxLength;
  }

  return isValid;
}
function doesPasswordMatch(password, repeatedPassword) {
  return password === repeatedPassword ? true : false;
}

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAvZGlzdC9lc20vZGlzdC9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2FwcC9kaXN0L2VzbS9zcmMvZGlzdC9lc20vc3JjL2ZpcmViYXNlQXBwLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYXV0aC9kaXN0L2F1dGguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2luZGV4LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL3NyYy9hcGkvRGF0YVNuYXBzaG90LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL3NyYy9hcGkvRGF0YWJhc2UudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvc3JjL2FwaS9RdWVyeS50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9zcmMvYXBpL1JlZmVyZW5jZS50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9zcmMvYXBpL1RyYW5zYWN0aW9uUmVzdWx0LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL3NyYy9hcGkvaW50ZXJuYWwudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvc3JjL2FwaS9vbkRpc2Nvbm5lY3QudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvc3JjL2FwaS90ZXN0X2FjY2Vzcy50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9zcmMvY29yZS9BdXRoVG9rZW5Qcm92aWRlci50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9zcmMvY29yZS9Db21wb3VuZFdyaXRlLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL3NyYy9jb3JlL1BlcnNpc3RlbnRDb25uZWN0aW9uLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL3NyYy9jb3JlL1JlYWRvbmx5UmVzdENsaWVudC50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9zcmMvY29yZS9SZXBvLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL3NyYy9jb3JlL1JlcG9JbmZvLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL3NyYy9jb3JlL1JlcG9NYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL3NyYy9jb3JlL1JlcG9fdHJhbnNhY3Rpb24udHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvc3JjL2NvcmUvU2VydmVyQWN0aW9ucy50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9zcmMvY29yZS9TbmFwc2hvdEhvbGRlci50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9zcmMvY29yZS9TcGFyc2VTbmFwc2hvdFRyZWUudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvc3JjL2NvcmUvU3luY1BvaW50LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL3NyYy9jb3JlL1N5bmNUcmVlLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL3NyYy9jb3JlL1dyaXRlVHJlZS50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9jb3JlL3NyYy9jb3JlL29wZXJhdGlvbi9BY2tVc2VyV3JpdGUudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS9zcmMvY29yZS9vcGVyYXRpb24vTGlzdGVuQ29tcGxldGUudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS9zcmMvY29yZS9vcGVyYXRpb24vTWVyZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS9zcmMvY29yZS9vcGVyYXRpb24vT3BlcmF0aW9uLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL2NvcmUvc3JjL2NvcmUvb3BlcmF0aW9uL092ZXJ3cml0ZS50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9jb3JlL3NyYy9jb3JlL3NuYXAvQ2hpbGRyZW5Ob2RlLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL2NvcmUvc3JjL2NvcmUvc25hcC9JbmRleE1hcC50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9jb3JlL3NyYy9jb3JlL3NuYXAvTGVhZk5vZGUudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS9zcmMvY29yZS9zbmFwL05vZGUudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS9zcmMvY29yZS9zbmFwL2NoaWxkU2V0LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL2NvcmUvc3JjL2NvcmUvc25hcC9jb21wYXJhdG9ycy50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9jb3JlL3NuYXAvc3JjL2NvcmUvc25hcC9pbmRleGVzL0luZGV4LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL2NvcmUvc25hcC9zcmMvY29yZS9zbmFwL2luZGV4ZXMvS2V5SW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS9zbmFwL3NyYy9jb3JlL3NuYXAvaW5kZXhlcy9QYXRoSW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS9zbmFwL3NyYy9jb3JlL3NuYXAvaW5kZXhlcy9Qcmlvcml0eUluZGV4LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL2NvcmUvc25hcC9zcmMvY29yZS9zbmFwL2luZGV4ZXMvVmFsdWVJbmRleC50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9jb3JlL3NyYy9jb3JlL3NuYXAvbm9kZUZyb21KU09OLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL2NvcmUvc3JjL2NvcmUvc25hcC9zbmFwLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL2NvcmUvc3JjL2NvcmUvc3RhdHMvU3RhdHNDb2xsZWN0aW9uLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL2NvcmUvc3JjL2NvcmUvc3RhdHMvU3RhdHNMaXN0ZW5lci50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9jb3JlL3NyYy9jb3JlL3N0YXRzL1N0YXRzTWFuYWdlci50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9jb3JlL3NyYy9jb3JlL3N0YXRzL1N0YXRzUmVwb3J0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS9zcmMvY29yZS9zdG9yYWdlL0RPTVN0b3JhZ2VXcmFwcGVyLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL2NvcmUvc3JjL2NvcmUvc3RvcmFnZS9NZW1vcnlTdG9yYWdlLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL2NvcmUvc3JjL2NvcmUvc3RvcmFnZS9zdG9yYWdlLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL2NvcmUvc3JjL2NvcmUvdXRpbC9Db3VudGVkU2V0LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL2NvcmUvc3JjL2NvcmUvdXRpbC9FdmVudEVtaXR0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS9zcmMvY29yZS91dGlsL0ltbXV0YWJsZVRyZWUudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS9zcmMvY29yZS91dGlsL05leHRQdXNoSWQudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS9zcmMvY29yZS91dGlsL09ubGluZU1vbml0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS9zcmMvY29yZS91dGlsL1BhdGgudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS9zcmMvY29yZS91dGlsL1NlcnZlclZhbHVlcy50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9jb3JlL3NyYy9jb3JlL3V0aWwvU29ydGVkTWFwLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL2NvcmUvc3JjL2NvcmUvdXRpbC9UcmVlLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL2NvcmUvc3JjL2NvcmUvdXRpbC9WaXNpYmlsaXR5TW9uaXRvci50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9jb3JlL3V0aWwvc3JjL2NvcmUvdXRpbC9saWJzL3BhcnNlci50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9jb3JlL3NyYy9jb3JlL3V0aWwvdXRpbC50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9jb3JlL3NyYy9jb3JlL3V0aWwvdmFsaWRhdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9jb3JlL3NyYy9jb3JlL3ZpZXcvQ2FjaGVOb2RlLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL2NvcmUvc3JjL2NvcmUvdmlldy9DaGFuZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS9zcmMvY29yZS92aWV3L0NoaWxkQ2hhbmdlQWNjdW11bGF0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS9zcmMvY29yZS92aWV3L0NvbXBsZXRlQ2hpbGRTb3VyY2UudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS9zcmMvY29yZS92aWV3L0V2ZW50LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL2NvcmUvc3JjL2NvcmUvdmlldy9FdmVudEdlbmVyYXRvci50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9jb3JlL3NyYy9jb3JlL3ZpZXcvRXZlbnRRdWV1ZS50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9jb3JlL3NyYy9jb3JlL3ZpZXcvRXZlbnRSZWdpc3RyYXRpb24udHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS9zcmMvY29yZS92aWV3L1F1ZXJ5UGFyYW1zLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL2NvcmUvc3JjL2NvcmUvdmlldy9WaWV3LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL2NvcmUvc3JjL2NvcmUvdmlldy9WaWV3Q2FjaGUudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS9zcmMvY29yZS92aWV3L1ZpZXdQcm9jZXNzb3IudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS92aWV3L3NyYy9jb3JlL3ZpZXcvZmlsdGVyL0luZGV4ZWRGaWx0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS92aWV3L3NyYy9jb3JlL3ZpZXcvZmlsdGVyL0xpbWl0ZWRGaWx0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvY29yZS92aWV3L3NyYy9jb3JlL3ZpZXcvZmlsdGVyL1JhbmdlZEZpbHRlci50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2RhdGFiYXNlL2Rpc3QvY2pzL3NyYy9zcmMvcmVhbHRpbWUvQnJvd3NlclBvbGxDb25uZWN0aW9uLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL3NyYy9yZWFsdGltZS9Db25uZWN0aW9uLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZGF0YWJhc2UvZGlzdC9janMvc3JjL3NyYy9yZWFsdGltZS9Db25zdGFudHMudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvc3JjL3JlYWx0aW1lL1RyYW5zcG9ydE1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvc3JjL3JlYWx0aW1lL1dlYlNvY2tldENvbm5lY3Rpb24udHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9kYXRhYmFzZS9kaXN0L2Nqcy9zcmMvcmVhbHRpbWUvc3JjL3JlYWx0aW1lL3BvbGxpbmcvUGFja2V0UmVjZWl2ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9tZXNzYWdpbmcvZGlzdC9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL21lc3NhZ2luZy9kaXN0L2VzbS9zcmMvc3JjL2NvbnRyb2xsZXJzL2NvbnRyb2xsZXItaW50ZXJmYWNlLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbWVzc2FnaW5nL2Rpc3QvZXNtL3NyYy9zcmMvY29udHJvbGxlcnMvc3ctY29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL21lc3NhZ2luZy9kaXN0L2VzbS9zcmMvc3JjL2NvbnRyb2xsZXJzL3dpbmRvdy1jb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbWVzc2FnaW5nL2Rpc3QvZXNtL3NyYy9zcmMvaGVscGVycy9hcnJheS1idWZmZXItdG8tYmFzZTY0LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbWVzc2FnaW5nL2Rpc3QvZXNtL3NyYy9zcmMvbW9kZWxzL2RlZmF1bHQtc3cudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9tZXNzYWdpbmcvZGlzdC9lc20vc3JjL3NyYy9tb2RlbHMvZXJyb3JzLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbWVzc2FnaW5nL2Rpc3QvZXNtL3NyYy9zcmMvbW9kZWxzL2ZjbS1kZXRhaWxzLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbWVzc2FnaW5nL2Rpc3QvZXNtL3NyYy9zcmMvbW9kZWxzL25vdGlmaWNhdGlvbi1wZXJtaXNzaW9uLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbWVzc2FnaW5nL2Rpc3QvZXNtL3NyYy9zcmMvbW9kZWxzL3Rva2VuLW1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9tZXNzYWdpbmcvZGlzdC9lc20vc3JjL3NyYy9tb2RlbHMvd29ya2VyLXBhZ2UtbWVzc2FnZS50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3BvbHlmaWxsL2Rpc3QvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9wb2x5ZmlsbC9kaXN0L2VzbS9zcmMvc3JjL3BvbHlmaWxscy9wcm9taXNlLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvcG9seWZpbGwvZGlzdC9lc20vc3JjL3NyYy9zaGltcy9maW5kLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvcG9seWZpbGwvZGlzdC9lc20vc3JjL3NyYy9zaGltcy9maW5kSW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9zdG9yYWdlL2Rpc3QvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9zdG9yYWdlL2Rpc3QvZXNtL3NyYy9zcmMvaW1wbGVtZW50YXRpb24vYXJncy50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3N0b3JhZ2UvZGlzdC9lc20vc3JjL3NyYy9pbXBsZW1lbnRhdGlvbi9hcnJheS50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3N0b3JhZ2UvZGlzdC9lc20vc3JjL3NyYy9pbXBsZW1lbnRhdGlvbi9hc3luYy50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3N0b3JhZ2UvZGlzdC9lc20vc3JjL3NyYy9pbXBsZW1lbnRhdGlvbi9hdXRod3JhcHBlci50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3N0b3JhZ2UvZGlzdC9lc20vc3JjL3NyYy9pbXBsZW1lbnRhdGlvbi9iYWNrb2ZmLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvc3RvcmFnZS9kaXN0L2VzbS9zcmMvc3JjL2ltcGxlbWVudGF0aW9uL2Jsb2IudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9zdG9yYWdlL2Rpc3QvZXNtL3NyYy9zcmMvaW1wbGVtZW50YXRpb24vY29uc3RhbnRzLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvc3RvcmFnZS9kaXN0L2VzbS9zcmMvc3JjL2ltcGxlbWVudGF0aW9uL2Vycm9yLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvc3RvcmFnZS9kaXN0L2VzbS9zcmMvc3JjL2ltcGxlbWVudGF0aW9uL2ZhaWxyZXF1ZXN0LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvc3RvcmFnZS9kaXN0L2VzbS9zcmMvc3JjL2ltcGxlbWVudGF0aW9uL2ZzLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvc3RvcmFnZS9kaXN0L2VzbS9zcmMvc3JjL2ltcGxlbWVudGF0aW9uL2pzb24udHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9zdG9yYWdlL2Rpc3QvZXNtL3NyYy9zcmMvaW1wbGVtZW50YXRpb24vbG9jYXRpb24udHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9zdG9yYWdlL2Rpc3QvZXNtL3NyYy9zcmMvaW1wbGVtZW50YXRpb24vbWV0YWRhdGEudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9zdG9yYWdlL2Rpc3QvZXNtL3NyYy9zcmMvaW1wbGVtZW50YXRpb24vb2JqZWN0LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvc3RvcmFnZS9kaXN0L2VzbS9zcmMvc3JjL2ltcGxlbWVudGF0aW9uL29ic2VydmVyLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvc3RvcmFnZS9kaXN0L2VzbS9zcmMvc3JjL2ltcGxlbWVudGF0aW9uL3BhdGgudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9zdG9yYWdlL2Rpc3QvZXNtL3NyYy9zcmMvaW1wbGVtZW50YXRpb24vcHJvbWlzZV9leHRlcm5hbC50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3N0b3JhZ2UvZGlzdC9lc20vc3JjL3NyYy9pbXBsZW1lbnRhdGlvbi9yZXF1ZXN0LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvc3RvcmFnZS9kaXN0L2VzbS9zcmMvc3JjL2ltcGxlbWVudGF0aW9uL3JlcXVlc3RpbmZvLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvc3RvcmFnZS9kaXN0L2VzbS9zcmMvc3JjL2ltcGxlbWVudGF0aW9uL3JlcXVlc3RtYXAudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9zdG9yYWdlL2Rpc3QvZXNtL3NyYy9zcmMvaW1wbGVtZW50YXRpb24vcmVxdWVzdHMudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9zdG9yYWdlL2Rpc3QvZXNtL3NyYy9zcmMvaW1wbGVtZW50YXRpb24vc3RyaW5nLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvc3RvcmFnZS9kaXN0L2VzbS9zcmMvc3JjL2ltcGxlbWVudGF0aW9uL3Rhc2tlbnVtcy50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3N0b3JhZ2UvZGlzdC9lc20vc3JjL3NyYy9pbXBsZW1lbnRhdGlvbi90eXBlLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvc3RvcmFnZS9kaXN0L2VzbS9zcmMvc3JjL2ltcGxlbWVudGF0aW9uL3VybC50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3N0b3JhZ2UvZGlzdC9lc20vc3JjL3NyYy9pbXBsZW1lbnRhdGlvbi94aHJpby50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3N0b3JhZ2UvZGlzdC9lc20vc3JjL3NyYy9pbXBsZW1lbnRhdGlvbi94aHJpb19uZXR3b3JrLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvc3RvcmFnZS9kaXN0L2VzbS9zcmMvc3JjL2ltcGxlbWVudGF0aW9uL3hocmlvcG9vbC50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3N0b3JhZ2UvZGlzdC9lc20vc3JjL3JlZmVyZW5jZS50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3N0b3JhZ2UvZGlzdC9lc20vc3JjL3NlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9zdG9yYWdlL2Rpc3QvZXNtL3NyYy90YXNrLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvc3RvcmFnZS9kaXN0L2VzbS9zcmMvdGFza3NuYXBzaG90LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L2luZGV4LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L2Nqcy9zcmMvYXNzZXJ0LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L2Nqcy9zcmMvY29uc3RhbnRzLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L2Nqcy9zcmMvY3J5cHQudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS91dGlsL2Rpc3QvY2pzL3NyYy9kZWVwQ29weS50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9janMvc3JjL2RlZmVycmVkLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L2Nqcy9zcmMvZW52aXJvbm1lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS91dGlsL2Rpc3QvY2pzL3NyYy9lcnJvcnMudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS91dGlsL2Rpc3QvY2pzL3NyYy9oYXNoLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L2Nqcy9zcmMvanNvbi50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9janMvc3JjL2p3dC50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9janMvc3JjL29iai50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9janMvc3JjL3F1ZXJ5LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L2Nqcy9zcmMvc2hhMS50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9janMvc3JjL3N1YnNjcmliZS50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9janMvc3JjL3V0ZjgudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS91dGlsL2Rpc3QvY2pzL3NyYy92YWxpZGF0aW9uLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9heGlvcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2FkYXB0ZXJzL3hoci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2F4aW9zLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY2FuY2VsL0NhbmNlbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9DYW5jZWxUb2tlbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9pc0NhbmNlbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvQXhpb3MuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0ludGVyY2VwdG9yTWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvYnVpbGRGdWxsUGF0aC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvY3JlYXRlRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2Rpc3BhdGNoUmVxdWVzdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvZW5oYW5jZUVycm9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9tZXJnZUNvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvc2V0dGxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS90cmFuc2Zvcm1EYXRhLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvZGVmYXVsdHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2JpbmQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2J1aWxkVVJMLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9jb21iaW5lVVJMcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvY29va2llcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNVUkxTYW1lT3JpZ2luLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9ub3JtYWxpemVIZWFkZXJOYW1lLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9wYXJzZUhlYWRlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3NwcmVhZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL3V0aWxzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9maXJlYmFzZS9hcHAvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2ZpcmViYXNlL2F1dGgvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2ZpcmViYXNlL2RhdGFiYXNlL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9maXJlYmFzZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvbWVzc2FnaW5nL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9maXJlYmFzZS9zdG9yYWdlL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Byb21pc2UtcG9seWZpbGwvcHJvbWlzZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL3NyYy9jbGllbnQvYXBwLnRzIiwid2VicGFjazovLy8uL3NyYy9jbGllbnQvY29tcG9uZW50cy9iYXNlQ29tcG9uZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9jbGllbnQvY29tcG9uZW50cy9ob21lUGFuZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NsaWVudC9jb21wb25lbnRzL2xvZ2luUGFuZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NsaWVudC9jb21wb25lbnRzL3NpZ251cFBhbmVsLnRzIiwid2VicGFjazovLy8uL3NyYy9jbGllbnQvdXRpbHMvZXJyb3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NsaWVudC91dGlscy9oZWxwZXJzLnRzIiwid2VicGFjazovLy8uL3NyYy9jbGllbnQvdXRpbHMvdmFsaWRhdGlvbnMudHMiXSwibmFtZXMiOlsiZmlyZWJhc2UiLCJyZXF1aXJlIiwiSW5pdGlhbGl6ZUZpcmViYXNlIiwiZmlyZWJhc2VDb25maWciLCJhcGlLZXkiLCJhdXRoRG9tYWluIiwiZGF0YWJhc2VVUkwiLCJwcm9qZWN0SWQiLCJzdG9yYWdlQnVja2V0IiwibWVzc2FnaW5nU2VuZGVySWQiLCJhcHBJZCIsIm1lYXN1cmVtZW50SWQiLCJpbml0aWFsaXplQXBwIiwiZmIiLCJyZWRpcmVjdCIsIkNvbXBvbmVudCIsInRlbXBsYXRlSWQiLCJob3N0SWQiLCJuZXdFbGVtZW50SWQiLCJ0ZW1wbGF0ZUVsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImhvc3RFbCIsImltcG9ydGVkTm9kZSIsImltcG9ydE5vZGUiLCJjb250ZW50IiwiZWxlbWVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwiaWQiLCJheGlvcyIsIkhvbWVQYW5lbCIsImdldEN1cnJlbnRMb2dnZWRJblVzZXJEYXRhIiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJMb2dPdXRVc2VyIiwiYmluZCIsInVzZXJEYXRhIiwibmFtZSIsImlubmVySFRNTCIsInVzZXJVSURPYmoiLCJ1aWQiLCJhdXRoIiwiY3VycmVudFVzZXIiLCJwb3N0IiwidGhlbiIsInJlc3BvbnNlIiwic2V0VXNlckRldGFpbHMiLCJkYXRhIiwiZXJyb3IiLCJzaG93RXJyb3IiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmVIb21lUGFuZWwiLCJzaWduT3V0IiwicmVzIiwiY29uc29sZSIsImxvZyIsImVyciIsIkxvZ2luUGFuZWwiLCJlbWFpbCIsInBhc3N3b3JkIiwic3VibWl0RXZlbnRIYW5kZWxlciIsInJlZGlyZWN0VG9TaWduVXBQYW5lbCIsInJlbW92ZUxvZ2luUGFuZWwiLCJjbGVhcklucHV0IiwidmFsdWUiLCJlbWFpbE9iaiIsInJlcXVpcmVkIiwicGFzc3dvcmRPYmoiLCJtYXhMZW5ndGgiLCJtaW5MZW5ndGgiLCJpc0ZpZWxkVmFsaWQiLCJhbGVydCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ1c2VySW5wdXQiLCJnZXRVc2VySW5wdXQiLCJ1c2VyRW1haWwiLCJ1c2VyUGFzc3dvcmQiLCJsb2dpbiIsInNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkIiwiZGlzYWJsZWQiLCJzZXRUaW1lb3V0IiwiU2lnblVwUGFuZWwiLCJyZXBlYXRQYXNzd29yZCIsInJlZGlyZWN0VG9Mb2dpblBhbmVsIiwicmVtb3ZlU2lnblVwUGFuZWwiLCJuYW1lT2JqIiwicmVwZWF0UGFzc3dvcmRPYmoiLCJkb2VzUGFzc3dvcmRNYXRjaCIsInJlbW92ZSIsInJlc2V0T2xkQWxlcnRzIiwidXNlck5hbWUiLCJjcmVhdGVVc2VyIiwiY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkIiwidXNlciIsInRvU3RyaW5nIiwibWVzc2FnZSIsImVyck1zZyIsIkVycm9yIiwicmVkaXJlY3RUbyIsInZhbGlkYXRhYmxlSW5wdXQiLCJpc1ZhbGlkIiwidHJpbSIsImxlbmd0aCIsInJlcGVhdGVkUGFzc3dvcmQiXSwibWFwcGluZ3MiOiI7UUFBQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTs7O1FBR0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLDBDQUEwQyxnQ0FBZ0M7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QUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFDNUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDRixDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7d0JBQ3ZCLENBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7d0JBQzNCLENBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7d0JBQzFCLEdBQUcsQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ3RCLFVBQVUsSUFBSSxDQUFDLENBQUM7WUFDbEIsQ0FBQztRQUNILENBQUM7UUFFRCxxQkFBcUI7UUFDckIsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUM3QixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQ3BELENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDO1FBQzlDLENBQUM7UUFFRCxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFJLENBQUMsR0FBRyxJ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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQ0FBcUM7O0FBRXJDO0FBQ0E7QUFDQTs7QUFFQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLFVBQVU7Ozs7Ozs7Ozs7OztBQ3ZMdEM7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztB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O0FBRUg7O0FBRUQsU0FBT2lDLE9BQVA7QUFDSDtBQUVNLFNBQVNiLGlCQUFULENBQTJCN0IsUUFBM0IsRUFBNkM2QyxnQkFBN0MsRUFBdUU7QUFDMUUsU0FBTzdDLFFBQVEsS0FBSzZDLGdCQUFiLEdBQWdDLElBQWhDLEdBQXVDLEtBQTlDO0FBQ0gsQyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcImRpc3RcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9zcmMvY2xpZW50L2FwcC50c1wiKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlLCBGaXJlYmFzZU5hbWVzcGFjZSB9IGZyb20gJy4vc3JjL2ZpcmViYXNlQXBwJztcblxuZXhwb3J0IHtcbiAgRmlyZWJhc2VBcHAsXG4gIEZpcmViYXNlQXV0aFRva2VuRGF0YSxcbiAgRmlyZWJhc2VOYW1lc3BhY2UsXG4gIEZpcmViYXNlU2VydmljZSxcbiAgRmlyZWJhc2VTZXJ2aWNlRmFjdG9yeSxcbiAgRmlyZWJhc2VTZXJ2aWNlTmFtZXNwYWNlXG59IGZyb20gJy4vc3JjL2ZpcmViYXNlQXBwJztcblxuZXhwb3J0IGNvbnN0IGZpcmViYXNlID0gY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2UoKTtcblxuZXhwb3J0IGRlZmF1bHQgZmlyZWJhc2U7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgY3JlYXRlU3Vic2NyaWJlLCBPYnNlcnZlciwgU3Vic2NyaWJlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHtcbiAgcGF0Y2hQcm9wZXJ0eSxcbiAgZGVlcENvcHksXG4gIGRlZXBFeHRlbmQsXG4gIEVycm9yRmFjdG9yeSxcbiAgRmlyZWJhc2VFcnJvclxufSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlyZWJhc2VBdXRoVG9rZW5EYXRhIHtcbiAgYWNjZXNzVG9rZW46IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaXJlYmFzZUFwcEludGVybmFscyB7XG4gIGdldFRva2VuKHJlZnJlc2hUb2tlbj86IGJvb2xlYW4pOiBQcm9taXNlPEZpcmViYXNlQXV0aFRva2VuRGF0YSB8IG51bGw+O1xuICBnZXRVaWQoKTogc3RyaW5nIHwgbnVsbDtcbiAgYWRkQXV0aFRva2VuTGlzdGVuZXIoZm46ICh0b2tlbjogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZCk6IHZvaWQ7XG4gIHJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyKGZuOiAodG9rZW46IHN0cmluZyB8IG51bGwpID0+IHZvaWQpOiB2b2lkO1xufVxuXG5leHBvcnQgdHlwZSBGaXJlYmFzZU9wdGlvbnMgPSB7XG4gIGFwaUtleT86IHN0cmluZztcbiAgYXV0aERvbWFpbj86IHN0cmluZztcbiAgZGF0YWJhc2VVUkw/OiBzdHJpbmc7XG4gIHByb2plY3RJZD86IHN0cmluZztcbiAgc3RvcmFnZUJ1Y2tldD86IHN0cmluZztcbiAgbWVzc2FnaW5nU2VuZGVySWQ/OiBzdHJpbmc7XG4gIFtuYW1lOiBzdHJpbmddOiBhbnk7XG59O1xuXG4vLyBBbiBpbnN0YW5jZSBvZiB0aGUgZmlyZWJhc2UuQXBwXG5leHBvcnQgaW50ZXJmYWNlIEZpcmViYXNlQXBwIHtcbiAgLyoqXG4gICAqIFRoZSAocmVhZC1vbmx5KSBuYW1lIChpZGVudGlmaWVyKSBmb3IgdGhpcyBBcHAuICdbREVGQVVMVF0nIGlzIHRoZSBkZWZhdWx0XG4gICAqIEFwcC5cbiAgICovXG4gIG5hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIChyZWFkLW9ubHkpIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmcm9tIHRoZSBhcHAgaW5pdGlhbGl6YXRpb24uXG4gICAqL1xuICBvcHRpb25zOiBGaXJlYmFzZU9wdGlvbnM7XG5cbiAgLyoqXG4gICAqIE1ha2UgdGhlIGdpdmVuIEFwcCB1bnVzYWJsZSBhbmQgZnJlZSByZXNvdXJjZXMuXG4gICAqL1xuICBkZWxldGUoKTogUHJvbWlzZTx2b2lkPjtcblxuICBJTlRFUk5BTDogRmlyZWJhc2VBcHBJbnRlcm5hbHM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlyZWJhc2VTZXJ2aWNlSW50ZXJuYWxzIHtcbiAgLyoqXG4gICAqIERlbGV0ZSB0aGUgc2VydmljZSBhbmQgZnJlZSBpdCdzIHJlc291cmNlcyAtIGNhbGxlZCBmcm9tXG4gICAqIGFwcC5kZWxldGUoKS5cbiAgICovXG4gIGRlbGV0ZSgpOiBQcm9taXNlPHZvaWQ+O1xufVxuXG4vLyBTZXJ2aWNlcyBhcmUgZXhwb3NlZCB0aHJvdWdoIGluc3RhbmNlcyAtIGVhY2ggb2Ygd2hpY2ggaXMgYXNzb2NpYXRlZCB3aXRoIGFcbi8vIEZpcmViYXNlQXBwLlxuZXhwb3J0IGludGVyZmFjZSBGaXJlYmFzZVNlcnZpY2Uge1xuICBhcHA6IEZpcmViYXNlQXBwO1xuICBJTlRFUk5BTD86IEZpcmViYXNlU2VydmljZUludGVybmFscztcbn1cblxuZXhwb3J0IHR5cGUgQXBwSG9vayA9IChldmVudDogc3RyaW5nLCBhcHA6IEZpcmViYXNlQXBwKSA9PiB2b2lkO1xuXG4vKipcbiAqIEZpcmViYXNlIFNlcnZpY2VzIGNyZWF0ZSBpbnN0YW5jZXMgZ2l2ZW4gYSBGaXJlYmFzZSBBcHAgaW5zdGFuY2UgYW5kIGNhblxuICogb3B0aW9uYWxseSBhZGQgcHJvcGVydGllcyBhbmQgbWV0aG9kcyB0byBlYWNoIEZpcmViYXNlQXBwIHZpYSB0aGUgZXh0ZW5kQXBwKClcbiAqIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpcmViYXNlU2VydmljZUZhY3Rvcnkge1xuICAoXG4gICAgYXBwOiBGaXJlYmFzZUFwcCxcbiAgICBleHRlbmRBcHA/OiAocHJvcHM6IHsgW3Byb3A6IHN0cmluZ106IGFueSB9KSA9PiB2b2lkLFxuICAgIGluc3RhbmNlU3RyaW5nPzogc3RyaW5nXG4gICk6IEZpcmViYXNlU2VydmljZTtcbn1cblxuLyoqXG4gKiBBbGwgU2VydmljZU5hbWVzcGFjZXMgZXh0ZW5kIGZyb20gRmlyZWJhc2VTZXJ2aWNlTmFtZXNwYWNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmlyZWJhc2VTZXJ2aWNlTmFtZXNwYWNlPFQgZXh0ZW5kcyBGaXJlYmFzZVNlcnZpY2U+IHtcbiAgKGFwcD86IEZpcmViYXNlQXBwKTogVDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaXJlYmFzZUVycm9yRmFjdG9yeTxUPiB7XG4gIGNyZWF0ZShjb2RlOiBULCBkYXRhPzogeyBbcHJvcDogc3RyaW5nXTogYW55IH0pOiBGaXJlYmFzZUVycm9yO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpcmViYXNlRXJyb3JGYWN0b3J5Q2xhc3Mge1xuICBuZXcgKFxuICAgIHNlcnZpY2U6IHN0cmluZyxcbiAgICBzZXJ2aWNlTmFtZTogc3RyaW5nLFxuICAgIGVycm9yczogeyBbY29kZTogc3RyaW5nXTogc3RyaW5nIH1cbiAgKTogRmlyZWJhc2VFcnJvckZhY3Rvcnk8YW55Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaXJlYmFzZU5hbWVzcGFjZSB7XG4gIC8qKlxuICAgKiBDcmVhdGUgKGFuZCBpbnRpYWxpemUpIGEgRmlyZWJhc2VBcHAuXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgdG8gY29uZmlndXJlIHRoZSBzZXJ2aWNlcyB1c2UgaW4gdGhlIEFwcC5cbiAgICogQHBhcmFtIG5hbWUgVGhlIG9wdGlvbmFsIG5hbWUgb2YgdGhlIGFwcCB0byBpbml0aWFsaXplICgnW0RFRkFVTFRdJyBpZlxuICAgKiAgIG5vbmUpXG4gICAqL1xuICBpbml0aWFsaXplQXBwKG9wdGlvbnM6IEZpcmViYXNlT3B0aW9ucywgbmFtZT86IHN0cmluZyk6IEZpcmViYXNlQXBwO1xuXG4gIGFwcDoge1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIGFuIGluc3RhbmNlIG9mIGEgRmlyZWJhc2VBcHAuXG4gICAgICpcbiAgICAgKiBVc2FnZTogZmlyZWJhc2UuYXBwKClcbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBvcHRpb25hbCBuYW1lIG9mIHRoZSBhcHAgdG8gcmV0dXJuICgnW0RFRkFVTFRdJyBpZiBub25lKVxuICAgICAqL1xuICAgIChuYW1lPzogc3RyaW5nKTogRmlyZWJhc2VBcHA7XG5cbiAgICAvKipcbiAgICAgKiBGb3IgdGVzdGluZyBGaXJlYmFzZUFwcCBpbnN0YW5jZXM6XG4gICAgICogICBhcHAoKSBpbnN0YW5jZW9mIGZpcmViYXNlLmFwcC5BcHBcbiAgICAgKiBETyBOT1QgY2FsbCB0aGlzIGNvbnN0dWN0b3IgZGlyZWN0bHkgKHVzZSBmaXJlYmFzZS5hcHAoKSBpbnN0ZWFkKS5cbiAgICAgKi9cbiAgICBBcHA6IEZ1bmN0aW9uO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBIChyZWFkLW9ubHkpIGFycmF5IG9mIGFsbCB0aGUgaW5pdGlhbGl6ZWQgQXBwcy5cbiAgICovXG4gIGFwcHM6IEZpcmViYXNlQXBwW107XG5cbiAgLy8gSW5oZXJpdCB0aGUgdHlwZSBpbmZvcm1hdGlvbiBvZiBvdXIgZXhwb3J0ZWQgUHJvbWlzZSBpbXBsZW1lbnRhdGlvbiBmcm9tXG4gIC8vIGVzNi1wcm9taXNlcy5cbiAgUHJvbWlzZTogdHlwZW9mIFByb21pc2U7XG5cbiAgLy8gVGhlIGN1cnJlbnQgU0RLIHZlcnNpb24gKCcke0pTQ09SRV9WRVJTSU9OfScpLlxuICBTREtfVkVSU0lPTjogc3RyaW5nO1xuXG4gIC8vIFRPRE86IE1pZ3JhdGUgdG8gZmlyZWJhc2UtYXBwLWludGVybmFsLmQudHNcbiAgSU5URVJOQUw6IHtcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBBUEkgdG8gcmVnaXN0ZXIgYSBGaXJlYmFzZSBTZXJ2aWNlIGludG8gdGhlIGZpcmViYXNlIG5hbWVzcGFjZS5cbiAgICAgKlxuICAgICAqIEVhY2ggc2VydmljZSB3aWxsIGNyZWF0ZSBhIGNoaWxkIG5hbWVzcGFjZSAoZmlyZWFzZS5uYW1lKSB3aGljaCBhY3RzIGFzXG4gICAgICogYm90aCBhIG5hbWVzcGFjZSBmb3Igc2VydmljZSBzcGVjaWZpYyBwcm9wZXJ0aWVzLCBhbmQgYWxzbyBhcyBhIHNlcnZpY2VcbiAgICAgKiBhY2Nlc3NvciBmdW5jdGlvbiAoZmlyZWJhc2UubmFtZSgpIG9yIGZpcmViYXNlLm5hbWUoYXBwKSkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgRmlyZWJhc2UgU2VydmljZSBiZWluZyByZWdpc3RlcmVkLlxuICAgICAqIEBwYXJhbSBjcmVhdGVTZXJ2aWNlIEZhY3RvcnkgZnVuY3Rpb24gdG8gY3JlYXRlIGEgc2VydmljZSBpbnN0YW5jZS5cbiAgICAgKiBAcGFyYW0gc2VydmljZVByb3BlcnRpZXMgUHJvcGVydGllcyB0byBjb3B5IHRvIHRoZSBzZXJ2aWNlJ3MgbmFtZXNwYWNlLlxuICAgICAqIEBwYXJhbSBhcHBIb29rIEFsbCBhcHBIb29rcyBjYWxsZWQgYmVmb3JlIGludGlhbGl6ZUFwcCByZXR1cm5zIHRvIGNhbGxlci5cbiAgICAgKiBAcGFyYW0gYWxsb3dNdWx0aXBsZUluc3RhbmNlcyBXaGV0aGVyIHRoZSByZWdpc3RlcmVkIHNlcnZpY2Ugc3VwcG9ydHNcbiAgICAgKiAgIG11bHRpcGxlIGluc3RhbmNlcyBwZXIgYXBwLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgZGVmYXVsdCBpcyBmYWxzZS5cbiAgICAgKi9cbiAgICByZWdpc3RlclNlcnZpY2UoXG4gICAgICBuYW1lOiBzdHJpbmcsXG4gICAgICBjcmVhdGVTZXJ2aWNlOiBGaXJlYmFzZVNlcnZpY2VGYWN0b3J5LFxuICAgICAgc2VydmljZVByb3BlcnRpZXM/OiB7IFtwcm9wOiBzdHJpbmddOiBhbnkgfSxcbiAgICAgIGFwcEhvb2s/OiBBcHBIb29rLFxuICAgICAgYWxsb3dNdWx0aXBsZUluc3RhbmNlcz86IGJvb2xlYW5cbiAgICApOiBGaXJlYmFzZVNlcnZpY2VOYW1lc3BhY2U8RmlyZWJhc2VTZXJ2aWNlPjtcblxuICAgIC8qKlxuICAgICAqIEp1c3QgdXNlZCBmb3IgdGVzdGluZyB0byBzdGFydCBmcm9tIGEgZnJlc2ggbmFtZXNwYWNlLlxuICAgICAqL1xuICAgIGNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlKCk6IEZpcmViYXNlTmFtZXNwYWNlO1xuXG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgQVBJIHRvIGluc3RhbGwgcHJvcGVydGllcyBvbiB0aGUgdG9wLWxldmVsIGZpcmViYXNlIG5hbWVzcGFjZS5cbiAgICAgKiBAcHJvcCBwcm9wcyBUaGUgdG9wIGxldmVsIHByb3BlcnRpZXMgb2YgdGhpcyBvYmplY3QgYXJlIGNvcGllZCB0byB0aGVcbiAgICAgKiAgIG5hbWVzcGFjZS5cbiAgICAgKi9cbiAgICBleHRlbmROYW1lc3BhY2UocHJvcHM6IHsgW3Byb3A6IHN0cmluZ106IGFueSB9KTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFN1YnNjcmliZSBmdW5jdGlvbi4gIEEgcHJveHkgT2JzZXJ2ZXIgaXMgY3JlYXRlZCBzbyB0aGF0XG4gICAgICogZXZlbnRzIGNhbiBiZSBzZW50IHRvIHNpbmdsZSBPYnNlcnZlciB0byBiZSBmYW5uZWQgb3V0IGF1dG9tYXRpY2FsbHkuXG4gICAgICovXG4gICAgY3JlYXRlU3Vic2NyaWJlPFQ+KFxuICAgICAgZXhlY3V0b3I6IChvYnNlcnZlcjogT2JzZXJ2ZXI8VD4pID0+IHZvaWQsXG4gICAgICBvbk5vT2JzZXJ2ZXJzPzogKG9ic2VydmVyOiBPYnNlcnZlcjxUPikgPT4gdm9pZFxuICAgICk6IFN1YnNjcmliZTxUPjtcblxuICAgIC8qKlxuICAgICAqIFV0aWxpdHkgZXhwb3NlZCBmb3IgaW50ZXJuYWwgdGVzdGluZy5cbiAgICAgKi9cbiAgICBkZWVwRXh0ZW5kKHRhcmdldDogYW55LCBzb3VyY2U6IGFueSk6IGFueTtcblxuICAgIC8qKlxuICAgICAqIEludGVybmFsIEFQSSB0byByZW1vdmUgYW4gYXBwIGZyb20gdGhlIGxpc3Qgb2YgcmVnaXN0ZXJlZCBhcHBzLlxuICAgICAqL1xuICAgIHJlbW92ZUFwcChuYW1lOiBzdHJpbmcpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogU2VydmljZSBmYWN0b3JpZXMgZm9yIGVhY2ggcmVnaXN0ZXJlZCBzZXJ2aWNlLlxuICAgICAqL1xuICAgIGZhY3RvcmllczogeyBbbmFtZTogc3RyaW5nXTogRmlyZWJhc2VTZXJ2aWNlRmFjdG9yeSB9O1xuXG4gICAgLypcbiAgICAgKiBDb252ZXJ0IHNlcnZpY2UgbmFtZSB0byBmYWN0b3J5IG5hbWUgdG8gdXNlLlxuICAgICAqL1xuICAgIHVzZUFzU2VydmljZShhcHA6IEZpcmViYXNlQXBwLCBzZXJ2aWNlTmFtZTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFVzZSB0byBjb25zdHJ1Y3QgYWxsIHRocm93biBGaXJlYmFzZUVycm9yJ3MuXG4gICAgICovXG4gICAgRXJyb3JGYWN0b3J5OiBGaXJlYmFzZUVycm9yRmFjdG9yeUNsYXNzO1xuICB9O1xufVxuXG5jb25zdCBjb250YWlucyA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xufTtcblxuY29uc3QgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XG5cbi8vIEFuIGFycmF5IHRvIGNhcHR1cmUgbGlzdGVuZXJzIGJlZm9yZSB0aGUgdHJ1ZSBhdXRoIGZ1bmN0aW9uc1xuLy8gZXhpc3RcbmxldCB0b2tlbkxpc3RlbmVycyA9IFtdO1xuXG4vKipcbiAqIEdsb2JhbCBjb250ZXh0IG9iamVjdCBmb3IgYSBjb2xsZWN0aW9uIG9mIHNlcnZpY2VzIHVzaW5nXG4gKiBhIHNoYXJlZCBhdXRoZW50aWNhdGlvbiBzdGF0ZS5cbiAqL1xuY2xhc3MgRmlyZWJhc2VBcHBJbXBsIGltcGxlbWVudHMgRmlyZWJhc2VBcHAge1xuICBwcml2YXRlIG9wdGlvbnNfOiBGaXJlYmFzZU9wdGlvbnM7XG4gIHByaXZhdGUgbmFtZV86IHN0cmluZztcbiAgcHJpdmF0ZSBpc0RlbGV0ZWRfID0gZmFsc2U7XG4gIHByaXZhdGUgc2VydmljZXNfOiB7XG4gICAgW25hbWU6IHN0cmluZ106IHtcbiAgICAgIFtzZXJ2aWNlTmFtZTogc3RyaW5nXTogRmlyZWJhc2VTZXJ2aWNlO1xuICAgIH07XG4gIH0gPSB7fTtcblxuICBwdWJsaWMgSU5URVJOQUw7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgb3B0aW9uczogRmlyZWJhc2VPcHRpb25zLFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBwcml2YXRlIGZpcmViYXNlXzogRmlyZWJhc2VOYW1lc3BhY2VcbiAgKSB7XG4gICAgdGhpcy5uYW1lXyA9IG5hbWU7XG4gICAgdGhpcy5vcHRpb25zXyA9IGRlZXBDb3B5PEZpcmViYXNlT3B0aW9ucz4ob3B0aW9ucyk7XG4gICAgdGhpcy5JTlRFUk5BTCA9IHtcbiAgICAgIGdldFVpZDogKCkgPT4gbnVsbCxcbiAgICAgIGdldFRva2VuOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICBhZGRBdXRoVG9rZW5MaXN0ZW5lcjogKGNhbGxiYWNrOiAodG9rZW46IHN0cmluZyB8IG51bGwpID0+IHZvaWQpID0+IHtcbiAgICAgICAgdG9rZW5MaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSBjYWxsYmFjayBpcyBjYWxsZWQsIGFzeW5jaHJvbm91c2x5LCBpbiB0aGUgYWJzZW5jZSBvZiB0aGUgYXV0aCBtb2R1bGVcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBjYWxsYmFjayhudWxsKSwgMCk7XG4gICAgICB9LFxuICAgICAgcmVtb3ZlQXV0aFRva2VuTGlzdGVuZXI6IGNhbGxiYWNrID0+IHtcbiAgICAgICAgdG9rZW5MaXN0ZW5lcnMgPSB0b2tlbkxpc3RlbmVycy5maWx0ZXIoXG4gICAgICAgICAgbGlzdGVuZXIgPT4gbGlzdGVuZXIgIT09IGNhbGxiYWNrXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGdldCBuYW1lKCk6IHN0cmluZyB7XG4gICAgdGhpcy5jaGVja0Rlc3Ryb3llZF8oKTtcbiAgICByZXR1cm4gdGhpcy5uYW1lXztcbiAgfVxuXG4gIGdldCBvcHRpb25zKCk6IEZpcmViYXNlT3B0aW9ucyB7XG4gICAgdGhpcy5jaGVja0Rlc3Ryb3llZF8oKTtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zXztcbiAgfVxuXG4gIGRlbGV0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICB0aGlzLmNoZWNrRGVzdHJveWVkXygpO1xuICAgICAgcmVzb2x2ZSgpO1xuICAgIH0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMuZmlyZWJhc2VfLklOVEVSTkFMLnJlbW92ZUFwcCh0aGlzLm5hbWVfKTtcbiAgICAgICAgbGV0IHNlcnZpY2VzOiBGaXJlYmFzZVNlcnZpY2VbXSA9IFtdO1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnNlcnZpY2VzXykuZm9yRWFjaChzZXJ2aWNlS2V5ID0+IHtcbiAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnNlcnZpY2VzX1tzZXJ2aWNlS2V5XSkuZm9yRWFjaChpbnN0YW5jZUtleSA9PiB7XG4gICAgICAgICAgICBzZXJ2aWNlcy5wdXNoKHRoaXMuc2VydmljZXNfW3NlcnZpY2VLZXldW2luc3RhbmNlS2V5XSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoXG4gICAgICAgICAgc2VydmljZXMubWFwKHNlcnZpY2UgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuSU5URVJOQUwhLmRlbGV0ZSgpO1xuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKCk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLmlzRGVsZXRlZF8gPSB0cnVlO1xuICAgICAgICB0aGlzLnNlcnZpY2VzXyA9IHt9O1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGEgc2VydmljZSBpbnN0YW5jZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBhcHAgKGNyZWF0aW5nIGl0XG4gICAqIG9uIGRlbWFuZCksIGlkZW50aWZpZWQgYnkgdGhlIHBhc3NlZCBpbnN0YW5jZUlkZW50aWZpZXIuXG4gICAqXG4gICAqIE5PVEU6IEN1cnJlbnRseSBzdG9yYWdlIGlzIHRoZSBvbmx5IG9uZSB0aGF0IGlzIGxldmVyYWdpbmcgdGhpc1xuICAgKiBmdW5jdGlvbmFsaXR5LiBUaGV5IGludm9rZSBpdCBieSBjYWxsaW5nOlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGZpcmViYXNlLmFwcCgpLnN0b3JhZ2UoJ1NUT1JBR0UgQlVDS0VUIElEJylcbiAgICogYGBgXG4gICAqXG4gICAqIFRoZSBzZXJ2aWNlIG5hbWUgaXMgcGFzc2VkIHRvIHRoaXMgYWxyZWFkeVxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF9nZXRTZXJ2aWNlKFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBpbnN0YW5jZUlkZW50aWZpZXI6IHN0cmluZyA9IERFRkFVTFRfRU5UUllfTkFNRVxuICApOiBGaXJlYmFzZVNlcnZpY2Uge1xuICAgIHRoaXMuY2hlY2tEZXN0cm95ZWRfKCk7XG5cbiAgICBpZiAoIXRoaXMuc2VydmljZXNfW25hbWVdKSB7XG4gICAgICB0aGlzLnNlcnZpY2VzX1tuYW1lXSA9IHt9O1xuICAgIH1cblxuICAgIGlmICghdGhpcy5zZXJ2aWNlc19bbmFtZV1baW5zdGFuY2VJZGVudGlmaWVyXSkge1xuICAgICAgLyoqXG4gICAgICAgKiBJZiBhIGN1c3RvbSBpbnN0YW5jZSBoYXMgYmVlbiBkZWZpbmVkIChpLmUuIG5vdCAnW0RFRkFVTFRdJylcbiAgICAgICAqIHRoZW4gd2Ugd2lsbCBwYXNzIHRoYXQgaW5zdGFuY2Ugb24sIG90aGVyd2lzZSB3ZSBwYXNzIGBudWxsYFxuICAgICAgICovXG4gICAgICBjb25zdCBpbnN0YW5jZVNwZWNpZmllciA9XG4gICAgICAgIGluc3RhbmNlSWRlbnRpZmllciAhPT0gREVGQVVMVF9FTlRSWV9OQU1FXG4gICAgICAgICAgPyBpbnN0YW5jZUlkZW50aWZpZXJcbiAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IHNlcnZpY2UgPSB0aGlzLmZpcmViYXNlXy5JTlRFUk5BTC5mYWN0b3JpZXNbbmFtZV0oXG4gICAgICAgIHRoaXMsXG4gICAgICAgIHRoaXMuZXh0ZW5kQXBwLmJpbmQodGhpcyksXG4gICAgICAgIGluc3RhbmNlU3BlY2lmaWVyXG4gICAgICApO1xuICAgICAgdGhpcy5zZXJ2aWNlc19bbmFtZV1baW5zdGFuY2VJZGVudGlmaWVyXSA9IHNlcnZpY2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc2VydmljZXNfW25hbWVdW2luc3RhbmNlSWRlbnRpZmllcl07XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gdXNlZCB0byBleHRlbmQgYW4gQXBwIGluc3RhbmNlIGF0IHRoZSB0aW1lXG4gICAqIG9mIHNlcnZpY2UgaW5zdGFuY2UgY3JlYXRpb24uXG4gICAqL1xuICBwcml2YXRlIGV4dGVuZEFwcChwcm9wczogeyBbbmFtZTogc3RyaW5nXTogYW55IH0pOiB2b2lkIHtcbiAgICAvLyBDb3B5IHRoZSBvYmplY3Qgb250byB0aGUgRmlyZWJhc2VBcHBJbXBsIHByb3RvdHlwZVxuICAgIGRlZXBFeHRlbmQodGhpcywgcHJvcHMpO1xuXG4gICAgLyoqXG4gICAgICogSWYgdGhlIGFwcCBoYXMgb3ZlcndyaXR0ZW4gdGhlIGFkZEF1dGhUb2tlbkxpc3RlbmVyIHN0dWIsIGZvcndhcmRcbiAgICAgKiB0aGUgYWN0aXZlIHRva2VuIGxpc3RlbmVycyBvbiB0byB0aGUgdHJ1ZSBmeG4uXG4gICAgICpcbiAgICAgKiBUT0RPOiBUaGlzIGZ1bmN0aW9uIGlzIHJlcXVpcmVkIGR1ZSB0byBvdXIgY3VycmVudCBtb2R1bGVcbiAgICAgKiBzdHJ1Y3R1cmUuIE9uY2Ugd2UgYXJlIGFibGUgdG8gcmVseSBzdHJpY3RseSB1cG9uIGEgc2luZ2xlIG1vZHVsZVxuICAgICAqIGltcGxlbWVudGF0aW9uLCB0aGlzIGNvZGUgc2hvdWxkIGJlIHJlZmFjdG9yZWQgYW5kIEF1dGggc2hvdWxkXG4gICAgICogcHJvdmlkZSB0aGVzZSBzdHVicyBhbmQgdGhlIHVwZ3JhZGUgbG9naWNcbiAgICAgKi9cbiAgICBpZiAocHJvcHMuSU5URVJOQUwgJiYgcHJvcHMuSU5URVJOQUwuYWRkQXV0aFRva2VuTGlzdGVuZXIpIHtcbiAgICAgIHRva2VuTGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4ge1xuICAgICAgICB0aGlzLklOVEVSTkFMLmFkZEF1dGhUb2tlbkxpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICAgIH0pO1xuICAgICAgdG9rZW5MaXN0ZW5lcnMgPSBbXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiB3aWxsIHRocm93IGFuIEVycm9yIGlmIHRoZSBBcHAgaGFzIGFscmVhZHkgYmVlbiBkZWxldGVkIC1cbiAgICogdXNlIGJlZm9yZSBwZXJmb3JtaW5nIEFQSSBhY3Rpb25zIG9uIHRoZSBBcHAuXG4gICAqL1xuICBwcml2YXRlIGNoZWNrRGVzdHJveWVkXygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc0RlbGV0ZWRfKSB7XG4gICAgICBlcnJvcignYXBwLWRlbGV0ZWQnLCB7IG5hbWU6IHRoaXMubmFtZV8gfSk7XG4gICAgfVxuICB9XG59XG5cbi8vIFByZXZlbnQgZGVhZC1jb2RlIGVsaW1pbmF0aW9uIG9mIHRoZXNlIG1ldGhvZHMgdy9vIGludmFsaWQgcHJvcGVydHlcbi8vIGNvcHlpbmcuXG4oRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5uYW1lICYmIEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUub3B0aW9ucykgfHxcbiAgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5kZWxldGUgfHxcbiAgY29uc29sZS5sb2coJ2RjJyk7XG5cbi8qKlxuICogUmV0dXJuIGEgZmlyZWJhc2UgbmFtZXNwYWNlIG9iamVjdC5cbiAqXG4gKiBJbiBwcm9kdWN0aW9uLCB0aGlzIHdpbGwgYmUgY2FsbGVkIGV4YWN0bHkgb25jZSBhbmQgdGhlIHJlc3VsdFxuICogYXNzaWduZWQgdG8gdGhlICdmaXJlYmFzZScgZ2xvYmFsLiAgSXQgbWF5IGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lc1xuICogaW4gdW5pdCB0ZXN0cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlKCk6IEZpcmViYXNlTmFtZXNwYWNlIHtcbiAgbGV0IGFwcHNfOiB7IFtuYW1lOiBzdHJpbmddOiBGaXJlYmFzZUFwcCB9ID0ge307XG4gIGxldCBmYWN0b3JpZXM6IHsgW3NlcnZpY2U6IHN0cmluZ106IEZpcmViYXNlU2VydmljZUZhY3RvcnkgfSA9IHt9O1xuICBsZXQgYXBwSG9va3M6IHsgW3NlcnZpY2U6IHN0cmluZ106IEFwcEhvb2sgfSA9IHt9O1xuXG4gIC8vIEEgbmFtZXNwYWNlIGlzIGEgcGxhaW4gSmF2YVNjcmlwdCBPYmplY3QuXG4gIGxldCBuYW1lc3BhY2UgPSB7XG4gICAgLy8gSGFjayB0byBwcmV2ZW50IEJhYmVsIGZyb20gbW9kaWZ5aW5nIHRoZSBvYmplY3QgcmV0dXJuZWRcbiAgICAvLyBhcyB0aGUgZmlyZWJhc2UgbmFtZXNwYWNlLlxuICAgIF9fZXNNb2R1bGU6IHRydWUsXG4gICAgaW5pdGlhbGl6ZUFwcDogaW5pdGlhbGl6ZUFwcCxcbiAgICBhcHA6IGFwcCBhcyBhbnksXG4gICAgYXBwczogbnVsbCBhcyBhbnksXG4gICAgUHJvbWlzZTogUHJvbWlzZSxcbiAgICBTREtfVkVSU0lPTjogJyR7SlNDT1JFX1ZFUlNJT059JyxcbiAgICBJTlRFUk5BTDoge1xuICAgICAgcmVnaXN0ZXJTZXJ2aWNlOiByZWdpc3RlclNlcnZpY2UsXG4gICAgICBjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZTogY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2UsXG4gICAgICBleHRlbmROYW1lc3BhY2U6IGV4dGVuZE5hbWVzcGFjZSxcbiAgICAgIGNyZWF0ZVN1YnNjcmliZTogY3JlYXRlU3Vic2NyaWJlLFxuICAgICAgRXJyb3JGYWN0b3J5OiBFcnJvckZhY3RvcnksXG4gICAgICByZW1vdmVBcHA6IHJlbW92ZUFwcCxcbiAgICAgIGZhY3RvcmllczogZmFjdG9yaWVzLFxuICAgICAgdXNlQXNTZXJ2aWNlOiB1c2VBc1NlcnZpY2UsXG4gICAgICBQcm9taXNlOiBQcm9taXNlLFxuICAgICAgZGVlcEV4dGVuZDogZGVlcEV4dGVuZFxuICAgIH1cbiAgfTtcblxuICAvLyBJbmplY3QgYSBjaXJjdWxhciBkZWZhdWx0IGV4cG9ydCB0byBhbGxvdyBCYWJlbCB1c2VycyB3aG8gd2VyZSBwcmV2aW91c2x5XG4gIC8vIHVzaW5nOlxuICAvL1xuICAvLyAgIGltcG9ydCBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZSc7XG4gIC8vICAgd2hpY2ggYmVjb21lczogdmFyIGZpcmViYXNlID0gcmVxdWlyZSgnZmlyZWJhc2UnKS5kZWZhdWx0O1xuICAvL1xuICAvLyBpbnN0ZWFkIG9mXG4gIC8vXG4gIC8vICAgaW1wb3J0ICogYXMgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UnO1xuICAvLyAgIHdoaWNoIGJlY29tZXM6IHZhciBmaXJlYmFzZSA9IHJlcXVpcmUoJ2ZpcmViYXNlJyk7XG4gIHBhdGNoUHJvcGVydHkobmFtZXNwYWNlLCAnZGVmYXVsdCcsIG5hbWVzcGFjZSk7XG5cbiAgLy8gZmlyZWJhc2UuYXBwcyBpcyBhIHJlYWQtb25seSBnZXR0ZXIuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuYW1lc3BhY2UsICdhcHBzJywge1xuICAgIGdldDogZ2V0QXBwc1xuICB9KTtcblxuICAvKipcbiAgICogQ2FsbGVkIGJ5IEFwcC5kZWxldGUoKSAtIGJ1dCBiZWZvcmUgYW55IHNlcnZpY2VzIGFzc29jaWF0ZWQgd2l0aCB0aGUgQXBwXG4gICAqIGFyZSBkZWxldGVkLlxuICAgKi9cbiAgZnVuY3Rpb24gcmVtb3ZlQXBwKG5hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgIGxldCBhcHAgPSBhcHBzX1tuYW1lXTtcbiAgICBjYWxsQXBwSG9va3MoYXBwLCAnZGVsZXRlJyk7XG4gICAgZGVsZXRlIGFwcHNfW25hbWVdO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgQXBwIG9iamVjdCBmb3IgYSBnaXZlbiBuYW1lIChvciBERUZBVUxUKS5cbiAgICovXG4gIGZ1bmN0aW9uIGFwcChuYW1lPzogc3RyaW5nKTogRmlyZWJhc2VBcHAge1xuICAgIG5hbWUgPSBuYW1lIHx8IERFRkFVTFRfRU5UUllfTkFNRTtcbiAgICBpZiAoIWNvbnRhaW5zKGFwcHNfLCBuYW1lKSkge1xuICAgICAgZXJyb3IoJ25vLWFwcCcsIHsgbmFtZTogbmFtZSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGFwcHNfW25hbWVdO1xuICB9XG5cbiAgcGF0Y2hQcm9wZXJ0eShhcHAsICdBcHAnLCBGaXJlYmFzZUFwcEltcGwpO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgQXBwIGluc3RhbmNlIChuYW1lIG11c3QgYmUgdW5pcXVlKS5cbiAgICovXG4gIGZ1bmN0aW9uIGluaXRpYWxpemVBcHAob3B0aW9uczogRmlyZWJhc2VPcHRpb25zLCBuYW1lPzogc3RyaW5nKTogRmlyZWJhc2VBcHAge1xuICAgIGlmIChuYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG5hbWUgPSBERUZBVUxUX0VOVFJZX05BTUU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycgfHwgbmFtZSA9PT0gJycpIHtcbiAgICAgICAgZXJyb3IoJ2JhZC1hcHAtbmFtZScsIHsgbmFtZTogbmFtZSArICcnIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoY29udGFpbnMoYXBwc18sIG5hbWUpKSB7XG4gICAgICBlcnJvcignZHVwbGljYXRlLWFwcCcsIHsgbmFtZTogbmFtZSB9KTtcbiAgICB9XG5cbiAgICBsZXQgYXBwID0gbmV3IEZpcmViYXNlQXBwSW1wbChcbiAgICAgIG9wdGlvbnMsXG4gICAgICBuYW1lISxcbiAgICAgIG5hbWVzcGFjZSBhcyBGaXJlYmFzZU5hbWVzcGFjZVxuICAgICk7XG5cbiAgICBhcHBzX1tuYW1lIV0gPSBhcHA7XG4gICAgY2FsbEFwcEhvb2tzKGFwcCwgJ2NyZWF0ZScpO1xuXG4gICAgcmV0dXJuIGFwcDtcbiAgfVxuXG4gIC8qXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiBhbGwgdGhlIG5vbi1kZWxldGVkIEZpcmViYXNlQXBwcy5cbiAgICovXG4gIGZ1bmN0aW9uIGdldEFwcHMoKTogRmlyZWJhc2VBcHBbXSB7XG4gICAgLy8gTWFrZSBhIGNvcHkgc28gY2FsbGVyIGNhbm5vdCBtdXRhdGUgdGhlIGFwcHMgbGlzdC5cbiAgICByZXR1cm4gT2JqZWN0LmtleXMoYXBwc18pLm1hcChuYW1lID0+IGFwcHNfW25hbWVdKTtcbiAgfVxuXG4gIC8qXG4gICAqIFJlZ2lzdGVyIGEgRmlyZWJhc2UgU2VydmljZS5cbiAgICpcbiAgICogZmlyZWJhc2UuSU5URVJOQUwucmVnaXN0ZXJTZXJ2aWNlKClcbiAgICpcbiAgICogVE9ETzogSW1wbGVtZW50IHNlcnZpY2VQcm9wZXJ0aWVzLlxuICAgKi9cbiAgZnVuY3Rpb24gcmVnaXN0ZXJTZXJ2aWNlKFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBjcmVhdGVTZXJ2aWNlOiBGaXJlYmFzZVNlcnZpY2VGYWN0b3J5LFxuICAgIHNlcnZpY2VQcm9wZXJ0aWVzPzogeyBbcHJvcDogc3RyaW5nXTogYW55IH0sXG4gICAgYXBwSG9vaz86IEFwcEhvb2ssXG4gICAgYWxsb3dNdWx0aXBsZUluc3RhbmNlcz86IGJvb2xlYW5cbiAgKTogRmlyZWJhc2VTZXJ2aWNlTmFtZXNwYWNlPEZpcmViYXNlU2VydmljZT4ge1xuICAgIC8vIENhbm5vdCByZS1yZWdpc3RlciBhIHNlcnZpY2UgdGhhdCBhbHJlYWR5IGV4aXN0c1xuICAgIGlmIChmYWN0b3JpZXNbbmFtZV0pIHtcbiAgICAgIGVycm9yKCdkdXBsaWNhdGUtc2VydmljZScsIHsgbmFtZTogbmFtZSB9KTtcbiAgICB9XG5cbiAgICAvLyBDYXB0dXJlIHRoZSBzZXJ2aWNlIGZhY3RvcnkgZm9yIGxhdGVyIHNlcnZpY2UgaW5zdGFudGlhdGlvblxuICAgIGZhY3Rvcmllc1tuYW1lXSA9IGNyZWF0ZVNlcnZpY2U7XG5cbiAgICAvLyBDYXB0dXJlIHRoZSBhcHBIb29rLCBpZiBwYXNzZWRcbiAgICBpZiAoYXBwSG9vaykge1xuICAgICAgYXBwSG9va3NbbmFtZV0gPSBhcHBIb29rO1xuXG4gICAgICAvLyBSdW4gdGhlICoqbmV3KiogYXBwIGhvb2sgb24gYWxsIGV4aXN0aW5nIGFwcHNcbiAgICAgIGdldEFwcHMoKS5mb3JFYWNoKGFwcCA9PiB7XG4gICAgICAgIGFwcEhvb2soJ2NyZWF0ZScsIGFwcCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBUaGUgU2VydmljZSBuYW1lc3BhY2UgaXMgYW4gYWNjZXNzb3IgZnVuY3Rpb24gLi4uXG4gICAgY29uc3Qgc2VydmljZU5hbWVzcGFjZSA9IChhcHBBcmc6IEZpcmViYXNlQXBwID0gYXBwKCkpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgKGFwcEFyZyBhcyBhbnkpW25hbWVdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIEludmFsaWQgYXJndW1lbnQuXG4gICAgICAgIC8vIFRoaXMgaGFwcGVucyBpbiB0aGUgZm9sbG93aW5nIGNhc2U6IGZpcmViYXNlLnN0b3JhZ2UoJ2dzOi8nKVxuICAgICAgICBlcnJvcignaW52YWxpZC1hcHAtYXJndW1lbnQnLCB7IG5hbWU6IG5hbWUgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEZvcndhcmQgc2VydmljZSBpbnN0YW5jZSBsb29rdXAgdG8gdGhlIEZpcmViYXNlQXBwLlxuICAgICAgcmV0dXJuIChhcHBBcmcgYXMgYW55KVtuYW1lXSgpO1xuICAgIH07XG5cbiAgICAvLyAuLi4gYW5kIGEgY29udGFpbmVyIGZvciBzZXJ2aWNlLWxldmVsIHByb3BlcnRpZXMuXG4gICAgaWYgKHNlcnZpY2VQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGRlZXBFeHRlbmQoc2VydmljZU5hbWVzcGFjZSwgc2VydmljZVByb3BlcnRpZXMpO1xuICAgIH1cblxuICAgIC8vIE1vbmtleS1wYXRjaCB0aGUgc2VydmljZU5hbWVzcGFjZSBvbnRvIHRoZSBmaXJlYmFzZSBuYW1lc3BhY2VcbiAgICAobmFtZXNwYWNlIGFzIGFueSlbbmFtZV0gPSBzZXJ2aWNlTmFtZXNwYWNlO1xuXG4gICAgLy8gUGF0Y2ggdGhlIEZpcmViYXNlQXBwSW1wbCBwcm90b3R5cGVcbiAgICBGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oLi4uYXJncykge1xuICAgICAgY29uc3Qgc2VydmljZUZ4biA9IHRoaXMuX2dldFNlcnZpY2UuYmluZCh0aGlzLCBuYW1lKTtcbiAgICAgIHJldHVybiBzZXJ2aWNlRnhuLmFwcGx5KHRoaXMsIGFsbG93TXVsdGlwbGVJbnN0YW5jZXMgPyBhcmdzIDogW10pO1xuICAgIH07XG5cbiAgICByZXR1cm4gc2VydmljZU5hbWVzcGFjZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXRjaCB0aGUgdG9wLWxldmVsIGZpcmViYXNlIG5hbWVzcGFjZSB3aXRoIGFkZGl0aW9uYWwgcHJvcGVydGllcy5cbiAgICpcbiAgICogZmlyZWJhc2UuSU5URVJOQUwuZXh0ZW5kTmFtZXNwYWNlKClcbiAgICovXG4gIGZ1bmN0aW9uIGV4dGVuZE5hbWVzcGFjZShwcm9wczogeyBbcHJvcDogc3RyaW5nXTogYW55IH0pOiB2b2lkIHtcbiAgICBkZWVwRXh0ZW5kKG5hbWVzcGFjZSwgcHJvcHMpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FsbEFwcEhvb2tzKGFwcDogRmlyZWJhc2VBcHAsIGV2ZW50TmFtZTogc3RyaW5nKSB7XG4gICAgT2JqZWN0LmtleXMoZmFjdG9yaWVzKS5mb3JFYWNoKHNlcnZpY2VOYW1lID0+IHtcbiAgICAgIC8vIElnbm9yZSB2aXJ0dWFsIHNlcnZpY2VzXG4gICAgICBsZXQgZmFjdG9yeU5hbWUgPSB1c2VBc1NlcnZpY2UoYXBwLCBzZXJ2aWNlTmFtZSk7XG4gICAgICBpZiAoZmFjdG9yeU5hbWUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoYXBwSG9va3NbZmFjdG9yeU5hbWVdKSB7XG4gICAgICAgIGFwcEhvb2tzW2ZhY3RvcnlOYW1lXShldmVudE5hbWUsIGFwcCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyBNYXAgdGhlIHJlcXVlc3RlZCBzZXJ2aWNlIHRvIGEgcmVnaXN0ZXJlZCBzZXJ2aWNlIG5hbWVcbiAgLy8gKHVzZWQgdG8gbWFwIGF1dGggdG8gc2VydmVyQXV0aCBzZXJ2aWNlIHdoZW4gbmVlZGVkKS5cbiAgZnVuY3Rpb24gdXNlQXNTZXJ2aWNlKGFwcDogRmlyZWJhc2VBcHAsIG5hbWU6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIGlmIChuYW1lID09PSAnc2VydmVyQXV0aCcpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCB1c2VTZXJ2aWNlID0gbmFtZTtcbiAgICBsZXQgb3B0aW9ucyA9IGFwcC5vcHRpb25zO1xuXG4gICAgcmV0dXJuIHVzZVNlcnZpY2U7XG4gIH1cblxuICByZXR1cm4gKG5hbWVzcGFjZSBhcyBhbnkpIGFzIEZpcmViYXNlTmFtZXNwYWNlO1xufVxuXG50eXBlIEFwcEVycm9yID1cbiAgfCAnbm8tYXBwJ1xuICB8ICdiYWQtYXBwLW5hbWUnXG4gIHwgJ2R1cGxpY2F0ZS1hcHAnXG4gIHwgJ2FwcC1kZWxldGVkJ1xuICB8ICdkdXBsaWNhdGUtc2VydmljZSdcbiAgfCAnc2Etbm90LXN1cHBvcnRlZCdcbiAgfCAnaW52YWxpZC1hcHAtYXJndW1lbnQnO1xuXG5mdW5jdGlvbiBlcnJvcihjb2RlOiBBcHBFcnJvciwgYXJncz86IHsgW25hbWU6IHN0cmluZ106IGFueSB9KSB7XG4gIHRocm93IGFwcEVycm9ycy5jcmVhdGUoY29kZSwgYXJncyk7XG59XG5cbi8vIFR5cGVTY3JpcHQgZG9lcyBub3Qgc3VwcG9ydCBub24tc3RyaW5nIGluZGV4ZXMhXG4vLyBsZXQgZXJyb3JzOiB7W2NvZGU6IEFwcEVycm9yOiBzdHJpbmd9ID0ge1xubGV0IGVycm9yczogeyBbY29kZTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XG4gICduby1hcHAnOlxuICAgIFwiTm8gRmlyZWJhc2UgQXBwICd7JG5hbWV9JyBoYXMgYmVlbiBjcmVhdGVkIC0gXCIgK1xuICAgICdjYWxsIEZpcmViYXNlIEFwcC5pbml0aWFsaXplQXBwKCknLFxuICAnYmFkLWFwcC1uYW1lJzogXCJJbGxlZ2FsIEFwcCBuYW1lOiAneyRuYW1lfVwiLFxuICAnZHVwbGljYXRlLWFwcCc6IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JG5hbWV9JyBhbHJlYWR5IGV4aXN0c1wiLFxuICAnYXBwLWRlbGV0ZWQnOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRuYW1lfScgYWxyZWFkeSBkZWxldGVkXCIsXG4gICdkdXBsaWNhdGUtc2VydmljZSc6IFwiRmlyZWJhc2Ugc2VydmljZSBuYW1lZCAneyRuYW1lfScgYWxyZWFkeSByZWdpc3RlcmVkXCIsXG4gICdzYS1ub3Qtc3VwcG9ydGVkJzpcbiAgICAnSW5pdGlhbGl6aW5nIHRoZSBGaXJlYmFzZSBTREsgd2l0aCBhIHNlcnZpY2UgJyArXG4gICAgJ2FjY291bnQgaXMgb25seSBhbGxvd2VkIGluIGEgTm9kZS5qcyBlbnZpcm9ubWVudC4gT24gY2xpZW50ICcgK1xuICAgICdkZXZpY2VzLCB5b3Ugc2hvdWxkIGluc3RlYWQgaW5pdGlhbGl6ZSB0aGUgU0RLIHdpdGggYW4gYXBpIGtleSBhbmQgJyArXG4gICAgJ2F1dGggZG9tYWluJyxcbiAgJ2ludmFsaWQtYXBwLWFyZ3VtZW50JzpcbiAgICAnZmlyZWJhc2UueyRuYW1lfSgpIHRha2VzIGVpdGhlciBubyBhcmd1bWVudCBvciBhICcgK1xuICAgICdGaXJlYmFzZSBBcHAgaW5zdGFuY2UuJ1xufTtcblxubGV0IGFwcEVycm9ycyA9IG5ldyBFcnJvckZhY3Rvcnk8QXBwRXJyb3I+KCdhcHAnLCAnRmlyZWJhc2UnLCBlcnJvcnMpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgZmlyZWJhc2UgPSByZXF1aXJlKCdAZmlyZWJhc2UvYXBwJykuZGVmYXVsdDtcbiAgdmFyIGgsYWE9YWF8fHt9LGs9dGhpcztmdW5jdGlvbiBtKGEpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBhfWZ1bmN0aW9uIGJhKGEpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgYX1mdW5jdGlvbiBjYSgpe31cbmZ1bmN0aW9uIGRhKGEpe3ZhciBiPXR5cGVvZiBhO2lmKFwib2JqZWN0XCI9PWIpaWYoYSl7aWYoYSBpbnN0YW5jZW9mIEFycmF5KXJldHVyblwiYXJyYXlcIjtpZihhIGluc3RhbmNlb2YgT2JqZWN0KXJldHVybiBiO3ZhciBjPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKTtpZihcIltvYmplY3QgV2luZG93XVwiPT1jKXJldHVyblwib2JqZWN0XCI7aWYoXCJbb2JqZWN0IEFycmF5XVwiPT1jfHxcIm51bWJlclwiPT10eXBlb2YgYS5sZW5ndGgmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLnNwbGljZSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEucHJvcGVydHlJc0VudW1lcmFibGUmJiFhLnByb3BlcnR5SXNFbnVtZXJhYmxlKFwic3BsaWNlXCIpKXJldHVyblwiYXJyYXlcIjtpZihcIltvYmplY3QgRnVuY3Rpb25dXCI9PWN8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmNhbGwmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLnByb3BlcnR5SXNFbnVtZXJhYmxlJiYhYS5wcm9wZXJ0eUlzRW51bWVyYWJsZShcImNhbGxcIikpcmV0dXJuXCJmdW5jdGlvblwifWVsc2UgcmV0dXJuXCJudWxsXCI7XG5lbHNlIGlmKFwiZnVuY3Rpb25cIj09YiYmXCJ1bmRlZmluZWRcIj09dHlwZW9mIGEuY2FsbClyZXR1cm5cIm9iamVjdFwiO3JldHVybiBifWZ1bmN0aW9uIGVhKGEpe3JldHVybiBudWxsPT09YX1mdW5jdGlvbiBmYShhKXtyZXR1cm5cImFycmF5XCI9PWRhKGEpfWZ1bmN0aW9uIGhhKGEpe3ZhciBiPWRhKGEpO3JldHVyblwiYXJyYXlcIj09Ynx8XCJvYmplY3RcIj09YiYmXCJudW1iZXJcIj09dHlwZW9mIGEubGVuZ3RofWZ1bmN0aW9uIHAoYSl7cmV0dXJuXCJmdW5jdGlvblwiPT1kYShhKX1mdW5jdGlvbiBxKGEpe3ZhciBiPXR5cGVvZiBhO3JldHVyblwib2JqZWN0XCI9PWImJm51bGwhPWF8fFwiZnVuY3Rpb25cIj09Yn12YXIgaWE9XCJjbG9zdXJlX3VpZF9cIisoMUU5Kk1hdGgucmFuZG9tKCk+Pj4wKSxqYT0wO2Z1bmN0aW9uIGthKGEsYixjKXtyZXR1cm4gYS5jYWxsLmFwcGx5KGEuYmluZCxhcmd1bWVudHMpfVxuZnVuY3Rpb24gbGEoYSxiLGMpe2lmKCFhKXRocm93IEVycm9yKCk7aWYoMjxhcmd1bWVudHMubGVuZ3RoKXt2YXIgZD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseShjLGQpO3JldHVybiBhLmFwcGx5KGIsYyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGIsYXJndW1lbnRzKX19ZnVuY3Rpb24gcihhLGIsYyl7RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQmJi0xIT1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC50b1N0cmluZygpLmluZGV4T2YoXCJuYXRpdmUgY29kZVwiKT9yPWthOnI9bGE7cmV0dXJuIHIuYXBwbHkobnVsbCxhcmd1bWVudHMpfVxuZnVuY3Rpb24gbWEoYSxiKXt2YXIgYz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9Yy5zbGljZSgpO2IucHVzaC5hcHBseShiLGFyZ3VtZW50cyk7cmV0dXJuIGEuYXBwbHkodGhpcyxiKX19dmFyIG5hPURhdGUubm93fHxmdW5jdGlvbigpe3JldHVybituZXcgRGF0ZX07ZnVuY3Rpb24gdChhLGIpe2Z1bmN0aW9uIGMoKXt9Yy5wcm90b3R5cGU9Yi5wcm90b3R5cGU7YS5pYj1iLnByb3RvdHlwZTthLnByb3RvdHlwZT1uZXcgYzthLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hO2EuUmM9ZnVuY3Rpb24oYSxjLGYpe2Zvcih2YXIgZD1BcnJheShhcmd1bWVudHMubGVuZ3RoLTIpLGU9MjtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKWRbZS0yXT1hcmd1bWVudHNbZV07cmV0dXJuIGIucHJvdG90eXBlW2NdLmFwcGx5KGEsZCl9fTtmdW5jdGlvbiB1KGEpe2lmKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKUVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsdSk7ZWxzZXt2YXIgYj1FcnJvcigpLnN0YWNrO2ImJih0aGlzLnN0YWNrPWIpfWEmJih0aGlzLm1lc3NhZ2U9U3RyaW5nKGEpKX10KHUsRXJyb3IpO3UucHJvdG90eXBlLm5hbWU9XCJDdXN0b21FcnJvclwiO2Z1bmN0aW9uIG9hKGEsYil7Zm9yKHZhciBjPWEuc3BsaXQoXCIlc1wiKSxkPVwiXCIsZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7ZS5sZW5ndGgmJjE8Yy5sZW5ndGg7KWQrPWMuc2hpZnQoKStlLnNoaWZ0KCk7cmV0dXJuIGQrYy5qb2luKFwiJXNcIil9dmFyIHBhPVN0cmluZy5wcm90b3R5cGUudHJpbT9mdW5jdGlvbihhKXtyZXR1cm4gYS50cmltKCl9OmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL15bXFxzXFx4YTBdK3xbXFxzXFx4YTBdKyQvZyxcIlwiKX07XG5mdW5jdGlvbiBxYShhKXtpZighcmEudGVzdChhKSlyZXR1cm4gYTstMSE9YS5pbmRleE9mKFwiJlwiKSYmKGE9YS5yZXBsYWNlKHNhLFwiJmFtcDtcIikpOy0xIT1hLmluZGV4T2YoXCI8XCIpJiYoYT1hLnJlcGxhY2UodGEsXCImbHQ7XCIpKTstMSE9YS5pbmRleE9mKFwiPlwiKSYmKGE9YS5yZXBsYWNlKHVhLFwiJmd0O1wiKSk7LTEhPWEuaW5kZXhPZignXCInKSYmKGE9YS5yZXBsYWNlKHZhLFwiJnF1b3Q7XCIpKTstMSE9YS5pbmRleE9mKFwiJ1wiKSYmKGE9YS5yZXBsYWNlKHdhLFwiJiMzOTtcIikpOy0xIT1hLmluZGV4T2YoXCJcXHgwMFwiKSYmKGE9YS5yZXBsYWNlKHhhLFwiJiMwO1wiKSk7cmV0dXJuIGF9dmFyIHNhPS8mL2csdGE9LzwvZyx1YT0vPi9nLHZhPS9cIi9nLHdhPS8nL2cseGE9L1xceDAwL2cscmE9L1tcXHgwMCY8PlwiJ10vO2Z1bmN0aW9uIHYoYSxiKXtyZXR1cm4tMSE9YS5pbmRleE9mKGIpfWZ1bmN0aW9uIHlhKGEsYil7cmV0dXJuIGE8Yj8tMTphPmI/MTowfTtmdW5jdGlvbiB6YShhLGIpe2IudW5zaGlmdChhKTt1LmNhbGwodGhpcyxvYS5hcHBseShudWxsLGIpKTtiLnNoaWZ0KCl9dCh6YSx1KTt6YS5wcm90b3R5cGUubmFtZT1cIkFzc2VydGlvbkVycm9yXCI7ZnVuY3Rpb24gQWEoYSxiKXt0aHJvdyBuZXcgemEoXCJGYWlsdXJlXCIrKGE/XCI6IFwiK2E6XCJcIiksQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKTt9O3ZhciBCYT1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbihhLGIsYyl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYSxiLGMpfTpmdW5jdGlvbihhLGIsYyl7Yz1udWxsPT1jPzA6MD5jP01hdGgubWF4KDAsYS5sZW5ndGgrYyk6YztpZihtKGEpKXJldHVybiBtKGIpJiYxPT1iLmxlbmd0aD9hLmluZGV4T2YoYixjKTotMTtmb3IoO2M8YS5sZW5ndGg7YysrKWlmKGMgaW4gYSYmYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuLTF9LHc9QXJyYXkucHJvdG90eXBlLmZvckVhY2g/ZnVuY3Rpb24oYSxiLGMpe0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxiLGMpfTpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9bShhKT9hLnNwbGl0KFwiXCIpOmEsZj0wO2Y8ZDtmKyspZiBpbiBlJiZiLmNhbGwoYyxlW2ZdLGYsYSl9O1xuZnVuY3Rpb24gQ2EoYSxiKXt2YXIgYz1hLmxlbmd0aCxkPW0oYSk/YS5zcGxpdChcIlwiKTphO2ZvcigtLWM7MDw9YzstLWMpYyBpbiBkJiZiLmNhbGwodm9pZCAwLGRbY10sYyxhKX12YXIgRGE9QXJyYXkucHJvdG90eXBlLm1hcD9mdW5jdGlvbihhLGIsYyl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChhLGIsYyl9OmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9YS5sZW5ndGgsZT1BcnJheShkKSxmPW0oYSk/YS5zcGxpdChcIlwiKTphLGc9MDtnPGQ7ZysrKWcgaW4gZiYmKGVbZ109Yi5jYWxsKGMsZltnXSxnLGEpKTtyZXR1cm4gZX0sRWE9QXJyYXkucHJvdG90eXBlLnNvbWU/ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGEsYixjKX06ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPW0oYSk/YS5zcGxpdChcIlwiKTphLGY9MDtmPGQ7ZisrKWlmKGYgaW4gZSYmYi5jYWxsKGMsZVtmXSxmLGEpKXJldHVybiEwO3JldHVybiExfTtcbmZ1bmN0aW9uIEZhKGEpe2E6e3ZhciBiPUdhO2Zvcih2YXIgYz1hLmxlbmd0aCxkPW0oYSk/YS5zcGxpdChcIlwiKTphLGU9MDtlPGM7ZSsrKWlmKGUgaW4gZCYmYi5jYWxsKHZvaWQgMCxkW2VdLGUsYSkpe2I9ZTticmVhayBhfWI9LTF9cmV0dXJuIDA+Yj9udWxsOm0oYSk/YS5jaGFyQXQoYik6YVtiXX1mdW5jdGlvbiBIYShhLGIpe3JldHVybiAwPD1CYShhLGIpfWZ1bmN0aW9uIElhKGEsYil7Yj1CYShhLGIpO3ZhciBjOyhjPTA8PWIpJiZBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoYSxiLDEpO3JldHVybiBjfWZ1bmN0aW9uIEphKGEsYil7dmFyIGM9MDtDYShhLGZ1bmN0aW9uKGQsZSl7Yi5jYWxsKHZvaWQgMCxkLGUsYSkmJjE9PUFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChhLGUsMSkubGVuZ3RoJiZjKyt9KX1mdW5jdGlvbiBLYShhKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSxhcmd1bWVudHMpfVxuZnVuY3Rpb24gTGEoYSl7dmFyIGI9YS5sZW5ndGg7aWYoMDxiKXtmb3IodmFyIGM9QXJyYXkoYiksZD0wO2Q8YjtkKyspY1tkXT1hW2RdO3JldHVybiBjfXJldHVybltdfTt2YXIgTWE7YTp7dmFyIE5hPWsubmF2aWdhdG9yO2lmKE5hKXt2YXIgT2E9TmEudXNlckFnZW50O2lmKE9hKXtNYT1PYTticmVhayBhfX1NYT1cIlwifWZ1bmN0aW9uIHgoYSl7cmV0dXJuIHYoTWEsYSl9O2Z1bmN0aW9uIFBhKGEsYil7Zm9yKHZhciBjIGluIGEpYi5jYWxsKHZvaWQgMCxhW2NdLGMsYSl9ZnVuY3Rpb24gUWEoYSl7dmFyIGI9W10sYz0wLGQ7Zm9yKGQgaW4gYSliW2MrK109YVtkXTtyZXR1cm4gYn1mdW5jdGlvbiBSYShhKXt2YXIgYj1bXSxjPTAsZDtmb3IoZCBpbiBhKWJbYysrXT1kO3JldHVybiBifWZ1bmN0aW9uIFNhKGEpe2Zvcih2YXIgYiBpbiBhKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIFRhKGEsYil7Zm9yKHZhciBjIGluIGEpaWYoIShjIGluIGIpfHxhW2NdIT09YltjXSlyZXR1cm4hMTtmb3IoYyBpbiBiKWlmKCEoYyBpbiBhKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBVYShhKXt2YXIgYj17fSxjO2ZvcihjIGluIGEpYltjXT1hW2NdO3JldHVybiBifXZhciBWYT1cImNvbnN0cnVjdG9yIGhhc093blByb3BlcnR5IGlzUHJvdG90eXBlT2YgcHJvcGVydHlJc0VudW1lcmFibGUgdG9Mb2NhbGVTdHJpbmcgdG9TdHJpbmcgdmFsdWVPZlwiLnNwbGl0KFwiIFwiKTtcbmZ1bmN0aW9uIFdhKGEsYil7Zm9yKHZhciBjLGQsZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe2Q9YXJndW1lbnRzW2VdO2ZvcihjIGluIGQpYVtjXT1kW2NdO2Zvcih2YXIgZj0wO2Y8VmEubGVuZ3RoO2YrKyljPVZhW2ZdLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkLGMpJiYoYVtjXT1kW2NdKX19O2Z1bmN0aW9uIFhhKGEpe1hhW1wiIFwiXShhKTtyZXR1cm4gYX1YYVtcIiBcIl09Y2E7ZnVuY3Rpb24gWWEoYSxiKXt2YXIgYz1aYTtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGMsYSk/Y1thXTpjW2FdPWIoYSl9O3ZhciAkYT14KFwiT3BlcmFcIikseT14KFwiVHJpZGVudFwiKXx8eChcIk1TSUVcIiksYWI9eChcIkVkZ2VcIiksYmI9YWJ8fHksY2I9eChcIkdlY2tvXCIpJiYhKHYoTWEudG9Mb3dlckNhc2UoKSxcIndlYmtpdFwiKSYmIXgoXCJFZGdlXCIpKSYmISh4KFwiVHJpZGVudFwiKXx8eChcIk1TSUVcIikpJiYheChcIkVkZ2VcIiksZGI9dihNYS50b0xvd2VyQ2FzZSgpLFwid2Via2l0XCIpJiYheChcIkVkZ2VcIik7ZnVuY3Rpb24gZWIoKXt2YXIgYT1rLmRvY3VtZW50O3JldHVybiBhP2EuZG9jdW1lbnRNb2RlOnZvaWQgMH12YXIgZmI7XG5hOnt2YXIgZ2I9XCJcIixoYj1mdW5jdGlvbigpe3ZhciBhPU1hO2lmKGNiKXJldHVybi9ydlxcOihbXlxcKTtdKykoXFwpfDspLy5leGVjKGEpO2lmKGFiKXJldHVybi9FZGdlXFwvKFtcXGRcXC5dKykvLmV4ZWMoYSk7aWYoeSlyZXR1cm4vXFxiKD86TVNJRXxydilbOiBdKFteXFwpO10rKShcXCl8OykvLmV4ZWMoYSk7aWYoZGIpcmV0dXJuL1dlYktpdFxcLyhcXFMrKS8uZXhlYyhhKTtpZigkYSlyZXR1cm4vKD86VmVyc2lvbilbIFxcL10/KFxcUyspLy5leGVjKGEpfSgpO2hiJiYoZ2I9aGI/aGJbMV06XCJcIik7aWYoeSl7dmFyIGliPWViKCk7aWYobnVsbCE9aWImJmliPnBhcnNlRmxvYXQoZ2IpKXtmYj1TdHJpbmcoaWIpO2JyZWFrIGF9fWZiPWdifXZhciBaYT17fTtcbmZ1bmN0aW9uIGpiKGEpe3JldHVybiBZYShhLGZ1bmN0aW9uKCl7Zm9yKHZhciBiPTAsYz1wYShTdHJpbmcoZmIpKS5zcGxpdChcIi5cIiksZD1wYShTdHJpbmcoYSkpLnNwbGl0KFwiLlwiKSxlPU1hdGgubWF4KGMubGVuZ3RoLGQubGVuZ3RoKSxmPTA7MD09YiYmZjxlO2YrKyl7dmFyIGc9Y1tmXXx8XCJcIixsPWRbZl18fFwiXCI7ZG97Zz0vKFxcZCopKFxcRCopKC4qKS8uZXhlYyhnKXx8W1wiXCIsXCJcIixcIlwiLFwiXCJdO2w9LyhcXGQqKShcXEQqKSguKikvLmV4ZWMobCl8fFtcIlwiLFwiXCIsXCJcIixcIlwiXTtpZigwPT1nWzBdLmxlbmd0aCYmMD09bFswXS5sZW5ndGgpYnJlYWs7Yj15YSgwPT1nWzFdLmxlbmd0aD8wOnBhcnNlSW50KGdbMV0sMTApLDA9PWxbMV0ubGVuZ3RoPzA6cGFyc2VJbnQobFsxXSwxMCkpfHx5YSgwPT1nWzJdLmxlbmd0aCwwPT1sWzJdLmxlbmd0aCl8fHlhKGdbMl0sbFsyXSk7Zz1nWzNdO2w9bFszXX13aGlsZSgwPT1iKX1yZXR1cm4gMDw9Yn0pfXZhciBrYjt2YXIgbGI9ay5kb2N1bWVudDtcbmtiPWxiJiZ5P2ViKCl8fChcIkNTUzFDb21wYXRcIj09bGIuY29tcGF0TW9kZT9wYXJzZUludChmYiwxMCk6NSk6dm9pZCAwO2Z1bmN0aW9uIG1iKGEpe2EucHJvdG90eXBlLnRoZW49YS5wcm90b3R5cGUudGhlbjthLnByb3RvdHlwZS4kZ29vZ19UaGVuYWJsZT0hMH1mdW5jdGlvbiBuYihhKXtpZighYSlyZXR1cm4hMTt0cnl7cmV0dXJuISFhLiRnb29nX1RoZW5hYmxlfWNhdGNoKGIpe3JldHVybiExfX07ZnVuY3Rpb24gb2IoYSxiLGMpe3RoaXMuZj1jO3RoaXMuYz1hO3RoaXMuZz1iO3RoaXMuYj0wO3RoaXMuYT1udWxsfW9iLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXtpZigwPHRoaXMuYil7dGhpcy5iLS07dmFyIGE9dGhpcy5hO3RoaXMuYT1hLm5leHQ7YS5uZXh0PW51bGx9ZWxzZSBhPXRoaXMuYygpO3JldHVybiBhfTtmdW5jdGlvbiBwYihhLGIpe2EuZyhiKTthLmI8YS5mJiYoYS5iKyssYi5uZXh0PWEuYSxhLmE9Yil9O3ZhciByYj1uZXcgb2IoZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHFifSxmdW5jdGlvbihhKXthLnJlc2V0KCl9LDEwMCk7ZnVuY3Rpb24gc2IoKXt2YXIgYT10YixiPW51bGw7YS5hJiYoYj1hLmEsYS5hPWEuYS5uZXh0LGEuYXx8KGEuYj1udWxsKSxiLm5leHQ9bnVsbCk7cmV0dXJuIGJ9ZnVuY3Rpb24gcWIoKXt0aGlzLm5leHQ9dGhpcy5iPXRoaXMuYT1udWxsfXFiLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oYSxiKXt0aGlzLmE9YTt0aGlzLmI9Yjt0aGlzLm5leHQ9bnVsbH07cWIucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5uZXh0PXRoaXMuYj10aGlzLmE9bnVsbH07ZnVuY3Rpb24gdWIoYSl7ay5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgYTt9LDApfXZhciB3YjtcbmZ1bmN0aW9uIHhiKCl7dmFyIGE9ay5NZXNzYWdlQ2hhbm5lbDtcInVuZGVmaW5lZFwiPT09dHlwZW9mIGEmJlwidW5kZWZpbmVkXCIhPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cucG9zdE1lc3NhZ2UmJndpbmRvdy5hZGRFdmVudExpc3RlbmVyJiYheChcIlByZXN0b1wiKSYmKGE9ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiSUZSQU1FXCIpO2Euc3R5bGUuZGlzcGxheT1cIm5vbmVcIjthLnNyYz1cIlwiO2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChhKTt2YXIgYj1hLmNvbnRlbnRXaW5kb3c7YT1iLmRvY3VtZW50O2Eub3BlbigpO2Eud3JpdGUoXCJcIik7YS5jbG9zZSgpO3ZhciBjPVwiY2FsbEltbWVkaWF0ZVwiK01hdGgucmFuZG9tKCksZD1cImZpbGU6XCI9PWIubG9jYXRpb24ucHJvdG9jb2w/XCIqXCI6Yi5sb2NhdGlvbi5wcm90b2NvbCtcIi8vXCIrYi5sb2NhdGlvbi5ob3N0O2E9cihmdW5jdGlvbihhKXtpZigoXCIqXCI9PWR8fGEub3JpZ2luPT1kKSYmYS5kYXRhPT1cbmMpdGhpcy5wb3J0MS5vbm1lc3NhZ2UoKX0sdGhpcyk7Yi5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLGEsITEpO3RoaXMucG9ydDE9e307dGhpcy5wb3J0Mj17cG9zdE1lc3NhZ2U6ZnVuY3Rpb24oKXtiLnBvc3RNZXNzYWdlKGMsZCl9fX0pO2lmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgYSYmIXgoXCJUcmlkZW50XCIpJiYheChcIk1TSUVcIikpe3ZhciBiPW5ldyBhLGM9e30sZD1jO2IucG9ydDEub25tZXNzYWdlPWZ1bmN0aW9uKCl7aWYodm9pZCAwIT09Yy5uZXh0KXtjPWMubmV4dDt2YXIgYT1jLnBiO2MucGI9bnVsbDthKCl9fTtyZXR1cm4gZnVuY3Rpb24oYSl7ZC5uZXh0PXtwYjphfTtkPWQubmV4dDtiLnBvcnQyLnBvc3RNZXNzYWdlKDApfX1yZXR1cm5cInVuZGVmaW5lZFwiIT09dHlwZW9mIGRvY3VtZW50JiZcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIlNDUklQVFwiKT9mdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiU0NSSVBUXCIpO1xuYi5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtiLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsO2IucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTtiPW51bGw7YSgpO2E9bnVsbH07ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKGIpfTpmdW5jdGlvbihhKXtrLnNldFRpbWVvdXQoYSwwKX19O2Z1bmN0aW9uIHliKGEsYil7emJ8fEFiKCk7QmJ8fCh6YigpLEJiPSEwKTt2YXIgYz10YixkPXJiLmdldCgpO2Quc2V0KGEsYik7Yy5iP2MuYi5uZXh0PWQ6Yy5hPWQ7Yy5iPWR9dmFyIHpiO2Z1bmN0aW9uIEFiKCl7aWYoLTEhPVN0cmluZyhrLlByb21pc2UpLmluZGV4T2YoXCJbbmF0aXZlIGNvZGVdXCIpKXt2YXIgYT1rLlByb21pc2UucmVzb2x2ZSh2b2lkIDApO3piPWZ1bmN0aW9uKCl7YS50aGVuKENiKX19ZWxzZSB6Yj1mdW5jdGlvbigpe3ZhciBhPUNiOyFwKGsuc2V0SW1tZWRpYXRlKXx8ay5XaW5kb3cmJmsuV2luZG93LnByb3RvdHlwZSYmIXgoXCJFZGdlXCIpJiZrLldpbmRvdy5wcm90b3R5cGUuc2V0SW1tZWRpYXRlPT1rLnNldEltbWVkaWF0ZT8od2J8fCh3Yj14YigpKSx3YihhKSk6ay5zZXRJbW1lZGlhdGUoYSl9fXZhciBCYj0hMSx0Yj1uZXcgZnVuY3Rpb24oKXt0aGlzLmI9dGhpcy5hPW51bGx9O1xuZnVuY3Rpb24gQ2IoKXtmb3IodmFyIGE7YT1zYigpOyl7dHJ5e2EuYS5jYWxsKGEuYil9Y2F0Y2goYil7dWIoYil9cGIocmIsYSl9QmI9ITF9O2Z1bmN0aW9uIHooYSxiKXt0aGlzLmE9RGI7dGhpcy5pPXZvaWQgMDt0aGlzLmY9dGhpcy5iPXRoaXMuYz1udWxsO3RoaXMuZz10aGlzLmg9ITE7aWYoYSE9Y2EpdHJ5e3ZhciBjPXRoaXM7YS5jYWxsKGIsZnVuY3Rpb24oYSl7RWIoYyxGYixhKX0sZnVuY3Rpb24oYSl7aWYoIShhIGluc3RhbmNlb2YgR2IpKXRyeXtpZihhIGluc3RhbmNlb2YgRXJyb3IpdGhyb3cgYTt0aHJvdyBFcnJvcihcIlByb21pc2UgcmVqZWN0ZWQuXCIpO31jYXRjaChlKXt9RWIoYyxIYixhKX0pfWNhdGNoKGQpe0ViKHRoaXMsSGIsZCl9fXZhciBEYj0wLEZiPTIsSGI9MztmdW5jdGlvbiBJYigpe3RoaXMubmV4dD10aGlzLmY9dGhpcy5iPXRoaXMuZz10aGlzLmE9bnVsbDt0aGlzLmM9ITF9SWIucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5mPXRoaXMuYj10aGlzLmc9dGhpcy5hPW51bGw7dGhpcy5jPSExfTtcbnZhciBKYj1uZXcgb2IoZnVuY3Rpb24oKXtyZXR1cm4gbmV3IElifSxmdW5jdGlvbihhKXthLnJlc2V0KCl9LDEwMCk7ZnVuY3Rpb24gS2IoYSxiLGMpe3ZhciBkPUpiLmdldCgpO2QuZz1hO2QuYj1iO2QuZj1jO3JldHVybiBkfWZ1bmN0aW9uIEEoYSl7aWYoYSBpbnN0YW5jZW9mIHopcmV0dXJuIGE7dmFyIGI9bmV3IHooY2EpO0ViKGIsRmIsYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gQihhKXtyZXR1cm4gbmV3IHooZnVuY3Rpb24oYixjKXtjKGEpfSl9ZnVuY3Rpb24gTGIoYSxiLGMpe01iKGEsYixjLG51bGwpfHx5YihtYShiLGEpKX1mdW5jdGlvbiBOYihhKXtyZXR1cm4gbmV3IHooZnVuY3Rpb24oYixjKXt2YXIgZD1hLmxlbmd0aCxlPVtdO2lmKGQpZm9yKHZhciBmPWZ1bmN0aW9uKGEsYyl7ZC0tO2VbYV09YzswPT1kJiZiKGUpfSxnPWZ1bmN0aW9uKGEpe2MoYSl9LGw9MCxuO2w8YS5sZW5ndGg7bCsrKW49YVtsXSxMYihuLG1hKGYsbCksZyk7ZWxzZSBiKGUpfSl9XG5mdW5jdGlvbiBPYihhKXtyZXR1cm4gbmV3IHooZnVuY3Rpb24oYil7dmFyIGM9YS5sZW5ndGgsZD1bXTtpZihjKWZvcih2YXIgZT1mdW5jdGlvbihhLGUsZil7Yy0tO2RbYV09ZT97VWI6ITAsdmFsdWU6Zn06e1ViOiExLHJlYXNvbjpmfTswPT1jJiZiKGQpfSxmPTAsZztmPGEubGVuZ3RoO2YrKylnPWFbZl0sTGIoZyxtYShlLGYsITApLG1hKGUsZiwhMSkpO2Vsc2UgYihkKX0pfXoucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBQYih0aGlzLHAoYSk/YTpudWxsLHAoYik/YjpudWxsLGMpfTttYih6KTtmdW5jdGlvbiBRYihhLGIpe2I9S2IoYixiLHZvaWQgMCk7Yi5jPSEwO1JiKGEsYik7cmV0dXJuIGF9aD16LnByb3RvdHlwZTtoLnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUGIodGhpcyxudWxsLGEsYil9O2guY2FuY2VsPWZ1bmN0aW9uKGEpe3RoaXMuYT09RGImJnliKGZ1bmN0aW9uKCl7dmFyIGI9bmV3IEdiKGEpO1NiKHRoaXMsYil9LHRoaXMpfTtcbmZ1bmN0aW9uIFNiKGEsYil7aWYoYS5hPT1EYilpZihhLmMpe3ZhciBjPWEuYztpZihjLmIpe2Zvcih2YXIgZD0wLGU9bnVsbCxmPW51bGwsZz1jLmI7ZyYmKGcuY3x8KGQrKyxnLmE9PWEmJihlPWcpLCEoZSYmMTxkKSkpO2c9Zy5uZXh0KWV8fChmPWcpO2UmJihjLmE9PURiJiYxPT1kP1NiKGMsYik6KGY/KGQ9ZixkLm5leHQ9PWMuZiYmKGMuZj1kKSxkLm5leHQ9ZC5uZXh0Lm5leHQpOlRiKGMpLFViKGMsZSxIYixiKSkpfWEuYz1udWxsfWVsc2UgRWIoYSxIYixiKX1mdW5jdGlvbiBSYihhLGIpe2EuYnx8YS5hIT1GYiYmYS5hIT1IYnx8VmIoYSk7YS5mP2EuZi5uZXh0PWI6YS5iPWI7YS5mPWJ9XG5mdW5jdGlvbiBQYihhLGIsYyxkKXt2YXIgZT1LYihudWxsLG51bGwsbnVsbCk7ZS5hPW5ldyB6KGZ1bmN0aW9uKGEsZyl7ZS5nPWI/ZnVuY3Rpb24oYyl7dHJ5e3ZhciBlPWIuY2FsbChkLGMpO2EoZSl9Y2F0Y2goRCl7ZyhEKX19OmE7ZS5iPWM/ZnVuY3Rpb24oYil7dHJ5e3ZhciBlPWMuY2FsbChkLGIpO3ZvaWQgMD09PWUmJmIgaW5zdGFuY2VvZiBHYj9nKGIpOmEoZSl9Y2F0Y2goRCl7ZyhEKX19Omd9KTtlLmEuYz1hO1JiKGEsZSk7cmV0dXJuIGUuYX1oLkFjPWZ1bmN0aW9uKGEpe3RoaXMuYT1EYjtFYih0aGlzLEZiLGEpfTtoLkJjPWZ1bmN0aW9uKGEpe3RoaXMuYT1EYjtFYih0aGlzLEhiLGEpfTtcbmZ1bmN0aW9uIEViKGEsYixjKXthLmE9PURiJiYoYT09PWMmJihiPUhiLGM9bmV3IFR5cGVFcnJvcihcIlByb21pc2UgY2Fubm90IHJlc29sdmUgdG8gaXRzZWxmXCIpKSxhLmE9MSxNYihjLGEuQWMsYS5CYyxhKXx8KGEuaT1jLGEuYT1iLGEuYz1udWxsLFZiKGEpLGIhPUhifHxjIGluc3RhbmNlb2YgR2J8fFdiKGEsYykpKX1mdW5jdGlvbiBNYihhLGIsYyxkKXtpZihhIGluc3RhbmNlb2YgeilyZXR1cm4gUmIoYSxLYihifHxjYSxjfHxudWxsLGQpKSwhMDtpZihuYihhKSlyZXR1cm4gYS50aGVuKGIsYyxkKSwhMDtpZihxKGEpKXRyeXt2YXIgZT1hLnRoZW47aWYocChlKSlyZXR1cm4gWGIoYSxlLGIsYyxkKSwhMH1jYXRjaChmKXtyZXR1cm4gYy5jYWxsKGQsZiksITB9cmV0dXJuITF9XG5mdW5jdGlvbiBYYihhLGIsYyxkLGUpe2Z1bmN0aW9uIGYoYSl7bHx8KGw9ITAsZC5jYWxsKGUsYSkpfWZ1bmN0aW9uIGcoYSl7bHx8KGw9ITAsYy5jYWxsKGUsYSkpfXZhciBsPSExO3RyeXtiLmNhbGwoYSxnLGYpfWNhdGNoKG4pe2Yobil9fWZ1bmN0aW9uIFZiKGEpe2EuaHx8KGEuaD0hMCx5YihhLlFiLGEpKX1mdW5jdGlvbiBUYihhKXt2YXIgYj1udWxsO2EuYiYmKGI9YS5iLGEuYj1iLm5leHQsYi5uZXh0PW51bGwpO2EuYnx8KGEuZj1udWxsKTtyZXR1cm4gYn1oLlFiPWZ1bmN0aW9uKCl7Zm9yKHZhciBhO2E9VGIodGhpcyk7KVViKHRoaXMsYSx0aGlzLmEsdGhpcy5pKTt0aGlzLmg9ITF9O1xuZnVuY3Rpb24gVWIoYSxiLGMsZCl7aWYoYz09SGImJmIuYiYmIWIuYylmb3IoO2EmJmEuZzthPWEuYylhLmc9ITE7aWYoYi5hKWIuYS5jPW51bGwsWWIoYixjLGQpO2Vsc2UgdHJ5e2IuYz9iLmcuY2FsbChiLmYpOlliKGIsYyxkKX1jYXRjaChlKXtaYi5jYWxsKG51bGwsZSl9cGIoSmIsYil9ZnVuY3Rpb24gWWIoYSxiLGMpe2I9PUZiP2EuZy5jYWxsKGEuZixjKTphLmImJmEuYi5jYWxsKGEuZixjKX1mdW5jdGlvbiBXYihhLGIpe2EuZz0hMDt5YihmdW5jdGlvbigpe2EuZyYmWmIuY2FsbChudWxsLGIpfSl9dmFyIFpiPXViO2Z1bmN0aW9uIEdiKGEpe3UuY2FsbCh0aGlzLGEpfXQoR2IsdSk7R2IucHJvdG90eXBlLm5hbWU9XCJjYW5jZWxcIjt2YXIgJGI9IXl8fDk8PU51bWJlcihrYik7ZnVuY3Rpb24gYWMoKXt0aGlzLmE9XCJcIjt0aGlzLmI9YmN9YWMucHJvdG90eXBlLmxhPSEwO2FjLnByb3RvdHlwZS5qYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmF9O2FjLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiQ29uc3R7XCIrdGhpcy5hK1wifVwifTtmdW5jdGlvbiBjYyhhKXtpZihhIGluc3RhbmNlb2YgYWMmJmEuY29uc3RydWN0b3I9PT1hYyYmYS5iPT09YmMpcmV0dXJuIGEuYTtBYShcImV4cGVjdGVkIG9iamVjdCBvZiB0eXBlIENvbnN0LCBnb3QgJ1wiK2ErXCInXCIpO3JldHVyblwidHlwZV9lcnJvcjpDb25zdFwifXZhciBiYz17fTtmdW5jdGlvbiBkYyhhKXt2YXIgYj1uZXcgYWM7Yi5hPWE7cmV0dXJuIGJ9ZGMoXCJcIik7ZnVuY3Rpb24gZWMoKXt0aGlzLmE9XCJcIjt0aGlzLmI9ZmN9ZWMucHJvdG90eXBlLmxhPSEwO2VjLnByb3RvdHlwZS5qYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmF9O2VjLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiVHJ1c3RlZFJlc291cmNlVXJse1wiK3RoaXMuYStcIn1cIn07ZnVuY3Rpb24gZ2MoYSl7aWYoYSBpbnN0YW5jZW9mIGVjJiZhLmNvbnN0cnVjdG9yPT09ZWMmJmEuYj09PWZjKXJldHVybiBhLmE7QWEoXCJleHBlY3RlZCBvYmplY3Qgb2YgdHlwZSBUcnVzdGVkUmVzb3VyY2VVcmwsIGdvdCAnXCIrYStcIicgb2YgdHlwZSBcIitkYShhKSk7cmV0dXJuXCJ0eXBlX2Vycm9yOlRydXN0ZWRSZXNvdXJjZVVybFwifWZ1bmN0aW9uIGhjKGEsYil7YT1pYyhhLGIpO2I9bmV3IGVjO2IuYT1hO3JldHVybiBifVxuZnVuY3Rpb24gaWMoYSxiKXt2YXIgYz1jYyhhKTtpZighamMudGVzdChjKSl0aHJvdyBFcnJvcihcIkludmFsaWQgVHJ1c3RlZFJlc291cmNlVXJsIGZvcm1hdDogXCIrYyk7cmV0dXJuIGMucmVwbGFjZShrYyxmdW5jdGlvbihhLGUpe2lmKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYixlKSl0aHJvdyBFcnJvcignRm91bmQgbWFya2VyLCBcIicrZSsnXCIsIGluIGZvcm1hdCBzdHJpbmcsIFwiJytjKydcIiwgYnV0IG5vIHZhbGlkIGxhYmVsIG1hcHBpbmcgZm91bmQgaW4gYXJnczogJytKU09OLnN0cmluZ2lmeShiKSk7YT1iW2VdO3JldHVybiBhIGluc3RhbmNlb2YgYWM/Y2MoYSk6ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhhKSl9KX12YXIga2M9LyV7KFxcdyspfS9nLGpjPS9eKD86aHR0cHM6KT9cXC9cXC9bMC05YS16LjpbXFxdLV0rXFwvfF5cXC9bXlxcL1xcXFxdfF5hYm91dDpibGFuaygjfCQpL2ksZmM9e307ZnVuY3Rpb24gbGMoKXt0aGlzLmE9XCJcIjt0aGlzLmI9bWN9bGMucHJvdG90eXBlLmxhPSEwO2xjLnByb3RvdHlwZS5qYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmF9O2xjLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiU2FmZVVybHtcIit0aGlzLmErXCJ9XCJ9O2Z1bmN0aW9uIG5jKGEpe2lmKGEgaW5zdGFuY2VvZiBsYyYmYS5jb25zdHJ1Y3Rvcj09PWxjJiZhLmI9PT1tYylyZXR1cm4gYS5hO0FhKFwiZXhwZWN0ZWQgb2JqZWN0IG9mIHR5cGUgU2FmZVVybCwgZ290ICdcIithK1wiJyBvZiB0eXBlIFwiK2RhKGEpKTtyZXR1cm5cInR5cGVfZXJyb3I6U2FmZVVybFwifXZhciBvYz0vXig/Oig/Omh0dHBzP3xtYWlsdG98ZnRwKTp8W146Lz8jXSooPzpbLz8jXXwkKSkvaTtcbmZ1bmN0aW9uIHBjKGEpe2lmKGEgaW5zdGFuY2VvZiBsYylyZXR1cm4gYTthPWEubGE/YS5qYSgpOlN0cmluZyhhKTtvYy50ZXN0KGEpfHwoYT1cImFib3V0OmludmFsaWQjekNsb3N1cmV6XCIpO3JldHVybiBxYyhhKX12YXIgbWM9e307ZnVuY3Rpb24gcWMoYSl7dmFyIGI9bmV3IGxjO2IuYT1hO3JldHVybiBifXFjKFwiYWJvdXQ6YmxhbmtcIik7ZnVuY3Rpb24gcmMoKXt0aGlzLmE9XCJcIjt0aGlzLmI9c2N9cmMucHJvdG90eXBlLmxhPSEwO3JjLnByb3RvdHlwZS5qYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmF9O3JjLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiU2FmZUh0bWx7XCIrdGhpcy5hK1wifVwifTtmdW5jdGlvbiB1YyhhKXtpZihhIGluc3RhbmNlb2YgcmMmJmEuY29uc3RydWN0b3I9PT1yYyYmYS5iPT09c2MpcmV0dXJuIGEuYTtBYShcImV4cGVjdGVkIG9iamVjdCBvZiB0eXBlIFNhZmVIdG1sLCBnb3QgJ1wiK2ErXCInIG9mIHR5cGUgXCIrZGEoYSkpO3JldHVyblwidHlwZV9lcnJvcjpTYWZlSHRtbFwifXZhciBzYz17fTtmdW5jdGlvbiB2YyhhKXt2YXIgYj1uZXcgcmM7Yi5hPWE7cmV0dXJuIGJ9dmMoXCI8IURPQ1RZUEUgaHRtbD5cIik7dmMoXCJcIik7dmMoXCI8YnI+XCIpO2Z1bmN0aW9uIHdjKGEpe3ZhciBiPWRvY3VtZW50O3JldHVybiBtKGEpP2IuZ2V0RWxlbWVudEJ5SWQoYSk6YX1mdW5jdGlvbiB4YyhhLGIpe1BhKGIsZnVuY3Rpb24oYixkKXtiJiZiLmxhJiYoYj1iLmphKCkpO1wic3R5bGVcIj09ZD9hLnN0eWxlLmNzc1RleHQ9YjpcImNsYXNzXCI9PWQ/YS5jbGFzc05hbWU9YjpcImZvclwiPT1kP2EuaHRtbEZvcj1iOnljLmhhc093blByb3BlcnR5KGQpP2Euc2V0QXR0cmlidXRlKHljW2RdLGIpOjA9PWQubGFzdEluZGV4T2YoXCJhcmlhLVwiLDApfHwwPT1kLmxhc3RJbmRleE9mKFwiZGF0YS1cIiwwKT9hLnNldEF0dHJpYnV0ZShkLGIpOmFbZF09Yn0pfVxudmFyIHljPXtjZWxscGFkZGluZzpcImNlbGxQYWRkaW5nXCIsY2VsbHNwYWNpbmc6XCJjZWxsU3BhY2luZ1wiLGNvbHNwYW46XCJjb2xTcGFuXCIsZnJhbWVib3JkZXI6XCJmcmFtZUJvcmRlclwiLGhlaWdodDpcImhlaWdodFwiLG1heGxlbmd0aDpcIm1heExlbmd0aFwiLG5vbmNlOlwibm9uY2VcIixyb2xlOlwicm9sZVwiLHJvd3NwYW46XCJyb3dTcGFuXCIsdHlwZTpcInR5cGVcIix1c2VtYXA6XCJ1c2VNYXBcIix2YWxpZ246XCJ2QWxpZ25cIix3aWR0aDpcIndpZHRoXCJ9O1xuZnVuY3Rpb24gemMoYSxiLGMpe3ZhciBkPWFyZ3VtZW50cyxlPWRvY3VtZW50LGY9U3RyaW5nKGRbMF0pLGc9ZFsxXTtpZighJGImJmcmJihnLm5hbWV8fGcudHlwZSkpe2Y9W1wiPFwiLGZdO2cubmFtZSYmZi5wdXNoKCcgbmFtZT1cIicscWEoZy5uYW1lKSwnXCInKTtpZihnLnR5cGUpe2YucHVzaCgnIHR5cGU9XCInLHFhKGcudHlwZSksJ1wiJyk7dmFyIGw9e307V2EobCxnKTtkZWxldGUgbC50eXBlO2c9bH1mLnB1c2goXCI+XCIpO2Y9Zi5qb2luKFwiXCIpfWY9ZS5jcmVhdGVFbGVtZW50KGYpO2cmJihtKGcpP2YuY2xhc3NOYW1lPWc6ZmEoZyk/Zi5jbGFzc05hbWU9Zy5qb2luKFwiIFwiKTp4YyhmLGcpKTsyPGQubGVuZ3RoJiZBYyhlLGYsZCk7cmV0dXJuIGZ9XG5mdW5jdGlvbiBBYyhhLGIsYyl7ZnVuY3Rpb24gZChjKXtjJiZiLmFwcGVuZENoaWxkKG0oYyk/YS5jcmVhdGVUZXh0Tm9kZShjKTpjKX1mb3IodmFyIGU9MjtlPGMubGVuZ3RoO2UrKyl7dmFyIGY9Y1tlXTshaGEoZil8fHEoZikmJjA8Zi5ub2RlVHlwZT9kKGYpOncoQmMoZik/TGEoZik6ZixkKX19ZnVuY3Rpb24gQmMoYSl7aWYoYSYmXCJudW1iZXJcIj09dHlwZW9mIGEubGVuZ3RoKXtpZihxKGEpKXJldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGEuaXRlbXx8XCJzdHJpbmdcIj09dHlwZW9mIGEuaXRlbTtpZihwKGEpKXJldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGEuaXRlbX1yZXR1cm4hMX07ZnVuY3Rpb24gQ2MoYSl7dmFyIGI9W107RGMobmV3IEVjLGEsYik7cmV0dXJuIGIuam9pbihcIlwiKX1mdW5jdGlvbiBFYygpe31cbmZ1bmN0aW9uIERjKGEsYixjKXtpZihudWxsPT1iKWMucHVzaChcIm51bGxcIik7ZWxzZXtpZihcIm9iamVjdFwiPT10eXBlb2YgYil7aWYoZmEoYikpe3ZhciBkPWI7Yj1kLmxlbmd0aDtjLnB1c2goXCJbXCIpO2Zvcih2YXIgZT1cIlwiLGY9MDtmPGI7ZisrKWMucHVzaChlKSxEYyhhLGRbZl0sYyksZT1cIixcIjtjLnB1c2goXCJdXCIpO3JldHVybn1pZihiIGluc3RhbmNlb2YgU3RyaW5nfHxiIGluc3RhbmNlb2YgTnVtYmVyfHxiIGluc3RhbmNlb2YgQm9vbGVhbiliPWIudmFsdWVPZigpO2Vsc2V7Yy5wdXNoKFwie1wiKTtlPVwiXCI7Zm9yKGQgaW4gYilPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYixkKSYmKGY9YltkXSxcImZ1bmN0aW9uXCIhPXR5cGVvZiBmJiYoYy5wdXNoKGUpLEZjKGQsYyksYy5wdXNoKFwiOlwiKSxEYyhhLGYsYyksZT1cIixcIikpO2MucHVzaChcIn1cIik7cmV0dXJufX1zd2l0Y2godHlwZW9mIGIpe2Nhc2UgXCJzdHJpbmdcIjpGYyhiLGMpO2JyZWFrO2Nhc2UgXCJudW1iZXJcIjpjLnB1c2goaXNGaW5pdGUoYikmJlxuIWlzTmFOKGIpP1N0cmluZyhiKTpcIm51bGxcIik7YnJlYWs7Y2FzZSBcImJvb2xlYW5cIjpjLnB1c2goU3RyaW5nKGIpKTticmVhaztjYXNlIFwiZnVuY3Rpb25cIjpjLnB1c2goXCJudWxsXCIpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJVbmtub3duIHR5cGU6IFwiK3R5cGVvZiBiKTt9fX12YXIgR2M9eydcIic6J1xcXFxcIicsXCJcXFxcXCI6XCJcXFxcXFxcXFwiLFwiL1wiOlwiXFxcXC9cIixcIlxcYlwiOlwiXFxcXGJcIixcIlxcZlwiOlwiXFxcXGZcIixcIlxcblwiOlwiXFxcXG5cIixcIlxcclwiOlwiXFxcXHJcIixcIlxcdFwiOlwiXFxcXHRcIixcIlxceDBCXCI6XCJcXFxcdTAwMGJcIn0sSGM9L1xcdWZmZmYvLnRlc3QoXCJcXHVmZmZmXCIpPy9bXFxcXFxcXCJcXHgwMC1cXHgxZlxceDdmLVxcdWZmZmZdL2c6L1tcXFxcXFxcIlxceDAwLVxceDFmXFx4N2YtXFx4ZmZdL2c7XG5mdW5jdGlvbiBGYyhhLGIpe2IucHVzaCgnXCInLGEucmVwbGFjZShIYyxmdW5jdGlvbihhKXt2YXIgYj1HY1thXTtifHwoYj1cIlxcXFx1XCIrKGEuY2hhckNvZGVBdCgwKXw2NTUzNikudG9TdHJpbmcoMTYpLnN1YnN0cigxKSxHY1thXT1iKTtyZXR1cm4gYn0pLCdcIicpfTtmdW5jdGlvbiBJYygpezAhPUpjJiYoS2NbdGhpc1tpYV18fCh0aGlzW2lhXT0rK2phKV09dGhpcyk7dGhpcy5vYT10aGlzLm9hO3RoaXMuRmE9dGhpcy5GYX12YXIgSmM9MCxLYz17fTtJYy5wcm90b3R5cGUub2E9ITE7ZnVuY3Rpb24gTGMoYSl7YS5vYXx8KGEub2E9ITAsYS50YSgpLDAhPUpjJiYoYT1hW2lhXXx8KGFbaWFdPSsramEpLGRlbGV0ZSBLY1thXSkpfUljLnByb3RvdHlwZS50YT1mdW5jdGlvbigpe2lmKHRoaXMuRmEpZm9yKDt0aGlzLkZhLmxlbmd0aDspdGhpcy5GYS5zaGlmdCgpKCl9O3ZhciBNYz1PYmplY3QuZnJlZXplfHxmdW5jdGlvbihhKXtyZXR1cm4gYX07dmFyIE5jPSF5fHw5PD1OdW1iZXIoa2IpLE9jPXkmJiFqYihcIjlcIiksUGM9ZnVuY3Rpb24oKXtpZighay5hZGRFdmVudExpc3RlbmVyfHwhT2JqZWN0LmRlZmluZVByb3BlcnR5KXJldHVybiExO3ZhciBhPSExLGI9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LFwicGFzc2l2ZVwiLHtnZXQ6ZnVuY3Rpb24oKXthPSEwfX0pO2suYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RcIixjYSxiKTtrLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsY2EsYik7cmV0dXJuIGF9KCk7ZnVuY3Rpb24gQyhhLGIpe3RoaXMudHlwZT1hO3RoaXMuYj10aGlzLnRhcmdldD1iO3RoaXMuQmI9ITB9Qy5wcm90b3R5cGUuYz1mdW5jdGlvbigpe3RoaXMuQmI9ITF9O2Z1bmN0aW9uIFFjKGEsYil7Qy5jYWxsKHRoaXMsYT9hLnR5cGU6XCJcIik7dGhpcy5yZWxhdGVkVGFyZ2V0PXRoaXMuYj10aGlzLnRhcmdldD1udWxsO3RoaXMuYnV0dG9uPXRoaXMuc2NyZWVuWT10aGlzLnNjcmVlblg9dGhpcy5jbGllbnRZPXRoaXMuY2xpZW50WD0wO3RoaXMua2V5PVwiXCI7dGhpcy5tZXRhS2V5PXRoaXMuc2hpZnRLZXk9dGhpcy5hbHRLZXk9dGhpcy5jdHJsS2V5PSExO3RoaXMucG9pbnRlcklkPTA7dGhpcy5wb2ludGVyVHlwZT1cIlwiO3RoaXMuYT1udWxsO2lmKGEpe3ZhciBjPXRoaXMudHlwZT1hLnR5cGUsZD1hLmNoYW5nZWRUb3VjaGVzP2EuY2hhbmdlZFRvdWNoZXNbMF06bnVsbDt0aGlzLnRhcmdldD1hLnRhcmdldHx8YS5zcmNFbGVtZW50O3RoaXMuYj1iO2lmKGI9YS5yZWxhdGVkVGFyZ2V0KXtpZihjYil7YTp7dHJ5e1hhKGIubm9kZU5hbWUpO3ZhciBlPSEwO2JyZWFrIGF9Y2F0Y2goZil7fWU9ITF9ZXx8KGI9bnVsbCl9fWVsc2VcIm1vdXNlb3ZlclwiPT1jP2I9XG5hLmZyb21FbGVtZW50OlwibW91c2VvdXRcIj09YyYmKGI9YS50b0VsZW1lbnQpO3RoaXMucmVsYXRlZFRhcmdldD1iO251bGw9PT1kPyh0aGlzLmNsaWVudFg9dm9pZCAwIT09YS5jbGllbnRYP2EuY2xpZW50WDphLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1hLmNsaWVudFk/YS5jbGllbnRZOmEucGFnZVksdGhpcy5zY3JlZW5YPWEuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9YS5zY3JlZW5ZfHwwKToodGhpcy5jbGllbnRYPXZvaWQgMCE9PWQuY2xpZW50WD9kLmNsaWVudFg6ZC5wYWdlWCx0aGlzLmNsaWVudFk9dm9pZCAwIT09ZC5jbGllbnRZP2QuY2xpZW50WTpkLnBhZ2VZLHRoaXMuc2NyZWVuWD1kLnNjcmVlblh8fDAsdGhpcy5zY3JlZW5ZPWQuc2NyZWVuWXx8MCk7dGhpcy5idXR0b249YS5idXR0b247dGhpcy5rZXk9YS5rZXl8fFwiXCI7dGhpcy5jdHJsS2V5PWEuY3RybEtleTt0aGlzLmFsdEtleT1hLmFsdEtleTt0aGlzLnNoaWZ0S2V5PWEuc2hpZnRLZXk7dGhpcy5tZXRhS2V5PVxuYS5tZXRhS2V5O3RoaXMucG9pbnRlcklkPWEucG9pbnRlcklkfHwwO3RoaXMucG9pbnRlclR5cGU9bShhLnBvaW50ZXJUeXBlKT9hLnBvaW50ZXJUeXBlOlJjW2EucG9pbnRlclR5cGVdfHxcIlwiO3RoaXMuYT1hO2EuZGVmYXVsdFByZXZlbnRlZCYmdGhpcy5jKCl9fXQoUWMsQyk7dmFyIFJjPU1jKHsyOlwidG91Y2hcIiwzOlwicGVuXCIsNDpcIm1vdXNlXCJ9KTtRYy5wcm90b3R5cGUuYz1mdW5jdGlvbigpe1FjLmliLmMuY2FsbCh0aGlzKTt2YXIgYT10aGlzLmE7aWYoYS5wcmV2ZW50RGVmYXVsdClhLnByZXZlbnREZWZhdWx0KCk7ZWxzZSBpZihhLnJldHVyblZhbHVlPSExLE9jKXRyeXtpZihhLmN0cmxLZXl8fDExMjw9YS5rZXlDb2RlJiYxMjM+PWEua2V5Q29kZSlhLmtleUNvZGU9LTF9Y2F0Y2goYil7fX07UWMucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hfTt2YXIgU2M9XCJjbG9zdXJlX2xpc3RlbmFibGVfXCIrKDFFNipNYXRoLnJhbmRvbSgpfDApLFRjPTA7ZnVuY3Rpb24gVWMoYSxiLGMsZCxlKXt0aGlzLmxpc3RlbmVyPWE7dGhpcy5hPW51bGw7dGhpcy5zcmM9Yjt0aGlzLnR5cGU9Yzt0aGlzLmNhcHR1cmU9ISFkO3RoaXMuTGE9ZTt0aGlzLmtleT0rK1RjO3RoaXMubWE9dGhpcy5IYT0hMX1mdW5jdGlvbiBWYyhhKXthLm1hPSEwO2EubGlzdGVuZXI9bnVsbDthLmE9bnVsbDthLnNyYz1udWxsO2EuTGE9bnVsbH07ZnVuY3Rpb24gV2MoYSl7dGhpcy5zcmM9YTt0aGlzLmE9e307dGhpcy5iPTB9ZnVuY3Rpb24gWGMoYSxiLGMsZCxlLGYpe3ZhciBnPWIudG9TdHJpbmcoKTtiPWEuYVtnXTtifHwoYj1hLmFbZ109W10sYS5iKyspO3ZhciBsPVljKGIsYyxlLGYpOy0xPGw/KGE9YltsXSxkfHwoYS5IYT0hMSkpOihhPW5ldyBVYyhjLGEuc3JjLGcsISFlLGYpLGEuSGE9ZCxiLnB1c2goYSkpO3JldHVybiBhfWZ1bmN0aW9uIFpjKGEsYil7dmFyIGM9Yi50eXBlO2MgaW4gYS5hJiZJYShhLmFbY10sYikmJihWYyhiKSwwPT1hLmFbY10ubGVuZ3RoJiYoZGVsZXRlIGEuYVtjXSxhLmItLSkpfWZ1bmN0aW9uIFljKGEsYixjLGQpe2Zvcih2YXIgZT0wO2U8YS5sZW5ndGg7KytlKXt2YXIgZj1hW2VdO2lmKCFmLm1hJiZmLmxpc3RlbmVyPT1iJiZmLmNhcHR1cmU9PSEhYyYmZi5MYT09ZClyZXR1cm4gZX1yZXR1cm4tMX07dmFyICRjPVwiY2xvc3VyZV9sbV9cIisoMUU2Kk1hdGgucmFuZG9tKCl8MCksYWQ9e30sYmQ9MDtmdW5jdGlvbiBjZChhLGIsYyxkLGUpe2lmKGQmJmQub25jZSlkZChhLGIsYyxkLGUpO2Vsc2UgaWYoZmEoYikpZm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspY2QoYSxiW2ZdLGMsZCxlKTtlbHNlIGM9ZWQoYyksYSYmYVtTY10/ZmQoYSxiLGMscShkKT8hIWQuY2FwdHVyZTohIWQsZSk6Z2QoYSxiLGMsITEsZCxlKX1cbmZ1bmN0aW9uIGdkKGEsYixjLGQsZSxmKXtpZighYil0aHJvdyBFcnJvcihcIkludmFsaWQgZXZlbnQgdHlwZVwiKTt2YXIgZz1xKGUpPyEhZS5jYXB0dXJlOiEhZSxsPWhkKGEpO2x8fChhWyRjXT1sPW5ldyBXYyhhKSk7Yz1YYyhsLGIsYyxkLGcsZik7aWYoIWMuYSl7ZD1pZCgpO2MuYT1kO2Quc3JjPWE7ZC5saXN0ZW5lcj1jO2lmKGEuYWRkRXZlbnRMaXN0ZW5lcilQY3x8KGU9Zyksdm9pZCAwPT09ZSYmKGU9ITEpLGEuYWRkRXZlbnRMaXN0ZW5lcihiLnRvU3RyaW5nKCksZCxlKTtlbHNlIGlmKGEuYXR0YWNoRXZlbnQpYS5hdHRhY2hFdmVudChqZChiLnRvU3RyaW5nKCkpLGQpO2Vsc2UgdGhyb3cgRXJyb3IoXCJhZGRFdmVudExpc3RlbmVyIGFuZCBhdHRhY2hFdmVudCBhcmUgdW5hdmFpbGFibGUuXCIpO2JkKyt9fVxuZnVuY3Rpb24gaWQoKXt2YXIgYT1rZCxiPU5jP2Z1bmN0aW9uKGMpe3JldHVybiBhLmNhbGwoYi5zcmMsYi5saXN0ZW5lcixjKX06ZnVuY3Rpb24oYyl7Yz1hLmNhbGwoYi5zcmMsYi5saXN0ZW5lcixjKTtpZighYylyZXR1cm4gY307cmV0dXJuIGJ9ZnVuY3Rpb24gZGQoYSxiLGMsZCxlKXtpZihmYShiKSlmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKylkZChhLGJbZl0sYyxkLGUpO2Vsc2UgYz1lZChjKSxhJiZhW1NjXT9sZChhLGIsYyxxKGQpPyEhZC5jYXB0dXJlOiEhZCxlKTpnZChhLGIsYywhMCxkLGUpfVxuZnVuY3Rpb24gRShhLGIsYyxkLGUpe2lmKGZhKGIpKWZvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKUUoYSxiW2ZdLGMsZCxlKTtlbHNlKGQ9cShkKT8hIWQuY2FwdHVyZTohIWQsYz1lZChjKSxhJiZhW1NjXSk/KGE9YS51LGI9U3RyaW5nKGIpLnRvU3RyaW5nKCksYiBpbiBhLmEmJihmPWEuYVtiXSxjPVljKGYsYyxkLGUpLC0xPGMmJihWYyhmW2NdKSxBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZixjLDEpLDA9PWYubGVuZ3RoJiYoZGVsZXRlIGEuYVtiXSxhLmItLSkpKSk6YSYmKGE9aGQoYSkpJiYoYj1hLmFbYi50b1N0cmluZygpXSxhPS0xLGImJihhPVljKGIsYyxkLGUpKSwoYz0tMTxhP2JbYV06bnVsbCkmJm1kKGMpKX1cbmZ1bmN0aW9uIG1kKGEpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBhJiZhJiYhYS5tYSl7dmFyIGI9YS5zcmM7aWYoYiYmYltTY10pWmMoYi51LGEpO2Vsc2V7dmFyIGM9YS50eXBlLGQ9YS5hO2IucmVtb3ZlRXZlbnRMaXN0ZW5lcj9iLnJlbW92ZUV2ZW50TGlzdGVuZXIoYyxkLGEuY2FwdHVyZSk6Yi5kZXRhY2hFdmVudCYmYi5kZXRhY2hFdmVudChqZChjKSxkKTtiZC0tOyhjPWhkKGIpKT8oWmMoYyxhKSwwPT1jLmImJihjLnNyYz1udWxsLGJbJGNdPW51bGwpKTpWYyhhKX19fWZ1bmN0aW9uIGpkKGEpe3JldHVybiBhIGluIGFkP2FkW2FdOmFkW2FdPVwib25cIithfWZ1bmN0aW9uIG5kKGEsYixjLGQpe3ZhciBlPSEwO2lmKGE9aGQoYSkpaWYoYj1hLmFbYi50b1N0cmluZygpXSlmb3IoYj1iLmNvbmNhdCgpLGE9MDthPGIubGVuZ3RoO2ErKyl7dmFyIGY9YlthXTtmJiZmLmNhcHR1cmU9PWMmJiFmLm1hJiYoZj1vZChmLGQpLGU9ZSYmITEhPT1mKX1yZXR1cm4gZX1cbmZ1bmN0aW9uIG9kKGEsYil7dmFyIGM9YS5saXN0ZW5lcixkPWEuTGF8fGEuc3JjO2EuSGEmJm1kKGEpO3JldHVybiBjLmNhbGwoZCxiKX1cbmZ1bmN0aW9uIGtkKGEsYil7aWYoYS5tYSlyZXR1cm4hMDtpZighTmMpe2lmKCFiKWE6e2I9W1wid2luZG93XCIsXCJldmVudFwiXTtmb3IodmFyIGM9ayxkPTA7ZDxiLmxlbmd0aDtkKyspaWYoYz1jW2JbZF1dLG51bGw9PWMpe2I9bnVsbDticmVhayBhfWI9Y31kPWI7Yj1uZXcgUWMoZCx0aGlzKTtjPSEwO2lmKCEoMD5kLmtleUNvZGV8fHZvaWQgMCE9ZC5yZXR1cm5WYWx1ZSkpe2E6e3ZhciBlPSExO2lmKDA9PWQua2V5Q29kZSl0cnl7ZC5rZXlDb2RlPS0xO2JyZWFrIGF9Y2F0Y2goZyl7ZT0hMH1pZihlfHx2b2lkIDA9PWQucmV0dXJuVmFsdWUpZC5yZXR1cm5WYWx1ZT0hMH1kPVtdO2ZvcihlPWIuYjtlO2U9ZS5wYXJlbnROb2RlKWQucHVzaChlKTthPWEudHlwZTtmb3IoZT1kLmxlbmd0aC0xOzA8PWU7ZS0tKXtiLmI9ZFtlXTt2YXIgZj1uZChkW2VdLGEsITAsYik7Yz1jJiZmfWZvcihlPTA7ZTxkLmxlbmd0aDtlKyspYi5iPWRbZV0sZj1uZChkW2VdLGEsITEsYiksYz1jJiZmfXJldHVybiBjfXJldHVybiBvZChhLFxubmV3IFFjKGIsdGhpcykpfWZ1bmN0aW9uIGhkKGEpe2E9YVskY107cmV0dXJuIGEgaW5zdGFuY2VvZiBXYz9hOm51bGx9dmFyIHBkPVwiX19jbG9zdXJlX2V2ZW50c19mbl9cIisoMUU5Kk1hdGgucmFuZG9tKCk+Pj4wKTtmdW5jdGlvbiBlZChhKXtpZihwKGEpKXJldHVybiBhO2FbcGRdfHwoYVtwZF09ZnVuY3Rpb24oYil7cmV0dXJuIGEuaGFuZGxlRXZlbnQoYil9KTtyZXR1cm4gYVtwZF19O2Z1bmN0aW9uIEYoKXtJYy5jYWxsKHRoaXMpO3RoaXMudT1uZXcgV2ModGhpcyk7dGhpcy5JYj10aGlzO3RoaXMuUmE9bnVsbH10KEYsSWMpO0YucHJvdG90eXBlW1NjXT0hMDtGLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGEsYixjLGQpe0UodGhpcyxhLGIsYyxkKX07XG5mdW5jdGlvbiBHKGEsYil7dmFyIGMsZD1hLlJhO2lmKGQpZm9yKGM9W107ZDtkPWQuUmEpYy5wdXNoKGQpO2E9YS5JYjtkPWIudHlwZXx8YjtpZihtKGIpKWI9bmV3IEMoYixhKTtlbHNlIGlmKGIgaW5zdGFuY2VvZiBDKWIudGFyZ2V0PWIudGFyZ2V0fHxhO2Vsc2V7dmFyIGU9YjtiPW5ldyBDKGQsYSk7V2EoYixlKX1lPSEwO2lmKGMpZm9yKHZhciBmPWMubGVuZ3RoLTE7MDw9ZjtmLS0pe3ZhciBnPWIuYj1jW2ZdO2U9cWQoZyxkLCEwLGIpJiZlfWc9Yi5iPWE7ZT1xZChnLGQsITAsYikmJmU7ZT1xZChnLGQsITEsYikmJmU7aWYoYylmb3IoZj0wO2Y8Yy5sZW5ndGg7ZisrKWc9Yi5iPWNbZl0sZT1xZChnLGQsITEsYikmJmV9XG5GLnByb3RvdHlwZS50YT1mdW5jdGlvbigpe0YuaWIudGEuY2FsbCh0aGlzKTtpZih0aGlzLnUpe3ZhciBhPXRoaXMudSxiPTAsYztmb3IoYyBpbiBhLmEpe2Zvcih2YXIgZD1hLmFbY10sZT0wO2U8ZC5sZW5ndGg7ZSsrKSsrYixWYyhkW2VdKTtkZWxldGUgYS5hW2NdO2EuYi0tfX10aGlzLlJhPW51bGx9O2Z1bmN0aW9uIGZkKGEsYixjLGQsZSl7WGMoYS51LFN0cmluZyhiKSxjLCExLGQsZSl9ZnVuY3Rpb24gbGQoYSxiLGMsZCxlKXtYYyhhLnUsU3RyaW5nKGIpLGMsITAsZCxlKX1mdW5jdGlvbiBxZChhLGIsYyxkKXtiPWEudS5hW1N0cmluZyhiKV07aWYoIWIpcmV0dXJuITA7Yj1iLmNvbmNhdCgpO2Zvcih2YXIgZT0hMCxmPTA7ZjxiLmxlbmd0aDsrK2Ype3ZhciBnPWJbZl07aWYoZyYmIWcubWEmJmcuY2FwdHVyZT09Yyl7dmFyIGw9Zy5saXN0ZW5lcixuPWcuTGF8fGcuc3JjO2cuSGEmJlpjKGEudSxnKTtlPSExIT09bC5jYWxsKG4sZCkmJmV9fXJldHVybiBlJiYwIT1kLkJifTtmdW5jdGlvbiByZChhLGIsYyl7aWYocChhKSljJiYoYT1yKGEsYykpO2Vsc2UgaWYoYSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5oYW5kbGVFdmVudClhPXIoYS5oYW5kbGVFdmVudCxhKTtlbHNlIHRocm93IEVycm9yKFwiSW52YWxpZCBsaXN0ZW5lciBhcmd1bWVudFwiKTtyZXR1cm4gMjE0NzQ4MzY0NzxOdW1iZXIoYik/LTE6ay5zZXRUaW1lb3V0KGEsYnx8MCl9ZnVuY3Rpb24gc2QoYSl7dmFyIGI9bnVsbDtyZXR1cm4obmV3IHooZnVuY3Rpb24oYyxkKXtiPXJkKGZ1bmN0aW9uKCl7Yyh2b2lkIDApfSxhKTstMT09YiYmZChFcnJvcihcIkZhaWxlZCB0byBzY2hlZHVsZSB0aW1lci5cIikpfSkpLnMoZnVuY3Rpb24oYSl7ay5jbGVhclRpbWVvdXQoYik7dGhyb3cgYTt9KX07ZnVuY3Rpb24gdGQoYSxiLGMsZCxlKXt0aGlzLnJlc2V0KGEsYixjLGQsZSl9dGQucHJvdG90eXBlLmE9bnVsbDt2YXIgdWQ9MDt0ZC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oYSxiLGMsZCxlKXtcIm51bWJlclwiPT10eXBlb2YgZXx8dWQrKztkfHxuYSgpO3RoaXMuYj1iO2RlbGV0ZSB0aGlzLmF9O2Z1bmN0aW9uIHZkKGEpe3RoaXMuZj1hO3RoaXMuYj10aGlzLmM9dGhpcy5hPW51bGx9ZnVuY3Rpb24gd2QoYSxiKXt0aGlzLm5hbWU9YTt0aGlzLnZhbHVlPWJ9d2QucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZX07dmFyIHhkPW5ldyB3ZChcIlNFVkVSRVwiLDFFMykseWQ9bmV3IHdkKFwiQ09ORklHXCIsNzAwKSx6ZD1uZXcgd2QoXCJGSU5FXCIsNTAwKTtmdW5jdGlvbiBBZChhKXtpZihhLmMpcmV0dXJuIGEuYztpZihhLmEpcmV0dXJuIEFkKGEuYSk7QWEoXCJSb290IGxvZ2dlciBoYXMgbm8gbGV2ZWwgc2V0LlwiKTtyZXR1cm4gbnVsbH1cbnZkLnByb3RvdHlwZS5sb2c9ZnVuY3Rpb24oYSxiLGMpe2lmKGEudmFsdWU+PUFkKHRoaXMpLnZhbHVlKWZvcihwKGIpJiYoYj1iKCkpLGE9bmV3IHRkKGEsU3RyaW5nKGIpLHRoaXMuZiksYyYmKGEuYT1jKSxjPVwibG9nOlwiK2EuYiwoYT1rLmNvbnNvbGUpJiZhLnRpbWVTdGFtcCYmYS50aW1lU3RhbXAoYyksKGE9ay5tc1dyaXRlUHJvZmlsZXJNYXJrKSYmYShjKSxjPXRoaXM7YzspYz1jLmF9O3ZhciBCZD17fSxDZD1udWxsO2Z1bmN0aW9uIERkKGEpe0NkfHwoQ2Q9bmV3IHZkKFwiXCIpLEJkW1wiXCJdPUNkLENkLmM9eWQpO3ZhciBiO2lmKCEoYj1CZFthXSkpe2I9bmV3IHZkKGEpO3ZhciBjPWEubGFzdEluZGV4T2YoXCIuXCIpLGQ9YS5zdWJzdHIoYysxKTtjPURkKGEuc3Vic3RyKDAsYykpO2MuYnx8KGMuYj17fSk7Yy5iW2RdPWI7Yi5hPWM7QmRbYV09Yn1yZXR1cm4gYn07ZnVuY3Rpb24gRWQoYSxiKXt0aGlzLmI9e307dGhpcy5hPVtdO3RoaXMuYz0wO3ZhciBjPWFyZ3VtZW50cy5sZW5ndGg7aWYoMTxjKXtpZihjJTIpdGhyb3cgRXJyb3IoXCJVbmV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50c1wiKTtmb3IodmFyIGQ9MDtkPGM7ZCs9Mil0aGlzLnNldChhcmd1bWVudHNbZF0sYXJndW1lbnRzW2QrMV0pfWVsc2UgaWYoYSl7YSBpbnN0YW5jZW9mIEVkPyhjPWEuUygpLGQ9YS5QKCkpOihjPVJhKGEpLGQ9UWEoYSkpO2Zvcih2YXIgZT0wO2U8Yy5sZW5ndGg7ZSsrKXRoaXMuc2V0KGNbZV0sZFtlXSl9fWg9RWQucHJvdG90eXBlO2guUD1mdW5jdGlvbigpe0ZkKHRoaXMpO2Zvcih2YXIgYT1bXSxiPTA7Yjx0aGlzLmEubGVuZ3RoO2IrKylhLnB1c2godGhpcy5iW3RoaXMuYVtiXV0pO3JldHVybiBhfTtoLlM9ZnVuY3Rpb24oKXtGZCh0aGlzKTtyZXR1cm4gdGhpcy5hLmNvbmNhdCgpfTtcbmguY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmI9e307dGhpcy5jPXRoaXMuYS5sZW5ndGg9MH07ZnVuY3Rpb24gRmQoYSl7aWYoYS5jIT1hLmEubGVuZ3RoKXtmb3IodmFyIGI9MCxjPTA7YjxhLmEubGVuZ3RoOyl7dmFyIGQ9YS5hW2JdO0dkKGEuYixkKSYmKGEuYVtjKytdPWQpO2IrK31hLmEubGVuZ3RoPWN9aWYoYS5jIT1hLmEubGVuZ3RoKXt2YXIgZT17fTtmb3IoYz1iPTA7YjxhLmEubGVuZ3RoOylkPWEuYVtiXSxHZChlLGQpfHwoYS5hW2MrK109ZCxlW2RdPTEpLGIrKzthLmEubGVuZ3RoPWN9fWguZ2V0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIEdkKHRoaXMuYixhKT90aGlzLmJbYV06Yn07aC5zZXQ9ZnVuY3Rpb24oYSxiKXtHZCh0aGlzLmIsYSl8fCh0aGlzLmMrKyx0aGlzLmEucHVzaChhKSk7dGhpcy5iW2FdPWJ9O1xuaC5mb3JFYWNoPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuUygpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXSxmPXRoaXMuZ2V0KGUpO2EuY2FsbChiLGYsZSx0aGlzKX19O2Z1bmN0aW9uIEdkKGEsYil7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGIpfTtmdW5jdGlvbiBIKGEsYil7YSYmYS5sb2coemQsYix2b2lkIDApfTtmdW5jdGlvbiBIZChhKXtyZXR1cm4gRGEoYSxmdW5jdGlvbihhKXthPWEudG9TdHJpbmcoMTYpO3JldHVybiAxPGEubGVuZ3RoP2E6XCIwXCIrYX0pLmpvaW4oXCJcIil9O3ZhciBJZD1udWxsLEpkPW51bGw7ZnVuY3Rpb24gS2QoYSl7dmFyIGI9XCJcIjtMZChhLGZ1bmN0aW9uKGEpe2IrPVN0cmluZy5mcm9tQ2hhckNvZGUoYSl9KTtyZXR1cm4gYn1mdW5jdGlvbiBMZChhLGIpe2Z1bmN0aW9uIGMoYil7Zm9yKDtkPGEubGVuZ3RoOyl7dmFyIGM9YS5jaGFyQXQoZCsrKSxlPUpkW2NdO2lmKG51bGwhPWUpcmV0dXJuIGU7aWYoIS9eW1xcc1xceGEwXSokLy50ZXN0KGMpKXRocm93IEVycm9yKFwiVW5rbm93biBiYXNlNjQgZW5jb2RpbmcgYXQgY2hhcjogXCIrYyk7fXJldHVybiBifU1kKCk7Zm9yKHZhciBkPTA7Oyl7dmFyIGU9YygtMSksZj1jKDApLGc9Yyg2NCksbD1jKDY0KTtpZig2ND09PWwmJi0xPT09ZSlicmVhaztiKGU8PDJ8Zj4+NCk7NjQhPWcmJihiKGY8PDQmMjQwfGc+PjIpLDY0IT1sJiZiKGc8PDYmMTkyfGwpKX19XG5mdW5jdGlvbiBNZCgpe2lmKCFJZCl7SWQ9e307SmQ9e307Zm9yKHZhciBhPTA7NjU+YTthKyspSWRbYV09XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwiLmNoYXJBdChhKSxKZFtJZFthXV09YSw2Mjw9YSYmKEpkW1wiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODktXy5cIi5jaGFyQXQoYSldPWEpfX07LypcbiBQb3J0aW9ucyBvZiB0aGlzIGNvZGUgYXJlIGZyb20gTW9jaGlLaXQsIHJlY2VpdmVkIGJ5XG4gVGhlIENsb3N1cmUgQXV0aG9ycyB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuIEFsbCBvdGhlciBjb2RlIGlzIENvcHlyaWdodFxuIDIwMDUtMjAwOSBUaGUgQ2xvc3VyZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuKi9cbmZ1bmN0aW9uIE5kKGEsYil7dGhpcy5nPVtdO3RoaXMudj1hO3RoaXMubz1ifHxudWxsO3RoaXMuZj10aGlzLmE9ITE7dGhpcy5jPXZvaWQgMDt0aGlzLnU9dGhpcy53PXRoaXMuaT0hMTt0aGlzLmg9MDt0aGlzLmI9bnVsbDt0aGlzLmw9MH1OZC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKGEpe2lmKHRoaXMuYSl0aGlzLmMgaW5zdGFuY2VvZiBOZCYmdGhpcy5jLmNhbmNlbCgpO2Vsc2V7aWYodGhpcy5iKXt2YXIgYj10aGlzLmI7ZGVsZXRlIHRoaXMuYjthP2IuY2FuY2VsKGEpOihiLmwtLSwwPj1iLmwmJmIuY2FuY2VsKCkpfXRoaXMudj90aGlzLnYuY2FsbCh0aGlzLm8sdGhpcyk6dGhpcy51PSEwO3RoaXMuYXx8KGE9bmV3IE9kLFBkKHRoaXMpLFFkKHRoaXMsITEsYSkpfX07TmQucHJvdG90eXBlLm09ZnVuY3Rpb24oYSxiKXt0aGlzLmk9ITE7UWQodGhpcyxhLGIpfTtmdW5jdGlvbiBRZChhLGIsYyl7YS5hPSEwO2EuYz1jO2EuZj0hYjtSZChhKX1cbmZ1bmN0aW9uIFBkKGEpe2lmKGEuYSl7aWYoIWEudSl0aHJvdyBuZXcgU2Q7YS51PSExfX1OZC5wcm90b3R5cGUuQT1mdW5jdGlvbihhKXtQZCh0aGlzKTtRZCh0aGlzLCEwLGEpfTtmdW5jdGlvbiBUZChhLGIpe1VkKGEsbnVsbCxiLHZvaWQgMCl9ZnVuY3Rpb24gVWQoYSxiLGMsZCl7YS5nLnB1c2goW2IsYyxkXSk7YS5hJiZSZChhKX1OZC5wcm90b3R5cGUudGhlbj1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPW5ldyB6KGZ1bmN0aW9uKGEsYil7ZD1hO2U9Yn0pO1VkKHRoaXMsZCxmdW5jdGlvbihhKXthIGluc3RhbmNlb2YgT2Q/Zi5jYW5jZWwoKTplKGEpfSk7cmV0dXJuIGYudGhlbihhLGIsYyl9O21iKE5kKTtmdW5jdGlvbiBWZChhKXtyZXR1cm4gRWEoYS5nLGZ1bmN0aW9uKGEpe3JldHVybiBwKGFbMV0pfSl9XG5mdW5jdGlvbiBSZChhKXtpZihhLmgmJmEuYSYmVmQoYSkpe3ZhciBiPWEuaCxjPVdkW2JdO2MmJihrLmNsZWFyVGltZW91dChjLmEpLGRlbGV0ZSBXZFtiXSk7YS5oPTB9YS5iJiYoYS5iLmwtLSxkZWxldGUgYS5iKTtiPWEuYztmb3IodmFyIGQ9Yz0hMTthLmcubGVuZ3RoJiYhYS5pOyl7dmFyIGU9YS5nLnNoaWZ0KCksZj1lWzBdLGc9ZVsxXTtlPWVbMl07aWYoZj1hLmY/ZzpmKXRyeXt2YXIgbD1mLmNhbGwoZXx8YS5vLGIpO3ZvaWQgMCE9PWwmJihhLmY9YS5mJiYobD09Ynx8bCBpbnN0YW5jZW9mIEVycm9yKSxhLmM9Yj1sKTtpZihuYihiKXx8XCJmdW5jdGlvblwiPT09dHlwZW9mIGsuUHJvbWlzZSYmYiBpbnN0YW5jZW9mIGsuUHJvbWlzZSlkPSEwLGEuaT0hMH1jYXRjaChuKXtiPW4sYS5mPSEwLFZkKGEpfHwoYz0hMCl9fWEuYz1iO2QmJihsPXIoYS5tLGEsITApLGQ9cihhLm0sYSwhMSksYiBpbnN0YW5jZW9mIE5kPyhVZChiLGwsZCksYi53PSEwKTpiLnRoZW4obCxkKSk7YyYmKGI9XG5uZXcgWGQoYiksV2RbYi5hXT1iLGEuaD1iLmEpfWZ1bmN0aW9uIFNkKCl7dS5jYWxsKHRoaXMpfXQoU2QsdSk7U2QucHJvdG90eXBlLm1lc3NhZ2U9XCJEZWZlcnJlZCBoYXMgYWxyZWFkeSBmaXJlZFwiO1NkLnByb3RvdHlwZS5uYW1lPVwiQWxyZWFkeUNhbGxlZEVycm9yXCI7ZnVuY3Rpb24gT2QoKXt1LmNhbGwodGhpcyl9dChPZCx1KTtPZC5wcm90b3R5cGUubWVzc2FnZT1cIkRlZmVycmVkIHdhcyBjYW5jZWxlZFwiO09kLnByb3RvdHlwZS5uYW1lPVwiQ2FuY2VsZWRFcnJvclwiO2Z1bmN0aW9uIFhkKGEpe3RoaXMuYT1rLnNldFRpbWVvdXQocih0aGlzLmMsdGhpcyksMCk7dGhpcy5iPWF9WGQucHJvdG90eXBlLmM9ZnVuY3Rpb24oKXtkZWxldGUgV2RbdGhpcy5hXTt0aHJvdyB0aGlzLmI7fTt2YXIgV2Q9e307ZnVuY3Rpb24gWWQoKXt0aGlzLmI9LTF9O2Z1bmN0aW9uIFpkKGEsYil7dGhpcy5iPS0xO3RoaXMuYj0kZDt0aGlzLmY9ay5VaW50OEFycmF5P25ldyBVaW50OEFycmF5KHRoaXMuYik6QXJyYXkodGhpcy5iKTt0aGlzLmc9dGhpcy5jPTA7dGhpcy5hPVtdO3RoaXMuaT1hO3RoaXMuaD1iO3RoaXMubD1rLkludDMyQXJyYXk/bmV3IEludDMyQXJyYXkoNjQpOkFycmF5KDY0KTthZXx8KGsuSW50MzJBcnJheT9hZT1uZXcgSW50MzJBcnJheShiZSk6YWU9YmUpO3RoaXMucmVzZXQoKX12YXIgYWU7dChaZCxZZCk7Zm9yKHZhciAkZD02NCxjZT0kZC0xLGRlPVtdLGVlPTA7ZWU8Y2U7ZWUrKylkZVtlZV09MDt2YXIgZmU9S2EoMTI4LGRlKTtaZC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmc9dGhpcy5jPTA7dGhpcy5hPWsuSW50MzJBcnJheT9uZXcgSW50MzJBcnJheSh0aGlzLmgpOkxhKHRoaXMuaCl9O1xuZnVuY3Rpb24gZ2UoYSl7Zm9yKHZhciBiPWEuZixjPWEubCxkPTAsZT0wO2U8Yi5sZW5ndGg7KWNbZCsrXT1iW2VdPDwyNHxiW2UrMV08PDE2fGJbZSsyXTw8OHxiW2UrM10sZT00KmQ7Zm9yKGI9MTY7NjQ+YjtiKyspe2U9Y1tiLTE1XXwwO2Q9Y1tiLTJdfDA7dmFyIGY9KGNbYi0xNl18MCkrKChlPj4+N3xlPDwyNSleKGU+Pj4xOHxlPDwxNCleZT4+PjMpfDAsZz0oY1tiLTddfDApKygoZD4+PjE3fGQ8PDE1KV4oZD4+PjE5fGQ8PDEzKV5kPj4+MTApfDA7Y1tiXT1mK2d8MH1kPWEuYVswXXwwO2U9YS5hWzFdfDA7dmFyIGw9YS5hWzJdfDAsbj1hLmFbM118MCxEPWEuYVs0XXwwLHZiPWEuYVs1XXwwLHRjPWEuYVs2XXwwO2Y9YS5hWzddfDA7Zm9yKGI9MDs2ND5iO2IrKyl7dmFyIEJqPSgoZD4+PjJ8ZDw8MzApXihkPj4+MTN8ZDw8MTkpXihkPj4+MjJ8ZDw8MTApKSsoZCZlXmQmbF5lJmwpfDA7Zz1EJnZiXn5EJnRjO2Y9ZisoKEQ+Pj42fEQ8PDI2KV4oRD4+PjExfEQ8PDIxKV4oRD4+PlxuMjV8RDw8NykpfDA7Zz1nKyhhZVtiXXwwKXwwO2c9ZisoZysoY1tiXXwwKXwwKXwwO2Y9dGM7dGM9dmI7dmI9RDtEPW4rZ3wwO249bDtsPWU7ZT1kO2Q9ZytCanwwfWEuYVswXT1hLmFbMF0rZHwwO2EuYVsxXT1hLmFbMV0rZXwwO2EuYVsyXT1hLmFbMl0rbHwwO2EuYVszXT1hLmFbM10rbnwwO2EuYVs0XT1hLmFbNF0rRHwwO2EuYVs1XT1hLmFbNV0rdmJ8MDthLmFbNl09YS5hWzZdK3RjfDA7YS5hWzddPWEuYVs3XStmfDB9XG5mdW5jdGlvbiBoZShhLGIsYyl7dm9pZCAwPT09YyYmKGM9Yi5sZW5ndGgpO3ZhciBkPTAsZT1hLmM7aWYobShiKSlmb3IoO2Q8YzspYS5mW2UrK109Yi5jaGFyQ29kZUF0KGQrKyksZT09YS5iJiYoZ2UoYSksZT0wKTtlbHNlIGlmKGhhKGIpKWZvcig7ZDxjOyl7dmFyIGY9YltkKytdO2lmKCEoXCJudW1iZXJcIj09dHlwZW9mIGYmJjA8PWYmJjI1NT49ZiYmZj09KGZ8MCkpKXRocm93IEVycm9yKFwibWVzc2FnZSBtdXN0IGJlIGEgYnl0ZSBhcnJheVwiKTthLmZbZSsrXT1mO2U9PWEuYiYmKGdlKGEpLGU9MCl9ZWxzZSB0aHJvdyBFcnJvcihcIm1lc3NhZ2UgbXVzdCBiZSBzdHJpbmcgb3IgYXJyYXlcIik7YS5jPWU7YS5nKz1jfVxudmFyIGJlPVsxMTE2MzUyNDA4LDE4OTk0NDc0NDEsMzA0OTMyMzQ3MSwzOTIxMDA5NTczLDk2MTk4NzE2MywxNTA4OTcwOTkzLDI0NTM2MzU3NDgsMjg3MDc2MzIyMSwzNjI0MzgxMDgwLDMxMDU5ODQwMSw2MDcyMjUyNzgsMTQyNjg4MTk4NywxOTI1MDc4Mzg4LDIxNjIwNzgyMDYsMjYxNDg4ODEwMywzMjQ4MjIyNTgwLDM4MzUzOTA0MDEsNDAyMjIyNDc3NCwyNjQzNDcwNzgsNjA0ODA3NjI4LDc3MDI1NTk4MywxMjQ5MTUwMTIyLDE1NTUwODE2OTIsMTk5NjA2NDk4NiwyNTU0MjIwODgyLDI4MjE4MzQzNDksMjk1Mjk5NjgwOCwzMjEwMzEzNjcxLDMzMzY1NzE4OTEsMzU4NDUyODcxMSwxMTM5MjY5OTMsMzM4MjQxODk1LDY2NjMwNzIwNSw3NzM1Mjk5MTIsMTI5NDc1NzM3MiwxMzk2MTgyMjkxLDE2OTUxODM3MDAsMTk4NjY2MTA1MSwyMTc3MDI2MzUwLDI0NTY5NTYwMzcsMjczMDQ4NTkyMSwyODIwMzAyNDExLDMyNTk3MzA4MDAsMzM0NTc2NDc3MSwzNTE2MDY1ODE3LDM2MDAzNTI4MDQsXG40MDk0NTcxOTA5LDI3NTQyMzM0NCw0MzAyMjc3MzQsNTA2OTQ4NjE2LDY1OTA2MDU1Niw4ODM5OTc4NzcsOTU4MTM5NTcxLDEzMjI4MjIyMTgsMTUzNzAwMjA2MywxNzQ3ODczNzc5LDE5NTU1NjIyMjIsMjAyNDEwNDgxNSwyMjI3NzMwNDUyLDIzNjE4NTI0MjQsMjQyODQzNjQ3NCwyNzU2NzM0MTg3LDMyMDQwMzE0NzksMzMyOTMyNTI5OF07ZnVuY3Rpb24gaWUoKXtaZC5jYWxsKHRoaXMsOCxqZSl9dChpZSxaZCk7dmFyIGplPVsxNzc5MDMzNzAzLDMxNDQxMzQyNzcsMTAxMzkwNDI0MiwyNzczNDgwNzYyLDEzNTk4OTMxMTksMjYwMDgyMjkyNCw1Mjg3MzQ2MzUsMTU0MTQ1OTIyNV07ZnVuY3Rpb24ga2UoYSl7aWYoYS5QJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlApcmV0dXJuIGEuUCgpO2lmKG0oYSkpcmV0dXJuIGEuc3BsaXQoXCJcIik7aWYoaGEoYSkpe2Zvcih2YXIgYj1bXSxjPWEubGVuZ3RoLGQ9MDtkPGM7ZCsrKWIucHVzaChhW2RdKTtyZXR1cm4gYn1yZXR1cm4gUWEoYSl9ZnVuY3Rpb24gbGUoYSl7aWYoYS5TJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlMpcmV0dXJuIGEuUygpO2lmKCFhLlB8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIGEuUCl7aWYoaGEoYSl8fG0oYSkpe3ZhciBiPVtdO2E9YS5sZW5ndGg7Zm9yKHZhciBjPTA7YzxhO2MrKyliLnB1c2goYyk7cmV0dXJuIGJ9cmV0dXJuIFJhKGEpfX1cbmZ1bmN0aW9uIG1lKGEsYil7aWYoYS5mb3JFYWNoJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmZvckVhY2gpYS5mb3JFYWNoKGIsdm9pZCAwKTtlbHNlIGlmKGhhKGEpfHxtKGEpKXcoYSxiLHZvaWQgMCk7ZWxzZSBmb3IodmFyIGM9bGUoYSksZD1rZShhKSxlPWQubGVuZ3RoLGY9MDtmPGU7ZisrKWIuY2FsbCh2b2lkIDAsZFtmXSxjJiZjW2ZdLGEpfTt2YXIgbmU9L14oPzooW146Lz8jLl0rKTopPyg/OlxcL1xcLyg/OihbXi8/I10qKUApPyhbXi8jP10qPykoPzo6KFswLTldKykpPyg/PVsvIz9dfCQpKT8oW14/I10rKT8oPzpcXD8oW14jXSopKT8oPzojKFtcXHNcXFNdKikpPyQvO2Z1bmN0aW9uIG9lKGEsYil7aWYoYSl7YT1hLnNwbGl0KFwiJlwiKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9YVtjXS5pbmRleE9mKFwiPVwiKSxlPW51bGw7aWYoMDw9ZCl7dmFyIGY9YVtjXS5zdWJzdHJpbmcoMCxkKTtlPWFbY10uc3Vic3RyaW5nKGQrMSl9ZWxzZSBmPWFbY107YihmLGU/ZGVjb2RlVVJJQ29tcG9uZW50KGUucmVwbGFjZSgvXFwrL2csXCIgXCIpKTpcIlwiKX19fTtmdW5jdGlvbiBwZShhLGIpe3RoaXMuYj10aGlzLmw9dGhpcy5jPVwiXCI7dGhpcy5pPW51bGw7dGhpcy5oPXRoaXMuZz1cIlwiO3RoaXMuZj0hMTtpZihhIGluc3RhbmNlb2YgcGUpe3RoaXMuZj12b2lkIDAhPT1iP2I6YS5mO3FlKHRoaXMsYS5jKTt0aGlzLmw9YS5sO3RoaXMuYj1hLmI7cmUodGhpcyxhLmkpO3RoaXMuZz1hLmc7Yj1hLmE7dmFyIGM9bmV3IHNlO2MuYz1iLmM7Yi5hJiYoYy5hPW5ldyBFZChiLmEpLGMuYj1iLmIpO3RlKHRoaXMsYyk7dGhpcy5oPWEuaH1lbHNlIGEmJihjPVN0cmluZyhhKS5tYXRjaChuZSkpPyh0aGlzLmY9ISFiLHFlKHRoaXMsY1sxXXx8XCJcIiwhMCksdGhpcy5sPXVlKGNbMl18fFwiXCIpLHRoaXMuYj11ZShjWzNdfHxcIlwiLCEwKSxyZSh0aGlzLGNbNF0pLHRoaXMuZz11ZShjWzVdfHxcIlwiLCEwKSx0ZSh0aGlzLGNbNl18fFwiXCIsITApLHRoaXMuaD11ZShjWzddfHxcIlwiKSk6KHRoaXMuZj0hIWIsdGhpcy5hPW5ldyBzZShudWxsLDAsdGhpcy5mKSl9XG5wZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXMuYztiJiZhLnB1c2godmUoYix3ZSwhMCksXCI6XCIpO3ZhciBjPXRoaXMuYjtpZihjfHxcImZpbGVcIj09YilhLnB1c2goXCIvL1wiKSwoYj10aGlzLmwpJiZhLnB1c2godmUoYix3ZSwhMCksXCJAXCIpLGEucHVzaChlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGMpKS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpLGM9dGhpcy5pLG51bGwhPWMmJmEucHVzaChcIjpcIixTdHJpbmcoYykpO2lmKGM9dGhpcy5nKXRoaXMuYiYmXCIvXCIhPWMuY2hhckF0KDApJiZhLnB1c2goXCIvXCIpLGEucHVzaCh2ZShjLFwiL1wiPT1jLmNoYXJBdCgwKT94ZTp5ZSwhMCkpOyhjPXRoaXMuYS50b1N0cmluZygpKSYmYS5wdXNoKFwiP1wiLGMpOyhjPXRoaXMuaCkmJmEucHVzaChcIiNcIix2ZShjLHplKSk7cmV0dXJuIGEuam9pbihcIlwiKX07XG5mdW5jdGlvbiBxZShhLGIsYyl7YS5jPWM/dWUoYiwhMCk6YjthLmMmJihhLmM9YS5jLnJlcGxhY2UoLzokLyxcIlwiKSl9ZnVuY3Rpb24gcmUoYSxiKXtpZihiKXtiPU51bWJlcihiKTtpZihpc05hTihiKXx8MD5iKXRocm93IEVycm9yKFwiQmFkIHBvcnQgbnVtYmVyIFwiK2IpO2EuaT1ifWVsc2UgYS5pPW51bGx9ZnVuY3Rpb24gdGUoYSxiLGMpe2IgaW5zdGFuY2VvZiBzZT8oYS5hPWIsQWUoYS5hLGEuZikpOihjfHwoYj12ZShiLEJlKSksYS5hPW5ldyBzZShiLDAsYS5mKSl9ZnVuY3Rpb24gSShhLGIsYyl7YS5hLnNldChiLGMpfWZ1bmN0aW9uIENlKGEsYil7cmV0dXJuIGEuYS5nZXQoYil9ZnVuY3Rpb24gRGUoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBwZT9uZXcgcGUoYSk6bmV3IHBlKGEsdm9pZCAwKX1mdW5jdGlvbiBFZShhLGIpe3ZhciBjPW5ldyBwZShudWxsLHZvaWQgMCk7cWUoYyxcImh0dHBzXCIpO2EmJihjLmI9YSk7YiYmKGMuZz1iKTtyZXR1cm4gY31cbmZ1bmN0aW9uIHVlKGEsYil7cmV0dXJuIGE/Yj9kZWNvZGVVUkkoYS5yZXBsYWNlKC8lMjUvZyxcIiUyNTI1XCIpKTpkZWNvZGVVUklDb21wb25lbnQoYSk6XCJcIn1mdW5jdGlvbiB2ZShhLGIsYyl7cmV0dXJuIG0oYSk/KGE9ZW5jb2RlVVJJKGEpLnJlcGxhY2UoYixGZSksYyYmKGE9YS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpLGEpOm51bGx9ZnVuY3Rpb24gRmUoYSl7YT1hLmNoYXJDb2RlQXQoMCk7cmV0dXJuXCIlXCIrKGE+PjQmMTUpLnRvU3RyaW5nKDE2KSsoYSYxNSkudG9TdHJpbmcoMTYpfXZhciB3ZT0vWyNcXC9cXD9AXS9nLHllPS9bXFwjXFw/Ol0vZyx4ZT0vW1xcI1xcP10vZyxCZT0vW1xcI1xcP0BdL2csemU9LyMvZztmdW5jdGlvbiBzZShhLGIsYyl7dGhpcy5iPXRoaXMuYT1udWxsO3RoaXMuYz1hfHxudWxsO3RoaXMuZj0hIWN9XG5mdW5jdGlvbiBHZShhKXthLmF8fChhLmE9bmV3IEVkLGEuYj0wLGEuYyYmb2UoYS5jLGZ1bmN0aW9uKGIsYyl7SGUoYSxkZWNvZGVVUklDb21wb25lbnQoYi5yZXBsYWNlKC9cXCsvZyxcIiBcIikpLGMpfSkpfWZ1bmN0aW9uIEllKGEpe3ZhciBiPWxlKGEpO2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBiKXRocm93IEVycm9yKFwiS2V5cyBhcmUgdW5kZWZpbmVkXCIpO3ZhciBjPW5ldyBzZShudWxsLDAsdm9pZCAwKTthPWtlKGEpO2Zvcih2YXIgZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZT1iW2RdLGY9YVtkXTtmYShmKT9KZShjLGUsZik6SGUoYyxlLGYpfXJldHVybiBjfWZ1bmN0aW9uIEhlKGEsYixjKXtHZShhKTthLmM9bnVsbDtiPUtlKGEsYik7dmFyIGQ9YS5hLmdldChiKTtkfHxhLmEuc2V0KGIsZD1bXSk7ZC5wdXNoKGMpO2EuYis9MX1cbmZ1bmN0aW9uIExlKGEsYil7R2UoYSk7Yj1LZShhLGIpO0dkKGEuYS5iLGIpJiYoYS5jPW51bGwsYS5iLT1hLmEuZ2V0KGIpLmxlbmd0aCxhPWEuYSxHZChhLmIsYikmJihkZWxldGUgYS5iW2JdLGEuYy0tLGEuYS5sZW5ndGg+MiphLmMmJkZkKGEpKSl9aD1zZS5wcm90b3R5cGU7aC5jbGVhcj1mdW5jdGlvbigpe3RoaXMuYT10aGlzLmM9bnVsbDt0aGlzLmI9MH07ZnVuY3Rpb24gTWUoYSxiKXtHZShhKTtiPUtlKGEsYik7cmV0dXJuIEdkKGEuYS5iLGIpfWguZm9yRWFjaD1mdW5jdGlvbihhLGIpe0dlKHRoaXMpO3RoaXMuYS5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7dyhjLGZ1bmN0aW9uKGMpe2EuY2FsbChiLGMsZCx0aGlzKX0sdGhpcyl9LHRoaXMpfTtoLlM9ZnVuY3Rpb24oKXtHZSh0aGlzKTtmb3IodmFyIGE9dGhpcy5hLlAoKSxiPXRoaXMuYS5TKCksYz1bXSxkPTA7ZDxiLmxlbmd0aDtkKyspZm9yKHZhciBlPWFbZF0sZj0wO2Y8ZS5sZW5ndGg7ZisrKWMucHVzaChiW2RdKTtyZXR1cm4gY307XG5oLlA9ZnVuY3Rpb24oYSl7R2UodGhpcyk7dmFyIGI9W107aWYobShhKSlNZSh0aGlzLGEpJiYoYj1LYShiLHRoaXMuYS5nZXQoS2UodGhpcyxhKSkpKTtlbHNle2E9dGhpcy5hLlAoKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyliPUthKGIsYVtjXSl9cmV0dXJuIGJ9O2guc2V0PWZ1bmN0aW9uKGEsYil7R2UodGhpcyk7dGhpcy5jPW51bGw7YT1LZSh0aGlzLGEpO01lKHRoaXMsYSkmJih0aGlzLmItPXRoaXMuYS5nZXQoYSkubGVuZ3RoKTt0aGlzLmEuc2V0KGEsW2JdKTt0aGlzLmIrPTE7cmV0dXJuIHRoaXN9O2guZ2V0PWZ1bmN0aW9uKGEsYil7YT1hP3RoaXMuUChhKTpbXTtyZXR1cm4gMDxhLmxlbmd0aD9TdHJpbmcoYVswXSk6Yn07ZnVuY3Rpb24gSmUoYSxiLGMpe0xlKGEsYik7MDxjLmxlbmd0aCYmKGEuYz1udWxsLGEuYS5zZXQoS2UoYSxiKSxMYShjKSksYS5iKz1jLmxlbmd0aCl9XG5oLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy5jKXJldHVybiB0aGlzLmM7aWYoIXRoaXMuYSlyZXR1cm5cIlwiO2Zvcih2YXIgYT1bXSxiPXRoaXMuYS5TKCksYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdLGU9ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhkKSk7ZD10aGlzLlAoZCk7Zm9yKHZhciBmPTA7ZjxkLmxlbmd0aDtmKyspe3ZhciBnPWU7XCJcIiE9PWRbZl0mJihnKz1cIj1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGRbZl0pKSk7YS5wdXNoKGcpfX1yZXR1cm4gdGhpcy5jPWEuam9pbihcIiZcIil9O2Z1bmN0aW9uIEtlKGEsYil7Yj1TdHJpbmcoYik7YS5mJiYoYj1iLnRvTG93ZXJDYXNlKCkpO3JldHVybiBifWZ1bmN0aW9uIEFlKGEsYil7YiYmIWEuZiYmKEdlKGEpLGEuYz1udWxsLGEuYS5mb3JFYWNoKGZ1bmN0aW9uKGEsYil7dmFyIGM9Yi50b0xvd2VyQ2FzZSgpO2IhPWMmJihMZSh0aGlzLGIpLEplKHRoaXMsYyxhKSl9LGEpKTthLmY9Yn07ZnVuY3Rpb24gTmUoKXt9TmUucHJvdG90eXBlLmM9bnVsbDtmdW5jdGlvbiBPZShhKXtyZXR1cm4gYS5jfHwoYS5jPWEuYigpKX07dmFyIFBlO2Z1bmN0aW9uIFFlKCl7fXQoUWUsTmUpO1FlLnByb3RvdHlwZS5hPWZ1bmN0aW9uKCl7dmFyIGE9UmUodGhpcyk7cmV0dXJuIGE/bmV3IEFjdGl2ZVhPYmplY3QoYSk6bmV3IFhNTEh0dHBSZXF1ZXN0fTtRZS5wcm90b3R5cGUuYj1mdW5jdGlvbigpe3ZhciBhPXt9O1JlKHRoaXMpJiYoYVswXT0hMCxhWzFdPSEwKTtyZXR1cm4gYX07XG5mdW5jdGlvbiBSZShhKXtpZighYS5mJiZcInVuZGVmaW5lZFwiPT10eXBlb2YgWE1MSHR0cFJlcXVlc3QmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBBY3RpdmVYT2JqZWN0KXtmb3IodmFyIGI9W1wiTVNYTUwyLlhNTEhUVFAuNi4wXCIsXCJNU1hNTDIuWE1MSFRUUC4zLjBcIixcIk1TWE1MMi5YTUxIVFRQXCIsXCJNaWNyb3NvZnQuWE1MSFRUUFwiXSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY107dHJ5e3JldHVybiBuZXcgQWN0aXZlWE9iamVjdChkKSxhLmY9ZH1jYXRjaChlKXt9fXRocm93IEVycm9yKFwiQ291bGQgbm90IGNyZWF0ZSBBY3RpdmVYT2JqZWN0LiBBY3RpdmVYIG1pZ2h0IGJlIGRpc2FibGVkLCBvciBNU1hNTCBtaWdodCBub3QgYmUgaW5zdGFsbGVkXCIpO31yZXR1cm4gYS5mfVBlPW5ldyBRZTtmdW5jdGlvbiBTZShhKXtGLmNhbGwodGhpcyk7dGhpcy5oZWFkZXJzPW5ldyBFZDt0aGlzLnc9YXx8bnVsbDt0aGlzLmI9ITE7dGhpcy52PXRoaXMuYT1udWxsO3RoaXMuZz10aGlzLkk9dGhpcy5pPVwiXCI7dGhpcy5jPXRoaXMuRz10aGlzLmg9dGhpcy5BPSExO3RoaXMuZj0wO3RoaXMubT1udWxsO3RoaXMubD1UZTt0aGlzLm89dGhpcy5OPSExfXQoU2UsRik7dmFyIFRlPVwiXCIsVWU9U2UucHJvdG90eXBlLFZlPURkKFwiZ29vZy5uZXQuWGhySW9cIik7VWUuSj1WZTt2YXIgV2U9L15odHRwcz8kL2ksWGU9W1wiUE9TVFwiLFwiUFVUXCJdO1xuZnVuY3Rpb24gWWUoYSxiLGMsZCxlKXtpZihhLmEpdGhyb3cgRXJyb3IoXCJbZ29vZy5uZXQuWGhySW9dIE9iamVjdCBpcyBhY3RpdmUgd2l0aCBhbm90aGVyIHJlcXVlc3Q9XCIrYS5pK1wiOyBuZXdVcmk9XCIrYik7Yz1jP2MudG9VcHBlckNhc2UoKTpcIkdFVFwiO2EuaT1iO2EuZz1cIlwiO2EuST1jO2EuQT0hMTthLmI9ITA7YS5hPWEudz9hLncuYSgpOlBlLmEoKTthLnY9YS53P09lKGEudyk6T2UoUGUpO2EuYS5vbnJlYWR5c3RhdGVjaGFuZ2U9cihhLkFiLGEpO3RyeXtIKGEuSixaZShhLFwiT3BlbmluZyBYaHJcIikpLGEuRz0hMCxhLmEub3BlbihjLFN0cmluZyhiKSwhMCksYS5HPSExfWNhdGNoKGcpe0goYS5KLFplKGEsXCJFcnJvciBvcGVuaW5nIFhocjogXCIrZy5tZXNzYWdlKSk7JGUoYSxnKTtyZXR1cm59Yj1kfHxcIlwiO3ZhciBmPW5ldyBFZChhLmhlYWRlcnMpO2UmJm1lKGUsZnVuY3Rpb24oYSxiKXtmLnNldChiLGEpfSk7ZT1GYShmLlMoKSk7ZD1rLkZvcm1EYXRhJiZiIGluc3RhbmNlb2ZcbmsuRm9ybURhdGE7IUhhKFhlLGMpfHxlfHxkfHxmLnNldChcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLThcIik7Zi5mb3JFYWNoKGZ1bmN0aW9uKGEsYil7dGhpcy5hLnNldFJlcXVlc3RIZWFkZXIoYixhKX0sYSk7YS5sJiYoYS5hLnJlc3BvbnNlVHlwZT1hLmwpO1wid2l0aENyZWRlbnRpYWxzXCJpbiBhLmEmJmEuYS53aXRoQ3JlZGVudGlhbHMhPT1hLk4mJihhLmEud2l0aENyZWRlbnRpYWxzPWEuTik7dHJ5e2FmKGEpLDA8YS5mJiYoYS5vPWJmKGEuYSksSChhLkosWmUoYSxcIldpbGwgYWJvcnQgYWZ0ZXIgXCIrYS5mK1wibXMgaWYgaW5jb21wbGV0ZSwgeGhyMiBcIithLm8pKSxhLm8/KGEuYS50aW1lb3V0PWEuZixhLmEub250aW1lb3V0PXIoYS5FYSxhKSk6YS5tPXJkKGEuRWEsYS5mLGEpKSxIKGEuSixaZShhLFwiU2VuZGluZyByZXF1ZXN0XCIpKSxhLmg9ITAsYS5hLnNlbmQoYiksYS5oPSExfWNhdGNoKGcpe0goYS5KLFplKGEsXG5cIlNlbmQgZXJyb3I6IFwiK2cubWVzc2FnZSkpLCRlKGEsZyl9fWZ1bmN0aW9uIGJmKGEpe3JldHVybiB5JiZqYig5KSYmXCJudW1iZXJcIj09dHlwZW9mIGEudGltZW91dCYmdm9pZCAwIT09YS5vbnRpbWVvdXR9ZnVuY3Rpb24gR2EoYSl7cmV0dXJuXCJjb250ZW50LXR5cGVcIj09YS50b0xvd2VyQ2FzZSgpfWg9U2UucHJvdG90eXBlO2guRWE9ZnVuY3Rpb24oKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgYWEmJnRoaXMuYSYmKHRoaXMuZz1cIlRpbWVkIG91dCBhZnRlciBcIit0aGlzLmYrXCJtcywgYWJvcnRpbmdcIixIKHRoaXMuSixaZSh0aGlzLHRoaXMuZykpLEcodGhpcyxcInRpbWVvdXRcIiksdGhpcy5hYm9ydCg4KSl9O2Z1bmN0aW9uICRlKGEsYil7YS5iPSExO2EuYSYmKGEuYz0hMCxhLmEuYWJvcnQoKSxhLmM9ITEpO2EuZz1iO2NmKGEpO2RmKGEpfWZ1bmN0aW9uIGNmKGEpe2EuQXx8KGEuQT0hMCxHKGEsXCJjb21wbGV0ZVwiKSxHKGEsXCJlcnJvclwiKSl9XG5oLmFib3J0PWZ1bmN0aW9uKCl7dGhpcy5hJiZ0aGlzLmImJihIKHRoaXMuSixaZSh0aGlzLFwiQWJvcnRpbmdcIikpLHRoaXMuYj0hMSx0aGlzLmM9ITAsdGhpcy5hLmFib3J0KCksdGhpcy5jPSExLEcodGhpcyxcImNvbXBsZXRlXCIpLEcodGhpcyxcImFib3J0XCIpLGRmKHRoaXMpKX07aC50YT1mdW5jdGlvbigpe3RoaXMuYSYmKHRoaXMuYiYmKHRoaXMuYj0hMSx0aGlzLmM9ITAsdGhpcy5hLmFib3J0KCksdGhpcy5jPSExKSxkZih0aGlzLCEwKSk7U2UuaWIudGEuY2FsbCh0aGlzKX07aC5BYj1mdW5jdGlvbigpe3RoaXMub2F8fCh0aGlzLkd8fHRoaXMuaHx8dGhpcy5jP2VmKHRoaXMpOnRoaXMuamMoKSl9O2guamM9ZnVuY3Rpb24oKXtlZih0aGlzKX07XG5mdW5jdGlvbiBlZihhKXtpZihhLmImJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhYSlpZihhLnZbMV0mJjQ9PWZmKGEpJiYyPT1nZihhKSlIKGEuSixaZShhLFwiTG9jYWwgcmVxdWVzdCBlcnJvciBkZXRlY3RlZCBhbmQgaWdub3JlZFwiKSk7ZWxzZSBpZihhLmgmJjQ9PWZmKGEpKXJkKGEuQWIsMCxhKTtlbHNlIGlmKEcoYSxcInJlYWR5c3RhdGVjaGFuZ2VcIiksND09ZmYoYSkpe0goYS5KLFplKGEsXCJSZXF1ZXN0IGNvbXBsZXRlXCIpKTthLmI9ITE7dHJ5e3ZhciBiPWdmKGEpO2E6c3dpdGNoKGIpe2Nhc2UgMjAwOmNhc2UgMjAxOmNhc2UgMjAyOmNhc2UgMjA0OmNhc2UgMjA2OmNhc2UgMzA0OmNhc2UgMTIyMzp2YXIgYz0hMDticmVhayBhO2RlZmF1bHQ6Yz0hMX12YXIgZDtpZighKGQ9Yykpe3ZhciBlO2lmKGU9MD09PWIpe3ZhciBmPVN0cmluZyhhLmkpLm1hdGNoKG5lKVsxXXx8bnVsbDtpZighZiYmay5zZWxmJiZrLnNlbGYubG9jYXRpb24pe3ZhciBnPWsuc2VsZi5sb2NhdGlvbi5wcm90b2NvbDtcbmY9Zy5zdWJzdHIoMCxnLmxlbmd0aC0xKX1lPSFXZS50ZXN0KGY/Zi50b0xvd2VyQ2FzZSgpOlwiXCIpfWQ9ZX1pZihkKUcoYSxcImNvbXBsZXRlXCIpLEcoYSxcInN1Y2Nlc3NcIik7ZWxzZXt0cnl7dmFyIGw9MjxmZihhKT9hLmEuc3RhdHVzVGV4dDpcIlwifWNhdGNoKG4pe0goYS5KLFwiQ2FuIG5vdCBnZXQgc3RhdHVzOiBcIituLm1lc3NhZ2UpLGw9XCJcIn1hLmc9bCtcIiBbXCIrZ2YoYSkrXCJdXCI7Y2YoYSl9fWZpbmFsbHl7ZGYoYSl9fX1mdW5jdGlvbiBkZihhLGIpe2lmKGEuYSl7YWYoYSk7dmFyIGM9YS5hLGQ9YS52WzBdP2NhOm51bGw7YS5hPW51bGw7YS52PW51bGw7Ynx8RyhhLFwicmVhZHlcIik7dHJ5e2Mub25yZWFkeXN0YXRlY2hhbmdlPWR9Y2F0Y2goZSl7KGE9YS5KKSYmYS5sb2coeGQsXCJQcm9ibGVtIGVuY291bnRlcmVkIHJlc2V0dGluZyBvbnJlYWR5c3RhdGVjaGFuZ2U6IFwiK2UubWVzc2FnZSx2b2lkIDApfX19XG5mdW5jdGlvbiBhZihhKXthLmEmJmEubyYmKGEuYS5vbnRpbWVvdXQ9bnVsbCk7XCJudW1iZXJcIj09dHlwZW9mIGEubSYmKGsuY2xlYXJUaW1lb3V0KGEubSksYS5tPW51bGwpfWZ1bmN0aW9uIGZmKGEpe3JldHVybiBhLmE/YS5hLnJlYWR5U3RhdGU6MH1mdW5jdGlvbiBnZihhKXt0cnl7cmV0dXJuIDI8ZmYoYSk/YS5hLnN0YXR1czotMX1jYXRjaChiKXtyZXR1cm4tMX19ZnVuY3Rpb24gaGYoYSl7dHJ5e3JldHVybiBhLmE/YS5hLnJlc3BvbnNlVGV4dDpcIlwifWNhdGNoKGIpe3JldHVybiBIKGEuSixcIkNhbiBub3QgZ2V0IHJlc3BvbnNlVGV4dDogXCIrYi5tZXNzYWdlKSxcIlwifX1cbmguZ2V0UmVzcG9uc2U9ZnVuY3Rpb24oKXt0cnl7aWYoIXRoaXMuYSlyZXR1cm4gbnVsbDtpZihcInJlc3BvbnNlXCJpbiB0aGlzLmEpcmV0dXJuIHRoaXMuYS5yZXNwb25zZTtzd2l0Y2godGhpcy5sKXtjYXNlIFRlOmNhc2UgXCJ0ZXh0XCI6cmV0dXJuIHRoaXMuYS5yZXNwb25zZVRleHQ7Y2FzZSBcImFycmF5YnVmZmVyXCI6aWYoXCJtb3pSZXNwb25zZUFycmF5QnVmZmVyXCJpbiB0aGlzLmEpcmV0dXJuIHRoaXMuYS5tb3pSZXNwb25zZUFycmF5QnVmZmVyfXZhciBhPXRoaXMuSjthJiZhLmxvZyh4ZCxcIlJlc3BvbnNlIHR5cGUgXCIrdGhpcy5sK1wiIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyXCIsdm9pZCAwKTtyZXR1cm4gbnVsbH1jYXRjaChiKXtyZXR1cm4gSCh0aGlzLkosXCJDYW4gbm90IGdldCByZXNwb25zZTogXCIrYi5tZXNzYWdlKSxudWxsfX07ZnVuY3Rpb24gWmUoYSxiKXtyZXR1cm4gYitcIiBbXCIrYS5JK1wiIFwiK2EuaStcIiBcIitnZihhKStcIl1cIn07dmFyIGpmPS9eWythLXpBLVowLTlfLiEjJCUmJypcXC89P15ge3x9fi1dK0AoW2EtekEtWjAtOS1dK1xcLikrW2EtekEtWjAtOV17Miw2M30kLztmdW5jdGlvbiBrZihhKXt2YXIgYj17fSxjPWIuZG9jdW1lbnR8fGRvY3VtZW50LGQ9Z2MoYSksZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiU0NSSVBUXCIpLGY9e0NiOmUsRWE6dm9pZCAwfSxnPW5ldyBOZChsZixmKSxsPW51bGwsbj1udWxsIT1iLnRpbWVvdXQ/Yi50aW1lb3V0OjVFMzswPG4mJihsPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bWYoZSwhMCk7dmFyIGE9bmV3IG5mKG9mLFwiVGltZW91dCByZWFjaGVkIGZvciBsb2FkaW5nIHNjcmlwdCBcIitkKTtQZChnKTtRZChnLCExLGEpfSxuKSxmLkVhPWwpO2Uub25sb2FkPWUub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ZS5yZWFkeVN0YXRlJiZcImxvYWRlZFwiIT1lLnJlYWR5U3RhdGUmJlwiY29tcGxldGVcIiE9ZS5yZWFkeVN0YXRlfHwobWYoZSxiLlNjfHwhMSxsKSxnLkEobnVsbCkpfTtlLm9uZXJyb3I9ZnVuY3Rpb24oKXttZihlLCEwLGwpO3ZhciBhPW5ldyBuZihwZixcIkVycm9yIHdoaWxlIGxvYWRpbmcgc2NyaXB0IFwiK1xuZCk7UGQoZyk7UWQoZywhMSxhKX07Zj1iLmF0dHJpYnV0ZXN8fHt9O1dhKGYse3R5cGU6XCJ0ZXh0L2phdmFzY3JpcHRcIixjaGFyc2V0OlwiVVRGLThcIn0pO3hjKGUsZik7ZS5zcmM9Z2MoYSk7cWYoYykuYXBwZW5kQ2hpbGQoZSk7cmV0dXJuIGd9ZnVuY3Rpb24gcWYoYSl7dmFyIGI7cmV0dXJuKGI9KGF8fGRvY3VtZW50KS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIkhFQURcIikpJiYwIT1iLmxlbmd0aD9iWzBdOmEuZG9jdW1lbnRFbGVtZW50fWZ1bmN0aW9uIGxmKCl7aWYodGhpcyYmdGhpcy5DYil7dmFyIGE9dGhpcy5DYjthJiZcIlNDUklQVFwiPT1hLnRhZ05hbWUmJm1mKGEsITAsdGhpcy5FYSl9fVxuZnVuY3Rpb24gbWYoYSxiLGMpe251bGwhPWMmJmsuY2xlYXJUaW1lb3V0KGMpO2Eub25sb2FkPWNhO2Eub25lcnJvcj1jYTthLm9ucmVhZHlzdGF0ZWNoYW5nZT1jYTtiJiZ3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2EmJmEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfSwwKX12YXIgcGY9MCxvZj0xO2Z1bmN0aW9uIG5mKGEsYil7dmFyIGM9XCJKc2xvYWRlciBlcnJvciAoY29kZSAjXCIrYStcIilcIjtiJiYoYys9XCI6IFwiK2IpO3UuY2FsbCh0aGlzLGMpO3RoaXMuY29kZT1hfXQobmYsdSk7ZnVuY3Rpb24gcmYoKXt9dChyZixOZSk7cmYucHJvdG90eXBlLmE9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgWE1MSHR0cFJlcXVlc3Q7aWYoXCJ3aXRoQ3JlZGVudGlhbHNcImluIGEpcmV0dXJuIGE7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFhEb21haW5SZXF1ZXN0KXJldHVybiBuZXcgc2Y7dGhyb3cgRXJyb3IoXCJVbnN1cHBvcnRlZCBicm93c2VyXCIpO307cmYucHJvdG90eXBlLmI9ZnVuY3Rpb24oKXtyZXR1cm57fX07XG5mdW5jdGlvbiBzZigpe3RoaXMuYT1uZXcgWERvbWFpblJlcXVlc3Q7dGhpcy5yZWFkeVN0YXRlPTA7dGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDt0aGlzLnJlc3BvbnNlVGV4dD1cIlwiO3RoaXMuc3RhdHVzPS0xO3RoaXMuc3RhdHVzVGV4dD10aGlzLnJlc3BvbnNlWE1MPW51bGw7dGhpcy5hLm9ubG9hZD1yKHRoaXMuV2IsdGhpcyk7dGhpcy5hLm9uZXJyb3I9cih0aGlzLnhiLHRoaXMpO3RoaXMuYS5vbnByb2dyZXNzPXIodGhpcy5YYix0aGlzKTt0aGlzLmEub250aW1lb3V0PXIodGhpcy5ZYix0aGlzKX1oPXNmLnByb3RvdHlwZTtoLm9wZW49ZnVuY3Rpb24oYSxiLGMpe2lmKG51bGwhPWMmJiFjKXRocm93IEVycm9yKFwiT25seSBhc3luYyByZXF1ZXN0cyBhcmUgc3VwcG9ydGVkLlwiKTt0aGlzLmEub3BlbihhLGIpfTtcbmguc2VuZD1mdW5jdGlvbihhKXtpZihhKWlmKFwic3RyaW5nXCI9PXR5cGVvZiBhKXRoaXMuYS5zZW5kKGEpO2Vsc2UgdGhyb3cgRXJyb3IoXCJPbmx5IHN0cmluZyBkYXRhIGlzIHN1cHBvcnRlZFwiKTtlbHNlIHRoaXMuYS5zZW5kKCl9O2guYWJvcnQ9ZnVuY3Rpb24oKXt0aGlzLmEuYWJvcnQoKX07aC5zZXRSZXF1ZXN0SGVhZGVyPWZ1bmN0aW9uKCl7fTtoLmdldFJlc3BvbnNlSGVhZGVyPWZ1bmN0aW9uKGEpe3JldHVyblwiY29udGVudC10eXBlXCI9PWEudG9Mb3dlckNhc2UoKT90aGlzLmEuY29udGVudFR5cGU6XCJcIn07aC5XYj1mdW5jdGlvbigpe3RoaXMuc3RhdHVzPTIwMDt0aGlzLnJlc3BvbnNlVGV4dD10aGlzLmEucmVzcG9uc2VUZXh0O3RmKHRoaXMsNCl9O2gueGI9ZnVuY3Rpb24oKXt0aGlzLnN0YXR1cz01MDA7dGhpcy5yZXNwb25zZVRleHQ9XCJcIjt0Zih0aGlzLDQpfTtoLlliPWZ1bmN0aW9uKCl7dGhpcy54YigpfTtcbmguWGI9ZnVuY3Rpb24oKXt0aGlzLnN0YXR1cz0yMDA7dGYodGhpcywxKX07ZnVuY3Rpb24gdGYoYSxiKXthLnJlYWR5U3RhdGU9YjtpZihhLm9ucmVhZHlzdGF0ZWNoYW5nZSlhLm9ucmVhZHlzdGF0ZWNoYW5nZSgpfWguZ2V0QWxsUmVzcG9uc2VIZWFkZXJzPWZ1bmN0aW9uKCl7cmV0dXJuXCJjb250ZW50LXR5cGU6IFwiK3RoaXMuYS5jb250ZW50VHlwZX07ZnVuY3Rpb24gdWYoKXt2YXIgYT1KKCk7cmV0dXJuIHkmJiEha2ImJjExPT1rYnx8L0VkZ2VcXC9cXGQrLy50ZXN0KGEpfWZ1bmN0aW9uIHZmKCl7cmV0dXJuIGsud2luZG93JiZrLndpbmRvdy5sb2NhdGlvbi5ocmVmfHxcIlwifWZ1bmN0aW9uIHdmKGEsYil7Yj1ifHxrLndpbmRvdzt2YXIgYz1cImFib3V0OmJsYW5rXCI7YSYmKGM9bmMocGMoYSkpKTtiLmxvY2F0aW9uLmhyZWY9Y31mdW5jdGlvbiB4ZihhLGIpe3ZhciBjPVtdLGQ7Zm9yKGQgaW4gYSlkIGluIGI/dHlwZW9mIGFbZF0hPXR5cGVvZiBiW2RdP2MucHVzaChkKTpmYShhW2RdKT9UYShhW2RdLGJbZF0pfHxjLnB1c2goZCk6XCJvYmplY3RcIj09dHlwZW9mIGFbZF0mJm51bGwhPWFbZF0mJm51bGwhPWJbZF0/MDx4ZihhW2RdLGJbZF0pLmxlbmd0aCYmYy5wdXNoKGQpOmFbZF0hPT1iW2RdJiZjLnB1c2goZCk6Yy5wdXNoKGQpO2ZvcihkIGluIGIpZCBpbiBhfHxjLnB1c2goZCk7cmV0dXJuIGN9XG5mdW5jdGlvbiB5Zigpe3ZhciBhPUooKTthPXpmKGEpIT1BZj9udWxsOihhPWEubWF0Y2goL1xcc0Nocm9tZVxcLyhcXGQrKS9pKSkmJjI9PWEubGVuZ3RoP3BhcnNlSW50KGFbMV0sMTApOm51bGw7cmV0dXJuIGEmJjMwPmE/ITE6IXl8fCFrYnx8OTxrYn1mdW5jdGlvbiBCZihhKXthPShhfHxKKCkpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGEubWF0Y2goL2FuZHJvaWQvKXx8YS5tYXRjaCgvd2Vib3MvKXx8YS5tYXRjaCgvaXBob25lfGlwYWR8aXBvZC8pfHxhLm1hdGNoKC9ibGFja2JlcnJ5Lyl8fGEubWF0Y2goL3dpbmRvd3MgcGhvbmUvKXx8YS5tYXRjaCgvaWVtb2JpbGUvKT8hMDohMX1mdW5jdGlvbiBDZihhKXthPWF8fGsud2luZG93O3RyeXthLmNsb3NlKCl9Y2F0Y2goYil7fX1cbmZ1bmN0aW9uIERmKGEsYixjKXt2YXIgZD1NYXRoLmZsb29yKDFFOSpNYXRoLnJhbmRvbSgpKS50b1N0cmluZygpO2I9Ynx8NTAwO2M9Y3x8NjAwO3ZhciBlPSh3aW5kb3cuc2NyZWVuLmF2YWlsSGVpZ2h0LWMpLzIsZj0od2luZG93LnNjcmVlbi5hdmFpbFdpZHRoLWIpLzI7Yj17d2lkdGg6YixoZWlnaHQ6Yyx0b3A6MDxlP2U6MCxsZWZ0OjA8Zj9mOjAsbG9jYXRpb246ITAscmVzaXphYmxlOiEwLHN0YXR1c2JhcjohMCx0b29sYmFyOiExfTtjPUooKS50b0xvd2VyQ2FzZSgpO2QmJihiLnRhcmdldD1kLHYoYyxcImNyaW9zL1wiKSYmKGIudGFyZ2V0PVwiX2JsYW5rXCIpKTt6ZihKKCkpPT1FZiYmKGE9YXx8XCJodHRwOi8vbG9jYWxob3N0XCIsYi5zY3JvbGxiYXJzPSEwKTtjPWF8fFwiXCI7KGQ9Yil8fChkPXt9KTthPXdpbmRvdztiPWMgaW5zdGFuY2VvZiBsYz9jOnBjKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBjLmhyZWY/Yy5ocmVmOlN0cmluZyhjKSk7Yz1kLnRhcmdldHx8Yy50YXJnZXQ7ZT1bXTtcbmZvcihnIGluIGQpc3dpdGNoKGcpe2Nhc2UgXCJ3aWR0aFwiOmNhc2UgXCJoZWlnaHRcIjpjYXNlIFwidG9wXCI6Y2FzZSBcImxlZnRcIjplLnB1c2goZytcIj1cIitkW2ddKTticmVhaztjYXNlIFwidGFyZ2V0XCI6Y2FzZSBcIm5vcmVmZXJyZXJcIjpicmVhaztkZWZhdWx0OmUucHVzaChnK1wiPVwiKyhkW2ddPzE6MCkpfXZhciBnPWUuam9pbihcIixcIik7KHgoXCJpUGhvbmVcIikmJiF4KFwiaVBvZFwiKSYmIXgoXCJpUGFkXCIpfHx4KFwiaVBhZFwiKXx8eChcImlQb2RcIikpJiZhLm5hdmlnYXRvciYmYS5uYXZpZ2F0b3Iuc3RhbmRhbG9uZSYmYyYmXCJfc2VsZlwiIT1jPyhnPWEuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkFcIiksYiBpbnN0YW5jZW9mIGxjfHxiIGluc3RhbmNlb2YgbGN8fChiPWIubGE/Yi5qYSgpOlN0cmluZyhiKSxvYy50ZXN0KGIpfHwoYj1cImFib3V0OmludmFsaWQjekNsb3N1cmV6XCIpLGI9cWMoYikpLGcuaHJlZj1uYyhiKSxnLnNldEF0dHJpYnV0ZShcInRhcmdldFwiLGMpLGQubm9yZWZlcnJlciYmZy5zZXRBdHRyaWJ1dGUoXCJyZWxcIixcblwibm9yZWZlcnJlclwiKSxkPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiTW91c2VFdmVudFwiKSxkLmluaXRNb3VzZUV2ZW50KFwiY2xpY2tcIiwhMCwhMCxhLDEpLGcuZGlzcGF0Y2hFdmVudChkKSxnPXt9KTpkLm5vcmVmZXJyZXI/KGc9YS5vcGVuKFwiXCIsYyxnKSxhPW5jKGIpLGcmJihiYiYmdihhLFwiO1wiKSYmKGE9XCInXCIrYS5yZXBsYWNlKC8nL2csXCIlMjdcIikrXCInXCIpLGcub3BlbmVyPW51bGwsZGMoXCJiLzEyMDE0NDEyLCBtZXRhIHRhZyB3aXRoIHNhbml0aXplZCBVUkxcIiksYT0nPE1FVEEgSFRUUC1FUVVJVj1cInJlZnJlc2hcIiBjb250ZW50PVwiMDsgdXJsPScrcWEoYSkrJ1wiPicsYT12YyhhKSxnLmRvY3VtZW50LndyaXRlKHVjKGEpKSxnLmRvY3VtZW50LmNsb3NlKCkpKTpnPWEub3BlbihuYyhiKSxjLGcpO2lmKGcpdHJ5e2cuZm9jdXMoKX1jYXRjaChsKXt9cmV0dXJuIGd9XG5mdW5jdGlvbiBGZihhKXtyZXR1cm4gbmV3IHooZnVuY3Rpb24oYil7ZnVuY3Rpb24gYygpe3NkKDJFMykudGhlbihmdW5jdGlvbigpe2lmKCFhfHxhLmNsb3NlZCliKCk7ZWxzZSByZXR1cm4gYygpfSl9cmV0dXJuIGMoKX0pfXZhciBHZj0vXlxcZHsxLDN9XFwuXFxkezEsM31cXC5cXGR7MSwzfVxcLlxcZHsxLDN9JC87ZnVuY3Rpb24gSGYoKXt2YXIgYT1udWxsO3JldHVybihuZXcgeihmdW5jdGlvbihiKXtcImNvbXBsZXRlXCI9PWsuZG9jdW1lbnQucmVhZHlTdGF0ZT9iKCk6KGE9ZnVuY3Rpb24oKXtiKCl9LGRkKHdpbmRvdyxcImxvYWRcIixhKSl9KSkucyhmdW5jdGlvbihiKXtFKHdpbmRvdyxcImxvYWRcIixhKTt0aHJvdyBiO30pfVxuZnVuY3Rpb24gSWYoKXtyZXR1cm4gSmYodm9pZCAwKT9IZigpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHooZnVuY3Rpb24oYSxiKXt2YXIgYz1rLmRvY3VtZW50LGQ9c2V0VGltZW91dChmdW5jdGlvbigpe2IoRXJyb3IoXCJDb3Jkb3ZhIGZyYW1ld29yayBpcyBub3QgcmVhZHkuXCIpKX0sMUUzKTtjLmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VyZWFkeVwiLGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGQpO2EoKX0sITEpfSl9KTpCKEVycm9yKFwiQ29yZG92YSBtdXN0IHJ1biBpbiBhbiBBbmRyb2lkIG9yIGlPUyBmaWxlIHNjaGVtZS5cIikpfWZ1bmN0aW9uIEpmKGEpe2E9YXx8SigpO3JldHVybiEoXCJmaWxlOlwiIT09S2YoKXx8IWEudG9Mb3dlckNhc2UoKS5tYXRjaCgvaXBob25lfGlwYWR8aXBvZHxhbmRyb2lkLykpfWZ1bmN0aW9uIExmKCl7dmFyIGE9ay53aW5kb3c7dHJ5e3JldHVybiEoIWF8fGE9PWEudG9wKX1jYXRjaChiKXtyZXR1cm4hMX19XG5mdW5jdGlvbiBLKCl7cmV0dXJuIGZpcmViYXNlLklOVEVSTkFMLmhhc093blByb3BlcnR5KFwicmVhY3ROYXRpdmVcIik/XCJSZWFjdE5hdGl2ZVwiOmZpcmViYXNlLklOVEVSTkFMLmhhc093blByb3BlcnR5KFwibm9kZVwiKT9cIk5vZGVcIjpcIkJyb3dzZXJcIn1mdW5jdGlvbiBNZigpe3ZhciBhPUsoKTtyZXR1cm5cIlJlYWN0TmF0aXZlXCI9PT1hfHxcIk5vZGVcIj09PWF9dmFyIEVmPVwiRmlyZWZveFwiLEFmPVwiQ2hyb21lXCI7XG5mdW5jdGlvbiB6ZihhKXt2YXIgYj1hLnRvTG93ZXJDYXNlKCk7aWYodihiLFwib3BlcmEvXCIpfHx2KGIsXCJvcHIvXCIpfHx2KGIsXCJvcGlvcy9cIikpcmV0dXJuXCJPcGVyYVwiO2lmKHYoYixcImllbW9iaWxlXCIpKXJldHVyblwiSUVNb2JpbGVcIjtpZih2KGIsXCJtc2llXCIpfHx2KGIsXCJ0cmlkZW50L1wiKSlyZXR1cm5cIklFXCI7aWYodihiLFwiZWRnZS9cIikpcmV0dXJuXCJFZGdlXCI7aWYodihiLFwiZmlyZWZveC9cIikpcmV0dXJuIEVmO2lmKHYoYixcInNpbGsvXCIpKXJldHVyblwiU2lsa1wiO2lmKHYoYixcImJsYWNrYmVycnlcIikpcmV0dXJuXCJCbGFja2JlcnJ5XCI7aWYodihiLFwid2Vib3NcIikpcmV0dXJuXCJXZWJvc1wiO2lmKCF2KGIsXCJzYWZhcmkvXCIpfHx2KGIsXCJjaHJvbWUvXCIpfHx2KGIsXCJjcmlvcy9cIil8fHYoYixcImFuZHJvaWRcIikpaWYoIXYoYixcImNocm9tZS9cIikmJiF2KGIsXCJjcmlvcy9cIil8fHYoYixcImVkZ2UvXCIpKXtpZih2KGIsXCJhbmRyb2lkXCIpKXJldHVyblwiQW5kcm9pZFwiO2lmKChhPWEubWF0Y2goLyhbYS16QS1aXFxkXFwuXSspXFwvW2EtekEtWlxcZFxcLl0qJC8pKSYmXG4yPT1hLmxlbmd0aClyZXR1cm4gYVsxXX1lbHNlIHJldHVybiBBZjtlbHNlIHJldHVyblwiU2FmYXJpXCI7cmV0dXJuXCJPdGhlclwifXZhciBOZj17R2M6XCJGaXJlYmFzZUNvcmUtd2ViXCIsSWM6XCJGaXJlYmFzZVVJLXdlYlwifTtmdW5jdGlvbiBPZihhLGIpe2I9Ynx8W107dmFyIGM9W10sZD17fSxlO2ZvcihlIGluIE5mKWRbTmZbZV1dPSEwO2ZvcihlPTA7ZTxiLmxlbmd0aDtlKyspXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBkW2JbZV1dJiYoZGVsZXRlIGRbYltlXV0sYy5wdXNoKGJbZV0pKTtjLnNvcnQoKTtiPWM7Yi5sZW5ndGh8fChiPVtcIkZpcmViYXNlQ29yZS13ZWJcIl0pO2M9SygpO2Q9XCJcIjtcIkJyb3dzZXJcIj09PWM/ZD16ZihKKCkpOmQ9YztyZXR1cm4gZCtcIi9Kc0NvcmUvXCIrYStcIi9cIitiLmpvaW4oXCIsXCIpfWZ1bmN0aW9uIEooKXtyZXR1cm4gay5uYXZpZ2F0b3ImJmsubmF2aWdhdG9yLnVzZXJBZ2VudHx8XCJcIn1cbmZ1bmN0aW9uIEwoYSxiKXthPWEuc3BsaXQoXCIuXCIpO2I9Ynx8aztmb3IodmFyIGM9MDtjPGEubGVuZ3RoJiZcIm9iamVjdFwiPT10eXBlb2YgYiYmbnVsbCE9YjtjKyspYj1iW2FbY11dO2MhPWEubGVuZ3RoJiYoYj12b2lkIDApO3JldHVybiBifWZ1bmN0aW9uIFBmKCl7dHJ5e3ZhciBhPWsubG9jYWxTdG9yYWdlLGI9UWYoKTtpZihhKXJldHVybiBhLnNldEl0ZW0oYixcIjFcIiksYS5yZW1vdmVJdGVtKGIpLHVmKCk/ISFrLmluZGV4ZWREQjohMH1jYXRjaChjKXt9cmV0dXJuITF9ZnVuY3Rpb24gUmYoKXtyZXR1cm4oU2YoKXx8XCJjaHJvbWUtZXh0ZW5zaW9uOlwiPT09S2YoKXx8SmYoKSkmJiFNZigpJiZQZigpfWZ1bmN0aW9uIFNmKCl7cmV0dXJuXCJodHRwOlwiPT09S2YoKXx8XCJodHRwczpcIj09PUtmKCl9ZnVuY3Rpb24gS2YoKXtyZXR1cm4gay5sb2NhdGlvbiYmay5sb2NhdGlvbi5wcm90b2NvbHx8bnVsbH1cbmZ1bmN0aW9uIFRmKGEpe2E9YXx8SigpO3JldHVybiBCZihhKXx8emYoYSk9PUVmPyExOiEwfWZ1bmN0aW9uIFVmKGEpe3JldHVyblwidW5kZWZpbmVkXCI9PT10eXBlb2YgYT9udWxsOkNjKGEpfWZ1bmN0aW9uIFZmKGEpe3ZhciBiPXt9LGM7Zm9yKGMgaW4gYSlhLmhhc093blByb3BlcnR5KGMpJiZudWxsIT09YVtjXSYmdm9pZCAwIT09YVtjXSYmKGJbY109YVtjXSk7cmV0dXJuIGJ9ZnVuY3Rpb24gV2YoYSl7aWYobnVsbCE9PWEpcmV0dXJuIEpTT04ucGFyc2UoYSl9ZnVuY3Rpb24gUWYoYSl7cmV0dXJuIGE/YTpcIlwiK01hdGguZmxvb3IoMUU5Kk1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKCl9ZnVuY3Rpb24gWGYoYSl7YT1hfHxKKCk7cmV0dXJuXCJTYWZhcmlcIj09emYoYSl8fGEudG9Mb3dlckNhc2UoKS5tYXRjaCgvaXBob25lfGlwYWR8aXBvZC8pPyExOiEwfVxuZnVuY3Rpb24gWWYoKXt2YXIgYT1rLl9fX2pzbDtpZihhJiZhLkgpZm9yKHZhciBiIGluIGEuSClpZihhLkhbYl0ucj1hLkhbYl0ucnx8W10sYS5IW2JdLkw9YS5IW2JdLkx8fFtdLGEuSFtiXS5yPWEuSFtiXS5MLmNvbmNhdCgpLGEuQ1ApZm9yKHZhciBjPTA7YzxhLkNQLmxlbmd0aDtjKyspYS5DUFtjXT1udWxsfWZ1bmN0aW9uIFpmKCl7dmFyIGE9ay5uYXZpZ2F0b3I7cmV0dXJuIGEmJlwiYm9vbGVhblwiPT09dHlwZW9mIGEub25MaW5lJiYoU2YoKXx8XCJjaHJvbWUtZXh0ZW5zaW9uOlwiPT09S2YoKXx8XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBhLmNvbm5lY3Rpb24pP2Eub25MaW5lOiEwfWZ1bmN0aW9uICRmKGEsYixjLGQpe2lmKGE+Yil0aHJvdyBFcnJvcihcIlNob3J0IGRlbGF5IHNob3VsZCBiZSBsZXNzIHRoYW4gbG9uZyBkZWxheSFcIik7dGhpcy5jPWE7dGhpcy5iPWI7YT1jfHxKKCk7ZD1kfHxLKCk7dGhpcy5hPUJmKGEpfHxcIlJlYWN0TmF0aXZlXCI9PT1kfVxuJGYucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmE/dGhpcy5iOnRoaXMuY307ZnVuY3Rpb24gYWcoKXt2YXIgYT1rLmRvY3VtZW50O3JldHVybiBhJiZcInVuZGVmaW5lZFwiIT09dHlwZW9mIGEudmlzaWJpbGl0eVN0YXRlP1widmlzaWJsZVwiPT1hLnZpc2liaWxpdHlTdGF0ZTohMH1mdW5jdGlvbiBiZygpe3ZhciBhPWsuZG9jdW1lbnQsYj1udWxsO3JldHVybiBhZygpfHwhYT9BKCk6KG5ldyB6KGZ1bmN0aW9uKGMpe2I9ZnVuY3Rpb24oKXthZygpJiYoYS5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLGIsITEpLGMoKSl9O2EuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIixiLCExKX0pKS5zKGZ1bmN0aW9uKGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIixiLCExKTt0aHJvdyBjO30pfVxuZnVuY3Rpb24gY2coYSl7dHJ5e3ZhciBiPW5ldyBEYXRlKHBhcnNlSW50KGEsMTApKTtpZighaXNOYU4oYi5nZXRUaW1lKCkpJiYhL1teMC05XS8udGVzdChhKSlyZXR1cm4gYi50b1VUQ1N0cmluZygpfWNhdGNoKGMpe31yZXR1cm4gbnVsbH07dmFyIGRnPXt9O3ZhciBlZzt0cnl7dmFyIGZnPXt9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShmZyxcImFiY2RcIix7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsdmFsdWU6MX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShmZyxcImFiY2RcIix7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsdmFsdWU6Mn0pO2VnPTI9PWZnLmFiY2R9Y2F0Y2goYSl7ZWc9ITF9ZnVuY3Rpb24gTShhLGIsYyl7ZWc/T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsdmFsdWU6Y30pOmFbYl09Y31mdW5jdGlvbiBnZyhhLGIpe2lmKGIpZm9yKHZhciBjIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShjKSYmTShhLGMsYltjXSl9ZnVuY3Rpb24gaGcoYSl7dmFyIGI9e307Z2coYixhKTtyZXR1cm4gYn1mdW5jdGlvbiBpZyhhKXt2YXIgYj17fSxjO2ZvcihjIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJ9XG5mdW5jdGlvbiBqZyhhLGIpe2lmKCFifHwhYi5sZW5ndGgpcmV0dXJuITA7aWYoIWEpcmV0dXJuITE7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWFbYltjXV07aWYodm9pZCAwPT09ZHx8bnVsbD09PWR8fFwiXCI9PT1kKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIGtnKGEpe3ZhciBiPWE7aWYoXCJvYmplY3RcIj09dHlwZW9mIGEmJm51bGwhPWEpe2I9XCJsZW5ndGhcImluIGE/W106e307Zm9yKHZhciBjIGluIGEpTShiLGMsa2coYVtjXSkpfXJldHVybiBifTtmdW5jdGlvbiBsZyhhKXt2YXIgYj17fSxjPWFbbWddLGQ9YVtuZ107YT1hW29nXTtpZighY3x8IWEpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIHByb3ZpZGVyIHVzZXIgaW5mbyFcIik7YltwZ109ZHx8bnVsbDtiW3FnXT1jO00odGhpcyxyZyxhKTtNKHRoaXMsc2csa2coYikpfXZhciBtZz1cImVtYWlsXCIsbmc9XCJuZXdFbWFpbFwiLG9nPVwicmVxdWVzdFR5cGVcIixxZz1cImVtYWlsXCIscGc9XCJmcm9tRW1haWxcIixzZz1cImRhdGFcIixyZz1cIm9wZXJhdGlvblwiO2Z1bmN0aW9uIE4oYSxiKXt0aGlzLmNvZGU9dGcrYTt0aGlzLm1lc3NhZ2U9Ynx8dWdbYV18fFwiXCJ9dChOLEVycm9yKTtOLnByb3RvdHlwZS5CPWZ1bmN0aW9uKCl7cmV0dXJue2NvZGU6dGhpcy5jb2RlLG1lc3NhZ2U6dGhpcy5tZXNzYWdlfX07Ti5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQigpfTtmdW5jdGlvbiB2ZyhhKXt2YXIgYj1hJiZhLmNvZGU7cmV0dXJuIGI/bmV3IE4oYi5zdWJzdHJpbmcodGcubGVuZ3RoKSxhLm1lc3NhZ2UpOm51bGx9XG52YXIgdGc9XCJhdXRoL1wiLHVnPXtcImFyZ3VtZW50LWVycm9yXCI6XCJcIixcImFwcC1ub3QtYXV0aG9yaXplZFwiOlwiVGhpcyBhcHAsIGlkZW50aWZpZWQgYnkgdGhlIGRvbWFpbiB3aGVyZSBpdCdzIGhvc3RlZCwgaXMgbm90IGF1dGhvcml6ZWQgdG8gdXNlIEZpcmViYXNlIEF1dGhlbnRpY2F0aW9uIHdpdGggdGhlIHByb3ZpZGVkIEFQSSBrZXkuIFJldmlldyB5b3VyIGtleSBjb25maWd1cmF0aW9uIGluIHRoZSBHb29nbGUgQVBJIGNvbnNvbGUuXCIsXCJhcHAtbm90LWluc3RhbGxlZFwiOlwiVGhlIHJlcXVlc3RlZCBtb2JpbGUgYXBwbGljYXRpb24gY29ycmVzcG9uZGluZyB0byB0aGUgaWRlbnRpZmllciAoQW5kcm9pZCBwYWNrYWdlIG5hbWUgb3IgaU9TIGJ1bmRsZSBJRCkgcHJvdmlkZWQgaXMgbm90IGluc3RhbGxlZCBvbiB0aGlzIGRldmljZS5cIixcImNhcHRjaGEtY2hlY2stZmFpbGVkXCI6XCJUaGUgcmVDQVBUQ0hBIHJlc3BvbnNlIHRva2VuIHByb3ZpZGVkIGlzIGVpdGhlciBpbnZhbGlkLCBleHBpcmVkLCBhbHJlYWR5IHVzZWQgb3IgdGhlIGRvbWFpbiBhc3NvY2lhdGVkIHdpdGggaXQgZG9lcyBub3QgbWF0Y2ggdGhlIGxpc3Qgb2Ygd2hpdGVsaXN0ZWQgZG9tYWlucy5cIixcblwiY29kZS1leHBpcmVkXCI6XCJUaGUgU01TIGNvZGUgaGFzIGV4cGlyZWQuIFBsZWFzZSByZS1zZW5kIHRoZSB2ZXJpZmljYXRpb24gY29kZSB0byB0cnkgYWdhaW4uXCIsXCJjb3Jkb3ZhLW5vdC1yZWFkeVwiOlwiQ29yZG92YSBmcmFtZXdvcmsgaXMgbm90IHJlYWR5LlwiLFwiY29ycy11bnN1cHBvcnRlZFwiOlwiVGhpcyBicm93c2VyIGlzIG5vdCBzdXBwb3J0ZWQuXCIsXCJjcmVkZW50aWFsLWFscmVhZHktaW4tdXNlXCI6XCJUaGlzIGNyZWRlbnRpYWwgaXMgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggYSBkaWZmZXJlbnQgdXNlciBhY2NvdW50LlwiLFwiY3VzdG9tLXRva2VuLW1pc21hdGNoXCI6XCJUaGUgY3VzdG9tIHRva2VuIGNvcnJlc3BvbmRzIHRvIGEgZGlmZmVyZW50IGF1ZGllbmNlLlwiLFwicmVxdWlyZXMtcmVjZW50LWxvZ2luXCI6XCJUaGlzIG9wZXJhdGlvbiBpcyBzZW5zaXRpdmUgYW5kIHJlcXVpcmVzIHJlY2VudCBhdXRoZW50aWNhdGlvbi4gTG9nIGluIGFnYWluIGJlZm9yZSByZXRyeWluZyB0aGlzIHJlcXVlc3QuXCIsXG5cImR5bmFtaWMtbGluay1ub3QtYWN0aXZhdGVkXCI6XCJQbGVhc2UgYWN0aXZhdGUgRHluYW1pYyBMaW5rcyBpbiB0aGUgRmlyZWJhc2UgQ29uc29sZSBhbmQgYWdyZWUgdG8gdGhlIHRlcm1zIGFuZCBjb25kaXRpb25zLlwiLFwiZW1haWwtYWxyZWFkeS1pbi11c2VcIjpcIlRoZSBlbWFpbCBhZGRyZXNzIGlzIGFscmVhZHkgaW4gdXNlIGJ5IGFub3RoZXIgYWNjb3VudC5cIixcImV4cGlyZWQtYWN0aW9uLWNvZGVcIjpcIlRoZSBhY3Rpb24gY29kZSBoYXMgZXhwaXJlZC4gXCIsXCJjYW5jZWxsZWQtcG9wdXAtcmVxdWVzdFwiOlwiVGhpcyBvcGVyYXRpb24gaGFzIGJlZW4gY2FuY2VsbGVkIGR1ZSB0byBhbm90aGVyIGNvbmZsaWN0aW5nIHBvcHVwIGJlaW5nIG9wZW5lZC5cIixcImludGVybmFsLWVycm9yXCI6XCJBbiBpbnRlcm5hbCBlcnJvciBoYXMgb2NjdXJyZWQuXCIsXCJpbnZhbGlkLWFwcC1jcmVkZW50aWFsXCI6XCJUaGUgcGhvbmUgdmVyaWZpY2F0aW9uIHJlcXVlc3QgY29udGFpbnMgYW4gaW52YWxpZCBhcHBsaWNhdGlvbiB2ZXJpZmllci4gVGhlIHJlQ0FQVENIQSB0b2tlbiByZXNwb25zZSBpcyBlaXRoZXIgaW52YWxpZCBvciBleHBpcmVkLlwiLFxuXCJpbnZhbGlkLWFwcC1pZFwiOlwiVGhlIG1vYmlsZSBhcHAgaWRlbnRpZmllciBpcyBub3QgcmVnaXN0ZWQgZm9yIHRoZSBjdXJyZW50IHByb2plY3QuXCIsXCJpbnZhbGlkLXVzZXItdG9rZW5cIjpcIlRoZSB1c2VyJ3MgY3JlZGVudGlhbCBpcyBubyBsb25nZXIgdmFsaWQuIFRoZSB1c2VyIG11c3Qgc2lnbiBpbiBhZ2Fpbi5cIixcImludmFsaWQtYXV0aC1ldmVudFwiOlwiQW4gaW50ZXJuYWwgZXJyb3IgaGFzIG9jY3VycmVkLlwiLFwiaW52YWxpZC12ZXJpZmljYXRpb24tY29kZVwiOlwiVGhlIFNNUyB2ZXJpZmljYXRpb24gY29kZSB1c2VkIHRvIGNyZWF0ZSB0aGUgcGhvbmUgYXV0aCBjcmVkZW50aWFsIGlzIGludmFsaWQuIFBsZWFzZSByZXNlbmQgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIHNtcyBhbmQgYmUgc3VyZSB1c2UgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIHByb3ZpZGVkIGJ5IHRoZSB1c2VyLlwiLFwiaW52YWxpZC1jb250aW51ZS11cmlcIjpcIlRoZSBjb250aW51ZSBVUkwgcHJvdmlkZWQgaW4gdGhlIHJlcXVlc3QgaXMgaW52YWxpZC5cIixcblwiaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb25cIjpcIlRoZSBmb2xsb3dpbmcgQ29yZG92YSBwbHVnaW5zIG11c3QgYmUgaW5zdGFsbGVkIHRvIGVuYWJsZSBPQXV0aCBzaWduLWluOiBjb3Jkb3ZhLXBsdWdpbi1idWlsZGluZm8sIGNvcmRvdmEtdW5pdmVyc2FsLWxpbmtzLXBsdWdpbiwgY29yZG92YS1wbHVnaW4tYnJvd3NlcnRhYiwgY29yZG92YS1wbHVnaW4taW5hcHBicm93c2VyIGFuZCBjb3Jkb3ZhLXBsdWdpbi1jdXN0b211cmxzY2hlbWUuXCIsXCJpbnZhbGlkLWN1c3RvbS10b2tlblwiOlwiVGhlIGN1c3RvbSB0b2tlbiBmb3JtYXQgaXMgaW5jb3JyZWN0LiBQbGVhc2UgY2hlY2sgdGhlIGRvY3VtZW50YXRpb24uXCIsXCJpbnZhbGlkLWVtYWlsXCI6XCJUaGUgZW1haWwgYWRkcmVzcyBpcyBiYWRseSBmb3JtYXR0ZWQuXCIsXCJpbnZhbGlkLWFwaS1rZXlcIjpcIllvdXIgQVBJIGtleSBpcyBpbnZhbGlkLCBwbGVhc2UgY2hlY2sgeW91IGhhdmUgY29waWVkIGl0IGNvcnJlY3RseS5cIixcImludmFsaWQtY2VydC1oYXNoXCI6XCJUaGUgU0hBLTEgY2VydGlmaWNhdGUgaGFzaCBwcm92aWRlZCBpcyBpbnZhbGlkLlwiLFxuXCJpbnZhbGlkLWNyZWRlbnRpYWxcIjpcIlRoZSBzdXBwbGllZCBhdXRoIGNyZWRlbnRpYWwgaXMgbWFsZm9ybWVkIG9yIGhhcyBleHBpcmVkLlwiLFwiaW52YWxpZC1wZXJzaXN0ZW5jZS10eXBlXCI6XCJUaGUgc3BlY2lmaWVkIHBlcnNpc3RlbmNlIHR5cGUgaXMgaW52YWxpZC4gSXQgY2FuIG9ubHkgYmUgbG9jYWwsIHNlc3Npb24gb3Igbm9uZS5cIixcImludmFsaWQtbWVzc2FnZS1wYXlsb2FkXCI6XCJUaGUgZW1haWwgdGVtcGxhdGUgY29ycmVzcG9uZGluZyB0byB0aGlzIGFjdGlvbiBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgaW4gaXRzIG1lc3NhZ2UuIFBsZWFzZSBmaXggYnkgZ29pbmcgdG8gdGhlIEF1dGggZW1haWwgdGVtcGxhdGVzIHNlY3Rpb24gaW4gdGhlIEZpcmViYXNlIENvbnNvbGUuXCIsXCJpbnZhbGlkLW9hdXRoLXByb3ZpZGVyXCI6XCJFbWFpbEF1dGhQcm92aWRlciBpcyBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIG9wZXJhdGlvbi4gVGhpcyBvcGVyYXRpb24gb25seSBzdXBwb3J0cyBPQXV0aCBwcm92aWRlcnMuXCIsXG5cImludmFsaWQtb2F1dGgtY2xpZW50LWlkXCI6XCJUaGUgT0F1dGggY2xpZW50IElEIHByb3ZpZGVkIGlzIGVpdGhlciBpbnZhbGlkIG9yIGRvZXMgbm90IG1hdGNoIHRoZSBzcGVjaWZpZWQgQVBJIGtleS5cIixcInVuYXV0aG9yaXplZC1kb21haW5cIjpcIlRoaXMgZG9tYWluIGlzIG5vdCBhdXRob3JpemVkIGZvciBPQXV0aCBvcGVyYXRpb25zIGZvciB5b3VyIEZpcmViYXNlIHByb2plY3QuIEVkaXQgdGhlIGxpc3Qgb2YgYXV0aG9yaXplZCBkb21haW5zIGZyb20gdGhlIEZpcmViYXNlIGNvbnNvbGUuXCIsXCJpbnZhbGlkLWFjdGlvbi1jb2RlXCI6XCJUaGUgYWN0aW9uIGNvZGUgaXMgaW52YWxpZC4gVGhpcyBjYW4gaGFwcGVuIGlmIHRoZSBjb2RlIGlzIG1hbGZvcm1lZCwgZXhwaXJlZCwgb3IgaGFzIGFscmVhZHkgYmVlbiB1c2VkLlwiLFwid3JvbmctcGFzc3dvcmRcIjpcIlRoZSBwYXNzd29yZCBpcyBpbnZhbGlkIG9yIHRoZSB1c2VyIGRvZXMgbm90IGhhdmUgYSBwYXNzd29yZC5cIixcImludmFsaWQtcGhvbmUtbnVtYmVyXCI6XCJUaGUgZm9ybWF0IG9mIHRoZSBwaG9uZSBudW1iZXIgcHJvdmlkZWQgaXMgaW5jb3JyZWN0LiBQbGVhc2UgZW50ZXIgdGhlIHBob25lIG51bWJlciBpbiBhIGZvcm1hdCB0aGF0IGNhbiBiZSBwYXJzZWQgaW50byBFLjE2NCBmb3JtYXQuIEUuMTY0IHBob25lIG51bWJlcnMgYXJlIHdyaXR0ZW4gaW4gdGhlIGZvcm1hdCBbK11bY291bnRyeSBjb2RlXVtzdWJzY3JpYmVyIG51bWJlciBpbmNsdWRpbmcgYXJlYSBjb2RlXS5cIixcblwiaW52YWxpZC1yZWNpcGllbnQtZW1haWxcIjpcIlRoZSBlbWFpbCBjb3JyZXNwb25kaW5nIHRvIHRoaXMgYWN0aW9uIGZhaWxlZCB0byBzZW5kIGFzIHRoZSBwcm92aWRlZCByZWNpcGllbnQgZW1haWwgYWRkcmVzcyBpcyBpbnZhbGlkLlwiLFwiaW52YWxpZC1zZW5kZXJcIjpcIlRoZSBlbWFpbCB0ZW1wbGF0ZSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgYWN0aW9uIGNvbnRhaW5zIGFuIGludmFsaWQgc2VuZGVyIGVtYWlsIG9yIG5hbWUuIFBsZWFzZSBmaXggYnkgZ29pbmcgdG8gdGhlIEF1dGggZW1haWwgdGVtcGxhdGVzIHNlY3Rpb24gaW4gdGhlIEZpcmViYXNlIENvbnNvbGUuXCIsXCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1pZFwiOlwiVGhlIHZlcmlmaWNhdGlvbiBJRCB1c2VkIHRvIGNyZWF0ZSB0aGUgcGhvbmUgYXV0aCBjcmVkZW50aWFsIGlzIGludmFsaWQuXCIsXCJtaXNzaW5nLWFuZHJvaWQtcGtnLW5hbWVcIjpcIkFuIEFuZHJvaWQgUGFja2FnZSBOYW1lIG11c3QgYmUgcHJvdmlkZWQgaWYgdGhlIEFuZHJvaWQgQXBwIGlzIHJlcXVpcmVkIHRvIGJlIGluc3RhbGxlZC5cIixcblwiYXV0aC1kb21haW4tY29uZmlnLXJlcXVpcmVkXCI6XCJCZSBzdXJlIHRvIGluY2x1ZGUgYXV0aERvbWFpbiB3aGVuIGNhbGxpbmcgZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcCgpLCBieSBmb2xsb3dpbmcgdGhlIGluc3RydWN0aW9ucyBpbiB0aGUgRmlyZWJhc2UgY29uc29sZS5cIixcIm1pc3NpbmctYXBwLWNyZWRlbnRpYWxcIjpcIlRoZSBwaG9uZSB2ZXJpZmljYXRpb24gcmVxdWVzdCBpcyBtaXNzaW5nIGFuIGFwcGxpY2F0aW9uIHZlcmlmaWVyIGFzc2VydGlvbi4gQSByZUNBUFRDSEEgcmVzcG9uc2UgdG9rZW4gbmVlZHMgdG8gYmUgcHJvdmlkZWQuXCIsXCJtaXNzaW5nLXZlcmlmaWNhdGlvbi1jb2RlXCI6XCJUaGUgcGhvbmUgYXV0aCBjcmVkZW50aWFsIHdhcyBjcmVhdGVkIHdpdGggYW4gZW1wdHkgU01TIHZlcmlmaWNhdGlvbiBjb2RlLlwiLFwibWlzc2luZy1jb250aW51ZS11cmlcIjpcIkEgY29udGludWUgVVJMIG11c3QgYmUgcHJvdmlkZWQgaW4gdGhlIHJlcXVlc3QuXCIsXCJtaXNzaW5nLWlmcmFtZS1zdGFydFwiOlwiQW4gaW50ZXJuYWwgZXJyb3IgaGFzIG9jY3VycmVkLlwiLFxuXCJtaXNzaW5nLWlvcy1idW5kbGUtaWRcIjpcIkFuIGlPUyBCdW5kbGUgSUQgbXVzdCBiZSBwcm92aWRlZCBpZiBhbiBBcHAgU3RvcmUgSUQgaXMgcHJvdmlkZWQuXCIsXCJtaXNzaW5nLXBob25lLW51bWJlclwiOlwiVG8gc2VuZCB2ZXJpZmljYXRpb24gY29kZXMsIHByb3ZpZGUgYSBwaG9uZSBudW1iZXIgZm9yIHRoZSByZWNpcGllbnQuXCIsXCJtaXNzaW5nLXZlcmlmaWNhdGlvbi1pZFwiOlwiVGhlIHBob25lIGF1dGggY3JlZGVudGlhbCB3YXMgY3JlYXRlZCB3aXRoIGFuIGVtcHR5IHZlcmlmaWNhdGlvbiBJRC5cIixcImFwcC1kZWxldGVkXCI6XCJUaGlzIGluc3RhbmNlIG9mIEZpcmViYXNlQXBwIGhhcyBiZWVuIGRlbGV0ZWQuXCIsXCJhY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsXCI6XCJBbiBhY2NvdW50IGFscmVhZHkgZXhpc3RzIHdpdGggdGhlIHNhbWUgZW1haWwgYWRkcmVzcyBidXQgZGlmZmVyZW50IHNpZ24taW4gY3JlZGVudGlhbHMuIFNpZ24gaW4gdXNpbmcgYSBwcm92aWRlciBhc3NvY2lhdGVkIHdpdGggdGhpcyBlbWFpbCBhZGRyZXNzLlwiLFxuXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCI6XCJBIG5ldHdvcmsgZXJyb3IgKHN1Y2ggYXMgdGltZW91dCwgaW50ZXJydXB0ZWQgY29ubmVjdGlvbiBvciB1bnJlYWNoYWJsZSBob3N0KSBoYXMgb2NjdXJyZWQuXCIsXCJuby1hdXRoLWV2ZW50XCI6XCJBbiBpbnRlcm5hbCBlcnJvciBoYXMgb2NjdXJyZWQuXCIsXCJuby1zdWNoLXByb3ZpZGVyXCI6XCJVc2VyIHdhcyBub3QgbGlua2VkIHRvIGFuIGFjY291bnQgd2l0aCB0aGUgZ2l2ZW4gcHJvdmlkZXIuXCIsXCJvcGVyYXRpb24tbm90LWFsbG93ZWRcIjpcIlRoZSBnaXZlbiBzaWduLWluIHByb3ZpZGVyIGlzIGRpc2FibGVkIGZvciB0aGlzIEZpcmViYXNlIHByb2plY3QuIEVuYWJsZSBpdCBpbiB0aGUgRmlyZWJhc2UgY29uc29sZSwgdW5kZXIgdGhlIHNpZ24taW4gbWV0aG9kIHRhYiBvZiB0aGUgQXV0aCBzZWN0aW9uLlwiLFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiOidUaGlzIG9wZXJhdGlvbiBpcyBub3Qgc3VwcG9ydGVkIGluIHRoZSBlbnZpcm9ubWVudCB0aGlzIGFwcGxpY2F0aW9uIGlzIHJ1bm5pbmcgb24uIFwibG9jYXRpb24ucHJvdG9jb2xcIiBtdXN0IGJlIGh0dHAsIGh0dHBzIG9yIGNocm9tZS1leHRlbnNpb24gYW5kIHdlYiBzdG9yYWdlIG11c3QgYmUgZW5hYmxlZC4nLFxuXCJwb3B1cC1ibG9ja2VkXCI6XCJVbmFibGUgdG8gZXN0YWJsaXNoIGEgY29ubmVjdGlvbiB3aXRoIHRoZSBwb3B1cC4gSXQgbWF5IGhhdmUgYmVlbiBibG9ja2VkIGJ5IHRoZSBicm93c2VyLlwiLFwicG9wdXAtY2xvc2VkLWJ5LXVzZXJcIjpcIlRoZSBwb3B1cCBoYXMgYmVlbiBjbG9zZWQgYnkgdGhlIHVzZXIgYmVmb3JlIGZpbmFsaXppbmcgdGhlIG9wZXJhdGlvbi5cIixcInByb3ZpZGVyLWFscmVhZHktbGlua2VkXCI6XCJVc2VyIGNhbiBvbmx5IGJlIGxpbmtlZCB0byBvbmUgaWRlbnRpdHkgZm9yIHRoZSBnaXZlbiBwcm92aWRlci5cIixcInF1b3RhLWV4Y2VlZGVkXCI6XCJUaGUgcHJvamVjdCdzIHF1b3RhIGZvciB0aGlzIG9wZXJhdGlvbiBoYXMgYmVlbiBleGNlZWRlZC5cIixcInJlZGlyZWN0LWNhbmNlbGxlZC1ieS11c2VyXCI6XCJUaGUgcmVkaXJlY3Qgb3BlcmF0aW9uIGhhcyBiZWVuIGNhbmNlbGxlZCBieSB0aGUgdXNlciBiZWZvcmUgZmluYWxpemluZy5cIixcInJlZGlyZWN0LW9wZXJhdGlvbi1wZW5kaW5nXCI6XCJBIHJlZGlyZWN0IHNpZ24taW4gb3BlcmF0aW9uIGlzIGFscmVhZHkgcGVuZGluZy5cIixcbnRpbWVvdXQ6XCJUaGUgb3BlcmF0aW9uIGhhcyB0aW1lZCBvdXQuXCIsXCJ1c2VyLXRva2VuLWV4cGlyZWRcIjpcIlRoZSB1c2VyJ3MgY3JlZGVudGlhbCBpcyBubyBsb25nZXIgdmFsaWQuIFRoZSB1c2VyIG11c3Qgc2lnbiBpbiBhZ2Fpbi5cIixcInRvby1tYW55LXJlcXVlc3RzXCI6XCJXZSBoYXZlIGJsb2NrZWQgYWxsIHJlcXVlc3RzIGZyb20gdGhpcyBkZXZpY2UgZHVlIHRvIHVudXN1YWwgYWN0aXZpdHkuIFRyeSBhZ2FpbiBsYXRlci5cIixcInVuYXV0aG9yaXplZC1jb250aW51ZS11cmlcIjpcIlRoZSBkb21haW4gb2YgdGhlIGNvbnRpbnVlIFVSTCBpcyBub3Qgd2hpdGVsaXN0ZWQuICBQbGVhc2Ugd2hpdGVsaXN0IHRoZSBkb21haW4gaW4gdGhlIEZpcmViYXNlIGNvbnNvbGUuXCIsXCJ1bnN1cHBvcnRlZC1wZXJzaXN0ZW5jZS10eXBlXCI6XCJUaGUgY3VycmVudCBlbnZpcm9ubWVudCBkb2VzIG5vdCBzdXBwb3J0IHRoZSBzcGVjaWZpZWQgcGVyc2lzdGVuY2UgdHlwZS5cIixcInVzZXItY2FuY2VsbGVkXCI6XCJVc2VyIGRpZCBub3QgZ3JhbnQgeW91ciBhcHBsaWNhdGlvbiB0aGUgcGVybWlzc2lvbnMgaXQgcmVxdWVzdGVkLlwiLFxuXCJ1c2VyLW5vdC1mb3VuZFwiOlwiVGhlcmUgaXMgbm8gdXNlciByZWNvcmQgY29ycmVzcG9uZGluZyB0byB0aGlzIGlkZW50aWZpZXIuIFRoZSB1c2VyIG1heSBoYXZlIGJlZW4gZGVsZXRlZC5cIixcInVzZXItZGlzYWJsZWRcIjpcIlRoZSB1c2VyIGFjY291bnQgaGFzIGJlZW4gZGlzYWJsZWQgYnkgYW4gYWRtaW5pc3RyYXRvci5cIixcInVzZXItbWlzbWF0Y2hcIjpcIlRoZSBzdXBwbGllZCBjcmVkZW50aWFscyBkbyBub3QgY29ycmVzcG9uZCB0byB0aGUgcHJldmlvdXNseSBzaWduZWQgaW4gdXNlci5cIixcInVzZXItc2lnbmVkLW91dFwiOlwiXCIsXCJ3ZWFrLXBhc3N3b3JkXCI6XCJUaGUgcGFzc3dvcmQgbXVzdCBiZSA2IGNoYXJhY3RlcnMgbG9uZyBvciBtb3JlLlwiLFwid2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWRcIjpcIlRoaXMgYnJvd3NlciBpcyBub3Qgc3VwcG9ydGVkIG9yIDNyZCBwYXJ0eSBjb29raWVzIGFuZCBkYXRhIG1heSBiZSBkaXNhYmxlZC5cIn07ZnVuY3Rpb24gd2coYSl7dmFyIGI9YVt4Z107aWYoXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBiKXRocm93IG5ldyBOKFwibWlzc2luZy1jb250aW51ZS11cmlcIik7aWYoXCJzdHJpbmdcIiE9PXR5cGVvZiBifHxcInN0cmluZ1wiPT09dHlwZW9mIGImJiFiLmxlbmd0aCl0aHJvdyBuZXcgTihcImludmFsaWQtY29udGludWUtdXJpXCIpO3RoaXMuaD1iO3RoaXMuYz10aGlzLmE9bnVsbDt0aGlzLmc9ITE7dmFyIGM9YVt5Z107aWYoYyYmXCJvYmplY3RcIj09PXR5cGVvZiBjKXtiPWNbemddO3ZhciBkPWNbQWddO2M9Y1tCZ107aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBiJiZiLmxlbmd0aCl7dGhpcy5hPWI7aWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBkJiZcImJvb2xlYW5cIiE9PXR5cGVvZiBkKXRocm93IG5ldyBOKFwiYXJndW1lbnQtZXJyb3JcIixBZytcIiBwcm9wZXJ0eSBtdXN0IGJlIGEgYm9vbGVhbiB3aGVuIHNwZWNpZmllZC5cIik7dGhpcy5nPSEhZDtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGMmJihcInN0cmluZ1wiIT09XG50eXBlb2YgY3x8XCJzdHJpbmdcIj09PXR5cGVvZiBjJiYhYy5sZW5ndGgpKXRocm93IG5ldyBOKFwiYXJndW1lbnQtZXJyb3JcIixCZytcIiBwcm9wZXJ0eSBtdXN0IGJlIGEgbm9uIGVtcHR5IHN0cmluZyB3aGVuIHNwZWNpZmllZC5cIik7dGhpcy5jPWN8fG51bGx9ZWxzZXtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGIpdGhyb3cgbmV3IE4oXCJhcmd1bWVudC1lcnJvclwiLHpnK1wiIHByb3BlcnR5IG11c3QgYmUgYSBub24gZW1wdHkgc3RyaW5nIHdoZW4gc3BlY2lmaWVkLlwiKTtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGR8fFwidW5kZWZpbmVkXCIhPT10eXBlb2YgYyl0aHJvdyBuZXcgTihcIm1pc3NpbmctYW5kcm9pZC1wa2ctbmFtZVwiKTt9fWVsc2UgaWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBjKXRocm93IG5ldyBOKFwiYXJndW1lbnQtZXJyb3JcIix5ZytcIiBwcm9wZXJ0eSBtdXN0IGJlIGEgbm9uIG51bGwgb2JqZWN0IHdoZW4gc3BlY2lmaWVkLlwiKTt0aGlzLmI9bnVsbDtpZigoYj1hW0NnXSkmJlwib2JqZWN0XCI9PT1cbnR5cGVvZiBiKWlmKGI9YltEZ10sXCJzdHJpbmdcIj09PXR5cGVvZiBiJiZiLmxlbmd0aCl0aGlzLmI9YjtlbHNle2lmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgYil0aHJvdyBuZXcgTihcImFyZ3VtZW50LWVycm9yXCIsRGcrXCIgcHJvcGVydHkgbXVzdCBiZSBhIG5vbiBlbXB0eSBzdHJpbmcgd2hlbiBzcGVjaWZpZWQuXCIpO31lbHNlIGlmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgYil0aHJvdyBuZXcgTihcImFyZ3VtZW50LWVycm9yXCIsQ2crXCIgcHJvcGVydHkgbXVzdCBiZSBhIG5vbiBudWxsIG9iamVjdCB3aGVuIHNwZWNpZmllZC5cIik7YT1hW0VnXTtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGEmJlwiYm9vbGVhblwiIT09dHlwZW9mIGEpdGhyb3cgbmV3IE4oXCJhcmd1bWVudC1lcnJvclwiLEVnK1wiIHByb3BlcnR5IG11c3QgYmUgYSBib29sZWFuIHdoZW4gc3BlY2lmaWVkLlwiKTtpZigodGhpcy5mPSEhYSkmJiF0aGlzLmImJiF0aGlzLmEpdGhyb3cgbmV3IE4oXCJhcmd1bWVudC1lcnJvclwiLEVnK1wiIHByb3BlcnR5IGNhbid0IGJlIHRydWUgd2hlbiBubyBtb2JpbGUgYXBwbGljYXRpb24gaXMgcHJvdmlkZWQuXCIpO1xufXZhciB5Zz1cImFuZHJvaWRcIixFZz1cImhhbmRsZUNvZGVJbkFwcFwiLENnPVwiaU9TXCIseGc9XCJ1cmxcIixBZz1cImluc3RhbGxBcHBcIixCZz1cIm1pbmltdW1WZXJzaW9uXCIsemc9XCJwYWNrYWdlTmFtZVwiLERnPVwiYnVuZGxlSWRcIjtmdW5jdGlvbiBGZyhhKXt2YXIgYj17fTtiLmNvbnRpbnVlVXJsPWEuaDtiLmNhbkhhbmRsZUNvZGVJbkFwcD1hLmY7aWYoYi5hbmRyb2lkUGFja2FnZU5hbWU9YS5hKWIuYW5kcm9pZE1pbmltdW1WZXJzaW9uPWEuYyxiLmFuZHJvaWRJbnN0YWxsQXBwPWEuZztiLmlPU0J1bmRsZUlkPWEuYjtmb3IodmFyIGMgaW4gYiludWxsPT09YltjXSYmZGVsZXRlIGJbY107cmV0dXJuIGJ9O2Z1bmN0aW9uIEdnKGEpe3RoaXMuYj1hLnN1YjtuYSgpO3RoaXMuYT1hLnByb3ZpZGVyX2lkfHxhLmZpcmViYXNlJiZhLmZpcmViYXNlLnNpZ25faW5fcHJvdmlkZXJ8fG51bGx9ZnVuY3Rpb24gSGcoYSl7YT1hLnNwbGl0KFwiLlwiKTtpZigzIT1hLmxlbmd0aClyZXR1cm4gbnVsbDthPWFbMV07Zm9yKHZhciBiPSg0LWEubGVuZ3RoJTQpJTQsYz0wO2M8YjtjKyspYSs9XCIuXCI7dHJ5e3ZhciBkPUpTT04ucGFyc2UoS2QoYSkpO2lmKGQuc3ViJiZkLmlzcyYmZC5hdWQmJmQuZXhwKXJldHVybiBuZXcgR2coZCl9Y2F0Y2goZSl7fXJldHVybiBudWxsfTt2YXIgSWc9XCJvYXV0aF9jb25zdW1lcl9rZXkgb2F1dGhfbm9uY2Ugb2F1dGhfc2lnbmF0dXJlIG9hdXRoX3NpZ25hdHVyZV9tZXRob2Qgb2F1dGhfdGltZXN0YW1wIG9hdXRoX3Rva2VuIG9hdXRoX3ZlcnNpb25cIi5zcGxpdChcIiBcIiksSmc9W1wiY2xpZW50X2lkXCIsXCJyZXNwb25zZV90eXBlXCIsXCJzY29wZVwiLFwicmVkaXJlY3RfdXJpXCIsXCJzdGF0ZVwiXSxLZz17SGM6e01hOlwibG9jYWxlXCIsemE6NTAwLHlhOjYwMCxOYTpcImZhY2Vib29rLmNvbVwiLCRhOkpnfSxKYzp7TWE6bnVsbCx6YTo1MDAseWE6NjIwLE5hOlwiZ2l0aHViLmNvbVwiLCRhOkpnfSxLYzp7TWE6XCJobFwiLHphOjUxNSx5YTo2ODAsTmE6XCJnb29nbGUuY29tXCIsJGE6Smd9LFFjOntNYTpcImxhbmdcIix6YTo0ODUseWE6NzA1LE5hOlwidHdpdHRlci5jb21cIiwkYTpJZ319O2Z1bmN0aW9uIExnKGEpe2Zvcih2YXIgYiBpbiBLZylpZihLZ1tiXS5OYT09YSlyZXR1cm4gS2dbYl07cmV0dXJuIG51bGx9O2Z1bmN0aW9uIE1nKGEpe3ZhciBiPXt9O2JbXCJmYWNlYm9vay5jb21cIl09Tmc7YltcImdvb2dsZS5jb21cIl09T2c7YltcImdpdGh1Yi5jb21cIl09UGc7YltcInR3aXR0ZXIuY29tXCJdPVFnO3ZhciBjPWEmJmFbUmddO3RyeXtpZihjKXJldHVybiBiW2NdP25ldyBiW2NdKGEpOm5ldyBTZyhhKTtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGFbVGddKXJldHVybiBuZXcgVWcoYSl9Y2F0Y2goZCl7fXJldHVybiBudWxsfXZhciBUZz1cImlkVG9rZW5cIixSZz1cInByb3ZpZGVySWRcIjtcbmZ1bmN0aW9uIFVnKGEpe3ZhciBiPWFbUmddO2lmKCFiJiZhW1RnXSl7dmFyIGM9SGcoYVtUZ10pO2MmJmMuYSYmKGI9Yy5hKX1pZighYil0aHJvdyBFcnJvcihcIkludmFsaWQgYWRkaXRpb25hbCB1c2VyIGluZm8hXCIpO2lmKFwiYW5vbnltb3VzXCI9PWJ8fFwiY3VzdG9tXCI9PWIpYj1udWxsO2M9ITE7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBhLmlzTmV3VXNlcj9jPSEhYS5pc05ld1VzZXI6XCJpZGVudGl0eXRvb2xraXQjU2lnbnVwTmV3VXNlclJlc3BvbnNlXCI9PT1hLmtpbmQmJihjPSEwKTtNKHRoaXMsXCJwcm92aWRlcklkXCIsYik7TSh0aGlzLFwiaXNOZXdVc2VyXCIsYyl9ZnVuY3Rpb24gU2coYSl7VWcuY2FsbCh0aGlzLGEpO2E9V2YoYS5yYXdVc2VySW5mb3x8XCJ7fVwiKTtNKHRoaXMsXCJwcm9maWxlXCIsa2coYXx8e30pKX10KFNnLFVnKTtcbmZ1bmN0aW9uIE5nKGEpe1NnLmNhbGwodGhpcyxhKTtpZihcImZhY2Vib29rLmNvbVwiIT10aGlzLnByb3ZpZGVySWQpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIHByb3ZpZGVyIElEIVwiKTt9dChOZyxTZyk7ZnVuY3Rpb24gUGcoYSl7U2cuY2FsbCh0aGlzLGEpO2lmKFwiZ2l0aHViLmNvbVwiIT10aGlzLnByb3ZpZGVySWQpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIHByb3ZpZGVyIElEIVwiKTtNKHRoaXMsXCJ1c2VybmFtZVwiLHRoaXMucHJvZmlsZSYmdGhpcy5wcm9maWxlLmxvZ2lufHxudWxsKX10KFBnLFNnKTtmdW5jdGlvbiBPZyhhKXtTZy5jYWxsKHRoaXMsYSk7aWYoXCJnb29nbGUuY29tXCIhPXRoaXMucHJvdmlkZXJJZCl0aHJvdyBFcnJvcihcIkludmFsaWQgcHJvdmlkZXIgSUQhXCIpO310KE9nLFNnKTtcbmZ1bmN0aW9uIFFnKGEpe1NnLmNhbGwodGhpcyxhKTtpZihcInR3aXR0ZXIuY29tXCIhPXRoaXMucHJvdmlkZXJJZCl0aHJvdyBFcnJvcihcIkludmFsaWQgcHJvdmlkZXIgSUQhXCIpO00odGhpcyxcInVzZXJuYW1lXCIsYS5zY3JlZW5OYW1lfHxudWxsKX10KFFnLFNnKTtmdW5jdGlvbiBWZyhhLGIpe3JldHVybiBhLnRoZW4oZnVuY3Rpb24oYSl7aWYoYVtPXSl7dmFyIGM9SGcoYVtPXSk7aWYoIWN8fGIhPWMuYil0aHJvdyBuZXcgTihcInVzZXItbWlzbWF0Y2hcIik7cmV0dXJuIGF9dGhyb3cgbmV3IE4oXCJ1c2VyLW1pc21hdGNoXCIpO30pLnMoZnVuY3Rpb24oYSl7dGhyb3cgYSYmYS5jb2RlJiZhLmNvZGU9PXRnK1widXNlci1ub3QtZm91bmRcIj9uZXcgTihcInVzZXItbWlzbWF0Y2hcIik6YTt9KX1cbmZ1bmN0aW9uIFdnKGEsYil7aWYoYi5pZFRva2VufHxiLmFjY2Vzc1Rva2VuKWIuaWRUb2tlbiYmTSh0aGlzLFwiaWRUb2tlblwiLGIuaWRUb2tlbiksYi5hY2Nlc3NUb2tlbiYmTSh0aGlzLFwiYWNjZXNzVG9rZW5cIixiLmFjY2Vzc1Rva2VuKTtlbHNlIGlmKGIub2F1dGhUb2tlbiYmYi5vYXV0aFRva2VuU2VjcmV0KU0odGhpcyxcImFjY2Vzc1Rva2VuXCIsYi5vYXV0aFRva2VuKSxNKHRoaXMsXCJzZWNyZXRcIixiLm9hdXRoVG9rZW5TZWNyZXQpO2Vsc2UgdGhyb3cgbmV3IE4oXCJpbnRlcm5hbC1lcnJvclwiLFwiZmFpbGVkIHRvIGNvbnN0cnVjdCBhIGNyZWRlbnRpYWxcIik7TSh0aGlzLFwicHJvdmlkZXJJZFwiLGEpfVdnLnByb3RvdHlwZS53YT1mdW5jdGlvbihhKXtyZXR1cm4gWGcoYSxZZyh0aGlzKSl9O1dnLnByb3RvdHlwZS5iPWZ1bmN0aW9uKGEsYil7dmFyIGM9WWcodGhpcyk7Yy5pZFRva2VuPWI7cmV0dXJuIFpnKGEsYyl9O1xuV2cucHJvdG90eXBlLmM9ZnVuY3Rpb24oYSxiKXt2YXIgYz1ZZyh0aGlzKTtyZXR1cm4gVmcoJGcoYSxjKSxiKX07ZnVuY3Rpb24gWWcoYSl7dmFyIGI9e307YS5pZFRva2VuJiYoYi5pZF90b2tlbj1hLmlkVG9rZW4pO2EuYWNjZXNzVG9rZW4mJihiLmFjY2Vzc190b2tlbj1hLmFjY2Vzc1Rva2VuKTthLnNlY3JldCYmKGIub2F1dGhfdG9rZW5fc2VjcmV0PWEuc2VjcmV0KTtiLnByb3ZpZGVySWQ9YS5wcm92aWRlcklkO3JldHVybntwb3N0Qm9keTpJZShiKS50b1N0cmluZygpLHJlcXVlc3RVcmk6XCJodHRwOi8vbG9jYWxob3N0XCJ9fVxuV2cucHJvdG90eXBlLkI9ZnVuY3Rpb24oKXt2YXIgYT17cHJvdmlkZXJJZDp0aGlzLnByb3ZpZGVySWR9O3RoaXMuaWRUb2tlbiYmKGEub2F1dGhJZFRva2VuPXRoaXMuaWRUb2tlbik7dGhpcy5hY2Nlc3NUb2tlbiYmKGEub2F1dGhBY2Nlc3NUb2tlbj10aGlzLmFjY2Vzc1Rva2VuKTt0aGlzLnNlY3JldCYmKGEub2F1dGhUb2tlblNlY3JldD10aGlzLnNlY3JldCk7cmV0dXJuIGF9O2Z1bmN0aW9uIGFoKGEsYil7dGhpcy5yYz1ifHxbXTtnZyh0aGlzLHtwcm92aWRlcklkOmEsaXNPQXV0aFByb3ZpZGVyOiEwfSk7dGhpcy5yYj17fTt0aGlzLldhPShMZyhhKXx8e30pLk1hfHxudWxsO3RoaXMuVWE9bnVsbH1haC5wcm90b3R5cGUuQmE9ZnVuY3Rpb24oYSl7dGhpcy5yYj1VYShhKTtyZXR1cm4gdGhpc307ZnVuY3Rpb24gUChhKXthaC5jYWxsKHRoaXMsYSxKZyk7dGhpcy5hPVtdfXQoUCxhaCk7XG5QLnByb3RvdHlwZS5zYT1mdW5jdGlvbihhKXtIYSh0aGlzLmEsYSl8fHRoaXMuYS5wdXNoKGEpO3JldHVybiB0aGlzfTtQLnByb3RvdHlwZS53Yj1mdW5jdGlvbigpe3JldHVybiBMYSh0aGlzLmEpfTtQLnByb3RvdHlwZS5jcmVkZW50aWFsPWZ1bmN0aW9uKGEsYil7aWYoIWEmJiFiKXRocm93IG5ldyBOKFwiYXJndW1lbnQtZXJyb3JcIixcImNyZWRlbnRpYWwgZmFpbGVkOiBtdXN0IHByb3ZpZGUgdGhlIElEIHRva2VuIGFuZC9vciB0aGUgYWNjZXNzIHRva2VuLlwiKTtyZXR1cm4gbmV3IFdnKHRoaXMucHJvdmlkZXJJZCx7aWRUb2tlbjphfHxudWxsLGFjY2Vzc1Rva2VuOmJ8fG51bGx9KX07ZnVuY3Rpb24gYmgoKXtQLmNhbGwodGhpcyxcImZhY2Vib29rLmNvbVwiKX10KGJoLFApO00oYmgsXCJQUk9WSURFUl9JRFwiLFwiZmFjZWJvb2suY29tXCIpO1xuZnVuY3Rpb24gY2goYSl7aWYoIWEpdGhyb3cgbmV3IE4oXCJhcmd1bWVudC1lcnJvclwiLFwiY3JlZGVudGlhbCBmYWlsZWQ6IGV4cGVjdGVkIDEgYXJndW1lbnQgKHRoZSBPQXV0aCBhY2Nlc3MgdG9rZW4pLlwiKTt2YXIgYj1hO3EoYSkmJihiPWEuYWNjZXNzVG9rZW4pO3JldHVybihuZXcgYmgpLmNyZWRlbnRpYWwobnVsbCxiKX1mdW5jdGlvbiBkaCgpe1AuY2FsbCh0aGlzLFwiZ2l0aHViLmNvbVwiKX10KGRoLFApO00oZGgsXCJQUk9WSURFUl9JRFwiLFwiZ2l0aHViLmNvbVwiKTtmdW5jdGlvbiBlaChhKXtpZighYSl0aHJvdyBuZXcgTihcImFyZ3VtZW50LWVycm9yXCIsXCJjcmVkZW50aWFsIGZhaWxlZDogZXhwZWN0ZWQgMSBhcmd1bWVudCAodGhlIE9BdXRoIGFjY2VzcyB0b2tlbikuXCIpO3ZhciBiPWE7cShhKSYmKGI9YS5hY2Nlc3NUb2tlbik7cmV0dXJuKG5ldyBkaCkuY3JlZGVudGlhbChudWxsLGIpfVxuZnVuY3Rpb24gZmgoKXtQLmNhbGwodGhpcyxcImdvb2dsZS5jb21cIik7dGhpcy5zYShcInByb2ZpbGVcIil9dChmaCxQKTtNKGZoLFwiUFJPVklERVJfSURcIixcImdvb2dsZS5jb21cIik7ZnVuY3Rpb24gZ2goYSxiKXt2YXIgYz1hO3EoYSkmJihjPWEuaWRUb2tlbixiPWEuYWNjZXNzVG9rZW4pO3JldHVybihuZXcgZmgpLmNyZWRlbnRpYWwoYyxiKX1mdW5jdGlvbiBoaCgpe2FoLmNhbGwodGhpcyxcInR3aXR0ZXIuY29tXCIsSWcpfXQoaGgsYWgpO00oaGgsXCJQUk9WSURFUl9JRFwiLFwidHdpdHRlci5jb21cIik7XG5mdW5jdGlvbiBpaChhLGIpe3ZhciBjPWE7cShjKXx8KGM9e29hdXRoVG9rZW46YSxvYXV0aFRva2VuU2VjcmV0OmJ9KTtpZighYy5vYXV0aFRva2VufHwhYy5vYXV0aFRva2VuU2VjcmV0KXRocm93IG5ldyBOKFwiYXJndW1lbnQtZXJyb3JcIixcImNyZWRlbnRpYWwgZmFpbGVkOiBleHBlY3RlZCAyIGFyZ3VtZW50cyAodGhlIE9BdXRoIGFjY2VzcyB0b2tlbiBhbmQgc2VjcmV0KS5cIik7cmV0dXJuIG5ldyBXZyhcInR3aXR0ZXIuY29tXCIsYyl9ZnVuY3Rpb24gamgoYSxiKXt0aGlzLmE9YTt0aGlzLmY9YjtNKHRoaXMsXCJwcm92aWRlcklkXCIsXCJwYXNzd29yZFwiKX1qaC5wcm90b3R5cGUud2E9ZnVuY3Rpb24oYSl7cmV0dXJuIFEoYSxraCx7ZW1haWw6dGhpcy5hLHBhc3N3b3JkOnRoaXMuZn0pfTtqaC5wcm90b3R5cGUuYj1mdW5jdGlvbihhLGIpe3JldHVybiBRKGEsbGgse2lkVG9rZW46YixlbWFpbDp0aGlzLmEscGFzc3dvcmQ6dGhpcy5mfSl9O1xuamgucHJvdG90eXBlLmM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVmcodGhpcy53YShhKSxiKX07amgucHJvdG90eXBlLkI9ZnVuY3Rpb24oKXtyZXR1cm57ZW1haWw6dGhpcy5hLHBhc3N3b3JkOnRoaXMuZn19O2Z1bmN0aW9uIG1oKCl7Z2codGhpcyx7cHJvdmlkZXJJZDpcInBhc3N3b3JkXCIsaXNPQXV0aFByb3ZpZGVyOiExfSl9Z2cobWgse1BST1ZJREVSX0lEOlwicGFzc3dvcmRcIn0pO2Z1bmN0aW9uIG5oKGEpe2lmKCEoYS5QYSYmYS5PYXx8YS5EYSYmYS5ZKSl0aHJvdyBuZXcgTihcImludGVybmFsLWVycm9yXCIpO3RoaXMuYT1hO00odGhpcyxcInByb3ZpZGVySWRcIixcInBob25lXCIpfW5oLnByb3RvdHlwZS53YT1mdW5jdGlvbihhKXtyZXR1cm4gYS5RYShvaCh0aGlzKSl9O25oLnByb3RvdHlwZS5iPWZ1bmN0aW9uKGEsYil7dmFyIGM9b2godGhpcyk7Yy5pZFRva2VuPWI7cmV0dXJuIFEoYSxwaCxjKX07XG5uaC5wcm90b3R5cGUuYz1mdW5jdGlvbihhLGIpe3ZhciBjPW9oKHRoaXMpO2Mub3BlcmF0aW9uPVwiUkVBVVRIXCI7YT1RKGEscWgsYyk7cmV0dXJuIFZnKGEsYil9O25oLnByb3RvdHlwZS5CPWZ1bmN0aW9uKCl7dmFyIGE9e3Byb3ZpZGVySWQ6XCJwaG9uZVwifTt0aGlzLmEuUGEmJihhLnZlcmlmaWNhdGlvbklkPXRoaXMuYS5QYSk7dGhpcy5hLk9hJiYoYS52ZXJpZmljYXRpb25Db2RlPXRoaXMuYS5PYSk7dGhpcy5hLkRhJiYoYS50ZW1wb3JhcnlQcm9vZj10aGlzLmEuRGEpO3RoaXMuYS5ZJiYoYS5waG9uZU51bWJlcj10aGlzLmEuWSk7cmV0dXJuIGF9O2Z1bmN0aW9uIG9oKGEpe3JldHVybiBhLmEuRGEmJmEuYS5ZP3t0ZW1wb3JhcnlQcm9vZjphLmEuRGEscGhvbmVOdW1iZXI6YS5hLll9OntzZXNzaW9uSW5mbzphLmEuUGEsY29kZTphLmEuT2F9fVxuZnVuY3Rpb24gcmgoYSl7dHJ5e3RoaXMuYT1hfHxmaXJlYmFzZS5hdXRoKCl9Y2F0Y2goYil7dGhyb3cgbmV3IE4oXCJhcmd1bWVudC1lcnJvclwiLFwiRWl0aGVyIGFuIGluc3RhbmNlIG9mIGZpcmViYXNlLmF1dGguQXV0aCBtdXN0IGJlIHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byB0aGUgZmlyZWJhc2UuYXV0aC5QaG9uZUF1dGhQcm92aWRlciBjb25zdHJ1Y3Rvciwgb3IgdGhlIGRlZmF1bHQgZmlyZWJhc2UgQXBwIGluc3RhbmNlIG11c3QgYmUgaW5pdGlhbGl6ZWQgdmlhIGZpcmViYXNlLmluaXRpYWxpemVBcHAoKS5cIik7fWdnKHRoaXMse3Byb3ZpZGVySWQ6XCJwaG9uZVwiLGlzT0F1dGhQcm92aWRlcjohMX0pfVxucmgucHJvdG90eXBlLlFhPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hLmM7cmV0dXJuIEEoYi52ZXJpZnkoKSkudGhlbihmdW5jdGlvbihkKXtpZighbShkKSl0aHJvdyBuZXcgTihcImFyZ3VtZW50LWVycm9yXCIsXCJBbiBpbXBsZW1lbnRhdGlvbiBvZiBmaXJlYmFzZS5hdXRoLkFwcGxpY2F0aW9uVmVyaWZpZXIucHJvdG90eXBlLnZlcmlmeSgpIG11c3QgcmV0dXJuIGEgZmlyZWJhc2UuUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBzdHJpbmcuXCIpO3N3aXRjaChiLnR5cGUpe2Nhc2UgXCJyZWNhcHRjaGFcIjpyZXR1cm4gc2goYyx7cGhvbmVOdW1iZXI6YSxyZWNhcHRjaGFUb2tlbjpkfSkudGhlbihmdW5jdGlvbihhKXtcImZ1bmN0aW9uXCI9PT10eXBlb2YgYi5yZXNldCYmYi5yZXNldCgpO3JldHVybiBhfSxmdW5jdGlvbihhKXtcImZ1bmN0aW9uXCI9PT10eXBlb2YgYi5yZXNldCYmYi5yZXNldCgpO3Rocm93IGE7fSk7ZGVmYXVsdDp0aHJvdyBuZXcgTihcImFyZ3VtZW50LWVycm9yXCIsXG4nT25seSBmaXJlYmFzZS5hdXRoLkFwcGxpY2F0aW9uVmVyaWZpZXJzIHdpdGggdHlwZT1cInJlY2FwdGNoYVwiIGFyZSBjdXJyZW50bHkgc3VwcG9ydGVkLicpO319KX07ZnVuY3Rpb24gdGgoYSxiKXtpZighYSl0aHJvdyBuZXcgTihcIm1pc3NpbmctdmVyaWZpY2F0aW9uLWlkXCIpO2lmKCFiKXRocm93IG5ldyBOKFwibWlzc2luZy12ZXJpZmljYXRpb24tY29kZVwiKTtyZXR1cm4gbmV3IG5oKHtQYTphLE9hOmJ9KX1nZyhyaCx7UFJPVklERVJfSUQ6XCJwaG9uZVwifSk7XG5mdW5jdGlvbiB1aChhKXtpZihhLnRlbXBvcmFyeVByb29mJiZhLnBob25lTnVtYmVyKXJldHVybiBuZXcgbmgoe0RhOmEudGVtcG9yYXJ5UHJvb2YsWTphLnBob25lTnVtYmVyfSk7dmFyIGI9YSYmYS5wcm92aWRlcklkO2lmKCFifHxcInBhc3N3b3JkXCI9PT1iKXJldHVybiBudWxsO3ZhciBjPWEmJmEub2F1dGhBY2Nlc3NUb2tlbixkPWEmJmEub2F1dGhUb2tlblNlY3JldDthPWEmJmEub2F1dGhJZFRva2VuO3RyeXtzd2l0Y2goYil7Y2FzZSBcImdvb2dsZS5jb21cIjpyZXR1cm4gZ2goYSxjKTtjYXNlIFwiZmFjZWJvb2suY29tXCI6cmV0dXJuIGNoKGMpO2Nhc2UgXCJnaXRodWIuY29tXCI6cmV0dXJuIGVoKGMpO2Nhc2UgXCJ0d2l0dGVyLmNvbVwiOnJldHVybiBpaChjLGQpO2RlZmF1bHQ6cmV0dXJuKG5ldyBQKGIpKS5jcmVkZW50aWFsKGEsYyl9fWNhdGNoKGUpe3JldHVybiBudWxsfX1cbmZ1bmN0aW9uIHZoKGEpe2lmKCFhLmlzT0F1dGhQcm92aWRlcil0aHJvdyBuZXcgTihcImludmFsaWQtb2F1dGgtcHJvdmlkZXJcIik7fTtmdW5jdGlvbiB3aChhLGIsYyxkLGUpe3RoaXMuYj1hO3RoaXMuYz1ifHxudWxsO3RoaXMuZj1jfHxudWxsO3RoaXMuZz1kfHxudWxsO3RoaXMuYT1lfHxudWxsO2lmKHRoaXMuZnx8dGhpcy5hKXtpZih0aGlzLmYmJnRoaXMuYSl0aHJvdyBuZXcgTihcImludmFsaWQtYXV0aC1ldmVudFwiKTtpZih0aGlzLmYmJiF0aGlzLmcpdGhyb3cgbmV3IE4oXCJpbnZhbGlkLWF1dGgtZXZlbnRcIik7fWVsc2UgdGhyb3cgbmV3IE4oXCJpbnZhbGlkLWF1dGgtZXZlbnRcIik7fXdoLnByb3RvdHlwZS5CPWZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6dGhpcy5iLGV2ZW50SWQ6dGhpcy5jLHVybFJlc3BvbnNlOnRoaXMuZixzZXNzaW9uSWQ6dGhpcy5nLGVycm9yOnRoaXMuYSYmdGhpcy5hLkIoKX19O2Z1bmN0aW9uIHhoKGEpe2E9YXx8e307cmV0dXJuIGEudHlwZT9uZXcgd2goYS50eXBlLGEuZXZlbnRJZCxhLnVybFJlc3BvbnNlLGEuc2Vzc2lvbklkLGEuZXJyb3ImJnZnKGEuZXJyb3IpKTpudWxsfTtmdW5jdGlvbiB5aChhKXt2YXIgYj1cInVuYXV0aG9yaXplZC1kb21haW5cIixjPXZvaWQgMCxkPURlKGEpO2E9ZC5iO2Q9ZC5jO1wiY2hyb21lLWV4dGVuc2lvblwiPT1kP2M9b2EoXCJUaGlzIGNocm9tZSBleHRlbnNpb24gSUQgKGNocm9tZS1leHRlbnNpb246Ly8lcykgaXMgbm90IGF1dGhvcml6ZWQgdG8gcnVuIHRoaXMgb3BlcmF0aW9uLiBBZGQgaXQgdG8gdGhlIE9BdXRoIHJlZGlyZWN0IGRvbWFpbnMgbGlzdCBpbiB0aGUgRmlyZWJhc2UgY29uc29sZSAtPiBBdXRoIHNlY3Rpb24gLT4gU2lnbiBpbiBtZXRob2QgdGFiLlwiLGEpOlwiaHR0cFwiPT1kfHxcImh0dHBzXCI9PWQ/Yz1vYShcIlRoaXMgZG9tYWluICglcykgaXMgbm90IGF1dGhvcml6ZWQgdG8gcnVuIHRoaXMgb3BlcmF0aW9uLiBBZGQgaXQgdG8gdGhlIE9BdXRoIHJlZGlyZWN0IGRvbWFpbnMgbGlzdCBpbiB0aGUgRmlyZWJhc2UgY29uc29sZSAtPiBBdXRoIHNlY3Rpb24gLT4gU2lnbiBpbiBtZXRob2QgdGFiLlwiLGEpOmI9XCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCI7XG5OLmNhbGwodGhpcyxiLGMpfXQoeWgsTik7ZnVuY3Rpb24gemgoYSxiLGMpe04uY2FsbCh0aGlzLGEsYyk7YT1ifHx7fTthLnNiJiZNKHRoaXMsXCJlbWFpbFwiLGEuc2IpO2EuWSYmTSh0aGlzLFwicGhvbmVOdW1iZXJcIixhLlkpO2EuY3JlZGVudGlhbCYmTSh0aGlzLFwiY3JlZGVudGlhbFwiLGEuY3JlZGVudGlhbCl9dCh6aCxOKTt6aC5wcm90b3R5cGUuQj1mdW5jdGlvbigpe3ZhciBhPXtjb2RlOnRoaXMuY29kZSxtZXNzYWdlOnRoaXMubWVzc2FnZX07dGhpcy5lbWFpbCYmKGEuZW1haWw9dGhpcy5lbWFpbCk7dGhpcy5waG9uZU51bWJlciYmKGEucGhvbmVOdW1iZXI9dGhpcy5waG9uZU51bWJlcik7dmFyIGI9dGhpcy5jcmVkZW50aWFsJiZ0aGlzLmNyZWRlbnRpYWwuQigpO2ImJldhKGEsYik7cmV0dXJuIGF9O3poLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5CKCl9O1xuZnVuY3Rpb24gQWgoYSl7aWYoYS5jb2RlKXt2YXIgYj1hLmNvZGV8fFwiXCI7MD09Yi5pbmRleE9mKHRnKSYmKGI9Yi5zdWJzdHJpbmcodGcubGVuZ3RoKSk7dmFyIGM9e2NyZWRlbnRpYWw6dWgoYSl9O2lmKGEuZW1haWwpYy5zYj1hLmVtYWlsO2Vsc2UgaWYoYS5waG9uZU51bWJlciljLlk9YS5waG9uZU51bWJlcjtlbHNlIHJldHVybiBuZXcgTihiLGEubWVzc2FnZXx8dm9pZCAwKTtyZXR1cm4gbmV3IHpoKGIsYyxhLm1lc3NhZ2UpfXJldHVybiBudWxsfTtmdW5jdGlvbiBCaChhKXt0aGlzLmY9YX10KEJoLE5lKTtCaC5wcm90b3R5cGUuYT1mdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5mfTtCaC5wcm90b3R5cGUuYj1mdW5jdGlvbigpe3JldHVybnt9fTtcbmZ1bmN0aW9uIENoKGEsYixjKXt2YXIgZD1cIk5vZGVcIj09SygpO2Q9ay5YTUxIdHRwUmVxdWVzdHx8ZCYmZmlyZWJhc2UuSU5URVJOQUwubm9kZSYmZmlyZWJhc2UuSU5URVJOQUwubm9kZS5YTUxIdHRwUmVxdWVzdDtpZighZCl0aHJvdyBuZXcgTihcImludGVybmFsLWVycm9yXCIsXCJUaGUgWE1MSHR0cFJlcXVlc3QgY29tcGF0aWJpbGl0eSBsaWJyYXJ5IHdhcyBub3QgZm91bmQuXCIpO3RoaXMuYj1hO2E9Ynx8e307dGhpcy5pPWEuc2VjdXJlVG9rZW5FbmRwb2ludHx8XCJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZWFwaXMuY29tL3YxL3Rva2VuXCI7dGhpcy5sPWEuc2VjdXJlVG9rZW5UaW1lb3V0fHxEaDt0aGlzLmM9VWEoYS5zZWN1cmVUb2tlbkhlYWRlcnN8fEVoKTt0aGlzLmc9YS5maXJlYmFzZUVuZHBvaW50fHxcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2lkZW50aXR5dG9vbGtpdC92My9yZWx5aW5ncGFydHkvXCI7dGhpcy5oPWEuZmlyZWJhc2VUaW1lb3V0fHxGaDt0aGlzLmE9XG5VYShhLmZpcmViYXNlSGVhZGVyc3x8R2gpO2MmJih0aGlzLmFbXCJYLUNsaWVudC1WZXJzaW9uXCJdPWMsdGhpcy5jW1wiWC1DbGllbnQtVmVyc2lvblwiXT1jKTt0aGlzLmY9bmV3IHJmO3RoaXMubz1uZXcgQmgoZCl9dmFyIEhoLE89XCJpZFRva2VuXCIsRGg9bmV3ICRmKDNFNCw2RTQpLEVoPXtcIkNvbnRlbnQtVHlwZVwiOlwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJ9LEZoPW5ldyAkZigzRTQsNkU0KSxHaD17XCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb25cIn07ZnVuY3Rpb24gSWgoYSxiKXtiP2EuYVtcIlgtRmlyZWJhc2UtTG9jYWxlXCJdPWI6ZGVsZXRlIGEuYVtcIlgtRmlyZWJhc2UtTG9jYWxlXCJdfWZ1bmN0aW9uIEpoKGEsYil7Yj8oYS5hW1wiWC1DbGllbnQtVmVyc2lvblwiXT1iLGEuY1tcIlgtQ2xpZW50LVZlcnNpb25cIl09Yik6KGRlbGV0ZSBhLmFbXCJYLUNsaWVudC1WZXJzaW9uXCJdLGRlbGV0ZSBhLmNbXCJYLUNsaWVudC1WZXJzaW9uXCJdKX1cbmZ1bmN0aW9uIEtoKGEsYixjLGQsZSxmLGcpe1pmKCk/KHlmKCk/YT1yKGEubSxhKTooSGh8fChIaD1uZXcgeihmdW5jdGlvbihhLGIpe0xoKGEsYil9KSksYT1yKGEudSxhKSksYShiLGMsZCxlLGYsZykpOmMmJmMobnVsbCl9XG5DaC5wcm90b3R5cGUubT1mdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9XCJOb2RlXCI9PUsoKSxsPU1mKCk/Zz9uZXcgU2UodGhpcy5vKTpuZXcgU2U6bmV3IFNlKHRoaXMuZik7aWYoZil7bC5mPU1hdGgubWF4KDAsZik7dmFyIG49c2V0VGltZW91dChmdW5jdGlvbigpe0cobCxcInRpbWVvdXRcIil9LGYpfWZkKGwsXCJjb21wbGV0ZVwiLGZ1bmN0aW9uKCl7biYmY2xlYXJUaW1lb3V0KG4pO3ZhciBhPW51bGw7dHJ5e2E9SlNPTi5wYXJzZShoZih0aGlzKSl8fG51bGx9Y2F0Y2godmIpe2E9bnVsbH1iJiZiKGEpfSk7bGQobCxcInJlYWR5XCIsZnVuY3Rpb24oKXtuJiZjbGVhclRpbWVvdXQobik7TGModGhpcyl9KTtsZChsLFwidGltZW91dFwiLGZ1bmN0aW9uKCl7biYmY2xlYXJUaW1lb3V0KG4pO0xjKHRoaXMpO2ImJmIobnVsbCl9KTtZZShsLGEsYyxkLGUpfTtcbnZhciBNaD1kYyhcImh0dHBzOi8vYXBpcy5nb29nbGUuY29tL2pzL2NsaWVudC5qcz9vbmxvYWQ9JXtvbmxvYWR9XCIpLE5oPVwiX19mY2JcIitNYXRoLmZsb29yKDFFNipNYXRoLnJhbmRvbSgpKS50b1N0cmluZygpO2Z1bmN0aW9uIExoKGEsYil7aWYoKCh3aW5kb3cuZ2FwaXx8e30pLmNsaWVudHx8e30pLnJlcXVlc3QpYSgpO2Vsc2V7a1tOaF09ZnVuY3Rpb24oKXsoKHdpbmRvdy5nYXBpfHx7fSkuY2xpZW50fHx7fSkucmVxdWVzdD9hKCk6YihFcnJvcihcIkNPUlNfVU5TVVBQT1JURURcIikpfTt2YXIgYz1oYyhNaCx7b25sb2FkOk5ofSk7VGQoa2YoYyksZnVuY3Rpb24oKXtiKEVycm9yKFwiQ09SU19VTlNVUFBPUlRFRFwiKSl9KX19XG5DaC5wcm90b3R5cGUudT1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPXRoaXM7SGgudGhlbihmdW5jdGlvbigpe3dpbmRvdy5nYXBpLmNsaWVudC5zZXRBcGlLZXkoZi5iKTt2YXIgZz13aW5kb3cuZ2FwaS5hdXRoLmdldFRva2VuKCk7d2luZG93LmdhcGkuYXV0aC5zZXRUb2tlbihudWxsKTt3aW5kb3cuZ2FwaS5jbGllbnQucmVxdWVzdCh7cGF0aDphLG1ldGhvZDpjLGJvZHk6ZCxoZWFkZXJzOmUsYXV0aFR5cGU6XCJub25lXCIsY2FsbGJhY2s6ZnVuY3Rpb24oYSl7d2luZG93LmdhcGkuYXV0aC5zZXRUb2tlbihnKTtiJiZiKGEpfX0pfSkucyhmdW5jdGlvbihhKXtiJiZiKHtlcnJvcjp7bWVzc2FnZTphJiZhLm1lc3NhZ2V8fFwiQ09SU19VTlNVUFBPUlRFRFwifX0pfSl9O1xuZnVuY3Rpb24gT2goYSxiKXtyZXR1cm4gbmV3IHooZnVuY3Rpb24oYyxkKXtcInJlZnJlc2hfdG9rZW5cIj09Yi5ncmFudF90eXBlJiZiLnJlZnJlc2hfdG9rZW58fFwiYXV0aG9yaXphdGlvbl9jb2RlXCI9PWIuZ3JhbnRfdHlwZSYmYi5jb2RlP0toKGEsYS5pK1wiP2tleT1cIitlbmNvZGVVUklDb21wb25lbnQoYS5iKSxmdW5jdGlvbihhKXthP2EuZXJyb3I/ZChQaChhKSk6YS5hY2Nlc3NfdG9rZW4mJmEucmVmcmVzaF90b2tlbj9jKGEpOmQobmV3IE4oXCJpbnRlcm5hbC1lcnJvclwiKSk6ZChuZXcgTihcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIikpfSxcIlBPU1RcIixJZShiKS50b1N0cmluZygpLGEuYyxhLmwuZ2V0KCkpOmQobmV3IE4oXCJpbnRlcm5hbC1lcnJvclwiKSl9KX1cbmZ1bmN0aW9uIFFoKGEsYixjLGQsZSxmKXt2YXIgZz1EZShhLmcrYik7SShnLFwia2V5XCIsYS5iKTtmJiZJKGcsXCJjYlwiLG5hKCkudG9TdHJpbmcoKSk7dmFyIGw9XCJHRVRcIj09YztpZihsKWZvcih2YXIgbiBpbiBkKWQuaGFzT3duUHJvcGVydHkobikmJkkoZyxuLGRbbl0pO3JldHVybiBuZXcgeihmdW5jdGlvbihiLGYpe0toKGEsZy50b1N0cmluZygpLGZ1bmN0aW9uKGEpe2E/YS5lcnJvcj9mKFBoKGEsZXx8e30pKTpiKGEpOmYobmV3IE4oXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIpKX0sYyxsP3ZvaWQgMDpDYyhWZihkKSksYS5hLGEuaC5nZXQoKSl9KX1mdW5jdGlvbiBSaChhKXtpZighamYudGVzdChhLmVtYWlsKSl0aHJvdyBuZXcgTihcImludmFsaWQtZW1haWxcIik7fWZ1bmN0aW9uIFNoKGEpe1wiZW1haWxcImluIGEmJlJoKGEpfVxuZnVuY3Rpb24gVGgoYSxiKXtyZXR1cm4gUShhLFVoLHtpZGVudGlmaWVyOmIsY29udGludWVVcmk6U2YoKT92ZigpOlwiaHR0cDovL2xvY2FsaG9zdFwifSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gYS5hbGxQcm92aWRlcnN8fFtdfSl9ZnVuY3Rpb24gVmgoYSl7cmV0dXJuIFEoYSxXaCx7fSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gYS5hdXRob3JpemVkRG9tYWluc3x8W119KX1mdW5jdGlvbiBYaChhKXtpZighYVtPXSl0aHJvdyBuZXcgTihcImludGVybmFsLWVycm9yXCIpO31cbmZ1bmN0aW9uIFloKGEpe2lmKGEucGhvbmVOdW1iZXJ8fGEudGVtcG9yYXJ5UHJvb2Ype2lmKCFhLnBob25lTnVtYmVyfHwhYS50ZW1wb3JhcnlQcm9vZil0aHJvdyBuZXcgTihcImludGVybmFsLWVycm9yXCIpO31lbHNle2lmKCFhLnNlc3Npb25JbmZvKXRocm93IG5ldyBOKFwibWlzc2luZy12ZXJpZmljYXRpb24taWRcIik7aWYoIWEuY29kZSl0aHJvdyBuZXcgTihcIm1pc3NpbmctdmVyaWZpY2F0aW9uLWNvZGVcIik7fX1DaC5wcm90b3R5cGUuZ2I9ZnVuY3Rpb24oKXtyZXR1cm4gUSh0aGlzLFpoLHt9KX07Q2gucHJvdG90eXBlLmtiPWZ1bmN0aW9uKGEsYil7cmV0dXJuIFEodGhpcywkaCx7aWRUb2tlbjphLGVtYWlsOmJ9KX07Q2gucHJvdG90eXBlLmxiPWZ1bmN0aW9uKGEsYil7cmV0dXJuIFEodGhpcyxsaCx7aWRUb2tlbjphLHBhc3N3b3JkOmJ9KX07dmFyIGFpPXtkaXNwbGF5TmFtZTpcIkRJU1BMQVlfTkFNRVwiLHBob3RvVXJsOlwiUEhPVE9fVVJMXCJ9O2g9Q2gucHJvdG90eXBlO1xuaC5tYj1mdW5jdGlvbihhLGIpe3ZhciBjPXtpZFRva2VuOmF9LGQ9W107UGEoYWksZnVuY3Rpb24oYSxmKXt2YXIgZT1iW2ZdO251bGw9PT1lP2QucHVzaChhKTpmIGluIGImJihjW2ZdPWUpfSk7ZC5sZW5ndGgmJihjLmRlbGV0ZUF0dHJpYnV0ZT1kKTtyZXR1cm4gUSh0aGlzLCRoLGMpfTtoLmNiPWZ1bmN0aW9uKGEsYil7YT17cmVxdWVzdFR5cGU6XCJQQVNTV09SRF9SRVNFVFwiLGVtYWlsOmF9O1dhKGEsYik7cmV0dXJuIFEodGhpcyxiaSxhKX07aC5iYj1mdW5jdGlvbihhLGIpe2E9e3JlcXVlc3RUeXBlOlwiVkVSSUZZX0VNQUlMXCIsaWRUb2tlbjphfTtXYShhLGIpO3JldHVybiBRKHRoaXMsY2ksYSl9O2Z1bmN0aW9uIHNoKGEsYil7cmV0dXJuIFEoYSxkaSxiKX1oLlFhPWZ1bmN0aW9uKGEpe3JldHVybiBRKHRoaXMsZWksYSl9O2Z1bmN0aW9uIGZpKGEsYixjKXtyZXR1cm4gUShhLGdpLHtpZFRva2VuOmIsZGVsZXRlUHJvdmlkZXI6Y30pfVxuZnVuY3Rpb24gaGkoYSl7aWYoIWEucmVxdWVzdFVyaXx8IWEuc2Vzc2lvbklkJiYhYS5wb3N0Qm9keSl0aHJvdyBuZXcgTihcImludGVybmFsLWVycm9yXCIpO31mdW5jdGlvbiBpaShhKXt2YXIgYj1udWxsO2EubmVlZENvbmZpcm1hdGlvbj8oYS5jb2RlPVwiYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbFwiLGI9QWgoYSkpOlwiRkVERVJBVEVEX1VTRVJfSURfQUxSRUFEWV9MSU5LRURcIj09YS5lcnJvck1lc3NhZ2U/KGEuY29kZT1cImNyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2VcIixiPUFoKGEpKTpcIkVNQUlMX0VYSVNUU1wiPT1hLmVycm9yTWVzc2FnZT8oYS5jb2RlPVwiZW1haWwtYWxyZWFkeS1pbi11c2VcIixiPUFoKGEpKTphLmVycm9yTWVzc2FnZSYmKGI9amkoYS5lcnJvck1lc3NhZ2UpKTtpZihiKXRocm93IGI7aWYoIWFbT10pdGhyb3cgbmV3IE4oXCJpbnRlcm5hbC1lcnJvclwiKTt9XG5mdW5jdGlvbiBYZyhhLGIpe2IucmV0dXJuSWRwQ3JlZGVudGlhbD0hMDtyZXR1cm4gUShhLGtpLGIpfWZ1bmN0aW9uIFpnKGEsYil7Yi5yZXR1cm5JZHBDcmVkZW50aWFsPSEwO3JldHVybiBRKGEsbGksYil9ZnVuY3Rpb24gJGcoYSxiKXtiLnJldHVybklkcENyZWRlbnRpYWw9ITA7Yi5hdXRvQ3JlYXRlPSExO3JldHVybiBRKGEsbWksYil9ZnVuY3Rpb24gbmkoYSl7aWYoIWEub29iQ29kZSl0aHJvdyBuZXcgTihcImludmFsaWQtYWN0aW9uLWNvZGVcIik7fWguVGE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUSh0aGlzLG9pLHtvb2JDb2RlOmEsbmV3UGFzc3dvcmQ6Yn0pfTtoLklhPWZ1bmN0aW9uKGEpe3JldHVybiBRKHRoaXMscGkse29vYkNvZGU6YX0pfTtoLlNhPWZ1bmN0aW9uKGEpe3JldHVybiBRKHRoaXMscWkse29vYkNvZGU6YX0pfTtcbnZhciBxaT17ZW5kcG9pbnQ6XCJzZXRBY2NvdW50SW5mb1wiLEQ6bmksZ2E6XCJlbWFpbFwifSxwaT17ZW5kcG9pbnQ6XCJyZXNldFBhc3N3b3JkXCIsRDpuaSxPOmZ1bmN0aW9uKGEpe2lmKCFhLmVtYWlsfHwhYS5yZXF1ZXN0VHlwZSl0aHJvdyBuZXcgTihcImludGVybmFsLWVycm9yXCIpO319LHJpPXtlbmRwb2ludDpcInNpZ251cE5ld1VzZXJcIixEOmZ1bmN0aW9uKGEpe1JoKGEpO2lmKCFhLnBhc3N3b3JkKXRocm93IG5ldyBOKFwid2Vhay1wYXNzd29yZFwiKTt9LE86WGgsVDohMH0sVWg9e2VuZHBvaW50OlwiY3JlYXRlQXV0aFVyaVwifSxzaT17ZW5kcG9pbnQ6XCJkZWxldGVBY2NvdW50XCIsZWE6W1wiaWRUb2tlblwiXX0sZ2k9e2VuZHBvaW50Olwic2V0QWNjb3VudEluZm9cIixlYTpbXCJpZFRva2VuXCIsXCJkZWxldGVQcm92aWRlclwiXSxEOmZ1bmN0aW9uKGEpe2lmKCFmYShhLmRlbGV0ZVByb3ZpZGVyKSl0aHJvdyBuZXcgTihcImludGVybmFsLWVycm9yXCIpO319LHRpPXtlbmRwb2ludDpcImdldEFjY291bnRJbmZvXCJ9LFxuY2k9e2VuZHBvaW50OlwiZ2V0T29iQ29uZmlybWF0aW9uQ29kZVwiLGVhOltcImlkVG9rZW5cIixcInJlcXVlc3RUeXBlXCJdLEQ6ZnVuY3Rpb24oYSl7aWYoXCJWRVJJRllfRU1BSUxcIiE9YS5yZXF1ZXN0VHlwZSl0aHJvdyBuZXcgTihcImludGVybmFsLWVycm9yXCIpO30sZ2E6XCJlbWFpbFwifSxiaT17ZW5kcG9pbnQ6XCJnZXRPb2JDb25maXJtYXRpb25Db2RlXCIsZWE6W1wicmVxdWVzdFR5cGVcIl0sRDpmdW5jdGlvbihhKXtpZihcIlBBU1NXT1JEX1JFU0VUXCIhPWEucmVxdWVzdFR5cGUpdGhyb3cgbmV3IE4oXCJpbnRlcm5hbC1lcnJvclwiKTtSaChhKX0sZ2E6XCJlbWFpbFwifSxXaD17bmI6ITAsZW5kcG9pbnQ6XCJnZXRQcm9qZWN0Q29uZmlnXCIsemI6XCJHRVRcIn0sdWk9e25iOiEwLGVuZHBvaW50OlwiZ2V0UmVjYXB0Y2hhUGFyYW1cIix6YjpcIkdFVFwiLE86ZnVuY3Rpb24oYSl7aWYoIWEucmVjYXB0Y2hhU2l0ZUtleSl0aHJvdyBuZXcgTihcImludGVybmFsLWVycm9yXCIpO319LG9pPXtlbmRwb2ludDpcInJlc2V0UGFzc3dvcmRcIixcbkQ6bmksZ2E6XCJlbWFpbFwifSxkaT17ZW5kcG9pbnQ6XCJzZW5kVmVyaWZpY2F0aW9uQ29kZVwiLGVhOltcInBob25lTnVtYmVyXCIsXCJyZWNhcHRjaGFUb2tlblwiXSxnYTpcInNlc3Npb25JbmZvXCJ9LCRoPXtlbmRwb2ludDpcInNldEFjY291bnRJbmZvXCIsZWE6W1wiaWRUb2tlblwiXSxEOlNoLFQ6ITB9LGxoPXtlbmRwb2ludDpcInNldEFjY291bnRJbmZvXCIsZWE6W1wiaWRUb2tlblwiXSxEOmZ1bmN0aW9uKGEpe1NoKGEpO2lmKCFhLnBhc3N3b3JkKXRocm93IG5ldyBOKFwid2Vhay1wYXNzd29yZFwiKTt9LE86WGgsVDohMH0sWmg9e2VuZHBvaW50Olwic2lnbnVwTmV3VXNlclwiLE86WGgsVDohMH0sa2k9e2VuZHBvaW50OlwidmVyaWZ5QXNzZXJ0aW9uXCIsRDpoaSxPOmlpLFQ6ITB9LG1pPXtlbmRwb2ludDpcInZlcmlmeUFzc2VydGlvblwiLEQ6aGksTzpmdW5jdGlvbihhKXtpZihhLmVycm9yTWVzc2FnZSYmXCJVU0VSX05PVF9GT1VORFwiPT1hLmVycm9yTWVzc2FnZSl0aHJvdyBuZXcgTihcInVzZXItbm90LWZvdW5kXCIpO1xuaWYoYS5lcnJvck1lc3NhZ2UpdGhyb3cgamkoYS5lcnJvck1lc3NhZ2UpO2lmKCFhW09dKXRocm93IG5ldyBOKFwiaW50ZXJuYWwtZXJyb3JcIik7fSxUOiEwfSxsaT17ZW5kcG9pbnQ6XCJ2ZXJpZnlBc3NlcnRpb25cIixEOmZ1bmN0aW9uKGEpe2hpKGEpO2lmKCFhLmlkVG9rZW4pdGhyb3cgbmV3IE4oXCJpbnRlcm5hbC1lcnJvclwiKTt9LE86aWksVDohMH0sdmk9e2VuZHBvaW50OlwidmVyaWZ5Q3VzdG9tVG9rZW5cIixEOmZ1bmN0aW9uKGEpe2lmKCFhLnRva2VuKXRocm93IG5ldyBOKFwiaW52YWxpZC1jdXN0b20tdG9rZW5cIik7fSxPOlhoLFQ6ITB9LGtoPXtlbmRwb2ludDpcInZlcmlmeVBhc3N3b3JkXCIsRDpmdW5jdGlvbihhKXtSaChhKTtpZighYS5wYXNzd29yZCl0aHJvdyBuZXcgTihcIndyb25nLXBhc3N3b3JkXCIpO30sTzpYaCxUOiEwfSxlaT17ZW5kcG9pbnQ6XCJ2ZXJpZnlQaG9uZU51bWJlclwiLEQ6WWgsTzpYaH0scGg9e2VuZHBvaW50OlwidmVyaWZ5UGhvbmVOdW1iZXJcIixEOmZ1bmN0aW9uKGEpe2lmKCFhLmlkVG9rZW4pdGhyb3cgbmV3IE4oXCJpbnRlcm5hbC1lcnJvclwiKTtcblloKGEpfSxPOmZ1bmN0aW9uKGEpe2lmKGEudGVtcG9yYXJ5UHJvb2YpdGhyb3cgYS5jb2RlPVwiY3JlZGVudGlhbC1hbHJlYWR5LWluLXVzZVwiLEFoKGEpO1hoKGEpfX0scWg9e1BiOntVU0VSX05PVF9GT1VORDpcInVzZXItbm90LWZvdW5kXCJ9LGVuZHBvaW50OlwidmVyaWZ5UGhvbmVOdW1iZXJcIixEOlloLE86WGh9O1xuZnVuY3Rpb24gUShhLGIsYyl7aWYoIWpnKGMsYi5lYSkpcmV0dXJuIEIobmV3IE4oXCJpbnRlcm5hbC1lcnJvclwiKSk7dmFyIGQ9Yi56Ynx8XCJQT1NUXCIsZTtyZXR1cm4gQShjKS50aGVuKGIuRCkudGhlbihmdW5jdGlvbigpe2IuVCYmKGMucmV0dXJuU2VjdXJlVG9rZW49ITApO3JldHVybiBRaChhLGIuZW5kcG9pbnQsZCxjLGIuUGIsYi5uYnx8ITEpfSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gZT1hfSkudGhlbihiLk8pLnRoZW4oZnVuY3Rpb24oKXtpZighYi5nYSlyZXR1cm4gZTtpZighKGIuZ2EgaW4gZSkpdGhyb3cgbmV3IE4oXCJpbnRlcm5hbC1lcnJvclwiKTtyZXR1cm4gZVtiLmdhXX0pfWZ1bmN0aW9uIGppKGEpe3JldHVybiBQaCh7ZXJyb3I6e2Vycm9yczpbe21lc3NhZ2U6YX1dLGNvZGU6NDAwLG1lc3NhZ2U6YX19KX1cbmZ1bmN0aW9uIFBoKGEsYil7dmFyIGM9KGEuZXJyb3ImJmEuZXJyb3IuZXJyb3JzJiZhLmVycm9yLmVycm9yc1swXXx8e30pLnJlYXNvbnx8XCJcIjt2YXIgZD17a2V5SW52YWxpZDpcImludmFsaWQtYXBpLWtleVwiLGlwUmVmZXJlckJsb2NrZWQ6XCJhcHAtbm90LWF1dGhvcml6ZWRcIn07aWYoYz1kW2NdP25ldyBOKGRbY10pOm51bGwpcmV0dXJuIGM7Yz1hLmVycm9yJiZhLmVycm9yLm1lc3NhZ2V8fFwiXCI7ZD17SU5WQUxJRF9DVVNUT01fVE9LRU46XCJpbnZhbGlkLWN1c3RvbS10b2tlblwiLENSRURFTlRJQUxfTUlTTUFUQ0g6XCJjdXN0b20tdG9rZW4tbWlzbWF0Y2hcIixNSVNTSU5HX0NVU1RPTV9UT0tFTjpcImludGVybmFsLWVycm9yXCIsSU5WQUxJRF9JREVOVElGSUVSOlwiaW52YWxpZC1lbWFpbFwiLE1JU1NJTkdfQ09OVElOVUVfVVJJOlwiaW50ZXJuYWwtZXJyb3JcIixJTlZBTElEX0VNQUlMOlwiaW52YWxpZC1lbWFpbFwiLElOVkFMSURfUEFTU1dPUkQ6XCJ3cm9uZy1wYXNzd29yZFwiLFVTRVJfRElTQUJMRUQ6XCJ1c2VyLWRpc2FibGVkXCIsXG5NSVNTSU5HX1BBU1NXT1JEOlwiaW50ZXJuYWwtZXJyb3JcIixFTUFJTF9FWElTVFM6XCJlbWFpbC1hbHJlYWR5LWluLXVzZVwiLFBBU1NXT1JEX0xPR0lOX0RJU0FCTEVEOlwib3BlcmF0aW9uLW5vdC1hbGxvd2VkXCIsSU5WQUxJRF9JRFBfUkVTUE9OU0U6XCJpbnZhbGlkLWNyZWRlbnRpYWxcIixGRURFUkFURURfVVNFUl9JRF9BTFJFQURZX0xJTktFRDpcImNyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2VcIixJTlZBTElEX01FU1NBR0VfUEFZTE9BRDpcImludmFsaWQtbWVzc2FnZS1wYXlsb2FkXCIsSU5WQUxJRF9SRUNJUElFTlRfRU1BSUw6XCJpbnZhbGlkLXJlY2lwaWVudC1lbWFpbFwiLElOVkFMSURfU0VOREVSOlwiaW52YWxpZC1zZW5kZXJcIixFTUFJTF9OT1RfRk9VTkQ6XCJ1c2VyLW5vdC1mb3VuZFwiLEVYUElSRURfT09CX0NPREU6XCJleHBpcmVkLWFjdGlvbi1jb2RlXCIsSU5WQUxJRF9PT0JfQ09ERTpcImludmFsaWQtYWN0aW9uLWNvZGVcIixNSVNTSU5HX09PQl9DT0RFOlwiaW50ZXJuYWwtZXJyb3JcIixDUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU46XCJyZXF1aXJlcy1yZWNlbnQtbG9naW5cIixcbklOVkFMSURfSURfVE9LRU46XCJpbnZhbGlkLXVzZXItdG9rZW5cIixUT0tFTl9FWFBJUkVEOlwidXNlci10b2tlbi1leHBpcmVkXCIsVVNFUl9OT1RfRk9VTkQ6XCJ1c2VyLXRva2VuLWV4cGlyZWRcIixDT1JTX1VOU1VQUE9SVEVEOlwiY29ycy11bnN1cHBvcnRlZFwiLERZTkFNSUNfTElOS19OT1RfQUNUSVZBVEVEOlwiZHluYW1pYy1saW5rLW5vdC1hY3RpdmF0ZWRcIixJTlZBTElEX0FQUF9JRDpcImludmFsaWQtYXBwLWlkXCIsVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSOlwidG9vLW1hbnktcmVxdWVzdHNcIixXRUFLX1BBU1NXT1JEOlwid2Vhay1wYXNzd29yZFwiLE9QRVJBVElPTl9OT1RfQUxMT1dFRDpcIm9wZXJhdGlvbi1ub3QtYWxsb3dlZFwiLFVTRVJfQ0FOQ0VMTEVEOlwidXNlci1jYW5jZWxsZWRcIixDQVBUQ0hBX0NIRUNLX0ZBSUxFRDpcImNhcHRjaGEtY2hlY2stZmFpbGVkXCIsSU5WQUxJRF9BUFBfQ1JFREVOVElBTDpcImludmFsaWQtYXBwLWNyZWRlbnRpYWxcIixJTlZBTElEX0NPREU6XCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1jb2RlXCIsXG5JTlZBTElEX1BIT05FX05VTUJFUjpcImludmFsaWQtcGhvbmUtbnVtYmVyXCIsSU5WQUxJRF9TRVNTSU9OX0lORk86XCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1pZFwiLElOVkFMSURfVEVNUE9SQVJZX1BST09GOlwiaW52YWxpZC1jcmVkZW50aWFsXCIsTUlTU0lOR19BUFBfQ1JFREVOVElBTDpcIm1pc3NpbmctYXBwLWNyZWRlbnRpYWxcIixNSVNTSU5HX0NPREU6XCJtaXNzaW5nLXZlcmlmaWNhdGlvbi1jb2RlXCIsTUlTU0lOR19QSE9ORV9OVU1CRVI6XCJtaXNzaW5nLXBob25lLW51bWJlclwiLE1JU1NJTkdfU0VTU0lPTl9JTkZPOlwibWlzc2luZy12ZXJpZmljYXRpb24taWRcIixRVU9UQV9FWENFRURFRDpcInF1b3RhLWV4Y2VlZGVkXCIsU0VTU0lPTl9FWFBJUkVEOlwiY29kZS1leHBpcmVkXCIsSU5WQUxJRF9DT05USU5VRV9VUkk6XCJpbnZhbGlkLWNvbnRpbnVlLXVyaVwiLE1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUU6XCJtaXNzaW5nLWFuZHJvaWQtcGtnLW5hbWVcIixNSVNTSU5HX0lPU19CVU5ETEVfSUQ6XCJtaXNzaW5nLWlvcy1idW5kbGUtaWRcIixcblVOQVVUSE9SSVpFRF9ET01BSU46XCJ1bmF1dGhvcml6ZWQtY29udGludWUtdXJpXCIsSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQ6XCJpbnZhbGlkLW9hdXRoLWNsaWVudC1pZFwiLElOVkFMSURfQ0VSVF9IQVNIOlwiaW52YWxpZC1jZXJ0LWhhc2hcIn07V2EoZCxifHx7fSk7Yj0oYj1jLm1hdGNoKC9eW15cXHNdK1xccyo6XFxzKiguKikkLykpJiYxPGIubGVuZ3RoP2JbMV06dm9pZCAwO2Zvcih2YXIgZSBpbiBkKWlmKDA9PT1jLmluZGV4T2YoZSkpcmV0dXJuIG5ldyBOKGRbZV0sYik7IWImJmEmJihiPVVmKGEpKTtyZXR1cm4gbmV3IE4oXCJpbnRlcm5hbC1lcnJvclwiLGIpfTt2YXIgd2k9e01jOntWYTpcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2lkZW50aXR5dG9vbGtpdC92My9yZWx5aW5ncGFydHkvXCIsYWI6XCJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZWFwaXMuY29tL3YxL3Rva2VuXCIsaWQ6XCJwXCJ9LE9jOntWYTpcImh0dHBzOi8vc3RhZ2luZy13d3cuc2FuZGJveC5nb29nbGVhcGlzLmNvbS9pZGVudGl0eXRvb2xraXQvdjMvcmVseWluZ3BhcnR5L1wiLGFiOlwiaHR0cHM6Ly9zdGFnaW5nLXNlY3VyZXRva2VuLnNhbmRib3guZ29vZ2xlYXBpcy5jb20vdjEvdG9rZW5cIixpZDpcInNcIn0sUGM6e1ZhOlwiaHR0cHM6Ly93d3ctZ29vZ2xlYXBpcy10ZXN0LnNhbmRib3guZ29vZ2xlLmNvbS9pZGVudGl0eXRvb2xraXQvdjMvcmVseWluZ3BhcnR5L1wiLGFiOlwiaHR0cHM6Ly90ZXN0LXNlY3VyZXRva2VuLnNhbmRib3guZ29vZ2xlYXBpcy5jb20vdjEvdG9rZW5cIixpZDpcInRcIn19O1xuZnVuY3Rpb24geGkoYSl7Zm9yKHZhciBiIGluIHdpKWlmKHdpW2JdLmlkPT09YSlyZXR1cm4gYT13aVtiXSx7ZmlyZWJhc2VFbmRwb2ludDphLlZhLHNlY3VyZVRva2VuRW5kcG9pbnQ6YS5hYn07cmV0dXJuIG51bGx9dmFyIHlpO3lpPXhpKFwiX19FSURfX1wiKT9cIl9fRUlEX19cIjp2b2lkIDA7ZnVuY3Rpb24gemkoYSl7dGhpcy5iPWE7dGhpcy5hPW51bGw7dGhpcy5ZYT1BaSh0aGlzKX1cbmZ1bmN0aW9uIEFpKGEpe3JldHVybiBCaSgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHooZnVuY3Rpb24oYixjKXtMKFwiZ2FwaS5pZnJhbWVzLmdldENvbnRleHRcIikoKS5vcGVuKHt3aGVyZTpkb2N1bWVudC5ib2R5LHVybDphLmIsbWVzc2FnZUhhbmRsZXJzRmlsdGVyOkwoXCJnYXBpLmlmcmFtZXMuQ1JPU1NfT1JJR0lOX0lGUkFNRVNfRklMVEVSXCIpLGF0dHJpYnV0ZXM6e3N0eWxlOntwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOlwiLTEwMHB4XCIsd2lkdGg6XCIxcHhcIixoZWlnaHQ6XCIxcHhcIn19LGRvbnRjbGVhcjohMH0sZnVuY3Rpb24oZCl7ZnVuY3Rpb24gZSgpe2NsZWFyVGltZW91dChmKTtiKCl9YS5hPWQ7YS5hLnJlc3R5bGUoe3NldEhpZGVPbkxlYXZlOiExfSk7dmFyIGY9c2V0VGltZW91dChmdW5jdGlvbigpe2MoRXJyb3IoXCJOZXR3b3JrIEVycm9yXCIpKX0sQ2kuZ2V0KCkpO2QucGluZyhlKS50aGVuKGUsZnVuY3Rpb24oKXtjKEVycm9yKFwiTmV0d29yayBFcnJvclwiKSl9KX0pfSl9KX1cbmZ1bmN0aW9uIERpKGEsYil7cmV0dXJuIGEuWWEudGhlbihmdW5jdGlvbigpe3JldHVybiBuZXcgeihmdW5jdGlvbihjKXthLmEuc2VuZChiLnR5cGUsYixjLEwoXCJnYXBpLmlmcmFtZXMuQ1JPU1NfT1JJR0lOX0lGUkFNRVNfRklMVEVSXCIpKX0pfSl9ZnVuY3Rpb24gRWkoYSxiKXthLllhLnRoZW4oZnVuY3Rpb24oKXthLmEucmVnaXN0ZXIoXCJhdXRoRXZlbnRcIixiLEwoXCJnYXBpLmlmcmFtZXMuQ1JPU1NfT1JJR0lOX0lGUkFNRVNfRklMVEVSXCIpKX0pfXZhciBGaT1kYyhcImh0dHBzOi8vYXBpcy5nb29nbGUuY29tL2pzL2FwaS5qcz9vbmxvYWQ9JXtvbmxvYWR9XCIpLEdpPW5ldyAkZigzRTQsNkU0KSxDaT1uZXcgJGYoNUUzLDE1RTMpLEhpPW51bGw7XG5mdW5jdGlvbiBCaSgpe3JldHVybiBIaT9IaTpIaT0obmV3IHooZnVuY3Rpb24oYSxiKXtpZihaZigpKXt2YXIgYz1mdW5jdGlvbigpe1lmKCk7TChcImdhcGkubG9hZFwiKShcImdhcGkuaWZyYW1lc1wiLHtjYWxsYmFjazphLG9udGltZW91dDpmdW5jdGlvbigpe1lmKCk7YihFcnJvcihcIk5ldHdvcmsgRXJyb3JcIikpfSx0aW1lb3V0OkdpLmdldCgpfSl9O2lmKEwoXCJnYXBpLmlmcmFtZXMuSWZyYW1lXCIpKWEoKTtlbHNlIGlmKEwoXCJnYXBpLmxvYWRcIikpYygpO2Vsc2V7dmFyIGQ9XCJfX2lmcmFtZWZjYlwiK01hdGguZmxvb3IoMUU2Kk1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKCk7a1tkXT1mdW5jdGlvbigpe0woXCJnYXBpLmxvYWRcIik/YygpOmIoRXJyb3IoXCJOZXR3b3JrIEVycm9yXCIpKX07ZD1oYyhGaSx7b25sb2FkOmR9KTtBKGtmKGQpKS5zKGZ1bmN0aW9uKCl7YihFcnJvcihcIk5ldHdvcmsgRXJyb3JcIikpfSl9fWVsc2UgYihFcnJvcihcIk5ldHdvcmsgRXJyb3JcIikpfSkpLnMoZnVuY3Rpb24oYSl7SGk9XG5udWxsO3Rocm93IGE7fSl9O2Z1bmN0aW9uIElpKGEsYixjKXt0aGlzLmk9YTt0aGlzLmc9Yjt0aGlzLmg9Yzt0aGlzLmY9bnVsbDt0aGlzLmE9RWUodGhpcy5pLFwiL19fL2F1dGgvaWZyYW1lXCIpO0kodGhpcy5hLFwiYXBpS2V5XCIsdGhpcy5nKTtJKHRoaXMuYSxcImFwcE5hbWVcIix0aGlzLmgpO3RoaXMuYj1udWxsO3RoaXMuYz1bXX1JaS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt0aGlzLmY/SSh0aGlzLmEsXCJ2XCIsdGhpcy5mKTpMZSh0aGlzLmEuYSxcInZcIik7dGhpcy5iP0kodGhpcy5hLFwiZWlkXCIsdGhpcy5iKTpMZSh0aGlzLmEuYSxcImVpZFwiKTt0aGlzLmMubGVuZ3RoP0kodGhpcy5hLFwiZndcIix0aGlzLmMuam9pbihcIixcIikpOkxlKHRoaXMuYS5hLFwiZndcIik7cmV0dXJuIHRoaXMuYS50b1N0cmluZygpfTtmdW5jdGlvbiBKaShhLGIsYyxkLGUpe3RoaXMubT1hO3RoaXMudT1iO3RoaXMuYz1jO3RoaXMubD1kO3RoaXMuaT10aGlzLmc9dGhpcy5oPW51bGw7dGhpcy5hPWU7dGhpcy5mPW51bGx9XG5KaS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT1FZSh0aGlzLm0sXCIvX18vYXV0aC9oYW5kbGVyXCIpO0koYSxcImFwaUtleVwiLHRoaXMudSk7SShhLFwiYXBwTmFtZVwiLHRoaXMuYyk7SShhLFwiYXV0aFR5cGVcIix0aGlzLmwpO2lmKHRoaXMuYS5pc09BdXRoUHJvdmlkZXIpe3ZhciBiPXRoaXMuYTt0cnl7dmFyIGM9ZmlyZWJhc2UuYXBwKHRoaXMuYykuYXV0aCgpLiQoKX1jYXRjaChsKXtjPW51bGx9Yi5VYT1jO0koYSxcInByb3ZpZGVySWRcIix0aGlzLmEucHJvdmlkZXJJZCk7Yj10aGlzLmE7Yz1WZihiLnJiKTtmb3IodmFyIGQgaW4gYyljW2RdPWNbZF0udG9TdHJpbmcoKTtkPWIucmM7Yz1VYShjKTtmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXTtmIGluIGMmJmRlbGV0ZSBjW2ZdfWIuV2EmJmIuVWEmJiFjW2IuV2FdJiYoY1tiLldhXT1iLlVhKTtTYShjKXx8SShhLFwiY3VzdG9tUGFyYW1ldGVyc1wiLFVmKGMpKX1cImZ1bmN0aW9uXCI9PT10eXBlb2YgdGhpcy5hLndiJiZcbihiPXRoaXMuYS53YigpLGIubGVuZ3RoJiZJKGEsXCJzY29wZXNcIixiLmpvaW4oXCIsXCIpKSk7dGhpcy5oP0koYSxcInJlZGlyZWN0VXJsXCIsdGhpcy5oKTpMZShhLmEsXCJyZWRpcmVjdFVybFwiKTt0aGlzLmc/SShhLFwiZXZlbnRJZFwiLHRoaXMuZyk6TGUoYS5hLFwiZXZlbnRJZFwiKTt0aGlzLmk/SShhLFwidlwiLHRoaXMuaSk6TGUoYS5hLFwidlwiKTtpZih0aGlzLmIpZm9yKHZhciBnIGluIHRoaXMuYil0aGlzLmIuaGFzT3duUHJvcGVydHkoZykmJiFDZShhLGcpJiZJKGEsZyx0aGlzLmJbZ10pO3RoaXMuZj9JKGEsXCJlaWRcIix0aGlzLmYpOkxlKGEuYSxcImVpZFwiKTtnPUtpKHRoaXMuYyk7Zy5sZW5ndGgmJkkoYSxcImZ3XCIsZy5qb2luKFwiLFwiKSk7cmV0dXJuIGEudG9TdHJpbmcoKX07ZnVuY3Rpb24gS2koYSl7dHJ5e3JldHVybiBmaXJlYmFzZS5hcHAoYSkuYXV0aCgpLkthKCl9Y2F0Y2goYil7cmV0dXJuW119fVxuZnVuY3Rpb24gTGkoYSxiLGMsZCxlKXt0aGlzLnU9YTt0aGlzLmY9Yjt0aGlzLmI9Yzt0aGlzLmM9ZHx8bnVsbDt0aGlzLmg9ZXx8bnVsbDt0aGlzLm09dGhpcy5vPXRoaXMudj1udWxsO3RoaXMuZz1bXTt0aGlzLmw9dGhpcy5hPW51bGx9XG5mdW5jdGlvbiBNaShhKXt2YXIgYj12ZigpO3JldHVybiBWaChhKS50aGVuKGZ1bmN0aW9uKGEpe2E6e3ZhciBjPURlKGIpLGU9Yy5jO2M9Yy5iO2Zvcih2YXIgZj0wO2Y8YS5sZW5ndGg7ZisrKXt2YXIgZz1hW2ZdO3ZhciBsPWM7dmFyIG49ZTswPT1nLmluZGV4T2YoXCJjaHJvbWUtZXh0ZW5zaW9uOi8vXCIpP2w9RGUoZykuYj09bCYmXCJjaHJvbWUtZXh0ZW5zaW9uXCI9PW46XCJodHRwXCIhPW4mJlwiaHR0cHNcIiE9bj9sPSExOkdmLnRlc3QoZyk/bD1sPT1nOihnPWcuc3BsaXQoXCIuXCIpLmpvaW4oXCJcXFxcLlwiKSxsPShuZXcgUmVnRXhwKFwiXiguK1xcXFwuXCIrZytcInxcIitnK1wiKSRcIixcImlcIikpLnRlc3QobCkpO2lmKGwpe2E9ITA7YnJlYWsgYX19YT0hMX1pZighYSl0aHJvdyBuZXcgeWgodmYoKSk7fSl9XG5mdW5jdGlvbiBOaShhKXtpZihhLmwpcmV0dXJuIGEubDthLmw9SGYoKS50aGVuKGZ1bmN0aW9uKCl7aWYoIWEubyl7dmFyIGI9YS5jLGM9YS5oLGQ9S2koYS5iKSxlPW5ldyBJaShhLnUsYS5mLGEuYik7ZS5mPWI7ZS5iPWM7ZS5jPUxhKGR8fFtdKTthLm89ZS50b1N0cmluZygpfWEuaT1uZXcgemkoYS5vKTtPaShhKX0pO3JldHVybiBhLmx9aD1MaS5wcm90b3R5cGU7aC5DYT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9bmV3IE4oXCJwb3B1cC1jbG9zZWQtYnktdXNlclwiKSxlPW5ldyBOKFwid2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWRcIiksZj10aGlzLGc9ITE7cmV0dXJuIHRoaXMuYmEoKS50aGVuKGZ1bmN0aW9uKCl7UGkoZikudGhlbihmdW5jdGlvbihjKXtjfHwoYSYmQ2YoYSksYihlKSxnPSEwKX0pfSkucyhmdW5jdGlvbigpe30pLnRoZW4oZnVuY3Rpb24oKXtpZighZylyZXR1cm4gRmYoYSl9KS50aGVuKGZ1bmN0aW9uKCl7aWYoIWcpcmV0dXJuIHNkKGMpLnRoZW4oZnVuY3Rpb24oKXtiKGQpfSl9KX07XG5oLkRiPWZ1bmN0aW9uKCl7dmFyIGE9SigpO3JldHVybiFUZihhKSYmIVhmKGEpfTtoLnliPWZ1bmN0aW9uKCl7cmV0dXJuITF9O1xuaC52Yj1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXtpZighYSlyZXR1cm4gQihuZXcgTihcInBvcHVwLWJsb2NrZWRcIikpO2lmKGcmJiFUZigpKXJldHVybiB0aGlzLmJhKCkucyhmdW5jdGlvbihiKXtDZihhKTtlKGIpfSksZCgpLEEoKTt0aGlzLmF8fCh0aGlzLmE9TWkoUWkodGhpcykpKTt2YXIgbD10aGlzO3JldHVybiB0aGlzLmEudGhlbihmdW5jdGlvbigpe3ZhciBiPWwuYmEoKS5zKGZ1bmN0aW9uKGIpe0NmKGEpO2UoYik7dGhyb3cgYjt9KTtkKCk7cmV0dXJuIGJ9KS50aGVuKGZ1bmN0aW9uKCl7dmgoYyk7aWYoIWcpe3ZhciBkPVJpKGwudSxsLmYsbC5iLGIsYyxudWxsLGYsbC5jLHZvaWQgMCxsLmgpO3dmKGQsYSl9fSkucyhmdW5jdGlvbihhKXtcImF1dGgvbmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiPT1hLmNvZGUmJihsLmE9bnVsbCk7dGhyb3cgYTt9KX07XG5mdW5jdGlvbiBRaShhKXthLm18fChhLnY9YS5jP09mKGEuYyxLaShhLmIpKTpudWxsLGEubT1uZXcgQ2goYS5mLHhpKGEuaCksYS52KSk7cmV0dXJuIGEubX1oLkFhPWZ1bmN0aW9uKGEsYixjKXt0aGlzLmF8fCh0aGlzLmE9TWkoUWkodGhpcykpKTt2YXIgZD10aGlzO3JldHVybiB0aGlzLmEudGhlbihmdW5jdGlvbigpe3ZoKGIpO3ZhciBlPVJpKGQudSxkLmYsZC5iLGEsYix2ZigpLGMsZC5jLHZvaWQgMCxkLmgpO3dmKGUpfSkucyhmdW5jdGlvbihhKXtcImF1dGgvbmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiPT1hLmNvZGUmJihkLmE9bnVsbCk7dGhyb3cgYTt9KX07aC5iYT1mdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuIE5pKHRoaXMpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gYS5pLllhfSkucyhmdW5jdGlvbigpe2EuYT1udWxsO3Rocm93IG5ldyBOKFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiKTt9KX07aC5IYj1mdW5jdGlvbigpe3JldHVybiEwfTtcbmZ1bmN0aW9uIFJpKGEsYixjLGQsZSxmLGcsbCxuLEQpe2E9bmV3IEppKGEsYixjLGQsZSk7YS5oPWY7YS5nPWc7YS5pPWw7YS5iPVVhKG58fG51bGwpO2EuZj1EO3JldHVybiBhLnRvU3RyaW5nKCl9ZnVuY3Rpb24gT2koYSl7aWYoIWEuaSl0aHJvdyBFcnJvcihcIklmY0hhbmRsZXIgbXVzdCBiZSBpbml0aWFsaXplZCFcIik7RWkoYS5pLGZ1bmN0aW9uKGIpe3ZhciBjPXt9O2lmKGImJmIuYXV0aEV2ZW50KXt2YXIgZD0hMTtiPXhoKGIuYXV0aEV2ZW50KTtmb3IoYz0wO2M8YS5nLmxlbmd0aDtjKyspZD1hLmdbY10oYil8fGQ7Yz17fTtjLnN0YXR1cz1kP1wiQUNLXCI6XCJFUlJPUlwiO3JldHVybiBBKGMpfWMuc3RhdHVzPVwiRVJST1JcIjtyZXR1cm4gQShjKX0pfVxuZnVuY3Rpb24gUGkoYSl7dmFyIGI9e3R5cGU6XCJ3ZWJTdG9yYWdlU3VwcG9ydFwifTtyZXR1cm4gTmkoYSkudGhlbihmdW5jdGlvbigpe3JldHVybiBEaShhLmksYil9KS50aGVuKGZ1bmN0aW9uKGEpe2lmKGEmJmEubGVuZ3RoJiZcInVuZGVmaW5lZFwiIT09dHlwZW9mIGFbMF0ud2ViU3RvcmFnZVN1cHBvcnQpcmV0dXJuIGFbMF0ud2ViU3RvcmFnZVN1cHBvcnQ7dGhyb3cgRXJyb3IoKTt9KX1oLnVhPWZ1bmN0aW9uKGEpe3RoaXMuZy5wdXNoKGEpfTtoLkphPWZ1bmN0aW9uKGEpe0phKHRoaXMuZyxmdW5jdGlvbihiKXtyZXR1cm4gYj09YX0pfTtmdW5jdGlvbiBTaShhKXt0aGlzLmE9YXx8ZmlyZWJhc2UuSU5URVJOQUwucmVhY3ROYXRpdmUmJmZpcmViYXNlLklOVEVSTkFMLnJlYWN0TmF0aXZlLkFzeW5jU3RvcmFnZTtpZighdGhpcy5hKXRocm93IG5ldyBOKFwiaW50ZXJuYWwtZXJyb3JcIixcIlRoZSBSZWFjdCBOYXRpdmUgY29tcGF0aWJpbGl0eSBsaWJyYXJ5IHdhcyBub3QgZm91bmQuXCIpO31oPVNpLnByb3RvdHlwZTtoLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gQSh0aGlzLmEuZ2V0SXRlbShhKSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gYSYmV2YoYSl9KX07aC5zZXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gQSh0aGlzLmEuc2V0SXRlbShhLFVmKGIpKSl9O2guWD1mdW5jdGlvbihhKXtyZXR1cm4gQSh0aGlzLmEucmVtb3ZlSXRlbShhKSl9O2guaWE9ZnVuY3Rpb24oKXt9O2guZGE9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIFRpKCl7dGhpcy5hPXt9fWg9VGkucHJvdG90eXBlO2guZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiBBKHRoaXMuYVthXSl9O2guc2V0PWZ1bmN0aW9uKGEsYil7dGhpcy5hW2FdPWI7cmV0dXJuIEEoKX07aC5YPWZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLmFbYV07cmV0dXJuIEEoKX07aC5pYT1mdW5jdGlvbigpe307aC5kYT1mdW5jdGlvbigpe307ZnVuY3Rpb24gVWkoYSxiLGMsZCxlLGYpe3RyeXt2YXIgZz0hIWsuaW5kZXhlZERCfWNhdGNoKGwpe2c9ITF9aWYoIWcpdGhyb3cgbmV3IE4oXCJ3ZWItc3RvcmFnZS11bnN1cHBvcnRlZFwiKTt0aGlzLnU9YTt0aGlzLmg9Yjt0aGlzLmc9Yzt0aGlzLmw9ZDt0aGlzLm09ZTt0aGlzLmY9e307dGhpcy5jPVtdO3RoaXMuYT0wO3RoaXMubz1mfHxrLmluZGV4ZWREQn12YXIgVmk7ZnVuY3Rpb24gV2koYSl7cmV0dXJuIG5ldyB6KGZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5vLm9wZW4oYS51LGEubSk7ZC5vbmVycm9yPWZ1bmN0aW9uKGEpe2MoRXJyb3IoYS50YXJnZXQuZXJyb3JDb2RlKSl9O2Qub251cGdyYWRlbmVlZGVkPWZ1bmN0aW9uKGIpe2I9Yi50YXJnZXQucmVzdWx0O3RyeXtiLmNyZWF0ZU9iamVjdFN0b3JlKGEuaCx7a2V5UGF0aDphLmd9KX1jYXRjaChmKXtjKGYpfX07ZC5vbnN1Y2Nlc3M9ZnVuY3Rpb24oYSl7YihhLnRhcmdldC5yZXN1bHQpfX0pfVxuZnVuY3Rpb24gWGkoYSl7YS5pfHwoYS5pPVdpKGEpKTtyZXR1cm4gYS5pfWZ1bmN0aW9uIFlpKGEsYil7cmV0dXJuIGIub2JqZWN0U3RvcmUoYS5oKX1mdW5jdGlvbiBaaShhLGIsYyl7cmV0dXJuIGIudHJhbnNhY3Rpb24oW2EuaF0sYz9cInJlYWR3cml0ZVwiOlwicmVhZG9ubHlcIil9ZnVuY3Rpb24gJGkoYSl7cmV0dXJuIG5ldyB6KGZ1bmN0aW9uKGIsYyl7YS5vbnN1Y2Nlc3M9ZnVuY3Rpb24oYSl7YSYmYS50YXJnZXQ/YihhLnRhcmdldC5yZXN1bHQpOmIoKX07YS5vbmVycm9yPWZ1bmN0aW9uKGEpe2MoRXJyb3IoYS50YXJnZXQuZXJyb3JDb2RlKSl9fSl9aD1VaS5wcm90b3R5cGU7XG5oLnNldD1mdW5jdGlvbihhLGIpe3ZhciBjPSExLGQsZT10aGlzO3JldHVybiBRYihYaSh0aGlzKS50aGVuKGZ1bmN0aW9uKGIpe2Q9YjtiPVlpKGUsWmkoZSxkLCEwKSk7cmV0dXJuICRpKGIuZ2V0KGEpKX0pLnRoZW4oZnVuY3Rpb24oZil7dmFyIGc9WWkoZSxaaShlLGQsITApKTtpZihmKXJldHVybiBmLnZhbHVlPWIsJGkoZy5wdXQoZikpO2UuYSsrO2M9ITA7Zj17fTtmW2UuZ109YTtmW2UubF09YjtyZXR1cm4gJGkoZy5hZGQoZikpfSkudGhlbihmdW5jdGlvbigpe2UuZlthXT1ifSksZnVuY3Rpb24oKXtjJiZlLmEtLX0pfTtoLmdldD1mdW5jdGlvbihhKXt2YXIgYj10aGlzO3JldHVybiBYaSh0aGlzKS50aGVuKGZ1bmN0aW9uKGMpe3JldHVybiAkaShZaShiLFppKGIsYywhMSkpLmdldChhKSl9KS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBhJiZhLnZhbHVlfSl9O1xuaC5YPWZ1bmN0aW9uKGEpe3ZhciBiPSExLGM9dGhpcztyZXR1cm4gUWIoWGkodGhpcykudGhlbihmdW5jdGlvbihkKXtiPSEwO2MuYSsrO3JldHVybiAkaShZaShjLFppKGMsZCwhMCkpW1wiZGVsZXRlXCJdKGEpKX0pLnRoZW4oZnVuY3Rpb24oKXtkZWxldGUgYy5mW2FdfSksZnVuY3Rpb24oKXtiJiZjLmEtLX0pfTtcbmguemM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybiBYaSh0aGlzKS50aGVuKGZ1bmN0aW9uKGIpe3ZhciBjPVlpKGEsWmkoYSxiLCExKSk7cmV0dXJuIGMuZ2V0QWxsPyRpKGMuZ2V0QWxsKCkpOm5ldyB6KGZ1bmN0aW9uKGEsYil7dmFyIGQ9W10sZT1jLm9wZW5DdXJzb3IoKTtlLm9uc3VjY2Vzcz1mdW5jdGlvbihiKXsoYj1iLnRhcmdldC5yZXN1bHQpPyhkLnB1c2goYi52YWx1ZSksYltcImNvbnRpbnVlXCJdKCkpOmEoZCl9O2Uub25lcnJvcj1mdW5jdGlvbihhKXtiKEVycm9yKGEudGFyZ2V0LmVycm9yQ29kZSkpfX0pfSkudGhlbihmdW5jdGlvbihiKXt2YXIgYz17fSxkPVtdO2lmKDA9PWEuYSl7Zm9yKGQ9MDtkPGIubGVuZ3RoO2QrKyljW2JbZF1bYS5nXV09YltkXVthLmxdO2Q9eGYoYS5mLGMpO2EuZj1jfXJldHVybiBkfSl9O2guaWE9ZnVuY3Rpb24oYSl7MD09dGhpcy5jLmxlbmd0aCYmYWoodGhpcyk7dGhpcy5jLnB1c2goYSl9O1xuaC5kYT1mdW5jdGlvbihhKXtKYSh0aGlzLmMsZnVuY3Rpb24oYil7cmV0dXJuIGI9PWF9KTswPT10aGlzLmMubGVuZ3RoJiZ0aGlzLmImJnRoaXMuYi5jYW5jZWwoXCJTVE9QX0VWRU5UXCIpfTtmdW5jdGlvbiBhaihhKXtmdW5jdGlvbiBiKCl7YS5iPXNkKDgwMCkudGhlbihyKGEuemMsYSkpLnRoZW4oZnVuY3Rpb24oYil7MDxiLmxlbmd0aCYmdyhhLmMsZnVuY3Rpb24oYSl7YShiKX0pfSkudGhlbihiKS5zKGZ1bmN0aW9uKGEpe1wiU1RPUF9FVkVOVFwiIT1hLm1lc3NhZ2UmJmIoKX0pO3JldHVybiBhLmJ9YS5iJiZhLmIuY2FuY2VsKFwiU1RPUF9FVkVOVFwiKTtiKCl9O2Z1bmN0aW9uIGJqKCl7aWYoIWNqKCkpe2lmKFwiTm9kZVwiPT1LKCkpdGhyb3cgbmV3IE4oXCJpbnRlcm5hbC1lcnJvclwiLFwiVGhlIExvY2FsU3RvcmFnZSBjb21wYXRpYmlsaXR5IGxpYnJhcnkgd2FzIG5vdCBmb3VuZC5cIik7dGhyb3cgbmV3IE4oXCJ3ZWItc3RvcmFnZS11bnN1cHBvcnRlZFwiKTt9dGhpcy5hPWRqKCl8fGZpcmViYXNlLklOVEVSTkFMLm5vZGUubG9jYWxTdG9yYWdlfWZ1bmN0aW9uIGRqKCl7dHJ5e3ZhciBhPWsubG9jYWxTdG9yYWdlLGI9UWYoKTthJiYoYS5zZXRJdGVtKGIsXCIxXCIpLGEucmVtb3ZlSXRlbShiKSk7cmV0dXJuIGF9Y2F0Y2goYyl7cmV0dXJuIG51bGx9fVxuZnVuY3Rpb24gY2ooKXt2YXIgYT1cIk5vZGVcIj09SygpO2E9ZGooKXx8YSYmZmlyZWJhc2UuSU5URVJOQUwubm9kZSYmZmlyZWJhc2UuSU5URVJOQUwubm9kZS5sb2NhbFN0b3JhZ2U7aWYoIWEpcmV0dXJuITE7dHJ5e3JldHVybiBhLnNldEl0ZW0oXCJfX3Nha1wiLFwiMVwiKSxhLnJlbW92ZUl0ZW0oXCJfX3Nha1wiKSwhMH1jYXRjaChiKXtyZXR1cm4hMX19aD1iai5wcm90b3R5cGU7aC5nZXQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztyZXR1cm4gQSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgYz1iLmEuZ2V0SXRlbShhKTtyZXR1cm4gV2YoYyl9KX07aC5zZXQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzO3JldHVybiBBKCkudGhlbihmdW5jdGlvbigpe3ZhciBkPVVmKGIpO251bGw9PT1kP2MuWChhKTpjLmEuc2V0SXRlbShhLGQpfSl9O2guWD1mdW5jdGlvbihhKXt2YXIgYj10aGlzO3JldHVybiBBKCkudGhlbihmdW5jdGlvbigpe2IuYS5yZW1vdmVJdGVtKGEpfSl9O1xuaC5pYT1mdW5jdGlvbihhKXtrLndpbmRvdyYmY2Qoay53aW5kb3csXCJzdG9yYWdlXCIsYSl9O2guZGE9ZnVuY3Rpb24oYSl7ay53aW5kb3cmJkUoay53aW5kb3csXCJzdG9yYWdlXCIsYSl9O2Z1bmN0aW9uIGVqKCl7fWg9ZWoucHJvdG90eXBlO2guZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIEEobnVsbCl9O2guc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIEEoKX07aC5YPWZ1bmN0aW9uKCl7cmV0dXJuIEEoKX07aC5pYT1mdW5jdGlvbigpe307aC5kYT1mdW5jdGlvbigpe307ZnVuY3Rpb24gZmooKXtpZighZ2ooKSl7aWYoXCJOb2RlXCI9PUsoKSl0aHJvdyBuZXcgTihcImludGVybmFsLWVycm9yXCIsXCJUaGUgU2Vzc2lvblN0b3JhZ2UgY29tcGF0aWJpbGl0eSBsaWJyYXJ5IHdhcyBub3QgZm91bmQuXCIpO3Rocm93IG5ldyBOKFwid2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWRcIik7fXRoaXMuYT1oaigpfHxmaXJlYmFzZS5JTlRFUk5BTC5ub2RlLnNlc3Npb25TdG9yYWdlfWZ1bmN0aW9uIGhqKCl7dHJ5e3ZhciBhPWsuc2Vzc2lvblN0b3JhZ2UsYj1RZigpO2EmJihhLnNldEl0ZW0oYixcIjFcIiksYS5yZW1vdmVJdGVtKGIpKTtyZXR1cm4gYX1jYXRjaChjKXtyZXR1cm4gbnVsbH19XG5mdW5jdGlvbiBnaigpe3ZhciBhPVwiTm9kZVwiPT1LKCk7YT1oaigpfHxhJiZmaXJlYmFzZS5JTlRFUk5BTC5ub2RlJiZmaXJlYmFzZS5JTlRFUk5BTC5ub2RlLnNlc3Npb25TdG9yYWdlO2lmKCFhKXJldHVybiExO3RyeXtyZXR1cm4gYS5zZXRJdGVtKFwiX19zYWtcIixcIjFcIiksYS5yZW1vdmVJdGVtKFwiX19zYWtcIiksITB9Y2F0Y2goYil7cmV0dXJuITF9fWg9ZmoucHJvdG90eXBlO2guZ2V0PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7cmV0dXJuIEEoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIGM9Yi5hLmdldEl0ZW0oYSk7cmV0dXJuIFdmKGMpfSl9O2guc2V0PWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztyZXR1cm4gQSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgZD1VZihiKTtudWxsPT09ZD9jLlgoYSk6Yy5hLnNldEl0ZW0oYSxkKX0pfTtoLlg9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztyZXR1cm4gQSgpLnRoZW4oZnVuY3Rpb24oKXtiLmEucmVtb3ZlSXRlbShhKX0pfTtoLmlhPWZ1bmN0aW9uKCl7fTtcbmguZGE9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIGlqKCl7dmFyIGE9e307YS5Ccm93c2VyPWpqO2EuTm9kZT1rajthLlJlYWN0TmF0aXZlPWxqO3RoaXMuYT1hW0soKV19dmFyIG1qLGpqPXtDOmJqLGpiOmZqfSxraj17QzpiaixqYjpman0sbGo9e0M6U2ksamI6ZWp9O3ZhciBuaj17TGM6XCJsb2NhbFwiLE5PTkU6XCJub25lXCIsTmM6XCJzZXNzaW9uXCJ9O2Z1bmN0aW9uIG9qKGEpe3ZhciBiPW5ldyBOKFwiaW52YWxpZC1wZXJzaXN0ZW5jZS10eXBlXCIpLGM9bmV3IE4oXCJ1bnN1cHBvcnRlZC1wZXJzaXN0ZW5jZS10eXBlXCIpO2E6e2ZvcihkIGluIG5qKWlmKG5qW2RdPT1hKXt2YXIgZD0hMDticmVhayBhfWQ9ITF9aWYoIWR8fFwic3RyaW5nXCIhPT10eXBlb2YgYSl0aHJvdyBiO3N3aXRjaChLKCkpe2Nhc2UgXCJSZWFjdE5hdGl2ZVwiOmlmKFwic2Vzc2lvblwiPT09YSl0aHJvdyBjO2JyZWFrO2Nhc2UgXCJOb2RlXCI6aWYoXCJub25lXCIhPT1hKXRocm93IGM7YnJlYWs7ZGVmYXVsdDppZighUGYoKSYmXCJub25lXCIhPT1hKXRocm93IGM7fX1cbmZ1bmN0aW9uIHBqKGEsYixjLGQsZSl7dGhpcy5pPWE7dGhpcy5nPWI7dGhpcy5BPWM7dGhpcy51PWQ7dGhpcy52PWU7dGhpcy5hPXt9O21qfHwobWo9bmV3IGlqKTthPW1qO3RyeXtpZih1ZigpKXtWaXx8KFZpPW5ldyBVaShcImZpcmViYXNlTG9jYWxTdG9yYWdlRGJcIixcImZpcmViYXNlTG9jYWxTdG9yYWdlXCIsXCJmYmFzZV9rZXlcIixcInZhbHVlXCIsMSkpO3ZhciBmPVZpfWVsc2UgZj1uZXcgYS5hLkM7dGhpcy5sPWZ9Y2F0Y2goZyl7dGhpcy5sPW5ldyBUaSx0aGlzLnU9ITB9dHJ5e3RoaXMubz1uZXcgYS5hLmpifWNhdGNoKGcpe3RoaXMubz1uZXcgVGl9dGhpcy53PW5ldyBUaTt0aGlzLmg9cih0aGlzLm0sdGhpcyk7dGhpcy5iPXt9fXZhciBxajtmdW5jdGlvbiByaigpe3FqfHwocWo9bmV3IHBqKFwiZmlyZWJhc2VcIixcIjpcIiwhWGYoSigpKSYmTGYoKT8hMDohMSxUZigpLFBmKCkpKTtyZXR1cm4gcWp9XG5mdW5jdGlvbiBzaihhLGIpe3N3aXRjaChiKXtjYXNlIFwic2Vzc2lvblwiOnJldHVybiBhLm87Y2FzZSBcIm5vbmVcIjpyZXR1cm4gYS53O2RlZmF1bHQ6cmV0dXJuIGEubH19ZnVuY3Rpb24gdGooYSxiLGMpe3JldHVybiBhLmkrYS5nK2IubmFtZSsoYz9hLmcrYzpcIlwiKX1wai5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHNqKHRoaXMsYS5DKS5nZXQodGoodGhpcyxhLGIpKX07ZnVuY3Rpb24gdWooYSxiLGMpe2M9dGooYSxiLGMpO1wibG9jYWxcIj09Yi5DJiYoYS5iW2NdPW51bGwpO3JldHVybiBzaihhLGIuQykuWChjKX1wai5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aih0aGlzLGEsYyksZT10aGlzLGY9c2oodGhpcyxhLkMpO3JldHVybiBmLnNldChkLGIpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZi5nZXQoZCl9KS50aGVuKGZ1bmN0aW9uKGIpe1wibG9jYWxcIj09YS5DJiYoZS5iW2RdPWIpfSl9O1xuZnVuY3Rpb24gdmooYSxiLGMsZCl7Yj10aihhLGIsYyk7YS52JiYoYS5iW2JdPWsubG9jYWxTdG9yYWdlLmdldEl0ZW0oYikpO1NhKGEuYSkmJihzaihhLFwibG9jYWxcIikuaWEoYS5oKSxhLnV8fHVmKCl8fCFhLnZ8fHdqKGEpKTthLmFbYl18fChhLmFbYl09W10pO2EuYVtiXS5wdXNoKGQpfWZ1bmN0aW9uIHhqKGEsYixjKXtiPXRqKGEseWooXCJsb2NhbFwiKSxiKTthLmFbYl0mJihKYShhLmFbYl0sZnVuY3Rpb24oYSl7cmV0dXJuIGE9PWN9KSwwPT1hLmFbYl0ubGVuZ3RoJiZkZWxldGUgYS5hW2JdKTtTYShhLmEpJiZ6aihhKX1cbmZ1bmN0aW9uIHdqKGEpe0FqKGEpO2EuZj1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2Zvcih2YXIgYiBpbiBhLmEpe3ZhciBjPWsubG9jYWxTdG9yYWdlLmdldEl0ZW0oYiksZD1hLmJbYl07YyE9ZCYmKGEuYltiXT1jLGM9bmV3IFFjKHt0eXBlOlwic3RvcmFnZVwiLGtleTpiLHRhcmdldDp3aW5kb3csb2xkVmFsdWU6ZCxuZXdWYWx1ZTpjLGE6ITB9KSxhLm0oYykpfX0sMUUzKX1mdW5jdGlvbiBBaihhKXthLmYmJihjbGVhckludGVydmFsKGEuZiksYS5mPW51bGwpfWZ1bmN0aW9uIHpqKGEpe3NqKGEsXCJsb2NhbFwiKS5kYShhLmgpO0FqKGEpfVxucGoucHJvdG90eXBlLm09ZnVuY3Rpb24oYSl7aWYoYSYmYS5nKXt2YXIgYj1hLmEua2V5O2lmKG51bGw9PWIpZm9yKHZhciBjIGluIHRoaXMuYSl7dmFyIGQ9dGhpcy5iW2NdO1widW5kZWZpbmVkXCI9PT10eXBlb2YgZCYmKGQ9bnVsbCk7dmFyIGU9ay5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShjKTtlIT09ZCYmKHRoaXMuYltjXT1lLHRoaXMuYyhjKSl9ZWxzZSBpZigwPT1iLmluZGV4T2YodGhpcy5pK3RoaXMuZykmJnRoaXMuYVtiXSl7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBhLmEuYT9zaih0aGlzLFwibG9jYWxcIikuZGEodGhpcy5oKTpBaih0aGlzKTtpZih0aGlzLkEpaWYoYz1rLmxvY2FsU3RvcmFnZS5nZXRJdGVtKGIpLGQ9YS5hLm5ld1ZhbHVlLGQhPT1jKW51bGwhPT1kP2subG9jYWxTdG9yYWdlLnNldEl0ZW0oYixkKTprLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGIpO2Vsc2UgaWYodGhpcy5iW2JdPT09ZCYmXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBhLmEuYSlyZXR1cm47dmFyIGY9dGhpcztcbmM9ZnVuY3Rpb24oKXtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGEuYS5hfHxmLmJbYl0hPT1rLmxvY2FsU3RvcmFnZS5nZXRJdGVtKGIpKWYuYltiXT1rLmxvY2FsU3RvcmFnZS5nZXRJdGVtKGIpLGYuYyhiKX07eSYma2ImJjEwPT1rYiYmay5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShiKSE9PWEuYS5uZXdWYWx1ZSYmYS5hLm5ld1ZhbHVlIT09YS5hLm9sZFZhbHVlP3NldFRpbWVvdXQoYywxMCk6YygpfX1lbHNlIHcoYSxyKHRoaXMuYyx0aGlzKSl9O3BqLnByb3RvdHlwZS5jPWZ1bmN0aW9uKGEpe3RoaXMuYVthXSYmdyh0aGlzLmFbYV0sZnVuY3Rpb24oYSl7YSgpfSl9O2Z1bmN0aW9uIENqKGEpe3RoaXMuYT1hO3RoaXMuYj1yaigpfXZhciBEaj17bmFtZTpcImF1dGhFdmVudFwiLEM6XCJsb2NhbFwifTtmdW5jdGlvbiBFaihhKXtyZXR1cm4gYS5iLmdldChEaixhLmEpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIHhoKGEpfSl9O2Z1bmN0aW9uIEZqKCl7dGhpcy5hPXJqKCl9O2Z1bmN0aW9uIEdqKGEsYixjLGQsZSxmLGcpe3RoaXMudT1hO3RoaXMuaT1iO3RoaXMubD1jO3RoaXMubT1kfHxudWxsO3RoaXMubz1nfHxudWxsO3RoaXMuaD1iK1wiOlwiK2M7dGhpcy5BPW5ldyBGajt0aGlzLmc9bmV3IENqKHRoaXMuaCk7dGhpcy5mPW51bGw7dGhpcy5iPVtdO3RoaXMudj1lfHw1MDA7dGhpcy53PWZ8fDJFMzt0aGlzLmE9dGhpcy5jPW51bGx9ZnVuY3Rpb24gSGooYSl7cmV0dXJuIG5ldyBOKFwiaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb25cIixhKX1oPUdqLnByb3RvdHlwZTtcbmguYmE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54YT90aGlzLnhhOnRoaXMueGE9SWYoKS50aGVuKGZ1bmN0aW9uKCl7aWYoXCJmdW5jdGlvblwiIT09dHlwZW9mIEwoXCJ1bml2ZXJzYWxMaW5rcy5zdWJzY3JpYmVcIixrKSl0aHJvdyBIaihcImNvcmRvdmEtdW5pdmVyc2FsLWxpbmtzLXBsdWdpbiBpcyBub3QgaW5zdGFsbGVkXCIpO2lmKFwidW5kZWZpbmVkXCI9PT10eXBlb2YgTChcIkJ1aWxkSW5mby5wYWNrYWdlTmFtZVwiLGspKXRocm93IEhqKFwiY29yZG92YS1wbHVnaW4tYnVpbGRpbmZvIGlzIG5vdCBpbnN0YWxsZWRcIik7aWYoXCJmdW5jdGlvblwiIT09dHlwZW9mIEwoXCJjb3Jkb3ZhLnBsdWdpbnMuYnJvd3NlcnRhYi5vcGVuVXJsXCIsaykpdGhyb3cgSGooXCJjb3Jkb3ZhLXBsdWdpbi1icm93c2VydGFiIGlzIG5vdCBpbnN0YWxsZWRcIik7aWYoXCJmdW5jdGlvblwiIT09dHlwZW9mIEwoXCJjb3Jkb3ZhLkluQXBwQnJvd3Nlci5vcGVuXCIsaykpdGhyb3cgSGooXCJjb3Jkb3ZhLXBsdWdpbi1pbmFwcGJyb3dzZXIgaXMgbm90IGluc3RhbGxlZFwiKTtcbn0sZnVuY3Rpb24oKXt0aHJvdyBuZXcgTihcImNvcmRvdmEtbm90LXJlYWR5XCIpO30pfTtmdW5jdGlvbiBJaigpe2Zvcih2YXIgYT0yMCxiPVtdOzA8YTspYi5wdXNoKFwiMTIzNDU2Nzg5MGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpcIi5jaGFyQXQoTWF0aC5mbG9vcig2MipNYXRoLnJhbmRvbSgpKSkpLGEtLTtyZXR1cm4gYi5qb2luKFwiXCIpfWZ1bmN0aW9uIEpqKGEpe3ZhciBiPW5ldyBpZTtoZShiLGEpO2E9W107dmFyIGM9OCpiLmc7NTY+Yi5jP2hlKGIsZmUsNTYtYi5jKTpoZShiLGZlLGIuYi0oYi5jLTU2KSk7Zm9yKHZhciBkPTYzOzU2PD1kO2QtLSliLmZbZF09YyYyNTUsYy89MjU2O2dlKGIpO2ZvcihkPWM9MDtkPGIuaTtkKyspZm9yKHZhciBlPTI0OzA8PWU7ZS09OClhW2MrK109Yi5hW2RdPj5lJjI1NTtyZXR1cm4gSGQoYSl9XG5oLkNhPWZ1bmN0aW9uKGEsYil7YihuZXcgTihcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIikpO3JldHVybiBBKCl9O2gudmI9ZnVuY3Rpb24oKXtyZXR1cm4gQihuZXcgTihcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIikpfTtoLkhiPWZ1bmN0aW9uKCl7cmV0dXJuITF9O2guRGI9ZnVuY3Rpb24oKXtyZXR1cm4hMH07aC55Yj1mdW5jdGlvbigpe3JldHVybiEwfTtcbmguQWE9ZnVuY3Rpb24oYSxiLGMpe2lmKHRoaXMuYylyZXR1cm4gQihuZXcgTihcInJlZGlyZWN0LW9wZXJhdGlvbi1wZW5kaW5nXCIpKTt2YXIgZD10aGlzLGU9ay5kb2N1bWVudCxmPW51bGwsZz1udWxsLGw9bnVsbCxuPW51bGw7cmV0dXJuIHRoaXMuYz1RYihBKCkudGhlbihmdW5jdGlvbigpe3ZoKGIpO3JldHVybiBLaihkKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gTGooZCxhLGIsYyl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB6KGZ1bmN0aW9uKGEsYil7Zz1mdW5jdGlvbigpe3ZhciBiPUwoXCJjb3Jkb3ZhLnBsdWdpbnMuYnJvd3NlcnRhYi5jbG9zZVwiLGspO2EoKTtcImZ1bmN0aW9uXCI9PT10eXBlb2YgYiYmYigpO2QuYSYmXCJmdW5jdGlvblwiPT09dHlwZW9mIGQuYS5jbG9zZSYmKGQuYS5jbG9zZSgpLGQuYT1udWxsKTtyZXR1cm4hMX07ZC51YShnKTtsPWZ1bmN0aW9uKCl7Znx8KGY9c2QoZC53KS50aGVuKGZ1bmN0aW9uKCl7YihuZXcgTihcInJlZGlyZWN0LWNhbmNlbGxlZC1ieS11c2VyXCIpKX0pKX07XG5uPWZ1bmN0aW9uKCl7YWcoKSYmbCgpfTtlLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXN1bWVcIixsLCExKTtKKCkudG9Mb3dlckNhc2UoKS5tYXRjaCgvYW5kcm9pZC8pfHxlLmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsbiwhMSl9KSkucyhmdW5jdGlvbihhKXtyZXR1cm4gTWooZCkudGhlbihmdW5jdGlvbigpe3Rocm93IGE7fSl9KX0pLGZ1bmN0aW9uKCl7bCYmZS5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzdW1lXCIsbCwhMSk7biYmZS5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLG4sITEpO2YmJmYuY2FuY2VsKCk7ZyYmZC5KYShnKTtkLmM9bnVsbH0pfTtcbmZ1bmN0aW9uIExqKGEsYixjLGQpe3ZhciBlPUlqKCksZj1uZXcgd2goYixkLG51bGwsZSxuZXcgTihcIm5vLWF1dGgtZXZlbnRcIikpLGc9TChcIkJ1aWxkSW5mby5wYWNrYWdlTmFtZVwiLGspO2lmKFwic3RyaW5nXCIhPT10eXBlb2YgZyl0aHJvdyBuZXcgTihcImludmFsaWQtY29yZG92YS1jb25maWd1cmF0aW9uXCIpO3ZhciBsPUwoXCJCdWlsZEluZm8uZGlzcGxheU5hbWVcIixrKSxuPXt9O2lmKEooKS50b0xvd2VyQ2FzZSgpLm1hdGNoKC9pcGhvbmV8aXBhZHxpcG9kLykpbi5pYmk9ZztlbHNlIGlmKEooKS50b0xvd2VyQ2FzZSgpLm1hdGNoKC9hbmRyb2lkLykpbi5hcG49ZztlbHNlIHJldHVybiBCKG5ldyBOKFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiKSk7bCYmKG4uYXBwRGlzcGxheU5hbWU9bCk7ZT1KaihlKTtuLnNlc3Npb25JZD1lO3ZhciBEPVJpKGEudSxhLmksYS5sLGIsYyxudWxsLGQsYS5tLG4sYS5vKTtyZXR1cm4gYS5iYSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgYj1cbmEuaDtyZXR1cm4gYS5BLmEuc2V0KERqLGYuQigpLGIpfSkudGhlbihmdW5jdGlvbigpe3ZhciBiPUwoXCJjb3Jkb3ZhLnBsdWdpbnMuYnJvd3NlcnRhYi5pc0F2YWlsYWJsZVwiLGspO2lmKFwiZnVuY3Rpb25cIiE9PXR5cGVvZiBiKXRocm93IG5ldyBOKFwiaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb25cIik7dmFyIGM9bnVsbDtiKGZ1bmN0aW9uKGIpe2lmKGIpe2M9TChcImNvcmRvdmEucGx1Z2lucy5icm93c2VydGFiLm9wZW5VcmxcIixrKTtpZihcImZ1bmN0aW9uXCIhPT10eXBlb2YgYyl0aHJvdyBuZXcgTihcImludmFsaWQtY29yZG92YS1jb25maWd1cmF0aW9uXCIpO2MoRCl9ZWxzZXtjPUwoXCJjb3Jkb3ZhLkluQXBwQnJvd3Nlci5vcGVuXCIsayk7aWYoXCJmdW5jdGlvblwiIT09dHlwZW9mIGMpdGhyb3cgbmV3IE4oXCJpbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvblwiKTtiPUooKTtiPSEoIWIubWF0Y2goLyhpUGFkfGlQaG9uZXxpUG9kKS4qT1MgN19cXGQvaSkmJiFiLm1hdGNoKC8oaVBhZHxpUGhvbmV8aVBvZCkuKk9TIDhfXFxkL2kpKTtcbmEuYT1jKEQsYj9cIl9ibGFua1wiOlwiX3N5c3RlbVwiLFwibG9jYXRpb249eWVzXCIpfX0pfSl9ZnVuY3Rpb24gTmooYSxiKXtmb3IodmFyIGM9MDtjPGEuYi5sZW5ndGg7YysrKXRyeXthLmJbY10oYil9Y2F0Y2goZCl7fX1mdW5jdGlvbiBLaihhKXthLmZ8fChhLmY9YS5iYSgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHooZnVuY3Rpb24oYil7ZnVuY3Rpb24gYyhkKXtiKGQpO2EuSmEoYyk7cmV0dXJuITF9YS51YShjKTtPaihhKX0pfSkpO3JldHVybiBhLmZ9ZnVuY3Rpb24gTWooYSl7dmFyIGI9bnVsbDtyZXR1cm4gRWooYS5nKS50aGVuKGZ1bmN0aW9uKGMpe2I9YztjPWEuZztyZXR1cm4gdWooYy5iLERqLGMuYSl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGJ9KX1cbmZ1bmN0aW9uIE9qKGEpe2Z1bmN0aW9uIGIoYil7ZT0hMDtmJiZmLmNhbmNlbCgpO01qKGEpLnRoZW4oZnVuY3Rpb24oYyl7dmFyIGU9ZDtpZihjJiZiJiZiLnVybCl7ZT1udWxsO3ZhciBmPWIudXJsO3ZhciBnPURlKGYpLGw9Q2UoZyxcImxpbmtcIiksbj1DZShEZShsKSxcImxpbmtcIik7Zz1DZShnLFwiZGVlcF9saW5rX2lkXCIpO2Y9Q2UoRGUoZyksXCJsaW5rXCIpfHxnfHxufHxsfHxmOy0xIT1mLmluZGV4T2YoXCIvX18vYXV0aC9jYWxsYmFja1wiKSYmKGU9RGUoZiksZT1XZihDZShlLFwiZmlyZWJhc2VFcnJvclwiKXx8bnVsbCksZT0oZT1cIm9iamVjdFwiPT09dHlwZW9mIGU/dmcoZSk6bnVsbCk/bmV3IHdoKGMuYixjLmMsbnVsbCxudWxsLGUpOm5ldyB3aChjLmIsYy5jLGYsYy5nKSk7ZT1lfHxkfU5qKGEsZSl9KX12YXIgYz1MKFwidW5pdmVyc2FsTGlua3Muc3Vic2NyaWJlXCIsayk7aWYoXCJmdW5jdGlvblwiIT09dHlwZW9mIGMpdGhyb3cgbmV3IE4oXCJpbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvblwiKTtcbnZhciBkPW5ldyB3aChcInVua25vd25cIixudWxsLG51bGwsbnVsbCxuZXcgTihcIm5vLWF1dGgtZXZlbnRcIikpLGU9ITEsZj1zZChhLnYpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gTWooYSkudGhlbihmdW5jdGlvbigpe2V8fE5qKGEsZCl9KX0pLGc9ay5oYW5kbGVPcGVuVVJMO2suaGFuZGxlT3BlblVSTD1mdW5jdGlvbihhKXswPT1hLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihMKFwiQnVpbGRJbmZvLnBhY2thZ2VOYW1lXCIsaykudG9Mb3dlckNhc2UoKStcIjovL1wiKSYmYih7dXJsOmF9KTtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgZyl0cnl7ZyhhKX1jYXRjaChuKXtjb25zb2xlLmVycm9yKG4pfX07YyhudWxsLGIpfVxuaC51YT1mdW5jdGlvbihhKXt0aGlzLmIucHVzaChhKTtLaih0aGlzKS5zKGZ1bmN0aW9uKGIpe1wiYXV0aC9pbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvblwiPT09Yi5jb2RlJiYoYj1uZXcgd2goXCJ1bmtub3duXCIsbnVsbCxudWxsLG51bGwsbmV3IE4oXCJuby1hdXRoLWV2ZW50XCIpKSxhKGIpKX0pfTtoLkphPWZ1bmN0aW9uKGEpe0phKHRoaXMuYixmdW5jdGlvbihiKXtyZXR1cm4gYj09YX0pfTtmdW5jdGlvbiBQaihhKXt0aGlzLmE9YTt0aGlzLmI9cmooKX12YXIgUWo9e25hbWU6XCJwZW5kaW5nUmVkaXJlY3RcIixDOlwic2Vzc2lvblwifTtmdW5jdGlvbiBSaihhKXtyZXR1cm4gYS5iLnNldChRaixcInBlbmRpbmdcIixhLmEpfWZ1bmN0aW9uIFNqKGEpe3JldHVybiB1aihhLmIsUWosYS5hKX1mdW5jdGlvbiBUaihhKXtyZXR1cm4gYS5iLmdldChRaixhLmEpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuXCJwZW5kaW5nXCI9PWF9KX07ZnVuY3Rpb24gVWooYSxiLGMpe3RoaXMudj1hO3RoaXMubD1iO3RoaXMudT1jO3RoaXMuaD1bXTt0aGlzLmY9ITE7dGhpcy5pPXIodGhpcy5tLHRoaXMpO3RoaXMuYz1uZXcgVmo7dGhpcy5vPW5ldyBXajt0aGlzLmc9bmV3IFBqKHRoaXMubCtcIjpcIit0aGlzLnUpO3RoaXMuYj17fTt0aGlzLmIudW5rbm93bj10aGlzLmM7dGhpcy5iLnNpZ25JblZpYVJlZGlyZWN0PXRoaXMuYzt0aGlzLmIubGlua1ZpYVJlZGlyZWN0PXRoaXMuYzt0aGlzLmIucmVhdXRoVmlhUmVkaXJlY3Q9dGhpcy5jO3RoaXMuYi5zaWduSW5WaWFQb3B1cD10aGlzLm87dGhpcy5iLmxpbmtWaWFQb3B1cD10aGlzLm87dGhpcy5iLnJlYXV0aFZpYVBvcHVwPXRoaXMubzt0aGlzLmE9WGoodGhpcy52LHRoaXMubCx0aGlzLnUseWkpfVxuZnVuY3Rpb24gWGooYSxiLGMsZCl7dmFyIGU9ZmlyZWJhc2UuU0RLX1ZFUlNJT058fG51bGw7cmV0dXJuIEpmKCk/bmV3IEdqKGEsYixjLGUsdm9pZCAwLHZvaWQgMCxkKTpuZXcgTGkoYSxiLGMsZSxkKX1Vai5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmY9ITE7dGhpcy5hLkphKHRoaXMuaSk7dGhpcy5hPVhqKHRoaXMudix0aGlzLmwsdGhpcy51KX07ZnVuY3Rpb24gWWooYSl7YS5mfHwoYS5mPSEwLGEuYS51YShhLmkpKTt2YXIgYj1hLmE7cmV0dXJuIGEuYS5iYSgpLnMoZnVuY3Rpb24oYyl7YS5hPT1iJiZhLnJlc2V0KCk7dGhyb3cgYzt9KX1mdW5jdGlvbiBaaihhKXthLmEuRGIoKSYmWWooYSkucyhmdW5jdGlvbihiKXt2YXIgYz1uZXcgd2goXCJ1bmtub3duXCIsbnVsbCxudWxsLG51bGwsbmV3IE4oXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIpKTthayhiKSYmYS5tKGMpfSk7YS5hLnliKCl8fGJrKGEuYyl9XG5Vai5wcm90b3R5cGUuc3Vic2NyaWJlPWZ1bmN0aW9uKGEpe0hhKHRoaXMuaCxhKXx8dGhpcy5oLnB1c2goYSk7aWYoIXRoaXMuZil7dmFyIGI9dGhpcztUaih0aGlzLmcpLnRoZW4oZnVuY3Rpb24oYSl7YT9TaihiLmcpLnRoZW4oZnVuY3Rpb24oKXtZaihiKS5zKGZ1bmN0aW9uKGEpe3ZhciBjPW5ldyB3aChcInVua25vd25cIixudWxsLG51bGwsbnVsbCxuZXcgTihcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIikpO2FrKGEpJiZiLm0oYyl9KX0pOlpqKGIpfSkucyhmdW5jdGlvbigpe1pqKGIpfSl9fTtVai5wcm90b3R5cGUudW5zdWJzY3JpYmU9ZnVuY3Rpb24oYSl7SmEodGhpcy5oLGZ1bmN0aW9uKGIpe3JldHVybiBiPT1hfSl9O1xuVWoucHJvdG90eXBlLm09ZnVuY3Rpb24oYSl7aWYoIWEpdGhyb3cgbmV3IE4oXCJpbnZhbGlkLWF1dGgtZXZlbnRcIik7Zm9yKHZhciBiPSExLGM9MDtjPHRoaXMuaC5sZW5ndGg7YysrKXt2YXIgZD10aGlzLmhbY107aWYoZC5vYihhLmIsYS5jKSl7KGI9dGhpcy5iW2EuYl0pJiZiLmgoYSxkKTtiPSEwO2JyZWFrfX1iayh0aGlzLmMpO3JldHVybiBifTt2YXIgY2s9bmV3ICRmKDJFMywxRTQpLGRrPW5ldyAkZigzRTQsNkU0KTtVai5wcm90b3R5cGUuYWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jLmFhKCl9O2Z1bmN0aW9uIGVrKGEsYixjLGQsZSxmKXtyZXR1cm4gYS5hLnZiKGIsYyxkLGZ1bmN0aW9uKCl7YS5mfHwoYS5mPSEwLGEuYS51YShhLmkpKX0sZnVuY3Rpb24oKXthLnJlc2V0KCl9LGUsZil9ZnVuY3Rpb24gYWsoYSl7cmV0dXJuIGEmJlwiYXV0aC9jb3Jkb3ZhLW5vdC1yZWFkeVwiPT1hLmNvZGU/ITA6ITF9XG5Vai5wcm90b3R5cGUuQWE9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMsZTtyZXR1cm4gUmoodGhpcy5nKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGQuYS5BYShhLGIsYykucyhmdW5jdGlvbihhKXtpZihhayhhKSl0aHJvdyBuZXcgTihcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIik7ZT1hO3JldHVybiBTaihkLmcpLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyBlO30pfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBkLmEuSGIoKT9uZXcgeihmdW5jdGlvbigpe30pOlNqKGQuZykudGhlbihmdW5jdGlvbigpe3JldHVybiBkLmFhKCl9KS50aGVuKGZ1bmN0aW9uKCl7fSkucyhmdW5jdGlvbigpe30pfSl9KX07VWoucHJvdG90eXBlLkNhPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmEuQ2EoYyxmdW5jdGlvbihjKXthLmZhKGIsbnVsbCxjLGQpfSxjay5nZXQoKSl9O3ZhciBmaz17fTtcbmZ1bmN0aW9uIGdrKGEsYixjKXt2YXIgZD1iK1wiOlwiK2M7ZmtbZF18fChma1tkXT1uZXcgVWooYSxiLGMpKTtyZXR1cm4gZmtbZF19ZnVuY3Rpb24gVmooKXt0aGlzLmI9bnVsbDt0aGlzLmY9W107dGhpcy5jPVtdO3RoaXMuYT1udWxsO3RoaXMuZz0hMX1Wai5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmI9bnVsbDt0aGlzLmEmJih0aGlzLmEuY2FuY2VsKCksdGhpcy5hPW51bGwpfTtcblZqLnByb3RvdHlwZS5oPWZ1bmN0aW9uKGEsYil7aWYoIWEpcmV0dXJuIEIobmV3IE4oXCJpbnZhbGlkLWF1dGgtZXZlbnRcIikpO3RoaXMucmVzZXQoKTt0aGlzLmc9ITA7dmFyIGM9YS5iLGQ9YS5jLGU9YS5hJiZcImF1dGgvd2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWRcIj09YS5hLmNvZGUsZj1hLmEmJlwiYXV0aC9vcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCI9PWEuYS5jb2RlO1widW5rbm93blwiIT1jfHxlfHxmP2EuYT8oaGsodGhpcywhMCxudWxsLGEuYSksYT1BKCkpOmE9Yi52YShjLGQpP2lrKHRoaXMsYSxiKTpCKG5ldyBOKFwiaW52YWxpZC1hdXRoLWV2ZW50XCIpKTooaGsodGhpcywhMSxudWxsLG51bGwpLGE9QSgpKTtyZXR1cm4gYX07ZnVuY3Rpb24gYmsoYSl7YS5nfHwoYS5nPSEwLGhrKGEsITEsbnVsbCxudWxsKSl9XG5mdW5jdGlvbiBpayhhLGIsYyl7Yz1jLnZhKGIuYixiLmMpO3ZhciBkPWIuZixlPWIuZyxmPSEhYi5iLm1hdGNoKC9SZWRpcmVjdCQvKTtyZXR1cm4gYyhkLGUpLnRoZW4oZnVuY3Rpb24oYil7aGsoYSxmLGIsbnVsbCl9KS5zKGZ1bmN0aW9uKGIpe2hrKGEsZixudWxsLGIpfSl9ZnVuY3Rpb24gamsoYSxiKXthLmI9ZnVuY3Rpb24oKXtyZXR1cm4gQihiKX07aWYoYS5jLmxlbmd0aClmb3IodmFyIGM9MDtjPGEuYy5sZW5ndGg7YysrKWEuY1tjXShiKX1mdW5jdGlvbiBrayhhLGIpe2EuYj1mdW5jdGlvbigpe3JldHVybiBBKGIpfTtpZihhLmYubGVuZ3RoKWZvcih2YXIgYz0wO2M8YS5mLmxlbmd0aDtjKyspYS5mW2NdKGIpfWZ1bmN0aW9uIGhrKGEsYixjLGQpe2I/ZD9qayhhLGQpOmtrKGEsYyk6a2soYSx7dXNlcjpudWxsfSk7YS5mPVtdO2EuYz1bXX1cblZqLnByb3RvdHlwZS5hYT1mdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuIG5ldyB6KGZ1bmN0aW9uKGIsYyl7YS5iP2EuYigpLnRoZW4oYixjKTooYS5mLnB1c2goYiksYS5jLnB1c2goYyksbGsoYSkpfSl9O2Z1bmN0aW9uIGxrKGEpe3ZhciBiPW5ldyBOKFwidGltZW91dFwiKTthLmEmJmEuYS5jYW5jZWwoKTthLmE9c2QoZGsuZ2V0KCkpLnRoZW4oZnVuY3Rpb24oKXthLmJ8fGhrKGEsITAsbnVsbCxiKX0pfWZ1bmN0aW9uIFdqKCl7fVdqLnByb3RvdHlwZS5oPWZ1bmN0aW9uKGEsYil7aWYoIWEpcmV0dXJuIEIobmV3IE4oXCJpbnZhbGlkLWF1dGgtZXZlbnRcIikpO3ZhciBjPWEuYixkPWEuYzthLmE/KGIuZmEoYS5iLG51bGwsYS5hLGEuYyksYT1BKCkpOmE9Yi52YShjLGQpP21rKGEsYik6QihuZXcgTihcImludmFsaWQtYXV0aC1ldmVudFwiKSk7cmV0dXJuIGF9O1xuZnVuY3Rpb24gbWsoYSxiKXt2YXIgYz1hLmMsZD1hLmI7cmV0dXJuIGIudmEoZCxjKShhLmYsYS5nKS50aGVuKGZ1bmN0aW9uKGEpe2IuZmEoZCxhLG51bGwsYyl9KS5zKGZ1bmN0aW9uKGEpe2IuZmEoZCxudWxsLGEsYyl9KX07ZnVuY3Rpb24gbmsoYSxiKXt0aGlzLmE9YjtNKHRoaXMsXCJ2ZXJpZmljYXRpb25JZFwiLGEpfW5rLnByb3RvdHlwZS5jb25maXJtPWZ1bmN0aW9uKGEpe2E9dGgodGhpcy52ZXJpZmljYXRpb25JZCxhKTtyZXR1cm4gdGhpcy5hKGEpfTtmdW5jdGlvbiBvayhhLGIsYyxkKXtyZXR1cm4obmV3IHJoKGEpKS5RYShiLGMpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBuayhhLGQpfSl9O2Z1bmN0aW9uIHBrKGEsYixjLGQsZSxmKXt0aGlzLmg9YTt0aGlzLmk9Yjt0aGlzLmc9Yzt0aGlzLmM9ZDt0aGlzLmY9ZTt0aGlzLmw9ISFmO3RoaXMuYj1udWxsO3RoaXMuYT10aGlzLmM7aWYodGhpcy5mPHRoaXMuYyl0aHJvdyBFcnJvcihcIlByb2FjdGl2ZSByZWZyZXNoIGxvd2VyIGJvdW5kIGdyZWF0ZXIgdGhhbiB1cHBlciBib3VuZCFcIik7fXBrLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuYT10aGlzLmM7cWsodGhpcywhMCl9O2Z1bmN0aW9uIHJrKGEsYil7aWYoYilyZXR1cm4gYS5hPWEuYyxhLmcoKTtiPWEuYTthLmEqPTI7YS5hPmEuZiYmKGEuYT1hLmYpO3JldHVybiBifVxuZnVuY3Rpb24gcWsoYSxiKXtzayhhKTthLmI9c2QocmsoYSxiKSkudGhlbihmdW5jdGlvbigpe3JldHVybiBhLmw/QSgpOmJnKCl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGEuaCgpfSkudGhlbihmdW5jdGlvbigpe3FrKGEsITApfSkucyhmdW5jdGlvbihiKXthLmkoYikmJnFrKGEsITEpfSl9ZnVuY3Rpb24gc2soYSl7YS5iJiYoYS5iLmNhbmNlbCgpLGEuYj1udWxsKX07ZnVuY3Rpb24gdGsoYSl7dGhpcy5mPWE7dGhpcy5iPXRoaXMuYT1udWxsO3RoaXMuYz0wfXRrLnByb3RvdHlwZS5CPWZ1bmN0aW9uKCl7cmV0dXJue2FwaUtleTp0aGlzLmYuYixyZWZyZXNoVG9rZW46dGhpcy5hLGFjY2Vzc1Rva2VuOnRoaXMuYixleHBpcmF0aW9uVGltZTp0aGlzLmN9fTtmdW5jdGlvbiB1ayhhLGIpe3ZhciBjPWJbT10sZD1iLnJlZnJlc2hUb2tlbjtiPXZrKGIuZXhwaXJlc0luKTthLmI9YzthLmM9YjthLmE9ZH1mdW5jdGlvbiB2ayhhKXtyZXR1cm4gbmEoKSsxRTMqcGFyc2VJbnQoYSwxMCl9XG5mdW5jdGlvbiB3ayhhLGIpe3JldHVybiBPaChhLmYsYikudGhlbihmdW5jdGlvbihiKXthLmI9Yi5hY2Nlc3NfdG9rZW47YS5jPXZrKGIuZXhwaXJlc19pbik7YS5hPWIucmVmcmVzaF90b2tlbjtyZXR1cm57YWNjZXNzVG9rZW46YS5iLGV4cGlyYXRpb25UaW1lOmEuYyxyZWZyZXNoVG9rZW46YS5hfX0pLnMoZnVuY3Rpb24oYil7XCJhdXRoL3VzZXItdG9rZW4tZXhwaXJlZFwiPT1iLmNvZGUmJihhLmE9bnVsbCk7dGhyb3cgYjt9KX10ay5wcm90b3R5cGUuZ2V0VG9rZW49ZnVuY3Rpb24oYSl7YT0hIWE7cmV0dXJuIHRoaXMuYiYmIXRoaXMuYT9CKG5ldyBOKFwidXNlci10b2tlbi1leHBpcmVkXCIpKTphfHwhdGhpcy5ifHxuYSgpPnRoaXMuYy0zRTQ/dGhpcy5hP3drKHRoaXMse2dyYW50X3R5cGU6XCJyZWZyZXNoX3Rva2VuXCIscmVmcmVzaF90b2tlbjp0aGlzLmF9KTpBKG51bGwpOkEoe2FjY2Vzc1Rva2VuOnRoaXMuYixleHBpcmF0aW9uVGltZTp0aGlzLmMscmVmcmVzaFRva2VuOnRoaXMuYX0pfTtmdW5jdGlvbiB4ayhhLGIpe3RoaXMuYT1hfHxudWxsO3RoaXMuYj1ifHxudWxsO2dnKHRoaXMse2xhc3RTaWduSW5UaW1lOmNnKGJ8fG51bGwpLGNyZWF0aW9uVGltZTpjZyhhfHxudWxsKX0pfWZ1bmN0aW9uIHlrKGEpe3JldHVybiBuZXcgeGsoYS5hLGEuYil9eGsucHJvdG90eXBlLkI9ZnVuY3Rpb24oKXtyZXR1cm57bGFzdExvZ2luQXQ6dGhpcy5iLGNyZWF0ZWRBdDp0aGlzLmF9fTtmdW5jdGlvbiB6ayhhLGIsYyxkLGUsZil7Z2codGhpcyx7dWlkOmEsZGlzcGxheU5hbWU6ZHx8bnVsbCxwaG90b1VSTDplfHxudWxsLGVtYWlsOmN8fG51bGwscGhvbmVOdW1iZXI6Znx8bnVsbCxwcm92aWRlcklkOmJ9KX1mdW5jdGlvbiBBayhhLGIpe0MuY2FsbCh0aGlzLGEpO2Zvcih2YXIgYyBpbiBiKXRoaXNbY109YltjXX10KEFrLEMpO1xuZnVuY3Rpb24gQmsoYSxiLGMpe3RoaXMuQT1bXTt0aGlzLkc9YS5hcGlLZXk7dGhpcy5vPWEuYXBwTmFtZTt0aGlzLnc9YS5hdXRoRG9tYWlufHxudWxsO2E9ZmlyZWJhc2UuU0RLX1ZFUlNJT04/T2YoZmlyZWJhc2UuU0RLX1ZFUlNJT04pOm51bGw7dGhpcy5jPW5ldyBDaCh0aGlzLkcseGkoeWkpLGEpO3RoaXMuaD1uZXcgdGsodGhpcy5jKTtDayh0aGlzLGJbT10pO3VrKHRoaXMuaCxiKTtNKHRoaXMsXCJyZWZyZXNoVG9rZW5cIix0aGlzLmguYSk7RGsodGhpcyxjfHx7fSk7Ri5jYWxsKHRoaXMpO3RoaXMuST0hMTt0aGlzLncmJlJmKCkmJih0aGlzLmE9Z2sodGhpcy53LHRoaXMuRyx0aGlzLm8pKTt0aGlzLk49W107dGhpcy5pPW51bGw7dGhpcy5sPUVrKHRoaXMpO3RoaXMuVT1yKHRoaXMuR2EsdGhpcyk7dmFyIGQ9dGhpczt0aGlzLmhhPW51bGw7dGhpcy5yYT1mdW5jdGlvbihhKXtkLm5hKGEuaCl9O3RoaXMuVz1udWxsO3RoaXMuUj1bXTt0aGlzLnFhPWZ1bmN0aW9uKGEpe0ZrKGQsXG5hLmYpfTt0aGlzLlY9bnVsbH10KEJrLEYpO0JrLnByb3RvdHlwZS5uYT1mdW5jdGlvbihhKXt0aGlzLmhhPWE7SWgodGhpcy5jLGEpfTtCay5wcm90b3R5cGUuJD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhfTtmdW5jdGlvbiBHayhhLGIpe2EuVyYmRShhLlcsXCJsYW5ndWFnZUNvZGVDaGFuZ2VkXCIsYS5yYSk7KGEuVz1iKSYmY2QoYixcImxhbmd1YWdlQ29kZUNoYW5nZWRcIixhLnJhKX1mdW5jdGlvbiBGayhhLGIpe2EuUj1iO0poKGEuYyxmaXJlYmFzZS5TREtfVkVSU0lPTj9PZihmaXJlYmFzZS5TREtfVkVSU0lPTixhLlIpOm51bGwpfUJrLnByb3RvdHlwZS5LYT1mdW5jdGlvbigpe3JldHVybiBMYSh0aGlzLlIpfTtmdW5jdGlvbiBIayhhLGIpe2EuViYmRShhLlYsXCJmcmFtZXdvcmtDaGFuZ2VkXCIsYS5xYSk7KGEuVj1iKSYmY2QoYixcImZyYW1ld29ya0NoYW5nZWRcIixhLnFhKX1Cay5wcm90b3R5cGUuR2E9ZnVuY3Rpb24oKXt0aGlzLmwuYiYmKHNrKHRoaXMubCksdGhpcy5sLnN0YXJ0KCkpfTtcbmZ1bmN0aW9uIElrKGEpe3RyeXtyZXR1cm4gZmlyZWJhc2UuYXBwKGEubykuYXV0aCgpfWNhdGNoKGIpe3Rocm93IG5ldyBOKFwiaW50ZXJuYWwtZXJyb3JcIixcIk5vIGZpcmViYXNlLmF1dGguQXV0aCBpbnN0YW5jZSBpcyBhdmFpbGFibGUgZm9yIHRoZSBGaXJlYmFzZSBBcHAgJ1wiK2EubytcIichXCIpO319ZnVuY3Rpb24gRWsoYSl7cmV0dXJuIG5ldyBwayhmdW5jdGlvbigpe3JldHVybiBhLkYoITApfSxmdW5jdGlvbihhKXtyZXR1cm4gYSYmXCJhdXRoL25ldHdvcmstcmVxdWVzdC1mYWlsZWRcIj09YS5jb2RlPyEwOiExfSxmdW5jdGlvbigpe3ZhciBiPWEuaC5jLW5hKCktM0U1O3JldHVybiAwPGI/YjowfSwzRTQsOTZFNCwhMSl9ZnVuY3Rpb24gSmsoYSl7YS5tfHxhLmwuYnx8KGEubC5zdGFydCgpLEUoYSxcInRva2VuQ2hhbmdlZFwiLGEuVSksY2QoYSxcInRva2VuQ2hhbmdlZFwiLGEuVSkpfWZ1bmN0aW9uIEtrKGEpe0UoYSxcInRva2VuQ2hhbmdlZFwiLGEuVSk7c2soYS5sKX1cbmZ1bmN0aW9uIENrKGEsYil7YS5wYT1iO00oYSxcIl9sYXRcIixiKX1mdW5jdGlvbiBMayhhLGIpe0phKGEuTixmdW5jdGlvbihhKXtyZXR1cm4gYT09Yn0pfWZ1bmN0aW9uIE1rKGEpe2Zvcih2YXIgYj1bXSxjPTA7YzxhLk4ubGVuZ3RoO2MrKyliLnB1c2goYS5OW2NdKGEpKTtyZXR1cm4gT2IoYikudGhlbihmdW5jdGlvbigpe3JldHVybiBhfSl9ZnVuY3Rpb24gTmsoYSl7YS5hJiYhYS5JJiYoYS5JPSEwLGEuYS5zdWJzY3JpYmUoYSkpfVxuZnVuY3Rpb24gRGsoYSxiKXtnZyhhLHt1aWQ6Yi51aWQsZGlzcGxheU5hbWU6Yi5kaXNwbGF5TmFtZXx8bnVsbCxwaG90b1VSTDpiLnBob3RvVVJMfHxudWxsLGVtYWlsOmIuZW1haWx8fG51bGwsZW1haWxWZXJpZmllZDpiLmVtYWlsVmVyaWZpZWR8fCExLHBob25lTnVtYmVyOmIucGhvbmVOdW1iZXJ8fG51bGwsaXNBbm9ueW1vdXM6Yi5pc0Fub255bW91c3x8ITEsbWV0YWRhdGE6bmV3IHhrKGIuY3JlYXRlZEF0LGIubGFzdExvZ2luQXQpLHByb3ZpZGVyRGF0YTpbXX0pfU0oQmsucHJvdG90eXBlLFwicHJvdmlkZXJJZFwiLFwiZmlyZWJhc2VcIik7ZnVuY3Rpb24gT2soKXt9ZnVuY3Rpb24gUGsoYSl7cmV0dXJuIEEoKS50aGVuKGZ1bmN0aW9uKCl7aWYoYS5tKXRocm93IG5ldyBOKFwiYXBwLWRlbGV0ZWRcIik7fSl9ZnVuY3Rpb24gUWsoYSl7cmV0dXJuIERhKGEucHJvdmlkZXJEYXRhLGZ1bmN0aW9uKGEpe3JldHVybiBhLnByb3ZpZGVySWR9KX1cbmZ1bmN0aW9uIFJrKGEsYil7YiYmKFNrKGEsYi5wcm92aWRlcklkKSxhLnByb3ZpZGVyRGF0YS5wdXNoKGIpKX1mdW5jdGlvbiBTayhhLGIpe0phKGEucHJvdmlkZXJEYXRhLGZ1bmN0aW9uKGEpe3JldHVybiBhLnByb3ZpZGVySWQ9PWJ9KX1mdW5jdGlvbiBUayhhLGIsYyl7KFwidWlkXCIhPWJ8fGMpJiZhLmhhc093blByb3BlcnR5KGIpJiZNKGEsYixjKX1cbmZ1bmN0aW9uIFVrKGEsYil7YSE9YiYmKGdnKGEse3VpZDpiLnVpZCxkaXNwbGF5TmFtZTpiLmRpc3BsYXlOYW1lLHBob3RvVVJMOmIucGhvdG9VUkwsZW1haWw6Yi5lbWFpbCxlbWFpbFZlcmlmaWVkOmIuZW1haWxWZXJpZmllZCxwaG9uZU51bWJlcjpiLnBob25lTnVtYmVyLGlzQW5vbnltb3VzOmIuaXNBbm9ueW1vdXMscHJvdmlkZXJEYXRhOltdfSksYi5tZXRhZGF0YT9NKGEsXCJtZXRhZGF0YVwiLHlrKGIubWV0YWRhdGEpKTpNKGEsXCJtZXRhZGF0YVwiLG5ldyB4ayksdyhiLnByb3ZpZGVyRGF0YSxmdW5jdGlvbihiKXtSayhhLGIpfSksYS5oPWIuaCxNKGEsXCJyZWZyZXNoVG9rZW5cIixhLmguYSkpfWg9QmsucHJvdG90eXBlO2gucmVsb2FkPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztyZXR1cm4gUih0aGlzLFBrKHRoaXMpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gVmsoYSkudGhlbihmdW5jdGlvbigpe3JldHVybiBNayhhKX0pLnRoZW4oT2spfSkpfTtcbmZ1bmN0aW9uIFZrKGEpe3JldHVybiBhLkYoKS50aGVuKGZ1bmN0aW9uKGIpe3ZhciBjPWEuaXNBbm9ueW1vdXM7cmV0dXJuIFdrKGEsYikudGhlbihmdW5jdGlvbigpe2N8fFRrKGEsXCJpc0Fub255bW91c1wiLCExKTtyZXR1cm4gYn0pfSl9aC5GPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7cmV0dXJuIFIodGhpcyxQayh0aGlzKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGIuaC5nZXRUb2tlbihhKX0pLnRoZW4oZnVuY3Rpb24oYSl7aWYoIWEpdGhyb3cgbmV3IE4oXCJpbnRlcm5hbC1lcnJvclwiKTthLmFjY2Vzc1Rva2VuIT1iLnBhJiYoQ2soYixhLmFjY2Vzc1Rva2VuKSxHKGIsbmV3IEFrKFwidG9rZW5DaGFuZ2VkXCIpKSk7VGsoYixcInJlZnJlc2hUb2tlblwiLGEucmVmcmVzaFRva2VuKTtyZXR1cm4gYS5hY2Nlc3NUb2tlbn0pKX07XG5oLmdldFRva2VuPWZ1bmN0aW9uKGEpe2RnW1wiZmlyZWJhc2UuVXNlci5wcm90b3R5cGUuZ2V0VG9rZW4gaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBmaXJlYmFzZS5Vc2VyLnByb3RvdHlwZS5nZXRJZFRva2VuIGluc3RlYWQuXCJdfHwoZGdbXCJmaXJlYmFzZS5Vc2VyLnByb3RvdHlwZS5nZXRUb2tlbiBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIGZpcmViYXNlLlVzZXIucHJvdG90eXBlLmdldElkVG9rZW4gaW5zdGVhZC5cIl09ITAsXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBjb25zb2xlJiZcImZ1bmN0aW9uXCI9PT10eXBlb2YgY29uc29sZS53YXJuJiZjb25zb2xlLndhcm4oXCJmaXJlYmFzZS5Vc2VyLnByb3RvdHlwZS5nZXRUb2tlbiBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIGZpcmViYXNlLlVzZXIucHJvdG90eXBlLmdldElkVG9rZW4gaW5zdGVhZC5cIikpO3JldHVybiB0aGlzLkYoYSl9O1xuZnVuY3Rpb24gWGsoYSxiKXtiW09dJiZhLnBhIT1iW09dJiYodWsoYS5oLGIpLEcoYSxuZXcgQWsoXCJ0b2tlbkNoYW5nZWRcIikpLENrKGEsYltPXSksVGsoYSxcInJlZnJlc2hUb2tlblwiLGEuaC5hKSl9ZnVuY3Rpb24gV2soYSxiKXtyZXR1cm4gUShhLmMsdGkse2lkVG9rZW46Yn0pLnRoZW4ocihhLmtjLGEpKX1cbmgua2M9ZnVuY3Rpb24oYSl7YT1hLnVzZXJzO2lmKCFhfHwhYS5sZW5ndGgpdGhyb3cgbmV3IE4oXCJpbnRlcm5hbC1lcnJvclwiKTthPWFbMF07RGsodGhpcyx7dWlkOmEubG9jYWxJZCxkaXNwbGF5TmFtZTphLmRpc3BsYXlOYW1lLHBob3RvVVJMOmEucGhvdG9VcmwsZW1haWw6YS5lbWFpbCxlbWFpbFZlcmlmaWVkOiEhYS5lbWFpbFZlcmlmaWVkLHBob25lTnVtYmVyOmEucGhvbmVOdW1iZXIsbGFzdExvZ2luQXQ6YS5sYXN0TG9naW5BdCxjcmVhdGVkQXQ6YS5jcmVhdGVkQXR9KTtmb3IodmFyIGI9WWsoYSksYz0wO2M8Yi5sZW5ndGg7YysrKVJrKHRoaXMsYltjXSk7VGsodGhpcyxcImlzQW5vbnltb3VzXCIsISh0aGlzLmVtYWlsJiZhLnBhc3N3b3JkSGFzaCkmJiEodGhpcy5wcm92aWRlckRhdGEmJnRoaXMucHJvdmlkZXJEYXRhLmxlbmd0aCkpfTtcbmZ1bmN0aW9uIFlrKGEpe3JldHVybihhPWEucHJvdmlkZXJVc2VySW5mbykmJmEubGVuZ3RoP0RhKGEsZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyB6ayhhLnJhd0lkLGEucHJvdmlkZXJJZCxhLmVtYWlsLGEuZGlzcGxheU5hbWUsYS5waG90b1VybCxhLnBob25lTnVtYmVyKX0pOltdfWguWmE9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPW51bGw7cmV0dXJuIFIodGhpcyxhLmModGhpcy5jLHRoaXMudWlkKS50aGVuKGZ1bmN0aW9uKGEpe1hrKGIsYSk7Yz1aayhiLGEsXCJyZWF1dGhlbnRpY2F0ZVwiKTtiLmk9bnVsbDtyZXR1cm4gYi5yZWxvYWQoKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gY30pLCEwKX07aC5tYz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5aYShhKS50aGVuKGZ1bmN0aW9uKCl7fSl9O1xuZnVuY3Rpb24gJGsoYSxiKXtyZXR1cm4gVmsoYSkudGhlbihmdW5jdGlvbigpe2lmKEhhKFFrKGEpLGIpKXJldHVybiBNayhhKS50aGVuKGZ1bmN0aW9uKCl7dGhyb3cgbmV3IE4oXCJwcm92aWRlci1hbHJlYWR5LWxpbmtlZFwiKTt9KX0pfWguWGE9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPW51bGw7cmV0dXJuIFIodGhpcywkayh0aGlzLGEucHJvdmlkZXJJZCkudGhlbihmdW5jdGlvbigpe3JldHVybiBiLkYoKX0pLnRoZW4oZnVuY3Rpb24oYyl7cmV0dXJuIGEuYihiLmMsYyl9KS50aGVuKGZ1bmN0aW9uKGEpe2M9WmsoYixhLFwibGlua1wiKTtyZXR1cm4gYWwoYixhKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gY30pKX07aC5jYz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5YYShhKS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBhLnVzZXJ9KX07XG5oLmRjPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztyZXR1cm4gUih0aGlzLCRrKHRoaXMsXCJwaG9uZVwiKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG9rKElrKGMpLGEsYixyKGMuWGEsYykpfSkpfTtoLm5jPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztyZXR1cm4gUih0aGlzLEEoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG9rKElrKGMpLGEsYixyKGMuWmEsYykpfSksITApfTtmdW5jdGlvbiBaayhhLGIsYyl7dmFyIGQ9dWgoYik7Yj1NZyhiKTtyZXR1cm4gaGcoe3VzZXI6YSxjcmVkZW50aWFsOmQsYWRkaXRpb25hbFVzZXJJbmZvOmIsb3BlcmF0aW9uVHlwZTpjfSl9ZnVuY3Rpb24gYWwoYSxiKXtYayhhLGIpO3JldHVybiBhLnJlbG9hZCgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gYX0pfVxuaC5rYj1mdW5jdGlvbihhKXt2YXIgYj10aGlzO3JldHVybiBSKHRoaXMsdGhpcy5GKCkudGhlbihmdW5jdGlvbihjKXtyZXR1cm4gYi5jLmtiKGMsYSl9KS50aGVuKGZ1bmN0aW9uKGEpe1hrKGIsYSk7cmV0dXJuIGIucmVsb2FkKCl9KSl9O2guRGM9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztyZXR1cm4gUih0aGlzLHRoaXMuRigpLnRoZW4oZnVuY3Rpb24oYyl7cmV0dXJuIGEuYihiLmMsYyl9KS50aGVuKGZ1bmN0aW9uKGEpe1hrKGIsYSk7cmV0dXJuIGIucmVsb2FkKCl9KSl9O2gubGI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztyZXR1cm4gUih0aGlzLHRoaXMuRigpLnRoZW4oZnVuY3Rpb24oYyl7cmV0dXJuIGIuYy5sYihjLGEpfSkudGhlbihmdW5jdGlvbihhKXtYayhiLGEpO3JldHVybiBiLnJlbG9hZCgpfSkpfTtcbmgubWI9ZnVuY3Rpb24oYSl7aWYodm9pZCAwPT09YS5kaXNwbGF5TmFtZSYmdm9pZCAwPT09YS5waG90b1VSTClyZXR1cm4gUGsodGhpcyk7dmFyIGI9dGhpcztyZXR1cm4gUih0aGlzLHRoaXMuRigpLnRoZW4oZnVuY3Rpb24oYyl7cmV0dXJuIGIuYy5tYihjLHtkaXNwbGF5TmFtZTphLmRpc3BsYXlOYW1lLHBob3RvVXJsOmEucGhvdG9VUkx9KX0pLnRoZW4oZnVuY3Rpb24oYSl7WGsoYixhKTtUayhiLFwiZGlzcGxheU5hbWVcIixhLmRpc3BsYXlOYW1lfHxudWxsKTtUayhiLFwicGhvdG9VUkxcIixhLnBob3RvVXJsfHxudWxsKTt3KGIucHJvdmlkZXJEYXRhLGZ1bmN0aW9uKGEpe1wicGFzc3dvcmRcIj09PWEucHJvdmlkZXJJZCYmKE0oYSxcImRpc3BsYXlOYW1lXCIsYi5kaXNwbGF5TmFtZSksTShhLFwicGhvdG9VUkxcIixiLnBob3RvVVJMKSl9KTtyZXR1cm4gTWsoYil9KS50aGVuKE9rKSl9O1xuaC5DYz1mdW5jdGlvbihhKXt2YXIgYj10aGlzO3JldHVybiBSKHRoaXMsVmsodGhpcykudGhlbihmdW5jdGlvbihjKXtyZXR1cm4gSGEoUWsoYiksYSk/ZmkoYi5jLGMsW2FdKS50aGVuKGZ1bmN0aW9uKGEpe3ZhciBjPXt9O3coYS5wcm92aWRlclVzZXJJbmZvfHxbXSxmdW5jdGlvbihhKXtjW2EucHJvdmlkZXJJZF09ITB9KTt3KFFrKGIpLGZ1bmN0aW9uKGEpe2NbYV18fFNrKGIsYSl9KTtjW3JoLlBST1ZJREVSX0lEXXx8TShiLFwicGhvbmVOdW1iZXJcIixudWxsKTtyZXR1cm4gTWsoYil9KTpNayhiKS50aGVuKGZ1bmN0aW9uKCl7dGhyb3cgbmV3IE4oXCJuby1zdWNoLXByb3ZpZGVyXCIpO30pfSkpfTtcbmguZGVsZXRlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztyZXR1cm4gUih0aGlzLHRoaXMuRigpLnRoZW4oZnVuY3Rpb24oYil7cmV0dXJuIFEoYS5jLHNpLHtpZFRva2VuOmJ9KX0pLnRoZW4oZnVuY3Rpb24oKXtHKGEsbmV3IEFrKFwidXNlckRlbGV0ZWRcIikpfSkpLnRoZW4oZnVuY3Rpb24oKXtmb3IodmFyIGI9MDtiPGEuQS5sZW5ndGg7YisrKWEuQVtiXS5jYW5jZWwoXCJhcHAtZGVsZXRlZFwiKTtHayhhLG51bGwpO0hrKGEsbnVsbCk7YS5BPVtdO2EubT0hMDtLayhhKTtNKGEsXCJyZWZyZXNoVG9rZW5cIixudWxsKTthLmEmJmEuYS51bnN1YnNjcmliZShhKX0pfTtcbmgub2I9ZnVuY3Rpb24oYSxiKXtyZXR1cm5cImxpbmtWaWFQb3B1cFwiPT1hJiYodGhpcy5nfHxudWxsKT09YiYmdGhpcy5mfHxcInJlYXV0aFZpYVBvcHVwXCI9PWEmJih0aGlzLmd8fG51bGwpPT1iJiZ0aGlzLmZ8fFwibGlua1ZpYVJlZGlyZWN0XCI9PWEmJih0aGlzLlp8fG51bGwpPT1ifHxcInJlYXV0aFZpYVJlZGlyZWN0XCI9PWEmJih0aGlzLlp8fG51bGwpPT1iPyEwOiExfTtoLmZhPWZ1bmN0aW9uKGEsYixjLGQpe1wibGlua1ZpYVBvcHVwXCIhPWEmJlwicmVhdXRoVmlhUG9wdXBcIiE9YXx8ZCE9KHRoaXMuZ3x8bnVsbCl8fChjJiZ0aGlzLnY/dGhpcy52KGMpOmImJiFjJiZ0aGlzLmYmJnRoaXMuZihiKSx0aGlzLmImJih0aGlzLmIuY2FuY2VsKCksdGhpcy5iPW51bGwpLGRlbGV0ZSB0aGlzLmYsZGVsZXRlIHRoaXMudil9O1xuaC52YT1mdW5jdGlvbihhLGIpe3JldHVyblwibGlua1ZpYVBvcHVwXCI9PWEmJmI9PSh0aGlzLmd8fG51bGwpP3IodGhpcy50Yix0aGlzKTpcInJlYXV0aFZpYVBvcHVwXCI9PWEmJmI9PSh0aGlzLmd8fG51bGwpP3IodGhpcy51Yix0aGlzKTpcImxpbmtWaWFSZWRpcmVjdFwiPT1hJiYodGhpcy5afHxudWxsKT09Yj9yKHRoaXMudGIsdGhpcyk6XCJyZWF1dGhWaWFSZWRpcmVjdFwiPT1hJiYodGhpcy5afHxudWxsKT09Yj9yKHRoaXMudWIsdGhpcyk6bnVsbH07aC5lYz1mdW5jdGlvbihhKXt2YXIgYj10aGlzO3JldHVybiBibCh0aGlzLFwibGlua1ZpYVBvcHVwXCIsYSxmdW5jdGlvbigpe3JldHVybiAkayhiLGEucHJvdmlkZXJJZCkudGhlbihmdW5jdGlvbigpe3JldHVybiBNayhiKX0pfSwhMSl9O2gub2M9ZnVuY3Rpb24oYSl7cmV0dXJuIGJsKHRoaXMsXCJyZWF1dGhWaWFQb3B1cFwiLGEsZnVuY3Rpb24oKXtyZXR1cm4gQSgpfSwhMCl9O1xuZnVuY3Rpb24gYmwoYSxiLGMsZCxlKXtpZighUmYoKSlyZXR1cm4gQihuZXcgTihcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIikpO2lmKGEuaSYmIWUpcmV0dXJuIEIoYS5pKTt2YXIgZj1MZyhjLnByb3ZpZGVySWQpLGc9UWYoYS51aWQrXCI6OjpcIiksbD1udWxsOyghVGYoKXx8TGYoKSkmJmEudyYmYy5pc09BdXRoUHJvdmlkZXImJihsPVJpKGEudyxhLkcsYS5vLGIsYyxudWxsLGcsZmlyZWJhc2UuU0RLX1ZFUlNJT058fG51bGwpKTt2YXIgbj1EZihsLGYmJmYuemEsZiYmZi55YSk7ZD1kKCkudGhlbihmdW5jdGlvbigpe2NsKGEpO2lmKCFlKXJldHVybiBhLkYoKS50aGVuKGZ1bmN0aW9uKCl7fSl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGVrKGEuYSxuLGIsYyxnLCEhbCl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB6KGZ1bmN0aW9uKGMsZCl7YS5mYShiLG51bGwsbmV3IE4oXCJjYW5jZWxsZWQtcG9wdXAtcmVxdWVzdFwiKSxhLmd8fG51bGwpO1xuYS5mPWM7YS52PWQ7YS5nPWc7YS5iPWEuYS5DYShhLGIsbixnKX0pfSkudGhlbihmdW5jdGlvbihhKXtuJiZDZihuKTtyZXR1cm4gYT9oZyhhKTpudWxsfSkucyhmdW5jdGlvbihhKXtuJiZDZihuKTt0aHJvdyBhO30pO3JldHVybiBSKGEsZCxlKX1oLmZjPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7cmV0dXJuIGRsKHRoaXMsXCJsaW5rVmlhUmVkaXJlY3RcIixhLGZ1bmN0aW9uKCl7cmV0dXJuICRrKGIsYS5wcm92aWRlcklkKX0sITEpfTtoLnBjPWZ1bmN0aW9uKGEpe3JldHVybiBkbCh0aGlzLFwicmVhdXRoVmlhUmVkaXJlY3RcIixhLGZ1bmN0aW9uKCl7cmV0dXJuIEEoKX0sITApfTtcbmZ1bmN0aW9uIGRsKGEsYixjLGQsZSl7aWYoIVJmKCkpcmV0dXJuIEIobmV3IE4oXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIpKTtpZihhLmkmJiFlKXJldHVybiBCKGEuaSk7dmFyIGY9bnVsbCxnPVFmKGEudWlkK1wiOjo6XCIpO2Q9ZCgpLnRoZW4oZnVuY3Rpb24oKXtjbChhKTtpZighZSlyZXR1cm4gYS5GKCkudGhlbihmdW5jdGlvbigpe30pfSkudGhlbihmdW5jdGlvbigpe2EuWj1nO3JldHVybiBNayhhKX0pLnRoZW4oZnVuY3Rpb24oYil7YS5jYSYmKGI9YS5jYSxiPWIuYi5zZXQoZWwsYS5CKCksYi5hKSk7cmV0dXJuIGJ9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGEuYS5BYShiLGMsZyl9KS5zKGZ1bmN0aW9uKGIpe2Y9YjtpZihhLmNhKXJldHVybiBmbChhLmNhKTt0aHJvdyBmO30pLnRoZW4oZnVuY3Rpb24oKXtpZihmKXRocm93IGY7fSk7cmV0dXJuIFIoYSxkLGUpfVxuZnVuY3Rpb24gY2woYSl7aWYoIWEuYXx8IWEuSSl7aWYoYS5hJiYhYS5JKXRocm93IG5ldyBOKFwiaW50ZXJuYWwtZXJyb3JcIik7dGhyb3cgbmV3IE4oXCJhdXRoLWRvbWFpbi1jb25maWctcmVxdWlyZWRcIik7fX1oLnRiPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpczt0aGlzLmImJih0aGlzLmIuY2FuY2VsKCksdGhpcy5iPW51bGwpO3ZhciBkPW51bGwsZT10aGlzLkYoKS50aGVuKGZ1bmN0aW9uKGQpe3JldHVybiBaZyhjLmMse3JlcXVlc3RVcmk6YSxzZXNzaW9uSWQ6YixpZFRva2VuOmR9KX0pLnRoZW4oZnVuY3Rpb24oYSl7ZD1aayhjLGEsXCJsaW5rXCIpO3JldHVybiBhbChjLGEpfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBkfSk7cmV0dXJuIFIodGhpcyxlKX07XG5oLnViPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpczt0aGlzLmImJih0aGlzLmIuY2FuY2VsKCksdGhpcy5iPW51bGwpO3ZhciBkPW51bGwsZT1BKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBWZygkZyhjLmMse3JlcXVlc3RVcmk6YSxzZXNzaW9uSWQ6Yn0pLGMudWlkKX0pLnRoZW4oZnVuY3Rpb24oYSl7ZD1aayhjLGEsXCJyZWF1dGhlbnRpY2F0ZVwiKTtYayhjLGEpO2MuaT1udWxsO3JldHVybiBjLnJlbG9hZCgpfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBkfSk7cmV0dXJuIFIodGhpcyxlLCEwKX07aC5iYj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9bnVsbDtyZXR1cm4gUih0aGlzLHRoaXMuRigpLnRoZW4oZnVuY3Rpb24oYil7Yz1iO3JldHVyblwidW5kZWZpbmVkXCI9PT10eXBlb2YgYXx8U2EoYSk/e306RmcobmV3IHdnKGEpKX0pLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGIuYy5iYihjLGEpfSkudGhlbihmdW5jdGlvbihhKXtpZihiLmVtYWlsIT1hKXJldHVybiBiLnJlbG9hZCgpfSkudGhlbihmdW5jdGlvbigpe30pKX07XG5mdW5jdGlvbiBSKGEsYixjKXt2YXIgZD1nbChhLGIsYyk7YS5BLnB1c2goZCk7UWIoZCxmdW5jdGlvbigpe0lhKGEuQSxkKX0pO3JldHVybiBkfWZ1bmN0aW9uIGdsKGEsYixjKXtyZXR1cm4gYS5pJiYhYz8oYi5jYW5jZWwoKSxCKGEuaSkpOmIucyhmdW5jdGlvbihiKXshYnx8XCJhdXRoL3VzZXItZGlzYWJsZWRcIiE9Yi5jb2RlJiZcImF1dGgvdXNlci10b2tlbi1leHBpcmVkXCIhPWIuY29kZXx8KGEuaXx8RyhhLG5ldyBBayhcInVzZXJJbnZhbGlkYXRlZFwiKSksYS5pPWIpO3Rocm93IGI7fSl9aC50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5CKCl9O1xuaC5CPWZ1bmN0aW9uKCl7dmFyIGE9e3VpZDp0aGlzLnVpZCxkaXNwbGF5TmFtZTp0aGlzLmRpc3BsYXlOYW1lLHBob3RvVVJMOnRoaXMucGhvdG9VUkwsZW1haWw6dGhpcy5lbWFpbCxlbWFpbFZlcmlmaWVkOnRoaXMuZW1haWxWZXJpZmllZCxwaG9uZU51bWJlcjp0aGlzLnBob25lTnVtYmVyLGlzQW5vbnltb3VzOnRoaXMuaXNBbm9ueW1vdXMscHJvdmlkZXJEYXRhOltdLGFwaUtleTp0aGlzLkcsYXBwTmFtZTp0aGlzLm8sYXV0aERvbWFpbjp0aGlzLncsc3RzVG9rZW5NYW5hZ2VyOnRoaXMuaC5CKCkscmVkaXJlY3RFdmVudElkOnRoaXMuWnx8bnVsbH07dGhpcy5tZXRhZGF0YSYmV2EoYSx0aGlzLm1ldGFkYXRhLkIoKSk7dyh0aGlzLnByb3ZpZGVyRGF0YSxmdW5jdGlvbihiKXthLnByb3ZpZGVyRGF0YS5wdXNoKGlnKGIpKX0pO3JldHVybiBhfTtcbmZ1bmN0aW9uIGhsKGEpe2lmKCFhLmFwaUtleSlyZXR1cm4gbnVsbDt2YXIgYj17YXBpS2V5OmEuYXBpS2V5LGF1dGhEb21haW46YS5hdXRoRG9tYWluLGFwcE5hbWU6YS5hcHBOYW1lfSxjPXt9O2lmKGEuc3RzVG9rZW5NYW5hZ2VyJiZhLnN0c1Rva2VuTWFuYWdlci5hY2Nlc3NUb2tlbiYmYS5zdHNUb2tlbk1hbmFnZXIuZXhwaXJhdGlvblRpbWUpY1tPXT1hLnN0c1Rva2VuTWFuYWdlci5hY2Nlc3NUb2tlbixjLnJlZnJlc2hUb2tlbj1hLnN0c1Rva2VuTWFuYWdlci5yZWZyZXNoVG9rZW58fG51bGwsYy5leHBpcmVzSW49KGEuc3RzVG9rZW5NYW5hZ2VyLmV4cGlyYXRpb25UaW1lLW5hKCkpLzFFMztlbHNlIHJldHVybiBudWxsO3ZhciBkPW5ldyBCayhiLGMsYSk7YS5wcm92aWRlckRhdGEmJncoYS5wcm92aWRlckRhdGEsZnVuY3Rpb24oYSl7YSYmUmsoZCxoZyhhKSl9KTthLnJlZGlyZWN0RXZlbnRJZCYmKGQuWj1hLnJlZGlyZWN0RXZlbnRJZCk7cmV0dXJuIGR9XG5mdW5jdGlvbiBpbChhLGIsYyxkKXt2YXIgZT1uZXcgQmsoYSxiKTtjJiYoZS5jYT1jKTtkJiZGayhlLGQpO3JldHVybiBlLnJlbG9hZCgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZX0pfTtmdW5jdGlvbiBqbChhKXt0aGlzLmE9YTt0aGlzLmI9cmooKX12YXIgZWw9e25hbWU6XCJyZWRpcmVjdFVzZXJcIixDOlwic2Vzc2lvblwifTtmdW5jdGlvbiBmbChhKXtyZXR1cm4gdWooYS5iLGVsLGEuYSl9ZnVuY3Rpb24ga2woYSxiKXtyZXR1cm4gYS5iLmdldChlbCxhLmEpLnRoZW4oZnVuY3Rpb24oYSl7YSYmYiYmKGEuYXV0aERvbWFpbj1iKTtyZXR1cm4gaGwoYXx8e30pfSl9O2Z1bmN0aW9uIGxsKGEsYil7dGhpcy5hPWE7dGhpcy5iPWJ8fHJqKCk7dGhpcy5jPW51bGw7dGhpcy5mPW1sKHRoaXMpO3ZqKHRoaXMuYix5aihcImxvY2FsXCIpLHRoaXMuYSxyKHRoaXMuZyx0aGlzKSl9bGwucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9eWooXCJsb2NhbFwiKTtubCh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIEEoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGEuYyYmXCJsb2NhbFwiIT1hLmMuQz9hLmIuZ2V0KGIsYS5hKTpudWxsfSkudGhlbihmdW5jdGlvbihjKXtpZihjKXJldHVybiBvbChhLFwibG9jYWxcIikudGhlbihmdW5jdGlvbigpe2EuYz1ifSl9KX0pfTtmdW5jdGlvbiBvbChhLGIpe3ZhciBjPVtdLGQ7Zm9yKGQgaW4gbmopbmpbZF0hPT1iJiZjLnB1c2godWooYS5iLHlqKG5qW2RdKSxhLmEpKTtjLnB1c2godWooYS5iLHBsLGEuYSkpO3JldHVybiBOYihjKX1cbmZ1bmN0aW9uIG1sKGEpe3ZhciBiPXlqKFwibG9jYWxcIiksYz15aihcInNlc3Npb25cIiksZD15aihcIm5vbmVcIik7cmV0dXJuIGEuYi5nZXQoYyxhLmEpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGU/YzphLmIuZ2V0KGQsYS5hKS50aGVuKGZ1bmN0aW9uKGMpe3JldHVybiBjP2Q6YS5iLmdldChiLGEuYSkudGhlbihmdW5jdGlvbihjKXtyZXR1cm4gYz9iOmEuYi5nZXQocGwsYS5hKS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBhP3lqKGEpOmJ9KX0pfSl9KS50aGVuKGZ1bmN0aW9uKGIpe2EuYz1iO3JldHVybiBvbChhLGIuQyl9KS5zKGZ1bmN0aW9uKCl7YS5jfHwoYS5jPWIpfSl9dmFyIHBsPXtuYW1lOlwicGVyc2lzdGVuY2VcIixDOlwic2Vzc2lvblwifTtmdW5jdGlvbiB5aihhKXtyZXR1cm57bmFtZTpcImF1dGhVc2VyXCIsQzphfX1cbmxsLnByb3RvdHlwZS5lYj1mdW5jdGlvbihhKXt2YXIgYj1udWxsLGM9dGhpcztvaihhKTtyZXR1cm4gbmwodGhpcyxmdW5jdGlvbigpe3JldHVybiBhIT1jLmMuQz9jLmIuZ2V0KGMuYyxjLmEpLnRoZW4oZnVuY3Rpb24oZCl7Yj1kO3JldHVybiBvbChjLGEpfSkudGhlbihmdW5jdGlvbigpe2MuYz15aihhKTtpZihiKXJldHVybiBjLmIuc2V0KGMuYyxiLGMuYSl9KTpBKCl9KX07ZnVuY3Rpb24gcWwoYSl7cmV0dXJuIG5sKGEsZnVuY3Rpb24oKXtyZXR1cm4gYS5iLnNldChwbCxhLmMuQyxhLmEpfSl9ZnVuY3Rpb24gcmwoYSxiKXtyZXR1cm4gbmwoYSxmdW5jdGlvbigpe3JldHVybiBhLmIuc2V0KGEuYyxiLkIoKSxhLmEpfSl9ZnVuY3Rpb24gc2woYSl7cmV0dXJuIG5sKGEsZnVuY3Rpb24oKXtyZXR1cm4gdWooYS5iLGEuYyxhLmEpfSl9XG5mdW5jdGlvbiB0bChhLGIpe3JldHVybiBubChhLGZ1bmN0aW9uKCl7cmV0dXJuIGEuYi5nZXQoYS5jLGEuYSkudGhlbihmdW5jdGlvbihhKXthJiZiJiYoYS5hdXRoRG9tYWluPWIpO3JldHVybiBobChhfHx7fSl9KX0pfWZ1bmN0aW9uIG5sKGEsYil7YS5mPWEuZi50aGVuKGIsYik7cmV0dXJuIGEuZn07ZnVuY3Rpb24gdWwoYSl7dGhpcy5sPSExO00odGhpcyxcImFwcFwiLGEpO2lmKFModGhpcykub3B0aW9ucyYmUyh0aGlzKS5vcHRpb25zLmFwaUtleSlhPWZpcmViYXNlLlNES19WRVJTSU9OP09mKGZpcmViYXNlLlNES19WRVJTSU9OKTpudWxsLHRoaXMuYz1uZXcgQ2goUyh0aGlzKS5vcHRpb25zJiZTKHRoaXMpLm9wdGlvbnMuYXBpS2V5LHhpKHlpKSxhKTtlbHNlIHRocm93IG5ldyBOKFwiaW52YWxpZC1hcGkta2V5XCIpO3RoaXMuTj1bXTt0aGlzLm09W107dGhpcy5JPVtdO3RoaXMuS2I9ZmlyZWJhc2UuSU5URVJOQUwuY3JlYXRlU3Vic2NyaWJlKHIodGhpcy5hYyx0aGlzKSk7dGhpcy5SPXZvaWQgMDt0aGlzLkxiPWZpcmViYXNlLklOVEVSTkFMLmNyZWF0ZVN1YnNjcmliZShyKHRoaXMuYmMsdGhpcykpO3ZsKHRoaXMsbnVsbCk7dGhpcy5oPW5ldyBsbChTKHRoaXMpLm9wdGlvbnMuYXBpS2V5K1wiOlwiK1ModGhpcykubmFtZSk7dGhpcy5HPW5ldyBqbChTKHRoaXMpLm9wdGlvbnMuYXBpS2V5K1xuXCI6XCIrUyh0aGlzKS5uYW1lKTt0aGlzLlU9VCh0aGlzLHdsKHRoaXMpKTt0aGlzLmk9VCh0aGlzLHhsKHRoaXMpKTt0aGlzLlc9ITE7dGhpcy5oYT1yKHRoaXMueWMsdGhpcyk7dGhpcy5HYT1yKHRoaXMua2EsdGhpcyk7dGhpcy5wYT1yKHRoaXMuVGIsdGhpcyk7dGhpcy5xYT1yKHRoaXMuWmIsdGhpcyk7dGhpcy5yYT1yKHRoaXMuJGIsdGhpcyk7eWwodGhpcyk7dGhpcy5JTlRFUk5BTD17fTt0aGlzLklOVEVSTkFMW1wiZGVsZXRlXCJdPXIodGhpcy5kZWxldGUsdGhpcyk7dGhpcy5JTlRFUk5BTC5sb2dGcmFtZXdvcms9cih0aGlzLmdjLHRoaXMpO3RoaXMubz0wO0YuY2FsbCh0aGlzKTt6bCh0aGlzKTt0aGlzLkE9W119dCh1bCxGKTtmdW5jdGlvbiBBbChhKXtDLmNhbGwodGhpcyxcImxhbmd1YWdlQ29kZUNoYW5nZWRcIik7dGhpcy5oPWF9dChBbCxDKTtmdW5jdGlvbiBCbChhKXtDLmNhbGwodGhpcyxcImZyYW1ld29ya0NoYW5nZWRcIik7dGhpcy5mPWF9dChCbCxDKTtoPXVsLnByb3RvdHlwZTtcbmguZWI9ZnVuY3Rpb24oYSl7YT10aGlzLmguZWIoYSk7cmV0dXJuIFQodGhpcyxhKX07aC5uYT1mdW5jdGlvbihhKXt0aGlzLlY9PT1hfHx0aGlzLmx8fCh0aGlzLlY9YSxJaCh0aGlzLmMsdGhpcy5WKSxHKHRoaXMsbmV3IEFsKHRoaXMuJCgpKSkpfTtoLiQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5WfTtoLkVjPWZ1bmN0aW9uKCl7dmFyIGE9ay5uYXZpZ2F0b3I7dGhpcy5uYShhP2EubGFuZ3VhZ2VzJiZhLmxhbmd1YWdlc1swXXx8YS5sYW5ndWFnZXx8YS51c2VyTGFuZ3VhZ2V8fG51bGw6bnVsbCl9O2guZ2M9ZnVuY3Rpb24oYSl7dGhpcy5BLnB1c2goYSk7SmgodGhpcy5jLGZpcmViYXNlLlNES19WRVJTSU9OP09mKGZpcmViYXNlLlNES19WRVJTSU9OLHRoaXMuQSk6bnVsbCk7Ryh0aGlzLG5ldyBCbCh0aGlzLkEpKX07aC5LYT1mdW5jdGlvbigpe3JldHVybiBMYSh0aGlzLkEpfTtcbmZ1bmN0aW9uIHpsKGEpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLFwibGNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCgpfSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5uYShhKX0sZW51bWVyYWJsZTohMX0pO2EuVj1udWxsfWgudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue2FwaUtleTpTKHRoaXMpLm9wdGlvbnMuYXBpS2V5LGF1dGhEb21haW46Uyh0aGlzKS5vcHRpb25zLmF1dGhEb21haW4sYXBwTmFtZTpTKHRoaXMpLm5hbWUsY3VycmVudFVzZXI6VSh0aGlzKSYmVSh0aGlzKS5CKCl9fTtmdW5jdGlvbiBDbChhKXtyZXR1cm4gYS5KYnx8QihuZXcgTihcImF1dGgtZG9tYWluLWNvbmZpZy1yZXF1aXJlZFwiKSl9XG5mdW5jdGlvbiB5bChhKXt2YXIgYj1TKGEpLm9wdGlvbnMuYXV0aERvbWFpbixjPVMoYSkub3B0aW9ucy5hcGlLZXk7YiYmUmYoKSYmKGEuSmI9YS5VLnRoZW4oZnVuY3Rpb24oKXtpZighYS5sKXthLmE9Z2soYixjLFMoYSkubmFtZSk7YS5hLnN1YnNjcmliZShhKTtVKGEpJiZOayhVKGEpKTtpZihhLncpe05rKGEudyk7dmFyIGQ9YS53O2QubmEoYS4kKCkpO0drKGQsYSk7ZD1hLnc7RmsoZCxhLkEpO0hrKGQsYSk7YS53PW51bGx9cmV0dXJuIGEuYX19KSl9aC5vYj1mdW5jdGlvbihhLGIpe3N3aXRjaChhKXtjYXNlIFwidW5rbm93blwiOmNhc2UgXCJzaWduSW5WaWFSZWRpcmVjdFwiOnJldHVybiEwO2Nhc2UgXCJzaWduSW5WaWFQb3B1cFwiOnJldHVybiB0aGlzLmc9PWImJiEhdGhpcy5mO2RlZmF1bHQ6cmV0dXJuITF9fTtcbmguZmE9ZnVuY3Rpb24oYSxiLGMsZCl7XCJzaWduSW5WaWFQb3B1cFwiPT1hJiZ0aGlzLmc9PWQmJihjJiZ0aGlzLnY/dGhpcy52KGMpOmImJiFjJiZ0aGlzLmYmJnRoaXMuZihiKSx0aGlzLmImJih0aGlzLmIuY2FuY2VsKCksdGhpcy5iPW51bGwpLGRlbGV0ZSB0aGlzLmYsZGVsZXRlIHRoaXMudil9O2gudmE9ZnVuY3Rpb24oYSxiKXtyZXR1cm5cInNpZ25JblZpYVJlZGlyZWN0XCI9PWF8fFwic2lnbkluVmlhUG9wdXBcIj09YSYmdGhpcy5nPT1iJiZ0aGlzLmY/cih0aGlzLlNiLHRoaXMpOm51bGx9O1xuaC5TYj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7YT17cmVxdWVzdFVyaTphLHNlc3Npb25JZDpifTt0aGlzLmImJih0aGlzLmIuY2FuY2VsKCksdGhpcy5iPW51bGwpO3ZhciBkPW51bGwsZT1udWxsLGY9WGcoYy5jLGEpLnRoZW4oZnVuY3Rpb24oYSl7ZD11aChhKTtlPU1nKGEpO3JldHVybiBhfSk7YT1jLlUudGhlbihmdW5jdGlvbigpe3JldHVybiBmfSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gRGwoYyxhKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gaGcoe3VzZXI6VShjKSxjcmVkZW50aWFsOmQsYWRkaXRpb25hbFVzZXJJbmZvOmUsb3BlcmF0aW9uVHlwZTpcInNpZ25JblwifSl9KTtyZXR1cm4gVCh0aGlzLGEpfTtcbmgud2M9ZnVuY3Rpb24oYSl7aWYoIVJmKCkpcmV0dXJuIEIobmV3IE4oXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIpKTt2YXIgYj10aGlzLGM9TGcoYS5wcm92aWRlcklkKSxkPVFmKCksZT1udWxsOyghVGYoKXx8TGYoKSkmJlModGhpcykub3B0aW9ucy5hdXRoRG9tYWluJiZhLmlzT0F1dGhQcm92aWRlciYmKGU9UmkoUyh0aGlzKS5vcHRpb25zLmF1dGhEb21haW4sUyh0aGlzKS5vcHRpb25zLmFwaUtleSxTKHRoaXMpLm5hbWUsXCJzaWduSW5WaWFQb3B1cFwiLGEsbnVsbCxkLGZpcmViYXNlLlNES19WRVJTSU9OfHxudWxsKSk7dmFyIGY9RGYoZSxjJiZjLnphLGMmJmMueWEpO2M9Q2wodGhpcykudGhlbihmdW5jdGlvbihiKXtyZXR1cm4gZWsoYixmLFwic2lnbkluVmlhUG9wdXBcIixhLGQsISFlKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHooZnVuY3Rpb24oYSxjKXtiLmZhKFwic2lnbkluVmlhUG9wdXBcIixudWxsLG5ldyBOKFwiY2FuY2VsbGVkLXBvcHVwLXJlcXVlc3RcIiksXG5iLmcpO2IuZj1hO2Iudj1jO2IuZz1kO2IuYj1iLmEuQ2EoYixcInNpZ25JblZpYVBvcHVwXCIsZixkKX0pfSkudGhlbihmdW5jdGlvbihhKXtmJiZDZihmKTtyZXR1cm4gYT9oZyhhKTpudWxsfSkucyhmdW5jdGlvbihhKXtmJiZDZihmKTt0aHJvdyBhO30pO3JldHVybiBUKHRoaXMsYyl9O2gueGM9ZnVuY3Rpb24oYSl7aWYoIVJmKCkpcmV0dXJuIEIobmV3IE4oXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIpKTt2YXIgYj10aGlzLGM9Q2wodGhpcykudGhlbihmdW5jdGlvbigpe3JldHVybiBxbChiLmgpfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBiLmEuQWEoXCJzaWduSW5WaWFSZWRpcmVjdFwiLGEpfSk7cmV0dXJuIFQodGhpcyxjKX07XG5oLmFhPWZ1bmN0aW9uKCl7aWYoIVJmKCkpcmV0dXJuIEIobmV3IE4oXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIpKTt2YXIgYT10aGlzLGI9Q2wodGhpcykudGhlbihmdW5jdGlvbigpe3JldHVybiBhLmEuYWEoKX0pLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGE/aGcoYSk6bnVsbH0pO3JldHVybiBUKHRoaXMsYil9O2Z1bmN0aW9uIERsKGEsYil7dmFyIGM9e307Yy5hcGlLZXk9UyhhKS5vcHRpb25zLmFwaUtleTtjLmF1dGhEb21haW49UyhhKS5vcHRpb25zLmF1dGhEb21haW47Yy5hcHBOYW1lPVMoYSkubmFtZTtyZXR1cm4gYS5VLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gaWwoYyxiLGEuRyxhLkthKCkpfSkudGhlbihmdW5jdGlvbihiKXtpZihVKGEpJiZiLnVpZD09VShhKS51aWQpcmV0dXJuIFVrKFUoYSksYiksYS5rYShiKTt2bChhLGIpO05rKGIpO3JldHVybiBhLmthKGIpfSkudGhlbihmdW5jdGlvbigpe0VsKGEpfSl9XG5mdW5jdGlvbiB2bChhLGIpe1UoYSkmJihMayhVKGEpLGEuR2EpLEUoVShhKSxcInRva2VuQ2hhbmdlZFwiLGEucGEpLEUoVShhKSxcInVzZXJEZWxldGVkXCIsYS5xYSksRShVKGEpLFwidXNlckludmFsaWRhdGVkXCIsYS5yYSksS2soVShhKSkpO2ImJihiLk4ucHVzaChhLkdhKSxjZChiLFwidG9rZW5DaGFuZ2VkXCIsYS5wYSksY2QoYixcInVzZXJEZWxldGVkXCIsYS5xYSksY2QoYixcInVzZXJJbnZhbGlkYXRlZFwiLGEucmEpLDA8YS5vJiZKayhiKSk7TShhLFwiY3VycmVudFVzZXJcIixiKTtiJiYoYi5uYShhLiQoKSksR2soYixhKSxGayhiLGEuQSksSGsoYixhKSl9aC5oYj1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj10aGlzLmkudGhlbihmdW5jdGlvbigpe2lmKCFVKGEpKXJldHVybiBBKCk7dmwoYSxudWxsKTtyZXR1cm4gc2woYS5oKS50aGVuKGZ1bmN0aW9uKCl7RWwoYSl9KX0pO3JldHVybiBUKHRoaXMsYil9O1xuZnVuY3Rpb24gRmwoYSl7dmFyIGI9a2woYS5HLFMoYSkub3B0aW9ucy5hdXRoRG9tYWluKS50aGVuKGZ1bmN0aW9uKGIpe2lmKGEudz1iKWIuY2E9YS5HO3JldHVybiBmbChhLkcpfSk7cmV0dXJuIFQoYSxiKX1mdW5jdGlvbiB3bChhKXt2YXIgYj1TKGEpLm9wdGlvbnMuYXV0aERvbWFpbixjPUZsKGEpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdGwoYS5oLGIpfSkudGhlbihmdW5jdGlvbihiKXtyZXR1cm4gYj8oYi5jYT1hLkcsYS53JiYoYS53Llp8fG51bGwpPT0oYi5afHxudWxsKT9iOmIucmVsb2FkKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBybChhLmgsYikudGhlbihmdW5jdGlvbigpe3JldHVybiBifSl9KS5zKGZ1bmN0aW9uKGMpe3JldHVyblwiYXV0aC9uZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCI9PWMuY29kZT9iOnNsKGEuaCl9KSk6bnVsbH0pLnRoZW4oZnVuY3Rpb24oYil7dmwoYSxifHxudWxsKX0pO3JldHVybiBUKGEsYyl9XG5mdW5jdGlvbiB4bChhKXtyZXR1cm4gYS5VLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gYS5hYSgpfSkucyhmdW5jdGlvbigpe30pLnRoZW4oZnVuY3Rpb24oKXtpZighYS5sKXJldHVybiBhLmhhKCl9KS5zKGZ1bmN0aW9uKCl7fSkudGhlbihmdW5jdGlvbigpe2lmKCFhLmwpe2EuVz0hMDt2YXIgYj1hLmg7dmooYi5iLHlqKFwibG9jYWxcIiksYi5hLGEuaGEpfX0pfVxuaC55Yz1mdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuIHRsKHRoaXMuaCxTKHRoaXMpLm9wdGlvbnMuYXV0aERvbWFpbikudGhlbihmdW5jdGlvbihiKXtpZighYS5sKXt2YXIgYztpZihjPVUoYSkmJmIpe2M9VShhKS51aWQ7dmFyIGQ9Yi51aWQ7Yz12b2lkIDA9PT1jfHxudWxsPT09Y3x8XCJcIj09PWN8fHZvaWQgMD09PWR8fG51bGw9PT1kfHxcIlwiPT09ZD8hMTpjPT1kfWlmKGMpcmV0dXJuIFVrKFUoYSksYiksVShhKS5GKCk7aWYoVShhKXx8Yil2bChhLGIpLGImJihOayhiKSxiLmNhPWEuRyksYS5hJiZhLmEuc3Vic2NyaWJlKGEpLEVsKGEpfX0pfTtoLmthPWZ1bmN0aW9uKGEpe3JldHVybiBybCh0aGlzLmgsYSl9O2guVGI9ZnVuY3Rpb24oKXtFbCh0aGlzKTt0aGlzLmthKFUodGhpcykpfTtoLlpiPWZ1bmN0aW9uKCl7dGhpcy5oYigpfTtoLiRiPWZ1bmN0aW9uKCl7dGhpcy5oYigpfTtcbmZ1bmN0aW9uIEdsKGEsYil7dmFyIGM9bnVsbCxkPW51bGw7cmV0dXJuIFQoYSxiLnRoZW4oZnVuY3Rpb24oYil7Yz11aChiKTtkPU1nKGIpO3JldHVybiBEbChhLGIpfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBoZyh7dXNlcjpVKGEpLGNyZWRlbnRpYWw6YyxhZGRpdGlvbmFsVXNlckluZm86ZCxvcGVyYXRpb25UeXBlOlwic2lnbkluXCJ9KX0pKX1oLmFjPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7dGhpcy5hZGRBdXRoVG9rZW5MaXN0ZW5lcihmdW5jdGlvbigpe2EubmV4dChVKGIpKX0pfTtoLmJjPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7SGwodGhpcyxmdW5jdGlvbigpe2EubmV4dChVKGIpKX0pfTtoLmljPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzO3RoaXMuVyYmZmlyZWJhc2UuUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe3AoYSk/YShVKGQpKTpwKGEubmV4dCkmJmEubmV4dChVKGQpKX0pO3JldHVybiB0aGlzLktiKGEsYixjKX07XG5oLmhjPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzO3RoaXMuVyYmZmlyZWJhc2UuUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe2QuUj1kLmdldFVpZCgpO3AoYSk/YShVKGQpKTpwKGEubmV4dCkmJmEubmV4dChVKGQpKX0pO3JldHVybiB0aGlzLkxiKGEsYixjKX07aC5WYj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9dGhpcy5pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gVShiKT9VKGIpLkYoYSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm57YWNjZXNzVG9rZW46YX19KTpudWxsfSk7cmV0dXJuIFQodGhpcyxjKX07aC50Yz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5FYihhKS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBhLnVzZXJ9KX07XG5oLkViPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7cmV0dXJuIHRoaXMuaS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIEdsKGIsUShiLmMsdmkse3Rva2VuOmF9KSl9KS50aGVuKGZ1bmN0aW9uKGEpe3ZhciBjPWEudXNlcjtUayhjLFwiaXNBbm9ueW1vdXNcIiwhMSk7Yi5rYShjKTtyZXR1cm4gYX0pfTtoLkZiPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztyZXR1cm4gdGhpcy5pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gR2woYyxRKGMuYyxraCx7ZW1haWw6YSxwYXNzd29yZDpifSkpfSl9O2gudWM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5GYihhLGIpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGEudXNlcn0pfTtoLk9iPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucWIoYSxiKS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBhLnVzZXJ9KX07XG5oLnFiPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztyZXR1cm4gdGhpcy5pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gR2woYyxRKGMuYyxyaSx7ZW1haWw6YSxwYXNzd29yZDpifSkpfSl9O2guc2M9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZmIoYSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gYS51c2VyfSl9O2guZmI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztyZXR1cm4gdGhpcy5pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gR2woYixhLndhKGIuYykpfSl9O2guZ2I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5HYigpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGEudXNlcn0pfTtcbmguR2I9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybiB0aGlzLmkudGhlbihmdW5jdGlvbigpe3ZhciBiPVUoYSk7aWYoYiYmYi5pc0Fub255bW91cyl7dmFyIGM9aGcoe3Byb3ZpZGVySWQ6bnVsbCxpc05ld1VzZXI6ITF9KTtyZXR1cm4gaGcoe3VzZXI6YixjcmVkZW50aWFsOm51bGwsYWRkaXRpb25hbFVzZXJJbmZvOmMsb3BlcmF0aW9uVHlwZTpcInNpZ25JblwifSl9cmV0dXJuIEdsKGEsYS5jLmdiKCkpLnRoZW4oZnVuY3Rpb24oYil7dmFyIGM9Yi51c2VyO1RrKGMsXCJpc0Fub255bW91c1wiLCEwKTthLmthKGMpO3JldHVybiBifSl9KX07ZnVuY3Rpb24gUyhhKXtyZXR1cm4gYS5hcHB9ZnVuY3Rpb24gVShhKXtyZXR1cm4gYS5jdXJyZW50VXNlcn1oLmdldFVpZD1mdW5jdGlvbigpe3JldHVybiBVKHRoaXMpJiZVKHRoaXMpLnVpZHx8bnVsbH07ZnVuY3Rpb24gSWwoYSl7cmV0dXJuIFUoYSkmJlUoYSkuX2xhdHx8bnVsbH1cbmZ1bmN0aW9uIEVsKGEpe2lmKGEuVyl7Zm9yKHZhciBiPTA7YjxhLm0ubGVuZ3RoO2IrKylpZihhLm1bYl0pYS5tW2JdKElsKGEpKTtpZihhLlIhPT1hLmdldFVpZCgpJiZhLkkubGVuZ3RoKWZvcihhLlI9YS5nZXRVaWQoKSxiPTA7YjxhLkkubGVuZ3RoO2IrKylpZihhLklbYl0pYS5JW2JdKElsKGEpKX19aC5NYj1mdW5jdGlvbihhKXt0aGlzLmFkZEF1dGhUb2tlbkxpc3RlbmVyKGEpO3RoaXMubysrOzA8dGhpcy5vJiZVKHRoaXMpJiZKayhVKHRoaXMpKX07aC5xYz1mdW5jdGlvbihhKXt2YXIgYj10aGlzO3codGhpcy5tLGZ1bmN0aW9uKGMpe2M9PWEmJmIuby0tfSk7MD50aGlzLm8mJih0aGlzLm89MCk7MD09dGhpcy5vJiZVKHRoaXMpJiZLayhVKHRoaXMpKTt0aGlzLnJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyKGEpfTtcbmguYWRkQXV0aFRva2VuTGlzdGVuZXI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczt0aGlzLm0ucHVzaChhKTtUKHRoaXMsdGhpcy5pLnRoZW4oZnVuY3Rpb24oKXtiLmx8fEhhKGIubSxhKSYmYShJbChiKSl9KSl9O2gucmVtb3ZlQXV0aFRva2VuTGlzdGVuZXI9ZnVuY3Rpb24oYSl7SmEodGhpcy5tLGZ1bmN0aW9uKGIpe3JldHVybiBiPT1hfSl9O2Z1bmN0aW9uIEhsKGEsYil7YS5JLnB1c2goYik7VChhLGEuaS50aGVuKGZ1bmN0aW9uKCl7IWEubCYmSGEoYS5JLGIpJiZhLlIhPT1hLmdldFVpZCgpJiYoYS5SPWEuZ2V0VWlkKCksYihJbChhKSkpfSkpfWguZGVsZXRlPWZ1bmN0aW9uKCl7dGhpcy5sPSEwO2Zvcih2YXIgYT0wO2E8dGhpcy5OLmxlbmd0aDthKyspdGhpcy5OW2FdLmNhbmNlbChcImFwcC1kZWxldGVkXCIpO3RoaXMuTj1bXTt0aGlzLmgmJihhPXRoaXMuaCx4aihhLmIsYS5hLHRoaXMuaGEpKTt0aGlzLmEmJnRoaXMuYS51bnN1YnNjcmliZSh0aGlzKTtyZXR1cm4gZmlyZWJhc2UuUHJvbWlzZS5yZXNvbHZlKCl9O1xuZnVuY3Rpb24gVChhLGIpe2EuTi5wdXNoKGIpO1FiKGIsZnVuY3Rpb24oKXtJYShhLk4sYil9KTtyZXR1cm4gYn1oLlJiPWZ1bmN0aW9uKGEpe3JldHVybiBUKHRoaXMsVGgodGhpcy5jLGEpKX07aC5GYz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5JYShhKS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBhLmRhdGEuZW1haWx9KX07aC5UYT1mdW5jdGlvbihhLGIpe3JldHVybiBUKHRoaXMsdGhpcy5jLlRhKGEsYikudGhlbihmdW5jdGlvbigpe30pKX07aC5JYT1mdW5jdGlvbihhKXtyZXR1cm4gVCh0aGlzLHRoaXMuYy5JYShhKS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBuZXcgbGcoYSl9KSl9O2guU2E9ZnVuY3Rpb24oYSl7cmV0dXJuIFQodGhpcyx0aGlzLmMuU2EoYSkudGhlbihmdW5jdGlvbigpe30pKX07XG5oLmNiPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztyZXR1cm4gVCh0aGlzLEEoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBifHxTYShiKT97fTpGZyhuZXcgd2coYikpfSkudGhlbihmdW5jdGlvbihiKXtyZXR1cm4gYy5jLmNiKGEsYil9KS50aGVuKGZ1bmN0aW9uKCl7fSkpfTtoLnZjPWZ1bmN0aW9uKGEsYil7cmV0dXJuIFQodGhpcyxvayh0aGlzLGEsYixyKHRoaXMuZmIsdGhpcykpKX07ZnVuY3Rpb24gSmwoYSxiLGMsZCl7YTp7Yz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjKTt2YXIgZT0wO2Zvcih2YXIgZj0hMSxnPTA7ZzxiLmxlbmd0aDtnKyspaWYoYltnXS5vcHRpb25hbClmPSEwO2Vsc2V7aWYoZil0aHJvdyBuZXcgTihcImludGVybmFsLWVycm9yXCIsXCJBcmd1bWVudCB2YWxpZGF0b3IgZW5jb3VudGVyZWQgYSByZXF1aXJlZCBhcmd1bWVudCBhZnRlciBhbiBvcHRpb25hbCBhcmd1bWVudC5cIik7ZSsrfWY9Yi5sZW5ndGg7aWYoYy5sZW5ndGg8ZXx8ZjxjLmxlbmd0aClkPVwiRXhwZWN0ZWQgXCIrKGU9PWY/MT09ZT9cIjEgYXJndW1lbnRcIjplK1wiIGFyZ3VtZW50c1wiOmUrXCItXCIrZitcIiBhcmd1bWVudHNcIikrXCIgYnV0IGdvdCBcIitjLmxlbmd0aCtcIi5cIjtlbHNle2ZvcihlPTA7ZTxjLmxlbmd0aDtlKyspaWYoZj1iW2VdLm9wdGlvbmFsJiZ2b2lkIDA9PT1jW2VdLCFiW2VdLk0oY1tlXSkmJiFmKXtiPWJbZV07aWYoMD5lfHxlPj1LbC5sZW5ndGgpdGhyb3cgbmV3IE4oXCJpbnRlcm5hbC1lcnJvclwiLFxuXCJBcmd1bWVudCB2YWxpZGF0b3IgcmVjZWl2ZWQgYW4gdW5zdXBwb3J0ZWQgbnVtYmVyIG9mIGFyZ3VtZW50cy5cIik7Yz1LbFtlXTtkPShkP1wiXCI6YytcIiBhcmd1bWVudCBcIikrKGIubmFtZT8nXCInK2IubmFtZSsnXCIgJzpcIlwiKStcIm11c3QgYmUgXCIrYi5LK1wiLlwiO2JyZWFrIGF9ZD1udWxsfX1pZihkKXRocm93IG5ldyBOKFwiYXJndW1lbnQtZXJyb3JcIixhK1wiIGZhaWxlZDogXCIrZCk7fXZhciBLbD1cIkZpcnN0IFNlY29uZCBUaGlyZCBGb3VydGggRmlmdGggU2l4dGggU2V2ZW50aCBFaWdodGggTmludGhcIi5zcGxpdChcIiBcIik7ZnVuY3Rpb24gVihhLGIpe3JldHVybntuYW1lOmF8fFwiXCIsSzpcImEgdmFsaWQgc3RyaW5nXCIsb3B0aW9uYWw6ISFiLE06bX19ZnVuY3Rpb24gTGwoKXtyZXR1cm57bmFtZTpcIm9wdF9mb3JjZVJlZnJlc2hcIixLOlwiYSBib29sZWFuXCIsb3B0aW9uYWw6ITAsTTpiYX19XG5mdW5jdGlvbiBXKGEsYil7cmV0dXJue25hbWU6YXx8XCJcIixLOlwiYSB2YWxpZCBvYmplY3RcIixvcHRpb25hbDohIWIsTTpxfX1mdW5jdGlvbiBNbChhLGIpe3JldHVybntuYW1lOmF8fFwiXCIsSzpcImEgZnVuY3Rpb25cIixvcHRpb25hbDohIWIsTTpwfX1mdW5jdGlvbiBObChhLGIpe3JldHVybntuYW1lOmF8fFwiXCIsSzpcIm51bGxcIixvcHRpb25hbDohIWIsTTplYX19ZnVuY3Rpb24gT2woKXtyZXR1cm57bmFtZTpcIlwiLEs6XCJhbiBIVE1MIGVsZW1lbnRcIixvcHRpb25hbDohMSxNOmZ1bmN0aW9uKGEpe3JldHVybiEhKGEmJmEgaW5zdGFuY2VvZiBFbGVtZW50KX19fWZ1bmN0aW9uIFBsKCl7cmV0dXJue25hbWU6XCJhdXRoXCIsSzpcImFuIGluc3RhbmNlIG9mIEZpcmViYXNlIEF1dGhcIixvcHRpb25hbDohMCxNOmZ1bmN0aW9uKGEpe3JldHVybiEhKGEmJmEgaW5zdGFuY2VvZiB1bCl9fX1cbmZ1bmN0aW9uIFFsKCl7cmV0dXJue25hbWU6XCJhcHBcIixLOlwiYW4gaW5zdGFuY2Ugb2YgRmlyZWJhc2UgQXBwXCIsb3B0aW9uYWw6ITAsTTpmdW5jdGlvbihhKXtyZXR1cm4hIShhJiZhIGluc3RhbmNlb2YgZmlyZWJhc2UuYXBwLkFwcCl9fX1mdW5jdGlvbiBSbChhKXtyZXR1cm57bmFtZTphP2ErXCJDcmVkZW50aWFsXCI6XCJjcmVkZW50aWFsXCIsSzphP1wiYSB2YWxpZCBcIithK1wiIGNyZWRlbnRpYWxcIjpcImEgdmFsaWQgY3JlZGVudGlhbFwiLG9wdGlvbmFsOiExLE06ZnVuY3Rpb24oYil7aWYoIWIpcmV0dXJuITE7dmFyIGM9IWF8fGIucHJvdmlkZXJJZD09PWE7cmV0dXJuISghYi53YXx8IWMpfX19XG5mdW5jdGlvbiBTbCgpe3JldHVybntuYW1lOlwiYXV0aFByb3ZpZGVyXCIsSzpcImEgdmFsaWQgQXV0aCBwcm92aWRlclwiLG9wdGlvbmFsOiExLE06ZnVuY3Rpb24oYSl7cmV0dXJuISEoYSYmYS5wcm92aWRlcklkJiZhLmhhc093blByb3BlcnR5JiZhLmhhc093blByb3BlcnR5KFwiaXNPQXV0aFByb3ZpZGVyXCIpKX19fWZ1bmN0aW9uIFRsKCl7cmV0dXJue25hbWU6XCJhcHBsaWNhdGlvblZlcmlmaWVyXCIsSzpcImFuIGltcGxlbWVudGF0aW9uIG9mIGZpcmViYXNlLmF1dGguQXBwbGljYXRpb25WZXJpZmllclwiLG9wdGlvbmFsOiExLE06ZnVuY3Rpb24oYSl7cmV0dXJuISEoYSYmbShhLnR5cGUpJiZwKGEudmVyaWZ5KSl9fX1mdW5jdGlvbiBYKGEsYixjLGQpe3JldHVybntuYW1lOmN8fFwiXCIsSzphLksrXCIgb3IgXCIrYi5LLG9wdGlvbmFsOiEhZCxNOmZ1bmN0aW9uKGMpe3JldHVybiBhLk0oYyl8fGIuTShjKX19fTtmdW5jdGlvbiBVbChhLGIsYyxkLGUsZil7TSh0aGlzLFwidHlwZVwiLFwicmVjYXB0Y2hhXCIpO3RoaXMuYj10aGlzLmM9bnVsbDt0aGlzLm09ITE7dGhpcy5sPWI7dGhpcy5hPWN8fHt0aGVtZTpcImxpZ2h0XCIsdHlwZTpcImltYWdlXCJ9O3RoaXMuZz1bXTtpZih0aGlzLmFbVmxdKXRocm93IG5ldyBOKFwiYXJndW1lbnQtZXJyb3JcIixcInNpdGVrZXkgc2hvdWxkIG5vdCBiZSBwcm92aWRlZCBmb3IgcmVDQVBUQ0hBIGFzIG9uZSBpcyBhdXRvbWF0aWNhbGx5IHByb3Zpc2lvbmVkIGZvciB0aGUgY3VycmVudCBwcm9qZWN0LlwiKTt0aGlzLmg9XCJpbnZpc2libGVcIj09PXRoaXMuYVtXbF07aWYoIXdjKGIpfHwhdGhpcy5oJiZ3YyhiKS5oYXNDaGlsZE5vZGVzKCkpdGhyb3cgbmV3IE4oXCJhcmd1bWVudC1lcnJvclwiLFwicmVDQVBUQ0hBIGNvbnRhaW5lciBpcyBlaXRoZXIgbm90IGZvdW5kIG9yIGFscmVhZHkgY29udGFpbnMgaW5uZXIgZWxlbWVudHMhXCIpO3RoaXMudT1uZXcgQ2goYSxmfHxudWxsLGV8fG51bGwpO1xudGhpcy5vPWR8fGZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9O3ZhciBnPXRoaXM7dGhpcy5pPVtdO3ZhciBsPXRoaXMuYVtYbF07dGhpcy5hW1hsXT1mdW5jdGlvbihhKXtZbChnLGEpO2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBsKWwoYSk7ZWxzZSBpZihcInN0cmluZ1wiPT09dHlwZW9mIGwpe3ZhciBiPUwobCxrKTtcImZ1bmN0aW9uXCI9PT10eXBlb2YgYiYmYihhKX19O3ZhciBuPXRoaXMuYVtabF07dGhpcy5hW1psXT1mdW5jdGlvbigpe1lsKGcsbnVsbCk7aWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIG4pbigpO2Vsc2UgaWYoXCJzdHJpbmdcIj09PXR5cGVvZiBuKXt2YXIgYT1MKG4sayk7XCJmdW5jdGlvblwiPT09dHlwZW9mIGEmJmEoKX19fXZhciBYbD1cImNhbGxiYWNrXCIsWmw9XCJleHBpcmVkLWNhbGxiYWNrXCIsVmw9XCJzaXRla2V5XCIsV2w9XCJzaXplXCI7ZnVuY3Rpb24gWWwoYSxiKXtmb3IodmFyIGM9MDtjPGEuaS5sZW5ndGg7YysrKXRyeXthLmlbY10oYil9Y2F0Y2goZCl7fX1cbmZ1bmN0aW9uICRsKGEsYil7SmEoYS5pLGZ1bmN0aW9uKGEpe3JldHVybiBhPT1ifSl9ZnVuY3Rpb24gYW0oYSxiKXthLmcucHVzaChiKTtRYihiLGZ1bmN0aW9uKCl7SWEoYS5nLGIpfSk7cmV0dXJuIGJ9aD1VbC5wcm90b3R5cGU7XG5oLnhhPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztyZXR1cm4gdGhpcy5jP3RoaXMuYzp0aGlzLmM9YW0odGhpcyxBKCkudGhlbihmdW5jdGlvbigpe2lmKFNmKCkpcmV0dXJuIEhmKCk7dGhyb3cgbmV3IE4oXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIsXCJSZWNhcHRjaGFWZXJpZmllciBpcyBvbmx5IHN1cHBvcnRlZCBpbiBhIGJyb3dzZXIgSFRUUC9IVFRQUyBlbnZpcm9ubWVudC5cIik7fSkudGhlbihmdW5jdGlvbigpe3JldHVybiBibShjbSgpLGEubygpKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gUShhLnUsdWkse30pfSkudGhlbihmdW5jdGlvbihiKXthLmFbVmxdPWIucmVjYXB0Y2hhU2l0ZUtleX0pLnMoZnVuY3Rpb24oYil7YS5jPW51bGw7dGhyb3cgYjt9KSl9O1xuaC5yZW5kZXI9ZnVuY3Rpb24oKXtkbSh0aGlzKTt2YXIgYT10aGlzO3JldHVybiBhbSh0aGlzLHRoaXMueGEoKS50aGVuKGZ1bmN0aW9uKCl7aWYobnVsbD09PWEuYil7dmFyIGI9YS5sO2lmKCFhLmgpe3ZhciBjPXdjKGIpO2I9emMoXCJESVZcIik7Yy5hcHBlbmRDaGlsZChiKX1hLmI9Z3JlY2FwdGNoYS5yZW5kZXIoYixhLmEpfXJldHVybiBhLmJ9KSl9O2gudmVyaWZ5PWZ1bmN0aW9uKCl7ZG0odGhpcyk7dmFyIGE9dGhpcztyZXR1cm4gYW0odGhpcyx0aGlzLnJlbmRlcigpLnRoZW4oZnVuY3Rpb24oYil7cmV0dXJuIG5ldyB6KGZ1bmN0aW9uKGMpe3ZhciBkPWdyZWNhcHRjaGEuZ2V0UmVzcG9uc2UoYik7aWYoZCljKGQpO2Vsc2V7dmFyIGU9ZnVuY3Rpb24oYil7YiYmKCRsKGEsZSksYyhiKSl9O2EuaS5wdXNoKGUpO2EuaCYmZ3JlY2FwdGNoYS5leGVjdXRlKGEuYil9fSl9KSl9O2gucmVzZXQ9ZnVuY3Rpb24oKXtkbSh0aGlzKTtudWxsIT09dGhpcy5iJiZncmVjYXB0Y2hhLnJlc2V0KHRoaXMuYil9O1xuZnVuY3Rpb24gZG0oYSl7aWYoYS5tKXRocm93IG5ldyBOKFwiaW50ZXJuYWwtZXJyb3JcIixcIlJlY2FwdGNoYVZlcmlmaWVyIGluc3RhbmNlIGhhcyBiZWVuIGRlc3Ryb3llZC5cIik7fWguY2xlYXI9ZnVuY3Rpb24oKXtkbSh0aGlzKTt0aGlzLm09ITA7Y20oKS5iLS07Zm9yKHZhciBhPTA7YTx0aGlzLmcubGVuZ3RoO2ErKyl0aGlzLmdbYV0uY2FuY2VsKFwiUmVjYXB0Y2hhVmVyaWZpZXIgaW5zdGFuY2UgaGFzIGJlZW4gZGVzdHJveWVkLlwiKTtpZighdGhpcy5oKXthPXdjKHRoaXMubCk7Zm9yKHZhciBiO2I9YS5maXJzdENoaWxkOylhLnJlbW92ZUNoaWxkKGIpfX07dmFyIGVtPWRjKFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvYXBpLmpzP29ubG9hZD0le29ubG9hZH0mcmVuZGVyPWV4cGxpY2l0JmhsPSV7aGx9XCIpO1xuZnVuY3Rpb24gZm0oKXt0aGlzLmI9ay5ncmVjYXB0Y2hhP0luZmluaXR5OjA7dGhpcy5jPW51bGw7dGhpcy5hPVwiX19yY2JcIitNYXRoLmZsb29yKDFFNipNYXRoLnJhbmRvbSgpKS50b1N0cmluZygpfVxuZnVuY3Rpb24gYm0oYSxiKXtyZXR1cm4gbmV3IHooZnVuY3Rpb24oYyxkKXtpZihaZigpKWlmKCFrLmdyZWNhcHRjaGF8fGIhPT1hLmMmJiFhLmIpe2tbYS5hXT1mdW5jdGlvbigpe2lmKGsuZ3JlY2FwdGNoYSl7YS5jPWI7dmFyIGU9ay5ncmVjYXB0Y2hhLnJlbmRlcjtrLmdyZWNhcHRjaGEucmVuZGVyPWZ1bmN0aW9uKGIsYyl7Yj1lKGIsYyk7YS5iKys7cmV0dXJuIGJ9O2MoKX1lbHNlIGQobmV3IE4oXCJpbnRlcm5hbC1lcnJvclwiKSk7ZGVsZXRlIGtbYS5hXX07dmFyIGU9aGMoZW0se29ubG9hZDphLmEsaGw6Ynx8XCJcIn0pO0Eoa2YoZSkpLnMoZnVuY3Rpb24oKXtkKG5ldyBOKFwiaW50ZXJuYWwtZXJyb3JcIixcIlVuYWJsZSB0byBsb2FkIGV4dGVybmFsIHJlQ0FQVENIQSBkZXBlbmRlbmNpZXMhXCIpKX0pfWVsc2UgYygpO2Vsc2UgZChuZXcgTihcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIikpfSl9dmFyIGdtPW51bGw7XG5mdW5jdGlvbiBjbSgpe2dtfHwoZ209bmV3IGZtKTtyZXR1cm4gZ219ZnVuY3Rpb24gaG0oYSxiLGMpe3RyeXt0aGlzLmY9Y3x8ZmlyZWJhc2UuYXBwKCl9Y2F0Y2goZil7dGhyb3cgbmV3IE4oXCJhcmd1bWVudC1lcnJvclwiLFwiTm8gZmlyZWJhc2UuYXBwLkFwcCBpbnN0YW5jZSBpcyBjdXJyZW50bHkgaW5pdGlhbGl6ZWQuXCIpO31pZih0aGlzLmYub3B0aW9ucyYmdGhpcy5mLm9wdGlvbnMuYXBpS2V5KWM9dGhpcy5mLm9wdGlvbnMuYXBpS2V5O2Vsc2UgdGhyb3cgbmV3IE4oXCJpbnZhbGlkLWFwaS1rZXlcIik7dmFyIGQ9dGhpcyxlPW51bGw7dHJ5e2U9dGhpcy5mLmF1dGgoKS5LYSgpfWNhdGNoKGYpe31lPWZpcmViYXNlLlNES19WRVJTSU9OP09mKGZpcmViYXNlLlNES19WRVJTSU9OLGUpOm51bGw7VWwuY2FsbCh0aGlzLGMsYSxiLGZ1bmN0aW9uKCl7dHJ5e3ZhciBhPWQuZi5hdXRoKCkuJCgpfWNhdGNoKGcpe2E9bnVsbH1yZXR1cm4gYX0sZSx4aSh5aSkpfXQoaG0sVWwpO2Z1bmN0aW9uIFkoYSxiKXtmb3IodmFyIGMgaW4gYil7dmFyIGQ9YltjXS5uYW1lO2FbZF09aW0oZCxhW2NdLGJbY10uail9fWZ1bmN0aW9uIFooYSxiLGMsZCl7YVtiXT1pbShiLGMsZCl9ZnVuY3Rpb24gaW0oYSxiLGMpe2Z1bmN0aW9uIGQoKXt2YXIgYT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO0psKGUsYyxhKTtyZXR1cm4gYi5hcHBseSh0aGlzLGEpfWlmKCFjKXJldHVybiBiO3ZhciBlPWptKGEpLGY7Zm9yKGYgaW4gYilkW2ZdPWJbZl07Zm9yKGYgaW4gYi5wcm90b3R5cGUpZC5wcm90b3R5cGVbZl09Yi5wcm90b3R5cGVbZl07cmV0dXJuIGR9ZnVuY3Rpb24gam0oYSl7YT1hLnNwbGl0KFwiLlwiKTtyZXR1cm4gYVthLmxlbmd0aC0xXX07WSh1bC5wcm90b3R5cGUse1NhOntuYW1lOlwiYXBwbHlBY3Rpb25Db2RlXCIsajpbVihcImNvZGVcIildfSxJYTp7bmFtZTpcImNoZWNrQWN0aW9uQ29kZVwiLGo6W1YoXCJjb2RlXCIpXX0sVGE6e25hbWU6XCJjb25maXJtUGFzc3dvcmRSZXNldFwiLGo6W1YoXCJjb2RlXCIpLFYoXCJuZXdQYXNzd29yZFwiKV19LE9iOntuYW1lOlwiY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkXCIsajpbVihcImVtYWlsXCIpLFYoXCJwYXNzd29yZFwiKV19LHFiOntuYW1lOlwiY3JlYXRlVXNlckFuZFJldHJpZXZlRGF0YVdpdGhFbWFpbEFuZFBhc3N3b3JkXCIsajpbVihcImVtYWlsXCIpLFYoXCJwYXNzd29yZFwiKV19LFJiOntuYW1lOlwiZmV0Y2hQcm92aWRlcnNGb3JFbWFpbFwiLGo6W1YoXCJlbWFpbFwiKV19LGFhOntuYW1lOlwiZ2V0UmVkaXJlY3RSZXN1bHRcIixqOltdfSxoYzp7bmFtZTpcIm9uQXV0aFN0YXRlQ2hhbmdlZFwiLGo6W1goVygpLE1sKCksXCJuZXh0T3JPYnNlcnZlclwiKSxNbChcIm9wdF9lcnJvclwiLCEwKSxNbChcIm9wdF9jb21wbGV0ZWRcIixcbiEwKV19LGljOntuYW1lOlwib25JZFRva2VuQ2hhbmdlZFwiLGo6W1goVygpLE1sKCksXCJuZXh0T3JPYnNlcnZlclwiKSxNbChcIm9wdF9lcnJvclwiLCEwKSxNbChcIm9wdF9jb21wbGV0ZWRcIiwhMCldfSxjYjp7bmFtZTpcInNlbmRQYXNzd29yZFJlc2V0RW1haWxcIixqOltWKFwiZW1haWxcIiksWChXKFwib3B0X2FjdGlvbkNvZGVTZXR0aW5nc1wiLCEwKSxObChudWxsLCEwKSxcIm9wdF9hY3Rpb25Db2RlU2V0dGluZ3NcIiwhMCldfSxlYjp7bmFtZTpcInNldFBlcnNpc3RlbmNlXCIsajpbVihcInBlcnNpc3RlbmNlXCIpXX0sZmI6e25hbWU6XCJzaWduSW5BbmRSZXRyaWV2ZURhdGFXaXRoQ3JlZGVudGlhbFwiLGo6W1JsKCldfSxnYjp7bmFtZTpcInNpZ25JbkFub255bW91c2x5XCIsajpbXX0sR2I6e25hbWU6XCJzaWduSW5Bbm9ueW1vdXNseUFuZFJldHJpZXZlRGF0YVwiLGo6W119LHNjOntuYW1lOlwic2lnbkluV2l0aENyZWRlbnRpYWxcIixqOltSbCgpXX0sdGM6e25hbWU6XCJzaWduSW5XaXRoQ3VzdG9tVG9rZW5cIixqOltWKFwidG9rZW5cIildfSxcbkViOntuYW1lOlwic2lnbkluQW5kUmV0cmlldmVEYXRhV2l0aEN1c3RvbVRva2VuXCIsajpbVihcInRva2VuXCIpXX0sdWM6e25hbWU6XCJzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZFwiLGo6W1YoXCJlbWFpbFwiKSxWKFwicGFzc3dvcmRcIildfSxGYjp7bmFtZTpcInNpZ25JbkFuZFJldHJpZXZlRGF0YVdpdGhFbWFpbEFuZFBhc3N3b3JkXCIsajpbVihcImVtYWlsXCIpLFYoXCJwYXNzd29yZFwiKV19LHZjOntuYW1lOlwic2lnbkluV2l0aFBob25lTnVtYmVyXCIsajpbVihcInBob25lTnVtYmVyXCIpLFRsKCldfSx3Yzp7bmFtZTpcInNpZ25JbldpdGhQb3B1cFwiLGo6W1NsKCldfSx4Yzp7bmFtZTpcInNpZ25JbldpdGhSZWRpcmVjdFwiLGo6W1NsKCldfSxoYjp7bmFtZTpcInNpZ25PdXRcIixqOltdfSx0b0pTT046e25hbWU6XCJ0b0pTT05cIixqOltWKG51bGwsITApXX0sRWM6e25hbWU6XCJ1c2VEZXZpY2VMYW5ndWFnZVwiLGo6W119LEZjOntuYW1lOlwidmVyaWZ5UGFzc3dvcmRSZXNldENvZGVcIixqOltWKFwiY29kZVwiKV19fSk7XG4oZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMgaW4gYil7dmFyIGQ9YltjXS5uYW1lO2lmKGQhPT1jKXt2YXIgZT1iW2NdLk5iO09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGQse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzW2NdfSxzZXQ6ZnVuY3Rpb24oYSl7SmwoZCxbZV0sW2FdLCEwKTt0aGlzW2NdPWF9LGVudW1lcmFibGU6ITB9KX19fSkodWwucHJvdG90eXBlLHtsYzp7bmFtZTpcImxhbmd1YWdlQ29kZVwiLE5iOlgoVigpLE5sKCksXCJsYW5ndWFnZUNvZGVcIil9fSk7dWwuUGVyc2lzdGVuY2U9bmo7dWwuUGVyc2lzdGVuY2UuTE9DQUw9XCJsb2NhbFwiO3VsLlBlcnNpc3RlbmNlLlNFU1NJT049XCJzZXNzaW9uXCI7dWwuUGVyc2lzdGVuY2UuTk9ORT1cIm5vbmVcIjtcblkoQmsucHJvdG90eXBlLHtcImRlbGV0ZVwiOntuYW1lOlwiZGVsZXRlXCIsajpbXX0sRjp7bmFtZTpcImdldElkVG9rZW5cIixqOltMbCgpXX0sZ2V0VG9rZW46e25hbWU6XCJnZXRUb2tlblwiLGo6W0xsKCldfSxYYTp7bmFtZTpcImxpbmtBbmRSZXRyaWV2ZURhdGFXaXRoQ3JlZGVudGlhbFwiLGo6W1JsKCldfSxjYzp7bmFtZTpcImxpbmtXaXRoQ3JlZGVudGlhbFwiLGo6W1JsKCldfSxkYzp7bmFtZTpcImxpbmtXaXRoUGhvbmVOdW1iZXJcIixqOltWKFwicGhvbmVOdW1iZXJcIiksVGwoKV19LGVjOntuYW1lOlwibGlua1dpdGhQb3B1cFwiLGo6W1NsKCldfSxmYzp7bmFtZTpcImxpbmtXaXRoUmVkaXJlY3RcIixqOltTbCgpXX0sWmE6e25hbWU6XCJyZWF1dGhlbnRpY2F0ZUFuZFJldHJpZXZlRGF0YVdpdGhDcmVkZW50aWFsXCIsajpbUmwoKV19LG1jOntuYW1lOlwicmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbFwiLGo6W1JsKCldfSxuYzp7bmFtZTpcInJlYXV0aGVudGljYXRlV2l0aFBob25lTnVtYmVyXCIsajpbVihcInBob25lTnVtYmVyXCIpLFxuVGwoKV19LG9jOntuYW1lOlwicmVhdXRoZW50aWNhdGVXaXRoUG9wdXBcIixqOltTbCgpXX0scGM6e25hbWU6XCJyZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdFwiLGo6W1NsKCldfSxyZWxvYWQ6e25hbWU6XCJyZWxvYWRcIixqOltdfSxiYjp7bmFtZTpcInNlbmRFbWFpbFZlcmlmaWNhdGlvblwiLGo6W1goVyhcIm9wdF9hY3Rpb25Db2RlU2V0dGluZ3NcIiwhMCksTmwobnVsbCwhMCksXCJvcHRfYWN0aW9uQ29kZVNldHRpbmdzXCIsITApXX0sdG9KU09OOntuYW1lOlwidG9KU09OXCIsajpbVihudWxsLCEwKV19LENjOntuYW1lOlwidW5saW5rXCIsajpbVihcInByb3ZpZGVyXCIpXX0sa2I6e25hbWU6XCJ1cGRhdGVFbWFpbFwiLGo6W1YoXCJlbWFpbFwiKV19LGxiOntuYW1lOlwidXBkYXRlUGFzc3dvcmRcIixqOltWKFwicGFzc3dvcmRcIildfSxEYzp7bmFtZTpcInVwZGF0ZVBob25lTnVtYmVyXCIsajpbUmwoXCJwaG9uZVwiKV19LG1iOntuYW1lOlwidXBkYXRlUHJvZmlsZVwiLGo6W1coXCJwcm9maWxlXCIpXX19KTtcblkoei5wcm90b3R5cGUse3M6e25hbWU6XCJjYXRjaFwifSx0aGVuOntuYW1lOlwidGhlblwifX0pO1kobmsucHJvdG90eXBlLHtjb25maXJtOntuYW1lOlwiY29uZmlybVwiLGo6W1YoXCJ2ZXJpZmljYXRpb25Db2RlXCIpXX19KTtaKG1oLFwiY3JlZGVudGlhbFwiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBqaChhLGIpfSxbVihcImVtYWlsXCIpLFYoXCJwYXNzd29yZFwiKV0pO1koYmgucHJvdG90eXBlLHtzYTp7bmFtZTpcImFkZFNjb3BlXCIsajpbVihcInNjb3BlXCIpXX0sQmE6e25hbWU6XCJzZXRDdXN0b21QYXJhbWV0ZXJzXCIsajpbVyhcImN1c3RvbU9BdXRoUGFyYW1ldGVyc1wiKV19fSk7WihiaCxcImNyZWRlbnRpYWxcIixjaCxbWChWKCksVygpLFwidG9rZW5cIildKTtZKGRoLnByb3RvdHlwZSx7c2E6e25hbWU6XCJhZGRTY29wZVwiLGo6W1YoXCJzY29wZVwiKV19LEJhOntuYW1lOlwic2V0Q3VzdG9tUGFyYW1ldGVyc1wiLGo6W1coXCJjdXN0b21PQXV0aFBhcmFtZXRlcnNcIildfX0pO1xuWihkaCxcImNyZWRlbnRpYWxcIixlaCxbWChWKCksVygpLFwidG9rZW5cIildKTtZKGZoLnByb3RvdHlwZSx7c2E6e25hbWU6XCJhZGRTY29wZVwiLGo6W1YoXCJzY29wZVwiKV19LEJhOntuYW1lOlwic2V0Q3VzdG9tUGFyYW1ldGVyc1wiLGo6W1coXCJjdXN0b21PQXV0aFBhcmFtZXRlcnNcIildfX0pO1ooZmgsXCJjcmVkZW50aWFsXCIsZ2gsW1goVigpLFgoVygpLE5sKCkpLFwiaWRUb2tlblwiKSxYKFYoKSxObCgpLFwiYWNjZXNzVG9rZW5cIiwhMCldKTtZKGhoLnByb3RvdHlwZSx7QmE6e25hbWU6XCJzZXRDdXN0b21QYXJhbWV0ZXJzXCIsajpbVyhcImN1c3RvbU9BdXRoUGFyYW1ldGVyc1wiKV19fSk7WihoaCxcImNyZWRlbnRpYWxcIixpaCxbWChWKCksVygpLFwidG9rZW5cIiksVihcInNlY3JldFwiLCEwKV0pO1xuWShQLnByb3RvdHlwZSx7c2E6e25hbWU6XCJhZGRTY29wZVwiLGo6W1YoXCJzY29wZVwiKV19LGNyZWRlbnRpYWw6e25hbWU6XCJjcmVkZW50aWFsXCIsajpbWChWKCksTmwoKSxcImlkVG9rZW5cIiwhMCksWChWKCksTmwoKSxcImFjY2Vzc1Rva2VuXCIsITApXX0sQmE6e25hbWU6XCJzZXRDdXN0b21QYXJhbWV0ZXJzXCIsajpbVyhcImN1c3RvbU9BdXRoUGFyYW1ldGVyc1wiKV19fSk7WihyaCxcImNyZWRlbnRpYWxcIix0aCxbVihcInZlcmlmaWNhdGlvbklkXCIpLFYoXCJ2ZXJpZmljYXRpb25Db2RlXCIpXSk7WShyaC5wcm90b3R5cGUse1FhOntuYW1lOlwidmVyaWZ5UGhvbmVOdW1iZXJcIixqOltWKFwicGhvbmVOdW1iZXJcIiksVGwoKV19fSk7WShOLnByb3RvdHlwZSx7dG9KU09OOntuYW1lOlwidG9KU09OXCIsajpbVihudWxsLCEwKV19fSk7WSh6aC5wcm90b3R5cGUse3RvSlNPTjp7bmFtZTpcInRvSlNPTlwiLGo6W1YobnVsbCwhMCldfX0pO1xuWSh5aC5wcm90b3R5cGUse3RvSlNPTjp7bmFtZTpcInRvSlNPTlwiLGo6W1YobnVsbCwhMCldfX0pO1koaG0ucHJvdG90eXBlLHtjbGVhcjp7bmFtZTpcImNsZWFyXCIsajpbXX0scmVuZGVyOntuYW1lOlwicmVuZGVyXCIsajpbXX0sdmVyaWZ5OntuYW1lOlwidmVyaWZ5XCIsajpbXX19KTtcbihmdW5jdGlvbigpe2lmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgZmlyZWJhc2UmJmZpcmViYXNlLklOVEVSTkFMJiZmaXJlYmFzZS5JTlRFUk5BTC5yZWdpc3RlclNlcnZpY2Upe3ZhciBhPXtBdXRoOnVsLEVycm9yOk59O1ooYSxcIkVtYWlsQXV0aFByb3ZpZGVyXCIsbWgsW10pO1ooYSxcIkZhY2Vib29rQXV0aFByb3ZpZGVyXCIsYmgsW10pO1ooYSxcIkdpdGh1YkF1dGhQcm92aWRlclwiLGRoLFtdKTtaKGEsXCJHb29nbGVBdXRoUHJvdmlkZXJcIixmaCxbXSk7WihhLFwiVHdpdHRlckF1dGhQcm92aWRlclwiLGhoLFtdKTtaKGEsXCJPQXV0aFByb3ZpZGVyXCIsUCxbVihcInByb3ZpZGVySWRcIildKTtaKGEsXCJQaG9uZUF1dGhQcm92aWRlclwiLHJoLFtQbCgpXSk7WihhLFwiUmVjYXB0Y2hhVmVyaWZpZXJcIixobSxbWChWKCksT2woKSxcInJlY2FwdGNoYUNvbnRhaW5lclwiKSxXKFwicmVjYXB0Y2hhUGFyYW1ldGVyc1wiLCEwKSxRbCgpXSk7ZmlyZWJhc2UuSU5URVJOQUwucmVnaXN0ZXJTZXJ2aWNlKFwiYXV0aFwiLGZ1bmN0aW9uKGEsXG5jKXthPW5ldyB1bChhKTtjKHtJTlRFUk5BTDp7Z2V0VWlkOnIoYS5nZXRVaWQsYSksZ2V0VG9rZW46cihhLlZiLGEpLGFkZEF1dGhUb2tlbkxpc3RlbmVyOnIoYS5NYixhKSxyZW1vdmVBdXRoVG9rZW5MaXN0ZW5lcjpyKGEucWMsYSl9fSk7cmV0dXJuIGF9LGEsZnVuY3Rpb24oYSxjKXtpZihcImNyZWF0ZVwiPT09YSl0cnl7Yy5hdXRoKCl9Y2F0Y2goZCl7fX0pO2ZpcmViYXNlLklOVEVSTkFMLmV4dGVuZE5hbWVzcGFjZSh7VXNlcjpCa30pfWVsc2UgdGhyb3cgRXJyb3IoXCJDYW5ub3QgZmluZCB0aGUgZmlyZWJhc2UgbmFtZXNwYWNlOyBiZSBzdXJlIHRvIGluY2x1ZGUgZmlyZWJhc2UtYXBwLmpzIGJlZm9yZSB0aGlzIGxpYnJhcnkuXCIpO30pKCk7XG59KS5jYWxsKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDoge30pO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IGZpcmViYXNlLCB7IEZpcmViYXNlQXBwLCBGaXJlYmFzZU5hbWVzcGFjZSB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgRGF0YWJhc2UgfSBmcm9tICcuL3NyYy9hcGkvRGF0YWJhc2UnO1xuaW1wb3J0IHsgUXVlcnkgfSBmcm9tICcuL3NyYy9hcGkvUXVlcnknO1xuaW1wb3J0IHsgUmVmZXJlbmNlIH0gZnJvbSAnLi9zcmMvYXBpL1JlZmVyZW5jZSc7XG5pbXBvcnQgeyBlbmFibGVMb2dnaW5nIH0gZnJvbSAnLi9zcmMvY29yZS91dGlsL3V0aWwnO1xuaW1wb3J0IHsgUmVwb01hbmFnZXIgfSBmcm9tICcuL3NyYy9jb3JlL1JlcG9NYW5hZ2VyJztcbmltcG9ydCAqIGFzIElOVEVSTkFMIGZyb20gJy4vc3JjL2FwaS9pbnRlcm5hbCc7XG5pbXBvcnQgKiBhcyBURVNUX0FDQ0VTUyBmcm9tICcuL3NyYy9hcGkvdGVzdF9hY2Nlc3MnO1xuaW1wb3J0IHsgaXNOb2RlU2RrIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG5jb25zdCBTZXJ2ZXJWYWx1ZSA9IERhdGFiYXNlLlNlcnZlclZhbHVlO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJEYXRhYmFzZShpbnN0YW5jZTogRmlyZWJhc2VOYW1lc3BhY2UpIHtcbiAgLy8gUmVnaXN0ZXIgdGhlIERhdGFiYXNlIFNlcnZpY2Ugd2l0aCB0aGUgJ2ZpcmViYXNlJyBuYW1lc3BhY2UuXG4gIGNvbnN0IG5hbWVzcGFjZSA9IGluc3RhbmNlLklOVEVSTkFMLnJlZ2lzdGVyU2VydmljZShcbiAgICAnZGF0YWJhc2UnLFxuICAgIChhcHAsIHVudXNlZCwgdXJsKSA9PiBSZXBvTWFuYWdlci5nZXRJbnN0YW5jZSgpLmRhdGFiYXNlRnJvbUFwcChhcHAsIHVybCksXG4gICAgLy8gZmlyZWJhc2UuZGF0YWJhc2UgbmFtZXNwYWNlIHByb3BlcnRpZXNcbiAgICB7XG4gICAgICBSZWZlcmVuY2UsXG4gICAgICBRdWVyeSxcbiAgICAgIERhdGFiYXNlLFxuICAgICAgZW5hYmxlTG9nZ2luZyxcbiAgICAgIElOVEVSTkFMLFxuICAgICAgU2VydmVyVmFsdWUsXG4gICAgICBURVNUX0FDQ0VTU1xuICAgIH0sXG4gICAgbnVsbCxcbiAgICB0cnVlXG4gICk7XG5cbiAgaWYgKGlzTm9kZVNkaygpKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBuYW1lc3BhY2U7XG4gIH1cbn1cblxucmVnaXN0ZXJEYXRhYmFzZShmaXJlYmFzZSk7XG5cbi8vIFR5cGVzIHRvIGV4cG9ydCBmb3IgdGhlIGFkbWluIFNES1xuZXhwb3J0IHsgRGF0YWJhc2UsIFF1ZXJ5LCBSZWZlcmVuY2UsIGVuYWJsZUxvZ2dpbmcsIFNlcnZlclZhbHVlIH07XG5cbmV4cG9ydCB7IERhdGFTbmFwc2hvdCB9IGZyb20gJy4vc3JjL2FwaS9EYXRhU25hcHNob3QnO1xuZXhwb3J0IHsgT25EaXNjb25uZWN0IH0gZnJvbSAnLi9zcmMvYXBpL29uRGlzY29ubmVjdCc7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyB2YWxpZGF0ZUFyZ0NvdW50LCB2YWxpZGF0ZUNhbGxiYWNrIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgdmFsaWRhdGVQYXRoU3RyaW5nIH0gZnJvbSAnLi4vY29yZS91dGlsL3ZhbGlkYXRpb24nO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2NvcmUvdXRpbC9QYXRoJztcbmltcG9ydCB7IFBSSU9SSVRZX0lOREVYIH0gZnJvbSAnLi4vY29yZS9zbmFwL2luZGV4ZXMvUHJpb3JpdHlJbmRleCc7XG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vY29yZS9zbmFwL05vZGUnO1xuaW1wb3J0IHsgUmVmZXJlbmNlIH0gZnJvbSAnLi9SZWZlcmVuY2UnO1xuaW1wb3J0IHsgSW5kZXggfSBmcm9tICcuLi9jb3JlL3NuYXAvaW5kZXhlcy9JbmRleCc7XG5pbXBvcnQgeyBDaGlsZHJlbk5vZGUgfSBmcm9tICcuLi9jb3JlL3NuYXAvQ2hpbGRyZW5Ob2RlJztcblxuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYSBmaXJlYmFzZSBkYXRhIHNuYXBzaG90LiAgSXQgd3JhcHMgYSBTbmFwc2hvdE5vZGUgYW5kXG4gKiBzdXJmYWNlcyB0aGUgcHVibGljIG1ldGhvZHMgKHZhbCwgZm9yRWFjaCwgZXRjLikgd2Ugd2FudCB0byBleHBvc2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBEYXRhU25hcHNob3Qge1xuICAvKipcbiAgICogQHBhcmFtIHshTm9kZX0gbm9kZV8gQSBTbmFwc2hvdE5vZGUgdG8gd3JhcC5cbiAgICogQHBhcmFtIHshUmVmZXJlbmNlfSByZWZfIFRoZSByZWYgb2YgdGhlIGxvY2F0aW9uIHRoaXMgc25hcHNob3QgY2FtZSBmcm9tLlxuICAgKiBAcGFyYW0geyFJbmRleH0gaW5kZXhfIFRoZSBpdGVyYXRpb24gb3JkZXIgZm9yIHRoaXMgc25hcHNob3RcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgbm9kZV86IE5vZGUsXG4gICAgcHJpdmF0ZSByZWFkb25seSByZWZfOiBSZWZlcmVuY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBpbmRleF86IEluZGV4XG4gICkge31cblxuICAvKipcbiAgICogUmV0cmlldmVzIHRoZSBzbmFwc2hvdCBjb250ZW50cyBhcyBKU09OLiAgUmV0dXJucyBudWxsIGlmIHRoZSBzbmFwc2hvdCBpc1xuICAgKiBlbXB0eS5cbiAgICpcbiAgICogQHJldHVybiB7Kn0gSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgRGF0YVNuYXBzaG90IGNvbnRlbnRzLCBvciBudWxsIGlmIGVtcHR5LlxuICAgKi9cbiAgdmFsKCk6IGFueSB7XG4gICAgdmFsaWRhdGVBcmdDb3VudCgnRGF0YVNuYXBzaG90LnZhbCcsIDAsIDAsIGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIHJldHVybiB0aGlzLm5vZGVfLnZhbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHNuYXBzaG90IGNvbnRlbnRzIGFzIEpTT04sIGluY2x1ZGluZyBwcmlvcml0aWVzIG9mIG5vZGUuICBTdWl0YWJsZSBmb3IgZXhwb3J0aW5nXG4gICAqIHRoZSBlbnRpcmUgbm9kZSBjb250ZW50cy5cbiAgICogQHJldHVybiB7Kn0gSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgRGF0YVNuYXBzaG90IGNvbnRlbnRzLCBvciBudWxsIGlmIGVtcHR5LlxuICAgKi9cbiAgZXhwb3J0VmFsKCk6IGFueSB7XG4gICAgdmFsaWRhdGVBcmdDb3VudCgnRGF0YVNuYXBzaG90LmV4cG9ydFZhbCcsIDAsIDAsIGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIHJldHVybiB0aGlzLm5vZGVfLnZhbCh0cnVlKTtcbiAgfVxuXG4gIC8vIERvIG5vdCBjcmVhdGUgcHVibGljIGRvY3VtZW50YXRpb24uIFRoaXMgaXMgaW50ZW5kZWQgdG8gbWFrZSBKU09OIHNlcmlhbGl6YXRpb24gd29yayBidXQgaXMgb3RoZXJ3aXNlIHVubmVjZXNzYXJ5XG4gIC8vIGZvciBlbmQtdXNlcnNcbiAgdG9KU09OKCk6IGFueSB7XG4gICAgLy8gT3B0aW9uYWwgc3BhY2VyIGFyZ3VtZW50IGlzIHVubmVjZXNzYXJ5IGJlY2F1c2Ugd2UncmUgZGVwZW5kaW5nIG9uIHJlY3Vyc2lvbiByYXRoZXIgdGhhbiBzdHJpbmdpZnlpbmcgdGhlIGNvbnRlbnRcbiAgICB2YWxpZGF0ZUFyZ0NvdW50KCdEYXRhU25hcHNob3QudG9KU09OJywgMCwgMSwgYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgcmV0dXJuIHRoaXMuZXhwb3J0VmFsKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBzbmFwc2hvdCBjb250YWlucyBhIG5vbi1udWxsIHZhbHVlLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBzbmFwc2hvdCBjb250YWlucyBhIG5vbi1udWxsIHZhbHVlLCBvciBpcyBlbXB0eS5cbiAgICovXG4gIGV4aXN0cygpOiBib29sZWFuIHtcbiAgICB2YWxpZGF0ZUFyZ0NvdW50KCdEYXRhU25hcHNob3QuZXhpc3RzJywgMCwgMCwgYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgcmV0dXJuICF0aGlzLm5vZGVfLmlzRW1wdHkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgRGF0YVNuYXBzaG90IG9mIHRoZSBzcGVjaWZpZWQgY2hpbGQgbm9kZSdzIGNvbnRlbnRzLlxuICAgKlxuICAgKiBAcGFyYW0geyFzdHJpbmd9IGNoaWxkUGF0aFN0cmluZyBQYXRoIHRvIGEgY2hpbGQuXG4gICAqIEByZXR1cm4geyFEYXRhU25hcHNob3R9IERhdGFTbmFwc2hvdCBmb3IgY2hpbGQgbm9kZS5cbiAgICovXG4gIGNoaWxkKGNoaWxkUGF0aFN0cmluZzogc3RyaW5nKTogRGF0YVNuYXBzaG90IHtcbiAgICB2YWxpZGF0ZUFyZ0NvdW50KCdEYXRhU25hcHNob3QuY2hpbGQnLCAwLCAxLCBhcmd1bWVudHMubGVuZ3RoKTtcbiAgICAvLyBFbnN1cmUgdGhlIGNoaWxkUGF0aCBpcyBhIHN0cmluZyAoY2FuIGJlIGEgbnVtYmVyKVxuICAgIGNoaWxkUGF0aFN0cmluZyA9IFN0cmluZyhjaGlsZFBhdGhTdHJpbmcpO1xuICAgIHZhbGlkYXRlUGF0aFN0cmluZygnRGF0YVNuYXBzaG90LmNoaWxkJywgMSwgY2hpbGRQYXRoU3RyaW5nLCBmYWxzZSk7XG5cbiAgICBjb25zdCBjaGlsZFBhdGggPSBuZXcgUGF0aChjaGlsZFBhdGhTdHJpbmcpO1xuICAgIGNvbnN0IGNoaWxkUmVmID0gdGhpcy5yZWZfLmNoaWxkKGNoaWxkUGF0aCk7XG4gICAgcmV0dXJuIG5ldyBEYXRhU25hcHNob3QoXG4gICAgICB0aGlzLm5vZGVfLmdldENoaWxkKGNoaWxkUGF0aCksXG4gICAgICBjaGlsZFJlZixcbiAgICAgIFBSSU9SSVRZX0lOREVYXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHNuYXBzaG90IGNvbnRhaW5zIGEgY2hpbGQgYXQgdGhlIHNwZWNpZmllZCBwYXRoLlxuICAgKlxuICAgKiBAcGFyYW0geyFzdHJpbmd9IGNoaWxkUGF0aFN0cmluZyBQYXRoIHRvIGEgY2hpbGQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGNoaWxkIGV4aXN0cy5cbiAgICovXG4gIGhhc0NoaWxkKGNoaWxkUGF0aFN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgdmFsaWRhdGVBcmdDb3VudCgnRGF0YVNuYXBzaG90Lmhhc0NoaWxkJywgMSwgMSwgYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgdmFsaWRhdGVQYXRoU3RyaW5nKCdEYXRhU25hcHNob3QuaGFzQ2hpbGQnLCAxLCBjaGlsZFBhdGhTdHJpbmcsIGZhbHNlKTtcblxuICAgIGNvbnN0IGNoaWxkUGF0aCA9IG5ldyBQYXRoKGNoaWxkUGF0aFN0cmluZyk7XG4gICAgcmV0dXJuICF0aGlzLm5vZGVfLmdldENoaWxkKGNoaWxkUGF0aCkuaXNFbXB0eSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHByaW9yaXR5IG9mIHRoZSBvYmplY3QsIG9yIG51bGwgaWYgbm8gcHJpb3JpdHkgd2FzIHNldC5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfG51bWJlcnxudWxsfSBUaGUgcHJpb3JpdHkuXG4gICAqL1xuICBnZXRQcmlvcml0eSgpOiBzdHJpbmcgfCBudW1iZXIgfCBudWxsIHtcbiAgICB2YWxpZGF0ZUFyZ0NvdW50KCdEYXRhU25hcHNob3QuZ2V0UHJpb3JpdHknLCAwLCAwLCBhcmd1bWVudHMubGVuZ3RoKTtcblxuICAgIC8vIHR5cGVjYXN0IGhlcmUgYmVjYXVzZSB3ZSBuZXZlciByZXR1cm4gZGVmZXJyZWQgdmFsdWVzIG9yIGludGVybmFsIHByaW9yaXRpZXMgKE1BWF9QUklPUklUWSlcbiAgICByZXR1cm4gdGhpcy5ub2RlXy5nZXRQcmlvcml0eSgpLnZhbCgpIGFzIHN0cmluZyB8IG51bWJlciB8IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogSXRlcmF0ZXMgdGhyb3VnaCBjaGlsZCBub2RlcyBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZm9yIGVhY2ggb25lLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFEYXRhU25hcHNob3QpfSBhY3Rpb24gQ2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkXG4gICAqIGZvciBlYWNoIGNoaWxkLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGZvckVhY2ggd2FzIGNhbmNlbGVkIGJ5IGFjdGlvbiByZXR1cm5pbmcgdHJ1ZSBmb3JcbiAgICogb25lIG9mIHRoZSBjaGlsZCBub2Rlcy5cbiAgICovXG4gIGZvckVhY2goYWN0aW9uOiAoZDogRGF0YVNuYXBzaG90KSA9PiB2b2lkKTogYm9vbGVhbiB7XG4gICAgdmFsaWRhdGVBcmdDb3VudCgnRGF0YVNuYXBzaG90LmZvckVhY2gnLCAxLCAxLCBhcmd1bWVudHMubGVuZ3RoKTtcbiAgICB2YWxpZGF0ZUNhbGxiYWNrKCdEYXRhU25hcHNob3QuZm9yRWFjaCcsIDEsIGFjdGlvbiwgZmFsc2UpO1xuXG4gICAgaWYgKHRoaXMubm9kZV8uaXNMZWFmTm9kZSgpKSByZXR1cm4gZmFsc2U7XG5cbiAgICBjb25zdCBjaGlsZHJlbk5vZGUgPSB0aGlzLm5vZGVfIGFzIENoaWxkcmVuTm9kZTtcbiAgICAvLyBTYW5pdGl6ZSB0aGUgcmV0dXJuIHZhbHVlIHRvIGEgYm9vbGVhbi4gQ2hpbGRyZW5Ob2RlLmZvckVhY2hDaGlsZCBoYXMgYSB3ZWlyZCByZXR1cm4gdHlwZS4uLlxuICAgIHJldHVybiAhIWNoaWxkcmVuTm9kZS5mb3JFYWNoQ2hpbGQodGhpcy5pbmRleF8sIChrZXksIG5vZGUpID0+IHtcbiAgICAgIHJldHVybiBhY3Rpb24oXG4gICAgICAgIG5ldyBEYXRhU25hcHNob3Qobm9kZSwgdGhpcy5yZWZfLmNoaWxkKGtleSksIFBSSU9SSVRZX0lOREVYKVxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBEYXRhU25hcHNob3QgaGFzIGNoaWxkcmVuLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBEYXRhU25hcHNob3QgY29udGFpbnMgMSBvciBtb3JlIGNoaWxkIG5vZGVzLlxuICAgKi9cbiAgaGFzQ2hpbGRyZW4oKTogYm9vbGVhbiB7XG4gICAgdmFsaWRhdGVBcmdDb3VudCgnRGF0YVNuYXBzaG90Lmhhc0NoaWxkcmVuJywgMCwgMCwgYXJndW1lbnRzLmxlbmd0aCk7XG5cbiAgICBpZiAodGhpcy5ub2RlXy5pc0xlYWZOb2RlKCkpIHJldHVybiBmYWxzZTtcbiAgICBlbHNlIHJldHVybiAhdGhpcy5ub2RlXy5pc0VtcHR5KCk7XG4gIH1cblxuICBnZXQga2V5KCkge1xuICAgIHJldHVybiB0aGlzLnJlZl8uZ2V0S2V5KCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGNoaWxkcmVuIGZvciB0aGlzIERhdGFTbmFwc2hvdC5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbnVtYmVyIG9mIGNoaWxkcmVuIHRoYXQgdGhpcyBEYXRhU25hcHNob3QgY29udGFpbnMuXG4gICAqL1xuICBudW1DaGlsZHJlbigpOiBudW1iZXIge1xuICAgIHZhbGlkYXRlQXJnQ291bnQoJ0RhdGFTbmFwc2hvdC5udW1DaGlsZHJlbicsIDAsIDAsIGFyZ3VtZW50cy5sZW5ndGgpO1xuXG4gICAgcmV0dXJuIHRoaXMubm9kZV8ubnVtQ2hpbGRyZW4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtSZWZlcmVuY2V9IFRoZSBGaXJlYmFzZSByZWZlcmVuY2UgZm9yIHRoZSBsb2NhdGlvbiB0aGlzIHNuYXBzaG90J3MgZGF0YSBjYW1lIGZyb20uXG4gICAqL1xuICBnZXRSZWYoKTogUmVmZXJlbmNlIHtcbiAgICB2YWxpZGF0ZUFyZ0NvdW50KCdEYXRhU25hcHNob3QucmVmJywgMCwgMCwgYXJndW1lbnRzLmxlbmd0aCk7XG5cbiAgICByZXR1cm4gdGhpcy5yZWZfO1xuICB9XG5cbiAgZ2V0IHJlZigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRSZWYoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgZmF0YWwgfSBmcm9tICcuLi9jb3JlL3V0aWwvdXRpbCc7XG5pbXBvcnQgeyBwYXJzZVJlcG9JbmZvIH0gZnJvbSAnLi4vY29yZS91dGlsL2xpYnMvcGFyc2VyJztcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9jb3JlL3V0aWwvUGF0aCc7XG5pbXBvcnQgeyBSZWZlcmVuY2UgfSBmcm9tICcuL1JlZmVyZW5jZSc7XG5pbXBvcnQgeyBSZXBvIH0gZnJvbSAnLi4vY29yZS9SZXBvJztcbmltcG9ydCB7IFJlcG9NYW5hZ2VyIH0gZnJvbSAnLi4vY29yZS9SZXBvTWFuYWdlcic7XG5pbXBvcnQgeyB2YWxpZGF0ZUFyZ0NvdW50IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgdmFsaWRhdGVVcmwgfSBmcm9tICcuLi9jb3JlL3V0aWwvdmFsaWRhdGlvbic7XG5pbXBvcnQgeyBGaXJlYmFzZUFwcCwgRmlyZWJhc2VTZXJ2aWNlIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBSZXBvSW5mbyB9IGZyb20gJy4uL2NvcmUvUmVwb0luZm8nO1xuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIGZpcmViYXNlIGRhdGFiYXNlLlxuICogQGltcGxlbWVudHMge0ZpcmViYXNlU2VydmljZX1cbiAqL1xuZXhwb3J0IGNsYXNzIERhdGFiYXNlIGltcGxlbWVudHMgRmlyZWJhc2VTZXJ2aWNlIHtcbiAgSU5URVJOQUw6IERhdGFiYXNlSW50ZXJuYWxzO1xuICBwcml2YXRlIHJvb3RfOiBSZWZlcmVuY2U7XG5cbiAgc3RhdGljIHJlYWRvbmx5IFNlcnZlclZhbHVlID0ge1xuICAgIFRJTUVTVEFNUDoge1xuICAgICAgJy5zdic6ICd0aW1lc3RhbXAnXG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBUaGUgY29uc3RydWN0b3Igc2hvdWxkIG5vdCBiZSBjYWxsZWQgYnkgdXNlcnMgb2Ygb3VyIHB1YmxpYyBBUEkuXG4gICAqIEBwYXJhbSB7IVJlcG99IHJlcG9fXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlcG9fOiBSZXBvKSB7XG4gICAgaWYgKCEocmVwb18gaW5zdGFuY2VvZiBSZXBvKSkge1xuICAgICAgZmF0YWwoXG4gICAgICAgIFwiRG9uJ3QgY2FsbCBuZXcgRGF0YWJhc2UoKSBkaXJlY3RseSAtIHBsZWFzZSB1c2UgZmlyZWJhc2UuZGF0YWJhc2UoKS5cIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvKiogQHR5cGUge1JlZmVyZW5jZX0gKi9cbiAgICB0aGlzLnJvb3RfID0gbmV3IFJlZmVyZW5jZShyZXBvXywgUGF0aC5FbXB0eSk7XG5cbiAgICB0aGlzLklOVEVSTkFMID0gbmV3IERhdGFiYXNlSW50ZXJuYWxzKHRoaXMpO1xuICB9XG5cbiAgZ2V0IGFwcCgpOiBGaXJlYmFzZUFwcCB7XG4gICAgcmV0dXJuIHRoaXMucmVwb18uYXBwO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIHJvb3Qgb3IgdGhlIHBhdGggc3BlY2lmaWVkIGluIG9wdF9wYXRoU3RyaW5nLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHBhdGhTdHJpbmdcbiAgICogQHJldHVybiB7IVJlZmVyZW5jZX0gRmlyZWJhc2UgcmVmZXJlbmNlLlxuICAgKi9cbiAgcmVmKHBhdGhTdHJpbmc/OiBzdHJpbmcpOiBSZWZlcmVuY2Uge1xuICAgIHRoaXMuY2hlY2tEZWxldGVkXygncmVmJyk7XG4gICAgdmFsaWRhdGVBcmdDb3VudCgnZGF0YWJhc2UucmVmJywgMCwgMSwgYXJndW1lbnRzLmxlbmd0aCk7XG5cbiAgICByZXR1cm4gcGF0aFN0cmluZyAhPT0gdW5kZWZpbmVkID8gdGhpcy5yb290Xy5jaGlsZChwYXRoU3RyaW5nKSA6IHRoaXMucm9vdF87XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBvciB0aGUgcGF0aCBzcGVjaWZpZWQgaW4gdXJsLlxuICAgKiBXZSB0aHJvdyBhIGV4Y2VwdGlvbiBpZiB0aGUgdXJsIGlzIG5vdCBpbiB0aGUgc2FtZSBkb21haW4gYXMgdGhlXG4gICAqIGN1cnJlbnQgcmVwby5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKiBAcmV0dXJuIHshUmVmZXJlbmNlfSBGaXJlYmFzZSByZWZlcmVuY2UuXG4gICAqL1xuICByZWZGcm9tVVJMKHVybDogc3RyaW5nKTogUmVmZXJlbmNlIHtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgY29uc3QgYXBpTmFtZSA9ICdkYXRhYmFzZS5yZWZGcm9tVVJMJztcbiAgICB0aGlzLmNoZWNrRGVsZXRlZF8oYXBpTmFtZSk7XG4gICAgdmFsaWRhdGVBcmdDb3VudChhcGlOYW1lLCAxLCAxLCBhcmd1bWVudHMubGVuZ3RoKTtcbiAgICBjb25zdCBwYXJzZWRVUkwgPSBwYXJzZVJlcG9JbmZvKHVybCk7XG4gICAgdmFsaWRhdGVVcmwoYXBpTmFtZSwgMSwgcGFyc2VkVVJMKTtcblxuICAgIGNvbnN0IHJlcG9JbmZvID0gcGFyc2VkVVJMLnJlcG9JbmZvO1xuICAgIGlmIChyZXBvSW5mby5ob3N0ICE9PSAoKHRoaXMucmVwb18gYXMgYW55KS5yZXBvSW5mb18gYXMgUmVwb0luZm8pLmhvc3QpIHtcbiAgICAgIGZhdGFsKFxuICAgICAgICBhcGlOYW1lICtcbiAgICAgICAgICAnOiBIb3N0IG5hbWUgZG9lcyBub3QgbWF0Y2ggdGhlIGN1cnJlbnQgZGF0YWJhc2U6ICcgK1xuICAgICAgICAgICcoZm91bmQgJyArXG4gICAgICAgICAgcmVwb0luZm8uaG9zdCArXG4gICAgICAgICAgJyBidXQgZXhwZWN0ZWQgJyArXG4gICAgICAgICAgKCh0aGlzLnJlcG9fIGFzIGFueSkucmVwb0luZm9fIGFzIFJlcG9JbmZvKS5ob3N0ICtcbiAgICAgICAgICAnKSdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVmKHBhcnNlZFVSTC5wYXRoLnRvU3RyaW5nKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhcGlOYW1lXG4gICAqL1xuICBwcml2YXRlIGNoZWNrRGVsZXRlZF8oYXBpTmFtZTogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMucmVwb18gPT09IG51bGwpIHtcbiAgICAgIGZhdGFsKCdDYW5ub3QgY2FsbCAnICsgYXBpTmFtZSArICcgb24gYSBkZWxldGVkIGRhdGFiYXNlLicpO1xuICAgIH1cbiAgfVxuXG4gIC8vIE1ha2UgaW5kaXZpZHVhbCByZXBvIGdvIG9mZmxpbmUuXG4gIGdvT2ZmbGluZSgpIHtcbiAgICB2YWxpZGF0ZUFyZ0NvdW50KCdkYXRhYmFzZS5nb09mZmxpbmUnLCAwLCAwLCBhcmd1bWVudHMubGVuZ3RoKTtcbiAgICB0aGlzLmNoZWNrRGVsZXRlZF8oJ2dvT2ZmbGluZScpO1xuICAgIHRoaXMucmVwb18uaW50ZXJydXB0KCk7XG4gIH1cblxuICBnb09ubGluZSgpIHtcbiAgICB2YWxpZGF0ZUFyZ0NvdW50KCdkYXRhYmFzZS5nb09ubGluZScsIDAsIDAsIGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIHRoaXMuY2hlY2tEZWxldGVkXygnZ29PbmxpbmUnKTtcbiAgICB0aGlzLnJlcG9fLnJlc3VtZSgpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEYXRhYmFzZUludGVybmFscyB7XG4gIC8qKiBAcGFyYW0geyFEYXRhYmFzZX0gZGF0YWJhc2UgKi9cbiAgY29uc3RydWN0b3IocHVibGljIGRhdGFiYXNlOiBEYXRhYmFzZSkge31cblxuICAvKiogQHJldHVybiB7UHJvbWlzZTx2b2lkPn0gKi9cbiAgZGVsZXRlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICh0aGlzLmRhdGFiYXNlIGFzIGFueSkuY2hlY2tEZWxldGVkXygnZGVsZXRlJyk7XG4gICAgUmVwb01hbmFnZXIuZ2V0SW5zdGFuY2UoKS5kZWxldGVSZXBvKCh0aGlzLmRhdGFiYXNlIGFzIGFueSkucmVwb18gYXMgUmVwbyk7XG5cbiAgICAodGhpcy5kYXRhYmFzZSBhcyBhbnkpLnJlcG9fID0gbnVsbDtcbiAgICAodGhpcy5kYXRhYmFzZSBhcyBhbnkpLnJvb3RfID0gbnVsbDtcbiAgICB0aGlzLmRhdGFiYXNlLklOVEVSTkFMID0gbnVsbDtcbiAgICB0aGlzLmRhdGFiYXNlID0gbnVsbDtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IEtFWV9JTkRFWCB9IGZyb20gJy4uL2NvcmUvc25hcC9pbmRleGVzL0tleUluZGV4JztcbmltcG9ydCB7IFBSSU9SSVRZX0lOREVYIH0gZnJvbSAnLi4vY29yZS9zbmFwL2luZGV4ZXMvUHJpb3JpdHlJbmRleCc7XG5pbXBvcnQgeyBWQUxVRV9JTkRFWCB9IGZyb20gJy4uL2NvcmUvc25hcC9pbmRleGVzL1ZhbHVlSW5kZXgnO1xuaW1wb3J0IHsgUGF0aEluZGV4IH0gZnJvbSAnLi4vY29yZS9zbmFwL2luZGV4ZXMvUGF0aEluZGV4JztcbmltcG9ydCB7IE1JTl9OQU1FLCBNQVhfTkFNRSwgT2JqZWN0VG9VbmlxdWVLZXkgfSBmcm9tICcuLi9jb3JlL3V0aWwvdXRpbCc7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vY29yZS91dGlsL1BhdGgnO1xuaW1wb3J0IHtcbiAgaXNWYWxpZFByaW9yaXR5LFxuICB2YWxpZGF0ZUV2ZW50VHlwZSxcbiAgdmFsaWRhdGVQYXRoU3RyaW5nLFxuICB2YWxpZGF0ZUZpcmViYXNlRGF0YUFyZyxcbiAgdmFsaWRhdGVLZXlcbn0gZnJvbSAnLi4vY29yZS91dGlsL3ZhbGlkYXRpb24nO1xuaW1wb3J0IHtcbiAgZXJyb3JQcmVmaXgsXG4gIHZhbGlkYXRlQXJnQ291bnQsXG4gIHZhbGlkYXRlQ2FsbGJhY2ssXG4gIHZhbGlkYXRlQ29udGV4dE9iamVjdFxufSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQge1xuICBWYWx1ZUV2ZW50UmVnaXN0cmF0aW9uLFxuICBDaGlsZEV2ZW50UmVnaXN0cmF0aW9uLFxuICBFdmVudFJlZ2lzdHJhdGlvblxufSBmcm9tICcuLi9jb3JlL3ZpZXcvRXZlbnRSZWdpc3RyYXRpb24nO1xuaW1wb3J0IHsgRGVmZXJyZWQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBSZXBvIH0gZnJvbSAnLi4vY29yZS9SZXBvJztcbmltcG9ydCB7IFF1ZXJ5UGFyYW1zIH0gZnJvbSAnLi4vY29yZS92aWV3L1F1ZXJ5UGFyYW1zJztcbmltcG9ydCB7IFJlZmVyZW5jZSB9IGZyb20gJy4vUmVmZXJlbmNlJztcbmltcG9ydCB7IERhdGFTbmFwc2hvdCB9IGZyb20gJy4vRGF0YVNuYXBzaG90JztcblxubGV0IF9fcmVmZXJlbmNlQ29uc3RydWN0b3I6IG5ldyAocmVwbzogUmVwbywgcGF0aDogUGF0aCkgPT4gUXVlcnk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU25hcHNob3RDYWxsYmFjayB7XG4gIChhOiBEYXRhU25hcHNob3QsIGI/OiBzdHJpbmcpOiBhbnk7XG59XG5cbi8qKlxuICogQSBRdWVyeSByZXByZXNlbnRzIGEgZmlsdGVyIHRvIGJlIGFwcGxpZWQgdG8gYSBmaXJlYmFzZSBsb2NhdGlvbi4gIFRoaXMgb2JqZWN0IHB1cmVseSByZXByZXNlbnRzIHRoZVxuICogcXVlcnkgZXhwcmVzc2lvbiAoYW5kIGV4cG9zZXMgb3VyIHB1YmxpYyBBUEkgdG8gYnVpbGQgdGhlIHF1ZXJ5KS4gIFRoZSBhY3R1YWwgcXVlcnkgbG9naWMgaXMgaW4gVmlld0Jhc2UuanMuXG4gKlxuICogU2luY2UgZXZlcnkgRmlyZWJhc2UgcmVmZXJlbmNlIGlzIGEgcXVlcnksIEZpcmViYXNlIGluaGVyaXRzIGZyb20gdGhpcyBvYmplY3QuXG4gKi9cbmV4cG9ydCBjbGFzcyBRdWVyeSB7XG4gIHN0YXRpYyBzZXQgX19yZWZlcmVuY2VDb25zdHJ1Y3Rvcih2YWwpIHtcbiAgICBfX3JlZmVyZW5jZUNvbnN0cnVjdG9yID0gdmFsO1xuICB9XG5cbiAgc3RhdGljIGdldCBfX3JlZmVyZW5jZUNvbnN0cnVjdG9yKCkge1xuICAgIGFzc2VydChfX3JlZmVyZW5jZUNvbnN0cnVjdG9yLCAnUmVmZXJlbmNlLnRzIGhhcyBub3QgYmVlbiBsb2FkZWQnKTtcbiAgICByZXR1cm4gX19yZWZlcmVuY2VDb25zdHJ1Y3RvcjtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyByZXBvOiBSZXBvLFxuICAgIHB1YmxpYyBwYXRoOiBQYXRoLFxuICAgIHByaXZhdGUgcXVlcnlQYXJhbXNfOiBRdWVyeVBhcmFtcyxcbiAgICBwcml2YXRlIG9yZGVyQnlDYWxsZWRfOiBib29sZWFuXG4gICkge31cblxuICAvKipcbiAgICogVmFsaWRhdGVzIHN0YXJ0L2VuZCB2YWx1ZXMgZm9yIHF1ZXJpZXMuXG4gICAqIEBwYXJhbSB7IVF1ZXJ5UGFyYW1zfSBwYXJhbXNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgc3RhdGljIHZhbGlkYXRlUXVlcnlFbmRwb2ludHNfKHBhcmFtczogUXVlcnlQYXJhbXMpIHtcbiAgICBsZXQgc3RhcnROb2RlID0gbnVsbDtcbiAgICBsZXQgZW5kTm9kZSA9IG51bGw7XG4gICAgaWYgKHBhcmFtcy5oYXNTdGFydCgpKSB7XG4gICAgICBzdGFydE5vZGUgPSBwYXJhbXMuZ2V0SW5kZXhTdGFydFZhbHVlKCk7XG4gICAgfVxuICAgIGlmIChwYXJhbXMuaGFzRW5kKCkpIHtcbiAgICAgIGVuZE5vZGUgPSBwYXJhbXMuZ2V0SW5kZXhFbmRWYWx1ZSgpO1xuICAgIH1cblxuICAgIGlmIChwYXJhbXMuZ2V0SW5kZXgoKSA9PT0gS0VZX0lOREVYKSB7XG4gICAgICBjb25zdCB0b29NYW55QXJnc0Vycm9yID1cbiAgICAgICAgJ1F1ZXJ5OiBXaGVuIG9yZGVyaW5nIGJ5IGtleSwgeW91IG1heSBvbmx5IHBhc3Mgb25lIGFyZ3VtZW50IHRvICcgK1xuICAgICAgICAnc3RhcnRBdCgpLCBlbmRBdCgpLCBvciBlcXVhbFRvKCkuJztcbiAgICAgIGNvbnN0IHdyb25nQXJnVHlwZUVycm9yID1cbiAgICAgICAgJ1F1ZXJ5OiBXaGVuIG9yZGVyaW5nIGJ5IGtleSwgdGhlIGFyZ3VtZW50IHBhc3NlZCB0byBzdGFydEF0KCksIGVuZEF0KCksJyArXG4gICAgICAgICdvciBlcXVhbFRvKCkgbXVzdCBiZSBhIHN0cmluZy4nO1xuICAgICAgaWYgKHBhcmFtcy5oYXNTdGFydCgpKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0TmFtZSA9IHBhcmFtcy5nZXRJbmRleFN0YXJ0TmFtZSgpO1xuICAgICAgICBpZiAoc3RhcnROYW1lICE9IE1JTl9OQU1FKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRvb01hbnlBcmdzRXJyb3IpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzdGFydE5vZGUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHdyb25nQXJnVHlwZUVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHBhcmFtcy5oYXNFbmQoKSkge1xuICAgICAgICBjb25zdCBlbmROYW1lID0gcGFyYW1zLmdldEluZGV4RW5kTmFtZSgpO1xuICAgICAgICBpZiAoZW5kTmFtZSAhPSBNQVhfTkFNRSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcih0b29NYW55QXJnc0Vycm9yKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZW5kTm9kZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3Iod3JvbmdBcmdUeXBlRXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChwYXJhbXMuZ2V0SW5kZXgoKSA9PT0gUFJJT1JJVFlfSU5ERVgpIHtcbiAgICAgIGlmIChcbiAgICAgICAgKHN0YXJ0Tm9kZSAhPSBudWxsICYmICFpc1ZhbGlkUHJpb3JpdHkoc3RhcnROb2RlKSkgfHxcbiAgICAgICAgKGVuZE5vZGUgIT0gbnVsbCAmJiAhaXNWYWxpZFByaW9yaXR5KGVuZE5vZGUpKVxuICAgICAgKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAnUXVlcnk6IFdoZW4gb3JkZXJpbmcgYnkgcHJpb3JpdHksIHRoZSBmaXJzdCBhcmd1bWVudCBwYXNzZWQgdG8gc3RhcnRBdCgpLCAnICtcbiAgICAgICAgICAgICdlbmRBdCgpLCBvciBlcXVhbFRvKCkgbXVzdCBiZSBhIHZhbGlkIHByaW9yaXR5IHZhbHVlIChudWxsLCBhIG51bWJlciwgb3IgYSBzdHJpbmcpLidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYXNzZXJ0KFxuICAgICAgICBwYXJhbXMuZ2V0SW5kZXgoKSBpbnN0YW5jZW9mIFBhdGhJbmRleCB8fFxuICAgICAgICAgIHBhcmFtcy5nZXRJbmRleCgpID09PSBWQUxVRV9JTkRFWCxcbiAgICAgICAgJ3Vua25vd24gaW5kZXggdHlwZS4nXG4gICAgICApO1xuICAgICAgaWYgKFxuICAgICAgICAoc3RhcnROb2RlICE9IG51bGwgJiYgdHlwZW9mIHN0YXJ0Tm9kZSA9PT0gJ29iamVjdCcpIHx8XG4gICAgICAgIChlbmROb2RlICE9IG51bGwgJiYgdHlwZW9mIGVuZE5vZGUgPT09ICdvYmplY3QnKVxuICAgICAgKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAnUXVlcnk6IEZpcnN0IGFyZ3VtZW50IHBhc3NlZCB0byBzdGFydEF0KCksIGVuZEF0KCksIG9yIGVxdWFsVG8oKSBjYW5ub3QgYmUgJyArXG4gICAgICAgICAgICAnYW4gb2JqZWN0LidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGVzIHRoYXQgbGltaXQqIGhhcyBiZWVuIGNhbGxlZCB3aXRoIHRoZSBjb3JyZWN0IGNvbWJpbmF0aW9uIG9mIHBhcmFtZXRlcnNcbiAgICogQHBhcmFtIHshUXVlcnlQYXJhbXN9IHBhcmFtc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgdmFsaWRhdGVMaW1pdF8ocGFyYW1zOiBRdWVyeVBhcmFtcykge1xuICAgIGlmIChcbiAgICAgIHBhcmFtcy5oYXNTdGFydCgpICYmXG4gICAgICBwYXJhbXMuaGFzRW5kKCkgJiZcbiAgICAgIHBhcmFtcy5oYXNMaW1pdCgpICYmXG4gICAgICAhcGFyYW1zLmhhc0FuY2hvcmVkTGltaXQoKVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIlF1ZXJ5OiBDYW4ndCBjb21iaW5lIHN0YXJ0QXQoKSwgZW5kQXQoKSwgYW5kIGxpbWl0KCkuIFVzZSBsaW1pdFRvRmlyc3QoKSBvciBsaW1pdFRvTGFzdCgpIGluc3RlYWQuXCJcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlcyB0aGF0IG5vIG90aGVyIG9yZGVyIGJ5IGNhbGwgaGFzIGJlZW4gbWFkZVxuICAgKiBAcGFyYW0geyFzdHJpbmd9IGZuTmFtZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSB2YWxpZGF0ZU5vUHJldmlvdXNPcmRlckJ5Q2FsbF8oZm5OYW1lOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5vcmRlckJ5Q2FsbGVkXyA9PT0gdHJ1ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZuTmFtZSArIFwiOiBZb3UgY2FuJ3QgY29tYmluZSBtdWx0aXBsZSBvcmRlckJ5IGNhbGxzLlwiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVF1ZXJ5UGFyYW1zfVxuICAgKi9cbiAgZ2V0UXVlcnlQYXJhbXMoKTogUXVlcnlQYXJhbXMge1xuICAgIHJldHVybiB0aGlzLnF1ZXJ5UGFyYW1zXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUmVmZXJlbmNlfVxuICAgKi9cbiAgZ2V0UmVmKCk6IFJlZmVyZW5jZSB7XG4gICAgdmFsaWRhdGVBcmdDb3VudCgnUXVlcnkucmVmJywgMCwgMCwgYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgLy8gVGhpcyBpcyBhIHNsaWdodCBoYWNrLiBXZSBjYW5ub3QgZ29vZy5yZXF1aXJlKCdmYi5hcGkuRmlyZWJhc2UnKSwgc2luY2UgRmlyZWJhc2UgcmVxdWlyZXMgZmIuYXBpLlF1ZXJ5LlxuICAgIC8vIEhvd2V2ZXIsIHdlIHdpbGwgYWx3YXlzIGV4cG9ydCAnRmlyZWJhc2UnIHRvIHRoZSBnbG9iYWwgbmFtZXNwYWNlLCBzbyBpdCdzIGd1YXJhbnRlZWQgdG8gZXhpc3QgYnkgdGhlIHRpbWUgdGhpc1xuICAgIC8vIG1ldGhvZCBnZXRzIGNhbGxlZC5cbiAgICByZXR1cm4gbmV3IFF1ZXJ5Ll9fcmVmZXJlbmNlQ29uc3RydWN0b3IodGhpcy5yZXBvLCB0aGlzLnBhdGgpIGFzIFJlZmVyZW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFzdHJpbmd9IGV2ZW50VHlwZVxuICAgKiBAcGFyYW0geyFmdW5jdGlvbihEYXRhU25hcHNob3QsIHN0cmluZz0pfSBjYWxsYmFja1xuICAgKiBAcGFyYW0geyhmdW5jdGlvbihFcnJvcil8T2JqZWN0KT19IGNhbmNlbENhbGxiYWNrT3JDb250ZXh0XG4gICAqIEBwYXJhbSB7T2JqZWN0PX0gY29udGV4dFxuICAgKiBAcmV0dXJuIHshZnVuY3Rpb24oRGF0YVNuYXBzaG90LCBzdHJpbmc9KX1cbiAgICovXG4gIG9uKFxuICAgIGV2ZW50VHlwZTogc3RyaW5nLFxuICAgIGNhbGxiYWNrOiBTbmFwc2hvdENhbGxiYWNrLFxuICAgIGNhbmNlbENhbGxiYWNrT3JDb250ZXh0PzogKChhOiBFcnJvcikgPT4gYW55KSB8IE9iamVjdCxcbiAgICBjb250ZXh0PzogT2JqZWN0XG4gICk6IFNuYXBzaG90Q2FsbGJhY2sge1xuICAgIHZhbGlkYXRlQXJnQ291bnQoJ1F1ZXJ5Lm9uJywgMiwgNCwgYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgdmFsaWRhdGVFdmVudFR5cGUoJ1F1ZXJ5Lm9uJywgMSwgZXZlbnRUeXBlLCBmYWxzZSk7XG4gICAgdmFsaWRhdGVDYWxsYmFjaygnUXVlcnkub24nLCAyLCBjYWxsYmFjaywgZmFsc2UpO1xuXG4gICAgY29uc3QgcmV0ID0gUXVlcnkuZ2V0Q2FuY2VsQW5kQ29udGV4dEFyZ3NfKFxuICAgICAgJ1F1ZXJ5Lm9uJyxcbiAgICAgIGNhbmNlbENhbGxiYWNrT3JDb250ZXh0LFxuICAgICAgY29udGV4dFxuICAgICk7XG5cbiAgICBpZiAoZXZlbnRUeXBlID09PSAndmFsdWUnKSB7XG4gICAgICB0aGlzLm9uVmFsdWVFdmVudChjYWxsYmFjaywgcmV0LmNhbmNlbCwgcmV0LmNvbnRleHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjYWxsYmFja3M6IHsgW2s6IHN0cmluZ106IHR5cGVvZiBjYWxsYmFjayB9ID0ge307XG4gICAgICBjYWxsYmFja3NbZXZlbnRUeXBlXSA9IGNhbGxiYWNrO1xuICAgICAgdGhpcy5vbkNoaWxkRXZlbnQoY2FsbGJhY2tzLCByZXQuY2FuY2VsLCByZXQuY29udGV4dCk7XG4gICAgfVxuICAgIHJldHVybiBjYWxsYmFjaztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFmdW5jdGlvbighRGF0YVNuYXBzaG90KX0gY2FsbGJhY2tcbiAgICogQHBhcmFtIHs/ZnVuY3Rpb24oRXJyb3IpfSBjYW5jZWxDYWxsYmFja1xuICAgKiBAcGFyYW0gez9PYmplY3R9IGNvbnRleHRcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgcHJvdGVjdGVkIG9uVmFsdWVFdmVudChcbiAgICBjYWxsYmFjazogKGE6IERhdGFTbmFwc2hvdCkgPT4gdm9pZCxcbiAgICBjYW5jZWxDYWxsYmFjazogKChhOiBFcnJvcikgPT4gdm9pZCkgfCBudWxsLFxuICAgIGNvbnRleHQ6IE9iamVjdCB8IG51bGxcbiAgKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gbmV3IFZhbHVlRXZlbnRSZWdpc3RyYXRpb24oXG4gICAgICBjYWxsYmFjayxcbiAgICAgIGNhbmNlbENhbGxiYWNrIHx8IG51bGwsXG4gICAgICBjb250ZXh0IHx8IG51bGxcbiAgICApO1xuICAgIHRoaXMucmVwby5hZGRFdmVudENhbGxiYWNrRm9yUXVlcnkodGhpcywgY29udGFpbmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFPYmplY3QuPHN0cmluZywgIWZ1bmN0aW9uKCFEYXRhU25hcHNob3QsID9zdHJpbmcpPn0gY2FsbGJhY2tzXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9uKEVycm9yKX0gY2FuY2VsQ2FsbGJhY2tcbiAgICogQHBhcmFtIHs/T2JqZWN0fSBjb250ZXh0XG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIG9uQ2hpbGRFdmVudChcbiAgICBjYWxsYmFja3M6IHsgW2s6IHN0cmluZ106IFNuYXBzaG90Q2FsbGJhY2sgfSxcbiAgICBjYW5jZWxDYWxsYmFjazogKChhOiBFcnJvcikgPT4gYW55KSB8IG51bGwsXG4gICAgY29udGV4dDogT2JqZWN0IHwgbnVsbFxuICApIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQ2hpbGRFdmVudFJlZ2lzdHJhdGlvbihcbiAgICAgIGNhbGxiYWNrcyxcbiAgICAgIGNhbmNlbENhbGxiYWNrLFxuICAgICAgY29udGV4dFxuICAgICk7XG4gICAgdGhpcy5yZXBvLmFkZEV2ZW50Q2FsbGJhY2tGb3JRdWVyeSh0aGlzLCBjb250YWluZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gZXZlbnRUeXBlXG4gICAqIEBwYXJhbSB7KGZ1bmN0aW9uKCFEYXRhU25hcHNob3QsID9zdHJpbmc9KSk9fSBjYWxsYmFja1xuICAgKiBAcGFyYW0ge09iamVjdD19IGNvbnRleHRcbiAgICovXG4gIG9mZihldmVudFR5cGU/OiBzdHJpbmcsIGNhbGxiYWNrPzogU25hcHNob3RDYWxsYmFjaywgY29udGV4dD86IE9iamVjdCkge1xuICAgIHZhbGlkYXRlQXJnQ291bnQoJ1F1ZXJ5Lm9mZicsIDAsIDMsIGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIHZhbGlkYXRlRXZlbnRUeXBlKCdRdWVyeS5vZmYnLCAxLCBldmVudFR5cGUsIHRydWUpO1xuICAgIHZhbGlkYXRlQ2FsbGJhY2soJ1F1ZXJ5Lm9mZicsIDIsIGNhbGxiYWNrLCB0cnVlKTtcbiAgICB2YWxpZGF0ZUNvbnRleHRPYmplY3QoJ1F1ZXJ5Lm9mZicsIDMsIGNvbnRleHQsIHRydWUpO1xuXG4gICAgbGV0IGNvbnRhaW5lcjogRXZlbnRSZWdpc3RyYXRpb24gfCBudWxsID0gbnVsbDtcbiAgICBsZXQgY2FsbGJhY2tzOiB7IFtrOiBzdHJpbmddOiB0eXBlb2YgY2FsbGJhY2sgfSB8IG51bGwgPSBudWxsO1xuICAgIGlmIChldmVudFR5cGUgPT09ICd2YWx1ZScpIHtcbiAgICAgIGNvbnN0IHZhbHVlQ2FsbGJhY2sgPSBjYWxsYmFjayB8fCBudWxsO1xuICAgICAgY29udGFpbmVyID0gbmV3IFZhbHVlRXZlbnRSZWdpc3RyYXRpb24oXG4gICAgICAgIHZhbHVlQ2FsbGJhY2ssXG4gICAgICAgIG51bGwsXG4gICAgICAgIGNvbnRleHQgfHwgbnVsbFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50VHlwZSkge1xuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrcyA9IHt9O1xuICAgICAgICBjYWxsYmFja3NbZXZlbnRUeXBlXSA9IGNhbGxiYWNrO1xuICAgICAgfVxuICAgICAgY29udGFpbmVyID0gbmV3IENoaWxkRXZlbnRSZWdpc3RyYXRpb24oY2FsbGJhY2tzLCBudWxsLCBjb250ZXh0IHx8IG51bGwpO1xuICAgIH1cbiAgICB0aGlzLnJlcG8ucmVtb3ZlRXZlbnRDYWxsYmFja0ZvclF1ZXJ5KHRoaXMsIGNvbnRhaW5lcik7XG4gIH1cblxuICAvKipcbiAgICogQXR0YWNoZXMgYSBsaXN0ZW5lciwgd2FpdHMgZm9yIHRoZSBmaXJzdCBldmVudCwgYW5kIHRoZW4gcmVtb3ZlcyB0aGUgbGlzdGVuZXJcbiAgICogQHBhcmFtIHshc3RyaW5nfSBldmVudFR5cGVcbiAgICogQHBhcmFtIHshZnVuY3Rpb24oIURhdGFTbmFwc2hvdCwgc3RyaW5nPSl9IHVzZXJDYWxsYmFja1xuICAgKiBAcGFyYW0gY2FuY2VsT3JDb250ZXh0XG4gICAqIEBwYXJhbSBjb250ZXh0XG4gICAqIEByZXR1cm4geyFmaXJlYmFzZS5Qcm9taXNlfVxuICAgKi9cbiAgb25jZShcbiAgICBldmVudFR5cGU6IHN0cmluZyxcbiAgICB1c2VyQ2FsbGJhY2s/OiBTbmFwc2hvdENhbGxiYWNrLFxuICAgIGNhbmNlbE9yQ29udGV4dD86ICgoYTogRXJyb3IpID0+IHZvaWQpIHwgT2JqZWN0LFxuICAgIGNvbnRleHQ/OiBPYmplY3RcbiAgKTogUHJvbWlzZTxEYXRhU25hcHNob3Q+IHtcbiAgICB2YWxpZGF0ZUFyZ0NvdW50KCdRdWVyeS5vbmNlJywgMSwgNCwgYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgdmFsaWRhdGVFdmVudFR5cGUoJ1F1ZXJ5Lm9uY2UnLCAxLCBldmVudFR5cGUsIGZhbHNlKTtcbiAgICB2YWxpZGF0ZUNhbGxiYWNrKCdRdWVyeS5vbmNlJywgMiwgdXNlckNhbGxiYWNrLCB0cnVlKTtcblxuICAgIGNvbnN0IHJldCA9IFF1ZXJ5LmdldENhbmNlbEFuZENvbnRleHRBcmdzXyhcbiAgICAgICdRdWVyeS5vbmNlJyxcbiAgICAgIGNhbmNlbE9yQ29udGV4dCxcbiAgICAgIGNvbnRleHRcbiAgICApO1xuXG4gICAgLy8gVE9ETzogSW1wbGVtZW50IHRoaXMgbW9yZSBlZmZpY2llbnRseSAoaW4gcGFydGljdWxhciwgdXNlICdnZXQnIHdpcmUgcHJvdG9jb2wgZm9yICd2YWx1ZScgZXZlbnQpXG4gICAgLy8gVE9ETzogY29uc2lkZXIgYWN0dWFsbHkgd2lyaW5nIHRoZSBjYWxsYmFja3MgaW50byB0aGUgcHJvbWlzZS4gV2UgY2Fubm90IGRvIHRoaXMgd2l0aG91dCBhIGJyZWFraW5nIGNoYW5nZVxuICAgIC8vIGJlY2F1c2UgdGhlIEFQSSBjdXJyZW50bHkgZXhwZWN0cyBjYWxsYmFja3Mgd2lsbCBiZSBjYWxsZWQgc3luY2hyb25vdXNseSBpZiB0aGUgZGF0YSBpcyBjYWNoZWQsIGJ1dCB0aGlzIGlzXG4gICAgLy8gYWdhaW5zdCB0aGUgUHJvbWlzZSBzcGVjaWZpY2F0aW9uLlxuICAgIGxldCBmaXJzdENhbGwgPSB0cnVlO1xuICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkPERhdGFTbmFwc2hvdD4oKTtcblxuICAgIC8vIEEgZHVtbXkgZXJyb3IgaGFuZGxlciBpbiBjYXNlIGEgdXNlciB3YXNuJ3QgZXhwZWN0aW5nIHByb21pc2VzXG4gICAgZGVmZXJyZWQucHJvbWlzZS5jYXRjaCgoKSA9PiB7fSk7XG5cbiAgICBjb25zdCBvbmNlQ2FsbGJhY2sgPSAoc25hcHNob3Q6IERhdGFTbmFwc2hvdCkgPT4ge1xuICAgICAgLy8gTk9URTogRXZlbiB0aG91Z2ggd2UgdW5zdWJzY3JpYmUsIHdlIG1heSBnZXQgY2FsbGVkIG11bHRpcGxlIHRpbWVzIGlmIGEgc2luZ2xlIGFjdGlvbiAoZS5nLiBzZXQoKSB3aXRoIEpTT04pXG4gICAgICAvLyB0cmlnZ2VycyBtdWx0aXBsZSBldmVudHMgKGUuZy4gY2hpbGRfYWRkZWQgb3IgY2hpbGRfY2hhbmdlZCkuXG4gICAgICBpZiAoZmlyc3RDYWxsKSB7XG4gICAgICAgIGZpcnN0Q2FsbCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9mZihldmVudFR5cGUsIG9uY2VDYWxsYmFjayk7XG5cbiAgICAgICAgaWYgKHVzZXJDYWxsYmFjaykge1xuICAgICAgICAgIHVzZXJDYWxsYmFjay5iaW5kKHJldC5jb250ZXh0KShzbmFwc2hvdCk7XG4gICAgICAgIH1cbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShzbmFwc2hvdCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMub24oXG4gICAgICBldmVudFR5cGUsXG4gICAgICBvbmNlQ2FsbGJhY2ssXG4gICAgICAvKmNhbmNlbD0qLyBlcnIgPT4ge1xuICAgICAgICB0aGlzLm9mZihldmVudFR5cGUsIG9uY2VDYWxsYmFjayk7XG5cbiAgICAgICAgaWYgKHJldC5jYW5jZWwpIHJldC5jYW5jZWwuYmluZChyZXQuY29udGV4dCkoZXJyKTtcbiAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycik7XG4gICAgICB9XG4gICAgKTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYSBsaW1pdCBhbmQgYW5jaG9yIGl0IHRvIHRoZSBzdGFydCBvZiB0aGUgd2luZG93LlxuICAgKiBAcGFyYW0geyFudW1iZXJ9IGxpbWl0XG4gICAqIEByZXR1cm4geyFRdWVyeX1cbiAgICovXG4gIGxpbWl0VG9GaXJzdChsaW1pdDogbnVtYmVyKTogUXVlcnkge1xuICAgIHZhbGlkYXRlQXJnQ291bnQoJ1F1ZXJ5LmxpbWl0VG9GaXJzdCcsIDEsIDEsIGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiBsaW1pdCAhPT0gJ251bWJlcicgfHxcbiAgICAgIE1hdGguZmxvb3IobGltaXQpICE9PSBsaW1pdCB8fFxuICAgICAgbGltaXQgPD0gMFxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnUXVlcnkubGltaXRUb0ZpcnN0OiBGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlci4nXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAodGhpcy5xdWVyeVBhcmFtc18uaGFzTGltaXQoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnUXVlcnkubGltaXRUb0ZpcnN0OiBMaW1pdCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBsaW1pdCwgJyArXG4gICAgICAgICAgJ2xpbWl0VG9GaXJzdCwgb3IgbGltaXRUb0xhc3QpLidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBRdWVyeShcbiAgICAgIHRoaXMucmVwbyxcbiAgICAgIHRoaXMucGF0aCxcbiAgICAgIHRoaXMucXVlcnlQYXJhbXNfLmxpbWl0VG9GaXJzdChsaW1pdCksXG4gICAgICB0aGlzLm9yZGVyQnlDYWxsZWRfXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYSBsaW1pdCBhbmQgYW5jaG9yIGl0IHRvIHRoZSBlbmQgb2YgdGhlIHdpbmRvdy5cbiAgICogQHBhcmFtIHshbnVtYmVyfSBsaW1pdFxuICAgKiBAcmV0dXJuIHshUXVlcnl9XG4gICAqL1xuICBsaW1pdFRvTGFzdChsaW1pdDogbnVtYmVyKTogUXVlcnkge1xuICAgIHZhbGlkYXRlQXJnQ291bnQoJ1F1ZXJ5LmxpbWl0VG9MYXN0JywgMSwgMSwgYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIGxpbWl0ICE9PSAnbnVtYmVyJyB8fFxuICAgICAgTWF0aC5mbG9vcihsaW1pdCkgIT09IGxpbWl0IHx8XG4gICAgICBsaW1pdCA8PSAwXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdRdWVyeS5saW1pdFRvTGFzdDogRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIuJ1xuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHRoaXMucXVlcnlQYXJhbXNfLmhhc0xpbWl0KCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1F1ZXJ5LmxpbWl0VG9MYXN0OiBMaW1pdCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBsaW1pdCwgJyArXG4gICAgICAgICAgJ2xpbWl0VG9GaXJzdCwgb3IgbGltaXRUb0xhc3QpLidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBRdWVyeShcbiAgICAgIHRoaXMucmVwbyxcbiAgICAgIHRoaXMucGF0aCxcbiAgICAgIHRoaXMucXVlcnlQYXJhbXNfLmxpbWl0VG9MYXN0KGxpbWl0KSxcbiAgICAgIHRoaXMub3JkZXJCeUNhbGxlZF9cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgY2hpbGQgcGF0aCwgcmV0dXJuIGEgbmV3IHF1ZXJ5IG9yZGVyZWQgYnkgdGhlIHNwZWNpZmllZCBncmFuZGNoaWxkIHBhdGguXG4gICAqIEBwYXJhbSB7IXN0cmluZ30gcGF0aFxuICAgKiBAcmV0dXJuIHshUXVlcnl9XG4gICAqL1xuICBvcmRlckJ5Q2hpbGQocGF0aDogc3RyaW5nKTogUXVlcnkge1xuICAgIHZhbGlkYXRlQXJnQ291bnQoJ1F1ZXJ5Lm9yZGVyQnlDaGlsZCcsIDEsIDEsIGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIGlmIChwYXRoID09PSAnJGtleScpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1F1ZXJ5Lm9yZGVyQnlDaGlsZDogXCIka2V5XCIgaXMgaW52YWxpZC4gIFVzZSBRdWVyeS5vcmRlckJ5S2V5KCkgaW5zdGVhZC4nXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAocGF0aCA9PT0gJyRwcmlvcml0eScpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1F1ZXJ5Lm9yZGVyQnlDaGlsZDogXCIkcHJpb3JpdHlcIiBpcyBpbnZhbGlkLiAgVXNlIFF1ZXJ5Lm9yZGVyQnlQcmlvcml0eSgpIGluc3RlYWQuJ1xuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHBhdGggPT09ICckdmFsdWUnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdRdWVyeS5vcmRlckJ5Q2hpbGQ6IFwiJHZhbHVlXCIgaXMgaW52YWxpZC4gIFVzZSBRdWVyeS5vcmRlckJ5VmFsdWUoKSBpbnN0ZWFkLidcbiAgICAgICk7XG4gICAgfVxuICAgIHZhbGlkYXRlUGF0aFN0cmluZygnUXVlcnkub3JkZXJCeUNoaWxkJywgMSwgcGF0aCwgZmFsc2UpO1xuICAgIHRoaXMudmFsaWRhdGVOb1ByZXZpb3VzT3JkZXJCeUNhbGxfKCdRdWVyeS5vcmRlckJ5Q2hpbGQnKTtcbiAgICBjb25zdCBwYXJzZWRQYXRoID0gbmV3IFBhdGgocGF0aCk7XG4gICAgaWYgKHBhcnNlZFBhdGguaXNFbXB0eSgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdRdWVyeS5vcmRlckJ5Q2hpbGQ6IGNhbm5vdCBwYXNzIGluIGVtcHR5IHBhdGguICBVc2UgUXVlcnkub3JkZXJCeVZhbHVlKCkgaW5zdGVhZC4nXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBpbmRleCA9IG5ldyBQYXRoSW5kZXgocGFyc2VkUGF0aCk7XG4gICAgY29uc3QgbmV3UGFyYW1zID0gdGhpcy5xdWVyeVBhcmFtc18ub3JkZXJCeShpbmRleCk7XG4gICAgUXVlcnkudmFsaWRhdGVRdWVyeUVuZHBvaW50c18obmV3UGFyYW1zKTtcblxuICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5yZXBvLCB0aGlzLnBhdGgsIG5ld1BhcmFtcywgLypvcmRlckJ5Q2FsbGVkPSovIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhIG5ldyBxdWVyeSBvcmRlcmVkIGJ5IHRoZSBLZXlJbmRleFxuICAgKiBAcmV0dXJuIHshUXVlcnl9XG4gICAqL1xuICBvcmRlckJ5S2V5KCk6IFF1ZXJ5IHtcbiAgICB2YWxpZGF0ZUFyZ0NvdW50KCdRdWVyeS5vcmRlckJ5S2V5JywgMCwgMCwgYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgdGhpcy52YWxpZGF0ZU5vUHJldmlvdXNPcmRlckJ5Q2FsbF8oJ1F1ZXJ5Lm9yZGVyQnlLZXknKTtcbiAgICBjb25zdCBuZXdQYXJhbXMgPSB0aGlzLnF1ZXJ5UGFyYW1zXy5vcmRlckJ5KEtFWV9JTkRFWCk7XG4gICAgUXVlcnkudmFsaWRhdGVRdWVyeUVuZHBvaW50c18obmV3UGFyYW1zKTtcbiAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMucmVwbywgdGhpcy5wYXRoLCBuZXdQYXJhbXMsIC8qb3JkZXJCeUNhbGxlZD0qLyB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYSBuZXcgcXVlcnkgb3JkZXJlZCBieSB0aGUgUHJpb3JpdHlJbmRleFxuICAgKiBAcmV0dXJuIHshUXVlcnl9XG4gICAqL1xuICBvcmRlckJ5UHJpb3JpdHkoKTogUXVlcnkge1xuICAgIHZhbGlkYXRlQXJnQ291bnQoJ1F1ZXJ5Lm9yZGVyQnlQcmlvcml0eScsIDAsIDAsIGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIHRoaXMudmFsaWRhdGVOb1ByZXZpb3VzT3JkZXJCeUNhbGxfKCdRdWVyeS5vcmRlckJ5UHJpb3JpdHknKTtcbiAgICBjb25zdCBuZXdQYXJhbXMgPSB0aGlzLnF1ZXJ5UGFyYW1zXy5vcmRlckJ5KFBSSU9SSVRZX0lOREVYKTtcbiAgICBRdWVyeS52YWxpZGF0ZVF1ZXJ5RW5kcG9pbnRzXyhuZXdQYXJhbXMpO1xuICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5yZXBvLCB0aGlzLnBhdGgsIG5ld1BhcmFtcywgLypvcmRlckJ5Q2FsbGVkPSovIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhIG5ldyBxdWVyeSBvcmRlcmVkIGJ5IHRoZSBWYWx1ZUluZGV4XG4gICAqIEByZXR1cm4geyFRdWVyeX1cbiAgICovXG4gIG9yZGVyQnlWYWx1ZSgpOiBRdWVyeSB7XG4gICAgdmFsaWRhdGVBcmdDb3VudCgnUXVlcnkub3JkZXJCeVZhbHVlJywgMCwgMCwgYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgdGhpcy52YWxpZGF0ZU5vUHJldmlvdXNPcmRlckJ5Q2FsbF8oJ1F1ZXJ5Lm9yZGVyQnlWYWx1ZScpO1xuICAgIGNvbnN0IG5ld1BhcmFtcyA9IHRoaXMucXVlcnlQYXJhbXNfLm9yZGVyQnkoVkFMVUVfSU5ERVgpO1xuICAgIFF1ZXJ5LnZhbGlkYXRlUXVlcnlFbmRwb2ludHNfKG5ld1BhcmFtcyk7XG4gICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLnJlcG8sIHRoaXMucGF0aCwgbmV3UGFyYW1zLCAvKm9yZGVyQnlDYWxsZWQ9Ki8gdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfGJvb2xlYW58bnVsbH0gdmFsdWVcbiAgICogQHBhcmFtIHs/c3RyaW5nPX0gbmFtZVxuICAgKiBAcmV0dXJuIHshUXVlcnl9XG4gICAqL1xuICBzdGFydEF0KFxuICAgIHZhbHVlOiBudW1iZXIgfCBzdHJpbmcgfCBib29sZWFuIHwgbnVsbCA9IG51bGwsXG4gICAgbmFtZT86IHN0cmluZyB8IG51bGxcbiAgKTogUXVlcnkge1xuICAgIHZhbGlkYXRlQXJnQ291bnQoJ1F1ZXJ5LnN0YXJ0QXQnLCAwLCAyLCBhcmd1bWVudHMubGVuZ3RoKTtcbiAgICB2YWxpZGF0ZUZpcmViYXNlRGF0YUFyZygnUXVlcnkuc3RhcnRBdCcsIDEsIHZhbHVlLCB0aGlzLnBhdGgsIHRydWUpO1xuICAgIHZhbGlkYXRlS2V5KCdRdWVyeS5zdGFydEF0JywgMiwgbmFtZSwgdHJ1ZSk7XG5cbiAgICBjb25zdCBuZXdQYXJhbXMgPSB0aGlzLnF1ZXJ5UGFyYW1zXy5zdGFydEF0KHZhbHVlLCBuYW1lKTtcbiAgICBRdWVyeS52YWxpZGF0ZUxpbWl0XyhuZXdQYXJhbXMpO1xuICAgIFF1ZXJ5LnZhbGlkYXRlUXVlcnlFbmRwb2ludHNfKG5ld1BhcmFtcyk7XG4gICAgaWYgKHRoaXMucXVlcnlQYXJhbXNfLmhhc1N0YXJ0KCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1F1ZXJ5LnN0YXJ0QXQ6IFN0YXJ0aW5nIHBvaW50IHdhcyBhbHJlYWR5IHNldCAoYnkgYW5vdGhlciBjYWxsIHRvIHN0YXJ0QXQgJyArXG4gICAgICAgICAgJ29yIGVxdWFsVG8pLidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQ2FsbGluZyB3aXRoIG5vIHBhcmFtcyB0ZWxscyB1cyB0byBzdGFydCBhdCB0aGUgYmVnaW5uaW5nLlxuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YWx1ZSA9IG51bGw7XG4gICAgICBuYW1lID0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLnJlcG8sIHRoaXMucGF0aCwgbmV3UGFyYW1zLCB0aGlzLm9yZGVyQnlDYWxsZWRfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd8Ym9vbGVhbnxudWxsfSB2YWx1ZVxuICAgKiBAcGFyYW0gez9zdHJpbmc9fSBuYW1lXG4gICAqIEByZXR1cm4geyFRdWVyeX1cbiAgICovXG4gIGVuZEF0KFxuICAgIHZhbHVlOiBudW1iZXIgfCBzdHJpbmcgfCBib29sZWFuIHwgbnVsbCA9IG51bGwsXG4gICAgbmFtZT86IHN0cmluZyB8IG51bGxcbiAgKTogUXVlcnkge1xuICAgIHZhbGlkYXRlQXJnQ291bnQoJ1F1ZXJ5LmVuZEF0JywgMCwgMiwgYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgdmFsaWRhdGVGaXJlYmFzZURhdGFBcmcoJ1F1ZXJ5LmVuZEF0JywgMSwgdmFsdWUsIHRoaXMucGF0aCwgdHJ1ZSk7XG4gICAgdmFsaWRhdGVLZXkoJ1F1ZXJ5LmVuZEF0JywgMiwgbmFtZSwgdHJ1ZSk7XG5cbiAgICBjb25zdCBuZXdQYXJhbXMgPSB0aGlzLnF1ZXJ5UGFyYW1zXy5lbmRBdCh2YWx1ZSwgbmFtZSk7XG4gICAgUXVlcnkudmFsaWRhdGVMaW1pdF8obmV3UGFyYW1zKTtcbiAgICBRdWVyeS52YWxpZGF0ZVF1ZXJ5RW5kcG9pbnRzXyhuZXdQYXJhbXMpO1xuICAgIGlmICh0aGlzLnF1ZXJ5UGFyYW1zXy5oYXNFbmQoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnUXVlcnkuZW5kQXQ6IEVuZGluZyBwb2ludCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBlbmRBdCBvciAnICtcbiAgICAgICAgICAnZXF1YWxUbykuJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMucmVwbywgdGhpcy5wYXRoLCBuZXdQYXJhbXMsIHRoaXMub3JkZXJCeUNhbGxlZF8pO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWQgdGhlIHNlbGVjdGlvbiBvZiBjaGlsZHJlbiB3aXRoIGV4YWN0bHkgdGhlIHNwZWNpZmllZCB2YWx1ZSwgYW5kLCBvcHRpb25hbGx5LFxuICAgKiB0aGUgc3BlY2lmaWVkIG5hbWUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ3xib29sZWFufG51bGx9IHZhbHVlXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZVxuICAgKiBAcmV0dXJuIHshUXVlcnl9XG4gICAqL1xuICBlcXVhbFRvKHZhbHVlOiBudW1iZXIgfCBzdHJpbmcgfCBib29sZWFuIHwgbnVsbCwgbmFtZT86IHN0cmluZykge1xuICAgIHZhbGlkYXRlQXJnQ291bnQoJ1F1ZXJ5LmVxdWFsVG8nLCAxLCAyLCBhcmd1bWVudHMubGVuZ3RoKTtcbiAgICB2YWxpZGF0ZUZpcmViYXNlRGF0YUFyZygnUXVlcnkuZXF1YWxUbycsIDEsIHZhbHVlLCB0aGlzLnBhdGgsIGZhbHNlKTtcbiAgICB2YWxpZGF0ZUtleSgnUXVlcnkuZXF1YWxUbycsIDIsIG5hbWUsIHRydWUpO1xuICAgIGlmICh0aGlzLnF1ZXJ5UGFyYW1zXy5oYXNTdGFydCgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdRdWVyeS5lcXVhbFRvOiBTdGFydGluZyBwb2ludCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBzdGFydEF0IG9yICcgK1xuICAgICAgICAgICdlcXVhbFRvKS4nXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAodGhpcy5xdWVyeVBhcmFtc18uaGFzRW5kKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1F1ZXJ5LmVxdWFsVG86IEVuZGluZyBwb2ludCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBlbmRBdCBvciAnICtcbiAgICAgICAgICAnZXF1YWxUbykuJ1xuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc3RhcnRBdCh2YWx1ZSwgbmFtZSkuZW5kQXQodmFsdWUsIG5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFzdHJpbmd9IFVSTCBmb3IgdGhpcyBsb2NhdGlvbi5cbiAgICovXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgdmFsaWRhdGVBcmdDb3VudCgnUXVlcnkudG9TdHJpbmcnLCAwLCAwLCBhcmd1bWVudHMubGVuZ3RoKTtcblxuICAgIHJldHVybiB0aGlzLnJlcG8udG9TdHJpbmcoKSArIHRoaXMucGF0aC50b1VybEVuY29kZWRTdHJpbmcoKTtcbiAgfVxuXG4gIC8vIERvIG5vdCBjcmVhdGUgcHVibGljIGRvY3VtZW50YXRpb24uIFRoaXMgaXMgaW50ZW5kZWQgdG8gbWFrZSBKU09OIHNlcmlhbGl6YXRpb24gd29yayBidXQgaXMgb3RoZXJ3aXNlIHVubmVjZXNzYXJ5XG4gIC8vIGZvciBlbmQtdXNlcnMuXG4gIHRvSlNPTigpIHtcbiAgICAvLyBBbiBvcHRpb25hbCBzcGFjZXIgYXJndW1lbnQgaXMgdW5uZWNlc3NhcnkgZm9yIGEgc3RyaW5nLlxuICAgIHZhbGlkYXRlQXJnQ291bnQoJ1F1ZXJ5LnRvSlNPTicsIDAsIDEsIGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7XG4gIH1cblxuICAvKipcbiAgICogQW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBxdWVyeSBwYXJhbWV0ZXJzIHVzZWQgYnkgdGhpcyBRdWVyeS5cbiAgICogQHJldHVybiB7IU9iamVjdH1cbiAgICovXG4gIHF1ZXJ5T2JqZWN0KCk6IE9iamVjdCB7XG4gICAgcmV0dXJuIHRoaXMucXVlcnlQYXJhbXNfLmdldFF1ZXJ5T2JqZWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IXN0cmluZ31cbiAgICovXG4gIHF1ZXJ5SWRlbnRpZmllcigpOiBzdHJpbmcge1xuICAgIGNvbnN0IG9iaiA9IHRoaXMucXVlcnlPYmplY3QoKTtcbiAgICBjb25zdCBpZCA9IE9iamVjdFRvVW5pcXVlS2V5KG9iaik7XG4gICAgcmV0dXJuIGlkID09PSAne30nID8gJ2RlZmF1bHQnIDogaWQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRydWUgaWYgdGhpcyBxdWVyeSBhbmQgdGhlIHByb3ZpZGVkIHF1ZXJ5IGFyZSBlcXVpdmFsZW50OyBvdGhlcndpc2UsIHJldHVybiBmYWxzZS5cbiAgICogQHBhcmFtIHtRdWVyeX0gb3RoZXJcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzRXF1YWwob3RoZXI6IFF1ZXJ5KTogYm9vbGVhbiB7XG4gICAgdmFsaWRhdGVBcmdDb3VudCgnUXVlcnkuaXNFcXVhbCcsIDEsIDEsIGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgUXVlcnkpKSB7XG4gICAgICBjb25zdCBlcnJvciA9XG4gICAgICAgICdRdWVyeS5pc0VxdWFsIGZhaWxlZDogRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBmaXJlYmFzZS5kYXRhYmFzZS5RdWVyeS4nO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICB9XG5cbiAgICBjb25zdCBzYW1lUmVwbyA9IHRoaXMucmVwbyA9PT0gb3RoZXIucmVwbztcbiAgICBjb25zdCBzYW1lUGF0aCA9IHRoaXMucGF0aC5lcXVhbHMob3RoZXIucGF0aCk7XG4gICAgY29uc3Qgc2FtZVF1ZXJ5SWRlbnRpZmllciA9XG4gICAgICB0aGlzLnF1ZXJ5SWRlbnRpZmllcigpID09PSBvdGhlci5xdWVyeUlkZW50aWZpZXIoKTtcblxuICAgIHJldHVybiBzYW1lUmVwbyAmJiBzYW1lUGF0aCAmJiBzYW1lUXVlcnlJZGVudGlmaWVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB1c2VkIGJ5IC5vbiBhbmQgLm9uY2UgdG8gZXh0cmFjdCB0aGUgY29udGV4dCBhbmQgb3IgY2FuY2VsIGFyZ3VtZW50cy5cbiAgICogQHBhcmFtIHshc3RyaW5nfSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWUgKG9uIG9yIG9uY2UpXG4gICAqIEBwYXJhbSB7KGZ1bmN0aW9uKEVycm9yKXxPYmplY3QpPX0gY2FuY2VsT3JDb250ZXh0XG4gICAqIEBwYXJhbSB7T2JqZWN0PX0gY29udGV4dFxuICAgKiBAcmV0dXJuIHt7Y2FuY2VsOiA/ZnVuY3Rpb24oRXJyb3IpLCBjb250ZXh0OiA/T2JqZWN0fX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGdldENhbmNlbEFuZENvbnRleHRBcmdzXyhcbiAgICBmbk5hbWU6IHN0cmluZyxcbiAgICBjYW5jZWxPckNvbnRleHQ/OiAoKGE6IEVycm9yKSA9PiB2b2lkKSB8IE9iamVjdCxcbiAgICBjb250ZXh0PzogT2JqZWN0XG4gICk6IHsgY2FuY2VsOiAoKGE6IEVycm9yKSA9PiB2b2lkKSB8IG51bGw7IGNvbnRleHQ6IE9iamVjdCB8IG51bGwgfSB7XG4gICAgY29uc3QgcmV0OiB7XG4gICAgICBjYW5jZWw6ICgoYTogRXJyb3IpID0+IHZvaWQpIHwgbnVsbDtcbiAgICAgIGNvbnRleHQ6IE9iamVjdCB8IG51bGw7XG4gICAgfSA9IHsgY2FuY2VsOiBudWxsLCBjb250ZXh0OiBudWxsIH07XG4gICAgaWYgKGNhbmNlbE9yQ29udGV4dCAmJiBjb250ZXh0KSB7XG4gICAgICByZXQuY2FuY2VsID0gY2FuY2VsT3JDb250ZXh0IGFzIChhOiBFcnJvcikgPT4gdm9pZDtcbiAgICAgIHZhbGlkYXRlQ2FsbGJhY2soZm5OYW1lLCAzLCByZXQuY2FuY2VsLCB0cnVlKTtcblxuICAgICAgcmV0LmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgdmFsaWRhdGVDb250ZXh0T2JqZWN0KGZuTmFtZSwgNCwgcmV0LmNvbnRleHQsIHRydWUpO1xuICAgIH0gZWxzZSBpZiAoY2FuY2VsT3JDb250ZXh0KSB7XG4gICAgICAvLyB3ZSBoYXZlIGVpdGhlciBhIGNhbmNlbCBjYWxsYmFjayBvciBhIGNvbnRleHQuXG4gICAgICBpZiAodHlwZW9mIGNhbmNlbE9yQ29udGV4dCA9PT0gJ29iamVjdCcgJiYgY2FuY2VsT3JDb250ZXh0ICE9PSBudWxsKSB7XG4gICAgICAgIC8vIGl0J3MgYSBjb250ZXh0IVxuICAgICAgICByZXQuY29udGV4dCA9IGNhbmNlbE9yQ29udGV4dDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNhbmNlbE9yQ29udGV4dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXQuY2FuY2VsID0gY2FuY2VsT3JDb250ZXh0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGVycm9yUHJlZml4KGZuTmFtZSwgMywgdHJ1ZSkgK1xuICAgICAgICAgICAgJyBtdXN0IGVpdGhlciBiZSBhIGNhbmNlbCBjYWxsYmFjayBvciBhIGNvbnRleHQgb2JqZWN0LidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIGdldCByZWYoKTogUmVmZXJlbmNlIHtcbiAgICByZXR1cm4gdGhpcy5nZXRSZWYoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgT25EaXNjb25uZWN0IH0gZnJvbSAnLi9vbkRpc2Nvbm5lY3QnO1xuaW1wb3J0IHsgVHJhbnNhY3Rpb25SZXN1bHQgfSBmcm9tICcuL1RyYW5zYWN0aW9uUmVzdWx0JztcbmltcG9ydCB7IHdhcm4gfSBmcm9tICcuLi9jb3JlL3V0aWwvdXRpbCc7XG5pbXBvcnQgeyBuZXh0UHVzaElkIH0gZnJvbSAnLi4vY29yZS91dGlsL05leHRQdXNoSWQnO1xuaW1wb3J0IHsgUXVlcnkgfSBmcm9tICcuL1F1ZXJ5JztcbmltcG9ydCB7IFJlcG8gfSBmcm9tICcuLi9jb3JlL1JlcG8nO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2NvcmUvdXRpbC9QYXRoJztcbmltcG9ydCB7IFF1ZXJ5UGFyYW1zIH0gZnJvbSAnLi4vY29yZS92aWV3L1F1ZXJ5UGFyYW1zJztcbmltcG9ydCB7XG4gIHZhbGlkYXRlUm9vdFBhdGhTdHJpbmcsXG4gIHZhbGlkYXRlUGF0aFN0cmluZyxcbiAgdmFsaWRhdGVGaXJlYmFzZU1lcmdlRGF0YUFyZyxcbiAgdmFsaWRhdGVCb29sZWFuLFxuICB2YWxpZGF0ZVByaW9yaXR5LFxuICB2YWxpZGF0ZUZpcmViYXNlRGF0YUFyZyxcbiAgdmFsaWRhdGVXcml0YWJsZVBhdGhcbn0gZnJvbSAnLi4vY29yZS91dGlsL3ZhbGlkYXRpb24nO1xuaW1wb3J0IHsgdmFsaWRhdGVBcmdDb3VudCwgdmFsaWRhdGVDYWxsYmFjayB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IERlZmVycmVkIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgU3luY1BvaW50IH0gZnJvbSAnLi4vY29yZS9TeW5jUG9pbnQnO1xuaW1wb3J0IHsgRGF0YWJhc2UgfSBmcm9tICcuL0RhdGFiYXNlJztcbmltcG9ydCB7IERhdGFTbmFwc2hvdCB9IGZyb20gJy4vRGF0YVNuYXBzaG90JztcblxuZXhwb3J0IGludGVyZmFjZSBSZWZlcmVuY2VDb25zdHJ1Y3RvciB7XG4gIG5ldyAocmVwbzogUmVwbywgcGF0aDogUGF0aCk6IFJlZmVyZW5jZTtcbn1cblxuZXhwb3J0IGNsYXNzIFJlZmVyZW5jZSBleHRlbmRzIFF1ZXJ5IHtcbiAgcHVibGljIHRoZW46IChhPzogYW55KSA9PiBQcm9taXNlPGFueT47XG4gIHB1YmxpYyBjYXRjaDogKGE/OiBFcnJvcikgPT4gUHJvbWlzZTxhbnk+O1xuXG4gIC8qKlxuICAgKiBDYWxsIG9wdGlvbnM6XG4gICAqICAgbmV3IFJlZmVyZW5jZShSZXBvLCBQYXRoKSBvclxuICAgKiAgIG5ldyBSZWZlcmVuY2UodXJsOiBzdHJpbmcsIHN0cmluZ3xSZXBvTWFuYWdlcilcbiAgICpcbiAgICogRXh0ZXJuYWxseSAtIHRoaXMgaXMgdGhlIGZpcmViYXNlLmRhdGFiYXNlLlJlZmVyZW5jZSB0eXBlLlxuICAgKlxuICAgKiBAcGFyYW0geyFSZXBvfSByZXBvXG4gICAqIEBwYXJhbSB7KCFQYXRoKX0gcGF0aFxuICAgKiBAZXh0ZW5kcyB7UXVlcnl9XG4gICAqL1xuICBjb25zdHJ1Y3RvcihyZXBvOiBSZXBvLCBwYXRoOiBQYXRoKSB7XG4gICAgaWYgKCEocmVwbyBpbnN0YW5jZW9mIFJlcG8pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICduZXcgUmVmZXJlbmNlKCkgbm8gbG9uZ2VyIHN1cHBvcnRlZCAtIHVzZSBhcHAuZGF0YWJhc2UoKS4nXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIGNhbGwgUXVlcnkncyBjb25zdHJ1Y3RvciwgcGFzc2luZyBpbiB0aGUgcmVwbyBhbmQgcGF0aC5cbiAgICBzdXBlcihyZXBvLCBwYXRoLCBRdWVyeVBhcmFtcy5ERUZBVUxULCBmYWxzZSk7XG4gIH1cblxuICAvKiogQHJldHVybiB7P3N0cmluZ30gKi9cbiAgZ2V0S2V5KCk6IHN0cmluZyB8IG51bGwge1xuICAgIHZhbGlkYXRlQXJnQ291bnQoJ1JlZmVyZW5jZS5rZXknLCAwLCAwLCBhcmd1bWVudHMubGVuZ3RoKTtcblxuICAgIGlmICh0aGlzLnBhdGguaXNFbXB0eSgpKSByZXR1cm4gbnVsbDtcbiAgICBlbHNlIHJldHVybiB0aGlzLnBhdGguZ2V0QmFjaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IShzdHJpbmd8UGF0aCl9IHBhdGhTdHJpbmdcbiAgICogQHJldHVybiB7IVJlZmVyZW5jZX1cbiAgICovXG4gIGNoaWxkKHBhdGhTdHJpbmc6IHN0cmluZyB8IFBhdGgpOiBSZWZlcmVuY2Uge1xuICAgIHZhbGlkYXRlQXJnQ291bnQoJ1JlZmVyZW5jZS5jaGlsZCcsIDEsIDEsIGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIGlmICh0eXBlb2YgcGF0aFN0cmluZyA9PT0gJ251bWJlcicpIHtcbiAgICAgIHBhdGhTdHJpbmcgPSBTdHJpbmcocGF0aFN0cmluZyk7XG4gICAgfSBlbHNlIGlmICghKHBhdGhTdHJpbmcgaW5zdGFuY2VvZiBQYXRoKSkge1xuICAgICAgaWYgKHRoaXMucGF0aC5nZXRGcm9udCgpID09PSBudWxsKVxuICAgICAgICB2YWxpZGF0ZVJvb3RQYXRoU3RyaW5nKCdSZWZlcmVuY2UuY2hpbGQnLCAxLCBwYXRoU3RyaW5nLCBmYWxzZSk7XG4gICAgICBlbHNlIHZhbGlkYXRlUGF0aFN0cmluZygnUmVmZXJlbmNlLmNoaWxkJywgMSwgcGF0aFN0cmluZywgZmFsc2UpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUmVmZXJlbmNlKHRoaXMucmVwbywgdGhpcy5wYXRoLmNoaWxkKHBhdGhTdHJpbmcpKTtcbiAgfVxuXG4gIC8qKiBAcmV0dXJuIHs/UmVmZXJlbmNlfSAqL1xuICBnZXRQYXJlbnQoKTogUmVmZXJlbmNlIHwgbnVsbCB7XG4gICAgdmFsaWRhdGVBcmdDb3VudCgnUmVmZXJlbmNlLnBhcmVudCcsIDAsIDAsIGFyZ3VtZW50cy5sZW5ndGgpO1xuXG4gICAgY29uc3QgcGFyZW50UGF0aCA9IHRoaXMucGF0aC5wYXJlbnQoKTtcbiAgICByZXR1cm4gcGFyZW50UGF0aCA9PT0gbnVsbCA/IG51bGwgOiBuZXcgUmVmZXJlbmNlKHRoaXMucmVwbywgcGFyZW50UGF0aCk7XG4gIH1cblxuICAvKiogQHJldHVybiB7IVJlZmVyZW5jZX0gKi9cbiAgZ2V0Um9vdCgpOiBSZWZlcmVuY2Uge1xuICAgIHZhbGlkYXRlQXJnQ291bnQoJ1JlZmVyZW5jZS5yb290JywgMCwgMCwgYXJndW1lbnRzLmxlbmd0aCk7XG5cbiAgICBsZXQgcmVmID0gdGhpcyBhcyBhbnk7XG4gICAgd2hpbGUgKHJlZi5nZXRQYXJlbnQoKSAhPT0gbnVsbCkge1xuICAgICAgcmVmID0gcmVmLmdldFBhcmVudCgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVmO1xuICB9XG5cbiAgLyoqIEByZXR1cm4geyFEYXRhYmFzZX0gKi9cbiAgZGF0YWJhc2VQcm9wKCk6IERhdGFiYXNlIHtcbiAgICByZXR1cm4gdGhpcy5yZXBvLmRhdGFiYXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Kn0gbmV3VmFsXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oP0Vycm9yKT19IG9uQ29tcGxldGVcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzZXQobmV3VmFsOiBhbnksIG9uQ29tcGxldGU/OiAoYTogRXJyb3IgfCBudWxsKSA9PiB2b2lkKTogUHJvbWlzZTxhbnk+IHtcbiAgICB2YWxpZGF0ZUFyZ0NvdW50KCdSZWZlcmVuY2Uuc2V0JywgMSwgMiwgYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgdmFsaWRhdGVXcml0YWJsZVBhdGgoJ1JlZmVyZW5jZS5zZXQnLCB0aGlzLnBhdGgpO1xuICAgIHZhbGlkYXRlRmlyZWJhc2VEYXRhQXJnKCdSZWZlcmVuY2Uuc2V0JywgMSwgbmV3VmFsLCB0aGlzLnBhdGgsIGZhbHNlKTtcbiAgICB2YWxpZGF0ZUNhbGxiYWNrKCdSZWZlcmVuY2Uuc2V0JywgMiwgb25Db21wbGV0ZSwgdHJ1ZSk7XG5cbiAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgIHRoaXMucmVwby5zZXRXaXRoUHJpb3JpdHkoXG4gICAgICB0aGlzLnBhdGgsXG4gICAgICBuZXdWYWwsXG4gICAgICAvKnByaW9yaXR5PSovIG51bGwsXG4gICAgICBkZWZlcnJlZC53cmFwQ2FsbGJhY2sob25Db21wbGV0ZSlcbiAgICApO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU9iamVjdH0gb2JqZWN0VG9NZXJnZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKD9FcnJvcik9fSBvbkNvbXBsZXRlXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgdXBkYXRlKFxuICAgIG9iamVjdFRvTWVyZ2U6IE9iamVjdCxcbiAgICBvbkNvbXBsZXRlPzogKGE6IEVycm9yIHwgbnVsbCkgPT4gdm9pZFxuICApOiBQcm9taXNlPGFueT4ge1xuICAgIHZhbGlkYXRlQXJnQ291bnQoJ1JlZmVyZW5jZS51cGRhdGUnLCAxLCAyLCBhcmd1bWVudHMubGVuZ3RoKTtcbiAgICB2YWxpZGF0ZVdyaXRhYmxlUGF0aCgnUmVmZXJlbmNlLnVwZGF0ZScsIHRoaXMucGF0aCk7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmplY3RUb01lcmdlKSkge1xuICAgICAgY29uc3QgbmV3T2JqZWN0VG9NZXJnZTogeyBbazogc3RyaW5nXTogYW55IH0gPSB7fTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JqZWN0VG9NZXJnZS5sZW5ndGg7ICsraSkge1xuICAgICAgICBuZXdPYmplY3RUb01lcmdlWycnICsgaV0gPSBvYmplY3RUb01lcmdlW2ldO1xuICAgICAgfVxuICAgICAgb2JqZWN0VG9NZXJnZSA9IG5ld09iamVjdFRvTWVyZ2U7XG4gICAgICB3YXJuKFxuICAgICAgICAnUGFzc2luZyBhbiBBcnJheSB0byBGaXJlYmFzZS51cGRhdGUoKSBpcyBkZXByZWNhdGVkLiAnICtcbiAgICAgICAgICAnVXNlIHNldCgpIGlmIHlvdSB3YW50IHRvIG92ZXJ3cml0ZSB0aGUgZXhpc3RpbmcgZGF0YSwgb3IgJyArXG4gICAgICAgICAgJ2FuIE9iamVjdCB3aXRoIGludGVnZXIga2V5cyBpZiB5b3UgcmVhbGx5IGRvIHdhbnQgdG8gJyArXG4gICAgICAgICAgJ29ubHkgdXBkYXRlIHNvbWUgb2YgdGhlIGNoaWxkcmVuLidcbiAgICAgICk7XG4gICAgfVxuICAgIHZhbGlkYXRlRmlyZWJhc2VNZXJnZURhdGFBcmcoXG4gICAgICAnUmVmZXJlbmNlLnVwZGF0ZScsXG4gICAgICAxLFxuICAgICAgb2JqZWN0VG9NZXJnZSxcbiAgICAgIHRoaXMucGF0aCxcbiAgICAgIGZhbHNlXG4gICAgKTtcbiAgICB2YWxpZGF0ZUNhbGxiYWNrKCdSZWZlcmVuY2UudXBkYXRlJywgMiwgb25Db21wbGV0ZSwgdHJ1ZSk7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICB0aGlzLnJlcG8udXBkYXRlKFxuICAgICAgdGhpcy5wYXRoLFxuICAgICAgb2JqZWN0VG9NZXJnZSxcbiAgICAgIGRlZmVycmVkLndyYXBDYWxsYmFjayhvbkNvbXBsZXRlKVxuICAgICk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHsqfSBuZXdWYWxcbiAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfG51bGx9IG5ld1ByaW9yaXR5XG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oP0Vycm9yKT19IG9uQ29tcGxldGVcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzZXRXaXRoUHJpb3JpdHkoXG4gICAgbmV3VmFsOiBhbnksXG4gICAgbmV3UHJpb3JpdHk6IHN0cmluZyB8IG51bWJlciB8IG51bGwsXG4gICAgb25Db21wbGV0ZT86IChhOiBFcnJvciB8IG51bGwpID0+IHZvaWRcbiAgKTogUHJvbWlzZTxhbnk+IHtcbiAgICB2YWxpZGF0ZUFyZ0NvdW50KCdSZWZlcmVuY2Uuc2V0V2l0aFByaW9yaXR5JywgMiwgMywgYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgdmFsaWRhdGVXcml0YWJsZVBhdGgoJ1JlZmVyZW5jZS5zZXRXaXRoUHJpb3JpdHknLCB0aGlzLnBhdGgpO1xuICAgIHZhbGlkYXRlRmlyZWJhc2VEYXRhQXJnKFxuICAgICAgJ1JlZmVyZW5jZS5zZXRXaXRoUHJpb3JpdHknLFxuICAgICAgMSxcbiAgICAgIG5ld1ZhbCxcbiAgICAgIHRoaXMucGF0aCxcbiAgICAgIGZhbHNlXG4gICAgKTtcbiAgICB2YWxpZGF0ZVByaW9yaXR5KCdSZWZlcmVuY2Uuc2V0V2l0aFByaW9yaXR5JywgMiwgbmV3UHJpb3JpdHksIGZhbHNlKTtcbiAgICB2YWxpZGF0ZUNhbGxiYWNrKCdSZWZlcmVuY2Uuc2V0V2l0aFByaW9yaXR5JywgMywgb25Db21wbGV0ZSwgdHJ1ZSk7XG5cbiAgICBpZiAodGhpcy5nZXRLZXkoKSA9PT0gJy5sZW5ndGgnIHx8IHRoaXMuZ2V0S2V5KCkgPT09ICcua2V5cycpXG4gICAgICB0aHJvdyAnUmVmZXJlbmNlLnNldFdpdGhQcmlvcml0eSBmYWlsZWQ6ICcgK1xuICAgICAgICB0aGlzLmdldEtleSgpICtcbiAgICAgICAgJyBpcyBhIHJlYWQtb25seSBvYmplY3QuJztcblxuICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgdGhpcy5yZXBvLnNldFdpdGhQcmlvcml0eShcbiAgICAgIHRoaXMucGF0aCxcbiAgICAgIG5ld1ZhbCxcbiAgICAgIG5ld1ByaW9yaXR5LFxuICAgICAgZGVmZXJyZWQud3JhcENhbGxiYWNrKG9uQ29tcGxldGUpXG4gICAgKTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKD9FcnJvcik9fSBvbkNvbXBsZXRlXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgcmVtb3ZlKG9uQ29tcGxldGU/OiAoYTogRXJyb3IgfCBudWxsKSA9PiB2b2lkKTogUHJvbWlzZTxhbnk+IHtcbiAgICB2YWxpZGF0ZUFyZ0NvdW50KCdSZWZlcmVuY2UucmVtb3ZlJywgMCwgMSwgYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgdmFsaWRhdGVXcml0YWJsZVBhdGgoJ1JlZmVyZW5jZS5yZW1vdmUnLCB0aGlzLnBhdGgpO1xuICAgIHZhbGlkYXRlQ2FsbGJhY2soJ1JlZmVyZW5jZS5yZW1vdmUnLCAxLCBvbkNvbXBsZXRlLCB0cnVlKTtcblxuICAgIHJldHVybiB0aGlzLnNldChudWxsLCBvbkNvbXBsZXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCopOip9IHRyYW5zYWN0aW9uVXBkYXRlXG4gICAqIEBwYXJhbSB7KGZ1bmN0aW9uKD9FcnJvciwgYm9vbGVhbiwgP0RhdGFTbmFwc2hvdCkpPX0gb25Db21wbGV0ZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBhcHBseUxvY2FsbHlcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICB0cmFuc2FjdGlvbihcbiAgICB0cmFuc2FjdGlvblVwZGF0ZTogKGE6IGFueSkgPT4gYW55LFxuICAgIG9uQ29tcGxldGU/OiAoYTogRXJyb3IgfCBudWxsLCBiOiBib29sZWFuLCBjOiBEYXRhU25hcHNob3QgfCBudWxsKSA9PiB2b2lkLFxuICAgIGFwcGx5TG9jYWxseT86IGJvb2xlYW5cbiAgKTogUHJvbWlzZTxUcmFuc2FjdGlvblJlc3VsdD4ge1xuICAgIHZhbGlkYXRlQXJnQ291bnQoJ1JlZmVyZW5jZS50cmFuc2FjdGlvbicsIDEsIDMsIGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIHZhbGlkYXRlV3JpdGFibGVQYXRoKCdSZWZlcmVuY2UudHJhbnNhY3Rpb24nLCB0aGlzLnBhdGgpO1xuICAgIHZhbGlkYXRlQ2FsbGJhY2soJ1JlZmVyZW5jZS50cmFuc2FjdGlvbicsIDEsIHRyYW5zYWN0aW9uVXBkYXRlLCBmYWxzZSk7XG4gICAgdmFsaWRhdGVDYWxsYmFjaygnUmVmZXJlbmNlLnRyYW5zYWN0aW9uJywgMiwgb25Db21wbGV0ZSwgdHJ1ZSk7XG4gICAgLy8gTk9URTogYXBwbHlMb2NhbGx5IGlzIGFuIGludGVybmFsLW9ubHkgb3B0aW9uIGZvciBub3cuICBXZSBuZWVkIHRvIGRlY2lkZSBpZiB3ZSB3YW50IHRvIGtlZXAgaXQgYW5kIGhvd1xuICAgIC8vIHRvIGV4cG9zZSBpdC5cbiAgICB2YWxpZGF0ZUJvb2xlYW4oJ1JlZmVyZW5jZS50cmFuc2FjdGlvbicsIDMsIGFwcGx5TG9jYWxseSwgdHJ1ZSk7XG5cbiAgICBpZiAodGhpcy5nZXRLZXkoKSA9PT0gJy5sZW5ndGgnIHx8IHRoaXMuZ2V0S2V5KCkgPT09ICcua2V5cycpXG4gICAgICB0aHJvdyAnUmVmZXJlbmNlLnRyYW5zYWN0aW9uIGZhaWxlZDogJyArXG4gICAgICAgIHRoaXMuZ2V0S2V5KCkgK1xuICAgICAgICAnIGlzIGEgcmVhZC1vbmx5IG9iamVjdC4nO1xuXG4gICAgaWYgKGFwcGx5TG9jYWxseSA9PT0gdW5kZWZpbmVkKSBhcHBseUxvY2FsbHkgPSB0cnVlO1xuXG4gICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQ8VHJhbnNhY3Rpb25SZXN1bHQ+KCk7XG4gICAgaWYgKHR5cGVvZiBvbkNvbXBsZXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBkZWZlcnJlZC5wcm9taXNlLmNhdGNoKCgpID0+IHt9KTtcbiAgICB9XG5cbiAgICBjb25zdCBwcm9taXNlQ29tcGxldGUgPSBmdW5jdGlvbihcbiAgICAgIGVycm9yOiBFcnJvcixcbiAgICAgIGNvbW1pdHRlZDogYm9vbGVhbixcbiAgICAgIHNuYXBzaG90OiBEYXRhU25hcHNob3RcbiAgICApIHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShuZXcgVHJhbnNhY3Rpb25SZXN1bHQoY29tbWl0dGVkLCBzbmFwc2hvdCkpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBvbkNvbXBsZXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIG9uQ29tcGxldGUoZXJyb3IsIGNvbW1pdHRlZCwgc25hcHNob3QpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5yZXBvLnN0YXJ0VHJhbnNhY3Rpb24oXG4gICAgICB0aGlzLnBhdGgsXG4gICAgICB0cmFuc2FjdGlvblVwZGF0ZSxcbiAgICAgIHByb21pc2VDb21wbGV0ZSxcbiAgICAgIGFwcGx5TG9jYWxseVxuICAgICk7XG5cbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ8bnVsbH0gcHJpb3JpdHlcbiAgICogQHBhcmFtIHtmdW5jdGlvbig/RXJyb3IpPX0gb25Db21wbGV0ZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHNldFByaW9yaXR5KFxuICAgIHByaW9yaXR5OiBzdHJpbmcgfCBudW1iZXIgfCBudWxsLFxuICAgIG9uQ29tcGxldGU/OiAoYTogRXJyb3IgfCBudWxsKSA9PiB2b2lkXG4gICk6IFByb21pc2U8YW55PiB7XG4gICAgdmFsaWRhdGVBcmdDb3VudCgnUmVmZXJlbmNlLnNldFByaW9yaXR5JywgMSwgMiwgYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgdmFsaWRhdGVXcml0YWJsZVBhdGgoJ1JlZmVyZW5jZS5zZXRQcmlvcml0eScsIHRoaXMucGF0aCk7XG4gICAgdmFsaWRhdGVQcmlvcml0eSgnUmVmZXJlbmNlLnNldFByaW9yaXR5JywgMSwgcHJpb3JpdHksIGZhbHNlKTtcbiAgICB2YWxpZGF0ZUNhbGxiYWNrKCdSZWZlcmVuY2Uuc2V0UHJpb3JpdHknLCAyLCBvbkNvbXBsZXRlLCB0cnVlKTtcblxuICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgdGhpcy5yZXBvLnNldFdpdGhQcmlvcml0eShcbiAgICAgIHRoaXMucGF0aC5jaGlsZCgnLnByaW9yaXR5JyksXG4gICAgICBwcmlvcml0eSxcbiAgICAgIG51bGwsXG4gICAgICBkZWZlcnJlZC53cmFwQ2FsbGJhY2sob25Db21wbGV0ZSlcbiAgICApO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Kj19IHZhbHVlXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oP0Vycm9yKT19IG9uQ29tcGxldGVcbiAgICogQHJldHVybiB7IVJlZmVyZW5jZX1cbiAgICovXG4gIHB1c2godmFsdWU/OiBhbnksIG9uQ29tcGxldGU/OiAoYTogRXJyb3IgfCBudWxsKSA9PiB2b2lkKTogUmVmZXJlbmNlIHtcbiAgICB2YWxpZGF0ZUFyZ0NvdW50KCdSZWZlcmVuY2UucHVzaCcsIDAsIDIsIGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIHZhbGlkYXRlV3JpdGFibGVQYXRoKCdSZWZlcmVuY2UucHVzaCcsIHRoaXMucGF0aCk7XG4gICAgdmFsaWRhdGVGaXJlYmFzZURhdGFBcmcoJ1JlZmVyZW5jZS5wdXNoJywgMSwgdmFsdWUsIHRoaXMucGF0aCwgdHJ1ZSk7XG4gICAgdmFsaWRhdGVDYWxsYmFjaygnUmVmZXJlbmNlLnB1c2gnLCAyLCBvbkNvbXBsZXRlLCB0cnVlKTtcblxuICAgIGNvbnN0IG5vdyA9IHRoaXMucmVwby5zZXJ2ZXJUaW1lKCk7XG4gICAgY29uc3QgbmFtZSA9IG5leHRQdXNoSWQobm93KTtcblxuICAgIC8vIHB1c2goKSByZXR1cm5zIGEgVGhlbm5hYmxlUmVmZXJlbmNlIHdob3NlIHByb21pc2UgaXMgZnVsZmlsbGVkIHdpdGggYSByZWd1bGFyIFJlZmVyZW5jZS5cbiAgICAvLyBXZSB1c2UgY2hpbGQoKSB0byBjcmVhdGUgaGFuZGxlcyB0byB0d28gZGlmZmVyZW50IHJlZmVyZW5jZXMuIFRoZSBmaXJzdCBpcyB0dXJuZWQgaW50byBhXG4gICAgLy8gVGhlbm5hYmxlUmVmZXJlbmNlIGJlbG93IGJ5IGFkZGluZyB0aGVuKCkgYW5kIGNhdGNoKCkgbWV0aG9kcyBhbmQgaXMgdXNlZCBhcyB0aGVcbiAgICAvLyByZXR1cm4gdmFsdWUgb2YgcHVzaCgpLiBUaGUgc2Vjb25kIHJlbWFpbnMgYSByZWd1bGFyIFJlZmVyZW5jZSBhbmQgaXMgdXNlZCBhcyB0aGUgZnVsZmlsbGVkXG4gICAgLy8gdmFsdWUgb2YgdGhlIGZpcnN0IFRoZW5uYWJsZVJlZmVyZW5jZS5cbiAgICBjb25zdCB0aGVubmFibGVQdXNoUmVmID0gdGhpcy5jaGlsZChuYW1lKTtcbiAgICBjb25zdCBwdXNoUmVmID0gdGhpcy5jaGlsZChuYW1lKTtcblxuICAgIGxldCBwcm9taXNlO1xuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICBwcm9taXNlID0gdGhlbm5hYmxlUHVzaFJlZi5zZXQodmFsdWUsIG9uQ29tcGxldGUpLnRoZW4oKCkgPT4gcHVzaFJlZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUocHVzaFJlZik7XG4gICAgfVxuXG4gICAgdGhlbm5hYmxlUHVzaFJlZi50aGVuID0gcHJvbWlzZS50aGVuLmJpbmQocHJvbWlzZSk7XG4gICAgdGhlbm5hYmxlUHVzaFJlZi5jYXRjaCA9IHByb21pc2UudGhlbi5iaW5kKHByb21pc2UsIHVuZGVmaW5lZCk7XG5cbiAgICBpZiAodHlwZW9mIG9uQ29tcGxldGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHByb21pc2UuY2F0Y2goKCkgPT4ge30pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGVubmFibGVQdXNoUmVmO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFPbkRpc2Nvbm5lY3R9XG4gICAqL1xuICBvbkRpc2Nvbm5lY3QoKTogT25EaXNjb25uZWN0IHtcbiAgICB2YWxpZGF0ZVdyaXRhYmxlUGF0aCgnUmVmZXJlbmNlLm9uRGlzY29ubmVjdCcsIHRoaXMucGF0aCk7XG4gICAgcmV0dXJuIG5ldyBPbkRpc2Nvbm5lY3QodGhpcy5yZXBvLCB0aGlzLnBhdGgpO1xuICB9XG5cbiAgZ2V0IGRhdGFiYXNlKCk6IERhdGFiYXNlIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhYmFzZVByb3AoKTtcbiAgfVxuXG4gIGdldCBrZXkoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0S2V5KCk7XG4gIH1cblxuICBnZXQgcGFyZW50KCk6IFJlZmVyZW5jZSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmdldFBhcmVudCgpO1xuICB9XG5cbiAgZ2V0IHJvb3QoKTogUmVmZXJlbmNlIHtcbiAgICByZXR1cm4gdGhpcy5nZXRSb290KCk7XG4gIH1cbn1cblxuLyoqXG4gKiBEZWZpbmUgcmVmZXJlbmNlIGNvbnN0cnVjdG9yIGluIHZhcmlvdXMgbW9kdWxlc1xuICpcbiAqIFdlIGFyZSBkb2luZyB0aGlzIGhlcmUgdG8gYXZvaWQgc2V2ZXJhbCBjaXJjdWxhclxuICogZGVwZW5kZW5jeSBpc3N1ZXNcbiAqL1xuUXVlcnkuX19yZWZlcmVuY2VDb25zdHJ1Y3RvciA9IFJlZmVyZW5jZTtcblN5bmNQb2ludC5fX3JlZmVyZW5jZUNvbnN0cnVjdG9yID0gUmVmZXJlbmNlO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRGF0YVNuYXBzaG90IH0gZnJvbSAnLi9EYXRhU25hcHNob3QnO1xuaW1wb3J0IHsgdmFsaWRhdGVBcmdDb3VudCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuZXhwb3J0IGNsYXNzIFRyYW5zYWN0aW9uUmVzdWx0IHtcbiAgLyoqXG4gICAqIEEgdHlwZSBmb3IgdGhlIHJlc29sdmUgdmFsdWUgb2YgRmlyZWJhc2UudHJhbnNhY3Rpb24uXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAZGljdFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbW1pdHRlZFxuICAgKiBAcGFyYW0ge0RhdGFTbmFwc2hvdH0gc25hcHNob3RcbiAgICovXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBjb21taXR0ZWQ6IGJvb2xlYW4sIHB1YmxpYyBzbmFwc2hvdDogRGF0YVNuYXBzaG90KSB7fVxuXG4gIC8vIERvIG5vdCBjcmVhdGUgcHVibGljIGRvY3VtZW50YXRpb24uIFRoaXMgaXMgaW50ZW5kZWQgdG8gbWFrZSBKU09OIHNlcmlhbGl6YXRpb24gd29yayBidXQgaXMgb3RoZXJ3aXNlIHVubmVjZXNzYXJ5XG4gIC8vIGZvciBlbmQtdXNlcnNcbiAgdG9KU09OKCk6IG9iamVjdCB7XG4gICAgdmFsaWRhdGVBcmdDb3VudCgnVHJhbnNhY3Rpb25SZXN1bHQudG9KU09OJywgMCwgMSwgYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgcmV0dXJuIHsgY29tbWl0dGVkOiB0aGlzLmNvbW1pdHRlZCwgc25hcHNob3Q6IHRoaXMuc25hcHNob3QudG9KU09OKCkgfTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgV2ViU29ja2V0Q29ubmVjdGlvbiB9IGZyb20gJy4uL3JlYWx0aW1lL1dlYlNvY2tldENvbm5lY3Rpb24nO1xuaW1wb3J0IHsgQnJvd3NlclBvbGxDb25uZWN0aW9uIH0gZnJvbSAnLi4vcmVhbHRpbWUvQnJvd3NlclBvbGxDb25uZWN0aW9uJztcbmltcG9ydCB7IFJlZmVyZW5jZSB9IGZyb20gJy4vUmVmZXJlbmNlJztcblxuLyoqXG4gKiBJTlRFUk5BTCBtZXRob2RzIGZvciBpbnRlcm5hbC11c2Ugb25seSAodGVzdHMsIGV0Yy4pLlxuICpcbiAqIEN1c3RvbWVycyBzaG91bGRuJ3QgdXNlIHRoZXNlIG9yIGVsc2Ugc2hvdWxkIGJlIGF3YXJlIHRoYXQgdGhleSBjb3VsZCBicmVhayBhdCBhbnkgdGltZS5cbiAqXG4gKiBAY29uc3RcbiAqL1xuXG5leHBvcnQgY29uc3QgZm9yY2VMb25nUG9sbGluZyA9IGZ1bmN0aW9uKCkge1xuICBXZWJTb2NrZXRDb25uZWN0aW9uLmZvcmNlRGlzYWxsb3coKTtcbiAgQnJvd3NlclBvbGxDb25uZWN0aW9uLmZvcmNlQWxsb3coKTtcbn07XG5cbmV4cG9ydCBjb25zdCBmb3JjZVdlYlNvY2tldHMgPSBmdW5jdGlvbigpIHtcbiAgQnJvd3NlclBvbGxDb25uZWN0aW9uLmZvcmNlRGlzYWxsb3coKTtcbn07XG5cbi8qIFVzZWQgYnkgQXBwIE1hbmFnZXIgKi9cbmV4cG9ydCBjb25zdCBpc1dlYlNvY2tldHNBdmFpbGFibGUgPSBmdW5jdGlvbigpOiBib29sZWFuIHtcbiAgcmV0dXJuIFdlYlNvY2tldENvbm5lY3Rpb25bJ2lzQXZhaWxhYmxlJ10oKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXRTZWN1cml0eURlYnVnQ2FsbGJhY2sgPSBmdW5jdGlvbihcbiAgcmVmOiBSZWZlcmVuY2UsXG4gIGNhbGxiYWNrOiAoYTogT2JqZWN0KSA9PiB2b2lkXG4pIHtcbiAgKHJlZi5yZXBvLnBlcnNpc3RlbnRDb25uZWN0aW9uXyBhcyBhbnkpLnNlY3VyaXR5RGVidWdDYWxsYmFja18gPSBjYWxsYmFjaztcbn07XG5cbmV4cG9ydCBjb25zdCBzdGF0cyA9IGZ1bmN0aW9uKHJlZjogUmVmZXJlbmNlLCBzaG93RGVsdGE/OiBib29sZWFuKSB7XG4gIHJlZi5yZXBvLnN0YXRzKHNob3dEZWx0YSk7XG59O1xuXG5leHBvcnQgY29uc3Qgc3RhdHNJbmNyZW1lbnRDb3VudGVyID0gZnVuY3Rpb24ocmVmOiBSZWZlcmVuY2UsIG1ldHJpYzogc3RyaW5nKSB7XG4gIHJlZi5yZXBvLnN0YXRzSW5jcmVtZW50Q291bnRlcihtZXRyaWMpO1xufTtcblxuZXhwb3J0IGNvbnN0IGRhdGFVcGRhdGVDb3VudCA9IGZ1bmN0aW9uKHJlZjogUmVmZXJlbmNlKTogbnVtYmVyIHtcbiAgcmV0dXJuIHJlZi5yZXBvLmRhdGFVcGRhdGVDb3VudDtcbn07XG5cbmV4cG9ydCBjb25zdCBpbnRlcmNlcHRTZXJ2ZXJEYXRhID0gZnVuY3Rpb24oXG4gIHJlZjogUmVmZXJlbmNlLFxuICBjYWxsYmFjazogKChhOiBzdHJpbmcsIGI6IGFueSkgPT4gdm9pZCkgfCBudWxsXG4pIHtcbiAgcmV0dXJuIHJlZi5yZXBvLmludGVyY2VwdFNlcnZlckRhdGFfKGNhbGxiYWNrKTtcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyB2YWxpZGF0ZUFyZ0NvdW50LCB2YWxpZGF0ZUNhbGxiYWNrIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHtcbiAgdmFsaWRhdGVXcml0YWJsZVBhdGgsXG4gIHZhbGlkYXRlRmlyZWJhc2VEYXRhQXJnLFxuICB2YWxpZGF0ZVByaW9yaXR5LFxuICB2YWxpZGF0ZUZpcmViYXNlTWVyZ2VEYXRhQXJnXG59IGZyb20gJy4uL2NvcmUvdXRpbC92YWxpZGF0aW9uJztcbmltcG9ydCB7IHdhcm4gfSBmcm9tICcuLi9jb3JlL3V0aWwvdXRpbCc7XG5pbXBvcnQgeyBEZWZlcnJlZCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IFJlcG8gfSBmcm9tICcuLi9jb3JlL1JlcG8nO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2NvcmUvdXRpbC9QYXRoJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGNsYXNzIE9uRGlzY29ubmVjdCB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFSZXBvfSByZXBvX1xuICAgKiBAcGFyYW0geyFQYXRofSBwYXRoX1xuICAgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZXBvXzogUmVwbywgcHJpdmF0ZSBwYXRoXzogUGF0aCkge31cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbig/RXJyb3IpPX0gb25Db21wbGV0ZVxuICAgKiBAcmV0dXJuIHshZmlyZWJhc2UuUHJvbWlzZX1cbiAgICovXG4gIGNhbmNlbChvbkNvbXBsZXRlPzogKGE6IEVycm9yIHwgbnVsbCkgPT4gdm9pZCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHZhbGlkYXRlQXJnQ291bnQoJ09uRGlzY29ubmVjdC5jYW5jZWwnLCAwLCAxLCBhcmd1bWVudHMubGVuZ3RoKTtcbiAgICB2YWxpZGF0ZUNhbGxiYWNrKCdPbkRpc2Nvbm5lY3QuY2FuY2VsJywgMSwgb25Db21wbGV0ZSwgdHJ1ZSk7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQ8dm9pZD4oKTtcbiAgICB0aGlzLnJlcG9fLm9uRGlzY29ubmVjdENhbmNlbChcbiAgICAgIHRoaXMucGF0aF8sXG4gICAgICBkZWZlcnJlZC53cmFwQ2FsbGJhY2sob25Db21wbGV0ZSlcbiAgICApO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oP0Vycm9yKT19IG9uQ29tcGxldGVcbiAgICogQHJldHVybiB7IWZpcmViYXNlLlByb21pc2V9XG4gICAqL1xuICByZW1vdmUob25Db21wbGV0ZT86IChhOiBFcnJvciB8IG51bGwpID0+IHZvaWQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB2YWxpZGF0ZUFyZ0NvdW50KCdPbkRpc2Nvbm5lY3QucmVtb3ZlJywgMCwgMSwgYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgdmFsaWRhdGVXcml0YWJsZVBhdGgoJ09uRGlzY29ubmVjdC5yZW1vdmUnLCB0aGlzLnBhdGhfKTtcbiAgICB2YWxpZGF0ZUNhbGxiYWNrKCdPbkRpc2Nvbm5lY3QucmVtb3ZlJywgMSwgb25Db21wbGV0ZSwgdHJ1ZSk7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQ8dm9pZD4oKTtcbiAgICB0aGlzLnJlcG9fLm9uRGlzY29ubmVjdFNldChcbiAgICAgIHRoaXMucGF0aF8sXG4gICAgICBudWxsLFxuICAgICAgZGVmZXJyZWQud3JhcENhbGxiYWNrKG9uQ29tcGxldGUpXG4gICAgKTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oP0Vycm9yKT19IG9uQ29tcGxldGVcbiAgICogQHJldHVybiB7IWZpcmViYXNlLlByb21pc2V9XG4gICAqL1xuICBzZXQodmFsdWU6IGFueSwgb25Db21wbGV0ZT86IChhOiBFcnJvciB8IG51bGwpID0+IHZvaWQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB2YWxpZGF0ZUFyZ0NvdW50KCdPbkRpc2Nvbm5lY3Quc2V0JywgMSwgMiwgYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgdmFsaWRhdGVXcml0YWJsZVBhdGgoJ09uRGlzY29ubmVjdC5zZXQnLCB0aGlzLnBhdGhfKTtcbiAgICB2YWxpZGF0ZUZpcmViYXNlRGF0YUFyZygnT25EaXNjb25uZWN0LnNldCcsIDEsIHZhbHVlLCB0aGlzLnBhdGhfLCBmYWxzZSk7XG4gICAgdmFsaWRhdGVDYWxsYmFjaygnT25EaXNjb25uZWN0LnNldCcsIDIsIG9uQ29tcGxldGUsIHRydWUpO1xuICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkPHZvaWQ+KCk7XG4gICAgdGhpcy5yZXBvXy5vbkRpc2Nvbm5lY3RTZXQoXG4gICAgICB0aGlzLnBhdGhfLFxuICAgICAgdmFsdWUsXG4gICAgICBkZWZlcnJlZC53cmFwQ2FsbGJhY2sob25Db21wbGV0ZSlcbiAgICApO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfG51bGx9IHByaW9yaXR5XG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oP0Vycm9yKT19IG9uQ29tcGxldGVcbiAgICogQHJldHVybiB7IWZpcmViYXNlLlByb21pc2V9XG4gICAqL1xuICBzZXRXaXRoUHJpb3JpdHkoXG4gICAgdmFsdWU6IGFueSxcbiAgICBwcmlvcml0eTogbnVtYmVyIHwgc3RyaW5nIHwgbnVsbCxcbiAgICBvbkNvbXBsZXRlPzogKGE6IEVycm9yIHwgbnVsbCkgPT4gdm9pZFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB2YWxpZGF0ZUFyZ0NvdW50KCdPbkRpc2Nvbm5lY3Quc2V0V2l0aFByaW9yaXR5JywgMiwgMywgYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgdmFsaWRhdGVXcml0YWJsZVBhdGgoJ09uRGlzY29ubmVjdC5zZXRXaXRoUHJpb3JpdHknLCB0aGlzLnBhdGhfKTtcbiAgICB2YWxpZGF0ZUZpcmViYXNlRGF0YUFyZyhcbiAgICAgICdPbkRpc2Nvbm5lY3Quc2V0V2l0aFByaW9yaXR5JyxcbiAgICAgIDEsXG4gICAgICB2YWx1ZSxcbiAgICAgIHRoaXMucGF0aF8sXG4gICAgICBmYWxzZVxuICAgICk7XG4gICAgdmFsaWRhdGVQcmlvcml0eSgnT25EaXNjb25uZWN0LnNldFdpdGhQcmlvcml0eScsIDIsIHByaW9yaXR5LCBmYWxzZSk7XG4gICAgdmFsaWRhdGVDYWxsYmFjaygnT25EaXNjb25uZWN0LnNldFdpdGhQcmlvcml0eScsIDMsIG9uQ29tcGxldGUsIHRydWUpO1xuXG4gICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQ8dm9pZD4oKTtcbiAgICB0aGlzLnJlcG9fLm9uRGlzY29ubmVjdFNldFdpdGhQcmlvcml0eShcbiAgICAgIHRoaXMucGF0aF8sXG4gICAgICB2YWx1ZSxcbiAgICAgIHByaW9yaXR5LFxuICAgICAgZGVmZXJyZWQud3JhcENhbGxiYWNrKG9uQ29tcGxldGUpXG4gICAgKTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFPYmplY3R9IG9iamVjdFRvTWVyZ2VcbiAgICogQHBhcmFtIHtmdW5jdGlvbig/RXJyb3IpPX0gb25Db21wbGV0ZVxuICAgKiBAcmV0dXJuIHshZmlyZWJhc2UuUHJvbWlzZX1cbiAgICovXG4gIHVwZGF0ZShcbiAgICBvYmplY3RUb01lcmdlOiBvYmplY3QsXG4gICAgb25Db21wbGV0ZT86IChhOiBFcnJvciB8IG51bGwpID0+IHZvaWRcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdmFsaWRhdGVBcmdDb3VudCgnT25EaXNjb25uZWN0LnVwZGF0ZScsIDEsIDIsIGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIHZhbGlkYXRlV3JpdGFibGVQYXRoKCdPbkRpc2Nvbm5lY3QudXBkYXRlJywgdGhpcy5wYXRoXyk7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob2JqZWN0VG9NZXJnZSkpIHtcbiAgICAgIGNvbnN0IG5ld09iamVjdFRvTWVyZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9ID0ge307XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9iamVjdFRvTWVyZ2UubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgbmV3T2JqZWN0VG9NZXJnZVsnJyArIGldID0gb2JqZWN0VG9NZXJnZVtpXTtcbiAgICAgIH1cbiAgICAgIG9iamVjdFRvTWVyZ2UgPSBuZXdPYmplY3RUb01lcmdlO1xuICAgICAgd2FybihcbiAgICAgICAgJ1Bhc3NpbmcgYW4gQXJyYXkgdG8gZmlyZWJhc2UuZGF0YWJhc2Uub25EaXNjb25uZWN0KCkudXBkYXRlKCkgaXMgZGVwcmVjYXRlZC4gVXNlIHNldCgpIGlmIHlvdSB3YW50IHRvIG92ZXJ3cml0ZSB0aGUgJyArXG4gICAgICAgICAgJ2V4aXN0aW5nIGRhdGEsIG9yIGFuIE9iamVjdCB3aXRoIGludGVnZXIga2V5cyBpZiB5b3UgcmVhbGx5IGRvIHdhbnQgdG8gb25seSB1cGRhdGUgc29tZSBvZiB0aGUgY2hpbGRyZW4uJ1xuICAgICAgKTtcbiAgICB9XG4gICAgdmFsaWRhdGVGaXJlYmFzZU1lcmdlRGF0YUFyZyhcbiAgICAgICdPbkRpc2Nvbm5lY3QudXBkYXRlJyxcbiAgICAgIDEsXG4gICAgICBvYmplY3RUb01lcmdlLFxuICAgICAgdGhpcy5wYXRoXyxcbiAgICAgIGZhbHNlXG4gICAgKTtcbiAgICB2YWxpZGF0ZUNhbGxiYWNrKCdPbkRpc2Nvbm5lY3QudXBkYXRlJywgMiwgb25Db21wbGV0ZSwgdHJ1ZSk7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQ8dm9pZD4oKTtcbiAgICB0aGlzLnJlcG9fLm9uRGlzY29ubmVjdFVwZGF0ZShcbiAgICAgIHRoaXMucGF0aF8sXG4gICAgICBvYmplY3RUb01lcmdlLFxuICAgICAgZGVmZXJyZWQud3JhcENhbGxiYWNrKG9uQ29tcGxldGUpXG4gICAgKTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgUmVwb0luZm8gfSBmcm9tICcuLi9jb3JlL1JlcG9JbmZvJztcbmltcG9ydCB7IFBlcnNpc3RlbnRDb25uZWN0aW9uIH0gZnJvbSAnLi4vY29yZS9QZXJzaXN0ZW50Q29ubmVjdGlvbic7XG5pbXBvcnQgeyBSZXBvTWFuYWdlciB9IGZyb20gJy4uL2NvcmUvUmVwb01hbmFnZXInO1xuaW1wb3J0IHsgQ29ubmVjdGlvbiB9IGZyb20gJy4uL3JlYWx0aW1lL0Nvbm5lY3Rpb24nO1xuaW1wb3J0IHsgUXVlcnkgfSBmcm9tICcuL1F1ZXJ5JztcblxuZXhwb3J0IGNvbnN0IERhdGFDb25uZWN0aW9uID0gUGVyc2lzdGVudENvbm5lY3Rpb247XG5cbi8qKlxuICogQHBhcmFtIHshc3RyaW5nfSBwYXRoU3RyaW5nXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCopfSBvbkNvbXBsZXRlXG4gKi9cbihQZXJzaXN0ZW50Q29ubmVjdGlvbi5wcm90b3R5cGUgYXMgYW55KS5zaW1wbGVMaXN0ZW4gPSBmdW5jdGlvbihcbiAgcGF0aFN0cmluZzogc3RyaW5nLFxuICBvbkNvbXBsZXRlOiAoYTogYW55KSA9PiB2b2lkXG4pIHtcbiAgdGhpcy5zZW5kUmVxdWVzdCgncScsIHsgcDogcGF0aFN0cmluZyB9LCBvbkNvbXBsZXRlKTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHsqfSBkYXRhXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCopfSBvbkVjaG9cbiAqL1xuKFBlcnNpc3RlbnRDb25uZWN0aW9uLnByb3RvdHlwZSBhcyBhbnkpLmVjaG8gPSBmdW5jdGlvbihcbiAgZGF0YTogYW55LFxuICBvbkVjaG86IChhOiBhbnkpID0+IHZvaWRcbikge1xuICB0aGlzLnNlbmRSZXF1ZXN0KCdlY2hvJywgeyBkOiBkYXRhIH0sIG9uRWNobyk7XG59O1xuXG4vLyBSZWFsVGltZUNvbm5lY3Rpb24gcHJvcGVydGllcyB0aGF0IHdlIHVzZSBpbiB0ZXN0cy5cbmV4cG9ydCBjb25zdCBSZWFsVGltZUNvbm5lY3Rpb24gPSBDb25uZWN0aW9uO1xuXG4vKipcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogc3RyaW5nfSBuZXdIYXNoXG4gKiBAcmV0dXJuIHtmdW5jdGlvbigpfVxuICovXG5leHBvcnQgY29uc3QgaGlqYWNrSGFzaCA9IGZ1bmN0aW9uKG5ld0hhc2g6ICgpID0+IHN0cmluZykge1xuICBjb25zdCBvbGRQdXQgPSBQZXJzaXN0ZW50Q29ubmVjdGlvbi5wcm90b3R5cGUucHV0O1xuICBQZXJzaXN0ZW50Q29ubmVjdGlvbi5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24oXG4gICAgcGF0aFN0cmluZyxcbiAgICBkYXRhLFxuICAgIG9wdF9vbkNvbXBsZXRlLFxuICAgIG9wdF9oYXNoXG4gICkge1xuICAgIGlmIChvcHRfaGFzaCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBvcHRfaGFzaCA9IG5ld0hhc2goKTtcbiAgICB9XG4gICAgb2xkUHV0LmNhbGwodGhpcywgcGF0aFN0cmluZywgZGF0YSwgb3B0X29uQ29tcGxldGUsIG9wdF9oYXNoKTtcbiAgfTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIFBlcnNpc3RlbnRDb25uZWN0aW9uLnByb3RvdHlwZS5wdXQgPSBvbGRQdXQ7XG4gIH07XG59O1xuXG4vKipcbiAqIEB0eXBlIHtmdW5jdGlvbihuZXc6UmVwb0luZm8sICFzdHJpbmcsIGJvb2xlYW4sICFzdHJpbmcsIGJvb2xlYW4pOiB1bmRlZmluZWR9XG4gKi9cbmV4cG9ydCBjb25zdCBDb25uZWN0aW9uVGFyZ2V0ID0gUmVwb0luZm87XG5cbi8qKlxuICogQHBhcmFtIHshUXVlcnl9IHF1ZXJ5XG4gKiBAcmV0dXJuIHshc3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgcXVlcnlJZGVudGlmaWVyID0gZnVuY3Rpb24ocXVlcnk6IFF1ZXJ5KSB7XG4gIHJldHVybiBxdWVyeS5xdWVyeUlkZW50aWZpZXIoKTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHshUXVlcnl9IGZpcmViYXNlUmVmXG4gKiBAcmV0dXJuIHshT2JqZWN0fVxuICovXG5leHBvcnQgY29uc3QgbGlzdGVucyA9IGZ1bmN0aW9uKGZpcmViYXNlUmVmOiBRdWVyeSkge1xuICByZXR1cm4gKGZpcmViYXNlUmVmLnJlcG8ucGVyc2lzdGVudENvbm5lY3Rpb25fIGFzIGFueSkubGlzdGVuc187XG59O1xuXG4vKipcbiAqIEZvcmNlcyB0aGUgUmVwb01hbmFnZXIgdG8gY3JlYXRlIFJlcG9zIHRoYXQgdXNlIFJlYWRvbmx5UmVzdENsaWVudCBpbnN0ZWFkIG9mIFBlcnNpc3RlbnRDb25uZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZm9yY2VSZXN0Q2xpZW50XG4gKi9cbmV4cG9ydCBjb25zdCBmb3JjZVJlc3RDbGllbnQgPSBmdW5jdGlvbihmb3JjZVJlc3RDbGllbnQ6IGJvb2xlYW4pIHtcbiAgUmVwb01hbmFnZXIuZ2V0SW5zdGFuY2UoKS5mb3JjZVJlc3RDbGllbnQoZm9yY2VSZXN0Q2xpZW50KTtcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBGaXJlYmFzZUFwcCwgRmlyZWJhc2VBdXRoVG9rZW5EYXRhIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBsb2csIHdhcm4gfSBmcm9tICcuL3V0aWwvdXRpbCc7XG5cbi8qKlxuICogQWJzdHJhY3Rpb24gYXJvdW5kIEZpcmViYXNlQXBwJ3MgdG9rZW4gZmV0Y2hpbmcgY2FwYWJpbGl0aWVzLlxuICovXG5leHBvcnQgY2xhc3MgQXV0aFRva2VuUHJvdmlkZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshRmlyZWJhc2VBcHB9IGFwcF9cbiAgICovXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYXBwXzogRmlyZWJhc2VBcHApIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZm9yY2VSZWZyZXNoXG4gICAqIEByZXR1cm4geyFQcm9taXNlPEZpcmViYXNlQXV0aFRva2VuRGF0YT59XG4gICAqL1xuICBnZXRUb2tlbihmb3JjZVJlZnJlc2g6IGJvb2xlYW4pOiBQcm9taXNlPEZpcmViYXNlQXV0aFRva2VuRGF0YT4ge1xuICAgIHJldHVybiB0aGlzLmFwcF9bJ0lOVEVSTkFMJ11bJ2dldFRva2VuJ10oZm9yY2VSZWZyZXNoKS50aGVuKFxuICAgICAgbnVsbCxcbiAgICAgIC8vIC5jYXRjaFxuICAgICAgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgLy8gVE9ETzogTmVlZCB0byBmaWd1cmUgb3V0IGFsbCB0aGUgY2FzZXMgdGhpcyBpcyByYWlzZWQgYW5kIHdoZXRoZXJcbiAgICAgICAgLy8gdGhpcyBtYWtlcyBzZW5zZS5cbiAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLmNvZGUgPT09ICdhdXRoL3Rva2VuLW5vdC1pbml0aWFsaXplZCcpIHtcbiAgICAgICAgICBsb2coJ0dvdCBhdXRoL3Rva2VuLW5vdC1pbml0aWFsaXplZCBlcnJvci4gIFRyZWF0aW5nIGFzIG51bGwgdG9rZW4uJyk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBhZGRUb2tlbkNoYW5nZUxpc3RlbmVyKGxpc3RlbmVyOiAodG9rZW46IHN0cmluZyB8IG51bGwpID0+IHZvaWQpIHtcbiAgICAvLyBUT0RPOiBXZSBtaWdodCB3YW50IHRvIHdyYXAgdGhlIGxpc3RlbmVyIGFuZCBjYWxsIGl0IHdpdGggbm8gYXJncyB0b1xuICAgIC8vIGF2b2lkIGEgbGVha3kgYWJzdHJhY3Rpb24sIGJ1dCB0aGF0IG1ha2VzIHJlbW92aW5nIHRoZSBsaXN0ZW5lciBoYXJkZXIuXG4gICAgdGhpcy5hcHBfWydJTlRFUk5BTCddWydhZGRBdXRoVG9rZW5MaXN0ZW5lciddKGxpc3RlbmVyKTtcbiAgfVxuXG4gIHJlbW92ZVRva2VuQ2hhbmdlTGlzdGVuZXIobGlzdGVuZXI6ICh0b2tlbjogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZCkge1xuICAgIHRoaXMuYXBwX1snSU5URVJOQUwnXVsncmVtb3ZlQXV0aFRva2VuTGlzdGVuZXInXShsaXN0ZW5lcik7XG4gIH1cblxuICBub3RpZnlGb3JJbnZhbGlkVG9rZW4oKSB7XG4gICAgbGV0IGVycm9yTWVzc2FnZSA9XG4gICAgICAnUHJvdmlkZWQgYXV0aGVudGljYXRpb24gY3JlZGVudGlhbHMgZm9yIHRoZSBhcHAgbmFtZWQgXCInICtcbiAgICAgIHRoaXMuYXBwXy5uYW1lICtcbiAgICAgICdcIiBhcmUgaW52YWxpZC4gVGhpcyB1c3VhbGx5IGluZGljYXRlcyB5b3VyIGFwcCB3YXMgbm90ICcgK1xuICAgICAgJ2luaXRpYWxpemVkIGNvcnJlY3RseS4gJztcbiAgICBpZiAoJ2NyZWRlbnRpYWwnIGluIHRoaXMuYXBwXy5vcHRpb25zKSB7XG4gICAgICBlcnJvck1lc3NhZ2UgKz1cbiAgICAgICAgJ01ha2Ugc3VyZSB0aGUgXCJjcmVkZW50aWFsXCIgcHJvcGVydHkgcHJvdmlkZWQgdG8gaW5pdGlhbGl6ZUFwcCgpICcgK1xuICAgICAgICAnaXMgYXV0aG9yaXplZCB0byBhY2Nlc3MgdGhlIHNwZWNpZmllZCBcImRhdGFiYXNlVVJMXCIgYW5kIGlzIGZyb20gdGhlIGNvcnJlY3QgJyArXG4gICAgICAgICdwcm9qZWN0Lic7XG4gICAgfSBlbHNlIGlmICgnc2VydmljZUFjY291bnQnIGluIHRoaXMuYXBwXy5vcHRpb25zKSB7XG4gICAgICBlcnJvck1lc3NhZ2UgKz1cbiAgICAgICAgJ01ha2Ugc3VyZSB0aGUgXCJzZXJ2aWNlQWNjb3VudFwiIHByb3BlcnR5IHByb3ZpZGVkIHRvIGluaXRpYWxpemVBcHAoKSAnICtcbiAgICAgICAgJ2lzIGF1dGhvcml6ZWQgdG8gYWNjZXNzIHRoZSBzcGVjaWZpZWQgXCJkYXRhYmFzZVVSTFwiIGFuZCBpcyBmcm9tIHRoZSBjb3JyZWN0ICcgK1xuICAgICAgICAncHJvamVjdC4nO1xuICAgIH0gZWxzZSB7XG4gICAgICBlcnJvck1lc3NhZ2UgKz1cbiAgICAgICAgJ01ha2Ugc3VyZSB0aGUgXCJhcGlLZXlcIiBhbmQgXCJkYXRhYmFzZVVSTFwiIHByb3BlcnRpZXMgcHJvdmlkZWQgdG8gJyArXG4gICAgICAgICdpbml0aWFsaXplQXBwKCkgbWF0Y2ggdGhlIHZhbHVlcyBwcm92aWRlZCBmb3IgeW91ciBhcHAgYXQgJyArXG4gICAgICAgICdodHRwczovL2NvbnNvbGUuZmlyZWJhc2UuZ29vZ2xlLmNvbS8uJztcbiAgICB9XG4gICAgd2FybihlcnJvck1lc3NhZ2UpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBJbW11dGFibGVUcmVlIH0gZnJvbSAnLi91dGlsL0ltbXV0YWJsZVRyZWUnO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4vdXRpbC9QYXRoJztcbmltcG9ydCB7IGZvckVhY2ggfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBOb2RlLCBOYW1lZE5vZGUgfSBmcm9tICcuL3NuYXAvTm9kZSc7XG5pbXBvcnQgeyBQUklPUklUWV9JTkRFWCB9IGZyb20gJy4vc25hcC9pbmRleGVzL1ByaW9yaXR5SW5kZXgnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgQ2hpbGRyZW5Ob2RlIH0gZnJvbSAnLi9zbmFwL0NoaWxkcmVuTm9kZSc7XG5cbi8qKlxuICogVGhpcyBjbGFzcyBob2xkcyBhIGNvbGxlY3Rpb24gb2Ygd3JpdGVzIHRoYXQgY2FuIGJlIGFwcGxpZWQgdG8gbm9kZXMgaW4gdW5pc29uLiBJdCBhYnN0cmFjdHMgYXdheSB0aGUgbG9naWMgd2l0aFxuICogZGVhbGluZyB3aXRoIHByaW9yaXR5IHdyaXRlcyBhbmQgbXVsdGlwbGUgbmVzdGVkIHdyaXRlcy4gQXQgYW55IGdpdmVuIHBhdGggdGhlcmUgaXMgb25seSBhbGxvd2VkIHRvIGJlIG9uZSB3cml0ZVxuICogbW9kaWZ5aW5nIHRoYXQgcGF0aC4gQW55IHdyaXRlIHRvIGFuIGV4aXN0aW5nIHBhdGggb3Igc2hhZG93aW5nIGFuIGV4aXN0aW5nIHBhdGggd2lsbCBtb2RpZnkgdGhhdCBleGlzdGluZyB3cml0ZVxuICogdG8gcmVmbGVjdCB0aGUgd3JpdGUgYWRkZWQuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0geyFJbW11dGFibGVUcmVlLjwhTm9kZT59IHdyaXRlVHJlZVxuICovXG5leHBvcnQgY2xhc3MgQ29tcG91bmRXcml0ZSB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgd3JpdGVUcmVlXzogSW1tdXRhYmxlVHJlZTxOb2RlPikge31cbiAgLyoqXG4gICAqIEB0eXBlIHshQ29tcG91bmRXcml0ZX1cbiAgICovXG4gIHN0YXRpYyBFbXB0eSA9IG5ldyBDb21wb3VuZFdyaXRlKG5ldyBJbW11dGFibGVUcmVlKG51bGwpKTtcblxuICAvKipcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICAgKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gICAqIEByZXR1cm4geyFDb21wb3VuZFdyaXRlfVxuICAgKi9cbiAgYWRkV3JpdGUocGF0aDogUGF0aCwgbm9kZTogTm9kZSk6IENvbXBvdW5kV3JpdGUge1xuICAgIGlmIChwYXRoLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIG5ldyBDb21wb3VuZFdyaXRlKG5ldyBJbW11dGFibGVUcmVlKG5vZGUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgcm9vdG1vc3QgPSB0aGlzLndyaXRlVHJlZV8uZmluZFJvb3RNb3N0VmFsdWVBbmRQYXRoKHBhdGgpO1xuICAgICAgaWYgKHJvb3Rtb3N0ICE9IG51bGwpIHtcbiAgICAgICAgY29uc3Qgcm9vdE1vc3RQYXRoID0gcm9vdG1vc3QucGF0aDtcbiAgICAgICAgbGV0IHZhbHVlID0gcm9vdG1vc3QudmFsdWU7XG4gICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IFBhdGgucmVsYXRpdmVQYXRoKHJvb3RNb3N0UGF0aCwgcGF0aCk7XG4gICAgICAgIHZhbHVlID0gdmFsdWUudXBkYXRlQ2hpbGQocmVsYXRpdmVQYXRoLCBub2RlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wb3VuZFdyaXRlKHRoaXMud3JpdGVUcmVlXy5zZXQocm9vdE1vc3RQYXRoLCB2YWx1ZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc3VidHJlZSA9IG5ldyBJbW11dGFibGVUcmVlKG5vZGUpO1xuICAgICAgICBjb25zdCBuZXdXcml0ZVRyZWUgPSB0aGlzLndyaXRlVHJlZV8uc2V0VHJlZShwYXRoLCBzdWJ0cmVlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wb3VuZFdyaXRlKG5ld1dyaXRlVHJlZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVBhdGh9IHBhdGhcbiAgICogQHBhcmFtIHshT2JqZWN0LjxzdHJpbmcsICFOb2RlPn0gdXBkYXRlc1xuICAgKiBAcmV0dXJuIHshQ29tcG91bmRXcml0ZX1cbiAgICovXG4gIGFkZFdyaXRlcyhwYXRoOiBQYXRoLCB1cGRhdGVzOiB7IFtuYW1lOiBzdHJpbmddOiBOb2RlIH0pOiBDb21wb3VuZFdyaXRlIHtcbiAgICBsZXQgbmV3V3JpdGUgPSB0aGlzIGFzIENvbXBvdW5kV3JpdGU7XG4gICAgZm9yRWFjaCh1cGRhdGVzLCBmdW5jdGlvbihjaGlsZEtleTogc3RyaW5nLCBub2RlOiBOb2RlKSB7XG4gICAgICBuZXdXcml0ZSA9IG5ld1dyaXRlLmFkZFdyaXRlKHBhdGguY2hpbGQoY2hpbGRLZXkpLCBub2RlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbmV3V3JpdGU7XG4gIH1cblxuICAvKipcbiAgICogV2lsbCByZW1vdmUgYSB3cml0ZSBhdCB0aGUgZ2l2ZW4gcGF0aCBhbmQgZGVlcGVyIHBhdGhzLiBUaGlzIHdpbGwgPGVtPm5vdDwvZW0+IG1vZGlmeSBhIHdyaXRlIGF0IGEgaGlnaGVyXG4gICAqIGxvY2F0aW9uLCB3aGljaCBtdXN0IGJlIHJlbW92ZWQgYnkgY2FsbGluZyB0aGlzIG1ldGhvZCB3aXRoIHRoYXQgcGF0aC5cbiAgICpcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aCBUaGUgcGF0aCBhdCB3aGljaCBhIHdyaXRlIGFuZCBhbGwgZGVlcGVyIHdyaXRlcyBzaG91bGQgYmUgcmVtb3ZlZFxuICAgKiBAcmV0dXJuIHshQ29tcG91bmRXcml0ZX0gVGhlIG5ldyBDb21wb3VuZFdyaXRlIHdpdGggdGhlIHJlbW92ZWQgcGF0aFxuICAgKi9cbiAgcmVtb3ZlV3JpdGUocGF0aDogUGF0aCk6IENvbXBvdW5kV3JpdGUge1xuICAgIGlmIChwYXRoLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIENvbXBvdW5kV3JpdGUuRW1wdHk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG5ld1dyaXRlVHJlZSA9IHRoaXMud3JpdGVUcmVlXy5zZXRUcmVlKHBhdGgsIEltbXV0YWJsZVRyZWUuRW1wdHkpO1xuICAgICAgcmV0dXJuIG5ldyBDb21wb3VuZFdyaXRlKG5ld1dyaXRlVHJlZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGlzIENvbXBvdW5kV3JpdGUgd2lsbCBmdWxseSBvdmVyd3JpdGUgYSBub2RlIGF0IGEgZ2l2ZW4gbG9jYXRpb24gYW5kIGNhbiB0aGVyZWZvcmUgYmVcbiAgICogY29uc2lkZXJlZCBcImNvbXBsZXRlXCIuXG4gICAqXG4gICAqIEBwYXJhbSB7IVBhdGh9IHBhdGggVGhlIHBhdGggdG8gY2hlY2sgZm9yXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlcmUgaXMgYSBjb21wbGV0ZSB3cml0ZSBhdCB0aGF0IHBhdGhcbiAgICovXG4gIGhhc0NvbXBsZXRlV3JpdGUocGF0aDogUGF0aCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmdldENvbXBsZXRlTm9kZShwYXRoKSAhPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBub2RlIGZvciBhIHBhdGggaWYgYW5kIG9ubHkgaWYgdGhlIG5vZGUgaXMgYSBcImNvbXBsZXRlXCIgb3ZlcndyaXRlIGF0IHRoYXQgcGF0aC4gVGhpcyB3aWxsIG5vdCBhZ2dyZWdhdGVcbiAgICogd3JpdGVzIGZyb20gZGVlcGVyIHBhdGhzLCBidXQgd2lsbCByZXR1cm4gY2hpbGQgbm9kZXMgZnJvbSBhIG1vcmUgc2hhbGxvdyBwYXRoLlxuICAgKlxuICAgKiBAcGFyYW0geyFQYXRofSBwYXRoIFRoZSBwYXRoIHRvIGdldCBhIGNvbXBsZXRlIHdyaXRlXG4gICAqIEByZXR1cm4gez9Ob2RlfSBUaGUgbm9kZSBpZiBjb21wbGV0ZSBhdCB0aGF0IHBhdGgsIG9yIG51bGwgb3RoZXJ3aXNlLlxuICAgKi9cbiAgZ2V0Q29tcGxldGVOb2RlKHBhdGg6IFBhdGgpOiBOb2RlIHwgbnVsbCB7XG4gICAgY29uc3Qgcm9vdG1vc3QgPSB0aGlzLndyaXRlVHJlZV8uZmluZFJvb3RNb3N0VmFsdWVBbmRQYXRoKHBhdGgpO1xuICAgIGlmIChyb290bW9zdCAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy53cml0ZVRyZWVfXG4gICAgICAgIC5nZXQocm9vdG1vc3QucGF0aClcbiAgICAgICAgLmdldENoaWxkKFBhdGgucmVsYXRpdmVQYXRoKHJvb3Rtb3N0LnBhdGgsIHBhdGgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIGNoaWxkcmVuIHRoYXQgYXJlIGd1YXJhbnRlZWQgdG8gYmUgYSBjb21wbGV0ZSBvdmVyd3JpdGUuXG4gICAqXG4gICAqIEByZXR1cm4geyFBcnJheS48TmFtZWROb2RlPn0gQSBsaXN0IG9mIGFsbCBjb21wbGV0ZSBjaGlsZHJlbi5cbiAgICovXG4gIGdldENvbXBsZXRlQ2hpbGRyZW4oKTogQXJyYXk8TmFtZWROb2RlPiB7XG4gICAgY29uc3QgY2hpbGRyZW46IE5hbWVkTm9kZVtdID0gW107XG4gICAgbGV0IG5vZGUgPSB0aGlzLndyaXRlVHJlZV8udmFsdWU7XG4gICAgaWYgKG5vZGUgIT0gbnVsbCkge1xuICAgICAgLy8gSWYgaXQncyBhIGxlYWYgbm9kZSwgaXQgaGFzIG5vIGNoaWxkcmVuOyBzbyBub3RoaW5nIHRvIGRvLlxuICAgICAgaWYgKCFub2RlLmlzTGVhZk5vZGUoKSkge1xuICAgICAgICAobm9kZSBhcyBDaGlsZHJlbk5vZGUpLmZvckVhY2hDaGlsZChQUklPUklUWV9JTkRFWCwgZnVuY3Rpb24oXG4gICAgICAgICAgY2hpbGROYW1lLFxuICAgICAgICAgIGNoaWxkTm9kZVxuICAgICAgICApIHtcbiAgICAgICAgICBjaGlsZHJlbi5wdXNoKG5ldyBOYW1lZE5vZGUoY2hpbGROYW1lLCBjaGlsZE5vZGUpKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMud3JpdGVUcmVlXy5jaGlsZHJlbi5pbm9yZGVyVHJhdmVyc2FsKGZ1bmN0aW9uKGNoaWxkTmFtZSwgY2hpbGRUcmVlKSB7XG4gICAgICAgIGlmIChjaGlsZFRyZWUudmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgIGNoaWxkcmVuLnB1c2gobmV3IE5hbWVkTm9kZShjaGlsZE5hbWUsIGNoaWxkVHJlZS52YWx1ZSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGNoaWxkcmVuO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVBhdGh9IHBhdGhcbiAgICogQHJldHVybiB7IUNvbXBvdW5kV3JpdGV9XG4gICAqL1xuICBjaGlsZENvbXBvdW5kV3JpdGUocGF0aDogUGF0aCk6IENvbXBvdW5kV3JpdGUge1xuICAgIGlmIChwYXRoLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNoYWRvd2luZ05vZGUgPSB0aGlzLmdldENvbXBsZXRlTm9kZShwYXRoKTtcbiAgICAgIGlmIChzaGFkb3dpbmdOb2RlICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wb3VuZFdyaXRlKG5ldyBJbW11dGFibGVUcmVlKHNoYWRvd2luZ05vZGUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcG91bmRXcml0ZSh0aGlzLndyaXRlVHJlZV8uc3VidHJlZShwYXRoKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIENvbXBvdW5kV3JpdGUgaXMgZW1wdHkgYW5kIHRoZXJlZm9yZSBkb2VzIG5vdCBtb2RpZnkgYW55IG5vZGVzLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoaXMgQ29tcG91bmRXcml0ZSBpcyBlbXB0eVxuICAgKi9cbiAgaXNFbXB0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy53cml0ZVRyZWVfLmlzRW1wdHkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBsaWVzIHRoaXMgQ29tcG91bmRXcml0ZSB0byBhIG5vZGUuIFRoZSBub2RlIGlzIHJldHVybmVkIHdpdGggYWxsIHdyaXRlcyBmcm9tIHRoaXMgQ29tcG91bmRXcml0ZSBhcHBsaWVkIHRvIHRoZVxuICAgKiBub2RlXG4gICAqIEBwYXJhbSB7IU5vZGV9IG5vZGUgVGhlIG5vZGUgdG8gYXBwbHkgdGhpcyBDb21wb3VuZFdyaXRlIHRvXG4gICAqIEByZXR1cm4geyFOb2RlfSBUaGUgbm9kZSB3aXRoIGFsbCB3cml0ZXMgYXBwbGllZFxuICAgKi9cbiAgYXBwbHkobm9kZTogTm9kZSk6IE5vZGUge1xuICAgIHJldHVybiBDb21wb3VuZFdyaXRlLmFwcGx5U3VidHJlZVdyaXRlXyhQYXRoLkVtcHR5LCB0aGlzLndyaXRlVHJlZV8sIG5vZGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVBhdGh9IHJlbGF0aXZlUGF0aFxuICAgKiBAcGFyYW0geyFJbW11dGFibGVUcmVlLjwhTm9kZT59IHdyaXRlVHJlZVxuICAgKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gICAqIEByZXR1cm4geyFOb2RlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgYXBwbHlTdWJ0cmVlV3JpdGVfID0gZnVuY3Rpb24oXG4gICAgcmVsYXRpdmVQYXRoOiBQYXRoLFxuICAgIHdyaXRlVHJlZTogSW1tdXRhYmxlVHJlZTxOb2RlPixcbiAgICBub2RlOiBOb2RlXG4gICk6IE5vZGUge1xuICAgIGlmICh3cml0ZVRyZWUudmFsdWUgIT0gbnVsbCkge1xuICAgICAgLy8gU2luY2UgdGhlcmUgYSB3cml0ZSBpcyBhbHdheXMgYSBsZWFmLCB3ZSdyZSBkb25lIGhlcmVcbiAgICAgIHJldHVybiBub2RlLnVwZGF0ZUNoaWxkKHJlbGF0aXZlUGF0aCwgd3JpdGVUcmVlLnZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHByaW9yaXR5V3JpdGUgPSBudWxsO1xuICAgICAgd3JpdGVUcmVlLmNoaWxkcmVuLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24oY2hpbGRLZXksIGNoaWxkVHJlZSkge1xuICAgICAgICBpZiAoY2hpbGRLZXkgPT09ICcucHJpb3JpdHknKSB7XG4gICAgICAgICAgLy8gQXBwbHkgcHJpb3JpdGllcyBhdCB0aGUgZW5kIHNvIHdlIGRvbid0IHVwZGF0ZSBwcmlvcml0aWVzIGZvciBlaXRoZXIgZW1wdHkgbm9kZXMgb3IgZm9yZ2V0XG4gICAgICAgICAgLy8gdG8gYXBwbHkgcHJpb3JpdGllcyB0byBlbXB0eSBub2RlcyB0aGF0IGFyZSBsYXRlciBmaWxsZWRcbiAgICAgICAgICBhc3NlcnQoXG4gICAgICAgICAgICBjaGlsZFRyZWUudmFsdWUgIT09IG51bGwsXG4gICAgICAgICAgICAnUHJpb3JpdHkgd3JpdGVzIG11c3QgYWx3YXlzIGJlIGxlYWYgbm9kZXMnXG4gICAgICAgICAgKTtcbiAgICAgICAgICBwcmlvcml0eVdyaXRlID0gY2hpbGRUcmVlLnZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vZGUgPSBDb21wb3VuZFdyaXRlLmFwcGx5U3VidHJlZVdyaXRlXyhcbiAgICAgICAgICAgIHJlbGF0aXZlUGF0aC5jaGlsZChjaGlsZEtleSksXG4gICAgICAgICAgICBjaGlsZFRyZWUsXG4gICAgICAgICAgICBub2RlXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyBJZiB0aGVyZSB3YXMgYSBwcmlvcml0eSB3cml0ZSwgd2Ugb25seSBhcHBseSBpdCBpZiB0aGUgbm9kZSBpcyBub3QgZW1wdHlcbiAgICAgIGlmICghbm9kZS5nZXRDaGlsZChyZWxhdGl2ZVBhdGgpLmlzRW1wdHkoKSAmJiBwcmlvcml0eVdyaXRlICE9PSBudWxsKSB7XG4gICAgICAgIG5vZGUgPSBub2RlLnVwZGF0ZUNoaWxkKHJlbGF0aXZlUGF0aC5jaGlsZCgnLnByaW9yaXR5JyksIHByaW9yaXR5V3JpdGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuICB9O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IGZpcmViYXNlIGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgZm9yRWFjaCwgY29udGFpbnMsIGlzRW1wdHksIGdldENvdW50LCBzYWZlR2V0IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgZXJyb3IsIGxvZywgbG9nV3JhcHBlciwgd2FybiwgT2JqZWN0VG9VbmlxdWVLZXkgfSBmcm9tICcuL3V0aWwvdXRpbCc7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi91dGlsL1BhdGgnO1xuaW1wb3J0IHsgVmlzaWJpbGl0eU1vbml0b3IgfSBmcm9tICcuL3V0aWwvVmlzaWJpbGl0eU1vbml0b3InO1xuaW1wb3J0IHsgT25saW5lTW9uaXRvciB9IGZyb20gJy4vdXRpbC9PbmxpbmVNb25pdG9yJztcbmltcG9ydCB7IGlzQWRtaW4sIGlzVmFsaWRGb3JtYXQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBDb25uZWN0aW9uIH0gZnJvbSAnLi4vcmVhbHRpbWUvQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBDT05TVEFOVFMgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBpc01vYmlsZUNvcmRvdmEsIGlzUmVhY3ROYXRpdmUsIGlzTm9kZVNkayB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IFNlcnZlckFjdGlvbnMgfSBmcm9tICcuL1NlcnZlckFjdGlvbnMnO1xuaW1wb3J0IHsgQXV0aFRva2VuUHJvdmlkZXIgfSBmcm9tICcuL0F1dGhUb2tlblByb3ZpZGVyJztcbmltcG9ydCB7IFJlcG9JbmZvIH0gZnJvbSAnLi9SZXBvSW5mbyc7XG5pbXBvcnQgeyBRdWVyeSB9IGZyb20gJy4uL2FwaS9RdWVyeSc7XG5cbmNvbnN0IFJFQ09OTkVDVF9NSU5fREVMQVkgPSAxMDAwO1xuY29uc3QgUkVDT05ORUNUX01BWF9ERUxBWV9ERUZBVUxUID0gNjAgKiA1ICogMTAwMDsgLy8gNSBtaW51dGVzIGluIG1pbGxpc2Vjb25kcyAoQ2FzZTogMTg1OClcbmNvbnN0IFJFQ09OTkVDVF9NQVhfREVMQVlfRk9SX0FETUlOUyA9IDMwICogMTAwMDsgLy8gMzAgc2Vjb25kcyBmb3IgYWRtaW4gY2xpZW50cyAobGlrZWx5IHRvIGJlIGEgYmFja2VuZCBzZXJ2ZXIpXG5jb25zdCBSRUNPTk5FQ1RfREVMQVlfTVVMVElQTElFUiA9IDEuMztcbmNvbnN0IFJFQ09OTkVDVF9ERUxBWV9SRVNFVF9USU1FT1VUID0gMzAwMDA7IC8vIFJlc2V0IGRlbGF5IGJhY2sgdG8gTUlOX0RFTEFZIGFmdGVyIGJlaW5nIGNvbm5lY3RlZCBmb3IgMzBzZWMuXG5jb25zdCBTRVJWRVJfS0lMTF9JTlRFUlJVUFRfUkVBU09OID0gJ3NlcnZlcl9raWxsJztcblxuLy8gSWYgYXV0aCBmYWlscyByZXBlYXRlZGx5LCB3ZSdsbCBhc3N1bWUgc29tZXRoaW5nIGlzIHdyb25nIGFuZCBsb2cgYSB3YXJuaW5nIC8gYmFjayBvZmYuXG5jb25zdCBJTlZBTElEX0FVVEhfVE9LRU5fVEhSRVNIT0xEID0gMztcblxuaW50ZXJmYWNlIExpc3RlblNwZWMge1xuICBvbkNvbXBsZXRlKHM6IHN0cmluZywgcD86IGFueSk6IHZvaWQ7XG5cbiAgaGFzaEZuKCk6IHN0cmluZztcblxuICBxdWVyeTogUXVlcnk7XG4gIHRhZzogbnVtYmVyIHwgbnVsbDtcbn1cblxuaW50ZXJmYWNlIE9uRGlzY29ubmVjdFJlcXVlc3Qge1xuICBwYXRoU3RyaW5nOiBzdHJpbmc7XG4gIGFjdGlvbjogc3RyaW5nO1xuICBkYXRhOiBhbnk7XG4gIG9uQ29tcGxldGU/OiAoYTogc3RyaW5nLCBiOiBzdHJpbmcpID0+IHZvaWQ7XG59XG5cbmludGVyZmFjZSBPdXRzdGFuZGluZ1B1dCB7XG4gIGFjdGlvbjogc3RyaW5nO1xuICByZXF1ZXN0OiBPYmplY3Q7XG4gIHF1ZXVlZD86IGJvb2xlYW47XG4gIG9uQ29tcGxldGU6IChhOiBzdHJpbmcsIGI/OiBzdHJpbmcpID0+IHZvaWQ7XG59XG5cbi8qKlxuICogRmlyZWJhc2UgY29ubmVjdGlvbi4gIEFic3RyYWN0cyB3aXJlIHByb3RvY29sIGFuZCBoYW5kbGVzIHJlY29ubmVjdGluZy5cbiAqXG4gKiBOT1RFOiBBbGwgSlNPTiBvYmplY3RzIHNlbnQgdG8gdGhlIHJlYWx0aW1lIGNvbm5lY3Rpb24gbXVzdCBoYXZlIHByb3BlcnR5IG5hbWVzIGVuY2xvc2VkXG4gKiBpbiBxdW90ZXMgdG8gbWFrZSBzdXJlIHRoZSBjbG9zdXJlIGNvbXBpbGVyIGRvZXMgbm90IG1pbmlmeSB0aGVtLlxuICovXG5leHBvcnQgY2xhc3MgUGVyc2lzdGVudENvbm5lY3Rpb24gZXh0ZW5kcyBTZXJ2ZXJBY3Rpb25zIHtcbiAgLy8gVXNlZCBmb3IgZGlhZ25vc3RpYyBsb2dnaW5nLlxuICBpZCA9IFBlcnNpc3RlbnRDb25uZWN0aW9uLm5leHRQZXJzaXN0ZW50Q29ubmVjdGlvbklkXysrO1xuICBwcml2YXRlIGxvZ18gPSBsb2dXcmFwcGVyKCdwOicgKyB0aGlzLmlkICsgJzonKTtcblxuICAvKiogQHByaXZhdGUge09iamVjdH0gKi9cbiAgcHJpdmF0ZSBpbnRlcnJ1cHRSZWFzb25zXzogeyBbcmVhc29uOiBzdHJpbmddOiBib29sZWFuIH0gPSB7fTtcbiAgcHJpdmF0ZSBsaXN0ZW5zXzogeyBbcGF0aDogc3RyaW5nXTogeyBbcXVlcnlJZDogc3RyaW5nXTogTGlzdGVuU3BlYyB9IH0gPSB7fTtcbiAgcHJpdmF0ZSBvdXRzdGFuZGluZ1B1dHNfOiBPdXRzdGFuZGluZ1B1dFtdID0gW107XG4gIHByaXZhdGUgb3V0c3RhbmRpbmdQdXRDb3VudF8gPSAwO1xuICBwcml2YXRlIG9uRGlzY29ubmVjdFJlcXVlc3RRdWV1ZV86IE9uRGlzY29ubmVjdFJlcXVlc3RbXSA9IFtdO1xuICBwcml2YXRlIGNvbm5lY3RlZF8gPSBmYWxzZTtcbiAgcHJpdmF0ZSByZWNvbm5lY3REZWxheV8gPSBSRUNPTk5FQ1RfTUlOX0RFTEFZO1xuICBwcml2YXRlIG1heFJlY29ubmVjdERlbGF5XyA9IFJFQ09OTkVDVF9NQVhfREVMQVlfREVGQVVMVDtcbiAgcHJpdmF0ZSBzZWN1cml0eURlYnVnQ2FsbGJhY2tfOiAoKGE6IE9iamVjdCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcbiAgbGFzdFNlc3Npb25JZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgLyoqIEBwcml2YXRlIHtudW1iZXJ8bnVsbH0gKi9cbiAgcHJpdmF0ZSBlc3RhYmxpc2hDb25uZWN0aW9uVGltZXJfOiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gIHByaXZhdGUgdmlzaWJsZV86IGJvb2xlYW4gPSBmYWxzZTtcblxuICAvLyBCZWZvcmUgd2UgZ2V0IGNvbm5lY3RlZCwgd2Uga2VlcCBhIHF1ZXVlIG9mIHBlbmRpbmcgbWVzc2FnZXMgdG8gc2VuZC5cbiAgcHJpdmF0ZSByZXF1ZXN0Q0JIYXNoXzogeyBbazogbnVtYmVyXTogKGE6IGFueSkgPT4gdm9pZCB9ID0ge307XG4gIHByaXZhdGUgcmVxdWVzdE51bWJlcl8gPSAwO1xuXG4gIC8qKiBAcHJpdmF0ZSB7P3tcbiAgICogICBzZW5kUmVxdWVzdChPYmplY3QpLFxuICAgKiAgIGNsb3NlKClcbiAgICogfX0gKi9cbiAgcHJpdmF0ZSByZWFsdGltZV86IHtcbiAgICBzZW5kUmVxdWVzdChhOiBPYmplY3QpOiB2b2lkO1xuICAgIGNsb3NlKCk6IHZvaWQ7XG4gIH0gfCBudWxsID0gbnVsbDtcblxuICAvKiogQHByaXZhdGUge3N0cmluZ3xudWxsfSAqL1xuICBwcml2YXRlIGF1dGhUb2tlbl86IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGZvcmNlVG9rZW5SZWZyZXNoXyA9IGZhbHNlO1xuICBwcml2YXRlIGludmFsaWRBdXRoVG9rZW5Db3VudF8gPSAwO1xuXG4gIHByaXZhdGUgZmlyc3RDb25uZWN0aW9uXyA9IHRydWU7XG4gIHByaXZhdGUgbGFzdENvbm5lY3Rpb25BdHRlbXB0VGltZV86IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGxhc3RDb25uZWN0aW9uRXN0YWJsaXNoZWRUaW1lXzogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBuZXh0UGVyc2lzdGVudENvbm5lY3Rpb25JZF8gPSAwO1xuXG4gIC8qKlxuICAgKiBDb3VudGVyIGZvciBudW1iZXIgb2YgY29ubmVjdGlvbnMgY3JlYXRlZC4gTWFpbmx5IHVzZWQgZm9yIHRhZ2dpbmcgaW4gdGhlIGxvZ3NcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgc3RhdGljIG5leHRDb25uZWN0aW9uSWRfID0gMDtcblxuICAvKipcbiAgICogQGltcGxlbWVudHMge1NlcnZlckFjdGlvbnN9XG4gICAqIEBwYXJhbSB7IVJlcG9JbmZvfSByZXBvSW5mb18gRGF0YSBhYm91dCB0aGUgbmFtZXNwYWNlIHdlIGFyZSBjb25uZWN0aW5nIHRvXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nLCAqLCBib29sZWFuLCA/bnVtYmVyKX0gb25EYXRhVXBkYXRlXyBBIGNhbGxiYWNrIGZvciBuZXcgZGF0YSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICogQHBhcmFtIG9uQ29ubmVjdFN0YXR1c19cbiAgICogQHBhcmFtIG9uU2VydmVySW5mb1VwZGF0ZV9cbiAgICogQHBhcmFtIGF1dGhUb2tlblByb3ZpZGVyX1xuICAgKiBAcGFyYW0gYXV0aE92ZXJyaWRlX1xuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZXBvSW5mb186IFJlcG9JbmZvLFxuICAgIHByaXZhdGUgb25EYXRhVXBkYXRlXzogKFxuICAgICAgYTogc3RyaW5nLFxuICAgICAgYjogYW55LFxuICAgICAgYzogYm9vbGVhbixcbiAgICAgIGQ6IG51bWJlciB8IG51bGxcbiAgICApID0+IHZvaWQsXG4gICAgcHJpdmF0ZSBvbkNvbm5lY3RTdGF0dXNfOiAoYTogYm9vbGVhbikgPT4gdm9pZCxcbiAgICBwcml2YXRlIG9uU2VydmVySW5mb1VwZGF0ZV86IChhOiBhbnkpID0+IHZvaWQsXG4gICAgcHJpdmF0ZSBhdXRoVG9rZW5Qcm92aWRlcl86IEF1dGhUb2tlblByb3ZpZGVyLFxuICAgIHByaXZhdGUgYXV0aE92ZXJyaWRlXz86IE9iamVjdCB8IG51bGxcbiAgKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGlmIChhdXRoT3ZlcnJpZGVfICYmICFpc05vZGVTZGsoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnQXV0aCBvdmVycmlkZSBzcGVjaWZpZWQgaW4gb3B0aW9ucywgYnV0IG5vdCBzdXBwb3J0ZWQgb24gbm9uIE5vZGUuanMgcGxhdGZvcm1zJ1xuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5zY2hlZHVsZUNvbm5lY3RfKDApO1xuXG4gICAgVmlzaWJpbGl0eU1vbml0b3IuZ2V0SW5zdGFuY2UoKS5vbigndmlzaWJsZScsIHRoaXMub25WaXNpYmxlXywgdGhpcyk7XG5cbiAgICBpZiAocmVwb0luZm9fLmhvc3QuaW5kZXhPZignZmJsb2NhbCcpID09PSAtMSkge1xuICAgICAgT25saW5lTW9uaXRvci5nZXRJbnN0YW5jZSgpLm9uKCdvbmxpbmUnLCB0aGlzLm9uT25saW5lXywgdGhpcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IXN0cmluZ30gYWN0aW9uXG4gICAqIEBwYXJhbSB7Kn0gYm9keVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCopPX0gb25SZXNwb25zZVxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBwcm90ZWN0ZWQgc2VuZFJlcXVlc3QoXG4gICAgYWN0aW9uOiBzdHJpbmcsXG4gICAgYm9keTogYW55LFxuICAgIG9uUmVzcG9uc2U/OiAoYTogYW55KSA9PiB2b2lkXG4gICkge1xuICAgIGNvbnN0IGN1clJlcU51bSA9ICsrdGhpcy5yZXF1ZXN0TnVtYmVyXztcblxuICAgIGNvbnN0IG1zZyA9IHsgcjogY3VyUmVxTnVtLCBhOiBhY3Rpb24sIGI6IGJvZHkgfTtcbiAgICB0aGlzLmxvZ18oc3RyaW5naWZ5KG1zZykpO1xuICAgIGFzc2VydChcbiAgICAgIHRoaXMuY29ubmVjdGVkXyxcbiAgICAgIFwic2VuZFJlcXVlc3QgY2FsbCB3aGVuIHdlJ3JlIG5vdCBjb25uZWN0ZWQgbm90IGFsbG93ZWQuXCJcbiAgICApO1xuICAgIHRoaXMucmVhbHRpbWVfLnNlbmRSZXF1ZXN0KG1zZyk7XG4gICAgaWYgKG9uUmVzcG9uc2UpIHtcbiAgICAgIHRoaXMucmVxdWVzdENCSGFzaF9bY3VyUmVxTnVtXSA9IG9uUmVzcG9uc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBsaXN0ZW4oXG4gICAgcXVlcnk6IFF1ZXJ5LFxuICAgIGN1cnJlbnRIYXNoRm46ICgpID0+IHN0cmluZyxcbiAgICB0YWc6IG51bWJlciB8IG51bGwsXG4gICAgb25Db21wbGV0ZTogKGE6IHN0cmluZywgYjogYW55KSA9PiB2b2lkXG4gICkge1xuICAgIGNvbnN0IHF1ZXJ5SWQgPSBxdWVyeS5xdWVyeUlkZW50aWZpZXIoKTtcbiAgICBjb25zdCBwYXRoU3RyaW5nID0gcXVlcnkucGF0aC50b1N0cmluZygpO1xuICAgIHRoaXMubG9nXygnTGlzdGVuIGNhbGxlZCBmb3IgJyArIHBhdGhTdHJpbmcgKyAnICcgKyBxdWVyeUlkKTtcbiAgICB0aGlzLmxpc3RlbnNfW3BhdGhTdHJpbmddID0gdGhpcy5saXN0ZW5zX1twYXRoU3RyaW5nXSB8fCB7fTtcbiAgICBhc3NlcnQoXG4gICAgICBxdWVyeS5nZXRRdWVyeVBhcmFtcygpLmlzRGVmYXVsdCgpIHx8XG4gICAgICAgICFxdWVyeS5nZXRRdWVyeVBhcmFtcygpLmxvYWRzQWxsRGF0YSgpLFxuICAgICAgJ2xpc3RlbigpIGNhbGxlZCBmb3Igbm9uLWRlZmF1bHQgYnV0IGNvbXBsZXRlIHF1ZXJ5J1xuICAgICk7XG4gICAgYXNzZXJ0KFxuICAgICAgIXRoaXMubGlzdGVuc19bcGF0aFN0cmluZ11bcXVlcnlJZF0sXG4gICAgICAnbGlzdGVuKCkgY2FsbGVkIHR3aWNlIGZvciBzYW1lIHBhdGgvcXVlcnlJZC4nXG4gICAgKTtcbiAgICBjb25zdCBsaXN0ZW5TcGVjOiBMaXN0ZW5TcGVjID0ge1xuICAgICAgb25Db21wbGV0ZTogb25Db21wbGV0ZSxcbiAgICAgIGhhc2hGbjogY3VycmVudEhhc2hGbixcbiAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgIHRhZzogdGFnXG4gICAgfTtcbiAgICB0aGlzLmxpc3RlbnNfW3BhdGhTdHJpbmddW3F1ZXJ5SWRdID0gbGlzdGVuU3BlYztcblxuICAgIGlmICh0aGlzLmNvbm5lY3RlZF8pIHtcbiAgICAgIHRoaXMuc2VuZExpc3Rlbl8obGlzdGVuU3BlYyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IXtvbkNvbXBsZXRlKCksXG4gICAqICAgICAgICAgICBoYXNoRm4oKTohc3RyaW5nLFxuICAgKiAgICAgICAgICAgcXVlcnk6ICFRdWVyeSxcbiAgICogICAgICAgICAgIHRhZzogP251bWJlcn19IGxpc3RlblNwZWNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgc2VuZExpc3Rlbl8obGlzdGVuU3BlYzogTGlzdGVuU3BlYykge1xuICAgIGNvbnN0IHF1ZXJ5ID0gbGlzdGVuU3BlYy5xdWVyeTtcbiAgICBjb25zdCBwYXRoU3RyaW5nID0gcXVlcnkucGF0aC50b1N0cmluZygpO1xuICAgIGNvbnN0IHF1ZXJ5SWQgPSBxdWVyeS5xdWVyeUlkZW50aWZpZXIoKTtcbiAgICB0aGlzLmxvZ18oJ0xpc3RlbiBvbiAnICsgcGF0aFN0cmluZyArICcgZm9yICcgKyBxdWVyeUlkKTtcbiAgICBjb25zdCByZXE6IHsgW2s6IHN0cmluZ106IGFueSB9ID0geyAvKnBhdGgqLyBwOiBwYXRoU3RyaW5nIH07XG5cbiAgICBjb25zdCBhY3Rpb24gPSAncSc7XG5cbiAgICAvLyBPbmx5IGJvdGhlciB0byBzZW5kIHF1ZXJ5IGlmIGl0J3Mgbm9uLWRlZmF1bHQuXG4gICAgaWYgKGxpc3RlblNwZWMudGFnKSB7XG4gICAgICByZXFbJ3EnXSA9IHF1ZXJ5LnF1ZXJ5T2JqZWN0KCk7XG4gICAgICByZXFbJ3QnXSA9IGxpc3RlblNwZWMudGFnO1xuICAgIH1cblxuICAgIHJlcVsvKmhhc2gqLyAnaCddID0gbGlzdGVuU3BlYy5oYXNoRm4oKTtcblxuICAgIHRoaXMuc2VuZFJlcXVlc3QoYWN0aW9uLCByZXEsIChtZXNzYWdlOiB7IFtrOiBzdHJpbmddOiBhbnkgfSkgPT4ge1xuICAgICAgY29uc3QgcGF5bG9hZDogYW55ID0gbWVzc2FnZVsvKmRhdGEqLyAnZCddO1xuICAgICAgY29uc3Qgc3RhdHVzOiBzdHJpbmcgPSBtZXNzYWdlWy8qc3RhdHVzKi8gJ3MnXTtcblxuICAgICAgLy8gcHJpbnQgd2FybmluZ3MgaW4gYW55IGNhc2UuLi5cbiAgICAgIFBlcnNpc3RlbnRDb25uZWN0aW9uLndhcm5Pbkxpc3Rlbldhcm5pbmdzXyhwYXlsb2FkLCBxdWVyeSk7XG5cbiAgICAgIGNvbnN0IGN1cnJlbnRMaXN0ZW5TcGVjID1cbiAgICAgICAgdGhpcy5saXN0ZW5zX1twYXRoU3RyaW5nXSAmJiB0aGlzLmxpc3RlbnNfW3BhdGhTdHJpbmddW3F1ZXJ5SWRdO1xuICAgICAgLy8gb25seSB0cmlnZ2VyIGFjdGlvbnMgaWYgdGhlIGxpc3RlbiBoYXNuJ3QgYmVlbiByZW1vdmVkIGFuZCByZWFkZGVkXG4gICAgICBpZiAoY3VycmVudExpc3RlblNwZWMgPT09IGxpc3RlblNwZWMpIHtcbiAgICAgICAgdGhpcy5sb2dfKCdsaXN0ZW4gcmVzcG9uc2UnLCBtZXNzYWdlKTtcblxuICAgICAgICBpZiAoc3RhdHVzICE9PSAnb2snKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5fKHBhdGhTdHJpbmcsIHF1ZXJ5SWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxpc3RlblNwZWMub25Db21wbGV0ZSkge1xuICAgICAgICAgIGxpc3RlblNwZWMub25Db21wbGV0ZShzdGF0dXMsIHBheWxvYWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHsqfSBwYXlsb2FkXG4gICAqIEBwYXJhbSB7IVF1ZXJ5fSBxdWVyeVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgd2Fybk9uTGlzdGVuV2FybmluZ3NfKHBheWxvYWQ6IGFueSwgcXVlcnk6IFF1ZXJ5KSB7XG4gICAgaWYgKHBheWxvYWQgJiYgdHlwZW9mIHBheWxvYWQgPT09ICdvYmplY3QnICYmIGNvbnRhaW5zKHBheWxvYWQsICd3JykpIHtcbiAgICAgIGNvbnN0IHdhcm5pbmdzID0gc2FmZUdldChwYXlsb2FkLCAndycpO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkod2FybmluZ3MpICYmIH53YXJuaW5ncy5pbmRleE9mKCdub19pbmRleCcpKSB7XG4gICAgICAgIGNvbnN0IGluZGV4U3BlYyA9XG4gICAgICAgICAgJ1wiLmluZGV4T25cIjogXCInICtcbiAgICAgICAgICBxdWVyeVxuICAgICAgICAgICAgLmdldFF1ZXJ5UGFyYW1zKClcbiAgICAgICAgICAgIC5nZXRJbmRleCgpXG4gICAgICAgICAgICAudG9TdHJpbmcoKSArXG4gICAgICAgICAgJ1wiJztcbiAgICAgICAgY29uc3QgaW5kZXhQYXRoID0gcXVlcnkucGF0aC50b1N0cmluZygpO1xuICAgICAgICB3YXJuKFxuICAgICAgICAgIGBVc2luZyBhbiB1bnNwZWNpZmllZCBpbmRleC4gWW91ciBkYXRhIHdpbGwgYmUgZG93bmxvYWRlZCBhbmQgYCArXG4gICAgICAgICAgICBgZmlsdGVyZWQgb24gdGhlIGNsaWVudC4gQ29uc2lkZXIgYWRkaW5nICR7aW5kZXhTcGVjfSBhdCBgICtcbiAgICAgICAgICAgIGAke2luZGV4UGF0aH0gdG8geW91ciBzZWN1cml0eSBydWxlcyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIHJlZnJlc2hBdXRoVG9rZW4odG9rZW46IHN0cmluZykge1xuICAgIHRoaXMuYXV0aFRva2VuXyA9IHRva2VuO1xuICAgIHRoaXMubG9nXygnQXV0aCB0b2tlbiByZWZyZXNoZWQnKTtcbiAgICBpZiAodGhpcy5hdXRoVG9rZW5fKSB7XG4gICAgICB0aGlzLnRyeUF1dGgoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy9JZiB3ZSdyZSBjb25uZWN0ZWQgd2Ugd2FudCB0byBsZXQgdGhlIHNlcnZlciBrbm93IHRvIHVuYXV0aGVudGljYXRlIHVzLiBJZiB3ZSdyZSBub3QgY29ubmVjdGVkLCBzaW1wbHkgZGVsZXRlXG4gICAgICAvL3RoZSBjcmVkZW50aWFsIHNvIHdlIGRvbnQgYmVjb21lIGF1dGhlbnRpY2F0ZWQgbmV4dCB0aW1lIHdlIGNvbm5lY3QuXG4gICAgICBpZiAodGhpcy5jb25uZWN0ZWRfKSB7XG4gICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoJ3VuYXV0aCcsIHt9LCAoKSA9PiB7fSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5yZWR1Y2VSZWNvbm5lY3REZWxheUlmQWRtaW5DcmVkZW50aWFsXyh0b2tlbik7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshc3RyaW5nfSBjcmVkZW50aWFsXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHJlZHVjZVJlY29ubmVjdERlbGF5SWZBZG1pbkNyZWRlbnRpYWxfKGNyZWRlbnRpYWw6IHN0cmluZykge1xuICAgIC8vIE5PVEU6IFRoaXMgaXNuJ3QgaW50ZW5kZWQgdG8gYmUgYnVsbGV0cHJvb2YgKGEgbWFsaWNpb3VzIGRldmVsb3BlciBjYW4gYWx3YXlzIGp1c3QgbW9kaWZ5IHRoZSBjbGllbnQpLlxuICAgIC8vIEFkZGl0aW9uYWxseSwgd2UgZG9uJ3QgYm90aGVyIHJlc2V0dGluZyB0aGUgbWF4IGRlbGF5IGJhY2sgdG8gdGhlIGRlZmF1bHQgaWYgYXV0aCBmYWlscyAvIGV4cGlyZXMuXG4gICAgY29uc3QgaXNGaXJlYmFzZVNlY3JldCA9IGNyZWRlbnRpYWwgJiYgY3JlZGVudGlhbC5sZW5ndGggPT09IDQwO1xuICAgIGlmIChpc0ZpcmViYXNlU2VjcmV0IHx8IGlzQWRtaW4oY3JlZGVudGlhbCkpIHtcbiAgICAgIHRoaXMubG9nXyhcbiAgICAgICAgJ0FkbWluIGF1dGggY3JlZGVudGlhbCBkZXRlY3RlZC4gIFJlZHVjaW5nIG1heCByZWNvbm5lY3QgdGltZS4nXG4gICAgICApO1xuICAgICAgdGhpcy5tYXhSZWNvbm5lY3REZWxheV8gPSBSRUNPTk5FQ1RfTUFYX0RFTEFZX0ZPUl9BRE1JTlM7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEF0dGVtcHRzIHRvIGF1dGhlbnRpY2F0ZSB3aXRoIHRoZSBnaXZlbiBjcmVkZW50aWFscy4gSWYgdGhlIGF1dGhlbnRpY2F0aW9uIGF0dGVtcHQgZmFpbHMsIGl0J3MgdHJpZ2dlcmVkIGxpa2VcbiAgICogYSBhdXRoIHJldm9rZWQgKHRoZSBjb25uZWN0aW9uIGlzIGNsb3NlZCkuXG4gICAqL1xuICB0cnlBdXRoKCkge1xuICAgIGlmICh0aGlzLmNvbm5lY3RlZF8gJiYgdGhpcy5hdXRoVG9rZW5fKSB7XG4gICAgICBjb25zdCB0b2tlbiA9IHRoaXMuYXV0aFRva2VuXztcbiAgICAgIGNvbnN0IGF1dGhNZXRob2QgPSBpc1ZhbGlkRm9ybWF0KHRva2VuKSA/ICdhdXRoJyA6ICdnYXV0aCc7XG4gICAgICBjb25zdCByZXF1ZXN0RGF0YTogeyBbazogc3RyaW5nXTogYW55IH0gPSB7IGNyZWQ6IHRva2VuIH07XG4gICAgICBpZiAodGhpcy5hdXRoT3ZlcnJpZGVfID09PSBudWxsKSB7XG4gICAgICAgIHJlcXVlc3REYXRhWydub2F1dGgnXSA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLmF1dGhPdmVycmlkZV8gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJlcXVlc3REYXRhWydhdXRodmFyJ10gPSB0aGlzLmF1dGhPdmVycmlkZV87XG4gICAgICB9XG4gICAgICB0aGlzLnNlbmRSZXF1ZXN0KGF1dGhNZXRob2QsIHJlcXVlc3REYXRhLCAocmVzOiB7IFtrOiBzdHJpbmddOiBhbnkgfSkgPT4ge1xuICAgICAgICBjb25zdCBzdGF0dXM6IHN0cmluZyA9IHJlc1svKnN0YXR1cyovICdzJ107XG4gICAgICAgIGNvbnN0IGRhdGE6IHN0cmluZyA9IHJlc1svKmRhdGEqLyAnZCddIHx8ICdlcnJvcic7XG5cbiAgICAgICAgaWYgKHRoaXMuYXV0aFRva2VuXyA9PT0gdG9rZW4pIHtcbiAgICAgICAgICBpZiAoc3RhdHVzID09PSAnb2snKSB7XG4gICAgICAgICAgICB0aGlzLmludmFsaWRBdXRoVG9rZW5Db3VudF8gPSAwO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBUcmlnZ2VycyByZWNvbm5lY3QgYW5kIGZvcmNlIHJlZnJlc2ggZm9yIGF1dGggdG9rZW5cbiAgICAgICAgICAgIHRoaXMub25BdXRoUmV2b2tlZF8oc3RhdHVzLCBkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgdW5saXN0ZW4ocXVlcnk6IFF1ZXJ5LCB0YWc6IG51bWJlciB8IG51bGwpIHtcbiAgICBjb25zdCBwYXRoU3RyaW5nID0gcXVlcnkucGF0aC50b1N0cmluZygpO1xuICAgIGNvbnN0IHF1ZXJ5SWQgPSBxdWVyeS5xdWVyeUlkZW50aWZpZXIoKTtcblxuICAgIHRoaXMubG9nXygnVW5saXN0ZW4gY2FsbGVkIGZvciAnICsgcGF0aFN0cmluZyArICcgJyArIHF1ZXJ5SWQpO1xuXG4gICAgYXNzZXJ0KFxuICAgICAgcXVlcnkuZ2V0UXVlcnlQYXJhbXMoKS5pc0RlZmF1bHQoKSB8fFxuICAgICAgICAhcXVlcnkuZ2V0UXVlcnlQYXJhbXMoKS5sb2Fkc0FsbERhdGEoKSxcbiAgICAgICd1bmxpc3RlbigpIGNhbGxlZCBmb3Igbm9uLWRlZmF1bHQgYnV0IGNvbXBsZXRlIHF1ZXJ5J1xuICAgICk7XG4gICAgY29uc3QgbGlzdGVuID0gdGhpcy5yZW1vdmVMaXN0ZW5fKHBhdGhTdHJpbmcsIHF1ZXJ5SWQpO1xuICAgIGlmIChsaXN0ZW4gJiYgdGhpcy5jb25uZWN0ZWRfKSB7XG4gICAgICB0aGlzLnNlbmRVbmxpc3Rlbl8ocGF0aFN0cmluZywgcXVlcnlJZCwgcXVlcnkucXVlcnlPYmplY3QoKSwgdGFnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNlbmRVbmxpc3Rlbl8oXG4gICAgcGF0aFN0cmluZzogc3RyaW5nLFxuICAgIHF1ZXJ5SWQ6IHN0cmluZyxcbiAgICBxdWVyeU9iajogT2JqZWN0LFxuICAgIHRhZzogbnVtYmVyIHwgbnVsbFxuICApIHtcbiAgICB0aGlzLmxvZ18oJ1VubGlzdGVuIG9uICcgKyBwYXRoU3RyaW5nICsgJyBmb3IgJyArIHF1ZXJ5SWQpO1xuXG4gICAgY29uc3QgcmVxOiB7IFtrOiBzdHJpbmddOiBhbnkgfSA9IHsgLypwYXRoKi8gcDogcGF0aFN0cmluZyB9O1xuICAgIGNvbnN0IGFjdGlvbiA9ICduJztcbiAgICAvLyBPbmx5IGJvdGhlciBzZW5kaW5nIHF1ZXJ5SWQgaWYgaXQncyBub24tZGVmYXVsdC5cbiAgICBpZiAodGFnKSB7XG4gICAgICByZXFbJ3EnXSA9IHF1ZXJ5T2JqO1xuICAgICAgcmVxWyd0J10gPSB0YWc7XG4gICAgfVxuXG4gICAgdGhpcy5zZW5kUmVxdWVzdChhY3Rpb24sIHJlcSk7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIG9uRGlzY29ubmVjdFB1dChcbiAgICBwYXRoU3RyaW5nOiBzdHJpbmcsXG4gICAgZGF0YTogYW55LFxuICAgIG9uQ29tcGxldGU/OiAoYTogc3RyaW5nLCBiOiBzdHJpbmcpID0+IHZvaWRcbiAgKSB7XG4gICAgaWYgKHRoaXMuY29ubmVjdGVkXykge1xuICAgICAgdGhpcy5zZW5kT25EaXNjb25uZWN0XygnbycsIHBhdGhTdHJpbmcsIGRhdGEsIG9uQ29tcGxldGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9uRGlzY29ubmVjdFJlcXVlc3RRdWV1ZV8ucHVzaCh7XG4gICAgICAgIHBhdGhTdHJpbmcsXG4gICAgICAgIGFjdGlvbjogJ28nLFxuICAgICAgICBkYXRhLFxuICAgICAgICBvbkNvbXBsZXRlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIG9uRGlzY29ubmVjdE1lcmdlKFxuICAgIHBhdGhTdHJpbmc6IHN0cmluZyxcbiAgICBkYXRhOiBhbnksXG4gICAgb25Db21wbGV0ZT86IChhOiBzdHJpbmcsIGI6IHN0cmluZykgPT4gdm9pZFxuICApIHtcbiAgICBpZiAodGhpcy5jb25uZWN0ZWRfKSB7XG4gICAgICB0aGlzLnNlbmRPbkRpc2Nvbm5lY3RfKCdvbScsIHBhdGhTdHJpbmcsIGRhdGEsIG9uQ29tcGxldGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9uRGlzY29ubmVjdFJlcXVlc3RRdWV1ZV8ucHVzaCh7XG4gICAgICAgIHBhdGhTdHJpbmcsXG4gICAgICAgIGFjdGlvbjogJ29tJyxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgb25Db21wbGV0ZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBvbkRpc2Nvbm5lY3RDYW5jZWwoXG4gICAgcGF0aFN0cmluZzogc3RyaW5nLFxuICAgIG9uQ29tcGxldGU/OiAoYTogc3RyaW5nLCBiOiBzdHJpbmcpID0+IHZvaWRcbiAgKSB7XG4gICAgaWYgKHRoaXMuY29ubmVjdGVkXykge1xuICAgICAgdGhpcy5zZW5kT25EaXNjb25uZWN0Xygnb2MnLCBwYXRoU3RyaW5nLCBudWxsLCBvbkNvbXBsZXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RSZXF1ZXN0UXVldWVfLnB1c2goe1xuICAgICAgICBwYXRoU3RyaW5nLFxuICAgICAgICBhY3Rpb246ICdvYycsXG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIG9uQ29tcGxldGVcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2VuZE9uRGlzY29ubmVjdF8oXG4gICAgYWN0aW9uOiBzdHJpbmcsXG4gICAgcGF0aFN0cmluZzogc3RyaW5nLFxuICAgIGRhdGE6IGFueSxcbiAgICBvbkNvbXBsZXRlOiAoYTogc3RyaW5nLCBiOiBzdHJpbmcpID0+IHZvaWRcbiAgKSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IHsgLypwYXRoKi8gcDogcGF0aFN0cmluZywgLypkYXRhKi8gZDogZGF0YSB9O1xuICAgIHRoaXMubG9nXygnb25EaXNjb25uZWN0ICcgKyBhY3Rpb24sIHJlcXVlc3QpO1xuICAgIHRoaXMuc2VuZFJlcXVlc3QoYWN0aW9uLCByZXF1ZXN0LCAocmVzcG9uc2U6IHsgW2s6IHN0cmluZ106IGFueSB9KSA9PiB7XG4gICAgICBpZiAob25Db21wbGV0ZSkge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG9uQ29tcGxldGUocmVzcG9uc2VbLypzdGF0dXMqLyAncyddLCByZXNwb25zZVsvKiBkYXRhICovICdkJ10pO1xuICAgICAgICB9LCBNYXRoLmZsb29yKDApKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgcHV0KFxuICAgIHBhdGhTdHJpbmc6IHN0cmluZyxcbiAgICBkYXRhOiBhbnksXG4gICAgb25Db21wbGV0ZT86IChhOiBzdHJpbmcsIGI6IHN0cmluZykgPT4gdm9pZCxcbiAgICBoYXNoPzogc3RyaW5nXG4gICkge1xuICAgIHRoaXMucHV0SW50ZXJuYWwoJ3AnLCBwYXRoU3RyaW5nLCBkYXRhLCBvbkNvbXBsZXRlLCBoYXNoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgbWVyZ2UoXG4gICAgcGF0aFN0cmluZzogc3RyaW5nLFxuICAgIGRhdGE6IGFueSxcbiAgICBvbkNvbXBsZXRlOiAoYTogc3RyaW5nLCBiOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkLFxuICAgIGhhc2g/OiBzdHJpbmdcbiAgKSB7XG4gICAgdGhpcy5wdXRJbnRlcm5hbCgnbScsIHBhdGhTdHJpbmcsIGRhdGEsIG9uQ29tcGxldGUsIGhhc2gpO1xuICB9XG5cbiAgcHV0SW50ZXJuYWwoXG4gICAgYWN0aW9uOiBzdHJpbmcsXG4gICAgcGF0aFN0cmluZzogc3RyaW5nLFxuICAgIGRhdGE6IGFueSxcbiAgICBvbkNvbXBsZXRlOiAoYTogc3RyaW5nLCBiOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkLFxuICAgIGhhc2g/OiBzdHJpbmdcbiAgKSB7XG4gICAgY29uc3QgcmVxdWVzdDogeyBbazogc3RyaW5nXTogYW55IH0gPSB7XG4gICAgICAvKnBhdGgqLyBwOiBwYXRoU3RyaW5nLFxuICAgICAgLypkYXRhKi8gZDogZGF0YVxuICAgIH07XG5cbiAgICBpZiAoaGFzaCAhPT0gdW5kZWZpbmVkKSByZXF1ZXN0Wy8qaGFzaCovICdoJ10gPSBoYXNoO1xuXG4gICAgLy8gVE9ETzogT25seSBrZWVwIHRyYWNrIG9mIHRoZSBtb3N0IHJlY2VudCBwdXQgZm9yIGEgZ2l2ZW4gcGF0aD9cbiAgICB0aGlzLm91dHN0YW5kaW5nUHV0c18ucHVzaCh7XG4gICAgICBhY3Rpb24sXG4gICAgICByZXF1ZXN0LFxuICAgICAgb25Db21wbGV0ZVxuICAgIH0pO1xuXG4gICAgdGhpcy5vdXRzdGFuZGluZ1B1dENvdW50XysrO1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5vdXRzdGFuZGluZ1B1dHNfLmxlbmd0aCAtIDE7XG5cbiAgICBpZiAodGhpcy5jb25uZWN0ZWRfKSB7XG4gICAgICB0aGlzLnNlbmRQdXRfKGluZGV4KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sb2dfKCdCdWZmZXJpbmcgcHV0OiAnICsgcGF0aFN0cmluZyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZW5kUHV0XyhpbmRleDogbnVtYmVyKSB7XG4gICAgY29uc3QgYWN0aW9uID0gdGhpcy5vdXRzdGFuZGluZ1B1dHNfW2luZGV4XS5hY3Rpb247XG4gICAgY29uc3QgcmVxdWVzdCA9IHRoaXMub3V0c3RhbmRpbmdQdXRzX1tpbmRleF0ucmVxdWVzdDtcbiAgICBjb25zdCBvbkNvbXBsZXRlID0gdGhpcy5vdXRzdGFuZGluZ1B1dHNfW2luZGV4XS5vbkNvbXBsZXRlO1xuICAgIHRoaXMub3V0c3RhbmRpbmdQdXRzX1tpbmRleF0ucXVldWVkID0gdGhpcy5jb25uZWN0ZWRfO1xuXG4gICAgdGhpcy5zZW5kUmVxdWVzdChhY3Rpb24sIHJlcXVlc3QsIChtZXNzYWdlOiB7IFtrOiBzdHJpbmddOiBhbnkgfSkgPT4ge1xuICAgICAgdGhpcy5sb2dfKGFjdGlvbiArICcgcmVzcG9uc2UnLCBtZXNzYWdlKTtcblxuICAgICAgZGVsZXRlIHRoaXMub3V0c3RhbmRpbmdQdXRzX1tpbmRleF07XG4gICAgICB0aGlzLm91dHN0YW5kaW5nUHV0Q291bnRfLS07XG5cbiAgICAgIC8vIENsZWFuIHVwIGFycmF5IG9jY2FzaW9uYWxseS5cbiAgICAgIGlmICh0aGlzLm91dHN0YW5kaW5nUHV0Q291bnRfID09PSAwKSB7XG4gICAgICAgIHRoaXMub3V0c3RhbmRpbmdQdXRzXyA9IFtdO1xuICAgICAgfVxuXG4gICAgICBpZiAob25Db21wbGV0ZSlcbiAgICAgICAgb25Db21wbGV0ZShtZXNzYWdlWy8qc3RhdHVzKi8gJ3MnXSwgbWVzc2FnZVsvKiBkYXRhICovICdkJ10pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICByZXBvcnRTdGF0cyhzdGF0czogeyBbazogc3RyaW5nXTogYW55IH0pIHtcbiAgICAvLyBJZiB3ZSdyZSBub3QgY29ubmVjdGVkLCB3ZSBqdXN0IGRyb3AgdGhlIHN0YXRzLlxuICAgIGlmICh0aGlzLmNvbm5lY3RlZF8pIHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB7IC8qY291bnRlcnMqLyBjOiBzdGF0cyB9O1xuICAgICAgdGhpcy5sb2dfKCdyZXBvcnRTdGF0cycsIHJlcXVlc3QpO1xuXG4gICAgICB0aGlzLnNlbmRSZXF1ZXN0KC8qc3RhdHMqLyAncycsIHJlcXVlc3QsIHJlc3VsdCA9PiB7XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IHJlc3VsdFsvKnN0YXR1cyovICdzJ107XG4gICAgICAgIGlmIChzdGF0dXMgIT09ICdvaycpIHtcbiAgICAgICAgICBjb25zdCBlcnJvclJlYXNvbiA9IHJlc3VsdFsvKiBkYXRhICovICdkJ107XG4gICAgICAgICAgdGhpcy5sb2dfKCdyZXBvcnRTdGF0cycsICdFcnJvciBzZW5kaW5nIHN0YXRzOiAnICsgZXJyb3JSZWFzb24pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHsqfSBtZXNzYWdlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIG9uRGF0YU1lc3NhZ2VfKG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KSB7XG4gICAgaWYgKCdyJyBpbiBtZXNzYWdlKSB7XG4gICAgICAvLyB0aGlzIGlzIGEgcmVzcG9uc2VcbiAgICAgIHRoaXMubG9nXygnZnJvbSBzZXJ2ZXI6ICcgKyBzdHJpbmdpZnkobWVzc2FnZSkpO1xuICAgICAgY29uc3QgcmVxTnVtID0gbWVzc2FnZVsnciddO1xuICAgICAgY29uc3Qgb25SZXNwb25zZSA9IHRoaXMucmVxdWVzdENCSGFzaF9bcmVxTnVtXTtcbiAgICAgIGlmIChvblJlc3BvbnNlKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnJlcXVlc3RDQkhhc2hfW3JlcU51bV07XG4gICAgICAgIG9uUmVzcG9uc2UobWVzc2FnZVsvKmJvZHkqLyAnYiddKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCdlcnJvcicgaW4gbWVzc2FnZSkge1xuICAgICAgdGhyb3cgJ0Egc2VydmVyLXNpZGUgZXJyb3IgaGFzIG9jY3VycmVkOiAnICsgbWVzc2FnZVsnZXJyb3InXTtcbiAgICB9IGVsc2UgaWYgKCdhJyBpbiBtZXNzYWdlKSB7XG4gICAgICAvLyBhIGFuZCBiIGFyZSBhY3Rpb24gYW5kIGJvZHksIHJlc3BlY3RpdmVseVxuICAgICAgdGhpcy5vbkRhdGFQdXNoXyhtZXNzYWdlWydhJ10sIG1lc3NhZ2VbJ2InXSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBvbkRhdGFQdXNoXyhhY3Rpb246IHN0cmluZywgYm9keTogeyBbazogc3RyaW5nXTogYW55IH0pIHtcbiAgICB0aGlzLmxvZ18oJ2hhbmRsZVNlcnZlck1lc3NhZ2UnLCBhY3Rpb24sIGJvZHkpO1xuICAgIGlmIChhY3Rpb24gPT09ICdkJylcbiAgICAgIHRoaXMub25EYXRhVXBkYXRlXyhcbiAgICAgICAgYm9keVsvKnBhdGgqLyAncCddLFxuICAgICAgICBib2R5Wy8qZGF0YSovICdkJ10sXG4gICAgICAgIC8qaXNNZXJnZSovIGZhbHNlLFxuICAgICAgICBib2R5Wyd0J11cbiAgICAgICk7XG4gICAgZWxzZSBpZiAoYWN0aW9uID09PSAnbScpXG4gICAgICB0aGlzLm9uRGF0YVVwZGF0ZV8oXG4gICAgICAgIGJvZHlbLypwYXRoKi8gJ3AnXSxcbiAgICAgICAgYm9keVsvKmRhdGEqLyAnZCddLFxuICAgICAgICAvKmlzTWVyZ2U9Ki8gdHJ1ZSxcbiAgICAgICAgYm9keVsndCddXG4gICAgICApO1xuICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2MnKVxuICAgICAgdGhpcy5vbkxpc3RlblJldm9rZWRfKGJvZHlbLypwYXRoKi8gJ3AnXSwgYm9keVsvKnF1ZXJ5Ki8gJ3EnXSk7XG4gICAgZWxzZSBpZiAoYWN0aW9uID09PSAnYWMnKVxuICAgICAgdGhpcy5vbkF1dGhSZXZva2VkXyhcbiAgICAgICAgYm9keVsvKnN0YXR1cyBjb2RlKi8gJ3MnXSxcbiAgICAgICAgYm9keVsvKiBleHBsYW5hdGlvbiAqLyAnZCddXG4gICAgICApO1xuICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gJ3NkJykgdGhpcy5vblNlY3VyaXR5RGVidWdQYWNrZXRfKGJvZHkpO1xuICAgIGVsc2VcbiAgICAgIGVycm9yKFxuICAgICAgICAnVW5yZWNvZ25pemVkIGFjdGlvbiByZWNlaXZlZCBmcm9tIHNlcnZlcjogJyArXG4gICAgICAgICAgc3RyaW5naWZ5KGFjdGlvbikgK1xuICAgICAgICAgICdcXG5BcmUgeW91IHVzaW5nIHRoZSBsYXRlc3QgY2xpZW50PydcbiAgICAgICk7XG4gIH1cblxuICBwcml2YXRlIG9uUmVhZHlfKHRpbWVzdGFtcDogbnVtYmVyLCBzZXNzaW9uSWQ6IHN0cmluZykge1xuICAgIHRoaXMubG9nXygnY29ubmVjdGlvbiByZWFkeScpO1xuICAgIHRoaXMuY29ubmVjdGVkXyA9IHRydWU7XG4gICAgdGhpcy5sYXN0Q29ubmVjdGlvbkVzdGFibGlzaGVkVGltZV8gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB0aGlzLmhhbmRsZVRpbWVzdGFtcF8odGltZXN0YW1wKTtcbiAgICB0aGlzLmxhc3RTZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG4gICAgaWYgKHRoaXMuZmlyc3RDb25uZWN0aW9uXykge1xuICAgICAgdGhpcy5zZW5kQ29ubmVjdFN0YXRzXygpO1xuICAgIH1cbiAgICB0aGlzLnJlc3RvcmVTdGF0ZV8oKTtcbiAgICB0aGlzLmZpcnN0Q29ubmVjdGlvbl8gPSBmYWxzZTtcbiAgICB0aGlzLm9uQ29ubmVjdFN0YXR1c18odHJ1ZSk7XG4gIH1cblxuICBwcml2YXRlIHNjaGVkdWxlQ29ubmVjdF8odGltZW91dDogbnVtYmVyKSB7XG4gICAgYXNzZXJ0KFxuICAgICAgIXRoaXMucmVhbHRpbWVfLFxuICAgICAgXCJTY2hlZHVsaW5nIGEgY29ubmVjdCB3aGVuIHdlJ3JlIGFscmVhZHkgY29ubmVjdGVkL2luZz9cIlxuICAgICk7XG5cbiAgICBpZiAodGhpcy5lc3RhYmxpc2hDb25uZWN0aW9uVGltZXJfKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5lc3RhYmxpc2hDb25uZWN0aW9uVGltZXJfKTtcbiAgICB9XG5cbiAgICAvLyBOT1RFOiBFdmVuIHdoZW4gdGltZW91dCBpcyAwLCBpdCdzIGltcG9ydGFudCB0byBkbyBhIHNldFRpbWVvdXQgdG8gd29yayBhcm91bmQgYW4gaW5mdXJpYXRpbmcgXCJTZWN1cml0eSBFcnJvclwiIGluXG4gICAgLy8gRmlyZWZveCB3aGVuIHRyeWluZyB0byB3cml0ZSB0byBvdXIgbG9uZy1wb2xsaW5nIGlmcmFtZSBpbiBzb21lIHNjZW5hcmlvcyAoZS5nLiBGb3JnZSBvciBvdXIgdW5pdCB0ZXN0cykuXG5cbiAgICB0aGlzLmVzdGFibGlzaENvbm5lY3Rpb25UaW1lcl8gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZXN0YWJsaXNoQ29ubmVjdGlvblRpbWVyXyA9IG51bGw7XG4gICAgICB0aGlzLmVzdGFibGlzaENvbm5lY3Rpb25fKCk7XG4gICAgfSwgTWF0aC5mbG9vcih0aW1lb3V0KSkgYXMgYW55O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmlzaWJsZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBvblZpc2libGVfKHZpc2libGU6IGJvb2xlYW4pIHtcbiAgICAvLyBOT1RFOiBUYWJiaW5nIGF3YXkgYW5kIGJhY2sgdG8gYSB3aW5kb3cgd2lsbCBkZWZlYXQgb3VyIHJlY29ubmVjdCBiYWNrb2ZmLCBidXQgSSB0aGluayB0aGF0J3MgZmluZS5cbiAgICBpZiAoXG4gICAgICB2aXNpYmxlICYmXG4gICAgICAhdGhpcy52aXNpYmxlXyAmJlxuICAgICAgdGhpcy5yZWNvbm5lY3REZWxheV8gPT09IHRoaXMubWF4UmVjb25uZWN0RGVsYXlfXG4gICAgKSB7XG4gICAgICB0aGlzLmxvZ18oJ1dpbmRvdyBiZWNhbWUgdmlzaWJsZS4gIFJlZHVjaW5nIGRlbGF5LicpO1xuICAgICAgdGhpcy5yZWNvbm5lY3REZWxheV8gPSBSRUNPTk5FQ1RfTUlOX0RFTEFZO1xuXG4gICAgICBpZiAoIXRoaXMucmVhbHRpbWVfKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVDb25uZWN0XygwKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy52aXNpYmxlXyA9IHZpc2libGU7XG4gIH1cblxuICBwcml2YXRlIG9uT25saW5lXyhvbmxpbmU6IGJvb2xlYW4pIHtcbiAgICBpZiAob25saW5lKSB7XG4gICAgICB0aGlzLmxvZ18oJ0Jyb3dzZXIgd2VudCBvbmxpbmUuJyk7XG4gICAgICB0aGlzLnJlY29ubmVjdERlbGF5XyA9IFJFQ09OTkVDVF9NSU5fREVMQVk7XG4gICAgICBpZiAoIXRoaXMucmVhbHRpbWVfKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVDb25uZWN0XygwKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sb2dfKCdCcm93c2VyIHdlbnQgb2ZmbGluZS4gIEtpbGxpbmcgY29ubmVjdGlvbi4nKTtcbiAgICAgIGlmICh0aGlzLnJlYWx0aW1lXykge1xuICAgICAgICB0aGlzLnJlYWx0aW1lXy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgb25SZWFsdGltZURpc2Nvbm5lY3RfKCkge1xuICAgIHRoaXMubG9nXygnZGF0YSBjbGllbnQgZGlzY29ubmVjdGVkJyk7XG4gICAgdGhpcy5jb25uZWN0ZWRfID0gZmFsc2U7XG4gICAgdGhpcy5yZWFsdGltZV8gPSBudWxsO1xuXG4gICAgLy8gU2luY2Ugd2UgZG9uJ3Qga25vdyBpZiBvdXIgc2VudCB0cmFuc2FjdGlvbnMgc3VjY2VlZGVkIG9yIG5vdCwgd2UgbmVlZCB0byBjYW5jZWwgdGhlbS5cbiAgICB0aGlzLmNhbmNlbFNlbnRUcmFuc2FjdGlvbnNfKCk7XG5cbiAgICAvLyBDbGVhciBvdXQgdGhlIHBlbmRpbmcgcmVxdWVzdHMuXG4gICAgdGhpcy5yZXF1ZXN0Q0JIYXNoXyA9IHt9O1xuXG4gICAgaWYgKHRoaXMuc2hvdWxkUmVjb25uZWN0XygpKSB7XG4gICAgICBpZiAoIXRoaXMudmlzaWJsZV8pIHtcbiAgICAgICAgdGhpcy5sb2dfKFwiV2luZG93IGlzbid0IHZpc2libGUuICBEZWxheWluZyByZWNvbm5lY3QuXCIpO1xuICAgICAgICB0aGlzLnJlY29ubmVjdERlbGF5XyA9IHRoaXMubWF4UmVjb25uZWN0RGVsYXlfO1xuICAgICAgICB0aGlzLmxhc3RDb25uZWN0aW9uQXR0ZW1wdFRpbWVfID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMubGFzdENvbm5lY3Rpb25Fc3RhYmxpc2hlZFRpbWVfKSB7XG4gICAgICAgIC8vIElmIHdlJ3ZlIGJlZW4gY29ubmVjdGVkIGxvbmcgZW5vdWdoLCByZXNldCByZWNvbm5lY3QgZGVsYXkgdG8gbWluaW11bS5cbiAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdENvbm5lY3RTdWNjZWVkZWQgPVxuICAgICAgICAgIG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdGhpcy5sYXN0Q29ubmVjdGlvbkVzdGFibGlzaGVkVGltZV87XG4gICAgICAgIGlmICh0aW1lU2luY2VMYXN0Q29ubmVjdFN1Y2NlZWRlZCA+IFJFQ09OTkVDVF9ERUxBWV9SRVNFVF9USU1FT1VUKVxuICAgICAgICAgIHRoaXMucmVjb25uZWN0RGVsYXlfID0gUkVDT05ORUNUX01JTl9ERUxBWTtcbiAgICAgICAgdGhpcy5sYXN0Q29ubmVjdGlvbkVzdGFibGlzaGVkVGltZV8gPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0aW1lU2luY2VMYXN0Q29ubmVjdEF0dGVtcHQgPVxuICAgICAgICBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRoaXMubGFzdENvbm5lY3Rpb25BdHRlbXB0VGltZV87XG4gICAgICBsZXQgcmVjb25uZWN0RGVsYXkgPSBNYXRoLm1heChcbiAgICAgICAgMCxcbiAgICAgICAgdGhpcy5yZWNvbm5lY3REZWxheV8gLSB0aW1lU2luY2VMYXN0Q29ubmVjdEF0dGVtcHRcbiAgICAgICk7XG4gICAgICByZWNvbm5lY3REZWxheSA9IE1hdGgucmFuZG9tKCkgKiByZWNvbm5lY3REZWxheTtcblxuICAgICAgdGhpcy5sb2dfKCdUcnlpbmcgdG8gcmVjb25uZWN0IGluICcgKyByZWNvbm5lY3REZWxheSArICdtcycpO1xuICAgICAgdGhpcy5zY2hlZHVsZUNvbm5lY3RfKHJlY29ubmVjdERlbGF5KTtcblxuICAgICAgLy8gQWRqdXN0IHJlY29ubmVjdCBkZWxheSBmb3IgbmV4dCB0aW1lLlxuICAgICAgdGhpcy5yZWNvbm5lY3REZWxheV8gPSBNYXRoLm1pbihcbiAgICAgICAgdGhpcy5tYXhSZWNvbm5lY3REZWxheV8sXG4gICAgICAgIHRoaXMucmVjb25uZWN0RGVsYXlfICogUkVDT05ORUNUX0RFTEFZX01VTFRJUExJRVJcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMub25Db25uZWN0U3RhdHVzXyhmYWxzZSk7XG4gIH1cblxuICBwcml2YXRlIGVzdGFibGlzaENvbm5lY3Rpb25fKCkge1xuICAgIGlmICh0aGlzLnNob3VsZFJlY29ubmVjdF8oKSkge1xuICAgICAgdGhpcy5sb2dfKCdNYWtpbmcgYSBjb25uZWN0aW9uIGF0dGVtcHQnKTtcbiAgICAgIHRoaXMubGFzdENvbm5lY3Rpb25BdHRlbXB0VGltZV8gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgIHRoaXMubGFzdENvbm5lY3Rpb25Fc3RhYmxpc2hlZFRpbWVfID0gbnVsbDtcbiAgICAgIGNvbnN0IG9uRGF0YU1lc3NhZ2UgPSB0aGlzLm9uRGF0YU1lc3NhZ2VfLmJpbmQodGhpcyk7XG4gICAgICBjb25zdCBvblJlYWR5ID0gdGhpcy5vblJlYWR5Xy5iaW5kKHRoaXMpO1xuICAgICAgY29uc3Qgb25EaXNjb25uZWN0ID0gdGhpcy5vblJlYWx0aW1lRGlzY29ubmVjdF8uYmluZCh0aGlzKTtcbiAgICAgIGNvbnN0IGNvbm5JZCA9IHRoaXMuaWQgKyAnOicgKyBQZXJzaXN0ZW50Q29ubmVjdGlvbi5uZXh0Q29ubmVjdGlvbklkXysrO1xuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICBjb25zdCBsYXN0U2Vzc2lvbklkID0gdGhpcy5sYXN0U2Vzc2lvbklkO1xuICAgICAgbGV0IGNhbmNlbGVkID0gZmFsc2U7XG4gICAgICBsZXQgY29ubmVjdGlvbjogQ29ubmVjdGlvbiB8IG51bGwgPSBudWxsO1xuICAgICAgY29uc3QgY2xvc2VGbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoY29ubmVjdGlvbikge1xuICAgICAgICAgIGNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYW5jZWxlZCA9IHRydWU7XG4gICAgICAgICAgb25EaXNjb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjb25zdCBzZW5kUmVxdWVzdEZuID0gZnVuY3Rpb24obXNnOiBPYmplY3QpIHtcbiAgICAgICAgYXNzZXJ0KFxuICAgICAgICAgIGNvbm5lY3Rpb24sXG4gICAgICAgICAgXCJzZW5kUmVxdWVzdCBjYWxsIHdoZW4gd2UncmUgbm90IGNvbm5lY3RlZCBub3QgYWxsb3dlZC5cIlxuICAgICAgICApO1xuICAgICAgICBjb25uZWN0aW9uLnNlbmRSZXF1ZXN0KG1zZyk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLnJlYWx0aW1lXyA9IHtcbiAgICAgICAgY2xvc2U6IGNsb3NlRm4sXG4gICAgICAgIHNlbmRSZXF1ZXN0OiBzZW5kUmVxdWVzdEZuXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBmb3JjZVJlZnJlc2ggPSB0aGlzLmZvcmNlVG9rZW5SZWZyZXNoXztcbiAgICAgIHRoaXMuZm9yY2VUb2tlblJlZnJlc2hfID0gZmFsc2U7XG5cbiAgICAgIC8vIEZpcnN0IGZldGNoIGF1dGggdG9rZW4sIGFuZCBlc3RhYmxpc2ggY29ubmVjdGlvbiBhZnRlciBmZXRjaGluZyB0aGUgdG9rZW4gd2FzIHN1Y2Nlc3NmdWxcbiAgICAgIHRoaXMuYXV0aFRva2VuUHJvdmlkZXJfXG4gICAgICAgIC5nZXRUb2tlbihmb3JjZVJlZnJlc2gpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgIGlmICghY2FuY2VsZWQpIHtcbiAgICAgICAgICAgIGxvZygnZ2V0VG9rZW4oKSBjb21wbGV0ZWQuIENyZWF0aW5nIGNvbm5lY3Rpb24uJyk7XG4gICAgICAgICAgICBzZWxmLmF1dGhUb2tlbl8gPSByZXN1bHQgJiYgcmVzdWx0LmFjY2Vzc1Rva2VuO1xuICAgICAgICAgICAgY29ubmVjdGlvbiA9IG5ldyBDb25uZWN0aW9uKFxuICAgICAgICAgICAgICBjb25uSWQsXG4gICAgICAgICAgICAgIHNlbGYucmVwb0luZm9fLFxuICAgICAgICAgICAgICBvbkRhdGFNZXNzYWdlLFxuICAgICAgICAgICAgICBvblJlYWR5LFxuICAgICAgICAgICAgICBvbkRpc2Nvbm5lY3QsXG4gICAgICAgICAgICAgIC8qIG9uS2lsbD0gKi8gZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgd2FybihyZWFzb24gKyAnICgnICsgc2VsZi5yZXBvSW5mb18udG9TdHJpbmcoKSArICcpJyk7XG4gICAgICAgICAgICAgICAgc2VsZi5pbnRlcnJ1cHQoU0VSVkVSX0tJTExfSU5URVJSVVBUX1JFQVNPTik7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGxhc3RTZXNzaW9uSWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvZygnZ2V0VG9rZW4oKSBjb21wbGV0ZWQgYnV0IHdhcyBjYW5jZWxlZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4obnVsbCwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICBzZWxmLmxvZ18oJ0ZhaWxlZCB0byBnZXQgdG9rZW46ICcgKyBlcnJvcik7XG4gICAgICAgICAgaWYgKCFjYW5jZWxlZCkge1xuICAgICAgICAgICAgaWYgKENPTlNUQU5UUy5OT0RFX0FETUlOKSB7XG4gICAgICAgICAgICAgIC8vIFRoaXMgbWF5IGJlIGEgY3JpdGljYWwgZXJyb3IgZm9yIHRoZSBBZG1pbiBOb2RlLmpzIFNESywgc28gbG9nIGEgd2FybmluZy5cbiAgICAgICAgICAgICAgLy8gQnV0IGdldFRva2VuKCkgbWF5IGFsc28ganVzdCBoYXZlIHRlbXBvcmFyaWx5IGZhaWxlZCwgc28gd2Ugc3RpbGwgd2FudCB0b1xuICAgICAgICAgICAgICAvLyBjb250aW51ZSByZXRyeWluZy5cbiAgICAgICAgICAgICAgd2FybihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbG9zZUZuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlYXNvblxuICAgKi9cbiAgaW50ZXJydXB0KHJlYXNvbjogc3RyaW5nKSB7XG4gICAgbG9nKCdJbnRlcnJ1cHRpbmcgY29ubmVjdGlvbiBmb3IgcmVhc29uOiAnICsgcmVhc29uKTtcbiAgICB0aGlzLmludGVycnVwdFJlYXNvbnNfW3JlYXNvbl0gPSB0cnVlO1xuICAgIGlmICh0aGlzLnJlYWx0aW1lXykge1xuICAgICAgdGhpcy5yZWFsdGltZV8uY2xvc2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuZXN0YWJsaXNoQ29ubmVjdGlvblRpbWVyXykge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5lc3RhYmxpc2hDb25uZWN0aW9uVGltZXJfKTtcbiAgICAgICAgdGhpcy5lc3RhYmxpc2hDb25uZWN0aW9uVGltZXJfID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmNvbm5lY3RlZF8pIHtcbiAgICAgICAgdGhpcy5vblJlYWx0aW1lRGlzY29ubmVjdF8oKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlYXNvblxuICAgKi9cbiAgcmVzdW1lKHJlYXNvbjogc3RyaW5nKSB7XG4gICAgbG9nKCdSZXN1bWluZyBjb25uZWN0aW9uIGZvciByZWFzb246ICcgKyByZWFzb24pO1xuICAgIGRlbGV0ZSB0aGlzLmludGVycnVwdFJlYXNvbnNfW3JlYXNvbl07XG4gICAgaWYgKGlzRW1wdHkodGhpcy5pbnRlcnJ1cHRSZWFzb25zXykpIHtcbiAgICAgIHRoaXMucmVjb25uZWN0RGVsYXlfID0gUkVDT05ORUNUX01JTl9ERUxBWTtcbiAgICAgIGlmICghdGhpcy5yZWFsdGltZV8pIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZUNvbm5lY3RfKDApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlVGltZXN0YW1wXyh0aW1lc3RhbXA6IG51bWJlcikge1xuICAgIGNvbnN0IGRlbHRhID0gdGltZXN0YW1wIC0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgdGhpcy5vblNlcnZlckluZm9VcGRhdGVfKHsgc2VydmVyVGltZU9mZnNldDogZGVsdGEgfSk7XG4gIH1cblxuICBwcml2YXRlIGNhbmNlbFNlbnRUcmFuc2FjdGlvbnNfKCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vdXRzdGFuZGluZ1B1dHNfLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBwdXQgPSB0aGlzLm91dHN0YW5kaW5nUHV0c19baV07XG4gICAgICBpZiAocHV0ICYmIC8qaGFzaCovICdoJyBpbiBwdXQucmVxdWVzdCAmJiBwdXQucXVldWVkKSB7XG4gICAgICAgIGlmIChwdXQub25Db21wbGV0ZSkgcHV0Lm9uQ29tcGxldGUoJ2Rpc2Nvbm5lY3QnKTtcblxuICAgICAgICBkZWxldGUgdGhpcy5vdXRzdGFuZGluZ1B1dHNfW2ldO1xuICAgICAgICB0aGlzLm91dHN0YW5kaW5nUHV0Q291bnRfLS07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2xlYW4gdXAgYXJyYXkgb2NjYXNpb25hbGx5LlxuICAgIGlmICh0aGlzLm91dHN0YW5kaW5nUHV0Q291bnRfID09PSAwKSB0aGlzLm91dHN0YW5kaW5nUHV0c18gPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFzdHJpbmd9IHBhdGhTdHJpbmdcbiAgICogQHBhcmFtIHtBcnJheS48Kj49fSBxdWVyeVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBvbkxpc3RlblJldm9rZWRfKHBhdGhTdHJpbmc6IHN0cmluZywgcXVlcnk/OiBhbnlbXSkge1xuICAgIC8vIFJlbW92ZSB0aGUgbGlzdGVuIGFuZCBtYW51ZmFjdHVyZSBhIFwicGVybWlzc2lvbl9kZW5pZWRcIiBlcnJvciBmb3IgdGhlIGZhaWxlZCBsaXN0ZW4uXG4gICAgbGV0IHF1ZXJ5SWQ7XG4gICAgaWYgKCFxdWVyeSkge1xuICAgICAgcXVlcnlJZCA9ICdkZWZhdWx0JztcbiAgICB9IGVsc2Uge1xuICAgICAgcXVlcnlJZCA9IHF1ZXJ5Lm1hcChxID0+IE9iamVjdFRvVW5pcXVlS2V5KHEpKS5qb2luKCckJyk7XG4gICAgfVxuICAgIGNvbnN0IGxpc3RlbiA9IHRoaXMucmVtb3ZlTGlzdGVuXyhwYXRoU3RyaW5nLCBxdWVyeUlkKTtcbiAgICBpZiAobGlzdGVuICYmIGxpc3Rlbi5vbkNvbXBsZXRlKSBsaXN0ZW4ub25Db21wbGV0ZSgncGVybWlzc2lvbl9kZW5pZWQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFzdHJpbmd9IHBhdGhTdHJpbmdcbiAgICogQHBhcmFtIHshc3RyaW5nfSBxdWVyeUlkXG4gICAqIEByZXR1cm4ge3txdWVyaWVzOkFycmF5LjxRdWVyeT4sIG9uQ29tcGxldGU6ZnVuY3Rpb24oc3RyaW5nKX19XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHJlbW92ZUxpc3Rlbl8ocGF0aFN0cmluZzogc3RyaW5nLCBxdWVyeUlkOiBzdHJpbmcpOiBMaXN0ZW5TcGVjIHtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aFN0cmluZyA9IG5ldyBQYXRoKHBhdGhTdHJpbmcpLnRvU3RyaW5nKCk7IC8vIG5vcm1hbGl6ZSBwYXRoLlxuICAgIGxldCBsaXN0ZW47XG4gICAgaWYgKHRoaXMubGlzdGVuc19bbm9ybWFsaXplZFBhdGhTdHJpbmddICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGxpc3RlbiA9IHRoaXMubGlzdGVuc19bbm9ybWFsaXplZFBhdGhTdHJpbmddW3F1ZXJ5SWRdO1xuICAgICAgZGVsZXRlIHRoaXMubGlzdGVuc19bbm9ybWFsaXplZFBhdGhTdHJpbmddW3F1ZXJ5SWRdO1xuICAgICAgaWYgKGdldENvdW50KHRoaXMubGlzdGVuc19bbm9ybWFsaXplZFBhdGhTdHJpbmddKSA9PT0gMCkge1xuICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5zX1tub3JtYWxpemVkUGF0aFN0cmluZ107XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGFsbCBsaXN0ZW5zIGZvciB0aGlzIHBhdGggaGFzIGFscmVhZHkgYmVlbiByZW1vdmVkXG4gICAgICBsaXN0ZW4gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiBsaXN0ZW47XG4gIH1cblxuICBwcml2YXRlIG9uQXV0aFJldm9rZWRfKHN0YXR1c0NvZGU6IHN0cmluZywgZXhwbGFuYXRpb246IHN0cmluZykge1xuICAgIGxvZygnQXV0aCB0b2tlbiByZXZva2VkOiAnICsgc3RhdHVzQ29kZSArICcvJyArIGV4cGxhbmF0aW9uKTtcbiAgICB0aGlzLmF1dGhUb2tlbl8gPSBudWxsO1xuICAgIHRoaXMuZm9yY2VUb2tlblJlZnJlc2hfID0gdHJ1ZTtcbiAgICB0aGlzLnJlYWx0aW1lXy5jbG9zZSgpO1xuICAgIGlmIChzdGF0dXNDb2RlID09PSAnaW52YWxpZF90b2tlbicgfHwgc3RhdHVzQ29kZSA9PT0gJ3Blcm1pc3Npb25fZGVuaWVkJykge1xuICAgICAgLy8gV2UnbGwgd2FpdCBhIGNvdXBsZSB0aW1lcyBiZWZvcmUgbG9nZ2luZyB0aGUgd2FybmluZyAvIGluY3JlYXNpbmcgdGhlXG4gICAgICAvLyByZXRyeSBwZXJpb2Qgc2luY2Ugb2F1dGggdG9rZW5zIHdpbGwgcmVwb3J0IGFzIFwiaW52YWxpZFwiIGlmIHRoZXkncmVcbiAgICAgIC8vIGp1c3QgZXhwaXJlZC4gUGx1cyB0aGVyZSBtYXkgYmUgdHJhbnNpZW50IGlzc3VlcyB0aGF0IHJlc29sdmUgdGhlbXNlbHZlcy5cbiAgICAgIHRoaXMuaW52YWxpZEF1dGhUb2tlbkNvdW50XysrO1xuICAgICAgaWYgKHRoaXMuaW52YWxpZEF1dGhUb2tlbkNvdW50XyA+PSBJTlZBTElEX0FVVEhfVE9LRU5fVEhSRVNIT0xEKSB7XG4gICAgICAgIC8vIFNldCBhIGxvbmcgcmVjb25uZWN0IGRlbGF5IGJlY2F1c2UgcmVjb3ZlcnkgaXMgdW5saWtlbHlcbiAgICAgICAgdGhpcy5yZWNvbm5lY3REZWxheV8gPSBSRUNPTk5FQ1RfTUFYX0RFTEFZX0ZPUl9BRE1JTlM7XG5cbiAgICAgICAgLy8gTm90aWZ5IHRoZSBhdXRoIHRva2VuIHByb3ZpZGVyIHRoYXQgdGhlIHRva2VuIGlzIGludmFsaWQsIHdoaWNoIHdpbGwgbG9nXG4gICAgICAgIC8vIGEgd2FybmluZ1xuICAgICAgICB0aGlzLmF1dGhUb2tlblByb3ZpZGVyXy5ub3RpZnlGb3JJbnZhbGlkVG9rZW4oKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG9uU2VjdXJpdHlEZWJ1Z1BhY2tldF8oYm9keTogeyBbazogc3RyaW5nXTogYW55IH0pIHtcbiAgICBpZiAodGhpcy5zZWN1cml0eURlYnVnQ2FsbGJhY2tfKSB7XG4gICAgICB0aGlzLnNlY3VyaXR5RGVidWdDYWxsYmFja18oYm9keSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICgnbXNnJyBpbiBib2R5ICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zb2xlLmxvZygnRklSRUJBU0U6ICcgKyBib2R5Wydtc2cnXS5yZXBsYWNlKCdcXG4nLCAnXFxuRklSRUJBU0U6ICcpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlc3RvcmVTdGF0ZV8oKSB7XG4gICAgLy9SZS1hdXRoZW50aWNhdGUgb3Vyc2VsdmVzIGlmIHdlIGhhdmUgYSBjcmVkZW50aWFsIHN0b3JlZC5cbiAgICB0aGlzLnRyeUF1dGgoKTtcblxuICAgIC8vIFB1dHMgZGVwZW5kIG9uIGhhdmluZyByZWNlaXZlZCB0aGUgY29ycmVzcG9uZGluZyBkYXRhIHVwZGF0ZSBmcm9tIHRoZSBzZXJ2ZXIgYmVmb3JlIHRoZXkgY29tcGxldGUsIHNvIHdlIG11c3RcbiAgICAvLyBtYWtlIHN1cmUgdG8gc2VuZCBsaXN0ZW5zIGJlZm9yZSBwdXRzLlxuICAgIGZvckVhY2godGhpcy5saXN0ZW5zXywgKHBhdGhTdHJpbmc6IHN0cmluZywgcXVlcmllczogT2JqZWN0KSA9PiB7XG4gICAgICBmb3JFYWNoKHF1ZXJpZXMsIChrZXk6IHN0cmluZywgbGlzdGVuU3BlYzogTGlzdGVuU3BlYykgPT4ge1xuICAgICAgICB0aGlzLnNlbmRMaXN0ZW5fKGxpc3RlblNwZWMpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub3V0c3RhbmRpbmdQdXRzXy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMub3V0c3RhbmRpbmdQdXRzX1tpXSkgdGhpcy5zZW5kUHV0XyhpKTtcbiAgICB9XG5cbiAgICB3aGlsZSAodGhpcy5vbkRpc2Nvbm5lY3RSZXF1ZXN0UXVldWVfLmxlbmd0aCkge1xuICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMub25EaXNjb25uZWN0UmVxdWVzdFF1ZXVlXy5zaGlmdCgpO1xuICAgICAgdGhpcy5zZW5kT25EaXNjb25uZWN0XyhcbiAgICAgICAgcmVxdWVzdC5hY3Rpb24sXG4gICAgICAgIHJlcXVlc3QucGF0aFN0cmluZyxcbiAgICAgICAgcmVxdWVzdC5kYXRhLFxuICAgICAgICByZXF1ZXN0Lm9uQ29tcGxldGVcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIGNsaWVudCBzdGF0cyBmb3IgZmlyc3QgY29ubmVjdGlvblxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBzZW5kQ29ubmVjdFN0YXRzXygpIHtcbiAgICBjb25zdCBzdGF0czogeyBbazogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcblxuICAgIGxldCBjbGllbnROYW1lID0gJ2pzJztcbiAgICBpZiAoQ09OU1RBTlRTLk5PREVfQURNSU4pIHtcbiAgICAgIGNsaWVudE5hbWUgPSAnYWRtaW5fbm9kZSc7XG4gICAgfSBlbHNlIGlmIChDT05TVEFOVFMuTk9ERV9DTElFTlQpIHtcbiAgICAgIGNsaWVudE5hbWUgPSAnbm9kZSc7XG4gICAgfVxuXG4gICAgc3RhdHNbXG4gICAgICAnc2RrLicgKyBjbGllbnROYW1lICsgJy4nICsgZmlyZWJhc2UuU0RLX1ZFUlNJT04ucmVwbGFjZSgvXFwuL2csICctJylcbiAgICBdID0gMTtcblxuICAgIGlmIChpc01vYmlsZUNvcmRvdmEoKSkge1xuICAgICAgc3RhdHNbJ2ZyYW1ld29yay5jb3Jkb3ZhJ10gPSAxO1xuICAgIH0gZWxzZSBpZiAoaXNSZWFjdE5hdGl2ZSgpKSB7XG4gICAgICBzdGF0c1snZnJhbWV3b3JrLnJlYWN0bmF0aXZlJ10gPSAxO1xuICAgIH1cbiAgICB0aGlzLnJlcG9ydFN0YXRzKHN0YXRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBzaG91bGRSZWNvbm5lY3RfKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG9ubGluZSA9IE9ubGluZU1vbml0b3IuZ2V0SW5zdGFuY2UoKS5jdXJyZW50bHlPbmxpbmUoKTtcbiAgICByZXR1cm4gaXNFbXB0eSh0aGlzLmludGVycnVwdFJlYXNvbnNfKSAmJiBvbmxpbmU7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IGxvZ1dyYXBwZXIsIHdhcm4gfSBmcm9tICcuL3V0aWwvdXRpbCc7XG5pbXBvcnQgeyBqc29uRXZhbCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IHNhZmVHZXQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBxdWVyeXN0cmluZyB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IFNlcnZlckFjdGlvbnMgfSBmcm9tICcuL1NlcnZlckFjdGlvbnMnO1xuaW1wb3J0IHsgUmVwb0luZm8gfSBmcm9tICcuL1JlcG9JbmZvJztcbmltcG9ydCB7IEF1dGhUb2tlblByb3ZpZGVyIH0gZnJvbSAnLi9BdXRoVG9rZW5Qcm92aWRlcic7XG5pbXBvcnQgeyBRdWVyeSB9IGZyb20gJy4uL2FwaS9RdWVyeSc7XG5cbi8qKlxuICogQW4gaW1wbGVtZW50YXRpb24gb2YgU2VydmVyQWN0aW9ucyB0aGF0IGNvbW11bmljYXRlcyB3aXRoIHRoZSBzZXJ2ZXIgdmlhIFJFU1QgcmVxdWVzdHMuXG4gKiBUaGlzIGlzIG1vc3RseSB1c2VmdWwgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBjcmF3bGVycywgd2hlcmUgd2UgZG9uJ3Qgd2FudCB0byBzcGluIHVwIGEgZnVsbFxuICogcGVyc2lzdGVudCBjb25uZWN0aW9uICh1c2luZyBXZWJTb2NrZXRzIG9yIGxvbmctcG9sbGluZylcbiAqL1xuZXhwb3J0IGNsYXNzIFJlYWRvbmx5UmVzdENsaWVudCBleHRlbmRzIFNlcnZlckFjdGlvbnMge1xuICByZXBvcnRTdGF0cyhzdGF0czogeyBbazogc3RyaW5nXTogYW55IH0pOiB2b2lkIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gIH1cblxuICAvKiogQHByaXZhdGUge2Z1bmN0aW9uKC4uLlsqXSl9ICovXG4gIHByaXZhdGUgbG9nXzogKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkID0gbG9nV3JhcHBlcigncDpyZXN0OicpO1xuXG4gIC8qKlxuICAgKiBXZSBkb24ndCBhY3R1YWxseSBuZWVkIHRvIHRyYWNrIGxpc3RlbnMsIGV4Y2VwdCB0byBwcmV2ZW50IHVzIGNhbGxpbmcgYW4gb25Db21wbGV0ZSBmb3IgYSBsaXN0ZW5cbiAgICogdGhhdCdzIGJlZW4gcmVtb3ZlZC4gOi0vXG4gICAqXG4gICAqIEBwcml2YXRlIHshT2JqZWN0LjxzdHJpbmcsICFPYmplY3Q+fVxuICAgKi9cbiAgcHJpdmF0ZSBsaXN0ZW5zXzogeyBbazogc3RyaW5nXTogT2JqZWN0IH0gPSB7fTtcblxuICAvKipcbiAgICogQHBhcmFtIHshUXVlcnl9IHF1ZXJ5XG4gICAqIEBwYXJhbSB7P251bWJlcj19IHRhZ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgZ2V0TGlzdGVuSWRfKHF1ZXJ5OiBRdWVyeSwgdGFnPzogbnVtYmVyIHwgbnVsbCk6IHN0cmluZyB7XG4gICAgaWYgKHRhZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gJ3RhZyQnICsgdGFnO1xuICAgIH0gZWxzZSB7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIHF1ZXJ5LmdldFF1ZXJ5UGFyYW1zKCkuaXNEZWZhdWx0KCksXG4gICAgICAgIFwic2hvdWxkIGhhdmUgYSB0YWcgaWYgaXQncyBub3QgYSBkZWZhdWx0IHF1ZXJ5LlwiXG4gICAgICApO1xuICAgICAgcmV0dXJuIHF1ZXJ5LnBhdGgudG9TdHJpbmcoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshUmVwb0luZm99IHJlcG9JbmZvXyBEYXRhIGFib3V0IHRoZSBuYW1lc3BhY2Ugd2UgYXJlIGNvbm5lY3RpbmcgdG9cbiAgICogQHBhcmFtIHtmdW5jdGlvbihzdHJpbmcsICosIGJvb2xlYW4sID9udW1iZXIpfSBvbkRhdGFVcGRhdGVfIEEgY2FsbGJhY2sgZm9yIG5ldyBkYXRhIGZyb20gdGhlIHNlcnZlclxuICAgKiBAcGFyYW0ge0F1dGhUb2tlblByb3ZpZGVyfSBhdXRoVG9rZW5Qcm92aWRlcl9cbiAgICogQGltcGxlbWVudHMge1NlcnZlckFjdGlvbnN9XG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlcG9JbmZvXzogUmVwb0luZm8sXG4gICAgcHJpdmF0ZSBvbkRhdGFVcGRhdGVfOiAoXG4gICAgICBhOiBzdHJpbmcsXG4gICAgICBiOiBhbnksXG4gICAgICBjOiBib29sZWFuLFxuICAgICAgZDogbnVtYmVyIHwgbnVsbFxuICAgICkgPT4gdm9pZCxcbiAgICBwcml2YXRlIGF1dGhUb2tlblByb3ZpZGVyXzogQXV0aFRva2VuUHJvdmlkZXJcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdERvYyAqL1xuICBsaXN0ZW4oXG4gICAgcXVlcnk6IFF1ZXJ5LFxuICAgIGN1cnJlbnRIYXNoRm46ICgpID0+IHN0cmluZyxcbiAgICB0YWc6IG51bWJlciB8IG51bGwsXG4gICAgb25Db21wbGV0ZTogKGE6IHN0cmluZywgYjogYW55KSA9PiB2b2lkXG4gICkge1xuICAgIGNvbnN0IHBhdGhTdHJpbmcgPSBxdWVyeS5wYXRoLnRvU3RyaW5nKCk7XG4gICAgdGhpcy5sb2dfKFxuICAgICAgJ0xpc3RlbiBjYWxsZWQgZm9yICcgKyBwYXRoU3RyaW5nICsgJyAnICsgcXVlcnkucXVlcnlJZGVudGlmaWVyKClcbiAgICApO1xuXG4gICAgLy8gTWFyayB0aGlzIGxpc3RlbmVyIHNvIHdlIGNhbiB0ZWxsIGlmIGl0J3MgcmVtb3ZlZC5cbiAgICBjb25zdCBsaXN0ZW5JZCA9IFJlYWRvbmx5UmVzdENsaWVudC5nZXRMaXN0ZW5JZF8ocXVlcnksIHRhZyk7XG4gICAgY29uc3QgdGhpc0xpc3RlbiA9IHt9O1xuICAgIHRoaXMubGlzdGVuc19bbGlzdGVuSWRdID0gdGhpc0xpc3RlbjtcblxuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nUGFyYW1hdGVycyA9IHF1ZXJ5XG4gICAgICAuZ2V0UXVlcnlQYXJhbXMoKVxuICAgICAgLnRvUmVzdFF1ZXJ5U3RyaW5nUGFyYW1ldGVycygpO1xuXG4gICAgdGhpcy5yZXN0UmVxdWVzdF8oXG4gICAgICBwYXRoU3RyaW5nICsgJy5qc29uJyxcbiAgICAgIHF1ZXJ5U3RyaW5nUGFyYW1hdGVycyxcbiAgICAgIChlcnJvciwgcmVzdWx0KSA9PiB7XG4gICAgICAgIGxldCBkYXRhID0gcmVzdWx0O1xuXG4gICAgICAgIGlmIChlcnJvciA9PT0gNDA0KSB7XG4gICAgICAgICAgZGF0YSA9IG51bGw7XG4gICAgICAgICAgZXJyb3IgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVycm9yID09PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5vbkRhdGFVcGRhdGVfKHBhdGhTdHJpbmcsIGRhdGEsIC8qaXNNZXJnZT0qLyBmYWxzZSwgdGFnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzYWZlR2V0KHRoaXMubGlzdGVuc18sIGxpc3RlbklkKSA9PT0gdGhpc0xpc3Rlbikge1xuICAgICAgICAgIGxldCBzdGF0dXM7XG4gICAgICAgICAgaWYgKCFlcnJvcikge1xuICAgICAgICAgICAgc3RhdHVzID0gJ29rJztcbiAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yID09IDQwMSkge1xuICAgICAgICAgICAgc3RhdHVzID0gJ3Blcm1pc3Npb25fZGVuaWVkJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhdHVzID0gJ3Jlc3RfZXJyb3I6JyArIGVycm9yO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG9uQ29tcGxldGUoc3RhdHVzLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH1cblxuICAvKiogQGluaGVyaXREb2MgKi9cbiAgdW5saXN0ZW4ocXVlcnk6IFF1ZXJ5LCB0YWc6IG51bWJlciB8IG51bGwpIHtcbiAgICBjb25zdCBsaXN0ZW5JZCA9IFJlYWRvbmx5UmVzdENsaWVudC5nZXRMaXN0ZW5JZF8ocXVlcnksIHRhZyk7XG4gICAgZGVsZXRlIHRoaXMubGlzdGVuc19bbGlzdGVuSWRdO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0RG9jICovXG4gIHJlZnJlc2hBdXRoVG9rZW4odG9rZW46IHN0cmluZykge1xuICAgIC8vIG5vLW9wIHNpbmNlIHdlIGp1c3QgYWx3YXlzIGNhbGwgZ2V0VG9rZW4uXG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgYSBSRVNUIHJlcXVlc3QgdG8gdGhlIGdpdmVuIHBhdGgsIHdpdGggdGhlIHByb3ZpZGVkIHF1ZXJ5IHN0cmluZyBwYXJhbWV0ZXJzLFxuICAgKiBhbmQgYW55IGF1dGggY3JlZGVudGlhbHMgd2UgaGF2ZS5cbiAgICpcbiAgICogQHBhcmFtIHshc3RyaW5nfSBwYXRoU3RyaW5nXG4gICAqIEBwYXJhbSB7IU9iamVjdC48c3RyaW5nLCAqPn0gcXVlcnlTdHJpbmdQYXJhbWV0ZXJzXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9uKD9udW1iZXIsICo9KX0gY2FsbGJhY2tcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgcmVzdFJlcXVlc3RfKFxuICAgIHBhdGhTdHJpbmc6IHN0cmluZyxcbiAgICBxdWVyeVN0cmluZ1BhcmFtZXRlcnM6IHsgW2s6IHN0cmluZ106IGFueSB9ID0ge30sXG4gICAgY2FsbGJhY2s6ICgoYTogbnVtYmVyIHwgbnVsbCwgYj86IGFueSkgPT4gdm9pZCkgfCBudWxsXG4gICkge1xuICAgIHF1ZXJ5U3RyaW5nUGFyYW1ldGVyc1snZm9ybWF0J10gPSAnZXhwb3J0JztcblxuICAgIHRoaXMuYXV0aFRva2VuUHJvdmlkZXJfXG4gICAgICAuZ2V0VG9rZW4oLypmb3JjZVJlZnJlc2g9Ki8gZmFsc2UpXG4gICAgICAudGhlbihhdXRoVG9rZW5EYXRhID0+IHtcbiAgICAgICAgY29uc3QgYXV0aFRva2VuID0gYXV0aFRva2VuRGF0YSAmJiBhdXRoVG9rZW5EYXRhLmFjY2Vzc1Rva2VuO1xuICAgICAgICBpZiAoYXV0aFRva2VuKSB7XG4gICAgICAgICAgcXVlcnlTdHJpbmdQYXJhbWV0ZXJzWydhdXRoJ10gPSBhdXRoVG9rZW47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1cmwgPVxuICAgICAgICAgICh0aGlzLnJlcG9JbmZvXy5zZWN1cmUgPyAnaHR0cHM6Ly8nIDogJ2h0dHA6Ly8nKSArXG4gICAgICAgICAgdGhpcy5yZXBvSW5mb18uaG9zdCArXG4gICAgICAgICAgcGF0aFN0cmluZyArXG4gICAgICAgICAgJz8nICtcbiAgICAgICAgICBxdWVyeXN0cmluZyhxdWVyeVN0cmluZ1BhcmFtZXRlcnMpO1xuXG4gICAgICAgIHRoaXMubG9nXygnU2VuZGluZyBSRVNUIHJlcXVlc3QgZm9yICcgKyB1cmwpO1xuICAgICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgIHRoaXMubG9nXyhcbiAgICAgICAgICAgICAgJ1JFU1QgUmVzcG9uc2UgZm9yICcgKyB1cmwgKyAnIHJlY2VpdmVkLiBzdGF0dXM6JyxcbiAgICAgICAgICAgICAgeGhyLnN0YXR1cyxcbiAgICAgICAgICAgICAgJ3Jlc3BvbnNlOicsXG4gICAgICAgICAgICAgIHhoci5yZXNwb25zZVRleHRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBsZXQgcmVzID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmVzID0ganNvbkV2YWwoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB3YXJuKFxuICAgICAgICAgICAgICAgICAgJ0ZhaWxlZCB0byBwYXJzZSBKU09OIHJlc3BvbnNlIGZvciAnICtcbiAgICAgICAgICAgICAgICAgICAgdXJsICtcbiAgICAgICAgICAgICAgICAgICAgJzogJyArXG4gICAgICAgICAgICAgICAgICAgIHhoci5yZXNwb25zZVRleHRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyA0MDEgYW5kIDQwNCBhcmUgZXhwZWN0ZWQuXG4gICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzICE9PSA0MDEgJiYgeGhyLnN0YXR1cyAhPT0gNDA0KSB7XG4gICAgICAgICAgICAgICAgd2FybihcbiAgICAgICAgICAgICAgICAgICdHb3QgdW5zdWNjZXNzZnVsIFJFU1QgcmVzcG9uc2UgZm9yICcgK1xuICAgICAgICAgICAgICAgICAgICB1cmwgK1xuICAgICAgICAgICAgICAgICAgICAnIFN0YXR1czogJyArXG4gICAgICAgICAgICAgICAgICAgIHhoci5zdGF0dXNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNhbGxiYWNrKHhoci5zdGF0dXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2sgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB4aHIub3BlbignR0VUJywgdXJsLCAvKmFzeW5jaHJvbm91cz0qLyB0cnVlKTtcbiAgICAgICAgeGhyLnNlbmQoKTtcbiAgICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICBnZW5lcmF0ZVdpdGhWYWx1ZXMsXG4gIHJlc29sdmVEZWZlcnJlZFZhbHVlU25hcHNob3QsXG4gIHJlc29sdmVEZWZlcnJlZFZhbHVlVHJlZVxufSBmcm9tICcuL3V0aWwvU2VydmVyVmFsdWVzJztcbmltcG9ydCB7IG5vZGVGcm9tSlNPTiB9IGZyb20gJy4vc25hcC9ub2RlRnJvbUpTT04nO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4vdXRpbC9QYXRoJztcbmltcG9ydCB7IFNwYXJzZVNuYXBzaG90VHJlZSB9IGZyb20gJy4vU3BhcnNlU25hcHNob3RUcmVlJztcbmltcG9ydCB7IFN5bmNUcmVlIH0gZnJvbSAnLi9TeW5jVHJlZSc7XG5pbXBvcnQgeyBTbmFwc2hvdEhvbGRlciB9IGZyb20gJy4vU25hcHNob3RIb2xkZXInO1xuaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgYmVpbmdDcmF3bGVkLCBlYWNoLCBleGNlcHRpb25HdWFyZCwgd2FybiwgbG9nIH0gZnJvbSAnLi91dGlsL3V0aWwnO1xuaW1wb3J0IHsgbWFwLCBmb3JFYWNoLCBpc0VtcHR5IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgQXV0aFRva2VuUHJvdmlkZXIgfSBmcm9tICcuL0F1dGhUb2tlblByb3ZpZGVyJztcbmltcG9ydCB7IFN0YXRzTWFuYWdlciB9IGZyb20gJy4vc3RhdHMvU3RhdHNNYW5hZ2VyJztcbmltcG9ydCB7IFN0YXRzUmVwb3J0ZXIgfSBmcm9tICcuL3N0YXRzL1N0YXRzUmVwb3J0ZXInO1xuaW1wb3J0IHsgU3RhdHNMaXN0ZW5lciB9IGZyb20gJy4vc3RhdHMvU3RhdHNMaXN0ZW5lcic7XG5pbXBvcnQgeyBFdmVudFF1ZXVlIH0gZnJvbSAnLi92aWV3L0V2ZW50UXVldWUnO1xuaW1wb3J0IHsgUGVyc2lzdGVudENvbm5lY3Rpb24gfSBmcm9tICcuL1BlcnNpc3RlbnRDb25uZWN0aW9uJztcbmltcG9ydCB7IFJlYWRvbmx5UmVzdENsaWVudCB9IGZyb20gJy4vUmVhZG9ubHlSZXN0Q2xpZW50JztcbmltcG9ydCB7IEZpcmViYXNlQXBwIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBSZXBvSW5mbyB9IGZyb20gJy4vUmVwb0luZm8nO1xuaW1wb3J0IHsgRGF0YWJhc2UgfSBmcm9tICcuLi9hcGkvRGF0YWJhc2UnO1xuaW1wb3J0IHsgU2VydmVyQWN0aW9ucyB9IGZyb20gJy4vU2VydmVyQWN0aW9ucyc7XG5pbXBvcnQgeyBRdWVyeSB9IGZyb20gJy4uL2FwaS9RdWVyeSc7XG5pbXBvcnQgeyBFdmVudFJlZ2lzdHJhdGlvbiB9IGZyb20gJy4vdmlldy9FdmVudFJlZ2lzdHJhdGlvbic7XG5pbXBvcnQgeyBTdGF0c0NvbGxlY3Rpb24gfSBmcm9tICcuL3N0YXRzL1N0YXRzQ29sbGVjdGlvbic7XG5pbXBvcnQgeyBFdmVudCB9IGZyb20gJy4vdmlldy9FdmVudCc7XG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi9zbmFwL05vZGUnO1xuXG5jb25zdCBJTlRFUlJVUFRfUkVBU09OID0gJ3JlcG9faW50ZXJydXB0JztcblxuLyoqXG4gKiBBIGNvbm5lY3Rpb24gdG8gYSBzaW5nbGUgZGF0YSByZXBvc2l0b3J5LlxuICovXG5leHBvcnQgY2xhc3MgUmVwbyB7XG4gIGRhdGFVcGRhdGVDb3VudCA9IDA7XG4gIHByaXZhdGUgaW5mb1N5bmNUcmVlXzogU3luY1RyZWU7XG4gIHByaXZhdGUgc2VydmVyU3luY1RyZWVfOiBTeW5jVHJlZTtcblxuICBwcml2YXRlIHN0YXRzXzogU3RhdHNDb2xsZWN0aW9uO1xuICBwcml2YXRlIHN0YXRzTGlzdGVuZXJfOiBTdGF0c0xpc3RlbmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgZXZlbnRRdWV1ZV8gPSBuZXcgRXZlbnRRdWV1ZSgpO1xuICBwcml2YXRlIG5leHRXcml0ZUlkXyA9IDE7XG4gIHByaXZhdGUgc2VydmVyXzogU2VydmVyQWN0aW9ucztcbiAgcHJpdmF0ZSBzdGF0c1JlcG9ydGVyXzogU3RhdHNSZXBvcnRlcjtcbiAgcHJpdmF0ZSB0cmFuc2FjdGlvbnNfaW5pdF86ICgpID0+IHZvaWQ7XG4gIHByaXZhdGUgaW5mb0RhdGFfOiBTbmFwc2hvdEhvbGRlcjtcbiAgcHJpdmF0ZSBhYm9ydFRyYW5zYWN0aW9uc186IChwYXRoOiBQYXRoKSA9PiBQYXRoO1xuICBwcml2YXRlIHJlcnVuVHJhbnNhY3Rpb25zXzogKGNoYW5nZWRQYXRoOiBQYXRoKSA9PiBQYXRoO1xuICBwcml2YXRlIGludGVyY2VwdFNlcnZlckRhdGFDYWxsYmFja186XG4gICAgfCAoKGE6IHN0cmluZywgYjogYW55KSA9PiB2b2lkKVxuICAgIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgX19kYXRhYmFzZTogRGF0YWJhc2U7XG5cbiAgLy8gQSBsaXN0IG9mIGRhdGEgcGllY2VzIGFuZCBwYXRocyB0byBiZSBzZXQgd2hlbiB0aGlzIGNsaWVudCBkaXNjb25uZWN0cy5cbiAgcHJpdmF0ZSBvbkRpc2Nvbm5lY3RfID0gbmV3IFNwYXJzZVNuYXBzaG90VHJlZSgpO1xuXG4gIC8qKlxuICAgKiBUT0RPOiBUaGlzIHNob3VsZCBiZSBAcHJpdmF0ZSBidXQgaXQncyB1c2VkIGJ5IHRlc3RfYWNjZXNzLmpzIGFuZCBpbnRlcm5hbC5qc1xuICAgKiBAdHlwZSB7P1BlcnNpc3RlbnRDb25uZWN0aW9ufVxuICAgKi9cbiAgcGVyc2lzdGVudENvbm5lY3Rpb25fOiBQZXJzaXN0ZW50Q29ubmVjdGlvbiB8IG51bGwgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFSZXBvSW5mb30gcmVwb0luZm9fXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZm9yY2VSZXN0Q2xpZW50XG4gICAqIEBwYXJhbSB7IUZpcmViYXNlQXBwfSBhcHBcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyByZXBvSW5mb186IFJlcG9JbmZvLFxuICAgIGZvcmNlUmVzdENsaWVudDogYm9vbGVhbixcbiAgICBwdWJsaWMgYXBwOiBGaXJlYmFzZUFwcFxuICApIHtcbiAgICAvKiogQHR5cGUgeyFBdXRoVG9rZW5Qcm92aWRlcn0gKi9cbiAgICBjb25zdCBhdXRoVG9rZW5Qcm92aWRlciA9IG5ldyBBdXRoVG9rZW5Qcm92aWRlcihhcHApO1xuXG4gICAgdGhpcy5zdGF0c18gPSBTdGF0c01hbmFnZXIuZ2V0Q29sbGVjdGlvbihyZXBvSW5mb18pO1xuXG4gICAgaWYgKGZvcmNlUmVzdENsaWVudCB8fCBiZWluZ0NyYXdsZWQoKSkge1xuICAgICAgdGhpcy5zZXJ2ZXJfID0gbmV3IFJlYWRvbmx5UmVzdENsaWVudChcbiAgICAgICAgdGhpcy5yZXBvSW5mb18sXG4gICAgICAgIHRoaXMub25EYXRhVXBkYXRlXy5iaW5kKHRoaXMpLFxuICAgICAgICBhdXRoVG9rZW5Qcm92aWRlclxuICAgICAgKTtcblxuICAgICAgLy8gTWlub3IgaGFjazogRmlyZSBvbkNvbm5lY3QgaW1tZWRpYXRlbHksIHNpbmNlIHRoZXJlJ3Mgbm8gYWN0dWFsIGNvbm5lY3Rpb24uXG4gICAgICBzZXRUaW1lb3V0KHRoaXMub25Db25uZWN0U3RhdHVzXy5iaW5kKHRoaXMsIHRydWUpLCAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYXV0aE92ZXJyaWRlID0gYXBwLm9wdGlvbnNbJ2RhdGFiYXNlQXV0aFZhcmlhYmxlT3ZlcnJpZGUnXTtcbiAgICAgIC8vIFZhbGlkYXRlIGF1dGhPdmVycmlkZVxuICAgICAgaWYgKHR5cGVvZiBhdXRoT3ZlcnJpZGUgIT09ICd1bmRlZmluZWQnICYmIGF1dGhPdmVycmlkZSAhPT0gbnVsbCkge1xuICAgICAgICBpZiAodHlwZW9mIGF1dGhPdmVycmlkZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAnT25seSBvYmplY3RzIGFyZSBzdXBwb3J0ZWQgZm9yIG9wdGlvbiBkYXRhYmFzZUF1dGhWYXJpYWJsZU92ZXJyaWRlJ1xuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzdHJpbmdpZnkoYXV0aE92ZXJyaWRlKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhdXRoT3ZlcnJpZGUgcHJvdmlkZWQ6ICcgKyBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLnBlcnNpc3RlbnRDb25uZWN0aW9uXyA9IG5ldyBQZXJzaXN0ZW50Q29ubmVjdGlvbihcbiAgICAgICAgdGhpcy5yZXBvSW5mb18sXG4gICAgICAgIHRoaXMub25EYXRhVXBkYXRlXy5iaW5kKHRoaXMpLFxuICAgICAgICB0aGlzLm9uQ29ubmVjdFN0YXR1c18uYmluZCh0aGlzKSxcbiAgICAgICAgdGhpcy5vblNlcnZlckluZm9VcGRhdGVfLmJpbmQodGhpcyksXG4gICAgICAgIGF1dGhUb2tlblByb3ZpZGVyLFxuICAgICAgICBhdXRoT3ZlcnJpZGVcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuc2VydmVyXyA9IHRoaXMucGVyc2lzdGVudENvbm5lY3Rpb25fO1xuICAgIH1cblxuICAgIGF1dGhUb2tlblByb3ZpZGVyLmFkZFRva2VuQ2hhbmdlTGlzdGVuZXIodG9rZW4gPT4ge1xuICAgICAgdGhpcy5zZXJ2ZXJfLnJlZnJlc2hBdXRoVG9rZW4odG9rZW4pO1xuICAgIH0pO1xuXG4gICAgLy8gSW4gdGhlIGNhc2Ugb2YgbXVsdGlwbGUgUmVwb3MgZm9yIHRoZSBzYW1lIHJlcG9JbmZvIChpLmUuIHRoZXJlIGFyZSBtdWx0aXBsZSBGaXJlYmFzZS5Db250ZXh0cyBiZWluZyB1c2VkKSxcbiAgICAvLyB3ZSBvbmx5IHdhbnQgdG8gY3JlYXRlIG9uZSBTdGF0c1JlcG9ydGVyLiAgQXMgc3VjaCwgd2UnbGwgcmVwb3J0IHN0YXRzIG92ZXIgdGhlIGZpcnN0IFJlcG8gY3JlYXRlZC5cbiAgICB0aGlzLnN0YXRzUmVwb3J0ZXJfID0gU3RhdHNNYW5hZ2VyLmdldE9yQ3JlYXRlUmVwb3J0ZXIoXG4gICAgICByZXBvSW5mb18sXG4gICAgICAoKSA9PiBuZXcgU3RhdHNSZXBvcnRlcih0aGlzLnN0YXRzXywgdGhpcy5zZXJ2ZXJfKVxuICAgICk7XG5cbiAgICB0aGlzLnRyYW5zYWN0aW9uc19pbml0XygpO1xuXG4gICAgLy8gVXNlZCBmb3IgLmluZm8uXG4gICAgdGhpcy5pbmZvRGF0YV8gPSBuZXcgU25hcHNob3RIb2xkZXIoKTtcbiAgICB0aGlzLmluZm9TeW5jVHJlZV8gPSBuZXcgU3luY1RyZWUoe1xuICAgICAgc3RhcnRMaXN0ZW5pbmc6IChxdWVyeSwgdGFnLCBjdXJyZW50SGFzaEZuLCBvbkNvbXBsZXRlKSA9PiB7XG4gICAgICAgIGxldCBpbmZvRXZlbnRzOiBFdmVudFtdID0gW107XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmluZm9EYXRhXy5nZXROb2RlKHF1ZXJ5LnBhdGgpO1xuICAgICAgICAvLyBUaGlzIGlzIHBvc3NpYmx5IGEgaGFjaywgYnV0IHdlIGhhdmUgZGlmZmVyZW50IHNlbWFudGljcyBmb3IgLmluZm8gZW5kcG9pbnRzLiBXZSBkb24ndCByYWlzZSBudWxsIGV2ZW50c1xuICAgICAgICAvLyBvbiBpbml0aWFsIGRhdGEuLi5cbiAgICAgICAgaWYgKCFub2RlLmlzRW1wdHkoKSkge1xuICAgICAgICAgIGluZm9FdmVudHMgPSB0aGlzLmluZm9TeW5jVHJlZV8uYXBwbHlTZXJ2ZXJPdmVyd3JpdGUoXG4gICAgICAgICAgICBxdWVyeS5wYXRoLFxuICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBvbkNvbXBsZXRlKCdvaycpO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmZvRXZlbnRzO1xuICAgICAgfSxcbiAgICAgIHN0b3BMaXN0ZW5pbmc6ICgpID0+IHt9XG4gICAgfSk7XG4gICAgdGhpcy51cGRhdGVJbmZvXygnY29ubmVjdGVkJywgZmFsc2UpO1xuXG4gICAgdGhpcy5zZXJ2ZXJTeW5jVHJlZV8gPSBuZXcgU3luY1RyZWUoe1xuICAgICAgc3RhcnRMaXN0ZW5pbmc6IChxdWVyeSwgdGFnLCBjdXJyZW50SGFzaEZuLCBvbkNvbXBsZXRlKSA9PiB7XG4gICAgICAgIHRoaXMuc2VydmVyXy5saXN0ZW4ocXVlcnksIGN1cnJlbnRIYXNoRm4sIHRhZywgKHN0YXR1cywgZGF0YSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGV2ZW50cyA9IG9uQ29tcGxldGUoc3RhdHVzLCBkYXRhKTtcbiAgICAgICAgICB0aGlzLmV2ZW50UXVldWVfLnJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgocXVlcnkucGF0aCwgZXZlbnRzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIE5vIHN5bmNocm9ub3VzIGV2ZW50cyBmb3IgbmV0d29yay1iYWNrZWQgc3luYyB0cmVlc1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9LFxuICAgICAgc3RvcExpc3RlbmluZzogKHF1ZXJ5LCB0YWcpID0+IHtcbiAgICAgICAgdGhpcy5zZXJ2ZXJfLnVubGlzdGVuKHF1ZXJ5LCB0YWcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ30gIFRoZSBVUkwgY29ycmVzcG9uZGluZyB0byB0aGUgcm9vdCBvZiB0aGlzIEZpcmViYXNlLlxuICAgKi9cbiAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gKFxuICAgICAgKHRoaXMucmVwb0luZm9fLnNlY3VyZSA/ICdodHRwczovLycgOiAnaHR0cDovLycpICsgdGhpcy5yZXBvSW5mb18uaG9zdFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IXN0cmluZ30gVGhlIG5hbWVzcGFjZSByZXByZXNlbnRlZCBieSB0aGUgcmVwby5cbiAgICovXG4gIG5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5yZXBvSW5mb18ubmFtZXNwYWNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFudW1iZXJ9IFRoZSB0aW1lIGluIG1pbGxpc2Vjb25kcywgdGFraW5nIHRoZSBzZXJ2ZXIgb2Zmc2V0IGludG8gYWNjb3VudCBpZiB3ZSBoYXZlIG9uZS5cbiAgICovXG4gIHNlcnZlclRpbWUoKTogbnVtYmVyIHtcbiAgICBjb25zdCBvZmZzZXROb2RlID0gdGhpcy5pbmZvRGF0YV8uZ2V0Tm9kZShcbiAgICAgIG5ldyBQYXRoKCcuaW5mby9zZXJ2ZXJUaW1lT2Zmc2V0JylcbiAgICApO1xuICAgIGNvbnN0IG9mZnNldCA9IChvZmZzZXROb2RlLnZhbCgpIGFzIG51bWJlcikgfHwgMDtcbiAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBvZmZzZXQ7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgU2VydmVyVmFsdWVzIHVzaW5nIHNvbWUgdmFyaWFibGVzIGZyb20gdGhlIHJlcG8gb2JqZWN0LlxuICAgKiBAcmV0dXJuIHshT2JqZWN0fVxuICAgKi9cbiAgZ2VuZXJhdGVTZXJ2ZXJWYWx1ZXMoKTogT2JqZWN0IHtcbiAgICByZXR1cm4gZ2VuZXJhdGVXaXRoVmFsdWVzKHtcbiAgICAgIHRpbWVzdGFtcDogdGhpcy5zZXJ2ZXJUaW1lKClcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgYnkgcmVhbHRpbWUgd2hlbiB3ZSBnZXQgbmV3IG1lc3NhZ2VzIGZyb20gdGhlIHNlcnZlci5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGhTdHJpbmdcbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNNZXJnZVxuICAgKiBAcGFyYW0gez9udW1iZXJ9IHRhZ1xuICAgKi9cbiAgcHJpdmF0ZSBvbkRhdGFVcGRhdGVfKFxuICAgIHBhdGhTdHJpbmc6IHN0cmluZyxcbiAgICBkYXRhOiBhbnksXG4gICAgaXNNZXJnZTogYm9vbGVhbixcbiAgICB0YWc6IG51bWJlciB8IG51bGxcbiAgKSB7XG4gICAgLy8gRm9yIHRlc3RpbmcuXG4gICAgdGhpcy5kYXRhVXBkYXRlQ291bnQrKztcbiAgICBjb25zdCBwYXRoID0gbmV3IFBhdGgocGF0aFN0cmluZyk7XG4gICAgZGF0YSA9IHRoaXMuaW50ZXJjZXB0U2VydmVyRGF0YUNhbGxiYWNrX1xuICAgICAgPyB0aGlzLmludGVyY2VwdFNlcnZlckRhdGFDYWxsYmFja18ocGF0aFN0cmluZywgZGF0YSlcbiAgICAgIDogZGF0YTtcbiAgICBsZXQgZXZlbnRzID0gW107XG4gICAgaWYgKHRhZykge1xuICAgICAgaWYgKGlzTWVyZ2UpIHtcbiAgICAgICAgY29uc3QgdGFnZ2VkQ2hpbGRyZW4gPSBtYXAoZGF0YSBhcyB7IFtrOiBzdHJpbmddOiBhbnkgfSwgKHJhdzogYW55KSA9PlxuICAgICAgICAgIG5vZGVGcm9tSlNPTihyYXcpXG4gICAgICAgICk7XG4gICAgICAgIGV2ZW50cyA9IHRoaXMuc2VydmVyU3luY1RyZWVfLmFwcGx5VGFnZ2VkUXVlcnlNZXJnZShcbiAgICAgICAgICBwYXRoLFxuICAgICAgICAgIHRhZ2dlZENoaWxkcmVuLFxuICAgICAgICAgIHRhZ1xuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdGFnZ2VkU25hcCA9IG5vZGVGcm9tSlNPTihkYXRhKTtcbiAgICAgICAgZXZlbnRzID0gdGhpcy5zZXJ2ZXJTeW5jVHJlZV8uYXBwbHlUYWdnZWRRdWVyeU92ZXJ3cml0ZShcbiAgICAgICAgICBwYXRoLFxuICAgICAgICAgIHRhZ2dlZFNuYXAsXG4gICAgICAgICAgdGFnXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc01lcmdlKSB7XG4gICAgICBjb25zdCBjaGFuZ2VkQ2hpbGRyZW4gPSBtYXAoZGF0YSBhcyB7IFtrOiBzdHJpbmddOiBhbnkgfSwgKHJhdzogYW55KSA9PlxuICAgICAgICBub2RlRnJvbUpTT04ocmF3KVxuICAgICAgKTtcbiAgICAgIGV2ZW50cyA9IHRoaXMuc2VydmVyU3luY1RyZWVfLmFwcGx5U2VydmVyTWVyZ2UocGF0aCwgY2hhbmdlZENoaWxkcmVuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc25hcCA9IG5vZGVGcm9tSlNPTihkYXRhKTtcbiAgICAgIGV2ZW50cyA9IHRoaXMuc2VydmVyU3luY1RyZWVfLmFwcGx5U2VydmVyT3ZlcndyaXRlKHBhdGgsIHNuYXApO1xuICAgIH1cbiAgICBsZXQgYWZmZWN0ZWRQYXRoID0gcGF0aDtcbiAgICBpZiAoZXZlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIFNpbmNlIHdlIGhhdmUgYSBsaXN0ZW5lciBvdXRzdGFuZGluZyBmb3IgZWFjaCB0cmFuc2FjdGlvbiwgcmVjZWl2aW5nIGFueSBldmVudHNcbiAgICAgIC8vIGlzIGEgcHJveHkgZm9yIHNvbWUgY2hhbmdlIGhhdmluZyBvY2N1cnJlZC5cbiAgICAgIGFmZmVjdGVkUGF0aCA9IHRoaXMucmVydW5UcmFuc2FjdGlvbnNfKHBhdGgpO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50UXVldWVfLnJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgoYWZmZWN0ZWRQYXRoLCBldmVudHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRPRE86IFRoaXMgc2hvdWxkIGJlIEBwcml2YXRlIGJ1dCBpdCdzIHVzZWQgYnkgdGVzdF9hY2Nlc3MuanMgYW5kIGludGVybmFsLmpzXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9uKCFzdHJpbmcsICopOip9IGNhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpbnRlcmNlcHRTZXJ2ZXJEYXRhXyhjYWxsYmFjazogKChhOiBzdHJpbmcsIGI6IGFueSkgPT4gYW55KSB8IG51bGwpIHtcbiAgICB0aGlzLmludGVyY2VwdFNlcnZlckRhdGFDYWxsYmFja18gPSBjYWxsYmFjaztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFib29sZWFufSBjb25uZWN0U3RhdHVzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIG9uQ29ubmVjdFN0YXR1c18oY29ubmVjdFN0YXR1czogYm9vbGVhbikge1xuICAgIHRoaXMudXBkYXRlSW5mb18oJ2Nvbm5lY3RlZCcsIGNvbm5lY3RTdGF0dXMpO1xuICAgIGlmIChjb25uZWN0U3RhdHVzID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5ydW5PbkRpc2Nvbm5lY3RFdmVudHNfKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU9iamVjdH0gdXBkYXRlc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBvblNlcnZlckluZm9VcGRhdGVfKHVwZGF0ZXM6IE9iamVjdCkge1xuICAgIGVhY2godXBkYXRlcywgKHZhbHVlOiBhbnksIGtleTogc3RyaW5nKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZUluZm9fKGtleSwgdmFsdWUpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7IXN0cmluZ30gcGF0aFN0cmluZ1xuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZUluZm9fKHBhdGhTdHJpbmc6IHN0cmluZywgdmFsdWU6IGFueSkge1xuICAgIGNvbnN0IHBhdGggPSBuZXcgUGF0aCgnLy5pbmZvLycgKyBwYXRoU3RyaW5nKTtcbiAgICBjb25zdCBuZXdOb2RlID0gbm9kZUZyb21KU09OKHZhbHVlKTtcbiAgICB0aGlzLmluZm9EYXRhXy51cGRhdGVTbmFwc2hvdChwYXRoLCBuZXdOb2RlKTtcbiAgICBjb25zdCBldmVudHMgPSB0aGlzLmluZm9TeW5jVHJlZV8uYXBwbHlTZXJ2ZXJPdmVyd3JpdGUocGF0aCwgbmV3Tm9kZSk7XG4gICAgdGhpcy5ldmVudFF1ZXVlXy5yYWlzZUV2ZW50c0ZvckNoYW5nZWRQYXRoKHBhdGgsIGV2ZW50cyk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IW51bWJlcn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgZ2V0TmV4dFdyaXRlSWRfKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubmV4dFdyaXRlSWRfKys7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICAgKiBAcGFyYW0geyp9IG5ld1ZhbFxuICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd8bnVsbH0gbmV3UHJpb3JpdHlcbiAgICogQHBhcmFtIHs/ZnVuY3Rpb24oP0Vycm9yLCAqPSl9IG9uQ29tcGxldGVcbiAgICovXG4gIHNldFdpdGhQcmlvcml0eShcbiAgICBwYXRoOiBQYXRoLFxuICAgIG5ld1ZhbDogYW55LFxuICAgIG5ld1ByaW9yaXR5OiBudW1iZXIgfCBzdHJpbmcgfCBudWxsLFxuICAgIG9uQ29tcGxldGU6ICgoc3RhdHVzOiBFcnJvciB8IG51bGwsIGVycm9yUmVhc29uPzogc3RyaW5nKSA9PiB2b2lkKSB8IG51bGxcbiAgKSB7XG4gICAgdGhpcy5sb2dfKCdzZXQnLCB7XG4gICAgICBwYXRoOiBwYXRoLnRvU3RyaW5nKCksXG4gICAgICB2YWx1ZTogbmV3VmFsLFxuICAgICAgcHJpb3JpdHk6IG5ld1ByaW9yaXR5XG4gICAgfSk7XG5cbiAgICAvLyBUT0RPOiBPcHRpbWl6ZSB0aGlzIGJlaGF2aW9yIHRvIGVpdGhlciAoYSkgc3RvcmUgZmxhZyB0byBza2lwIHJlc29sdmluZyB3aGVyZSBwb3NzaWJsZSBhbmQgLyBvclxuICAgIC8vIChiKSBzdG9yZSB1bnJlc29sdmVkIHBhdGhzIG9uIEpTT04gcGFyc2VcbiAgICBjb25zdCBzZXJ2ZXJWYWx1ZXMgPSB0aGlzLmdlbmVyYXRlU2VydmVyVmFsdWVzKCk7XG4gICAgY29uc3QgbmV3Tm9kZVVucmVzb2x2ZWQgPSBub2RlRnJvbUpTT04obmV3VmFsLCBuZXdQcmlvcml0eSk7XG4gICAgY29uc3QgbmV3Tm9kZSA9IHJlc29sdmVEZWZlcnJlZFZhbHVlU25hcHNob3QoXG4gICAgICBuZXdOb2RlVW5yZXNvbHZlZCxcbiAgICAgIHNlcnZlclZhbHVlc1xuICAgICk7XG5cbiAgICBjb25zdCB3cml0ZUlkID0gdGhpcy5nZXROZXh0V3JpdGVJZF8oKTtcbiAgICBjb25zdCBldmVudHMgPSB0aGlzLnNlcnZlclN5bmNUcmVlXy5hcHBseVVzZXJPdmVyd3JpdGUoXG4gICAgICBwYXRoLFxuICAgICAgbmV3Tm9kZSxcbiAgICAgIHdyaXRlSWQsXG4gICAgICB0cnVlXG4gICAgKTtcbiAgICB0aGlzLmV2ZW50UXVldWVfLnF1ZXVlRXZlbnRzKGV2ZW50cyk7XG4gICAgdGhpcy5zZXJ2ZXJfLnB1dChcbiAgICAgIHBhdGgudG9TdHJpbmcoKSxcbiAgICAgIG5ld05vZGVVbnJlc29sdmVkLnZhbCgvKmV4cG9ydD0qLyB0cnVlKSxcbiAgICAgIChzdGF0dXMsIGVycm9yUmVhc29uKSA9PiB7XG4gICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBzdGF0dXMgPT09ICdvayc7XG4gICAgICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgICAgIHdhcm4oJ3NldCBhdCAnICsgcGF0aCArICcgZmFpbGVkOiAnICsgc3RhdHVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNsZWFyRXZlbnRzID0gdGhpcy5zZXJ2ZXJTeW5jVHJlZV8uYWNrVXNlcldyaXRlKFxuICAgICAgICAgIHdyaXRlSWQsXG4gICAgICAgICAgIXN1Y2Nlc3NcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5ldmVudFF1ZXVlXy5yYWlzZUV2ZW50c0ZvckNoYW5nZWRQYXRoKHBhdGgsIGNsZWFyRXZlbnRzKTtcbiAgICAgICAgdGhpcy5jYWxsT25Db21wbGV0ZUNhbGxiYWNrKG9uQ29tcGxldGUsIHN0YXR1cywgZXJyb3JSZWFzb24pO1xuICAgICAgfVxuICAgICk7XG4gICAgY29uc3QgYWZmZWN0ZWRQYXRoID0gdGhpcy5hYm9ydFRyYW5zYWN0aW9uc18ocGF0aCk7XG4gICAgdGhpcy5yZXJ1blRyYW5zYWN0aW9uc18oYWZmZWN0ZWRQYXRoKTtcbiAgICAvLyBXZSBxdWV1ZWQgdGhlIGV2ZW50cyBhYm92ZSwgc28ganVzdCBmbHVzaCB0aGUgcXVldWUgaGVyZVxuICAgIHRoaXMuZXZlbnRRdWV1ZV8ucmFpc2VFdmVudHNGb3JDaGFuZ2VkUGF0aChhZmZlY3RlZFBhdGgsIFtdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFQYXRofSBwYXRoXG4gICAqIEBwYXJhbSB7IU9iamVjdH0gY2hpbGRyZW5Ub01lcmdlXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9uKD9FcnJvciwgKj0pfSBvbkNvbXBsZXRlXG4gICAqL1xuICB1cGRhdGUoXG4gICAgcGF0aDogUGF0aCxcbiAgICBjaGlsZHJlblRvTWVyZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9LFxuICAgIG9uQ29tcGxldGU6ICgoc3RhdHVzOiBFcnJvciB8IG51bGwsIGVycm9yUmVhc29uPzogc3RyaW5nKSA9PiB2b2lkKSB8IG51bGxcbiAgKSB7XG4gICAgdGhpcy5sb2dfKCd1cGRhdGUnLCB7IHBhdGg6IHBhdGgudG9TdHJpbmcoKSwgdmFsdWU6IGNoaWxkcmVuVG9NZXJnZSB9KTtcblxuICAgIC8vIFN0YXJ0IHdpdGggb3VyIGV4aXN0aW5nIGRhdGEgYW5kIG1lcmdlIGVhY2ggY2hpbGQgaW50byBpdC5cbiAgICBsZXQgZW1wdHkgPSB0cnVlO1xuICAgIGNvbnN0IHNlcnZlclZhbHVlcyA9IHRoaXMuZ2VuZXJhdGVTZXJ2ZXJWYWx1ZXMoKTtcbiAgICBjb25zdCBjaGFuZ2VkQ2hpbGRyZW46IHsgW2s6IHN0cmluZ106IE5vZGUgfSA9IHt9O1xuICAgIGZvckVhY2goY2hpbGRyZW5Ub01lcmdlLCAoY2hhbmdlZEtleTogc3RyaW5nLCBjaGFuZ2VkVmFsdWU6IGFueSkgPT4ge1xuICAgICAgZW1wdHkgPSBmYWxzZTtcbiAgICAgIGNvbnN0IG5ld05vZGVVbnJlc29sdmVkID0gbm9kZUZyb21KU09OKGNoYW5nZWRWYWx1ZSk7XG4gICAgICBjaGFuZ2VkQ2hpbGRyZW5bY2hhbmdlZEtleV0gPSByZXNvbHZlRGVmZXJyZWRWYWx1ZVNuYXBzaG90KFxuICAgICAgICBuZXdOb2RlVW5yZXNvbHZlZCxcbiAgICAgICAgc2VydmVyVmFsdWVzXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaWYgKCFlbXB0eSkge1xuICAgICAgY29uc3Qgd3JpdGVJZCA9IHRoaXMuZ2V0TmV4dFdyaXRlSWRfKCk7XG4gICAgICBjb25zdCBldmVudHMgPSB0aGlzLnNlcnZlclN5bmNUcmVlXy5hcHBseVVzZXJNZXJnZShcbiAgICAgICAgcGF0aCxcbiAgICAgICAgY2hhbmdlZENoaWxkcmVuLFxuICAgICAgICB3cml0ZUlkXG4gICAgICApO1xuICAgICAgdGhpcy5ldmVudFF1ZXVlXy5xdWV1ZUV2ZW50cyhldmVudHMpO1xuICAgICAgdGhpcy5zZXJ2ZXJfLm1lcmdlKFxuICAgICAgICBwYXRoLnRvU3RyaW5nKCksXG4gICAgICAgIGNoaWxkcmVuVG9NZXJnZSxcbiAgICAgICAgKHN0YXR1cywgZXJyb3JSZWFzb24pID0+IHtcbiAgICAgICAgICBjb25zdCBzdWNjZXNzID0gc3RhdHVzID09PSAnb2snO1xuICAgICAgICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgICAgICAgd2FybigndXBkYXRlIGF0ICcgKyBwYXRoICsgJyBmYWlsZWQ6ICcgKyBzdGF0dXMpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGNsZWFyRXZlbnRzID0gdGhpcy5zZXJ2ZXJTeW5jVHJlZV8uYWNrVXNlcldyaXRlKFxuICAgICAgICAgICAgd3JpdGVJZCxcbiAgICAgICAgICAgICFzdWNjZXNzXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBhZmZlY3RlZFBhdGggPVxuICAgICAgICAgICAgY2xlYXJFdmVudHMubGVuZ3RoID4gMCA/IHRoaXMucmVydW5UcmFuc2FjdGlvbnNfKHBhdGgpIDogcGF0aDtcbiAgICAgICAgICB0aGlzLmV2ZW50UXVldWVfLnJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgoYWZmZWN0ZWRQYXRoLCBjbGVhckV2ZW50cyk7XG4gICAgICAgICAgdGhpcy5jYWxsT25Db21wbGV0ZUNhbGxiYWNrKG9uQ29tcGxldGUsIHN0YXR1cywgZXJyb3JSZWFzb24pO1xuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBmb3JFYWNoKGNoaWxkcmVuVG9NZXJnZSwgKGNoYW5nZWRQYXRoOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgYWZmZWN0ZWRQYXRoID0gdGhpcy5hYm9ydFRyYW5zYWN0aW9uc18ocGF0aC5jaGlsZChjaGFuZ2VkUGF0aCkpO1xuICAgICAgICB0aGlzLnJlcnVuVHJhbnNhY3Rpb25zXyhhZmZlY3RlZFBhdGgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFdlIHF1ZXVlZCB0aGUgZXZlbnRzIGFib3ZlLCBzbyBqdXN0IGZsdXNoIHRoZSBxdWV1ZSBoZXJlXG4gICAgICB0aGlzLmV2ZW50UXVldWVfLnJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgocGF0aCwgW10pO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2coXCJ1cGRhdGUoKSBjYWxsZWQgd2l0aCBlbXB0eSBkYXRhLiAgRG9uJ3QgZG8gYW55dGhpbmcuXCIpO1xuICAgICAgdGhpcy5jYWxsT25Db21wbGV0ZUNhbGxiYWNrKG9uQ29tcGxldGUsICdvaycpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBsaWVzIGFsbCBvZiB0aGUgY2hhbmdlcyBzdG9yZWQgdXAgaW4gdGhlIG9uRGlzY29ubmVjdF8gdHJlZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgcnVuT25EaXNjb25uZWN0RXZlbnRzXygpIHtcbiAgICB0aGlzLmxvZ18oJ29uRGlzY29ubmVjdEV2ZW50cycpO1xuXG4gICAgY29uc3Qgc2VydmVyVmFsdWVzID0gdGhpcy5nZW5lcmF0ZVNlcnZlclZhbHVlcygpO1xuICAgIGNvbnN0IHJlc29sdmVkT25EaXNjb25uZWN0VHJlZSA9IHJlc29sdmVEZWZlcnJlZFZhbHVlVHJlZShcbiAgICAgIHRoaXMub25EaXNjb25uZWN0XyxcbiAgICAgIHNlcnZlclZhbHVlc1xuICAgICk7XG4gICAgbGV0IGV2ZW50czogRXZlbnRbXSA9IFtdO1xuXG4gICAgcmVzb2x2ZWRPbkRpc2Nvbm5lY3RUcmVlLmZvckVhY2hUcmVlKFBhdGguRW1wdHksIChwYXRoLCBzbmFwKSA9PiB7XG4gICAgICBldmVudHMgPSBldmVudHMuY29uY2F0KFxuICAgICAgICB0aGlzLnNlcnZlclN5bmNUcmVlXy5hcHBseVNlcnZlck92ZXJ3cml0ZShwYXRoLCBzbmFwKVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGFmZmVjdGVkUGF0aCA9IHRoaXMuYWJvcnRUcmFuc2FjdGlvbnNfKHBhdGgpO1xuICAgICAgdGhpcy5yZXJ1blRyYW5zYWN0aW9uc18oYWZmZWN0ZWRQYXRoKTtcbiAgICB9KTtcblxuICAgIHRoaXMub25EaXNjb25uZWN0XyA9IG5ldyBTcGFyc2VTbmFwc2hvdFRyZWUoKTtcbiAgICB0aGlzLmV2ZW50UXVldWVfLnJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgoUGF0aC5FbXB0eSwgZXZlbnRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFQYXRofSBwYXRoXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9uKD9FcnJvciwgKj0pfSBvbkNvbXBsZXRlXG4gICAqL1xuICBvbkRpc2Nvbm5lY3RDYW5jZWwoXG4gICAgcGF0aDogUGF0aCxcbiAgICBvbkNvbXBsZXRlOiAoKHN0YXR1czogRXJyb3IgfCBudWxsLCBlcnJvclJlYXNvbj86IHN0cmluZykgPT4gdm9pZCkgfCBudWxsXG4gICkge1xuICAgIHRoaXMuc2VydmVyXy5vbkRpc2Nvbm5lY3RDYW5jZWwocGF0aC50b1N0cmluZygpLCAoc3RhdHVzLCBlcnJvclJlYXNvbikgPT4ge1xuICAgICAgaWYgKHN0YXR1cyA9PT0gJ29rJykge1xuICAgICAgICB0aGlzLm9uRGlzY29ubmVjdF8uZm9yZ2V0KHBhdGgpO1xuICAgICAgfVxuICAgICAgdGhpcy5jYWxsT25Db21wbGV0ZUNhbGxiYWNrKG9uQ29tcGxldGUsIHN0YXR1cywgZXJyb3JSZWFzb24pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVBhdGh9IHBhdGhcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0gez9mdW5jdGlvbig/RXJyb3IsICo9KX0gb25Db21wbGV0ZVxuICAgKi9cbiAgb25EaXNjb25uZWN0U2V0KFxuICAgIHBhdGg6IFBhdGgsXG4gICAgdmFsdWU6IGFueSxcbiAgICBvbkNvbXBsZXRlOiAoKHN0YXR1czogRXJyb3IgfCBudWxsLCBlcnJvclJlYXNvbj86IHN0cmluZykgPT4gdm9pZCkgfCBudWxsXG4gICkge1xuICAgIGNvbnN0IG5ld05vZGUgPSBub2RlRnJvbUpTT04odmFsdWUpO1xuICAgIHRoaXMuc2VydmVyXy5vbkRpc2Nvbm5lY3RQdXQoXG4gICAgICBwYXRoLnRvU3RyaW5nKCksXG4gICAgICBuZXdOb2RlLnZhbCgvKmV4cG9ydD0qLyB0cnVlKSxcbiAgICAgIChzdGF0dXMsIGVycm9yUmVhc29uKSA9PiB7XG4gICAgICAgIGlmIChzdGF0dXMgPT09ICdvaycpIHtcbiAgICAgICAgICB0aGlzLm9uRGlzY29ubmVjdF8ucmVtZW1iZXIocGF0aCwgbmV3Tm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYWxsT25Db21wbGV0ZUNhbGxiYWNrKG9uQ29tcGxldGUsIHN0YXR1cywgZXJyb3JSZWFzb24pO1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7Kn0gcHJpb3JpdHlcbiAgICogQHBhcmFtIHs/ZnVuY3Rpb24oP0Vycm9yLCAqPSl9IG9uQ29tcGxldGVcbiAgICovXG4gIG9uRGlzY29ubmVjdFNldFdpdGhQcmlvcml0eShcbiAgICBwYXRoOiBQYXRoLFxuICAgIHZhbHVlOiBhbnksXG4gICAgcHJpb3JpdHk6IGFueSxcbiAgICBvbkNvbXBsZXRlOiAoKHN0YXR1czogRXJyb3IgfCBudWxsLCBlcnJvclJlYXNvbj86IHN0cmluZykgPT4gdm9pZCkgfCBudWxsXG4gICkge1xuICAgIGNvbnN0IG5ld05vZGUgPSBub2RlRnJvbUpTT04odmFsdWUsIHByaW9yaXR5KTtcbiAgICB0aGlzLnNlcnZlcl8ub25EaXNjb25uZWN0UHV0KFxuICAgICAgcGF0aC50b1N0cmluZygpLFxuICAgICAgbmV3Tm9kZS52YWwoLypleHBvcnQ9Ki8gdHJ1ZSksXG4gICAgICAoc3RhdHVzLCBlcnJvclJlYXNvbikgPT4ge1xuICAgICAgICBpZiAoc3RhdHVzID09PSAnb2snKSB7XG4gICAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RfLnJlbWVtYmVyKHBhdGgsIG5ld05vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FsbE9uQ29tcGxldGVDYWxsYmFjayhvbkNvbXBsZXRlLCBzdGF0dXMsIGVycm9yUmVhc29uKTtcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVBhdGh9IHBhdGhcbiAgICogQHBhcmFtIHsqfSBjaGlsZHJlblRvTWVyZ2VcbiAgICogQHBhcmFtIHs/ZnVuY3Rpb24oP0Vycm9yLCAqPSl9IG9uQ29tcGxldGVcbiAgICovXG4gIG9uRGlzY29ubmVjdFVwZGF0ZShcbiAgICBwYXRoOiBQYXRoLFxuICAgIGNoaWxkcmVuVG9NZXJnZTogeyBbazogc3RyaW5nXTogYW55IH0sXG4gICAgb25Db21wbGV0ZTogKChzdGF0dXM6IEVycm9yIHwgbnVsbCwgZXJyb3JSZWFzb24/OiBzdHJpbmcpID0+IHZvaWQpIHwgbnVsbFxuICApIHtcbiAgICBpZiAoaXNFbXB0eShjaGlsZHJlblRvTWVyZ2UpKSB7XG4gICAgICBsb2coXG4gICAgICAgIFwib25EaXNjb25uZWN0KCkudXBkYXRlKCkgY2FsbGVkIHdpdGggZW1wdHkgZGF0YS4gIERvbid0IGRvIGFueXRoaW5nLlwiXG4gICAgICApO1xuICAgICAgdGhpcy5jYWxsT25Db21wbGV0ZUNhbGxiYWNrKG9uQ29tcGxldGUsICdvaycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc2VydmVyXy5vbkRpc2Nvbm5lY3RNZXJnZShcbiAgICAgIHBhdGgudG9TdHJpbmcoKSxcbiAgICAgIGNoaWxkcmVuVG9NZXJnZSxcbiAgICAgIChzdGF0dXMsIGVycm9yUmVhc29uKSA9PiB7XG4gICAgICAgIGlmIChzdGF0dXMgPT09ICdvaycpIHtcbiAgICAgICAgICBmb3JFYWNoKGNoaWxkcmVuVG9NZXJnZSwgKGNoaWxkTmFtZTogc3RyaW5nLCBjaGlsZE5vZGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3Q2hpbGROb2RlID0gbm9kZUZyb21KU09OKGNoaWxkTm9kZSk7XG4gICAgICAgICAgICB0aGlzLm9uRGlzY29ubmVjdF8ucmVtZW1iZXIocGF0aC5jaGlsZChjaGlsZE5hbWUpLCBuZXdDaGlsZE5vZGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FsbE9uQ29tcGxldGVDYWxsYmFjayhvbkNvbXBsZXRlLCBzdGF0dXMsIGVycm9yUmVhc29uKTtcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVF1ZXJ5fSBxdWVyeVxuICAgKiBAcGFyYW0geyFFdmVudFJlZ2lzdHJhdGlvbn0gZXZlbnRSZWdpc3RyYXRpb25cbiAgICovXG4gIGFkZEV2ZW50Q2FsbGJhY2tGb3JRdWVyeShxdWVyeTogUXVlcnksIGV2ZW50UmVnaXN0cmF0aW9uOiBFdmVudFJlZ2lzdHJhdGlvbikge1xuICAgIGxldCBldmVudHM7XG4gICAgaWYgKHF1ZXJ5LnBhdGguZ2V0RnJvbnQoKSA9PT0gJy5pbmZvJykge1xuICAgICAgZXZlbnRzID0gdGhpcy5pbmZvU3luY1RyZWVfLmFkZEV2ZW50UmVnaXN0cmF0aW9uKFxuICAgICAgICBxdWVyeSxcbiAgICAgICAgZXZlbnRSZWdpc3RyYXRpb25cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV2ZW50cyA9IHRoaXMuc2VydmVyU3luY1RyZWVfLmFkZEV2ZW50UmVnaXN0cmF0aW9uKFxuICAgICAgICBxdWVyeSxcbiAgICAgICAgZXZlbnRSZWdpc3RyYXRpb25cbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuZXZlbnRRdWV1ZV8ucmFpc2VFdmVudHNBdFBhdGgocXVlcnkucGF0aCwgZXZlbnRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFRdWVyeX0gcXVlcnlcbiAgICogQHBhcmFtIHs/RXZlbnRSZWdpc3RyYXRpb259IGV2ZW50UmVnaXN0cmF0aW9uXG4gICAqL1xuICByZW1vdmVFdmVudENhbGxiYWNrRm9yUXVlcnkoXG4gICAgcXVlcnk6IFF1ZXJ5LFxuICAgIGV2ZW50UmVnaXN0cmF0aW9uOiBFdmVudFJlZ2lzdHJhdGlvblxuICApIHtcbiAgICAvLyBUaGVzZSBhcmUgZ3VhcmFudGVlZCBub3QgdG8gcmFpc2UgZXZlbnRzLCBzaW5jZSB3ZSdyZSBub3QgcGFzc2luZyBpbiBhIGNhbmNlbEVycm9yLiBIb3dldmVyLCB3ZSBjYW4gZnV0dXJlLXByb29mXG4gICAgLy8gYSBsaXR0bGUgYml0IGJ5IGhhbmRsaW5nIHRoZSByZXR1cm4gdmFsdWVzIGFueXdheXMuXG4gICAgbGV0IGV2ZW50cztcbiAgICBpZiAocXVlcnkucGF0aC5nZXRGcm9udCgpID09PSAnLmluZm8nKSB7XG4gICAgICBldmVudHMgPSB0aGlzLmluZm9TeW5jVHJlZV8ucmVtb3ZlRXZlbnRSZWdpc3RyYXRpb24oXG4gICAgICAgIHF1ZXJ5LFxuICAgICAgICBldmVudFJlZ2lzdHJhdGlvblxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXZlbnRzID0gdGhpcy5zZXJ2ZXJTeW5jVHJlZV8ucmVtb3ZlRXZlbnRSZWdpc3RyYXRpb24oXG4gICAgICAgIHF1ZXJ5LFxuICAgICAgICBldmVudFJlZ2lzdHJhdGlvblxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5ldmVudFF1ZXVlXy5yYWlzZUV2ZW50c0F0UGF0aChxdWVyeS5wYXRoLCBldmVudHMpO1xuICB9XG5cbiAgaW50ZXJydXB0KCkge1xuICAgIGlmICh0aGlzLnBlcnNpc3RlbnRDb25uZWN0aW9uXykge1xuICAgICAgdGhpcy5wZXJzaXN0ZW50Q29ubmVjdGlvbl8uaW50ZXJydXB0KElOVEVSUlVQVF9SRUFTT04pO1xuICAgIH1cbiAgfVxuXG4gIHJlc3VtZSgpIHtcbiAgICBpZiAodGhpcy5wZXJzaXN0ZW50Q29ubmVjdGlvbl8pIHtcbiAgICAgIHRoaXMucGVyc2lzdGVudENvbm5lY3Rpb25fLnJlc3VtZShJTlRFUlJVUFRfUkVBU09OKTtcbiAgICB9XG4gIH1cblxuICBzdGF0cyhzaG93RGVsdGE6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIGlmICh0eXBlb2YgY29uc29sZSA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcblxuICAgIGxldCBzdGF0czogeyBbazogc3RyaW5nXTogYW55IH07XG4gICAgaWYgKHNob3dEZWx0YSkge1xuICAgICAgaWYgKCF0aGlzLnN0YXRzTGlzdGVuZXJfKVxuICAgICAgICB0aGlzLnN0YXRzTGlzdGVuZXJfID0gbmV3IFN0YXRzTGlzdGVuZXIodGhpcy5zdGF0c18pO1xuICAgICAgc3RhdHMgPSB0aGlzLnN0YXRzTGlzdGVuZXJfLmdldCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0cyA9IHRoaXMuc3RhdHNfLmdldCgpO1xuICAgIH1cblxuICAgIGNvbnN0IGxvbmdlc3ROYW1lID0gT2JqZWN0LmtleXMoc3RhdHMpLnJlZHVjZShcbiAgICAgIChwcmV2aW91c1ZhbHVlLCBjdXJyZW50VmFsdWUpID0+XG4gICAgICAgIE1hdGgubWF4KGN1cnJlbnRWYWx1ZS5sZW5ndGgsIHByZXZpb3VzVmFsdWUpLFxuICAgICAgMFxuICAgICk7XG5cbiAgICBmb3JFYWNoKHN0YXRzLCAoc3RhdDogc3RyaW5nLCB2YWx1ZTogYW55KSA9PiB7XG4gICAgICAvLyBwYWQgc3RhdCBuYW1lcyB0byBiZSB0aGUgc2FtZSBsZW5ndGggKHBsdXMgMiBleHRyYSBzcGFjZXMpLlxuICAgICAgZm9yIChsZXQgaSA9IHN0YXQubGVuZ3RoOyBpIDwgbG9uZ2VzdE5hbWUgKyAyOyBpKyspIHN0YXQgKz0gJyAnO1xuICAgICAgY29uc29sZS5sb2coc3RhdCArIHZhbHVlKTtcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRzSW5jcmVtZW50Q291bnRlcihtZXRyaWM6IHN0cmluZykge1xuICAgIHRoaXMuc3RhdHNfLmluY3JlbWVudENvdW50ZXIobWV0cmljKTtcbiAgICB0aGlzLnN0YXRzUmVwb3J0ZXJfLmluY2x1ZGVTdGF0KG1ldHJpYyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBsb2dfKC4uLnZhcl9hcmdzOiBhbnlbXSkge1xuICAgIGxldCBwcmVmaXggPSAnJztcbiAgICBpZiAodGhpcy5wZXJzaXN0ZW50Q29ubmVjdGlvbl8pIHtcbiAgICAgIHByZWZpeCA9IHRoaXMucGVyc2lzdGVudENvbm5lY3Rpb25fLmlkICsgJzonO1xuICAgIH1cbiAgICBsb2cocHJlZml4LCAuLi52YXJfYXJncyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHs/ZnVuY3Rpb24oP0Vycm9yLCAqPSl9IGNhbGxiYWNrXG4gICAqIEBwYXJhbSB7IXN0cmluZ30gc3RhdHVzXG4gICAqIEBwYXJhbSB7P3N0cmluZz19IGVycm9yUmVhc29uXG4gICAqL1xuICBjYWxsT25Db21wbGV0ZUNhbGxiYWNrKFxuICAgIGNhbGxiYWNrOiAoKHN0YXR1czogRXJyb3IgfCBudWxsLCBlcnJvclJlYXNvbj86IHN0cmluZykgPT4gdm9pZCkgfCBudWxsLFxuICAgIHN0YXR1czogc3RyaW5nLFxuICAgIGVycm9yUmVhc29uPzogc3RyaW5nIHwgbnVsbFxuICApIHtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIGV4Y2VwdGlvbkd1YXJkKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoc3RhdHVzID09ICdvaycpIHtcbiAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBjb2RlID0gKHN0YXR1cyB8fCAnZXJyb3InKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgIGxldCBtZXNzYWdlID0gY29kZTtcbiAgICAgICAgICBpZiAoZXJyb3JSZWFzb24pIG1lc3NhZ2UgKz0gJzogJyArIGVycm9yUmVhc29uO1xuXG4gICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgKGVycm9yIGFzIGFueSkuY29kZSA9IGNvZGU7XG4gICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBnZXQgZGF0YWJhc2UoKTogRGF0YWJhc2Uge1xuICAgIHJldHVybiB0aGlzLl9fZGF0YWJhc2UgfHwgKHRoaXMuX19kYXRhYmFzZSA9IG5ldyBEYXRhYmFzZSh0aGlzKSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IGZvckVhY2ggfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBQZXJzaXN0ZW50U3RvcmFnZSB9IGZyb20gJy4vc3RvcmFnZS9zdG9yYWdlJztcbmltcG9ydCB7IExPTkdfUE9MTElORywgV0VCU09DS0VUIH0gZnJvbSAnLi4vcmVhbHRpbWUvQ29uc3RhbnRzJztcblxuLyoqXG4gKiBBIGNsYXNzIHRoYXQgaG9sZHMgbWV0YWRhdGEgYWJvdXQgYSBSZXBvIG9iamVjdFxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgY2xhc3MgUmVwb0luZm8ge1xuICBob3N0OiBzdHJpbmc7XG4gIGRvbWFpbjogc3RyaW5nO1xuICBpbnRlcm5hbEhvc3Q6IHN0cmluZztcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGhvc3QgSG9zdG5hbWUgcG9ydGlvbiBvZiB0aGUgdXJsIGZvciB0aGUgcmVwb1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNlY3VyZSBXaGV0aGVyIG9yIG5vdCB0aGlzIHJlcG8gaXMgYWNjZXNzZWQgb3ZlciBzc2xcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVzcGFjZSBUaGUgbmFtZXNwYWNlIHJlcHJlc2VudGVkIGJ5IHRoZSByZXBvXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gd2ViU29ja2V0T25seSBXaGV0aGVyIHRvIHByZWZlciB3ZWJzb2NrZXRzIG92ZXIgYWxsIG90aGVyIHRyYW5zcG9ydHMgKHVzZWQgYnkgTmVzdCkuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcGVyc2lzdGVuY2VLZXkgT3ZlcnJpZGUgdGhlIGRlZmF1bHQgc2Vzc2lvbiBwZXJzaXN0ZW5jZSBzdG9yYWdlIGtleVxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgaG9zdDogc3RyaW5nLFxuICAgIHB1YmxpYyBzZWN1cmU6IGJvb2xlYW4sXG4gICAgcHVibGljIG5hbWVzcGFjZTogc3RyaW5nLFxuICAgIHB1YmxpYyB3ZWJTb2NrZXRPbmx5OiBib29sZWFuLFxuICAgIHB1YmxpYyBwZXJzaXN0ZW5jZUtleTogc3RyaW5nID0gJydcbiAgKSB7XG4gICAgdGhpcy5ob3N0ID0gaG9zdC50b0xvd2VyQ2FzZSgpO1xuICAgIHRoaXMuZG9tYWluID0gdGhpcy5ob3N0LnN1YnN0cih0aGlzLmhvc3QuaW5kZXhPZignLicpICsgMSk7XG4gICAgdGhpcy5pbnRlcm5hbEhvc3QgPSBQZXJzaXN0ZW50U3RvcmFnZS5nZXQoJ2hvc3Q6JyArIGhvc3QpIHx8IHRoaXMuaG9zdDtcbiAgfVxuXG4gIG5lZWRzUXVlcnlQYXJhbSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5ob3N0ICE9PSB0aGlzLmludGVybmFsSG9zdDtcbiAgfVxuXG4gIGlzQ2FjaGVhYmxlSG9zdCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcm5hbEhvc3Quc3Vic3RyKDAsIDIpID09PSAncy0nO1xuICB9XG5cbiAgaXNEZW1vSG9zdCgpIHtcbiAgICByZXR1cm4gdGhpcy5kb21haW4gPT09ICdmaXJlYmFzZWlvLWRlbW8uY29tJztcbiAgfVxuXG4gIGlzQ3VzdG9tSG9zdCgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5kb21haW4gIT09ICdmaXJlYmFzZWlvLmNvbScgJiYgdGhpcy5kb21haW4gIT09ICdmaXJlYmFzZWlvLWRlbW8uY29tJ1xuICAgICk7XG4gIH1cblxuICB1cGRhdGVIb3N0KG5ld0hvc3Q6IHN0cmluZykge1xuICAgIGlmIChuZXdIb3N0ICE9PSB0aGlzLmludGVybmFsSG9zdCkge1xuICAgICAgdGhpcy5pbnRlcm5hbEhvc3QgPSBuZXdIb3N0O1xuICAgICAgaWYgKHRoaXMuaXNDYWNoZWFibGVIb3N0KCkpIHtcbiAgICAgICAgUGVyc2lzdGVudFN0b3JhZ2Uuc2V0KCdob3N0OicgKyB0aGlzLmhvc3QsIHRoaXMuaW50ZXJuYWxIb3N0KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgd2Vic29ja2V0IFVSTCBmb3IgdGhpcyByZXBvXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIG9mIGNvbm5lY3Rpb25cbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyBsaXN0XG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIFVSTCBmb3IgdGhpcyByZXBvXG4gICAqL1xuICBjb25uZWN0aW9uVVJMKHR5cGU6IHN0cmluZywgcGFyYW1zOiB7IFtrOiBzdHJpbmddOiBzdHJpbmcgfSk6IHN0cmluZyB7XG4gICAgYXNzZXJ0KHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJywgJ3R5cGVvZiB0eXBlIG11c3QgPT0gc3RyaW5nJyk7XG4gICAgYXNzZXJ0KHR5cGVvZiBwYXJhbXMgPT09ICdvYmplY3QnLCAndHlwZW9mIHBhcmFtcyBtdXN0ID09IG9iamVjdCcpO1xuXG4gICAgbGV0IGNvbm5VUkw6IHN0cmluZztcbiAgICBpZiAodHlwZSA9PT0gV0VCU09DS0VUKSB7XG4gICAgICBjb25uVVJMID1cbiAgICAgICAgKHRoaXMuc2VjdXJlID8gJ3dzczovLycgOiAnd3M6Ly8nKSArIHRoaXMuaW50ZXJuYWxIb3N0ICsgJy8ud3M/JztcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IExPTkdfUE9MTElORykge1xuICAgICAgY29ublVSTCA9XG4gICAgICAgICh0aGlzLnNlY3VyZSA/ICdodHRwczovLycgOiAnaHR0cDovLycpICsgdGhpcy5pbnRlcm5hbEhvc3QgKyAnLy5scD8nO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gY29ubmVjdGlvbiB0eXBlOiAnICsgdHlwZSk7XG4gICAgfVxuICAgIGlmICh0aGlzLm5lZWRzUXVlcnlQYXJhbSgpKSB7XG4gICAgICBwYXJhbXNbJ25zJ10gPSB0aGlzLm5hbWVzcGFjZTtcbiAgICB9XG5cbiAgICBjb25zdCBwYWlyczogc3RyaW5nW10gPSBbXTtcblxuICAgIGZvckVhY2gocGFyYW1zLCAoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgIHBhaXJzLnB1c2goa2V5ICsgJz0nICsgdmFsdWUpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvbm5VUkwgKyBwYWlycy5qb2luKCcmJyk7XG4gIH1cblxuICAvKiogQHJldHVybiB7c3RyaW5nfSAqL1xuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIGxldCBzdHIgPSB0aGlzLnRvVVJMU3RyaW5nKCk7XG4gICAgaWYgKHRoaXMucGVyc2lzdGVuY2VLZXkpIHtcbiAgICAgIHN0ciArPSAnPCcgKyB0aGlzLnBlcnNpc3RlbmNlS2V5ICsgJz4nO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xuICB9XG5cbiAgLyoqIEByZXR1cm4ge3N0cmluZ30gKi9cbiAgdG9VUkxTdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gKHRoaXMuc2VjdXJlID8gJ2h0dHBzOi8vJyA6ICdodHRwOi8vJykgKyB0aGlzLmhvc3Q7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEZpcmViYXNlQXBwIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBzYWZlR2V0IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgUmVwbyB9IGZyb20gJy4vUmVwbyc7XG5pbXBvcnQgeyBmYXRhbCB9IGZyb20gJy4vdXRpbC91dGlsJztcbmltcG9ydCB7IHBhcnNlUmVwb0luZm8gfSBmcm9tICcuL3V0aWwvbGlicy9wYXJzZXInO1xuaW1wb3J0IHsgdmFsaWRhdGVVcmwgfSBmcm9tICcuL3V0aWwvdmFsaWRhdGlvbic7XG5pbXBvcnQgJy4vUmVwb190cmFuc2FjdGlvbic7XG5pbXBvcnQgeyBEYXRhYmFzZSB9IGZyb20gJy4uL2FwaS9EYXRhYmFzZSc7XG5pbXBvcnQgeyBSZXBvSW5mbyB9IGZyb20gJy4vUmVwb0luZm8nO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBEQVRBQkFTRV9VUkxfT1BUSU9OID0gJ2RhdGFiYXNlVVJMJztcblxubGV0IF9zdGF0aWNJbnN0YW5jZTogUmVwb01hbmFnZXI7XG5cbi8qKlxuICogQ3JlYXRlcyBhbmQgY2FjaGVzIFJlcG8gaW5zdGFuY2VzLlxuICovXG5leHBvcnQgY2xhc3MgUmVwb01hbmFnZXIge1xuICAvKipcbiAgICogQHByaXZhdGUgeyFPYmplY3QuPHN0cmluZywgT2JqZWN0PHN0cmluZywgIWZiLmNvcmUuUmVwbz4+fVxuICAgKi9cbiAgcHJpdmF0ZSByZXBvc186IHtcbiAgICBbYXBwTmFtZTogc3RyaW5nXToge1xuICAgICAgW2RiVXJsOiBzdHJpbmddOiBSZXBvO1xuICAgIH07XG4gIH0gPSB7fTtcblxuICAvKipcbiAgICogSWYgdHJ1ZSwgbmV3IFJlcG9zIHdpbGwgYmUgY3JlYXRlZCB0byB1c2UgUmVhZG9ubHlSZXN0Q2xpZW50IChmb3IgdGVzdGluZyBwdXJwb3NlcykuXG4gICAqIEBwcml2YXRlIHtib29sZWFufVxuICAgKi9cbiAgcHJpdmF0ZSB1c2VSZXN0Q2xpZW50XzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBSZXBvTWFuYWdlciB7XG4gICAgaWYgKCFfc3RhdGljSW5zdGFuY2UpIHtcbiAgICAgIF9zdGF0aWNJbnN0YW5jZSA9IG5ldyBSZXBvTWFuYWdlcigpO1xuICAgIH1cbiAgICByZXR1cm4gX3N0YXRpY0luc3RhbmNlO1xuICB9XG5cbiAgLy8gVE9ETyhrb3NzKTogUmVtb3ZlIHRoZXNlIGZ1bmN0aW9ucyB1bmxlc3MgdXNlZCBpbiB0ZXN0cz9cbiAgaW50ZXJydXB0KCkge1xuICAgIGZvciAoY29uc3QgYXBwTmFtZSBpbiB0aGlzLnJlcG9zXykge1xuICAgICAgZm9yIChjb25zdCBkYlVybCBpbiB0aGlzLnJlcG9zX1thcHBOYW1lXSkge1xuICAgICAgICB0aGlzLnJlcG9zX1thcHBOYW1lXVtkYlVybF0uaW50ZXJydXB0KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmVzdW1lKCkge1xuICAgIGZvciAoY29uc3QgYXBwTmFtZSBpbiB0aGlzLnJlcG9zXykge1xuICAgICAgZm9yIChjb25zdCBkYlVybCBpbiB0aGlzLnJlcG9zX1thcHBOYW1lXSkge1xuICAgICAgICB0aGlzLnJlcG9zX1thcHBOYW1lXVtkYlVybF0ucmVzdW1lKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgZnVuY3Rpb24gc2hvdWxkIG9ubHkgZXZlciBiZSBjYWxsZWQgdG8gQ1JFQVRFIGEgbmV3IGRhdGFiYXNlIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0geyFGaXJlYmFzZUFwcH0gYXBwXG4gICAqIEByZXR1cm4geyFEYXRhYmFzZX1cbiAgICovXG4gIGRhdGFiYXNlRnJvbUFwcChhcHA6IEZpcmViYXNlQXBwLCB1cmw/OiBzdHJpbmcpOiBEYXRhYmFzZSB7XG4gICAgY29uc3QgZGJVcmw6IHN0cmluZyA9IHVybCB8fCBhcHAub3B0aW9uc1tEQVRBQkFTRV9VUkxfT1BUSU9OXTtcbiAgICBpZiAoZGJVcmwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZmF0YWwoXG4gICAgICAgIFwiQ2FuJ3QgZGV0ZXJtaW5lIEZpcmViYXNlIERhdGFiYXNlIFVSTC4gIEJlIHN1cmUgdG8gaW5jbHVkZSBcIiArXG4gICAgICAgICAgREFUQUJBU0VfVVJMX09QVElPTiArXG4gICAgICAgICAgJyBvcHRpb24gd2hlbiBjYWxsaW5nIGZpcmViYXNlLmludGlhbGl6ZUFwcCgpLidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgcGFyc2VkVXJsID0gcGFyc2VSZXBvSW5mbyhkYlVybCk7XG4gICAgY29uc3QgcmVwb0luZm8gPSBwYXJzZWRVcmwucmVwb0luZm87XG5cbiAgICB2YWxpZGF0ZVVybCgnSW52YWxpZCBGaXJlYmFzZSBEYXRhYmFzZSBVUkwnLCAxLCBwYXJzZWRVcmwpO1xuICAgIGlmICghcGFyc2VkVXJsLnBhdGguaXNFbXB0eSgpKSB7XG4gICAgICBmYXRhbChcbiAgICAgICAgJ0RhdGFiYXNlIFVSTCBtdXN0IHBvaW50IHRvIHRoZSByb290IG9mIGEgRmlyZWJhc2UgRGF0YWJhc2UgJyArXG4gICAgICAgICAgJyhub3QgaW5jbHVkaW5nIGEgY2hpbGQgcGF0aCkuJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCByZXBvID0gdGhpcy5jcmVhdGVSZXBvKHJlcG9JbmZvLCBhcHApO1xuXG4gICAgcmV0dXJuIHJlcG8uZGF0YWJhc2U7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSByZXBvIGFuZCBtYWtlIHN1cmUgaXQgaXMgZGlzY29ubmVjdGVkLlxuICAgKlxuICAgKiBAcGFyYW0geyFSZXBvfSByZXBvXG4gICAqL1xuICBkZWxldGVSZXBvKHJlcG86IFJlcG8pIHtcbiAgICBjb25zdCBhcHBSZXBvcyA9IHNhZmVHZXQodGhpcy5yZXBvc18sIHJlcG8uYXBwLm5hbWUpO1xuICAgIC8vIFRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbi4uLlxuICAgIGlmICghYXBwUmVwb3MgfHwgc2FmZUdldChhcHBSZXBvcywgcmVwby5yZXBvSW5mb18udG9VUkxTdHJpbmcoKSkgIT09IHJlcG8pIHtcbiAgICAgIGZhdGFsKFxuICAgICAgICBgRGF0YWJhc2UgJHtyZXBvLmFwcC5uYW1lfSgke3JlcG8ucmVwb0luZm9ffSkgaGFzIGFscmVhZHkgYmVlbiBkZWxldGVkLmBcbiAgICAgICk7XG4gICAgfVxuICAgIHJlcG8uaW50ZXJydXB0KCk7XG4gICAgZGVsZXRlIGFwcFJlcG9zW3JlcG8ucmVwb0luZm9fLnRvVVJMU3RyaW5nKCldO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuc3VyZXMgYSByZXBvIGRvZXNuJ3QgYWxyZWFkeSBleGlzdCBhbmQgdGhlbiBjcmVhdGVzIG9uZSB1c2luZyB0aGVcbiAgICogcHJvdmlkZWQgYXBwLlxuICAgKlxuICAgKiBAcGFyYW0geyFSZXBvSW5mb30gcmVwb0luZm8gVGhlIG1ldGFkYXRhIGFib3V0IHRoZSBSZXBvXG4gICAqIEBwYXJhbSB7IUZpcmViYXNlQXBwfSBhcHBcbiAgICogQHJldHVybiB7IVJlcG99IFRoZSBSZXBvIG9iamVjdCBmb3IgdGhlIHNwZWNpZmllZCBzZXJ2ZXIgLyByZXBvTmFtZS5cbiAgICovXG4gIGNyZWF0ZVJlcG8ocmVwb0luZm86IFJlcG9JbmZvLCBhcHA6IEZpcmViYXNlQXBwKTogUmVwbyB7XG4gICAgbGV0IGFwcFJlcG9zID0gc2FmZUdldCh0aGlzLnJlcG9zXywgYXBwLm5hbWUpO1xuXG4gICAgaWYgKCFhcHBSZXBvcykge1xuICAgICAgYXBwUmVwb3MgPSB7fTtcbiAgICAgIHRoaXMucmVwb3NfW2FwcC5uYW1lXSA9IGFwcFJlcG9zO1xuICAgIH1cblxuICAgIGxldCByZXBvID0gc2FmZUdldChhcHBSZXBvcywgcmVwb0luZm8udG9VUkxTdHJpbmcoKSk7XG4gICAgaWYgKHJlcG8pIHtcbiAgICAgIGZhdGFsKFxuICAgICAgICAnRGF0YWJhc2UgaW5pdGlhbGl6ZWQgbXVsdGlwbGUgdGltZXMuIFBsZWFzZSBtYWtlIHN1cmUgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YWJhc2UgVVJMIG1hdGNoZXMgd2l0aCBlYWNoIGRhdGFiYXNlKCkgY2FsbC4nXG4gICAgICApO1xuICAgIH1cbiAgICByZXBvID0gbmV3IFJlcG8ocmVwb0luZm8sIHRoaXMudXNlUmVzdENsaWVudF8sIGFwcCk7XG4gICAgYXBwUmVwb3NbcmVwb0luZm8udG9VUkxTdHJpbmcoKV0gPSByZXBvO1xuXG4gICAgcmV0dXJuIHJlcG87XG4gIH1cblxuICAvKipcbiAgICogRm9yY2VzIHVzIHRvIHVzZSBSZWFkb25seVJlc3RDbGllbnQgaW5zdGVhZCBvZiBQZXJzaXN0ZW50Q29ubmVjdGlvbiBmb3IgbmV3IFJlcG9zLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZvcmNlUmVzdENsaWVudFxuICAgKi9cbiAgZm9yY2VSZXN0Q2xpZW50KGZvcmNlUmVzdENsaWVudDogYm9vbGVhbikge1xuICAgIHRoaXMudXNlUmVzdENsaWVudF8gPSBmb3JjZVJlc3RDbGllbnQ7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IFJlZmVyZW5jZSB9IGZyb20gJy4uL2FwaS9SZWZlcmVuY2UnO1xuaW1wb3J0IHsgRGF0YVNuYXBzaG90IH0gZnJvbSAnLi4vYXBpL0RhdGFTbmFwc2hvdCc7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi91dGlsL1BhdGgnO1xuaW1wb3J0IHsgVHJlZSB9IGZyb20gJy4vdXRpbC9UcmVlJztcbmltcG9ydCB7IFBSSU9SSVRZX0lOREVYIH0gZnJvbSAnLi9zbmFwL2luZGV4ZXMvUHJpb3JpdHlJbmRleCc7XG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi9zbmFwL05vZGUnO1xuaW1wb3J0IHsgTFVJREdlbmVyYXRvciwgd2FybiwgZXhjZXB0aW9uR3VhcmQgfSBmcm9tICcuL3V0aWwvdXRpbCc7XG5pbXBvcnQgeyByZXNvbHZlRGVmZXJyZWRWYWx1ZVNuYXBzaG90IH0gZnJvbSAnLi91dGlsL1NlcnZlclZhbHVlcyc7XG5pbXBvcnQgeyBpc1ZhbGlkUHJpb3JpdHksIHZhbGlkYXRlRmlyZWJhc2VEYXRhIH0gZnJvbSAnLi91dGlsL3ZhbGlkYXRpb24nO1xuaW1wb3J0IHsgY29udGFpbnMsIHNhZmVHZXQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBub2RlRnJvbUpTT04gfSBmcm9tICcuL3NuYXAvbm9kZUZyb21KU09OJztcbmltcG9ydCB7IENoaWxkcmVuTm9kZSB9IGZyb20gJy4vc25hcC9DaGlsZHJlbk5vZGUnO1xuaW1wb3J0IHsgUmVwbyB9IGZyb20gJy4vUmVwbyc7XG5pbXBvcnQgeyBFdmVudCB9IGZyb20gJy4vdmlldy9FdmVudCc7XG5cbi8vIFRPRE86IFRoaXMgaXMgcHJldHR5IG1lc3N5LiAgSWRlYWxseSwgYSBsb3Qgb2YgdGhpcyB3b3VsZCBtb3ZlIGludG8gRmlyZWJhc2VEYXRhLCBvciBhIHRyYW5zYWN0aW9uLXNwZWNpZmljXG4vLyBjb21wb25lbnQgdXNlZCBieSBGaXJlYmFzZURhdGEsIGJ1dCBpdCBoYXMgdGllcyB0byB1c2VyIGNhbGxiYWNrcyAodHJhbnNhY3Rpb24gdXBkYXRlIGFuZCBvbkNvbXBsZXRlKSBhcyB3ZWxsXG4vLyBhcyB0aGUgcmVhbHRpbWUgY29ubmVjdGlvbiAodG8gc2VuZCB0cmFuc2FjdGlvbnMgdG8gdGhlIHNlcnZlcikuICBTbyB0aGF0IGFsbCBuZWVkcyB0byBiZSBkZWNvdXBsZWQgZmlyc3QuXG4vLyBGb3Igbm93IGl0J3MgcGFydCBvZiBSZXBvLCBidXQgaW4gaXRzIG93biBmaWxlLlxuXG4vKipcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBlbnVtIFRyYW5zYWN0aW9uU3RhdHVzIHtcbiAgLy8gV2UndmUgcnVuIHRoZSB0cmFuc2FjdGlvbiBhbmQgdXBkYXRlZCB0cmFuc2FjdGlvblJlc3VsdERhdGFfIHdpdGggdGhlIHJlc3VsdCwgYnV0IGl0IGlzbid0IGN1cnJlbnRseSBzZW50IHRvIHRoZVxuICAvLyBzZXJ2ZXIuIEEgdHJhbnNhY3Rpb24gd2lsbCBnbyBmcm9tIFJVTiAtPiBTRU5UIC0+IFJVTiBpZiBpdCBjb21lcyBiYWNrIGZyb20gdGhlIHNlcnZlciBhcyByZWplY3RlZCBkdWUgdG9cbiAgLy8gbWlzbWF0Y2hlZCBoYXNoLlxuICBSVU4sXG5cbiAgLy8gV2UndmUgcnVuIHRoZSB0cmFuc2FjdGlvbiBhbmQgc2VudCBpdCB0byB0aGUgc2VydmVyIGFuZCBpdCdzIGN1cnJlbnRseSBvdXRzdGFuZGluZyAoaGFzbid0IGNvbWUgYmFjayBhcyBhY2NlcHRlZFxuICAvLyBvciByZWplY3RlZCB5ZXQpLlxuICBTRU5ULFxuXG4gIC8vIFRlbXBvcmFyeSBzdGF0ZSB1c2VkIHRvIG1hcmsgY29tcGxldGVkIHRyYW5zYWN0aW9ucyAod2hldGhlciBzdWNjZXNzZnVsIG9yIGFib3J0ZWQpLiAgVGhlIHRyYW5zYWN0aW9uIHdpbGwgYmVcbiAgLy8gcmVtb3ZlZCB3aGVuIHdlIGdldCBhIGNoYW5jZSB0byBwcnVuZSBjb21wbGV0ZWQgb25lcy5cbiAgQ09NUExFVEVELFxuXG4gIC8vIFVzZWQgd2hlbiBhbiBhbHJlYWR5LXNlbnQgdHJhbnNhY3Rpb24gbmVlZHMgdG8gYmUgYWJvcnRlZCAoZS5nLiBkdWUgdG8gYSBjb25mbGljdGluZyBzZXQoKSBjYWxsIHRoYXQgd2FzIG1hZGUpLlxuICAvLyBJZiBpdCBjb21lcyBiYWNrIGFzIHVuc3VjY2Vzc2Z1bCwgd2UnbGwgYWJvcnQgaXQuXG4gIFNFTlRfTkVFRFNfQUJPUlQsXG5cbiAgLy8gVGVtcG9yYXJ5IHN0YXRlIHVzZWQgdG8gbWFyayB0cmFuc2FjdGlvbnMgdGhhdCBuZWVkIHRvIGJlIGFib3J0ZWQuXG4gIE5FRURTX0FCT1JUXG59XG5cbi8qKlxuICogSWYgYSB0cmFuc2FjdGlvbiBkb2VzIG5vdCBzdWNjZWVkIGFmdGVyIDI1IHJldHJpZXMsIHdlIGFib3J0IGl0LiAgQW1vbmcgb3RoZXIgdGhpbmdzIHRoaXMgZW5zdXJlIHRoYXQgaWYgdGhlcmUnc1xuICogZXZlciBhIGJ1ZyBjYXVzaW5nIGEgbWlzbWF0Y2ggYmV0d2VlbiBjbGllbnQgLyBzZXJ2ZXIgaGFzaGVzIGZvciBzb21lIGRhdGEsIHdlIHdvbid0IHJldHJ5IGluZGVmaW5pdGVseS5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAY29uc3RcbiAqIEBwcml2YXRlXG4gKi9cbihSZXBvIGFzIGFueSkuTUFYX1RSQU5TQUNUSU9OX1JFVFJJRVNfID0gMjU7XG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqICAgcGF0aDogIVBhdGgsXG4gKiAgIHVwZGF0ZTogZnVuY3Rpb24oKik6KixcbiAqICAgb25Db21wbGV0ZTogP2Z1bmN0aW9uKD9FcnJvciwgYm9vbGVhbiwgP0RhdGFTbmFwc2hvdCksXG4gKiAgIHN0YXR1czogP1RyYW5zYWN0aW9uU3RhdHVzLFxuICogICBvcmRlcjogIW51bWJlcixcbiAqICAgYXBwbHlMb2NhbGx5OiBib29sZWFuLFxuICogICByZXRyeUNvdW50OiAhbnVtYmVyLFxuICogICB1bndhdGNoZXI6IGZ1bmN0aW9uKCksXG4gKiAgIGFib3J0UmVhc29uOiA/c3RyaW5nLFxuICogICBjdXJyZW50V3JpdGVJZDogIW51bWJlcixcbiAqICAgY3VycmVudElucHV0U25hcHNob3Q6ID9Ob2RlLFxuICogICBjdXJyZW50T3V0cHV0U25hcHNob3RSYXc6ID9Ob2RlLFxuICogICBjdXJyZW50T3V0cHV0U25hcHNob3RSZXNvbHZlZDogP05vZGVcbiAqIH19XG4gKi9cbnR5cGUgVHJhbnNhY3Rpb24gPSB7XG4gIHBhdGg6IFBhdGg7XG4gIHVwZGF0ZTogKGE6IGFueSkgPT4gYW55O1xuICBvbkNvbXBsZXRlOiAoYTogRXJyb3IgfCBudWxsLCBiOiBib29sZWFuLCBjOiBEYXRhU25hcHNob3QgfCBudWxsKSA9PiB2b2lkO1xuICBzdGF0dXM6IFRyYW5zYWN0aW9uU3RhdHVzO1xuICBvcmRlcjogbnVtYmVyO1xuICBhcHBseUxvY2FsbHk6IGJvb2xlYW47XG4gIHJldHJ5Q291bnQ6IG51bWJlcjtcbiAgdW53YXRjaGVyOiAoKSA9PiB2b2lkO1xuICBhYm9ydFJlYXNvbjogc3RyaW5nIHwgbnVsbDtcbiAgY3VycmVudFdyaXRlSWQ6IG51bWJlcjtcbiAgY3VycmVudElucHV0U25hcHNob3Q6IE5vZGUgfCBudWxsO1xuICBjdXJyZW50T3V0cHV0U25hcHNob3RSYXc6IE5vZGUgfCBudWxsO1xuICBjdXJyZW50T3V0cHV0U25hcHNob3RSZXNvbHZlZDogTm9kZSB8IG51bGw7XG59O1xuXG4vKipcbiAqIFNldHVwIHRoZSB0cmFuc2FjdGlvbiBkYXRhIHN0cnVjdHVyZXNcbiAqIEBwcml2YXRlXG4gKi9cbihSZXBvLnByb3RvdHlwZSBhcyBhbnkpLnRyYW5zYWN0aW9uc19pbml0XyA9IGZ1bmN0aW9uKCkge1xuICAvKipcbiAgICogU3RvcmVzIHF1ZXVlcyBvZiBvdXRzdGFuZGluZyB0cmFuc2FjdGlvbnMgZm9yIEZpcmViYXNlIGxvY2F0aW9ucy5cbiAgICpcbiAgICogQHR5cGUgeyFUcmVlLjxBcnJheS48IVRyYW5zYWN0aW9uPj59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLnRyYW5zYWN0aW9uUXVldWVUcmVlXyA9IG5ldyBUcmVlPFRyYW5zYWN0aW9uW10+KCk7XG59O1xuXG5kZWNsYXJlIG1vZHVsZSAnLi9SZXBvJyB7XG4gIGludGVyZmFjZSBSZXBvIHtcbiAgICBzdGFydFRyYW5zYWN0aW9uKFxuICAgICAgcGF0aDogUGF0aCxcbiAgICAgIHRyYW5zYWN0aW9uVXBkYXRlOiAoYTogYW55KSA9PiB2b2lkLFxuICAgICAgb25Db21wbGV0ZTogKChhOiBFcnJvciwgYjogYm9vbGVhbiwgYzogRGF0YVNuYXBzaG90KSA9PiB2b2lkKSB8IG51bGwsXG4gICAgICBhcHBseUxvY2FsbHk6IGJvb2xlYW5cbiAgICApOiB2b2lkO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB0cmFuc2FjdGlvbiwgYWRkcyBpdCB0byB0aGUgdHJhbnNhY3Rpb25zIHdlJ3JlIHRyYWNraW5nLCBhbmQgc2VuZHMgaXQgdG8gdGhlIHNlcnZlciBpZiBwb3NzaWJsZS5cbiAqXG4gKiBAcGFyYW0geyFQYXRofSBwYXRoIFBhdGggYXQgd2hpY2ggdG8gZG8gdHJhbnNhY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCopOip9IHRyYW5zYWN0aW9uVXBkYXRlIFVwZGF0ZSBjYWxsYmFjay5cbiAqIEBwYXJhbSB7P2Z1bmN0aW9uKD9FcnJvciwgYm9vbGVhbiwgP0RhdGFTbmFwc2hvdCl9IG9uQ29tcGxldGUgQ29tcGxldGlvbiBjYWxsYmFjay5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gYXBwbHlMb2NhbGx5IFdoZXRoZXIgb3Igbm90IHRvIG1ha2UgaW50ZXJtZWRpYXRlIHJlc3VsdHMgdmlzaWJsZVxuICovXG5SZXBvLnByb3RvdHlwZS5zdGFydFRyYW5zYWN0aW9uID0gZnVuY3Rpb24oXG4gIHBhdGg6IFBhdGgsXG4gIHRyYW5zYWN0aW9uVXBkYXRlOiAoYTogYW55KSA9PiBhbnksXG4gIG9uQ29tcGxldGU6ICgoYTogRXJyb3IsIGI6IGJvb2xlYW4sIGM6IERhdGFTbmFwc2hvdCkgPT4gdm9pZCkgfCBudWxsLFxuICBhcHBseUxvY2FsbHk6IGJvb2xlYW5cbikge1xuICB0aGlzLmxvZ18oJ3RyYW5zYWN0aW9uIG9uICcgKyBwYXRoKTtcblxuICAvLyBBZGQgYSB3YXRjaCB0byBtYWtlIHN1cmUgd2UgZ2V0IHNlcnZlciB1cGRhdGVzLlxuICBjb25zdCB2YWx1ZUNhbGxiYWNrID0gZnVuY3Rpb24oKSB7fTtcbiAgY29uc3Qgd2F0Y2hSZWYgPSBuZXcgUmVmZXJlbmNlKHRoaXMsIHBhdGgpO1xuICB3YXRjaFJlZi5vbigndmFsdWUnLCB2YWx1ZUNhbGxiYWNrKTtcbiAgY29uc3QgdW53YXRjaGVyID0gZnVuY3Rpb24oKSB7XG4gICAgd2F0Y2hSZWYub2ZmKCd2YWx1ZScsIHZhbHVlQ2FsbGJhY2spO1xuICB9O1xuXG4gIC8vIEluaXRpYWxpemUgdHJhbnNhY3Rpb24uXG4gIGNvbnN0IHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbiA9IHtcbiAgICBwYXRoLFxuICAgIHVwZGF0ZTogdHJhbnNhY3Rpb25VcGRhdGUsXG4gICAgb25Db21wbGV0ZSxcblxuICAgIC8vIE9uZSBvZiBUcmFuc2FjdGlvblN0YXR1cyBlbnVtcy5cbiAgICBzdGF0dXM6IG51bGwsXG5cbiAgICAvLyBVc2VkIHdoZW4gY29tYmluaW5nIHRyYW5zYWN0aW9ucyBhdCBkaWZmZXJlbnQgbG9jYXRpb25zIHRvIGZpZ3VyZSBvdXQgd2hpY2ggb25lIGdvZXMgZmlyc3QuXG4gICAgb3JkZXI6IExVSURHZW5lcmF0b3IoKSxcblxuICAgIC8vIFdoZXRoZXIgdG8gcmFpc2UgbG9jYWwgZXZlbnRzIGZvciB0aGlzIHRyYW5zYWN0aW9uLlxuICAgIGFwcGx5TG9jYWxseTogYXBwbHlMb2NhbGx5LFxuXG4gICAgLy8gQ291bnQgb2YgaG93IG1hbnkgdGltZXMgd2UndmUgcmV0cmllZCB0aGUgdHJhbnNhY3Rpb24uXG4gICAgcmV0cnlDb3VudDogMCxcblxuICAgIC8vIEZ1bmN0aW9uIHRvIGNhbGwgdG8gY2xlYW4gdXAgb3VyIC5vbigpIGxpc3RlbmVyLlxuICAgIHVud2F0Y2hlcixcblxuICAgIC8vIFN0b3JlcyB3aHkgYSB0cmFuc2FjdGlvbiB3YXMgYWJvcnRlZC5cbiAgICBhYm9ydFJlYXNvbjogbnVsbCxcblxuICAgIGN1cnJlbnRXcml0ZUlkOiBudWxsLFxuXG4gICAgY3VycmVudElucHV0U25hcHNob3Q6IG51bGwsXG5cbiAgICBjdXJyZW50T3V0cHV0U25hcHNob3RSYXc6IG51bGwsXG5cbiAgICBjdXJyZW50T3V0cHV0U25hcHNob3RSZXNvbHZlZDogbnVsbFxuICB9O1xuXG4gIC8vIFJ1biB0cmFuc2FjdGlvbiBpbml0aWFsbHkuXG4gIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IHRoaXMuZ2V0TGF0ZXN0U3RhdGVfKHBhdGgpO1xuICB0cmFuc2FjdGlvbi5jdXJyZW50SW5wdXRTbmFwc2hvdCA9IGN1cnJlbnRTdGF0ZTtcbiAgY29uc3QgbmV3VmFsID0gdHJhbnNhY3Rpb24udXBkYXRlKGN1cnJlbnRTdGF0ZS52YWwoKSk7XG4gIGlmIChuZXdWYWwgPT09IHVuZGVmaW5lZCkge1xuICAgIC8vIEFib3J0IHRyYW5zYWN0aW9uLlxuICAgIHRyYW5zYWN0aW9uLnVud2F0Y2hlcigpO1xuICAgIHRyYW5zYWN0aW9uLmN1cnJlbnRPdXRwdXRTbmFwc2hvdFJhdyA9IG51bGw7XG4gICAgdHJhbnNhY3Rpb24uY3VycmVudE91dHB1dFNuYXBzaG90UmVzb2x2ZWQgPSBudWxsO1xuICAgIGlmICh0cmFuc2FjdGlvbi5vbkNvbXBsZXRlKSB7XG4gICAgICAvLyBXZSBqdXN0IHNldCB0aGUgaW5wdXQgc25hcHNob3QsIHNvIHRoaXMgY2FzdCBzaG91bGQgYmUgc2FmZVxuICAgICAgY29uc3Qgc25hcHNob3QgPSBuZXcgRGF0YVNuYXBzaG90KFxuICAgICAgICB0cmFuc2FjdGlvbi5jdXJyZW50SW5wdXRTbmFwc2hvdCxcbiAgICAgICAgbmV3IFJlZmVyZW5jZSh0aGlzLCB0cmFuc2FjdGlvbi5wYXRoKSxcbiAgICAgICAgUFJJT1JJVFlfSU5ERVhcbiAgICAgICk7XG4gICAgICB0cmFuc2FjdGlvbi5vbkNvbXBsZXRlKG51bGwsIGZhbHNlLCBzbmFwc2hvdCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhbGlkYXRlRmlyZWJhc2VEYXRhKFxuICAgICAgJ3RyYW5zYWN0aW9uIGZhaWxlZDogRGF0YSByZXR1cm5lZCAnLFxuICAgICAgbmV3VmFsLFxuICAgICAgdHJhbnNhY3Rpb24ucGF0aFxuICAgICk7XG5cbiAgICAvLyBNYXJrIGFzIHJ1biBhbmQgYWRkIHRvIG91ciBxdWV1ZS5cbiAgICB0cmFuc2FjdGlvbi5zdGF0dXMgPSBUcmFuc2FjdGlvblN0YXR1cy5SVU47XG4gICAgY29uc3QgcXVldWVOb2RlID0gdGhpcy50cmFuc2FjdGlvblF1ZXVlVHJlZV8uc3ViVHJlZShwYXRoKTtcbiAgICBjb25zdCBub2RlUXVldWUgPSBxdWV1ZU5vZGUuZ2V0VmFsdWUoKSB8fCBbXTtcbiAgICBub2RlUXVldWUucHVzaCh0cmFuc2FjdGlvbik7XG5cbiAgICBxdWV1ZU5vZGUuc2V0VmFsdWUobm9kZVF1ZXVlKTtcblxuICAgIC8vIFVwZGF0ZSB2aXNpYmxlRGF0YSBhbmQgcmFpc2UgZXZlbnRzXG4gICAgLy8gTm90ZTogV2UgaW50ZW50aW9uYWxseSByYWlzZSBldmVudHMgYWZ0ZXIgdXBkYXRpbmcgYWxsIG9mIG91ciB0cmFuc2FjdGlvbiBzdGF0ZSwgc2luY2UgdGhlIHVzZXIgY291bGRcbiAgICAvLyBzdGFydCBuZXcgdHJhbnNhY3Rpb25zIGZyb20gdGhlIGV2ZW50IGNhbGxiYWNrcy5cbiAgICBsZXQgcHJpb3JpdHlGb3JOb2RlO1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiBuZXdWYWwgPT09ICdvYmplY3QnICYmXG4gICAgICBuZXdWYWwgIT09IG51bGwgJiZcbiAgICAgIGNvbnRhaW5zKG5ld1ZhbCwgJy5wcmlvcml0eScpXG4gICAgKSB7XG4gICAgICBwcmlvcml0eUZvck5vZGUgPSBzYWZlR2V0KG5ld1ZhbCwgJy5wcmlvcml0eScpO1xuICAgICAgYXNzZXJ0KFxuICAgICAgICBpc1ZhbGlkUHJpb3JpdHkocHJpb3JpdHlGb3JOb2RlKSxcbiAgICAgICAgJ0ludmFsaWQgcHJpb3JpdHkgcmV0dXJuZWQgYnkgdHJhbnNhY3Rpb24uICcgK1xuICAgICAgICAgICdQcmlvcml0eSBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nLCBmaW5pdGUgbnVtYmVyLCBzZXJ2ZXIgdmFsdWUsIG9yIG51bGwuJ1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY3VycmVudE5vZGUgPVxuICAgICAgICB0aGlzLnNlcnZlclN5bmNUcmVlXy5jYWxjQ29tcGxldGVFdmVudENhY2hlKHBhdGgpIHx8XG4gICAgICAgIENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuICAgICAgcHJpb3JpdHlGb3JOb2RlID0gY3VycmVudE5vZGUuZ2V0UHJpb3JpdHkoKS52YWwoKTtcbiAgICB9XG4gICAgcHJpb3JpdHlGb3JOb2RlIC8qKiBAdHlwZSB7bnVsbHxudW1iZXJ8c3RyaW5nfSAqLyA9IHByaW9yaXR5Rm9yTm9kZTtcblxuICAgIGNvbnN0IHNlcnZlclZhbHVlcyA9IHRoaXMuZ2VuZXJhdGVTZXJ2ZXJWYWx1ZXMoKTtcbiAgICBjb25zdCBuZXdOb2RlVW5yZXNvbHZlZCA9IG5vZGVGcm9tSlNPTihuZXdWYWwsIHByaW9yaXR5Rm9yTm9kZSk7XG4gICAgY29uc3QgbmV3Tm9kZSA9IHJlc29sdmVEZWZlcnJlZFZhbHVlU25hcHNob3QoXG4gICAgICBuZXdOb2RlVW5yZXNvbHZlZCxcbiAgICAgIHNlcnZlclZhbHVlc1xuICAgICk7XG4gICAgdHJhbnNhY3Rpb24uY3VycmVudE91dHB1dFNuYXBzaG90UmF3ID0gbmV3Tm9kZVVucmVzb2x2ZWQ7XG4gICAgdHJhbnNhY3Rpb24uY3VycmVudE91dHB1dFNuYXBzaG90UmVzb2x2ZWQgPSBuZXdOb2RlO1xuICAgIHRyYW5zYWN0aW9uLmN1cnJlbnRXcml0ZUlkID0gdGhpcy5nZXROZXh0V3JpdGVJZF8oKTtcblxuICAgIGNvbnN0IGV2ZW50cyA9IHRoaXMuc2VydmVyU3luY1RyZWVfLmFwcGx5VXNlck92ZXJ3cml0ZShcbiAgICAgIHBhdGgsXG4gICAgICBuZXdOb2RlLFxuICAgICAgdHJhbnNhY3Rpb24uY3VycmVudFdyaXRlSWQsXG4gICAgICB0cmFuc2FjdGlvbi5hcHBseUxvY2FsbHlcbiAgICApO1xuICAgIHRoaXMuZXZlbnRRdWV1ZV8ucmFpc2VFdmVudHNGb3JDaGFuZ2VkUGF0aChwYXRoLCBldmVudHMpO1xuXG4gICAgdGhpcy5zZW5kUmVhZHlUcmFuc2FjdGlvbnNfKCk7XG4gIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICogQHBhcmFtIHtBcnJheS48bnVtYmVyPj19IGV4Y2x1ZGVTZXRzIEEgc3BlY2lmaWMgc2V0IHRvIGV4Y2x1ZGVcbiAqIEByZXR1cm4ge05vZGV9XG4gKiBAcHJpdmF0ZVxuICovXG4oUmVwby5wcm90b3R5cGUgYXMgYW55KS5nZXRMYXRlc3RTdGF0ZV8gPSBmdW5jdGlvbihcbiAgcGF0aDogUGF0aCxcbiAgZXhjbHVkZVNldHM/OiBudW1iZXJbXVxuKTogTm9kZSB7XG4gIHJldHVybiAoXG4gICAgdGhpcy5zZXJ2ZXJTeW5jVHJlZV8uY2FsY0NvbXBsZXRlRXZlbnRDYWNoZShwYXRoLCBleGNsdWRlU2V0cykgfHxcbiAgICBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERVxuICApO1xufTtcblxuLyoqXG4gKiBTZW5kcyBhbnkgYWxyZWFkeS1ydW4gdHJhbnNhY3Rpb25zIHRoYXQgYXJlbid0IHdhaXRpbmcgZm9yIG91dHN0YW5kaW5nIHRyYW5zYWN0aW9ucyB0b1xuICogY29tcGxldGUuXG4gKlxuICogRXh0ZXJuYWxseSBpdCdzIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgYnV0IGl0IGNhbGxzIGl0c2VsZiByZWN1cnNpdmVseSB3aXRoIGEgcGFydGljdWxhclxuICogdHJhbnNhY3Rpb25RdWV1ZVRyZWUgbm9kZSB0byByZWN1cnNlIHRocm91Z2ggdGhlIHRyZWUuXG4gKlxuICogQHBhcmFtIHtUcmVlLjxBcnJheS48VHJhbnNhY3Rpb24+Pj19IG5vZGUgIHRyYW5zYWN0aW9uUXVldWVUcmVlIG5vZGUgdG8gc3RhcnQgYXQuXG4gKiBAcHJpdmF0ZVxuICovXG4oUmVwby5wcm90b3R5cGUgYXMgYW55KS5zZW5kUmVhZHlUcmFuc2FjdGlvbnNfID0gZnVuY3Rpb24oXG4gIG5vZGU6IFRyZWU8VHJhbnNhY3Rpb25bXT4gPSB0aGlzLnRyYW5zYWN0aW9uUXVldWVUcmVlX1xuKSB7XG4gIC8vIEJlZm9yZSByZWN1cnNpbmcsIG1ha2Ugc3VyZSBhbnkgY29tcGxldGVkIHRyYW5zYWN0aW9ucyBhcmUgcmVtb3ZlZC5cbiAgaWYgKCFub2RlKSB7XG4gICAgdGhpcy5wcnVuZUNvbXBsZXRlZFRyYW5zYWN0aW9uc0JlbG93Tm9kZV8obm9kZSk7XG4gIH1cblxuICBpZiAobm9kZS5nZXRWYWx1ZSgpICE9PSBudWxsKSB7XG4gICAgY29uc3QgcXVldWUgPSB0aGlzLmJ1aWxkVHJhbnNhY3Rpb25RdWV1ZV8obm9kZSk7XG4gICAgYXNzZXJ0KHF1ZXVlLmxlbmd0aCA+IDAsICdTZW5kaW5nIHplcm8gbGVuZ3RoIHRyYW5zYWN0aW9uIHF1ZXVlJyk7XG5cbiAgICBjb25zdCBhbGxSdW4gPSBxdWV1ZS5ldmVyeShcbiAgICAgICh0cmFuc2FjdGlvbjogVHJhbnNhY3Rpb24pID0+IHRyYW5zYWN0aW9uLnN0YXR1cyA9PT0gVHJhbnNhY3Rpb25TdGF0dXMuUlVOXG4gICAgKTtcblxuICAgIC8vIElmIHRoZXkncmUgYWxsIHJ1biAoYW5kIG5vdCBzZW50KSwgd2UgY2FuIHNlbmQgdGhlbS4gIEVsc2UsIHdlIG11c3Qgd2FpdC5cbiAgICBpZiAoYWxsUnVuKSB7XG4gICAgICB0aGlzLnNlbmRUcmFuc2FjdGlvblF1ZXVlXyhub2RlLnBhdGgoKSwgcXVldWUpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChub2RlLmhhc0NoaWxkcmVuKCkpIHtcbiAgICBub2RlLmZvckVhY2hDaGlsZChjaGlsZE5vZGUgPT4ge1xuICAgICAgdGhpcy5zZW5kUmVhZHlUcmFuc2FjdGlvbnNfKGNoaWxkTm9kZSk7XG4gICAgfSk7XG4gIH1cbn07XG5cbi8qKlxuICogR2l2ZW4gYSBsaXN0IG9mIHJ1biB0cmFuc2FjdGlvbnMsIHNlbmQgdGhlbSB0byB0aGUgc2VydmVyIGFuZCB0aGVuIGhhbmRsZSB0aGUgcmVzdWx0IChzdWNjZXNzIG9yIGZhaWx1cmUpLlxuICpcbiAqIEBwYXJhbSB7IVBhdGh9IHBhdGggVGhlIGxvY2F0aW9uIG9mIHRoZSBxdWV1ZS5cbiAqIEBwYXJhbSB7IUFycmF5LjxUcmFuc2FjdGlvbj59IHF1ZXVlIFF1ZXVlIG9mIHRyYW5zYWN0aW9ucyB1bmRlciB0aGUgc3BlY2lmaWVkIGxvY2F0aW9uLlxuICogQHByaXZhdGVcbiAqL1xuKFJlcG8ucHJvdG90eXBlIGFzIGFueSkuc2VuZFRyYW5zYWN0aW9uUXVldWVfID0gZnVuY3Rpb24oXG4gIHBhdGg6IFBhdGgsXG4gIHF1ZXVlOiBBcnJheTxUcmFuc2FjdGlvbj5cbikge1xuICAvLyBNYXJrIHRyYW5zYWN0aW9ucyBhcyBzZW50IGFuZCBpbmNyZW1lbnQgcmV0cnkgY291bnQhXG4gIGNvbnN0IHNldHNUb0lnbm9yZSA9IHF1ZXVlLm1hcChmdW5jdGlvbih0eG4pIHtcbiAgICByZXR1cm4gdHhuLmN1cnJlbnRXcml0ZUlkO1xuICB9KTtcbiAgY29uc3QgbGF0ZXN0U3RhdGUgPSB0aGlzLmdldExhdGVzdFN0YXRlXyhwYXRoLCBzZXRzVG9JZ25vcmUpO1xuICBsZXQgc25hcFRvU2VuZCA9IGxhdGVzdFN0YXRlO1xuICBjb25zdCBsYXRlc3RIYXNoID0gbGF0ZXN0U3RhdGUuaGFzaCgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgdHhuID0gcXVldWVbaV07XG4gICAgYXNzZXJ0KFxuICAgICAgdHhuLnN0YXR1cyA9PT0gVHJhbnNhY3Rpb25TdGF0dXMuUlVOLFxuICAgICAgJ3RyeVRvU2VuZFRyYW5zYWN0aW9uUXVldWVfOiBpdGVtcyBpbiBxdWV1ZSBzaG91bGQgYWxsIGJlIHJ1bi4nXG4gICAgKTtcbiAgICB0eG4uc3RhdHVzID0gVHJhbnNhY3Rpb25TdGF0dXMuU0VOVDtcbiAgICB0eG4ucmV0cnlDb3VudCsrO1xuICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IFBhdGgucmVsYXRpdmVQYXRoKHBhdGgsIHR4bi5wYXRoKTtcbiAgICAvLyBJZiB3ZSd2ZSBnb3R0ZW4gdG8gdGhpcyBwb2ludCwgdGhlIG91dHB1dCBzbmFwc2hvdCBtdXN0IGJlIGRlZmluZWQuXG4gICAgc25hcFRvU2VuZCA9IHNuYXBUb1NlbmQudXBkYXRlQ2hpbGQoXG4gICAgICByZWxhdGl2ZVBhdGggLyoqQHR5cGUgeyFOb2RlfSAqLyxcbiAgICAgIHR4bi5jdXJyZW50T3V0cHV0U25hcHNob3RSYXdcbiAgICApO1xuICB9XG5cbiAgY29uc3QgZGF0YVRvU2VuZCA9IHNuYXBUb1NlbmQudmFsKHRydWUpO1xuICBjb25zdCBwYXRoVG9TZW5kID0gcGF0aDtcblxuICAvLyBTZW5kIHRoZSBwdXQuXG4gIHRoaXMuc2VydmVyXy5wdXQoXG4gICAgcGF0aFRvU2VuZC50b1N0cmluZygpLFxuICAgIGRhdGFUb1NlbmQsXG4gICAgKHN0YXR1czogc3RyaW5nKSA9PiB7XG4gICAgICB0aGlzLmxvZ18oJ3RyYW5zYWN0aW9uIHB1dCByZXNwb25zZScsIHtcbiAgICAgICAgcGF0aDogcGF0aFRvU2VuZC50b1N0cmluZygpLFxuICAgICAgICBzdGF0dXNcbiAgICAgIH0pO1xuXG4gICAgICBsZXQgZXZlbnRzOiBFdmVudFtdID0gW107XG4gICAgICBpZiAoc3RhdHVzID09PSAnb2snKSB7XG4gICAgICAgIC8vIFF1ZXVlIHVwIHRoZSBjYWxsYmFja3MgYW5kIGZpcmUgdGhlbSBhZnRlciBjbGVhbmluZyB1cCBhbGwgb2Ygb3VyIHRyYW5zYWN0aW9uIHN0YXRlLCBzaW5jZVxuICAgICAgICAvLyB0aGUgY2FsbGJhY2sgY291bGQgdHJpZ2dlciBtb3JlIHRyYW5zYWN0aW9ucyBvciBzZXRzLlxuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHF1ZXVlW2ldLnN0YXR1cyA9IFRyYW5zYWN0aW9uU3RhdHVzLkNPTVBMRVRFRDtcbiAgICAgICAgICBldmVudHMgPSBldmVudHMuY29uY2F0KFxuICAgICAgICAgICAgdGhpcy5zZXJ2ZXJTeW5jVHJlZV8uYWNrVXNlcldyaXRlKHF1ZXVlW2ldLmN1cnJlbnRXcml0ZUlkKVxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKHF1ZXVlW2ldLm9uQ29tcGxldGUpIHtcbiAgICAgICAgICAgIC8vIFdlIG5ldmVyIHVuc2V0IHRoZSBvdXRwdXQgc25hcHNob3QsIGFuZCBnaXZlbiB0aGF0IHRoaXMgdHJhbnNhY3Rpb24gaXMgY29tcGxldGUsIGl0IHNob3VsZCBiZSBzZXRcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBxdWV1ZVtpXS5jdXJyZW50T3V0cHV0U25hcHNob3RSZXNvbHZlZCBhcyBOb2RlO1xuICAgICAgICAgICAgY29uc3QgcmVmID0gbmV3IFJlZmVyZW5jZSh0aGlzLCBxdWV1ZVtpXS5wYXRoKTtcbiAgICAgICAgICAgIGNvbnN0IHNuYXBzaG90ID0gbmV3IERhdGFTbmFwc2hvdChub2RlLCByZWYsIFBSSU9SSVRZX0lOREVYKTtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5wdXNoKFxuICAgICAgICAgICAgICBxdWV1ZVtpXS5vbkNvbXBsZXRlLmJpbmQobnVsbCwgbnVsbCwgdHJ1ZSwgc25hcHNob3QpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBxdWV1ZVtpXS51bndhdGNoZXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE5vdyByZW1vdmUgdGhlIGNvbXBsZXRlZCB0cmFuc2FjdGlvbnMuXG4gICAgICAgIHRoaXMucHJ1bmVDb21wbGV0ZWRUcmFuc2FjdGlvbnNCZWxvd05vZGVfKFxuICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25RdWV1ZVRyZWVfLnN1YlRyZWUocGF0aClcbiAgICAgICAgKTtcbiAgICAgICAgLy8gVGhlcmUgbWF5IGJlIHBlbmRpbmcgdHJhbnNhY3Rpb25zIHRoYXQgd2UgY2FuIG5vdyBzZW5kLlxuICAgICAgICB0aGlzLnNlbmRSZWFkeVRyYW5zYWN0aW9uc18oKTtcblxuICAgICAgICB0aGlzLmV2ZW50UXVldWVfLnJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgocGF0aCwgZXZlbnRzKTtcblxuICAgICAgICAvLyBGaW5hbGx5LCB0cmlnZ2VyIG9uQ29tcGxldGUgY2FsbGJhY2tzLlxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhbGxiYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGV4Y2VwdGlvbkd1YXJkKGNhbGxiYWNrc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHRyYW5zYWN0aW9ucyBhcmUgbm8gbG9uZ2VyIHNlbnQuICBVcGRhdGUgdGhlaXIgc3RhdHVzIGFwcHJvcHJpYXRlbHkuXG4gICAgICAgIGlmIChzdGF0dXMgPT09ICdkYXRhc3RhbGUnKSB7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHF1ZXVlW2ldLnN0YXR1cyA9PT0gVHJhbnNhY3Rpb25TdGF0dXMuU0VOVF9ORUVEU19BQk9SVClcbiAgICAgICAgICAgICAgcXVldWVbaV0uc3RhdHVzID0gVHJhbnNhY3Rpb25TdGF0dXMuTkVFRFNfQUJPUlQ7XG4gICAgICAgICAgICBlbHNlIHF1ZXVlW2ldLnN0YXR1cyA9IFRyYW5zYWN0aW9uU3RhdHVzLlJVTjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd2FybihcbiAgICAgICAgICAgICd0cmFuc2FjdGlvbiBhdCAnICsgcGF0aFRvU2VuZC50b1N0cmluZygpICsgJyBmYWlsZWQ6ICcgKyBzdGF0dXNcbiAgICAgICAgICApO1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHF1ZXVlW2ldLnN0YXR1cyA9IFRyYW5zYWN0aW9uU3RhdHVzLk5FRURTX0FCT1JUO1xuICAgICAgICAgICAgcXVldWVbaV0uYWJvcnRSZWFzb24gPSBzdGF0dXM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZXJ1blRyYW5zYWN0aW9uc18ocGF0aCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBsYXRlc3RIYXNoXG4gICk7XG59O1xuXG4vKipcbiAqIEZpbmRzIGFsbCB0cmFuc2FjdGlvbnMgZGVwZW5kZW50IG9uIHRoZSBkYXRhIGF0IGNoYW5nZWRQYXRoIGFuZCByZXJ1bnMgdGhlbS5cbiAqXG4gKiBTaG91bGQgYmUgY2FsbGVkIGFueSB0aW1lIGNhY2hlZCBkYXRhIGNoYW5nZXMuXG4gKlxuICogUmV0dXJuIHRoZSBoaWdoZXN0IHBhdGggdGhhdCB3YXMgYWZmZWN0ZWQgYnkgcmVydW5uaW5nIHRyYW5zYWN0aW9ucy4gIFRoaXMgaXMgdGhlIHBhdGggYXQgd2hpY2ggZXZlbnRzIG5lZWQgdG9cbiAqIGJlIHJhaXNlZCBmb3IuXG4gKlxuICogQHBhcmFtIHshUGF0aH0gY2hhbmdlZFBhdGggVGhlIHBhdGggaW4gbWVyZ2VkRGF0YSB0aGF0IGNoYW5nZWQuXG4gKiBAcmV0dXJuIHshUGF0aH0gVGhlIHJvb3Rtb3N0IHBhdGggdGhhdCB3YXMgYWZmZWN0ZWQgYnkgcmVydW5uaW5nIHRyYW5zYWN0aW9ucy5cbiAqIEBwcml2YXRlXG4gKi9cbihSZXBvLnByb3RvdHlwZSBhcyBhbnkpLnJlcnVuVHJhbnNhY3Rpb25zXyA9IGZ1bmN0aW9uKGNoYW5nZWRQYXRoOiBQYXRoKTogUGF0aCB7XG4gIGNvbnN0IHJvb3RNb3N0VHJhbnNhY3Rpb25Ob2RlID0gdGhpcy5nZXRBbmNlc3RvclRyYW5zYWN0aW9uTm9kZV8oY2hhbmdlZFBhdGgpO1xuICBjb25zdCBwYXRoID0gcm9vdE1vc3RUcmFuc2FjdGlvbk5vZGUucGF0aCgpO1xuXG4gIGNvbnN0IHF1ZXVlID0gdGhpcy5idWlsZFRyYW5zYWN0aW9uUXVldWVfKHJvb3RNb3N0VHJhbnNhY3Rpb25Ob2RlKTtcbiAgdGhpcy5yZXJ1blRyYW5zYWN0aW9uUXVldWVfKHF1ZXVlLCBwYXRoKTtcblxuICByZXR1cm4gcGF0aDtcbn07XG5cbi8qKlxuICogRG9lcyBhbGwgdGhlIHdvcmsgb2YgcmVydW5uaW5nIHRyYW5zYWN0aW9ucyAoYXMgd2VsbCBhcyBjbGVhbnMgdXAgYWJvcnRlZCB0cmFuc2FjdGlvbnMgYW5kIHdoYXRub3QpLlxuICpcbiAqIEBwYXJhbSB7QXJyYXkuPFRyYW5zYWN0aW9uPn0gcXVldWUgVGhlIHF1ZXVlIG9mIHRyYW5zYWN0aW9ucyB0byBydW4uXG4gKiBAcGFyYW0geyFQYXRofSBwYXRoIFRoZSBwYXRoIHRoZSBxdWV1ZSBpcyBmb3IuXG4gKiBAcHJpdmF0ZVxuICovXG4oUmVwby5wcm90b3R5cGUgYXMgYW55KS5yZXJ1blRyYW5zYWN0aW9uUXVldWVfID0gZnVuY3Rpb24oXG4gIHF1ZXVlOiBBcnJheTxUcmFuc2FjdGlvbj4sXG4gIHBhdGg6IFBhdGhcbikge1xuICBpZiAocXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuOyAvLyBOb3RoaW5nIHRvIGRvIVxuICB9XG5cbiAgLy8gUXVldWUgdXAgdGhlIGNhbGxiYWNrcyBhbmQgZmlyZSB0aGVtIGFmdGVyIGNsZWFuaW5nIHVwIGFsbCBvZiBvdXIgdHJhbnNhY3Rpb24gc3RhdGUsIHNpbmNlXG4gIC8vIHRoZSBjYWxsYmFjayBjb3VsZCB0cmlnZ2VyIG1vcmUgdHJhbnNhY3Rpb25zIG9yIHNldHMuXG4gIGNvbnN0IGNhbGxiYWNrcyA9IFtdO1xuICBsZXQgZXZlbnRzOiBFdmVudFtdID0gW107XG4gIC8vIElnbm9yZSBhbGwgb2YgdGhlIHNldHMgd2UncmUgZ29pbmcgdG8gcmUtcnVuLlxuICBjb25zdCB0eG5zVG9SZXJ1biA9IHF1ZXVlLmZpbHRlcihmdW5jdGlvbihxKSB7XG4gICAgcmV0dXJuIHEuc3RhdHVzID09PSBUcmFuc2FjdGlvblN0YXR1cy5SVU47XG4gIH0pO1xuICBjb25zdCBzZXRzVG9JZ25vcmUgPSB0eG5zVG9SZXJ1bi5tYXAoZnVuY3Rpb24ocSkge1xuICAgIHJldHVybiBxLmN1cnJlbnRXcml0ZUlkO1xuICB9KTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gcXVldWVbaV07XG4gICAgY29uc3QgcmVsYXRpdmVQYXRoID0gUGF0aC5yZWxhdGl2ZVBhdGgocGF0aCwgdHJhbnNhY3Rpb24ucGF0aCk7XG4gICAgbGV0IGFib3J0VHJhbnNhY3Rpb24gPSBmYWxzZSxcbiAgICAgIGFib3J0UmVhc29uO1xuICAgIGFzc2VydChcbiAgICAgIHJlbGF0aXZlUGF0aCAhPT0gbnVsbCxcbiAgICAgICdyZXJ1blRyYW5zYWN0aW9uc1VuZGVyTm9kZV86IHJlbGF0aXZlUGF0aCBzaG91bGQgbm90IGJlIG51bGwuJ1xuICAgICk7XG5cbiAgICBpZiAodHJhbnNhY3Rpb24uc3RhdHVzID09PSBUcmFuc2FjdGlvblN0YXR1cy5ORUVEU19BQk9SVCkge1xuICAgICAgYWJvcnRUcmFuc2FjdGlvbiA9IHRydWU7XG4gICAgICBhYm9ydFJlYXNvbiA9IHRyYW5zYWN0aW9uLmFib3J0UmVhc29uO1xuICAgICAgZXZlbnRzID0gZXZlbnRzLmNvbmNhdChcbiAgICAgICAgdGhpcy5zZXJ2ZXJTeW5jVHJlZV8uYWNrVXNlcldyaXRlKHRyYW5zYWN0aW9uLmN1cnJlbnRXcml0ZUlkLCB0cnVlKVxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHRyYW5zYWN0aW9uLnN0YXR1cyA9PT0gVHJhbnNhY3Rpb25TdGF0dXMuUlVOKSB7XG4gICAgICBpZiAodHJhbnNhY3Rpb24ucmV0cnlDb3VudCA+PSAoUmVwbyBhcyBhbnkpLk1BWF9UUkFOU0FDVElPTl9SRVRSSUVTXykge1xuICAgICAgICBhYm9ydFRyYW5zYWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgYWJvcnRSZWFzb24gPSAnbWF4cmV0cnknO1xuICAgICAgICBldmVudHMgPSBldmVudHMuY29uY2F0KFxuICAgICAgICAgIHRoaXMuc2VydmVyU3luY1RyZWVfLmFja1VzZXJXcml0ZSh0cmFuc2FjdGlvbi5jdXJyZW50V3JpdGVJZCwgdHJ1ZSlcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFRoaXMgY29kZSByZXJ1bnMgYSB0cmFuc2FjdGlvblxuICAgICAgICBjb25zdCBjdXJyZW50Tm9kZSA9IHRoaXMuZ2V0TGF0ZXN0U3RhdGVfKFxuICAgICAgICAgIHRyYW5zYWN0aW9uLnBhdGgsXG4gICAgICAgICAgc2V0c1RvSWdub3JlXG4gICAgICAgICk7XG4gICAgICAgIHRyYW5zYWN0aW9uLmN1cnJlbnRJbnB1dFNuYXBzaG90ID0gY3VycmVudE5vZGU7XG4gICAgICAgIGNvbnN0IG5ld0RhdGEgPSBxdWV1ZVtpXS51cGRhdGUoY3VycmVudE5vZGUudmFsKCkpO1xuICAgICAgICBpZiAobmV3RGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdmFsaWRhdGVGaXJlYmFzZURhdGEoXG4gICAgICAgICAgICAndHJhbnNhY3Rpb24gZmFpbGVkOiBEYXRhIHJldHVybmVkICcsXG4gICAgICAgICAgICBuZXdEYXRhLFxuICAgICAgICAgICAgdHJhbnNhY3Rpb24ucGF0aFxuICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IG5ld0RhdGFOb2RlID0gbm9kZUZyb21KU09OKG5ld0RhdGEpO1xuICAgICAgICAgIGNvbnN0IGhhc0V4cGxpY2l0UHJpb3JpdHkgPVxuICAgICAgICAgICAgdHlwZW9mIG5ld0RhdGEgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICBuZXdEYXRhICE9IG51bGwgJiZcbiAgICAgICAgICAgIGNvbnRhaW5zKG5ld0RhdGEsICcucHJpb3JpdHknKTtcbiAgICAgICAgICBpZiAoIWhhc0V4cGxpY2l0UHJpb3JpdHkpIHtcbiAgICAgICAgICAgIC8vIEtlZXAgdGhlIG9sZCBwcmlvcml0eSBpZiB0aGVyZSB3YXNuJ3QgYSBwcmlvcml0eSBleHBsaWNpdGx5IHNwZWNpZmllZC5cbiAgICAgICAgICAgIG5ld0RhdGFOb2RlID0gbmV3RGF0YU5vZGUudXBkYXRlUHJpb3JpdHkoY3VycmVudE5vZGUuZ2V0UHJpb3JpdHkoKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3Qgb2xkV3JpdGVJZCA9IHRyYW5zYWN0aW9uLmN1cnJlbnRXcml0ZUlkO1xuICAgICAgICAgIGNvbnN0IHNlcnZlclZhbHVlcyA9IHRoaXMuZ2VuZXJhdGVTZXJ2ZXJWYWx1ZXMoKTtcbiAgICAgICAgICBjb25zdCBuZXdOb2RlUmVzb2x2ZWQgPSByZXNvbHZlRGVmZXJyZWRWYWx1ZVNuYXBzaG90KFxuICAgICAgICAgICAgbmV3RGF0YU5vZGUsXG4gICAgICAgICAgICBzZXJ2ZXJWYWx1ZXNcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgdHJhbnNhY3Rpb24uY3VycmVudE91dHB1dFNuYXBzaG90UmF3ID0gbmV3RGF0YU5vZGU7XG4gICAgICAgICAgdHJhbnNhY3Rpb24uY3VycmVudE91dHB1dFNuYXBzaG90UmVzb2x2ZWQgPSBuZXdOb2RlUmVzb2x2ZWQ7XG4gICAgICAgICAgdHJhbnNhY3Rpb24uY3VycmVudFdyaXRlSWQgPSB0aGlzLmdldE5leHRXcml0ZUlkXygpO1xuICAgICAgICAgIC8vIE11dGF0ZXMgc2V0c1RvSWdub3JlIGluIHBsYWNlXG4gICAgICAgICAgc2V0c1RvSWdub3JlLnNwbGljZShzZXRzVG9JZ25vcmUuaW5kZXhPZihvbGRXcml0ZUlkKSwgMSk7XG4gICAgICAgICAgZXZlbnRzID0gZXZlbnRzLmNvbmNhdChcbiAgICAgICAgICAgIHRoaXMuc2VydmVyU3luY1RyZWVfLmFwcGx5VXNlck92ZXJ3cml0ZShcbiAgICAgICAgICAgICAgdHJhbnNhY3Rpb24ucGF0aCxcbiAgICAgICAgICAgICAgbmV3Tm9kZVJlc29sdmVkLFxuICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5jdXJyZW50V3JpdGVJZCxcbiAgICAgICAgICAgICAgdHJhbnNhY3Rpb24uYXBwbHlMb2NhbGx5XG4gICAgICAgICAgICApXG4gICAgICAgICAgKTtcbiAgICAgICAgICBldmVudHMgPSBldmVudHMuY29uY2F0KFxuICAgICAgICAgICAgdGhpcy5zZXJ2ZXJTeW5jVHJlZV8uYWNrVXNlcldyaXRlKG9sZFdyaXRlSWQsIHRydWUpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhYm9ydFRyYW5zYWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgICBhYm9ydFJlYXNvbiA9ICdub2RhdGEnO1xuICAgICAgICAgIGV2ZW50cyA9IGV2ZW50cy5jb25jYXQoXG4gICAgICAgICAgICB0aGlzLnNlcnZlclN5bmNUcmVlXy5hY2tVc2VyV3JpdGUodHJhbnNhY3Rpb24uY3VycmVudFdyaXRlSWQsIHRydWUpXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmV2ZW50UXVldWVfLnJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgocGF0aCwgZXZlbnRzKTtcbiAgICBldmVudHMgPSBbXTtcbiAgICBpZiAoYWJvcnRUcmFuc2FjdGlvbikge1xuICAgICAgLy8gQWJvcnQuXG4gICAgICBxdWV1ZVtpXS5zdGF0dXMgPSBUcmFuc2FjdGlvblN0YXR1cy5DT01QTEVURUQ7XG5cbiAgICAgIC8vIFJlbW92aW5nIGEgbGlzdGVuZXIgY2FuIHRyaWdnZXIgcHJ1bmluZyB3aGljaCBjYW4gbXVjayB3aXRoIG1lcmdlZERhdGEvdmlzaWJsZURhdGEgKGFzIGl0IHBydW5lcyBkYXRhKS5cbiAgICAgIC8vIFNvIGRlZmVyIHRoZSB1bndhdGNoZXIgdW50aWwgd2UncmUgZG9uZS5cbiAgICAgIChmdW5jdGlvbih1bndhdGNoZXIpIHtcbiAgICAgICAgc2V0VGltZW91dCh1bndhdGNoZXIsIE1hdGguZmxvb3IoMCkpO1xuICAgICAgfSkocXVldWVbaV0udW53YXRjaGVyKTtcblxuICAgICAgaWYgKHF1ZXVlW2ldLm9uQ29tcGxldGUpIHtcbiAgICAgICAgaWYgKGFib3J0UmVhc29uID09PSAnbm9kYXRhJykge1xuICAgICAgICAgIGNvbnN0IHJlZiA9IG5ldyBSZWZlcmVuY2UodGhpcywgcXVldWVbaV0ucGF0aCk7XG4gICAgICAgICAgLy8gV2Ugc2V0IHRoaXMgZmllbGQgaW1tZWRpYXRlbHksIHNvIGl0J3Mgc2FmZSB0byBjYXN0IHRvIGFuIGFjdHVhbCBzbmFwc2hvdFxuICAgICAgICAgIGNvbnN0IGxhc3RJbnB1dCAvKiogQHR5cGUgeyFOb2RlfSAqLyA9IHF1ZXVlW2ldLmN1cnJlbnRJbnB1dFNuYXBzaG90O1xuICAgICAgICAgIGNvbnN0IHNuYXBzaG90ID0gbmV3IERhdGFTbmFwc2hvdChsYXN0SW5wdXQsIHJlZiwgUFJJT1JJVFlfSU5ERVgpO1xuICAgICAgICAgIGNhbGxiYWNrcy5wdXNoKHF1ZXVlW2ldLm9uQ29tcGxldGUuYmluZChudWxsLCBudWxsLCBmYWxzZSwgc25hcHNob3QpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWxsYmFja3MucHVzaChcbiAgICAgICAgICAgIHF1ZXVlW2ldLm9uQ29tcGxldGUuYmluZChudWxsLCBuZXcgRXJyb3IoYWJvcnRSZWFzb24pLCBmYWxzZSwgbnVsbClcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQ2xlYW4gdXAgY29tcGxldGVkIHRyYW5zYWN0aW9ucy5cbiAgdGhpcy5wcnVuZUNvbXBsZXRlZFRyYW5zYWN0aW9uc0JlbG93Tm9kZV8odGhpcy50cmFuc2FjdGlvblF1ZXVlVHJlZV8pO1xuXG4gIC8vIE5vdyBmaXJlIGNhbGxiYWNrcywgbm93IHRoYXQgd2UncmUgaW4gYSBnb29kLCBrbm93biBzdGF0ZS5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICBleGNlcHRpb25HdWFyZChjYWxsYmFja3NbaV0pO1xuICB9XG5cbiAgLy8gVHJ5IHRvIHNlbmQgdGhlIHRyYW5zYWN0aW9uIHJlc3VsdCB0byB0aGUgc2VydmVyLlxuICB0aGlzLnNlbmRSZWFkeVRyYW5zYWN0aW9uc18oKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcm9vdG1vc3QgYW5jZXN0b3Igbm9kZSBvZiB0aGUgc3BlY2lmaWVkIHBhdGggdGhhdCBoYXMgYSBwZW5kaW5nIHRyYW5zYWN0aW9uIG9uIGl0LCBvciBqdXN0IHJldHVybnNcbiAqIHRoZSBub2RlIGZvciB0aGUgZ2l2ZW4gcGF0aCBpZiB0aGVyZSBhcmUgbm8gcGVuZGluZyB0cmFuc2FjdGlvbnMgb24gYW55IGFuY2VzdG9yLlxuICpcbiAqIEBwYXJhbSB7IVBhdGh9IHBhdGggVGhlIGxvY2F0aW9uIHRvIHN0YXJ0IGF0LlxuICogQHJldHVybiB7IVRyZWUuPEFycmF5LjwhVHJhbnNhY3Rpb24+Pn0gVGhlIHJvb3Rtb3N0IG5vZGUgd2l0aCBhIHRyYW5zYWN0aW9uLlxuICogQHByaXZhdGVcbiAqL1xuKFJlcG8ucHJvdG90eXBlIGFzIGFueSkuZ2V0QW5jZXN0b3JUcmFuc2FjdGlvbk5vZGVfID0gZnVuY3Rpb24oXG4gIHBhdGg6IFBhdGhcbik6IFRyZWU8VHJhbnNhY3Rpb25bXT4ge1xuICBsZXQgZnJvbnQ7XG5cbiAgLy8gU3RhcnQgYXQgdGhlIHJvb3QgYW5kIHdhbGsgZGVlcGVyIGludG8gdGhlIHRyZWUgdG93YXJkcyBwYXRoIHVudGlsIHdlIGZpbmQgYSBub2RlIHdpdGggcGVuZGluZyB0cmFuc2FjdGlvbnMuXG4gIGxldCB0cmFuc2FjdGlvbk5vZGUgPSB0aGlzLnRyYW5zYWN0aW9uUXVldWVUcmVlXztcbiAgd2hpbGUgKFxuICAgIChmcm9udCA9IHBhdGguZ2V0RnJvbnQoKSkgIT09IG51bGwgJiZcbiAgICB0cmFuc2FjdGlvbk5vZGUuZ2V0VmFsdWUoKSA9PT0gbnVsbFxuICApIHtcbiAgICB0cmFuc2FjdGlvbk5vZGUgPSB0cmFuc2FjdGlvbk5vZGUuc3ViVHJlZShmcm9udCk7XG4gICAgcGF0aCA9IHBhdGgucG9wRnJvbnQoKTtcbiAgfVxuXG4gIHJldHVybiB0cmFuc2FjdGlvbk5vZGU7XG59O1xuXG4vKipcbiAqIEJ1aWxkcyB0aGUgcXVldWUgb2YgYWxsIHRyYW5zYWN0aW9ucyBhdCBvciBiZWxvdyB0aGUgc3BlY2lmaWVkIHRyYW5zYWN0aW9uTm9kZS5cbiAqXG4gKiBAcGFyYW0geyFUcmVlLjxBcnJheS48VHJhbnNhY3Rpb24+Pn0gdHJhbnNhY3Rpb25Ob2RlXG4gKiBAcmV0dXJuIHtBcnJheS48VHJhbnNhY3Rpb24+fSBUaGUgZ2VuZXJhdGVkIHF1ZXVlLlxuICogQHByaXZhdGVcbiAqL1xuKFJlcG8ucHJvdG90eXBlIGFzIGFueSkuYnVpbGRUcmFuc2FjdGlvblF1ZXVlXyA9IGZ1bmN0aW9uKFxuICB0cmFuc2FjdGlvbk5vZGU6IFRyZWU8VHJhbnNhY3Rpb25bXT5cbik6IEFycmF5PFRyYW5zYWN0aW9uPiB7XG4gIC8vIFdhbGsgYW55IGNoaWxkIHRyYW5zYWN0aW9uIHF1ZXVlcyBhbmQgYWdncmVnYXRlIHRoZW0gaW50byBhIHNpbmdsZSBxdWV1ZS5cbiAgY29uc3QgdHJhbnNhY3Rpb25RdWV1ZTogVHJhbnNhY3Rpb25bXSA9IFtdO1xuICB0aGlzLmFnZ3JlZ2F0ZVRyYW5zYWN0aW9uUXVldWVzRm9yTm9kZV8odHJhbnNhY3Rpb25Ob2RlLCB0cmFuc2FjdGlvblF1ZXVlKTtcblxuICAvLyBTb3J0IHRoZW0gYnkgdGhlIG9yZGVyIHRoZSB0cmFuc2FjdGlvbnMgd2VyZSBjcmVhdGVkLlxuICB0cmFuc2FjdGlvblF1ZXVlLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBhLm9yZGVyIC0gYi5vcmRlcjtcbiAgfSk7XG5cbiAgcmV0dXJuIHRyYW5zYWN0aW9uUXVldWU7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7IVRyZWUuPEFycmF5LjxUcmFuc2FjdGlvbj4+fSBub2RlXG4gKiBAcGFyYW0ge0FycmF5LjxUcmFuc2FjdGlvbj59IHF1ZXVlXG4gKiBAcHJpdmF0ZVxuICovXG4oUmVwby5wcm90b3R5cGUgYXMgYW55KS5hZ2dyZWdhdGVUcmFuc2FjdGlvblF1ZXVlc0Zvck5vZGVfID0gZnVuY3Rpb24oXG4gIG5vZGU6IFRyZWU8VHJhbnNhY3Rpb25bXT4sXG4gIHF1ZXVlOiBBcnJheTxUcmFuc2FjdGlvbj5cbikge1xuICBjb25zdCBub2RlUXVldWUgPSBub2RlLmdldFZhbHVlKCk7XG4gIGlmIChub2RlUXVldWUgIT09IG51bGwpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVRdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgcXVldWUucHVzaChub2RlUXVldWVbaV0pO1xuICAgIH1cbiAgfVxuXG4gIG5vZGUuZm9yRWFjaENoaWxkKGNoaWxkID0+IHtcbiAgICB0aGlzLmFnZ3JlZ2F0ZVRyYW5zYWN0aW9uUXVldWVzRm9yTm9kZV8oY2hpbGQsIHF1ZXVlKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBDT01QTEVURUQgdHJhbnNhY3Rpb25zIGF0IG9yIGJlbG93IHRoaXMgbm9kZSBpbiB0aGUgdHJhbnNhY3Rpb25RdWV1ZVRyZWVfLlxuICpcbiAqIEBwYXJhbSB7IVRyZWUuPEFycmF5LjwhVHJhbnNhY3Rpb24+Pn0gbm9kZVxuICogQHByaXZhdGVcbiAqL1xuKFJlcG8ucHJvdG90eXBlIGFzIGFueSkucHJ1bmVDb21wbGV0ZWRUcmFuc2FjdGlvbnNCZWxvd05vZGVfID0gZnVuY3Rpb24oXG4gIG5vZGU6IFRyZWU8VHJhbnNhY3Rpb25bXT5cbikge1xuICBjb25zdCBxdWV1ZSA9IG5vZGUuZ2V0VmFsdWUoKTtcbiAgaWYgKHF1ZXVlKSB7XG4gICAgbGV0IHRvID0gMDtcbiAgICBmb3IgKGxldCBmcm9tID0gMDsgZnJvbSA8IHF1ZXVlLmxlbmd0aDsgZnJvbSsrKSB7XG4gICAgICBpZiAocXVldWVbZnJvbV0uc3RhdHVzICE9PSBUcmFuc2FjdGlvblN0YXR1cy5DT01QTEVURUQpIHtcbiAgICAgICAgcXVldWVbdG9dID0gcXVldWVbZnJvbV07XG4gICAgICAgIHRvKys7XG4gICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLmxlbmd0aCA9IHRvO1xuICAgIG5vZGUuc2V0VmFsdWUocXVldWUubGVuZ3RoID4gMCA/IHF1ZXVlIDogbnVsbCk7XG4gIH1cblxuICBub2RlLmZvckVhY2hDaGlsZChjaGlsZE5vZGUgPT4ge1xuICAgIHRoaXMucHJ1bmVDb21wbGV0ZWRUcmFuc2FjdGlvbnNCZWxvd05vZGVfKGNoaWxkTm9kZSk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBBYm9ydHMgYWxsIHRyYW5zYWN0aW9ucyBvbiBhbmNlc3RvcnMgb3IgZGVzY2VuZGFudHMgb2YgdGhlIHNwZWNpZmllZCBwYXRoLiAgQ2FsbGVkIHdoZW4gZG9pbmcgYSBzZXQoKSBvciB1cGRhdGUoKVxuICogc2luY2Ugd2UgY29uc2lkZXIgdGhlbSBpbmNvbXBhdGlibGUgd2l0aCB0cmFuc2FjdGlvbnMuXG4gKlxuICogQHBhcmFtIHshUGF0aH0gcGF0aCBQYXRoIGZvciB3aGljaCB3ZSB3YW50IHRvIGFib3J0IHJlbGF0ZWQgdHJhbnNhY3Rpb25zLlxuICogQHJldHVybiB7IVBhdGh9XG4gKiBAcHJpdmF0ZVxuICovXG4oUmVwby5wcm90b3R5cGUgYXMgYW55KS5hYm9ydFRyYW5zYWN0aW9uc18gPSBmdW5jdGlvbihwYXRoOiBQYXRoKTogUGF0aCB7XG4gIGNvbnN0IGFmZmVjdGVkUGF0aCA9IHRoaXMuZ2V0QW5jZXN0b3JUcmFuc2FjdGlvbk5vZGVfKHBhdGgpLnBhdGgoKTtcblxuICBjb25zdCB0cmFuc2FjdGlvbk5vZGUgPSB0aGlzLnRyYW5zYWN0aW9uUXVldWVUcmVlXy5zdWJUcmVlKHBhdGgpO1xuXG4gIHRyYW5zYWN0aW9uTm9kZS5mb3JFYWNoQW5jZXN0b3IoKG5vZGU6IFRyZWU8VHJhbnNhY3Rpb25bXT4pID0+IHtcbiAgICB0aGlzLmFib3J0VHJhbnNhY3Rpb25zT25Ob2RlXyhub2RlKTtcbiAgfSk7XG5cbiAgdGhpcy5hYm9ydFRyYW5zYWN0aW9uc09uTm9kZV8odHJhbnNhY3Rpb25Ob2RlKTtcblxuICB0cmFuc2FjdGlvbk5vZGUuZm9yRWFjaERlc2NlbmRhbnQoKG5vZGU6IFRyZWU8VHJhbnNhY3Rpb25bXT4pID0+IHtcbiAgICB0aGlzLmFib3J0VHJhbnNhY3Rpb25zT25Ob2RlXyhub2RlKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGFmZmVjdGVkUGF0aDtcbn07XG5cbi8qKlxuICogQWJvcnQgdHJhbnNhY3Rpb25zIHN0b3JlZCBpbiB0aGlzIHRyYW5zYWN0aW9uIHF1ZXVlIG5vZGUuXG4gKlxuICogQHBhcmFtIHshVHJlZS48QXJyYXkuPFRyYW5zYWN0aW9uPj59IG5vZGUgTm9kZSB0byBhYm9ydCB0cmFuc2FjdGlvbnMgZm9yLlxuICogQHByaXZhdGVcbiAqL1xuKFJlcG8ucHJvdG90eXBlIGFzIGFueSkuYWJvcnRUcmFuc2FjdGlvbnNPbk5vZGVfID0gZnVuY3Rpb24oXG4gIG5vZGU6IFRyZWU8VHJhbnNhY3Rpb25bXT5cbikge1xuICBjb25zdCBxdWV1ZSA9IG5vZGUuZ2V0VmFsdWUoKTtcbiAgaWYgKHF1ZXVlICE9PSBudWxsKSB7XG4gICAgLy8gUXVldWUgdXAgdGhlIGNhbGxiYWNrcyBhbmQgZmlyZSB0aGVtIGFmdGVyIGNsZWFuaW5nIHVwIGFsbCBvZiBvdXIgdHJhbnNhY3Rpb24gc3RhdGUsIHNpbmNlXG4gICAgLy8gdGhlIGNhbGxiYWNrIGNvdWxkIHRyaWdnZXIgbW9yZSB0cmFuc2FjdGlvbnMgb3Igc2V0cy5cbiAgICBjb25zdCBjYWxsYmFja3MgPSBbXTtcblxuICAgIC8vIEdvIHRocm91Z2ggcXVldWUuICBBbnkgYWxyZWFkeS1zZW50IHRyYW5zYWN0aW9ucyBtdXN0IGJlIG1hcmtlZCBmb3IgYWJvcnQsIHdoaWxlIHRoZSB1bnNlbnQgb25lc1xuICAgIC8vIGNhbiBiZSBpbW1lZGlhdGVseSBhYm9ydGVkIGFuZCByZW1vdmVkLlxuICAgIGxldCBldmVudHM6IEV2ZW50W10gPSBbXTtcbiAgICBsZXQgbGFzdFNlbnQgPSAtMTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocXVldWVbaV0uc3RhdHVzID09PSBUcmFuc2FjdGlvblN0YXR1cy5TRU5UX05FRURTX0FCT1JUKSB7XG4gICAgICAgIC8vIEFscmVhZHkgbWFya2VkLiAgTm8gYWN0aW9uIG5lZWRlZC5cbiAgICAgIH0gZWxzZSBpZiAocXVldWVbaV0uc3RhdHVzID09PSBUcmFuc2FjdGlvblN0YXR1cy5TRU5UKSB7XG4gICAgICAgIGFzc2VydChcbiAgICAgICAgICBsYXN0U2VudCA9PT0gaSAtIDEsXG4gICAgICAgICAgJ0FsbCBTRU5UIGl0ZW1zIHNob3VsZCBiZSBhdCBiZWdpbm5pbmcgb2YgcXVldWUuJ1xuICAgICAgICApO1xuICAgICAgICBsYXN0U2VudCA9IGk7XG4gICAgICAgIC8vIE1hcmsgdHJhbnNhY3Rpb24gZm9yIGFib3J0IHdoZW4gaXQgY29tZXMgYmFjay5cbiAgICAgICAgcXVldWVbaV0uc3RhdHVzID0gVHJhbnNhY3Rpb25TdGF0dXMuU0VOVF9ORUVEU19BQk9SVDtcbiAgICAgICAgcXVldWVbaV0uYWJvcnRSZWFzb24gPSAnc2V0JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFzc2VydChcbiAgICAgICAgICBxdWV1ZVtpXS5zdGF0dXMgPT09IFRyYW5zYWN0aW9uU3RhdHVzLlJVTixcbiAgICAgICAgICAnVW5leHBlY3RlZCB0cmFuc2FjdGlvbiBzdGF0dXMgaW4gYWJvcnQnXG4gICAgICAgICk7XG4gICAgICAgIC8vIFdlIGNhbiBhYm9ydCBpdCBpbW1lZGlhdGVseS5cbiAgICAgICAgcXVldWVbaV0udW53YXRjaGVyKCk7XG4gICAgICAgIGV2ZW50cyA9IGV2ZW50cy5jb25jYXQoXG4gICAgICAgICAgdGhpcy5zZXJ2ZXJTeW5jVHJlZV8uYWNrVXNlcldyaXRlKHF1ZXVlW2ldLmN1cnJlbnRXcml0ZUlkLCB0cnVlKVxuICAgICAgICApO1xuICAgICAgICBpZiAocXVldWVbaV0ub25Db21wbGV0ZSkge1xuICAgICAgICAgIGNvbnN0IHNuYXBzaG90OiBEYXRhU25hcHNob3QgfCBudWxsID0gbnVsbDtcbiAgICAgICAgICBjYWxsYmFja3MucHVzaChcbiAgICAgICAgICAgIHF1ZXVlW2ldLm9uQ29tcGxldGUuYmluZChudWxsLCBuZXcgRXJyb3IoJ3NldCcpLCBmYWxzZSwgc25hcHNob3QpXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobGFzdFNlbnQgPT09IC0xKSB7XG4gICAgICAvLyBXZSdyZSBub3Qgd2FpdGluZyBmb3IgYW55IHNlbnQgdHJhbnNhY3Rpb25zLiAgV2UgY2FuIGNsZWFyIHRoZSBxdWV1ZS5cbiAgICAgIG5vZGUuc2V0VmFsdWUobnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJlbW92ZSB0aGUgdHJhbnNhY3Rpb25zIHdlIGFib3J0ZWQuXG4gICAgICBxdWV1ZS5sZW5ndGggPSBsYXN0U2VudCArIDE7XG4gICAgfVxuXG4gICAgLy8gTm93IGZpcmUgdGhlIGNhbGxiYWNrcy5cbiAgICB0aGlzLmV2ZW50UXVldWVfLnJhaXNlRXZlbnRzRm9yQ2hhbmdlZFBhdGgobm9kZS5wYXRoKCksIGV2ZW50cyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGV4Y2VwdGlvbkd1YXJkKGNhbGxiYWNrc1tpXSk7XG4gICAgfVxuICB9XG59O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgUXVlcnkgfSBmcm9tICcuLi9hcGkvUXVlcnknO1xuXG4vKipcbiAqIEludGVyZmFjZSBkZWZpbmluZyB0aGUgc2V0IG9mIGFjdGlvbnMgdGhhdCBjYW4gYmUgcGVyZm9ybWVkIGFnYWluc3QgdGhlIEZpcmViYXNlIHNlcnZlclxuICogKGJhc2ljYWxseSBjb3JyZXNwb25kcyB0byBvdXIgd2lyZSBwcm90b2NvbCkuXG4gKlxuICogQGludGVyZmFjZVxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgU2VydmVyQWN0aW9ucyB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFRdWVyeX0gcXVlcnlcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpOnN0cmluZ30gY3VycmVudEhhc2hGblxuICAgKiBAcGFyYW0gez9udW1iZXJ9IHRhZ1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZywgKil9IG9uQ29tcGxldGVcbiAgICovXG4gIGFic3RyYWN0IGxpc3RlbihcbiAgICBxdWVyeTogUXVlcnksXG4gICAgY3VycmVudEhhc2hGbjogKCkgPT4gc3RyaW5nLFxuICAgIHRhZzogbnVtYmVyIHwgbnVsbCxcbiAgICBvbkNvbXBsZXRlOiAoYTogc3RyaW5nLCBiOiBhbnkpID0+IHZvaWRcbiAgKTogdm9pZDtcblxuICAvKipcbiAgICogUmVtb3ZlIGEgbGlzdGVuLlxuICAgKlxuICAgKiBAcGFyYW0geyFRdWVyeX0gcXVlcnlcbiAgICogQHBhcmFtIHs/bnVtYmVyfSB0YWdcbiAgICovXG4gIGFic3RyYWN0IHVubGlzdGVuKHF1ZXJ5OiBRdWVyeSwgdGFnOiBudW1iZXIgfCBudWxsKTogdm9pZDtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGhTdHJpbmdcbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nLCBzdHJpbmcpPX0gb25Db21wbGV0ZVxuICAgKiBAcGFyYW0ge3N0cmluZz19IGhhc2hcbiAgICovXG4gIHB1dChcbiAgICBwYXRoU3RyaW5nOiBzdHJpbmcsXG4gICAgZGF0YTogYW55LFxuICAgIG9uQ29tcGxldGU/OiAoYTogc3RyaW5nLCBiOiBzdHJpbmcpID0+IHZvaWQsXG4gICAgaGFzaD86IHN0cmluZ1xuICApIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoU3RyaW5nXG4gICAqIEBwYXJhbSB7Kn0gZGF0YVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZywgP3N0cmluZyl9IG9uQ29tcGxldGVcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBoYXNoXG4gICAqL1xuICBtZXJnZShcbiAgICBwYXRoU3RyaW5nOiBzdHJpbmcsXG4gICAgZGF0YTogYW55LFxuICAgIG9uQ29tcGxldGU6IChhOiBzdHJpbmcsIGI6IHN0cmluZyB8IG51bGwpID0+IHZvaWQsXG4gICAgaGFzaD86IHN0cmluZ1xuICApIHt9XG5cbiAgLyoqXG4gICAqIFJlZnJlc2hlcyB0aGUgYXV0aCB0b2tlbiBmb3IgdGhlIGN1cnJlbnQgY29ubmVjdGlvbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIFRoZSBhdXRoZW50aWNhdGlvbiB0b2tlblxuICAgKi9cbiAgcmVmcmVzaEF1dGhUb2tlbih0b2tlbjogc3RyaW5nKSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aFN0cmluZ1xuICAgKiBAcGFyYW0geyp9IGRhdGFcbiAgICogQHBhcmFtIHtmdW5jdGlvbihzdHJpbmcsIHN0cmluZyk9fSBvbkNvbXBsZXRlXG4gICAqL1xuICBvbkRpc2Nvbm5lY3RQdXQoXG4gICAgcGF0aFN0cmluZzogc3RyaW5nLFxuICAgIGRhdGE6IGFueSxcbiAgICBvbkNvbXBsZXRlPzogKGE6IHN0cmluZywgYjogc3RyaW5nKSA9PiB2b2lkXG4gICkge31cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGhTdHJpbmdcbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nLCBzdHJpbmcpPX0gb25Db21wbGV0ZVxuICAgKi9cbiAgb25EaXNjb25uZWN0TWVyZ2UoXG4gICAgcGF0aFN0cmluZzogc3RyaW5nLFxuICAgIGRhdGE6IGFueSxcbiAgICBvbkNvbXBsZXRlPzogKGE6IHN0cmluZywgYjogc3RyaW5nKSA9PiB2b2lkXG4gICkge31cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGhTdHJpbmdcbiAgICogQHBhcmFtIHtmdW5jdGlvbihzdHJpbmcsIHN0cmluZyk9fSBvbkNvbXBsZXRlXG4gICAqL1xuICBvbkRpc2Nvbm5lY3RDYW5jZWwoXG4gICAgcGF0aFN0cmluZzogc3RyaW5nLFxuICAgIG9uQ29tcGxldGU/OiAoYTogc3RyaW5nLCBiOiBzdHJpbmcpID0+IHZvaWRcbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCAqPn0gc3RhdHNcbiAgICovXG4gIHJlcG9ydFN0YXRzKHN0YXRzOiB7IFtrOiBzdHJpbmddOiBhbnkgfSkge31cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENoaWxkcmVuTm9kZSB9IGZyb20gJy4vc25hcC9DaGlsZHJlbk5vZGUnO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4vdXRpbC9QYXRoJztcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuL3NuYXAvTm9kZSc7XG5cbi8qKlxuICogTXV0YWJsZSBvYmplY3Qgd2hpY2ggYmFzaWNhbGx5IGp1c3Qgc3RvcmVzIGEgcmVmZXJlbmNlIHRvIHRoZSBcImxhdGVzdFwiIGltbXV0YWJsZSBzbmFwc2hvdC5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGNsYXNzIFNuYXBzaG90SG9sZGVyIHtcbiAgcHJpdmF0ZSByb290Tm9kZV86IE5vZGUgPSBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERTtcblxuICBnZXROb2RlKHBhdGg6IFBhdGgpOiBOb2RlIHtcbiAgICByZXR1cm4gdGhpcy5yb290Tm9kZV8uZ2V0Q2hpbGQocGF0aCk7XG4gIH1cblxuICB1cGRhdGVTbmFwc2hvdChwYXRoOiBQYXRoLCBuZXdTbmFwc2hvdE5vZGU6IE5vZGUpIHtcbiAgICB0aGlzLnJvb3ROb2RlXyA9IHRoaXMucm9vdE5vZGVfLnVwZGF0ZUNoaWxkKHBhdGgsIG5ld1NuYXBzaG90Tm9kZSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFBhdGggfSBmcm9tICcuL3V0aWwvUGF0aCc7XG5pbXBvcnQgeyBQUklPUklUWV9JTkRFWCB9IGZyb20gJy4vc25hcC9pbmRleGVzL1ByaW9yaXR5SW5kZXgnO1xuaW1wb3J0IHsgQ291bnRlZFNldCB9IGZyb20gJy4vdXRpbC9Db3VudGVkU2V0JztcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuL3NuYXAvTm9kZSc7XG5cbi8qKlxuICogSGVscGVyIGNsYXNzIHRvIHN0b3JlIGEgc3BhcnNlIHNldCBvZiBzbmFwc2hvdHMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBjbGFzcyBTcGFyc2VTbmFwc2hvdFRyZWUge1xuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge05vZGV9XG4gICAqL1xuICBwcml2YXRlIHZhbHVlXzogTm9kZSB8IG51bGwgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7Q291bnRlZFNldH1cbiAgICovXG4gIHByaXZhdGUgY2hpbGRyZW5fOiBDb3VudGVkU2V0PHN0cmluZywgU3BhcnNlU25hcHNob3RUcmVlPiB8IG51bGwgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBub2RlIHN0b3JlZCBhdCB0aGUgZ2l2ZW4gcGF0aCBpZiBvbmUgZXhpc3RzLlxuICAgKlxuICAgKiBAcGFyYW0geyFQYXRofSBwYXRoIFBhdGggdG8gbG9vayB1cCBzbmFwc2hvdCBmb3IuXG4gICAqIEByZXR1cm4gez9Ob2RlfSBUaGUgcmV0cmlldmVkIG5vZGUsIG9yIG51bGwuXG4gICAqL1xuICBmaW5kKHBhdGg6IFBhdGgpOiBOb2RlIHwgbnVsbCB7XG4gICAgaWYgKHRoaXMudmFsdWVfICE9IG51bGwpIHtcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlXy5nZXRDaGlsZChwYXRoKTtcbiAgICB9IGVsc2UgaWYgKCFwYXRoLmlzRW1wdHkoKSAmJiB0aGlzLmNoaWxkcmVuXyAhPSBudWxsKSB7XG4gICAgICBjb25zdCBjaGlsZEtleSA9IHBhdGguZ2V0RnJvbnQoKTtcbiAgICAgIHBhdGggPSBwYXRoLnBvcEZyb250KCk7XG4gICAgICBpZiAodGhpcy5jaGlsZHJlbl8uY29udGFpbnMoY2hpbGRLZXkpKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkVHJlZSA9IHRoaXMuY2hpbGRyZW5fLmdldChjaGlsZEtleSkgYXMgU3BhcnNlU25hcHNob3RUcmVlO1xuICAgICAgICByZXR1cm4gY2hpbGRUcmVlLmZpbmQocGF0aCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0b3JlcyB0aGUgZ2l2ZW4gbm9kZSBhdCB0aGUgc3BlY2lmaWVkIHBhdGguIElmIHRoZXJlIGlzIGFscmVhZHkgYSBub2RlXG4gICAqIGF0IGEgc2hhbGxvd2VyIHBhdGgsIGl0IG1lcmdlcyB0aGUgbmV3IGRhdGEgaW50byB0aGF0IHNuYXBzaG90IG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7IVBhdGh9IHBhdGggUGF0aCB0byBsb29rIHVwIHNuYXBzaG90IGZvci5cbiAgICogQHBhcmFtIHshTm9kZX0gZGF0YSBUaGUgbmV3IGRhdGEsIG9yIG51bGwuXG4gICAqL1xuICByZW1lbWJlcihwYXRoOiBQYXRoLCBkYXRhOiBOb2RlKSB7XG4gICAgaWYgKHBhdGguaXNFbXB0eSgpKSB7XG4gICAgICB0aGlzLnZhbHVlXyA9IGRhdGE7XG4gICAgICB0aGlzLmNoaWxkcmVuXyA9IG51bGw7XG4gICAgfSBlbHNlIGlmICh0aGlzLnZhbHVlXyAhPT0gbnVsbCkge1xuICAgICAgdGhpcy52YWx1ZV8gPSB0aGlzLnZhbHVlXy51cGRhdGVDaGlsZChwYXRoLCBkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuY2hpbGRyZW5fID09IG51bGwpIHtcbiAgICAgICAgdGhpcy5jaGlsZHJlbl8gPSBuZXcgQ291bnRlZFNldDxzdHJpbmcsIFNwYXJzZVNuYXBzaG90VHJlZT4oKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY2hpbGRLZXkgPSBwYXRoLmdldEZyb250KCk7XG4gICAgICBpZiAoIXRoaXMuY2hpbGRyZW5fLmNvbnRhaW5zKGNoaWxkS2V5KSkge1xuICAgICAgICB0aGlzLmNoaWxkcmVuXy5hZGQoY2hpbGRLZXksIG5ldyBTcGFyc2VTbmFwc2hvdFRyZWUoKSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNoaWxkID0gdGhpcy5jaGlsZHJlbl8uZ2V0KGNoaWxkS2V5KSBhcyBTcGFyc2VTbmFwc2hvdFRyZWU7XG4gICAgICBwYXRoID0gcGF0aC5wb3BGcm9udCgpO1xuICAgICAgY2hpbGQucmVtZW1iZXIocGF0aCwgZGF0YSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFB1cmdlIHRoZSBkYXRhIGF0IHBhdGggZnJvbSB0aGUgY2FjaGUuXG4gICAqXG4gICAqIEBwYXJhbSB7IVBhdGh9IHBhdGggUGF0aCB0byBsb29rIHVwIHNuYXBzaG90IGZvci5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGlzIG5vZGUgc2hvdWxkIG5vdyBiZSByZW1vdmVkLlxuICAgKi9cbiAgZm9yZ2V0KHBhdGg6IFBhdGgpOiBib29sZWFuIHtcbiAgICBpZiAocGF0aC5pc0VtcHR5KCkpIHtcbiAgICAgIHRoaXMudmFsdWVfID0gbnVsbDtcbiAgICAgIHRoaXMuY2hpbGRyZW5fID0gbnVsbDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy52YWx1ZV8gIT09IG51bGwpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWVfLmlzTGVhZk5vZGUoKSkge1xuICAgICAgICAgIC8vIFdlJ3JlIHRyeWluZyB0byBmb3JnZXQgYSBub2RlIHRoYXQgZG9lc24ndCBleGlzdFxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmFsdWVfO1xuICAgICAgICAgIHRoaXMudmFsdWVfID0gbnVsbDtcblxuICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICAgIHZhbHVlLmZvckVhY2hDaGlsZChQUklPUklUWV9JTkRFWCwgZnVuY3Rpb24oa2V5LCB0cmVlKSB7XG4gICAgICAgICAgICBzZWxmLnJlbWVtYmVyKG5ldyBQYXRoKGtleSksIHRyZWUpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZm9yZ2V0KHBhdGgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuY2hpbGRyZW5fICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkS2V5ID0gcGF0aC5nZXRGcm9udCgpO1xuICAgICAgICBwYXRoID0gcGF0aC5wb3BGcm9udCgpO1xuICAgICAgICBpZiAodGhpcy5jaGlsZHJlbl8uY29udGFpbnMoY2hpbGRLZXkpKSB7XG4gICAgICAgICAgY29uc3Qgc2FmZVRvUmVtb3ZlID0gKHRoaXMuY2hpbGRyZW5fLmdldChcbiAgICAgICAgICAgIGNoaWxkS2V5XG4gICAgICAgICAgKSBhcyBTcGFyc2VTbmFwc2hvdFRyZWUpLmZvcmdldChwYXRoKTtcbiAgICAgICAgICBpZiAoc2FmZVRvUmVtb3ZlKSB7XG4gICAgICAgICAgICB0aGlzLmNoaWxkcmVuXy5yZW1vdmUoY2hpbGRLZXkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNoaWxkcmVuXy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICB0aGlzLmNoaWxkcmVuXyA9IG51bGw7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVjdXJzaXZlbHkgaXRlcmF0ZXMgdGhyb3VnaCBhbGwgb2YgdGhlIHN0b3JlZCB0cmVlIGFuZCBjYWxscyB0aGVcbiAgICogY2FsbGJhY2sgb24gZWFjaCBvbmUuXG4gICAqXG4gICAqIEBwYXJhbSB7IVBhdGh9IHByZWZpeFBhdGggUGF0aCB0byBsb29rIHVwIG5vZGUgZm9yLlxuICAgKiBAcGFyYW0geyFGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIHRyZWUuXG4gICAqL1xuICBmb3JFYWNoVHJlZShwcmVmaXhQYXRoOiBQYXRoLCBmdW5jOiAoYTogUGF0aCwgYjogTm9kZSkgPT4gYW55KSB7XG4gICAgaWYgKHRoaXMudmFsdWVfICE9PSBudWxsKSB7XG4gICAgICBmdW5jKHByZWZpeFBhdGgsIHRoaXMudmFsdWVfKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5mb3JFYWNoQ2hpbGQoKGtleSwgdHJlZSkgPT4ge1xuICAgICAgICBjb25zdCBwYXRoID0gbmV3IFBhdGgocHJlZml4UGF0aC50b1N0cmluZygpICsgJy8nICsga2V5KTtcbiAgICAgICAgdHJlZS5mb3JFYWNoVHJlZShwYXRoLCBmdW5jKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJdGVyYXRlcyB0aHJvdWdoIGVhY2ggaW1tZWRpYXRlIGNoaWxkIGFuZCB0cmlnZ2VycyB0aGUgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7IUZ1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggY2hpbGQuXG4gICAqL1xuICBmb3JFYWNoQ2hpbGQoZnVuYzogKGE6IHN0cmluZywgYjogU3BhcnNlU25hcHNob3RUcmVlKSA9PiB2b2lkKSB7XG4gICAgaWYgKHRoaXMuY2hpbGRyZW5fICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmNoaWxkcmVuXy5lYWNoKChrZXksIHRyZWUpID0+IHtcbiAgICAgICAgZnVuYyhrZXksIHRyZWUpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDYWNoZU5vZGUgfSBmcm9tICcuL3ZpZXcvQ2FjaGVOb2RlJztcbmltcG9ydCB7IENoaWxkcmVuTm9kZSB9IGZyb20gJy4vc25hcC9DaGlsZHJlbk5vZGUnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgaXNFbXB0eSwgZm9yRWFjaCwgZmluZFZhbHVlLCBzYWZlR2V0IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgVmlld0NhY2hlIH0gZnJvbSAnLi92aWV3L1ZpZXdDYWNoZSc7XG5pbXBvcnQgeyBWaWV3IH0gZnJvbSAnLi92aWV3L1ZpZXcnO1xuaW1wb3J0IHsgT3BlcmF0aW9uIH0gZnJvbSAnLi9vcGVyYXRpb24vT3BlcmF0aW9uJztcbmltcG9ydCB7IFdyaXRlVHJlZVJlZiB9IGZyb20gJy4vV3JpdGVUcmVlJztcbmltcG9ydCB7IFF1ZXJ5IH0gZnJvbSAnLi4vYXBpL1F1ZXJ5JztcbmltcG9ydCB7IEV2ZW50UmVnaXN0cmF0aW9uIH0gZnJvbSAnLi92aWV3L0V2ZW50UmVnaXN0cmF0aW9uJztcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuL3NuYXAvTm9kZSc7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi91dGlsL1BhdGgnO1xuaW1wb3J0IHsgRXZlbnQgfSBmcm9tICcuL3ZpZXcvRXZlbnQnO1xuaW1wb3J0IHsgUmVmZXJlbmNlLCBSZWZlcmVuY2VDb25zdHJ1Y3RvciB9IGZyb20gJy4uL2FwaS9SZWZlcmVuY2UnO1xuXG5sZXQgX19yZWZlcmVuY2VDb25zdHJ1Y3RvcjogUmVmZXJlbmNlQ29uc3RydWN0b3I7XG5cbi8qKlxuICogU3luY1BvaW50IHJlcHJlc2VudHMgYSBzaW5nbGUgbG9jYXRpb24gaW4gYSBTeW5jVHJlZSB3aXRoIDEgb3IgbW9yZSBldmVudCByZWdpc3RyYXRpb25zLCBtZWFuaW5nIHdlIG5lZWQgdG9cbiAqIG1haW50YWluIDEgb3IgbW9yZSBWaWV3cyBhdCB0aGlzIGxvY2F0aW9uIHRvIGNhY2hlIHNlcnZlciBkYXRhIGFuZCByYWlzZSBhcHByb3ByaWF0ZSBldmVudHMgZm9yIHNlcnZlciBjaGFuZ2VzXG4gKiBhbmQgdXNlciB3cml0ZXMgKHNldCwgdHJhbnNhY3Rpb24sIHVwZGF0ZSkuXG4gKlxuICogSXQncyByZXNwb25zaWJsZSBmb3I6XG4gKiAgLSBNYWludGFpbmluZyB0aGUgc2V0IG9mIDEgb3IgbW9yZSB2aWV3cyBuZWNlc3NhcnkgYXQgdGhpcyBsb2NhdGlvbiAoYSBTeW5jUG9pbnQgd2l0aCAwIHZpZXdzIHNob3VsZCBiZSByZW1vdmVkKS5cbiAqICAtIFByb3h5aW5nIHVzZXIgLyBzZXJ2ZXIgb3BlcmF0aW9ucyB0byB0aGUgdmlld3MgYXMgYXBwcm9wcmlhdGUgKGkuZS4gYXBwbHlTZXJ2ZXJPdmVyd3JpdGUsXG4gKiAgICBhcHBseVVzZXJPdmVyd3JpdGUsIGV0Yy4pXG4gKi9cbmV4cG9ydCBjbGFzcyBTeW5jUG9pbnQge1xuICBzdGF0aWMgc2V0IF9fcmVmZXJlbmNlQ29uc3RydWN0b3IodmFsOiBSZWZlcmVuY2VDb25zdHJ1Y3Rvcikge1xuICAgIGFzc2VydChcbiAgICAgICFfX3JlZmVyZW5jZUNvbnN0cnVjdG9yLFxuICAgICAgJ19fcmVmZXJlbmNlQ29uc3RydWN0b3IgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkJ1xuICAgICk7XG4gICAgX19yZWZlcmVuY2VDb25zdHJ1Y3RvciA9IHZhbDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgX19yZWZlcmVuY2VDb25zdHJ1Y3RvcigpIHtcbiAgICBhc3NlcnQoX19yZWZlcmVuY2VDb25zdHJ1Y3RvciwgJ1JlZmVyZW5jZS50cyBoYXMgbm90IGJlZW4gbG9hZGVkJyk7XG4gICAgcmV0dXJuIF9fcmVmZXJlbmNlQ29uc3RydWN0b3I7XG4gIH1cblxuICAvKipcbiAgICogVGhlIFZpZXdzIGJlaW5nIHRyYWNrZWQgYXQgdGhpcyBsb2NhdGlvbiBpbiB0aGUgdHJlZSwgc3RvcmVkIGFzIGEgbWFwIHdoZXJlIHRoZSBrZXkgaXMgYVxuICAgKiBxdWVyeUlkIGFuZCB0aGUgdmFsdWUgaXMgdGhlIFZpZXcgZm9yIHRoYXQgcXVlcnkuXG4gICAqXG4gICAqIE5PVEU6IFRoaXMgbGlzdCB3aWxsIGJlIHF1aXRlIHNtYWxsICh1c3VhbGx5IDEsIGJ1dCBwZXJoYXBzIDIgb3IgMzsgYW55IG1vcmUgaXMgYW4gb2RkIHVzZSBjYXNlKS5cbiAgICpcbiAgICogQHR5cGUgeyFPYmplY3QuPCFzdHJpbmcsICFWaWV3Pn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgdmlld3NfOiB7IFtrOiBzdHJpbmddOiBWaWV3IH0gPSB7fTtcblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzRW1wdHkoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGlzRW1wdHkodGhpcy52aWV3c18pO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7IU9wZXJhdGlvbn0gb3BlcmF0aW9uXG4gICAqIEBwYXJhbSB7IVdyaXRlVHJlZVJlZn0gd3JpdGVzQ2FjaGVcbiAgICogQHBhcmFtIHs/Tm9kZX0gb3B0Q29tcGxldGVTZXJ2ZXJDYWNoZVxuICAgKiBAcmV0dXJuIHshQXJyYXkuPCFFdmVudD59XG4gICAqL1xuICBhcHBseU9wZXJhdGlvbihcbiAgICBvcGVyYXRpb246IE9wZXJhdGlvbixcbiAgICB3cml0ZXNDYWNoZTogV3JpdGVUcmVlUmVmLFxuICAgIG9wdENvbXBsZXRlU2VydmVyQ2FjaGU6IE5vZGUgfCBudWxsXG4gICk6IEV2ZW50W10ge1xuICAgIGNvbnN0IHF1ZXJ5SWQgPSBvcGVyYXRpb24uc291cmNlLnF1ZXJ5SWQ7XG4gICAgaWYgKHF1ZXJ5SWQgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHZpZXcgPSBzYWZlR2V0KHRoaXMudmlld3NfLCBxdWVyeUlkKTtcbiAgICAgIGFzc2VydCh2aWV3ICE9IG51bGwsICdTeW5jVHJlZSBnYXZlIHVzIGFuIG9wIGZvciBhbiBpbnZhbGlkIHF1ZXJ5LicpO1xuICAgICAgcmV0dXJuIHZpZXcuYXBwbHlPcGVyYXRpb24oXG4gICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgd3JpdGVzQ2FjaGUsXG4gICAgICAgIG9wdENvbXBsZXRlU2VydmVyQ2FjaGVcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBldmVudHM6IEV2ZW50W10gPSBbXTtcblxuICAgICAgZm9yRWFjaCh0aGlzLnZpZXdzXywgZnVuY3Rpb24oa2V5OiBzdHJpbmcsIHZpZXc6IFZpZXcpIHtcbiAgICAgICAgZXZlbnRzID0gZXZlbnRzLmNvbmNhdChcbiAgICAgICAgICB2aWV3LmFwcGx5T3BlcmF0aW9uKG9wZXJhdGlvbiwgd3JpdGVzQ2FjaGUsIG9wdENvbXBsZXRlU2VydmVyQ2FjaGUpXG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGV2ZW50cztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRkIGFuIGV2ZW50IGNhbGxiYWNrIGZvciB0aGUgc3BlY2lmaWVkIHF1ZXJ5LlxuICAgKlxuICAgKiBAcGFyYW0geyFRdWVyeX0gcXVlcnlcbiAgICogQHBhcmFtIHshRXZlbnRSZWdpc3RyYXRpb259IGV2ZW50UmVnaXN0cmF0aW9uXG4gICAqIEBwYXJhbSB7IVdyaXRlVHJlZVJlZn0gd3JpdGVzQ2FjaGVcbiAgICogQHBhcmFtIHs/Tm9kZX0gc2VydmVyQ2FjaGUgQ29tcGxldGUgc2VydmVyIGNhY2hlLCBpZiB3ZSBoYXZlIGl0LlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNlcnZlckNhY2hlQ29tcGxldGVcbiAgICogQHJldHVybiB7IUFycmF5LjwhRXZlbnQ+fSBFdmVudHMgdG8gcmFpc2UuXG4gICAqL1xuICBhZGRFdmVudFJlZ2lzdHJhdGlvbihcbiAgICBxdWVyeTogUXVlcnksXG4gICAgZXZlbnRSZWdpc3RyYXRpb246IEV2ZW50UmVnaXN0cmF0aW9uLFxuICAgIHdyaXRlc0NhY2hlOiBXcml0ZVRyZWVSZWYsXG4gICAgc2VydmVyQ2FjaGU6IE5vZGUgfCBudWxsLFxuICAgIHNlcnZlckNhY2hlQ29tcGxldGU6IGJvb2xlYW5cbiAgKTogRXZlbnRbXSB7XG4gICAgY29uc3QgcXVlcnlJZCA9IHF1ZXJ5LnF1ZXJ5SWRlbnRpZmllcigpO1xuICAgIGxldCB2aWV3ID0gc2FmZUdldCh0aGlzLnZpZXdzXywgcXVlcnlJZCk7XG4gICAgaWYgKCF2aWV3KSB7XG4gICAgICAvLyBUT0RPOiBtYWtlIHdyaXRlc0NhY2hlIHRha2UgZmxhZyBmb3IgY29tcGxldGUgc2VydmVyIG5vZGVcbiAgICAgIGxldCBldmVudENhY2hlID0gd3JpdGVzQ2FjaGUuY2FsY0NvbXBsZXRlRXZlbnRDYWNoZShcbiAgICAgICAgc2VydmVyQ2FjaGVDb21wbGV0ZSA/IHNlcnZlckNhY2hlIDogbnVsbFxuICAgICAgKTtcbiAgICAgIGxldCBldmVudENhY2hlQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgIGlmIChldmVudENhY2hlKSB7XG4gICAgICAgIGV2ZW50Q2FjaGVDb21wbGV0ZSA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHNlcnZlckNhY2hlIGluc3RhbmNlb2YgQ2hpbGRyZW5Ob2RlKSB7XG4gICAgICAgIGV2ZW50Q2FjaGUgPSB3cml0ZXNDYWNoZS5jYWxjQ29tcGxldGVFdmVudENoaWxkcmVuKHNlcnZlckNhY2hlKTtcbiAgICAgICAgZXZlbnRDYWNoZUNvbXBsZXRlID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBldmVudENhY2hlID0gQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG4gICAgICAgIGV2ZW50Q2FjaGVDb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgY29uc3Qgdmlld0NhY2hlID0gbmV3IFZpZXdDYWNoZShcbiAgICAgICAgbmV3IENhY2hlTm9kZShcbiAgICAgICAgICAvKiogQHR5cGUgeyFOb2RlfSAqLyAoZXZlbnRDYWNoZSksXG4gICAgICAgICAgZXZlbnRDYWNoZUNvbXBsZXRlLFxuICAgICAgICAgIGZhbHNlXG4gICAgICAgICksXG4gICAgICAgIG5ldyBDYWNoZU5vZGUoXG4gICAgICAgICAgLyoqIEB0eXBlIHshTm9kZX0gKi8gKHNlcnZlckNhY2hlKSxcbiAgICAgICAgICBzZXJ2ZXJDYWNoZUNvbXBsZXRlLFxuICAgICAgICAgIGZhbHNlXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICB2aWV3ID0gbmV3IFZpZXcocXVlcnksIHZpZXdDYWNoZSk7XG4gICAgICB0aGlzLnZpZXdzX1txdWVyeUlkXSA9IHZpZXc7XG4gICAgfVxuXG4gICAgLy8gVGhpcyBpcyBndWFyYW50ZWVkIHRvIGV4aXN0IG5vdywgd2UganVzdCBjcmVhdGVkIGFueXRoaW5nIHRoYXQgd2FzIG1pc3NpbmdcbiAgICB2aWV3LmFkZEV2ZW50UmVnaXN0cmF0aW9uKGV2ZW50UmVnaXN0cmF0aW9uKTtcbiAgICByZXR1cm4gdmlldy5nZXRJbml0aWFsRXZlbnRzKGV2ZW50UmVnaXN0cmF0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgZXZlbnQgY2FsbGJhY2socykuICBSZXR1cm4gY2FuY2VsRXZlbnRzIGlmIGEgY2FuY2VsRXJyb3IgaXMgc3BlY2lmaWVkLlxuICAgKlxuICAgKiBJZiBxdWVyeSBpcyB0aGUgZGVmYXVsdCBxdWVyeSwgd2UnbGwgY2hlY2sgYWxsIHZpZXdzIGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50UmVnaXN0cmF0aW9uLlxuICAgKiBJZiBldmVudFJlZ2lzdHJhdGlvbiBpcyBudWxsLCB3ZSdsbCByZW1vdmUgYWxsIGNhbGxiYWNrcyBmb3IgdGhlIHNwZWNpZmllZCB2aWV3KHMpLlxuICAgKlxuICAgKiBAcGFyYW0geyFRdWVyeX0gcXVlcnlcbiAgICogQHBhcmFtIHs/RXZlbnRSZWdpc3RyYXRpb259IGV2ZW50UmVnaXN0cmF0aW9uIElmIG51bGwsIHJlbW92ZSBhbGwgY2FsbGJhY2tzLlxuICAgKiBAcGFyYW0ge0Vycm9yPX0gY2FuY2VsRXJyb3IgSWYgYSBjYW5jZWxFcnJvciBpcyBwcm92aWRlZCwgYXBwcm9wcmlhdGUgY2FuY2VsIGV2ZW50cyB3aWxsIGJlIHJldHVybmVkLlxuICAgKiBAcmV0dXJuIHt7cmVtb3ZlZDohQXJyYXkuPCFRdWVyeT4sIGV2ZW50czohQXJyYXkuPCFFdmVudD59fSByZW1vdmVkIHF1ZXJpZXMgYW5kIGFueSBjYW5jZWwgZXZlbnRzXG4gICAqL1xuICByZW1vdmVFdmVudFJlZ2lzdHJhdGlvbihcbiAgICBxdWVyeTogUXVlcnksXG4gICAgZXZlbnRSZWdpc3RyYXRpb246IEV2ZW50UmVnaXN0cmF0aW9uIHwgbnVsbCxcbiAgICBjYW5jZWxFcnJvcj86IEVycm9yXG4gICk6IHsgcmVtb3ZlZDogUXVlcnlbXTsgZXZlbnRzOiBFdmVudFtdIH0ge1xuICAgIGNvbnN0IHF1ZXJ5SWQgPSBxdWVyeS5xdWVyeUlkZW50aWZpZXIoKTtcbiAgICBjb25zdCByZW1vdmVkOiBRdWVyeVtdID0gW107XG4gICAgbGV0IGNhbmNlbEV2ZW50czogRXZlbnRbXSA9IFtdO1xuICAgIGNvbnN0IGhhZENvbXBsZXRlVmlldyA9IHRoaXMuaGFzQ29tcGxldGVWaWV3KCk7XG4gICAgaWYgKHF1ZXJ5SWQgPT09ICdkZWZhdWx0Jykge1xuICAgICAgLy8gV2hlbiB5b3UgZG8gcmVmLm9mZiguLi4pLCB3ZSBzZWFyY2ggYWxsIHZpZXdzIGZvciB0aGUgcmVnaXN0cmF0aW9uIHRvIHJlbW92ZS5cbiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgZm9yRWFjaCh0aGlzLnZpZXdzXywgZnVuY3Rpb24odmlld1F1ZXJ5SWQ6IHN0cmluZywgdmlldzogVmlldykge1xuICAgICAgICBjYW5jZWxFdmVudHMgPSBjYW5jZWxFdmVudHMuY29uY2F0KFxuICAgICAgICAgIHZpZXcucmVtb3ZlRXZlbnRSZWdpc3RyYXRpb24oZXZlbnRSZWdpc3RyYXRpb24sIGNhbmNlbEVycm9yKVxuICAgICAgICApO1xuICAgICAgICBpZiAodmlldy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICBkZWxldGUgc2VsZi52aWV3c19bdmlld1F1ZXJ5SWRdO1xuXG4gICAgICAgICAgLy8gV2UnbGwgZGVhbCB3aXRoIGNvbXBsZXRlIHZpZXdzIGxhdGVyLlxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICF2aWV3XG4gICAgICAgICAgICAgIC5nZXRRdWVyeSgpXG4gICAgICAgICAgICAgIC5nZXRRdWVyeVBhcmFtcygpXG4gICAgICAgICAgICAgIC5sb2Fkc0FsbERhdGEoKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmVtb3ZlZC5wdXNoKHZpZXcuZ2V0UXVlcnkoKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gcmVtb3ZlIHRoZSBjYWxsYmFjayBmcm9tIHRoZSBzcGVjaWZpYyB2aWV3LlxuICAgICAgY29uc3QgdmlldyA9IHNhZmVHZXQodGhpcy52aWV3c18sIHF1ZXJ5SWQpO1xuICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgY2FuY2VsRXZlbnRzID0gY2FuY2VsRXZlbnRzLmNvbmNhdChcbiAgICAgICAgICB2aWV3LnJlbW92ZUV2ZW50UmVnaXN0cmF0aW9uKGV2ZW50UmVnaXN0cmF0aW9uLCBjYW5jZWxFcnJvcilcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHZpZXcuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMudmlld3NfW3F1ZXJ5SWRdO1xuXG4gICAgICAgICAgLy8gV2UnbGwgZGVhbCB3aXRoIGNvbXBsZXRlIHZpZXdzIGxhdGVyLlxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICF2aWV3XG4gICAgICAgICAgICAgIC5nZXRRdWVyeSgpXG4gICAgICAgICAgICAgIC5nZXRRdWVyeVBhcmFtcygpXG4gICAgICAgICAgICAgIC5sb2Fkc0FsbERhdGEoKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmVtb3ZlZC5wdXNoKHZpZXcuZ2V0UXVlcnkoKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGhhZENvbXBsZXRlVmlldyAmJiAhdGhpcy5oYXNDb21wbGV0ZVZpZXcoKSkge1xuICAgICAgLy8gV2UgcmVtb3ZlZCBvdXIgbGFzdCBjb21wbGV0ZSB2aWV3LlxuICAgICAgcmVtb3ZlZC5wdXNoKFxuICAgICAgICBuZXcgU3luY1BvaW50Ll9fcmVmZXJlbmNlQ29uc3RydWN0b3IocXVlcnkucmVwbywgcXVlcnkucGF0aClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgcmVtb3ZlZDogcmVtb3ZlZCwgZXZlbnRzOiBjYW5jZWxFdmVudHMgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshQXJyYXkuPCFWaWV3Pn1cbiAgICovXG4gIGdldFF1ZXJ5Vmlld3MoKTogVmlld1tdIHtcbiAgICBjb25zdCB2YWx1ZXMgPSBPYmplY3Qua2V5cyh0aGlzLnZpZXdzXykubWFwKGtleSA9PiB0aGlzLnZpZXdzX1trZXldKTtcbiAgICByZXR1cm4gdmFsdWVzLmZpbHRlcihmdW5jdGlvbih2aWV3KSB7XG4gICAgICByZXR1cm4gIXZpZXdcbiAgICAgICAgLmdldFF1ZXJ5KClcbiAgICAgICAgLmdldFF1ZXJ5UGFyYW1zKClcbiAgICAgICAgLmxvYWRzQWxsRGF0YSgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7IVBhdGh9IHBhdGggVGhlIHBhdGggdG8gdGhlIGRlc2lyZWQgY29tcGxldGUgc25hcHNob3RcbiAgICogQHJldHVybiB7P05vZGV9IEEgY29tcGxldGUgY2FjaGUsIGlmIGl0IGV4aXN0c1xuICAgKi9cbiAgZ2V0Q29tcGxldGVTZXJ2ZXJDYWNoZShwYXRoOiBQYXRoKTogTm9kZSB8IG51bGwge1xuICAgIGxldCBzZXJ2ZXJDYWNoZTogTm9kZSB8IG51bGwgPSBudWxsO1xuICAgIGZvckVhY2godGhpcy52aWV3c18sIChrZXk6IHN0cmluZywgdmlldzogVmlldykgPT4ge1xuICAgICAgc2VydmVyQ2FjaGUgPSBzZXJ2ZXJDYWNoZSB8fCB2aWV3LmdldENvbXBsZXRlU2VydmVyQ2FjaGUocGF0aCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHNlcnZlckNhY2hlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVF1ZXJ5fSBxdWVyeVxuICAgKiBAcmV0dXJuIHs/Vmlld31cbiAgICovXG4gIHZpZXdGb3JRdWVyeShxdWVyeTogUXVlcnkpOiBWaWV3IHwgbnVsbCB7XG4gICAgY29uc3QgcGFyYW1zID0gcXVlcnkuZ2V0UXVlcnlQYXJhbXMoKTtcbiAgICBpZiAocGFyYW1zLmxvYWRzQWxsRGF0YSgpKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRDb21wbGV0ZVZpZXcoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcXVlcnlJZCA9IHF1ZXJ5LnF1ZXJ5SWRlbnRpZmllcigpO1xuICAgICAgcmV0dXJuIHNhZmVHZXQodGhpcy52aWV3c18sIHF1ZXJ5SWQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFRdWVyeX0gcXVlcnlcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHZpZXdFeGlzdHNGb3JRdWVyeShxdWVyeTogUXVlcnkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy52aWV3Rm9yUXVlcnkocXVlcnkpICE9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGhhc0NvbXBsZXRlVmlldygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDb21wbGV0ZVZpZXcoKSAhPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9WaWV3fVxuICAgKi9cbiAgZ2V0Q29tcGxldGVWaWV3KCk6IFZpZXcgfCBudWxsIHtcbiAgICBjb25zdCBjb21wbGV0ZVZpZXcgPSBmaW5kVmFsdWUodGhpcy52aWV3c18sICh2aWV3OiBWaWV3KSA9PlxuICAgICAgdmlld1xuICAgICAgICAuZ2V0UXVlcnkoKVxuICAgICAgICAuZ2V0UXVlcnlQYXJhbXMoKVxuICAgICAgICAubG9hZHNBbGxEYXRhKClcbiAgICApO1xuICAgIHJldHVybiBjb21wbGV0ZVZpZXcgfHwgbnVsbDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgZXJyb3JGb3JTZXJ2ZXJDb2RlIH0gZnJvbSAnLi91dGlsL3V0aWwnO1xuaW1wb3J0IHsgQWNrVXNlcldyaXRlIH0gZnJvbSAnLi9vcGVyYXRpb24vQWNrVXNlcldyaXRlJztcbmltcG9ydCB7IENoaWxkcmVuTm9kZSB9IGZyb20gJy4vc25hcC9DaGlsZHJlbk5vZGUnO1xuaW1wb3J0IHsgZm9yRWFjaCwgc2FmZUdldCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IEltbXV0YWJsZVRyZWUgfSBmcm9tICcuL3V0aWwvSW1tdXRhYmxlVHJlZSc7XG5pbXBvcnQgeyBMaXN0ZW5Db21wbGV0ZSB9IGZyb20gJy4vb3BlcmF0aW9uL0xpc3RlbkNvbXBsZXRlJztcbmltcG9ydCB7IE1lcmdlIH0gZnJvbSAnLi9vcGVyYXRpb24vTWVyZ2UnO1xuaW1wb3J0IHsgT3BlcmF0aW9uLCBPcGVyYXRpb25Tb3VyY2UgfSBmcm9tICcuL29wZXJhdGlvbi9PcGVyYXRpb24nO1xuaW1wb3J0IHsgT3ZlcndyaXRlIH0gZnJvbSAnLi9vcGVyYXRpb24vT3ZlcndyaXRlJztcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuL3V0aWwvUGF0aCc7XG5pbXBvcnQgeyBTeW5jUG9pbnQgfSBmcm9tICcuL1N5bmNQb2ludCc7XG5pbXBvcnQgeyBXcml0ZVRyZWUsIFdyaXRlVHJlZVJlZiB9IGZyb20gJy4vV3JpdGVUcmVlJztcbmltcG9ydCB7IFF1ZXJ5IH0gZnJvbSAnLi4vYXBpL1F1ZXJ5JztcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuL3NuYXAvTm9kZSc7XG5pbXBvcnQgeyBFdmVudCB9IGZyb20gJy4vdmlldy9FdmVudCc7XG5pbXBvcnQgeyBFdmVudFJlZ2lzdHJhdGlvbiB9IGZyb20gJy4vdmlldy9FdmVudFJlZ2lzdHJhdGlvbic7XG5pbXBvcnQgeyBWaWV3IH0gZnJvbSAnLi92aWV3L1ZpZXcnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHN0YXJ0TGlzdGVuaW5nOiBmdW5jdGlvbihcbiAqICAgICAhUXVlcnksXG4gKiAgICAgP251bWJlcixcbiAqICAgICBmdW5jdGlvbigpOnN0cmluZyxcbiAqICAgICBmdW5jdGlvbighc3RyaW5nLCAqKTohQXJyYXkuPCFFdmVudD5cbiAqICAgKTohQXJyYXkuPCFFdmVudD4sXG4gKlxuICogICBzdG9wTGlzdGVuaW5nOiBmdW5jdGlvbighUXVlcnksID9udW1iZXIpXG4gKiB9fVxuICovXG5leHBvcnQgaW50ZXJmYWNlIExpc3RlblByb3ZpZGVyIHtcbiAgc3RhcnRMaXN0ZW5pbmcoXG4gICAgcXVlcnk6IFF1ZXJ5LFxuICAgIHRhZzogbnVtYmVyIHwgbnVsbCxcbiAgICBoYXNoRm46ICgpID0+IHN0cmluZyxcbiAgICBvbkNvbXBsZXRlOiAoYTogc3RyaW5nLCBiPzogYW55KSA9PiBFdmVudFtdXG4gICk6IEV2ZW50W107XG5cbiAgc3RvcExpc3RlbmluZyhhOiBRdWVyeSwgYjogbnVtYmVyIHwgbnVsbCk6IHZvaWQ7XG59XG5cbi8qKlxuICogU3luY1RyZWUgaXMgdGhlIGNlbnRyYWwgY2xhc3MgZm9yIG1hbmFnaW5nIGV2ZW50IGNhbGxiYWNrIHJlZ2lzdHJhdGlvbiwgZGF0YSBjYWNoaW5nLCB2aWV3c1xuICogKHF1ZXJ5IHByb2Nlc3NpbmcpLCBhbmQgZXZlbnQgZ2VuZXJhdGlvbi4gIFRoZXJlIGFyZSB0eXBpY2FsbHkgdHdvIFN5bmNUcmVlIGluc3RhbmNlcyBmb3JcbiAqIGVhY2ggUmVwbywgb25lIGZvciB0aGUgbm9ybWFsIEZpcmViYXNlIGRhdGEsIGFuZCBvbmUgZm9yIHRoZSAuaW5mbyBkYXRhLlxuICpcbiAqIEl0IGhhcyBhIG51bWJlciBvZiByZXNwb25zaWJpbGl0aWVzLCBpbmNsdWRpbmc6XG4gKiAgLSBUcmFja2luZyBhbGwgdXNlciBldmVudCBjYWxsYmFja3MgKHJlZ2lzdGVyZWQgdmlhIGFkZEV2ZW50UmVnaXN0cmF0aW9uKCkgYW5kIHJlbW92ZUV2ZW50UmVnaXN0cmF0aW9uKCkpLlxuICogIC0gQXBwbHlpbmcgYW5kIGNhY2hpbmcgZGF0YSBjaGFuZ2VzIGZvciB1c2VyIHNldCgpLCB0cmFuc2FjdGlvbigpLCBhbmQgdXBkYXRlKCkgY2FsbHNcbiAqICAgIChhcHBseVVzZXJPdmVyd3JpdGUoKSwgYXBwbHlVc2VyTWVyZ2UoKSkuXG4gKiAgLSBBcHBseWluZyBhbmQgY2FjaGluZyBkYXRhIGNoYW5nZXMgZm9yIHNlcnZlciBkYXRhIGNoYW5nZXMgKGFwcGx5U2VydmVyT3ZlcndyaXRlKCksXG4gKiAgICBhcHBseVNlcnZlck1lcmdlKCkpLlxuICogIC0gR2VuZXJhdGluZyB1c2VyLWZhY2luZyBldmVudHMgZm9yIHNlcnZlciBhbmQgdXNlciBjaGFuZ2VzIChhbGwgb2YgdGhlIGFwcGx5KiBtZXRob2RzXG4gKiAgICByZXR1cm4gdGhlIHNldCBvZiBldmVudHMgdGhhdCBuZWVkIHRvIGJlIHJhaXNlZCBhcyBhIHJlc3VsdCkuXG4gKiAgLSBNYWludGFpbmluZyB0aGUgYXBwcm9wcmlhdGUgc2V0IG9mIHNlcnZlciBsaXN0ZW5zIHRvIGVuc3VyZSB3ZSBhcmUgYWx3YXlzIHN1YnNjcmliZWRcbiAqICAgIHRvIHRoZSBjb3JyZWN0IHNldCBvZiBwYXRocyBhbmQgcXVlcmllcyB0byBzYXRpc2Z5IHRoZSBjdXJyZW50IHNldCBvZiB1c2VyIGV2ZW50XG4gKiAgICBjYWxsYmFja3MgKGxpc3RlbnMgYXJlIHN0YXJ0ZWQvc3RvcHBlZCB1c2luZyB0aGUgcHJvdmlkZWQgbGlzdGVuUHJvdmlkZXIpLlxuICpcbiAqIE5PVEU6IEFsdGhvdWdoIFN5bmNUcmVlIHRyYWNrcyBldmVudCBjYWxsYmFja3MgYW5kIGNhbGN1bGF0ZXMgZXZlbnRzIHRvIHJhaXNlLCB0aGUgYWN0dWFsXG4gKiBldmVudHMgYXJlIHJldHVybmVkIHRvIHRoZSBjYWxsZXIgcmF0aGVyIHRoYW4gcmFpc2VkIHN5bmNocm9ub3VzbHkuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBjbGFzcyBTeW5jVHJlZSB7XG4gIC8qKlxuICAgKiBUcmVlIG9mIFN5bmNQb2ludHMuICBUaGVyZSdzIGEgU3luY1BvaW50IGF0IGFueSBsb2NhdGlvbiB0aGF0IGhhcyAxIG9yIG1vcmUgdmlld3MuXG4gICAqIEB0eXBlIHshSW1tdXRhYmxlVHJlZS48IVN5bmNQb2ludD59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHN5bmNQb2ludFRyZWVfOiBJbW11dGFibGVUcmVlPFN5bmNQb2ludD4gPSBJbW11dGFibGVUcmVlLkVtcHR5O1xuXG4gIC8qKlxuICAgKiBBIHRyZWUgb2YgYWxsIHBlbmRpbmcgdXNlciB3cml0ZXMgKHVzZXItaW5pdGlhdGVkIHNldCgpJ3MsIHRyYW5zYWN0aW9uKCkncywgdXBkYXRlKCkncywgZXRjLikuXG4gICAqIEB0eXBlIHshV3JpdGVUcmVlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBwZW5kaW5nV3JpdGVUcmVlXyA9IG5ldyBXcml0ZVRyZWUoKTtcblxuICBwcml2YXRlIHRhZ1RvUXVlcnlNYXBfOiB7IFtrOiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9O1xuICBwcml2YXRlIHF1ZXJ5VG9UYWdNYXBfOiB7IFtrOiBzdHJpbmddOiBudW1iZXIgfSA9IHt9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFMaXN0ZW5Qcm92aWRlcn0gbGlzdGVuUHJvdmlkZXJfIFVzZWQgYnkgU3luY1RyZWUgdG8gc3RhcnQgLyBzdG9wIGxpc3RlbmluZ1xuICAgKiAgIHRvIHNlcnZlciBkYXRhLlxuICAgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBsaXN0ZW5Qcm92aWRlcl86IExpc3RlblByb3ZpZGVyKSB7fVxuXG4gIC8qKlxuICAgKiBBcHBseSB0aGUgZGF0YSBjaGFuZ2VzIGZvciBhIHVzZXItZ2VuZXJhdGVkIHNldCgpIG9yIHRyYW5zYWN0aW9uKCkgY2FsbC5cbiAgICpcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICAgKiBAcGFyYW0geyFOb2RlfSBuZXdEYXRhXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB3cml0ZUlkXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IHZpc2libGVcbiAgICogQHJldHVybiB7IUFycmF5LjwhRXZlbnQ+fSBFdmVudHMgdG8gcmFpc2UuXG4gICAqL1xuICBhcHBseVVzZXJPdmVyd3JpdGUoXG4gICAgcGF0aDogUGF0aCxcbiAgICBuZXdEYXRhOiBOb2RlLFxuICAgIHdyaXRlSWQ6IG51bWJlcixcbiAgICB2aXNpYmxlPzogYm9vbGVhblxuICApOiBFdmVudFtdIHtcbiAgICAvLyBSZWNvcmQgcGVuZGluZyB3cml0ZS5cbiAgICB0aGlzLnBlbmRpbmdXcml0ZVRyZWVfLmFkZE92ZXJ3cml0ZShwYXRoLCBuZXdEYXRhLCB3cml0ZUlkLCB2aXNpYmxlKTtcblxuICAgIGlmICghdmlzaWJsZSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5hcHBseU9wZXJhdGlvblRvU3luY1BvaW50c18oXG4gICAgICAgIG5ldyBPdmVyd3JpdGUoT3BlcmF0aW9uU291cmNlLlVzZXIsIHBhdGgsIG5ld0RhdGEpXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBseSB0aGUgZGF0YSBmcm9tIGEgdXNlci1nZW5lcmF0ZWQgdXBkYXRlKCkgY2FsbFxuICAgKlxuICAgKiBAcGFyYW0geyFQYXRofSBwYXRoXG4gICAqIEBwYXJhbSB7IU9iamVjdC48c3RyaW5nLCAhTm9kZT59IGNoYW5nZWRDaGlsZHJlblxuICAgKiBAcGFyYW0geyFudW1iZXJ9IHdyaXRlSWRcbiAgICogQHJldHVybiB7IUFycmF5LjwhRXZlbnQ+fSBFdmVudHMgdG8gcmFpc2UuXG4gICAqL1xuICBhcHBseVVzZXJNZXJnZShcbiAgICBwYXRoOiBQYXRoLFxuICAgIGNoYW5nZWRDaGlsZHJlbjogeyBbazogc3RyaW5nXTogTm9kZSB9LFxuICAgIHdyaXRlSWQ6IG51bWJlclxuICApOiBFdmVudFtdIHtcbiAgICAvLyBSZWNvcmQgcGVuZGluZyBtZXJnZS5cbiAgICB0aGlzLnBlbmRpbmdXcml0ZVRyZWVfLmFkZE1lcmdlKHBhdGgsIGNoYW5nZWRDaGlsZHJlbiwgd3JpdGVJZCk7XG5cbiAgICBjb25zdCBjaGFuZ2VUcmVlID0gSW1tdXRhYmxlVHJlZS5mcm9tT2JqZWN0KGNoYW5nZWRDaGlsZHJlbik7XG5cbiAgICByZXR1cm4gdGhpcy5hcHBseU9wZXJhdGlvblRvU3luY1BvaW50c18oXG4gICAgICBuZXcgTWVyZ2UoT3BlcmF0aW9uU291cmNlLlVzZXIsIHBhdGgsIGNoYW5nZVRyZWUpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBY2tub3dsZWRnZSBhIHBlbmRpbmcgdXNlciB3cml0ZSB0aGF0IHdhcyBwcmV2aW91c2x5IHJlZ2lzdGVyZWQgd2l0aCBhcHBseVVzZXJPdmVyd3JpdGUoKSBvciBhcHBseVVzZXJNZXJnZSgpLlxuICAgKlxuICAgKiBAcGFyYW0geyFudW1iZXJ9IHdyaXRlSWRcbiAgICogQHBhcmFtIHtib29sZWFuPX0gcmV2ZXJ0IFRydWUgaWYgdGhlIGdpdmVuIHdyaXRlIGZhaWxlZCBhbmQgbmVlZHMgdG8gYmUgcmV2ZXJ0ZWRcbiAgICogQHJldHVybiB7IUFycmF5LjwhRXZlbnQ+fSBFdmVudHMgdG8gcmFpc2UuXG4gICAqL1xuICBhY2tVc2VyV3JpdGUod3JpdGVJZDogbnVtYmVyLCByZXZlcnQ6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIGNvbnN0IHdyaXRlID0gdGhpcy5wZW5kaW5nV3JpdGVUcmVlXy5nZXRXcml0ZSh3cml0ZUlkKTtcbiAgICBjb25zdCBuZWVkVG9SZWV2YWx1YXRlID0gdGhpcy5wZW5kaW5nV3JpdGVUcmVlXy5yZW1vdmVXcml0ZSh3cml0ZUlkKTtcbiAgICBpZiAoIW5lZWRUb1JlZXZhbHVhdGUpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGFmZmVjdGVkVHJlZSA9IEltbXV0YWJsZVRyZWUuRW1wdHk7XG4gICAgICBpZiAod3JpdGUuc25hcCAhPSBudWxsKSB7XG4gICAgICAgIC8vIG92ZXJ3cml0ZVxuICAgICAgICBhZmZlY3RlZFRyZWUgPSBhZmZlY3RlZFRyZWUuc2V0KFBhdGguRW1wdHksIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yRWFjaCh3cml0ZS5jaGlsZHJlbiwgZnVuY3Rpb24ocGF0aFN0cmluZzogc3RyaW5nLCBub2RlOiBOb2RlKSB7XG4gICAgICAgICAgYWZmZWN0ZWRUcmVlID0gYWZmZWN0ZWRUcmVlLnNldChuZXcgUGF0aChwYXRoU3RyaW5nKSwgbm9kZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuYXBwbHlPcGVyYXRpb25Ub1N5bmNQb2ludHNfKFxuICAgICAgICBuZXcgQWNrVXNlcldyaXRlKHdyaXRlLnBhdGgsIGFmZmVjdGVkVHJlZSwgcmV2ZXJ0KVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXBwbHkgbmV3IHNlcnZlciBkYXRhIGZvciB0aGUgc3BlY2lmaWVkIHBhdGguLlxuICAgKlxuICAgKiBAcGFyYW0geyFQYXRofSBwYXRoXG4gICAqIEBwYXJhbSB7IU5vZGV9IG5ld0RhdGFcbiAgICogQHJldHVybiB7IUFycmF5LjwhRXZlbnQ+fSBFdmVudHMgdG8gcmFpc2UuXG4gICAqL1xuICBhcHBseVNlcnZlck92ZXJ3cml0ZShwYXRoOiBQYXRoLCBuZXdEYXRhOiBOb2RlKTogRXZlbnRbXSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwbHlPcGVyYXRpb25Ub1N5bmNQb2ludHNfKFxuICAgICAgbmV3IE92ZXJ3cml0ZShPcGVyYXRpb25Tb3VyY2UuU2VydmVyLCBwYXRoLCBuZXdEYXRhKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQXBwbHkgbmV3IHNlcnZlciBkYXRhIHRvIGJlIG1lcmdlZCBpbiBhdCB0aGUgc3BlY2lmaWVkIHBhdGguXG4gICAqXG4gICAqIEBwYXJhbSB7IVBhdGh9IHBhdGhcbiAgICogQHBhcmFtIHshT2JqZWN0LjxzdHJpbmcsICFOb2RlPn0gY2hhbmdlZENoaWxkcmVuXG4gICAqIEByZXR1cm4geyFBcnJheS48IUV2ZW50Pn0gRXZlbnRzIHRvIHJhaXNlLlxuICAgKi9cbiAgYXBwbHlTZXJ2ZXJNZXJnZShcbiAgICBwYXRoOiBQYXRoLFxuICAgIGNoYW5nZWRDaGlsZHJlbjogeyBbazogc3RyaW5nXTogTm9kZSB9XG4gICk6IEV2ZW50W10ge1xuICAgIGNvbnN0IGNoYW5nZVRyZWUgPSBJbW11dGFibGVUcmVlLmZyb21PYmplY3QoY2hhbmdlZENoaWxkcmVuKTtcblxuICAgIHJldHVybiB0aGlzLmFwcGx5T3BlcmF0aW9uVG9TeW5jUG9pbnRzXyhcbiAgICAgIG5ldyBNZXJnZShPcGVyYXRpb25Tb3VyY2UuU2VydmVyLCBwYXRoLCBjaGFuZ2VUcmVlKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQXBwbHkgYSBsaXN0ZW4gY29tcGxldGUgZm9yIGEgcXVlcnlcbiAgICpcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICAgKiBAcmV0dXJuIHshQXJyYXkuPCFFdmVudD59IEV2ZW50cyB0byByYWlzZS5cbiAgICovXG4gIGFwcGx5TGlzdGVuQ29tcGxldGUocGF0aDogUGF0aCk6IEV2ZW50W10ge1xuICAgIHJldHVybiB0aGlzLmFwcGx5T3BlcmF0aW9uVG9TeW5jUG9pbnRzXyhcbiAgICAgIG5ldyBMaXN0ZW5Db21wbGV0ZShPcGVyYXRpb25Tb3VyY2UuU2VydmVyLCBwYXRoKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQXBwbHkgbmV3IHNlcnZlciBkYXRhIGZvciB0aGUgc3BlY2lmaWVkIHRhZ2dlZCBxdWVyeS5cbiAgICpcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICAgKiBAcGFyYW0geyFOb2RlfSBzbmFwXG4gICAqIEBwYXJhbSB7IW51bWJlcn0gdGFnXG4gICAqIEByZXR1cm4geyFBcnJheS48IUV2ZW50Pn0gRXZlbnRzIHRvIHJhaXNlLlxuICAgKi9cbiAgYXBwbHlUYWdnZWRRdWVyeU92ZXJ3cml0ZShwYXRoOiBQYXRoLCBzbmFwOiBOb2RlLCB0YWc6IG51bWJlcik6IEV2ZW50W10ge1xuICAgIGNvbnN0IHF1ZXJ5S2V5ID0gdGhpcy5xdWVyeUtleUZvclRhZ18odGFnKTtcbiAgICBpZiAocXVlcnlLZXkgIT0gbnVsbCkge1xuICAgICAgY29uc3QgciA9IFN5bmNUcmVlLnBhcnNlUXVlcnlLZXlfKHF1ZXJ5S2V5KTtcbiAgICAgIGNvbnN0IHF1ZXJ5UGF0aCA9IHIucGF0aCxcbiAgICAgICAgcXVlcnlJZCA9IHIucXVlcnlJZDtcbiAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IFBhdGgucmVsYXRpdmVQYXRoKHF1ZXJ5UGF0aCwgcGF0aCk7XG4gICAgICBjb25zdCBvcCA9IG5ldyBPdmVyd3JpdGUoXG4gICAgICAgIE9wZXJhdGlvblNvdXJjZS5mb3JTZXJ2ZXJUYWdnZWRRdWVyeShxdWVyeUlkKSxcbiAgICAgICAgcmVsYXRpdmVQYXRoLFxuICAgICAgICBzbmFwXG4gICAgICApO1xuICAgICAgcmV0dXJuIHRoaXMuYXBwbHlUYWdnZWRPcGVyYXRpb25fKHF1ZXJ5UGF0aCwgb3ApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBRdWVyeSBtdXN0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHlcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXBwbHkgc2VydmVyIGRhdGEgdG8gYmUgbWVyZ2VkIGluIGZvciB0aGUgc3BlY2lmaWVkIHRhZ2dlZCBxdWVyeS5cbiAgICpcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICAgKiBAcGFyYW0geyFPYmplY3QuPHN0cmluZywgIU5vZGU+fSBjaGFuZ2VkQ2hpbGRyZW5cbiAgICogQHBhcmFtIHshbnVtYmVyfSB0YWdcbiAgICogQHJldHVybiB7IUFycmF5LjwhRXZlbnQ+fSBFdmVudHMgdG8gcmFpc2UuXG4gICAqL1xuICBhcHBseVRhZ2dlZFF1ZXJ5TWVyZ2UoXG4gICAgcGF0aDogUGF0aCxcbiAgICBjaGFuZ2VkQ2hpbGRyZW46IHsgW2s6IHN0cmluZ106IE5vZGUgfSxcbiAgICB0YWc6IG51bWJlclxuICApOiBFdmVudFtdIHtcbiAgICBjb25zdCBxdWVyeUtleSA9IHRoaXMucXVlcnlLZXlGb3JUYWdfKHRhZyk7XG4gICAgaWYgKHF1ZXJ5S2V5KSB7XG4gICAgICBjb25zdCByID0gU3luY1RyZWUucGFyc2VRdWVyeUtleV8ocXVlcnlLZXkpO1xuICAgICAgY29uc3QgcXVlcnlQYXRoID0gci5wYXRoLFxuICAgICAgICBxdWVyeUlkID0gci5xdWVyeUlkO1xuICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gUGF0aC5yZWxhdGl2ZVBhdGgocXVlcnlQYXRoLCBwYXRoKTtcbiAgICAgIGNvbnN0IGNoYW5nZVRyZWUgPSBJbW11dGFibGVUcmVlLmZyb21PYmplY3QoY2hhbmdlZENoaWxkcmVuKTtcbiAgICAgIGNvbnN0IG9wID0gbmV3IE1lcmdlKFxuICAgICAgICBPcGVyYXRpb25Tb3VyY2UuZm9yU2VydmVyVGFnZ2VkUXVlcnkocXVlcnlJZCksXG4gICAgICAgIHJlbGF0aXZlUGF0aCxcbiAgICAgICAgY2hhbmdlVHJlZVxuICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzLmFwcGx5VGFnZ2VkT3BlcmF0aW9uXyhxdWVyeVBhdGgsIG9wKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gV2UndmUgYWxyZWFkeSByZW1vdmVkIHRoZSBxdWVyeS4gTm8gYmlnIGRlYWwsIGlnbm9yZSB0aGUgdXBkYXRlXG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGEgbGlzdGVuIGNvbXBsZXRlIGZvciBhIHRhZ2dlZCBxdWVyeVxuICAgKlxuICAgKiBAcGFyYW0geyFQYXRofSBwYXRoXG4gICAqIEBwYXJhbSB7IW51bWJlcn0gdGFnXG4gICAqIEByZXR1cm4geyFBcnJheS48IUV2ZW50Pn0gRXZlbnRzIHRvIHJhaXNlLlxuICAgKi9cbiAgYXBwbHlUYWdnZWRMaXN0ZW5Db21wbGV0ZShwYXRoOiBQYXRoLCB0YWc6IG51bWJlcik6IEV2ZW50W10ge1xuICAgIGNvbnN0IHF1ZXJ5S2V5ID0gdGhpcy5xdWVyeUtleUZvclRhZ18odGFnKTtcbiAgICBpZiAocXVlcnlLZXkpIHtcbiAgICAgIGNvbnN0IHIgPSBTeW5jVHJlZS5wYXJzZVF1ZXJ5S2V5XyhxdWVyeUtleSk7XG4gICAgICBjb25zdCBxdWVyeVBhdGggPSByLnBhdGgsXG4gICAgICAgIHF1ZXJ5SWQgPSByLnF1ZXJ5SWQ7XG4gICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBQYXRoLnJlbGF0aXZlUGF0aChxdWVyeVBhdGgsIHBhdGgpO1xuICAgICAgY29uc3Qgb3AgPSBuZXcgTGlzdGVuQ29tcGxldGUoXG4gICAgICAgIE9wZXJhdGlvblNvdXJjZS5mb3JTZXJ2ZXJUYWdnZWRRdWVyeShxdWVyeUlkKSxcbiAgICAgICAgcmVsYXRpdmVQYXRoXG4gICAgICApO1xuICAgICAgcmV0dXJuIHRoaXMuYXBwbHlUYWdnZWRPcGVyYXRpb25fKHF1ZXJ5UGF0aCwgb3ApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBXZSd2ZSBhbHJlYWR5IHJlbW92ZWQgdGhlIHF1ZXJ5LiBObyBiaWcgZGVhbCwgaWdub3JlIHRoZSB1cGRhdGVcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRkIGFuIGV2ZW50IGNhbGxiYWNrIGZvciB0aGUgc3BlY2lmaWVkIHF1ZXJ5LlxuICAgKlxuICAgKiBAcGFyYW0geyFRdWVyeX0gcXVlcnlcbiAgICogQHBhcmFtIHshRXZlbnRSZWdpc3RyYXRpb259IGV2ZW50UmVnaXN0cmF0aW9uXG4gICAqIEByZXR1cm4geyFBcnJheS48IUV2ZW50Pn0gRXZlbnRzIHRvIHJhaXNlLlxuICAgKi9cbiAgYWRkRXZlbnRSZWdpc3RyYXRpb24oXG4gICAgcXVlcnk6IFF1ZXJ5LFxuICAgIGV2ZW50UmVnaXN0cmF0aW9uOiBFdmVudFJlZ2lzdHJhdGlvblxuICApOiBFdmVudFtdIHtcbiAgICBjb25zdCBwYXRoID0gcXVlcnkucGF0aDtcblxuICAgIGxldCBzZXJ2ZXJDYWNoZTogTm9kZSB8IG51bGwgPSBudWxsO1xuICAgIGxldCBmb3VuZEFuY2VzdG9yRGVmYXVsdFZpZXcgPSBmYWxzZTtcbiAgICAvLyBBbnkgY292ZXJpbmcgd3JpdGVzIHdpbGwgbmVjZXNzYXJpbHkgYmUgYXQgdGhlIHJvb3QsIHNvIHJlYWxseSBhbGwgd2UgbmVlZCB0byBmaW5kIGlzIHRoZSBzZXJ2ZXIgY2FjaGUuXG4gICAgLy8gQ29uc2lkZXIgb3B0aW1pemluZyB0aGlzIG9uY2UgdGhlcmUncyBhIGJldHRlciB1bmRlcnN0YW5kaW5nIG9mIHdoYXQgYWN0dWFsIGJlaGF2aW9yIHdpbGwgYmUuXG4gICAgdGhpcy5zeW5jUG9pbnRUcmVlXy5mb3JlYWNoT25QYXRoKHBhdGgsIGZ1bmN0aW9uKHBhdGhUb1N5bmNQb2ludCwgc3ApIHtcbiAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IFBhdGgucmVsYXRpdmVQYXRoKHBhdGhUb1N5bmNQb2ludCwgcGF0aCk7XG4gICAgICBzZXJ2ZXJDYWNoZSA9IHNlcnZlckNhY2hlIHx8IHNwLmdldENvbXBsZXRlU2VydmVyQ2FjaGUocmVsYXRpdmVQYXRoKTtcbiAgICAgIGZvdW5kQW5jZXN0b3JEZWZhdWx0VmlldyA9XG4gICAgICAgIGZvdW5kQW5jZXN0b3JEZWZhdWx0VmlldyB8fCBzcC5oYXNDb21wbGV0ZVZpZXcoKTtcbiAgICB9KTtcbiAgICBsZXQgc3luY1BvaW50ID0gdGhpcy5zeW5jUG9pbnRUcmVlXy5nZXQocGF0aCk7XG4gICAgaWYgKCFzeW5jUG9pbnQpIHtcbiAgICAgIHN5bmNQb2ludCA9IG5ldyBTeW5jUG9pbnQoKTtcbiAgICAgIHRoaXMuc3luY1BvaW50VHJlZV8gPSB0aGlzLnN5bmNQb2ludFRyZWVfLnNldChwYXRoLCBzeW5jUG9pbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3VuZEFuY2VzdG9yRGVmYXVsdFZpZXcgPVxuICAgICAgICBmb3VuZEFuY2VzdG9yRGVmYXVsdFZpZXcgfHwgc3luY1BvaW50Lmhhc0NvbXBsZXRlVmlldygpO1xuICAgICAgc2VydmVyQ2FjaGUgPSBzZXJ2ZXJDYWNoZSB8fCBzeW5jUG9pbnQuZ2V0Q29tcGxldGVTZXJ2ZXJDYWNoZShQYXRoLkVtcHR5KTtcbiAgICB9XG5cbiAgICBsZXQgc2VydmVyQ2FjaGVDb21wbGV0ZTtcbiAgICBpZiAoc2VydmVyQ2FjaGUgIT0gbnVsbCkge1xuICAgICAgc2VydmVyQ2FjaGVDb21wbGV0ZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlcnZlckNhY2hlQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgIHNlcnZlckNhY2hlID0gQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG4gICAgICBjb25zdCBzdWJ0cmVlID0gdGhpcy5zeW5jUG9pbnRUcmVlXy5zdWJ0cmVlKHBhdGgpO1xuICAgICAgc3VidHJlZS5mb3JlYWNoQ2hpbGQoZnVuY3Rpb24oY2hpbGROYW1lLCBjaGlsZFN5bmNQb2ludCkge1xuICAgICAgICBjb25zdCBjb21wbGV0ZUNhY2hlID0gY2hpbGRTeW5jUG9pbnQuZ2V0Q29tcGxldGVTZXJ2ZXJDYWNoZShQYXRoLkVtcHR5KTtcbiAgICAgICAgaWYgKGNvbXBsZXRlQ2FjaGUpIHtcbiAgICAgICAgICBzZXJ2ZXJDYWNoZSA9IHNlcnZlckNhY2hlLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKFxuICAgICAgICAgICAgY2hpbGROYW1lLFxuICAgICAgICAgICAgY29tcGxldGVDYWNoZVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHZpZXdBbHJlYWR5RXhpc3RzID0gc3luY1BvaW50LnZpZXdFeGlzdHNGb3JRdWVyeShxdWVyeSk7XG4gICAgaWYgKCF2aWV3QWxyZWFkeUV4aXN0cyAmJiAhcXVlcnkuZ2V0UXVlcnlQYXJhbXMoKS5sb2Fkc0FsbERhdGEoKSkge1xuICAgICAgLy8gV2UgbmVlZCB0byB0cmFjayBhIHRhZyBmb3IgdGhpcyBxdWVyeVxuICAgICAgY29uc3QgcXVlcnlLZXkgPSBTeW5jVHJlZS5tYWtlUXVlcnlLZXlfKHF1ZXJ5KTtcbiAgICAgIGFzc2VydChcbiAgICAgICAgIShxdWVyeUtleSBpbiB0aGlzLnF1ZXJ5VG9UYWdNYXBfKSxcbiAgICAgICAgJ1ZpZXcgZG9lcyBub3QgZXhpc3QsIGJ1dCB3ZSBoYXZlIGEgdGFnJ1xuICAgICAgKTtcbiAgICAgIGNvbnN0IHRhZyA9IFN5bmNUcmVlLmdldE5leHRRdWVyeVRhZ18oKTtcbiAgICAgIHRoaXMucXVlcnlUb1RhZ01hcF9bcXVlcnlLZXldID0gdGFnO1xuICAgICAgLy8gQ29lcmNlIHRvIHN0cmluZyB0byBhdm9pZCBzcGFyc2UgYXJyYXlzLlxuICAgICAgdGhpcy50YWdUb1F1ZXJ5TWFwX1snXycgKyB0YWddID0gcXVlcnlLZXk7XG4gICAgfVxuICAgIGNvbnN0IHdyaXRlc0NhY2hlID0gdGhpcy5wZW5kaW5nV3JpdGVUcmVlXy5jaGlsZFdyaXRlcyhwYXRoKTtcbiAgICBsZXQgZXZlbnRzID0gc3luY1BvaW50LmFkZEV2ZW50UmVnaXN0cmF0aW9uKFxuICAgICAgcXVlcnksXG4gICAgICBldmVudFJlZ2lzdHJhdGlvbixcbiAgICAgIHdyaXRlc0NhY2hlLFxuICAgICAgc2VydmVyQ2FjaGUsXG4gICAgICBzZXJ2ZXJDYWNoZUNvbXBsZXRlXG4gICAgKTtcbiAgICBpZiAoIXZpZXdBbHJlYWR5RXhpc3RzICYmICFmb3VuZEFuY2VzdG9yRGVmYXVsdFZpZXcpIHtcbiAgICAgIGNvbnN0IHZpZXcgLyoqIEB0eXBlICFWaWV3ICovID0gc3luY1BvaW50LnZpZXdGb3JRdWVyeShxdWVyeSk7XG4gICAgICBldmVudHMgPSBldmVudHMuY29uY2F0KHRoaXMuc2V0dXBMaXN0ZW5lcl8ocXVlcnksIHZpZXcpKTtcbiAgICB9XG4gICAgcmV0dXJuIGV2ZW50cztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgZXZlbnQgY2FsbGJhY2socykuXG4gICAqXG4gICAqIElmIHF1ZXJ5IGlzIHRoZSBkZWZhdWx0IHF1ZXJ5LCB3ZSdsbCBjaGVjayBhbGwgcXVlcmllcyBmb3IgdGhlIHNwZWNpZmllZCBldmVudFJlZ2lzdHJhdGlvbi5cbiAgICogSWYgZXZlbnRSZWdpc3RyYXRpb24gaXMgbnVsbCwgd2UnbGwgcmVtb3ZlIGFsbCBjYWxsYmFja3MgZm9yIHRoZSBzcGVjaWZpZWQgcXVlcnkvcXVlcmllcy5cbiAgICpcbiAgICogQHBhcmFtIHshUXVlcnl9IHF1ZXJ5XG4gICAqIEBwYXJhbSB7P0V2ZW50UmVnaXN0cmF0aW9ufSBldmVudFJlZ2lzdHJhdGlvbiBJZiBudWxsLCBhbGwgY2FsbGJhY2tzIGFyZSByZW1vdmVkLlxuICAgKiBAcGFyYW0ge0Vycm9yPX0gY2FuY2VsRXJyb3IgSWYgYSBjYW5jZWxFcnJvciBpcyBwcm92aWRlZCwgYXBwcm9wcmlhdGUgY2FuY2VsIGV2ZW50cyB3aWxsIGJlIHJldHVybmVkLlxuICAgKiBAcmV0dXJuIHshQXJyYXkuPCFFdmVudD59IENhbmNlbCBldmVudHMsIGlmIGNhbmNlbEVycm9yIHdhcyBwcm92aWRlZC5cbiAgICovXG4gIHJlbW92ZUV2ZW50UmVnaXN0cmF0aW9uKFxuICAgIHF1ZXJ5OiBRdWVyeSxcbiAgICBldmVudFJlZ2lzdHJhdGlvbjogRXZlbnRSZWdpc3RyYXRpb24gfCBudWxsLFxuICAgIGNhbmNlbEVycm9yPzogRXJyb3JcbiAgKTogRXZlbnRbXSB7XG4gICAgLy8gRmluZCB0aGUgc3luY1BvaW50IGZpcnN0LiBUaGVuIGRlYWwgd2l0aCB3aGV0aGVyIG9yIG5vdCBpdCBoYXMgbWF0Y2hpbmcgbGlzdGVuZXJzXG4gICAgY29uc3QgcGF0aCA9IHF1ZXJ5LnBhdGg7XG4gICAgY29uc3QgbWF5YmVTeW5jUG9pbnQgPSB0aGlzLnN5bmNQb2ludFRyZWVfLmdldChwYXRoKTtcbiAgICBsZXQgY2FuY2VsRXZlbnRzOiBFdmVudFtdID0gW107XG4gICAgLy8gQSByZW1vdmFsIG9uIGEgZGVmYXVsdCBxdWVyeSBhZmZlY3RzIGFsbCBxdWVyaWVzIGF0IHRoYXQgbG9jYXRpb24uIEEgcmVtb3ZhbCBvbiBhbiBpbmRleGVkIHF1ZXJ5LCBldmVuIG9uZSB3aXRob3V0XG4gICAgLy8gb3RoZXIgcXVlcnkgY29uc3RyYWludHMsIGRvZXMgKm5vdCogYWZmZWN0IGFsbCBxdWVyaWVzIGF0IHRoYXQgbG9jYXRpb24uIFNvIHRoaXMgY2hlY2sgbXVzdCBiZSBmb3IgJ2RlZmF1bHQnLCBhbmRcbiAgICAvLyBub3QgbG9hZHNBbGxEYXRhKCkuXG4gICAgaWYgKFxuICAgICAgbWF5YmVTeW5jUG9pbnQgJiZcbiAgICAgIChxdWVyeS5xdWVyeUlkZW50aWZpZXIoKSA9PT0gJ2RlZmF1bHQnIHx8XG4gICAgICAgIG1heWJlU3luY1BvaW50LnZpZXdFeGlzdHNGb3JRdWVyeShxdWVyeSkpXG4gICAgKSB7XG4gICAgICAvKipcbiAgICAgICAqIEB0eXBlIHt7cmVtb3ZlZDogIUFycmF5LjwhUXVlcnk+LCBldmVudHM6ICFBcnJheS48IUV2ZW50Pn19XG4gICAgICAgKi9cbiAgICAgIGNvbnN0IHJlbW92ZWRBbmRFdmVudHMgPSBtYXliZVN5bmNQb2ludC5yZW1vdmVFdmVudFJlZ2lzdHJhdGlvbihcbiAgICAgICAgcXVlcnksXG4gICAgICAgIGV2ZW50UmVnaXN0cmF0aW9uLFxuICAgICAgICBjYW5jZWxFcnJvclxuICAgICAgKTtcbiAgICAgIGlmIChtYXliZVN5bmNQb2ludC5pc0VtcHR5KCkpIHtcbiAgICAgICAgdGhpcy5zeW5jUG9pbnRUcmVlXyA9IHRoaXMuc3luY1BvaW50VHJlZV8ucmVtb3ZlKHBhdGgpO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVtb3ZlZCA9IHJlbW92ZWRBbmRFdmVudHMucmVtb3ZlZDtcbiAgICAgIGNhbmNlbEV2ZW50cyA9IHJlbW92ZWRBbmRFdmVudHMuZXZlbnRzO1xuICAgICAgLy8gV2UgbWF5IGhhdmUganVzdCByZW1vdmVkIG9uZSBvZiBtYW55IGxpc3RlbmVycyBhbmQgY2FuIHNob3J0LWNpcmN1aXQgdGhpcyB3aG9sZSBwcm9jZXNzXG4gICAgICAvLyBXZSBtYXkgYWxzbyBub3QgaGF2ZSByZW1vdmVkIGEgZGVmYXVsdCBsaXN0ZW5lciwgaW4gd2hpY2ggY2FzZSBhbGwgb2YgdGhlIGRlc2NlbmRhbnQgbGlzdGVuZXJzIHNob3VsZCBhbHJlYWR5IGJlXG4gICAgICAvLyBwcm9wZXJseSBzZXQgdXAuXG4gICAgICAvL1xuICAgICAgLy8gU2luY2UgaW5kZXhlZCBxdWVyaWVzIGNhbiBzaGFkb3cgaWYgdGhleSBkb24ndCBoYXZlIG90aGVyIHF1ZXJ5IGNvbnN0cmFpbnRzLCBjaGVjayBmb3IgbG9hZHNBbGxEYXRhKCksIGluc3RlYWQgb2ZcbiAgICAgIC8vIHF1ZXJ5SWQgPT09ICdkZWZhdWx0J1xuICAgICAgY29uc3QgcmVtb3ZpbmdEZWZhdWx0ID1cbiAgICAgICAgLTEgIT09XG4gICAgICAgIHJlbW92ZWQuZmluZEluZGV4KGZ1bmN0aW9uKHF1ZXJ5KSB7XG4gICAgICAgICAgcmV0dXJuIHF1ZXJ5LmdldFF1ZXJ5UGFyYW1zKCkubG9hZHNBbGxEYXRhKCk7XG4gICAgICAgIH0pO1xuICAgICAgY29uc3QgY292ZXJlZCA9IHRoaXMuc3luY1BvaW50VHJlZV8uZmluZE9uUGF0aChwYXRoLCBmdW5jdGlvbihcbiAgICAgICAgcmVsYXRpdmVQYXRoLFxuICAgICAgICBwYXJlbnRTeW5jUG9pbnRcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gcGFyZW50U3luY1BvaW50Lmhhc0NvbXBsZXRlVmlldygpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZW1vdmluZ0RlZmF1bHQgJiYgIWNvdmVyZWQpIHtcbiAgICAgICAgY29uc3Qgc3VidHJlZSA9IHRoaXMuc3luY1BvaW50VHJlZV8uc3VidHJlZShwYXRoKTtcbiAgICAgICAgLy8gVGhlcmUgYXJlIHBvdGVudGlhbGx5IGNoaWxkIGxpc3RlbmVycy4gRGV0ZXJtaW5lIHdoYXQgaWYgYW55IGxpc3RlbnMgd2UgbmVlZCB0byBzZW5kIGJlZm9yZSBleGVjdXRpbmcgdGhlXG4gICAgICAgIC8vIHJlbW92YWxcbiAgICAgICAgaWYgKCFzdWJ0cmVlLmlzRW1wdHkoKSkge1xuICAgICAgICAgIC8vIFdlIG5lZWQgdG8gZm9sZCBvdmVyIG91ciBzdWJ0cmVlIGFuZCBjb2xsZWN0IHRoZSBsaXN0ZW5lcnMgdG8gc2VuZFxuICAgICAgICAgIGNvbnN0IG5ld1ZpZXdzID0gdGhpcy5jb2xsZWN0RGlzdGluY3RWaWV3c0ZvclN1YlRyZWVfKHN1YnRyZWUpO1xuXG4gICAgICAgICAgLy8gT2ssIHdlJ3ZlIGNvbGxlY3RlZCBhbGwgdGhlIGxpc3RlbnMgd2UgbmVlZC4gU2V0IHRoZW0gdXAuXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdWaWV3cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgdmlldyA9IG5ld1ZpZXdzW2ldLFxuICAgICAgICAgICAgICBuZXdRdWVyeSA9IHZpZXcuZ2V0UXVlcnkoKTtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVyID0gdGhpcy5jcmVhdGVMaXN0ZW5lckZvclZpZXdfKHZpZXcpO1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5Qcm92aWRlcl8uc3RhcnRMaXN0ZW5pbmcoXG4gICAgICAgICAgICAgIFN5bmNUcmVlLnF1ZXJ5Rm9yTGlzdGVuaW5nXyhuZXdRdWVyeSksXG4gICAgICAgICAgICAgIHRoaXMudGFnRm9yUXVlcnlfKG5ld1F1ZXJ5KSxcbiAgICAgICAgICAgICAgbGlzdGVuZXIuaGFzaEZuLFxuICAgICAgICAgICAgICBsaXN0ZW5lci5vbkNvbXBsZXRlXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBUaGVyZSdzIG5vdGhpbmcgYmVsb3cgdXMsIHNvIG5vdGhpbmcgd2UgbmVlZCB0byBzdGFydCBsaXN0ZW5pbmcgb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gSWYgd2UgcmVtb3ZlZCBhbnl0aGluZyBhbmQgd2UncmUgbm90IGNvdmVyZWQgYnkgYSBoaWdoZXIgdXAgbGlzdGVuLCB3ZSBuZWVkIHRvIHN0b3AgbGlzdGVuaW5nIG9uIHRoaXMgcXVlcnlcbiAgICAgIC8vIFRoZSBhYm92ZSBibG9jayBoYXMgdXMgY292ZXJlZCBpbiB0ZXJtcyBvZiBtYWtpbmcgc3VyZSB3ZSdyZSBzZXQgdXAgb24gbGlzdGVucyBsb3dlciBpbiB0aGUgdHJlZS5cbiAgICAgIC8vIEFsc28sIG5vdGUgdGhhdCBpZiB3ZSBoYXZlIGEgY2FuY2VsRXJyb3IsIGl0J3MgYWxyZWFkeSBiZWVuIHJlbW92ZWQgYXQgdGhlIHByb3ZpZGVyIGxldmVsLlxuICAgICAgaWYgKCFjb3ZlcmVkICYmIHJlbW92ZWQubGVuZ3RoID4gMCAmJiAhY2FuY2VsRXJyb3IpIHtcbiAgICAgICAgLy8gSWYgd2UgcmVtb3ZlZCBhIGRlZmF1bHQsIHRoZW4gd2Ugd2VyZW4ndCBsaXN0ZW5pbmcgb24gYW55IG9mIHRoZSBvdGhlciBxdWVyaWVzIGhlcmUuIEp1c3QgY2FuY2VsIHRoZSBvbmVcbiAgICAgICAgLy8gZGVmYXVsdC4gT3RoZXJ3aXNlLCB3ZSBuZWVkIHRvIGl0ZXJhdGUgdGhyb3VnaCBhbmQgY2FuY2VsIGVhY2ggaW5kaXZpZHVhbCBxdWVyeVxuICAgICAgICBpZiAocmVtb3ZpbmdEZWZhdWx0KSB7XG4gICAgICAgICAgLy8gV2UgZG9uJ3QgdGFnIGRlZmF1bHQgbGlzdGVuZXJzXG4gICAgICAgICAgY29uc3QgZGVmYXVsdFRhZzogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gICAgICAgICAgdGhpcy5saXN0ZW5Qcm92aWRlcl8uc3RvcExpc3RlbmluZyhcbiAgICAgICAgICAgIFN5bmNUcmVlLnF1ZXJ5Rm9yTGlzdGVuaW5nXyhxdWVyeSksXG4gICAgICAgICAgICBkZWZhdWx0VGFnXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZW1vdmVkLmZvckVhY2goKHF1ZXJ5VG9SZW1vdmU6IFF1ZXJ5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YWdUb1JlbW92ZSA9IHRoaXMucXVlcnlUb1RhZ01hcF9bXG4gICAgICAgICAgICAgIFN5bmNUcmVlLm1ha2VRdWVyeUtleV8ocXVlcnlUb1JlbW92ZSlcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICB0aGlzLmxpc3RlblByb3ZpZGVyXy5zdG9wTGlzdGVuaW5nKFxuICAgICAgICAgICAgICBTeW5jVHJlZS5xdWVyeUZvckxpc3RlbmluZ18ocXVlcnlUb1JlbW92ZSksXG4gICAgICAgICAgICAgIHRhZ1RvUmVtb3ZlXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBOb3csIGNsZWFyIGFsbCBvZiB0aGUgdGFncyB3ZSdyZSB0cmFja2luZyBmb3IgdGhlIHJlbW92ZWQgbGlzdGVuc1xuICAgICAgdGhpcy5yZW1vdmVUYWdzXyhyZW1vdmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm8tb3AsIHRoaXMgbGlzdGVuZXIgbXVzdCd2ZSBiZWVuIGFscmVhZHkgcmVtb3ZlZFxuICAgIH1cbiAgICByZXR1cm4gY2FuY2VsRXZlbnRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjb21wbGV0ZSBjYWNoZSwgaWYgd2UgaGF2ZSBvbmUsIG9mIHRoZSBkYXRhIGF0IGEgcGFydGljdWxhciBwYXRoLiBUaGUgbG9jYXRpb24gbXVzdCBoYXZlIGEgbGlzdGVuZXIgYWJvdmVcbiAgICogaXQsIGJ1dCBhcyB0aGlzIGlzIG9ubHkgdXNlZCBieSB0cmFuc2FjdGlvbiBjb2RlLCB0aGF0IHNob3VsZCBhbHdheXMgYmUgdGhlIGNhc2UgYW55d2F5cy5cbiAgICpcbiAgICogTm90ZTogdGhpcyBtZXRob2Qgd2lsbCAqaW5jbHVkZSogaGlkZGVuIHdyaXRlcyBmcm9tIHRyYW5zYWN0aW9uIHdpdGggYXBwbHlMb2NhbGx5IHNldCB0byBmYWxzZS5cbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aCBUaGUgcGF0aCB0byB0aGUgZGF0YSB3ZSB3YW50XG4gICAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj49fSB3cml0ZUlkc1RvRXhjbHVkZSBBIHNwZWNpZmljIHNldCB0byBiZSBleGNsdWRlZFxuICAgKiBAcmV0dXJuIHs/Tm9kZX1cbiAgICovXG4gIGNhbGNDb21wbGV0ZUV2ZW50Q2FjaGUoXG4gICAgcGF0aDogUGF0aCxcbiAgICB3cml0ZUlkc1RvRXhjbHVkZT86IG51bWJlcltdXG4gICk6IE5vZGUgfCBudWxsIHtcbiAgICBjb25zdCBpbmNsdWRlSGlkZGVuU2V0cyA9IHRydWU7XG4gICAgY29uc3Qgd3JpdGVUcmVlID0gdGhpcy5wZW5kaW5nV3JpdGVUcmVlXztcbiAgICBjb25zdCBzZXJ2ZXJDYWNoZSA9IHRoaXMuc3luY1BvaW50VHJlZV8uZmluZE9uUGF0aChwYXRoLCBmdW5jdGlvbihcbiAgICAgIHBhdGhTb0ZhcixcbiAgICAgIHN5bmNQb2ludFxuICAgICkge1xuICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gUGF0aC5yZWxhdGl2ZVBhdGgocGF0aFNvRmFyLCBwYXRoKTtcbiAgICAgIGNvbnN0IHNlcnZlckNhY2hlID0gc3luY1BvaW50LmdldENvbXBsZXRlU2VydmVyQ2FjaGUocmVsYXRpdmVQYXRoKTtcbiAgICAgIGlmIChzZXJ2ZXJDYWNoZSkge1xuICAgICAgICByZXR1cm4gc2VydmVyQ2FjaGU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHdyaXRlVHJlZS5jYWxjQ29tcGxldGVFdmVudENhY2hlKFxuICAgICAgcGF0aCxcbiAgICAgIHNlcnZlckNhY2hlLFxuICAgICAgd3JpdGVJZHNUb0V4Y2x1ZGUsXG4gICAgICBpbmNsdWRlSGlkZGVuU2V0c1xuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBjb2xsYXBzZXMgbXVsdGlwbGUgdW5maWx0ZXJlZCB2aWV3cyBpbnRvIGEgc2luZ2xlIHZpZXcsIHNpbmNlIHdlIG9ubHkgbmVlZCBhIHNpbmdsZVxuICAgKiBsaXN0ZW5lciBmb3IgdGhlbS5cbiAgICpcbiAgICogQHBhcmFtIHshSW1tdXRhYmxlVHJlZS48IVN5bmNQb2ludD59IHN1YnRyZWVcbiAgICogQHJldHVybiB7IUFycmF5LjwhVmlldz59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGNvbGxlY3REaXN0aW5jdFZpZXdzRm9yU3ViVHJlZV8oXG4gICAgc3VidHJlZTogSW1tdXRhYmxlVHJlZTxTeW5jUG9pbnQ+XG4gICk6IFZpZXdbXSB7XG4gICAgcmV0dXJuIHN1YnRyZWUuZm9sZDxWaWV3W10+KFxuICAgICAgKHJlbGF0aXZlUGF0aCwgbWF5YmVDaGlsZFN5bmNQb2ludCwgY2hpbGRNYXApID0+IHtcbiAgICAgICAgaWYgKG1heWJlQ2hpbGRTeW5jUG9pbnQgJiYgbWF5YmVDaGlsZFN5bmNQb2ludC5oYXNDb21wbGV0ZVZpZXcoKSkge1xuICAgICAgICAgIGNvbnN0IGNvbXBsZXRlVmlldyA9IG1heWJlQ2hpbGRTeW5jUG9pbnQuZ2V0Q29tcGxldGVWaWV3KCk7XG4gICAgICAgICAgcmV0dXJuIFtjb21wbGV0ZVZpZXddO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE5vIGNvbXBsZXRlIHZpZXcgaGVyZSwgZmxhdHRlbiBhbnkgZGVlcGVyIGxpc3RlbnMgaW50byBhbiBhcnJheVxuICAgICAgICAgIGxldCB2aWV3czogVmlld1tdID0gW107XG4gICAgICAgICAgaWYgKG1heWJlQ2hpbGRTeW5jUG9pbnQpIHtcbiAgICAgICAgICAgIHZpZXdzID0gbWF5YmVDaGlsZFN5bmNQb2ludC5nZXRRdWVyeVZpZXdzKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvckVhY2goY2hpbGRNYXAsIGZ1bmN0aW9uKGtleTogc3RyaW5nLCBjaGlsZFZpZXdzOiBWaWV3W10pIHtcbiAgICAgICAgICAgIHZpZXdzID0gdmlld3MuY29uY2F0KGNoaWxkVmlld3MpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiB2aWV3cztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshQXJyYXkuPCFRdWVyeT59IHF1ZXJpZXNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgcmVtb3ZlVGFnc18ocXVlcmllczogUXVlcnlbXSkge1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgcXVlcmllcy5sZW5ndGg7ICsraikge1xuICAgICAgY29uc3QgcmVtb3ZlZFF1ZXJ5ID0gcXVlcmllc1tqXTtcbiAgICAgIGlmICghcmVtb3ZlZFF1ZXJ5LmdldFF1ZXJ5UGFyYW1zKCkubG9hZHNBbGxEYXRhKCkpIHtcbiAgICAgICAgLy8gV2Ugc2hvdWxkIGhhdmUgYSB0YWcgZm9yIHRoaXNcbiAgICAgICAgY29uc3QgcmVtb3ZlZFF1ZXJ5S2V5ID0gU3luY1RyZWUubWFrZVF1ZXJ5S2V5XyhyZW1vdmVkUXVlcnkpO1xuICAgICAgICBjb25zdCByZW1vdmVkUXVlcnlUYWcgPSB0aGlzLnF1ZXJ5VG9UYWdNYXBfW3JlbW92ZWRRdWVyeUtleV07XG4gICAgICAgIGRlbGV0ZSB0aGlzLnF1ZXJ5VG9UYWdNYXBfW3JlbW92ZWRRdWVyeUtleV07XG4gICAgICAgIGRlbGV0ZSB0aGlzLnRhZ1RvUXVlcnlNYXBfWydfJyArIHJlbW92ZWRRdWVyeVRhZ107XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZXMgYSBxdWVyeSB0byBhIHF1ZXJ5IHdlIHNlbmQgdGhlIHNlcnZlciBmb3IgbGlzdGVuaW5nXG4gICAqIEBwYXJhbSB7IVF1ZXJ5fSBxdWVyeVxuICAgKiBAcmV0dXJuIHshUXVlcnl9IFRoZSBub3JtYWxpemVkIHF1ZXJ5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBxdWVyeUZvckxpc3RlbmluZ18ocXVlcnk6IFF1ZXJ5KTogUXVlcnkge1xuICAgIGlmIChcbiAgICAgIHF1ZXJ5LmdldFF1ZXJ5UGFyYW1zKCkubG9hZHNBbGxEYXRhKCkgJiZcbiAgICAgICFxdWVyeS5nZXRRdWVyeVBhcmFtcygpLmlzRGVmYXVsdCgpXG4gICAgKSB7XG4gICAgICAvLyBXZSB0cmVhdCBxdWVyaWVzIHRoYXQgbG9hZCBhbGwgZGF0YSBhcyBkZWZhdWx0IHF1ZXJpZXNcbiAgICAgIC8vIENhc3QgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgcmVmKCkgdGVjaG5pY2FsbHkgcmV0dXJucyBGaXJlYmFzZSB3aGljaCBpcyBhY3R1YWxseSBmYi5hcGkuRmlyZWJhc2Ugd2hpY2ggaW5oZXJpdHNcbiAgICAgIC8vIGZyb20gUXVlcnlcbiAgICAgIHJldHVybiAvKiogQHR5cGUgeyFRdWVyeX0gKi8gcXVlcnkuZ2V0UmVmKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBxdWVyeTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRm9yIGEgZ2l2ZW4gbmV3IGxpc3RlbiwgbWFuYWdlIHRoZSBkZS1kdXBsaWNhdGlvbiBvZiBvdXRzdGFuZGluZyBzdWJzY3JpcHRpb25zLlxuICAgKlxuICAgKiBAcGFyYW0geyFRdWVyeX0gcXVlcnlcbiAgICogQHBhcmFtIHshVmlld30gdmlld1xuICAgKiBAcmV0dXJuIHshQXJyYXkuPCFFdmVudD59IFRoaXMgbWV0aG9kIGNhbiByZXR1cm4gZXZlbnRzIHRvIHN1cHBvcnQgc3luY2hyb25vdXMgZGF0YSBzb3VyY2VzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHNldHVwTGlzdGVuZXJfKHF1ZXJ5OiBRdWVyeSwgdmlldzogVmlldyk6IEV2ZW50W10ge1xuICAgIGNvbnN0IHBhdGggPSBxdWVyeS5wYXRoO1xuICAgIGNvbnN0IHRhZyA9IHRoaXMudGFnRm9yUXVlcnlfKHF1ZXJ5KTtcbiAgICBjb25zdCBsaXN0ZW5lciA9IHRoaXMuY3JlYXRlTGlzdGVuZXJGb3JWaWV3Xyh2aWV3KTtcblxuICAgIGNvbnN0IGV2ZW50cyA9IHRoaXMubGlzdGVuUHJvdmlkZXJfLnN0YXJ0TGlzdGVuaW5nKFxuICAgICAgU3luY1RyZWUucXVlcnlGb3JMaXN0ZW5pbmdfKHF1ZXJ5KSxcbiAgICAgIHRhZyxcbiAgICAgIGxpc3RlbmVyLmhhc2hGbixcbiAgICAgIGxpc3RlbmVyLm9uQ29tcGxldGVcbiAgICApO1xuXG4gICAgY29uc3Qgc3VidHJlZSA9IHRoaXMuc3luY1BvaW50VHJlZV8uc3VidHJlZShwYXRoKTtcbiAgICAvLyBUaGUgcm9vdCBvZiB0aGlzIHN1YnRyZWUgaGFzIG91ciBxdWVyeS4gV2UncmUgaGVyZSBiZWNhdXNlIHdlIGRlZmluaXRlbHkgbmVlZCB0byBzZW5kIGEgbGlzdGVuIGZvciB0aGF0LCBidXQgd2VcbiAgICAvLyBtYXkgbmVlZCB0byBzaGFkb3cgb3RoZXIgbGlzdGVucyBhcyB3ZWxsLlxuICAgIGlmICh0YWcpIHtcbiAgICAgIGFzc2VydChcbiAgICAgICAgIXN1YnRyZWUudmFsdWUuaGFzQ29tcGxldGVWaWV3KCksXG4gICAgICAgIFwiSWYgd2UncmUgYWRkaW5nIGEgcXVlcnksIGl0IHNob3VsZG4ndCBiZSBzaGFkb3dlZFwiXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTaGFkb3cgZXZlcnl0aGluZyBhdCBvciBiZWxvdyB0aGlzIGxvY2F0aW9uLCB0aGlzIGlzIGEgZGVmYXVsdCBsaXN0ZW5lci5cbiAgICAgIGNvbnN0IHF1ZXJpZXNUb1N0b3AgPSBzdWJ0cmVlLmZvbGQ8UXVlcnlbXT4oZnVuY3Rpb24oXG4gICAgICAgIHJlbGF0aXZlUGF0aCxcbiAgICAgICAgbWF5YmVDaGlsZFN5bmNQb2ludCxcbiAgICAgICAgY2hpbGRNYXBcbiAgICAgICkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIXJlbGF0aXZlUGF0aC5pc0VtcHR5KCkgJiZcbiAgICAgICAgICBtYXliZUNoaWxkU3luY1BvaW50ICYmXG4gICAgICAgICAgbWF5YmVDaGlsZFN5bmNQb2ludC5oYXNDb21wbGV0ZVZpZXcoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gW21heWJlQ2hpbGRTeW5jUG9pbnQuZ2V0Q29tcGxldGVWaWV3KCkuZ2V0UXVlcnkoKV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTm8gZGVmYXVsdCBsaXN0ZW5lciBoZXJlLCBmbGF0dGVuIGFueSBkZWVwZXIgcXVlcmllcyBpbnRvIGFuIGFycmF5XG4gICAgICAgICAgbGV0IHF1ZXJpZXM6IFF1ZXJ5W10gPSBbXTtcbiAgICAgICAgICBpZiAobWF5YmVDaGlsZFN5bmNQb2ludCkge1xuICAgICAgICAgICAgcXVlcmllcyA9IHF1ZXJpZXMuY29uY2F0KFxuICAgICAgICAgICAgICBtYXliZUNoaWxkU3luY1BvaW50LmdldFF1ZXJ5Vmlld3MoKS5tYXAodmlldyA9PiB2aWV3LmdldFF1ZXJ5KCkpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3JFYWNoKGNoaWxkTWFwLCBmdW5jdGlvbihrZXk6IHN0cmluZywgY2hpbGRRdWVyaWVzOiBRdWVyeVtdKSB7XG4gICAgICAgICAgICBxdWVyaWVzID0gcXVlcmllcy5jb25jYXQoY2hpbGRRdWVyaWVzKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gcXVlcmllcztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXJpZXNUb1N0b3AubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY29uc3QgcXVlcnlUb1N0b3AgPSBxdWVyaWVzVG9TdG9wW2ldO1xuICAgICAgICB0aGlzLmxpc3RlblByb3ZpZGVyXy5zdG9wTGlzdGVuaW5nKFxuICAgICAgICAgIFN5bmNUcmVlLnF1ZXJ5Rm9yTGlzdGVuaW5nXyhxdWVyeVRvU3RvcCksXG4gICAgICAgICAgdGhpcy50YWdGb3JRdWVyeV8ocXVlcnlUb1N0b3ApXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBldmVudHM7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHshVmlld30gdmlld1xuICAgKiBAcmV0dXJuIHt7aGFzaEZuOiBmdW5jdGlvbigpLCBvbkNvbXBsZXRlOiBmdW5jdGlvbighc3RyaW5nLCAqKX19XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZUxpc3RlbmVyRm9yVmlld18oXG4gICAgdmlldzogVmlld1xuICApOiB7IGhhc2hGbigpOiBzdHJpbmc7IG9uQ29tcGxldGUoYTogc3RyaW5nLCBiPzogYW55KTogRXZlbnRbXSB9IHtcbiAgICBjb25zdCBxdWVyeSA9IHZpZXcuZ2V0UXVlcnkoKTtcbiAgICBjb25zdCB0YWcgPSB0aGlzLnRhZ0ZvclF1ZXJ5XyhxdWVyeSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaGFzaEZuOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhY2hlID0gdmlldy5nZXRTZXJ2ZXJDYWNoZSgpIHx8IENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuICAgICAgICByZXR1cm4gY2FjaGUuaGFzaCgpO1xuICAgICAgfSxcbiAgICAgIG9uQ29tcGxldGU6IChzdGF0dXM6IHN0cmluZyk6IEV2ZW50W10gPT4ge1xuICAgICAgICBpZiAoc3RhdHVzID09PSAnb2snKSB7XG4gICAgICAgICAgaWYgKHRhZykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlUYWdnZWRMaXN0ZW5Db21wbGV0ZShxdWVyeS5wYXRoLCB0YWcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcHBseUxpc3RlbkNvbXBsZXRlKHF1ZXJ5LnBhdGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiBhIGxpc3RlbiBmYWlsZWQsIGtpbGwgYWxsIG9mIHRoZSBsaXN0ZW5lcnMgaGVyZSwgbm90IGp1c3QgdGhlIG9uZSB0aGF0IHRyaWdnZXJlZCB0aGUgZXJyb3IuXG4gICAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgbWF5IG5lZWQgdG8gYmUgc2NvcGVkIHRvIGp1c3QgdGhpcyBsaXN0ZW5lciBpZiB3ZSBjaGFuZ2UgcGVybWlzc2lvbnMgb24gZmlsdGVyZWQgY2hpbGRyZW5cbiAgICAgICAgICBjb25zdCBlcnJvciA9IGVycm9yRm9yU2VydmVyQ29kZShzdGF0dXMsIHF1ZXJ5KTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVFdmVudFJlZ2lzdHJhdGlvbihcbiAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgLypldmVudFJlZ2lzdHJhdGlvbiovIG51bGwsXG4gICAgICAgICAgICBlcnJvclxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgcXVlcnksIGNvbXB1dGVzIGEgXCJxdWVyeUtleVwiIHN1aXRhYmxlIGZvciB1c2UgaW4gb3VyIHF1ZXJ5VG9UYWdNYXBfLlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0geyFRdWVyeX0gcXVlcnlcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgbWFrZVF1ZXJ5S2V5XyhxdWVyeTogUXVlcnkpOiBzdHJpbmcge1xuICAgIHJldHVybiBxdWVyeS5wYXRoLnRvU3RyaW5nKCkgKyAnJCcgKyBxdWVyeS5xdWVyeUlkZW50aWZpZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHaXZlbiBhIHF1ZXJ5S2V5IChjcmVhdGVkIGJ5IG1ha2VRdWVyeUtleSksIHBhcnNlIGl0IGJhY2sgaW50byBhIHBhdGggYW5kIHF1ZXJ5SWQuXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7IXN0cmluZ30gcXVlcnlLZXlcbiAgICogQHJldHVybiB7e3F1ZXJ5SWQ6ICFzdHJpbmcsIHBhdGg6ICFQYXRofX1cbiAgICovXG4gIHByaXZhdGUgc3RhdGljIHBhcnNlUXVlcnlLZXlfKFxuICAgIHF1ZXJ5S2V5OiBzdHJpbmdcbiAgKTogeyBxdWVyeUlkOiBzdHJpbmc7IHBhdGg6IFBhdGggfSB7XG4gICAgY29uc3Qgc3BsaXRJbmRleCA9IHF1ZXJ5S2V5LmluZGV4T2YoJyQnKTtcbiAgICBhc3NlcnQoXG4gICAgICBzcGxpdEluZGV4ICE9PSAtMSAmJiBzcGxpdEluZGV4IDwgcXVlcnlLZXkubGVuZ3RoIC0gMSxcbiAgICAgICdCYWQgcXVlcnlLZXkuJ1xuICAgICk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHF1ZXJ5SWQ6IHF1ZXJ5S2V5LnN1YnN0cihzcGxpdEluZGV4ICsgMSksXG4gICAgICBwYXRoOiBuZXcgUGF0aChxdWVyeUtleS5zdWJzdHIoMCwgc3BsaXRJbmRleCkpXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHF1ZXJ5IGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gdGFnLCBpZiB3ZSBoYXZlIG9uZVxuICAgKiBAcGFyYW0geyFudW1iZXJ9IHRhZ1xuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBxdWVyeUtleUZvclRhZ18odGFnOiBudW1iZXIpOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy50YWdUb1F1ZXJ5TWFwX1snXycgKyB0YWddO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgdGFnIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gcXVlcnkuXG4gICAqIEBwYXJhbSB7IVF1ZXJ5fSBxdWVyeVxuICAgKiBAcmV0dXJuIHs/bnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSB0YWdGb3JRdWVyeV8ocXVlcnk6IFF1ZXJ5KTogbnVtYmVyIHwgbnVsbCB7XG4gICAgY29uc3QgcXVlcnlLZXkgPSBTeW5jVHJlZS5tYWtlUXVlcnlLZXlfKHF1ZXJ5KTtcbiAgICByZXR1cm4gc2FmZUdldCh0aGlzLnF1ZXJ5VG9UYWdNYXBfLCBxdWVyeUtleSk7XG4gIH1cblxuICAvKipcbiAgICogU3RhdGljIHRyYWNrZXIgZm9yIG5leHQgcXVlcnkgdGFnLlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgbmV4dFF1ZXJ5VGFnXyA9IDE7XG5cbiAgLyoqXG4gICAqIFN0YXRpYyBhY2Nlc3NvciBmb3IgcXVlcnkgdGFncy5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0TmV4dFF1ZXJ5VGFnXygpOiBudW1iZXIge1xuICAgIHJldHVybiBTeW5jVHJlZS5uZXh0UXVlcnlUYWdfKys7XG4gIH1cblxuICAvKipcbiAgICogQSBoZWxwZXIgbWV0aG9kIHRvIGFwcGx5IHRhZ2dlZCBvcGVyYXRpb25zXG4gICAqXG4gICAqIEBwYXJhbSB7IVBhdGh9IHF1ZXJ5UGF0aFxuICAgKiBAcGFyYW0geyFPcGVyYXRpb259IG9wZXJhdGlvblxuICAgKiBAcmV0dXJuIHshQXJyYXkuPCFFdmVudD59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGFwcGx5VGFnZ2VkT3BlcmF0aW9uXyhcbiAgICBxdWVyeVBhdGg6IFBhdGgsXG4gICAgb3BlcmF0aW9uOiBPcGVyYXRpb25cbiAgKTogRXZlbnRbXSB7XG4gICAgY29uc3Qgc3luY1BvaW50ID0gdGhpcy5zeW5jUG9pbnRUcmVlXy5nZXQocXVlcnlQYXRoKTtcbiAgICBhc3NlcnQoc3luY1BvaW50LCBcIk1pc3Npbmcgc3luYyBwb2ludCBmb3IgcXVlcnkgdGFnIHRoYXQgd2UncmUgdHJhY2tpbmdcIik7XG4gICAgY29uc3Qgd3JpdGVzQ2FjaGUgPSB0aGlzLnBlbmRpbmdXcml0ZVRyZWVfLmNoaWxkV3JpdGVzKHF1ZXJ5UGF0aCk7XG4gICAgcmV0dXJuIHN5bmNQb2ludC5hcHBseU9wZXJhdGlvbihcbiAgICAgIG9wZXJhdGlvbixcbiAgICAgIHdyaXRlc0NhY2hlLFxuICAgICAgLypzZXJ2ZXJDYWNoZT0qLyBudWxsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGhlbHBlciBtZXRob2QgdGhhdCB2aXNpdHMgYWxsIGRlc2NlbmRhbnQgYW5kIGFuY2VzdG9yIFN5bmNQb2ludHMsIGFwcGx5aW5nIHRoZSBvcGVyYXRpb24uXG4gICAqXG4gICAqIE5PVEVTOlxuICAgKiAtIERlc2NlbmRhbnQgU3luY1BvaW50cyB3aWxsIGJlIHZpc2l0ZWQgZmlyc3QgKHNpbmNlIHdlIHJhaXNlIGV2ZW50cyBkZXB0aC1maXJzdCkuXG5cbiAgICogLSBXZSBjYWxsIGFwcGx5T3BlcmF0aW9uKCkgb24gZWFjaCBTeW5jUG9pbnQgcGFzc2luZyB0aHJlZSB0aGluZ3M6XG4gICAqICAgMS4gQSB2ZXJzaW9uIG9mIHRoZSBPcGVyYXRpb24gdGhhdCBoYXMgYmVlbiBtYWRlIHJlbGF0aXZlIHRvIHRoZSBTeW5jUG9pbnQgbG9jYXRpb24uXG4gICAqICAgMi4gQSBXcml0ZVRyZWVSZWYgb2YgYW55IHdyaXRlcyB3ZSBoYXZlIGNhY2hlZCBhdCB0aGUgU3luY1BvaW50IGxvY2F0aW9uLlxuICAgKiAgIDMuIEEgc25hcHNob3QgTm9kZSB3aXRoIGNhY2hlZCBzZXJ2ZXIgZGF0YSwgaWYgd2UgaGF2ZSBpdC5cblxuICAgKiAtIFdlIGNvbmNhdGVuYXRlIGFsbCBvZiB0aGUgZXZlbnRzIHJldHVybmVkIGJ5IGVhY2ggU3luY1BvaW50IGFuZCByZXR1cm4gdGhlIHJlc3VsdC5cbiAgICpcbiAgICogQHBhcmFtIHshT3BlcmF0aW9ufSBvcGVyYXRpb25cbiAgICogQHJldHVybiB7IUFycmF5LjwhRXZlbnQ+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBhcHBseU9wZXJhdGlvblRvU3luY1BvaW50c18ob3BlcmF0aW9uOiBPcGVyYXRpb24pOiBFdmVudFtdIHtcbiAgICByZXR1cm4gdGhpcy5hcHBseU9wZXJhdGlvbkhlbHBlcl8oXG4gICAgICBvcGVyYXRpb24sXG4gICAgICB0aGlzLnN5bmNQb2ludFRyZWVfLFxuICAgICAgLypzZXJ2ZXJDYWNoZT0qLyBudWxsLFxuICAgICAgdGhpcy5wZW5kaW5nV3JpdGVUcmVlXy5jaGlsZFdyaXRlcyhQYXRoLkVtcHR5KVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmVjdXJzaXZlIGhlbHBlciBmb3IgYXBwbHlPcGVyYXRpb25Ub1N5bmNQb2ludHNfXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7IU9wZXJhdGlvbn0gb3BlcmF0aW9uXG4gICAqIEBwYXJhbSB7SW1tdXRhYmxlVHJlZS48IVN5bmNQb2ludD59IHN5bmNQb2ludFRyZWVcbiAgICogQHBhcmFtIHs/Tm9kZX0gc2VydmVyQ2FjaGVcbiAgICogQHBhcmFtIHshV3JpdGVUcmVlUmVmfSB3cml0ZXNDYWNoZVxuICAgKiBAcmV0dXJuIHshQXJyYXkuPCFFdmVudD59XG4gICAqL1xuICBwcml2YXRlIGFwcGx5T3BlcmF0aW9uSGVscGVyXyhcbiAgICBvcGVyYXRpb246IE9wZXJhdGlvbixcbiAgICBzeW5jUG9pbnRUcmVlOiBJbW11dGFibGVUcmVlPFN5bmNQb2ludD4sXG4gICAgc2VydmVyQ2FjaGU6IE5vZGUgfCBudWxsLFxuICAgIHdyaXRlc0NhY2hlOiBXcml0ZVRyZWVSZWZcbiAgKTogRXZlbnRbXSB7XG4gICAgaWYgKG9wZXJhdGlvbi5wYXRoLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIHRoaXMuYXBwbHlPcGVyYXRpb25EZXNjZW5kYW50c0hlbHBlcl8oXG4gICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgc3luY1BvaW50VHJlZSxcbiAgICAgICAgc2VydmVyQ2FjaGUsXG4gICAgICAgIHdyaXRlc0NhY2hlXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzeW5jUG9pbnQgPSBzeW5jUG9pbnRUcmVlLmdldChQYXRoLkVtcHR5KTtcblxuICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBjYWNoZWQgc2VydmVyIGRhdGEsIHNlZSBpZiB3ZSBjYW4gZ2V0IGl0IGZyb20gdGhpcyBTeW5jUG9pbnQuXG4gICAgICBpZiAoc2VydmVyQ2FjaGUgPT0gbnVsbCAmJiBzeW5jUG9pbnQgIT0gbnVsbCkge1xuICAgICAgICBzZXJ2ZXJDYWNoZSA9IHN5bmNQb2ludC5nZXRDb21wbGV0ZVNlcnZlckNhY2hlKFBhdGguRW1wdHkpO1xuICAgICAgfVxuXG4gICAgICBsZXQgZXZlbnRzOiBFdmVudFtdID0gW107XG4gICAgICBjb25zdCBjaGlsZE5hbWUgPSBvcGVyYXRpb24ucGF0aC5nZXRGcm9udCgpO1xuICAgICAgY29uc3QgY2hpbGRPcGVyYXRpb24gPSBvcGVyYXRpb24ub3BlcmF0aW9uRm9yQ2hpbGQoY2hpbGROYW1lKTtcbiAgICAgIGNvbnN0IGNoaWxkVHJlZSA9IHN5bmNQb2ludFRyZWUuY2hpbGRyZW4uZ2V0KGNoaWxkTmFtZSk7XG4gICAgICBpZiAoY2hpbGRUcmVlICYmIGNoaWxkT3BlcmF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkU2VydmVyQ2FjaGUgPSBzZXJ2ZXJDYWNoZVxuICAgICAgICAgID8gc2VydmVyQ2FjaGUuZ2V0SW1tZWRpYXRlQ2hpbGQoY2hpbGROYW1lKVxuICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgY29uc3QgY2hpbGRXcml0ZXNDYWNoZSA9IHdyaXRlc0NhY2hlLmNoaWxkKGNoaWxkTmFtZSk7XG4gICAgICAgIGV2ZW50cyA9IGV2ZW50cy5jb25jYXQoXG4gICAgICAgICAgdGhpcy5hcHBseU9wZXJhdGlvbkhlbHBlcl8oXG4gICAgICAgICAgICBjaGlsZE9wZXJhdGlvbixcbiAgICAgICAgICAgIGNoaWxkVHJlZSxcbiAgICAgICAgICAgIGNoaWxkU2VydmVyQ2FjaGUsXG4gICAgICAgICAgICBjaGlsZFdyaXRlc0NhY2hlXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3luY1BvaW50KSB7XG4gICAgICAgIGV2ZW50cyA9IGV2ZW50cy5jb25jYXQoXG4gICAgICAgICAgc3luY1BvaW50LmFwcGx5T3BlcmF0aW9uKG9wZXJhdGlvbiwgd3JpdGVzQ2FjaGUsIHNlcnZlckNhY2hlKVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZXZlbnRzO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWN1cnNpdmUgaGVscGVyIGZvciBhcHBseU9wZXJhdGlvblRvU3luY1BvaW50c19cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHshT3BlcmF0aW9ufSBvcGVyYXRpb25cbiAgICogQHBhcmFtIHtJbW11dGFibGVUcmVlLjwhU3luY1BvaW50Pn0gc3luY1BvaW50VHJlZVxuICAgKiBAcGFyYW0gez9Ob2RlfSBzZXJ2ZXJDYWNoZVxuICAgKiBAcGFyYW0geyFXcml0ZVRyZWVSZWZ9IHdyaXRlc0NhY2hlXG4gICAqIEByZXR1cm4geyFBcnJheS48IUV2ZW50Pn1cbiAgICovXG4gIHByaXZhdGUgYXBwbHlPcGVyYXRpb25EZXNjZW5kYW50c0hlbHBlcl8oXG4gICAgb3BlcmF0aW9uOiBPcGVyYXRpb24sXG4gICAgc3luY1BvaW50VHJlZTogSW1tdXRhYmxlVHJlZTxTeW5jUG9pbnQ+LFxuICAgIHNlcnZlckNhY2hlOiBOb2RlIHwgbnVsbCxcbiAgICB3cml0ZXNDYWNoZTogV3JpdGVUcmVlUmVmXG4gICk6IEV2ZW50W10ge1xuICAgIGNvbnN0IHN5bmNQb2ludCA9IHN5bmNQb2ludFRyZWUuZ2V0KFBhdGguRW1wdHkpO1xuXG4gICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBjYWNoZWQgc2VydmVyIGRhdGEsIHNlZSBpZiB3ZSBjYW4gZ2V0IGl0IGZyb20gdGhpcyBTeW5jUG9pbnQuXG4gICAgaWYgKHNlcnZlckNhY2hlID09IG51bGwgJiYgc3luY1BvaW50ICE9IG51bGwpIHtcbiAgICAgIHNlcnZlckNhY2hlID0gc3luY1BvaW50LmdldENvbXBsZXRlU2VydmVyQ2FjaGUoUGF0aC5FbXB0eSk7XG4gICAgfVxuXG4gICAgbGV0IGV2ZW50czogRXZlbnRbXSA9IFtdO1xuICAgIHN5bmNQb2ludFRyZWUuY2hpbGRyZW4uaW5vcmRlclRyYXZlcnNhbCgoY2hpbGROYW1lLCBjaGlsZFRyZWUpID0+IHtcbiAgICAgIGNvbnN0IGNoaWxkU2VydmVyQ2FjaGUgPSBzZXJ2ZXJDYWNoZVxuICAgICAgICA/IHNlcnZlckNhY2hlLmdldEltbWVkaWF0ZUNoaWxkKGNoaWxkTmFtZSlcbiAgICAgICAgOiBudWxsO1xuICAgICAgY29uc3QgY2hpbGRXcml0ZXNDYWNoZSA9IHdyaXRlc0NhY2hlLmNoaWxkKGNoaWxkTmFtZSk7XG4gICAgICBjb25zdCBjaGlsZE9wZXJhdGlvbiA9IG9wZXJhdGlvbi5vcGVyYXRpb25Gb3JDaGlsZChjaGlsZE5hbWUpO1xuICAgICAgaWYgKGNoaWxkT3BlcmF0aW9uKSB7XG4gICAgICAgIGV2ZW50cyA9IGV2ZW50cy5jb25jYXQoXG4gICAgICAgICAgdGhpcy5hcHBseU9wZXJhdGlvbkRlc2NlbmRhbnRzSGVscGVyXyhcbiAgICAgICAgICAgIGNoaWxkT3BlcmF0aW9uLFxuICAgICAgICAgICAgY2hpbGRUcmVlLFxuICAgICAgICAgICAgY2hpbGRTZXJ2ZXJDYWNoZSxcbiAgICAgICAgICAgIGNoaWxkV3JpdGVzQ2FjaGVcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoc3luY1BvaW50KSB7XG4gICAgICBldmVudHMgPSBldmVudHMuY29uY2F0KFxuICAgICAgICBzeW5jUG9pbnQuYXBwbHlPcGVyYXRpb24ob3BlcmF0aW9uLCB3cml0ZXNDYWNoZSwgc2VydmVyQ2FjaGUpXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBldmVudHM7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGZpbmRLZXksIGZvckVhY2gsIHNhZmVHZXQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBhc3NlcnQsIGFzc2VydGlvbkVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4vdXRpbC9QYXRoJztcbmltcG9ydCB7IENvbXBvdW5kV3JpdGUgfSBmcm9tICcuL0NvbXBvdW5kV3JpdGUnO1xuaW1wb3J0IHsgUFJJT1JJVFlfSU5ERVggfSBmcm9tICcuL3NuYXAvaW5kZXhlcy9Qcmlvcml0eUluZGV4JztcbmltcG9ydCB7IENoaWxkcmVuTm9kZSB9IGZyb20gJy4vc25hcC9DaGlsZHJlbk5vZGUnO1xuaW1wb3J0IHsgTmFtZWROb2RlLCBOb2RlIH0gZnJvbSAnLi9zbmFwL05vZGUnO1xuaW1wb3J0IHsgQ2FjaGVOb2RlIH0gZnJvbSAnLi92aWV3L0NhY2hlTm9kZSc7XG5pbXBvcnQgeyBJbmRleCB9IGZyb20gJy4vc25hcC9pbmRleGVzL0luZGV4JztcblxuLyoqXG4gKiBEZWZpbmVzIGEgc2luZ2xlIHVzZXItaW5pdGlhdGVkIHdyaXRlIG9wZXJhdGlvbi4gTWF5IGJlIHRoZSByZXN1bHQgb2YgYSBzZXQoKSwgdHJhbnNhY3Rpb24oKSwgb3IgdXBkYXRlKCkgY2FsbC4gSW5cbiAqIHRoZSBjYXNlIG9mIGEgc2V0KCkgb3IgdHJhbnNhY3Rpb24sIHNuYXAgd2lsIGJlIG5vbi1udWxsLiAgSW4gdGhlIGNhc2Ugb2YgYW4gdXBkYXRlKCksIGNoaWxkcmVuIHdpbGwgYmUgbm9uLW51bGwuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgV3JpdGVSZWNvcmQge1xuICB3cml0ZUlkOiBudW1iZXI7XG4gIHBhdGg6IFBhdGg7XG4gIHNuYXA/OiBOb2RlIHwgbnVsbDtcbiAgY2hpbGRyZW4/OiB7IFtrOiBzdHJpbmddOiBOb2RlIH0gfCBudWxsO1xuICB2aXNpYmxlOiBib29sZWFuO1xufVxuXG4vKipcbiAqIFdyaXRlVHJlZSB0cmFja3MgYWxsIHBlbmRpbmcgdXNlci1pbml0aWF0ZWQgd3JpdGVzIGFuZCBoYXMgbWV0aG9kcyB0byBjYWxjdWxhdGUgdGhlIHJlc3VsdCBvZiBtZXJnaW5nIHRoZW1cbiAqIHdpdGggdW5kZXJseWluZyBzZXJ2ZXIgZGF0YSAodG8gY3JlYXRlIFwiZXZlbnQgY2FjaGVcIiBkYXRhKS4gIFBlbmRpbmcgd3JpdGVzIGFyZSBhZGRlZCB3aXRoIGFkZE92ZXJ3cml0ZSgpXG4gKiBhbmQgYWRkTWVyZ2UoKSwgYW5kIHJlbW92ZWQgd2l0aCByZW1vdmVXcml0ZSgpLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgY2xhc3MgV3JpdGVUcmVlIHtcbiAgLyoqXG4gICAqIEEgdHJlZSB0cmFja2luZyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGFsbCB2aXNpYmxlIHdyaXRlcy4gIFRoaXMgZG9lcyBub3QgaW5jbHVkZSB0cmFuc2FjdGlvbnMgd2l0aFxuICAgKiBhcHBseUxvY2FsbHk9ZmFsc2Ugb3Igd3JpdGVzIHRoYXQgYXJlIGNvbXBsZXRlbHkgc2hhZG93ZWQgYnkgb3RoZXIgd3JpdGVzLlxuICAgKlxuICAgKiBAdHlwZSB7IUNvbXBvdW5kV3JpdGV9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHZpc2libGVXcml0ZXNfOiBDb21wb3VuZFdyaXRlID0gQ29tcG91bmRXcml0ZS5FbXB0eTtcblxuICAvKipcbiAgICogQSBsaXN0IG9mIGFsbCBwZW5kaW5nIHdyaXRlcywgcmVnYXJkbGVzcyBvZiB2aXNpYmlsaXR5IGFuZCBzaGFkb3dlZC1uZXNzLiAgVXNlZCB0byBjYWxjdWxhdGUgYXJiaXRyYXJ5XG4gICAqIHNldHMgb2YgdGhlIGNoYW5nZWQgZGF0YSwgc3VjaCBhcyBoaWRkZW4gd3JpdGVzIChmcm9tIHRyYW5zYWN0aW9ucykgb3IgY2hhbmdlcyB3aXRoIGNlcnRhaW4gd3JpdGVzIGV4Y2x1ZGVkIChhbHNvXG4gICAqIHVzZWQgYnkgdHJhbnNhY3Rpb25zKS5cbiAgICpcbiAgICogQHR5cGUgeyFBcnJheS48IVdyaXRlUmVjb3JkPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgYWxsV3JpdGVzXzogV3JpdGVSZWNvcmRbXSA9IFtdO1xuXG4gIHByaXZhdGUgbGFzdFdyaXRlSWRfID0gLTE7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBXcml0ZVRyZWVSZWYgZm9yIHRoZSBnaXZlbiBwYXRoLiBGb3IgdXNlIHdpdGggYSBuZXcgc3luYyBwb2ludCBhdCB0aGUgZ2l2ZW4gcGF0aC5cbiAgICpcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICAgKiBAcmV0dXJuIHshV3JpdGVUcmVlUmVmfVxuICAgKi9cbiAgY2hpbGRXcml0ZXMocGF0aDogUGF0aCk6IFdyaXRlVHJlZVJlZiB7XG4gICAgcmV0dXJuIG5ldyBXcml0ZVRyZWVSZWYocGF0aCwgdGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogUmVjb3JkIGEgbmV3IG92ZXJ3cml0ZSBmcm9tIHVzZXIgY29kZS5cbiAgICpcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICAgKiBAcGFyYW0geyFOb2RlfSBzbmFwXG4gICAqIEBwYXJhbSB7IW51bWJlcn0gd3JpdGVJZFxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSB2aXNpYmxlIFRoaXMgaXMgc2V0IHRvIGZhbHNlIGJ5IHNvbWUgdHJhbnNhY3Rpb25zLiBJdCBzaG91bGQgYmUgZXhjbHVkZWQgZnJvbSBldmVudCBjYWNoZXNcbiAgICovXG4gIGFkZE92ZXJ3cml0ZShwYXRoOiBQYXRoLCBzbmFwOiBOb2RlLCB3cml0ZUlkOiBudW1iZXIsIHZpc2libGU/OiBib29sZWFuKSB7XG4gICAgYXNzZXJ0KFxuICAgICAgd3JpdGVJZCA+IHRoaXMubGFzdFdyaXRlSWRfLFxuICAgICAgJ1N0YWNraW5nIGFuIG9sZGVyIHdyaXRlIG9uIHRvcCBvZiBuZXdlciBvbmVzJ1xuICAgICk7XG4gICAgaWYgKHZpc2libGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdmlzaWJsZSA9IHRydWU7XG4gICAgfVxuICAgIHRoaXMuYWxsV3JpdGVzXy5wdXNoKHtcbiAgICAgIHBhdGg6IHBhdGgsXG4gICAgICBzbmFwOiBzbmFwLFxuICAgICAgd3JpdGVJZDogd3JpdGVJZCxcbiAgICAgIHZpc2libGU6IHZpc2libGVcbiAgICB9KTtcblxuICAgIGlmICh2aXNpYmxlKSB7XG4gICAgICB0aGlzLnZpc2libGVXcml0ZXNfID0gdGhpcy52aXNpYmxlV3JpdGVzXy5hZGRXcml0ZShwYXRoLCBzbmFwKTtcbiAgICB9XG4gICAgdGhpcy5sYXN0V3JpdGVJZF8gPSB3cml0ZUlkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlY29yZCBhIG5ldyBtZXJnZSBmcm9tIHVzZXIgY29kZS5cbiAgICpcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICAgKiBAcGFyYW0geyFPYmplY3QuPHN0cmluZywgIU5vZGU+fSBjaGFuZ2VkQ2hpbGRyZW5cbiAgICogQHBhcmFtIHshbnVtYmVyfSB3cml0ZUlkXG4gICAqL1xuICBhZGRNZXJnZShcbiAgICBwYXRoOiBQYXRoLFxuICAgIGNoYW5nZWRDaGlsZHJlbjogeyBbazogc3RyaW5nXTogTm9kZSB9LFxuICAgIHdyaXRlSWQ6IG51bWJlclxuICApIHtcbiAgICBhc3NlcnQoXG4gICAgICB3cml0ZUlkID4gdGhpcy5sYXN0V3JpdGVJZF8sXG4gICAgICAnU3RhY2tpbmcgYW4gb2xkZXIgbWVyZ2Ugb24gdG9wIG9mIG5ld2VyIG9uZXMnXG4gICAgKTtcbiAgICB0aGlzLmFsbFdyaXRlc18ucHVzaCh7XG4gICAgICBwYXRoOiBwYXRoLFxuICAgICAgY2hpbGRyZW46IGNoYW5nZWRDaGlsZHJlbixcbiAgICAgIHdyaXRlSWQ6IHdyaXRlSWQsXG4gICAgICB2aXNpYmxlOiB0cnVlXG4gICAgfSk7XG5cbiAgICB0aGlzLnZpc2libGVXcml0ZXNfID0gdGhpcy52aXNpYmxlV3JpdGVzXy5hZGRXcml0ZXMocGF0aCwgY2hhbmdlZENoaWxkcmVuKTtcbiAgICB0aGlzLmxhc3RXcml0ZUlkXyA9IHdyaXRlSWQ7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshbnVtYmVyfSB3cml0ZUlkXG4gICAqIEByZXR1cm4gez9Xcml0ZVJlY29yZH1cbiAgICovXG4gIGdldFdyaXRlKHdyaXRlSWQ6IG51bWJlcik6IFdyaXRlUmVjb3JkIHwgbnVsbCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFsbFdyaXRlc18ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHJlY29yZCA9IHRoaXMuYWxsV3JpdGVzX1tpXTtcbiAgICAgIGlmIChyZWNvcmQud3JpdGVJZCA9PT0gd3JpdGVJZCkge1xuICAgICAgICByZXR1cm4gcmVjb3JkO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSB3cml0ZSAoZWl0aGVyIGFuIG92ZXJ3cml0ZSBvciBtZXJnZSkgdGhhdCBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgYWNrbm93bGVkZ2UgYnkgdGhlIHNlcnZlci4gUmVjYWxjdWxhdGVzXG4gICAqIHRoZSB0cmVlIGlmIG5lY2Vzc2FyeS4gIFdlIHJldHVybiB0cnVlIGlmIGl0IG1heSBoYXZlIGJlZW4gdmlzaWJsZSwgbWVhbmluZyB2aWV3cyBuZWVkIHRvIHJlZXZhbHVhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7IW51bWJlcn0gd3JpdGVJZFxuICAgKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSB3cml0ZSBtYXkgaGF2ZSBiZWVuIHZpc2libGUgKG1lYW5pbmcgd2UnbGwgbmVlZCB0byByZWV2YWx1YXRlIC8gcmFpc2VcbiAgICogZXZlbnRzIGFzIGEgcmVzdWx0KS5cbiAgICovXG4gIHJlbW92ZVdyaXRlKHdyaXRlSWQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIC8vIE5vdGU6IGRpc2FibGluZyB0aGlzIGNoZWNrLiBJdCBjb3VsZCBiZSBhIHRyYW5zYWN0aW9uIHRoYXQgcHJlZW1wdGVkIGFub3RoZXIgdHJhbnNhY3Rpb24sIGFuZCB0aHVzIHdhcyBhcHBsaWVkXG4gICAgLy8gb3V0IG9mIG9yZGVyLlxuICAgIC8vY29uc3QgdmFsaWRDbGVhciA9IHJldmVydCB8fCB0aGlzLmFsbFdyaXRlc18ubGVuZ3RoID09PSAwIHx8IHdyaXRlSWQgPD0gdGhpcy5hbGxXcml0ZXNfWzBdLndyaXRlSWQ7XG4gICAgLy9hc3NlcnQodmFsaWRDbGVhciwgXCJFaXRoZXIgd2UgZG9uJ3QgaGF2ZSB0aGlzIHdyaXRlLCBvciBpdCdzIHRoZSBmaXJzdCBvbmUgaW4gdGhlIHF1ZXVlXCIpO1xuXG4gICAgY29uc3QgaWR4ID0gdGhpcy5hbGxXcml0ZXNfLmZpbmRJbmRleChmdW5jdGlvbihzKSB7XG4gICAgICByZXR1cm4gcy53cml0ZUlkID09PSB3cml0ZUlkO1xuICAgIH0pO1xuICAgIGFzc2VydChpZHggPj0gMCwgJ3JlbW92ZVdyaXRlIGNhbGxlZCB3aXRoIG5vbmV4aXN0ZW50IHdyaXRlSWQuJyk7XG4gICAgY29uc3Qgd3JpdGVUb1JlbW92ZSA9IHRoaXMuYWxsV3JpdGVzX1tpZHhdO1xuICAgIHRoaXMuYWxsV3JpdGVzXy5zcGxpY2UoaWR4LCAxKTtcblxuICAgIGxldCByZW1vdmVkV3JpdGVXYXNWaXNpYmxlID0gd3JpdGVUb1JlbW92ZS52aXNpYmxlO1xuICAgIGxldCByZW1vdmVkV3JpdGVPdmVybGFwc1dpdGhPdGhlcldyaXRlcyA9IGZhbHNlO1xuXG4gICAgbGV0IGkgPSB0aGlzLmFsbFdyaXRlc18ubGVuZ3RoIC0gMTtcblxuICAgIHdoaWxlIChyZW1vdmVkV3JpdGVXYXNWaXNpYmxlICYmIGkgPj0gMCkge1xuICAgICAgY29uc3QgY3VycmVudFdyaXRlID0gdGhpcy5hbGxXcml0ZXNfW2ldO1xuICAgICAgaWYgKGN1cnJlbnRXcml0ZS52aXNpYmxlKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBpID49IGlkeCAmJlxuICAgICAgICAgIHRoaXMucmVjb3JkQ29udGFpbnNQYXRoXyhjdXJyZW50V3JpdGUsIHdyaXRlVG9SZW1vdmUucGF0aClcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gVGhlIHJlbW92ZWQgd3JpdGUgd2FzIGNvbXBsZXRlbHkgc2hhZG93ZWQgYnkgYSBzdWJzZXF1ZW50IHdyaXRlLlxuICAgICAgICAgIHJlbW92ZWRXcml0ZVdhc1Zpc2libGUgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmICh3cml0ZVRvUmVtb3ZlLnBhdGguY29udGFpbnMoY3VycmVudFdyaXRlLnBhdGgpKSB7XG4gICAgICAgICAgLy8gRWl0aGVyIHdlJ3JlIGNvdmVyaW5nIHNvbWUgd3JpdGVzIG9yIHRoZXkncmUgY292ZXJpbmcgcGFydCBvZiB1cyAoZGVwZW5kaW5nIG9uIHdoaWNoIGNhbWUgZmlyc3QpLlxuICAgICAgICAgIHJlbW92ZWRXcml0ZU92ZXJsYXBzV2l0aE90aGVyV3JpdGVzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaS0tO1xuICAgIH1cblxuICAgIGlmICghcmVtb3ZlZFdyaXRlV2FzVmlzaWJsZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAocmVtb3ZlZFdyaXRlT3ZlcmxhcHNXaXRoT3RoZXJXcml0ZXMpIHtcbiAgICAgIC8vIFRoZXJlJ3Mgc29tZSBzaGFkb3dpbmcgZ29pbmcgb24uIEp1c3QgcmVidWlsZCB0aGUgdmlzaWJsZSB3cml0ZXMgZnJvbSBzY3JhdGNoLlxuICAgICAgdGhpcy5yZXNldFRyZWVfKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhlcmUncyBubyBzaGFkb3dpbmcuICBXZSBjYW4gc2FmZWx5IGp1c3QgcmVtb3ZlIHRoZSB3cml0ZShzKSBmcm9tIHZpc2libGVXcml0ZXMuXG4gICAgICBpZiAod3JpdGVUb1JlbW92ZS5zbmFwKSB7XG4gICAgICAgIHRoaXMudmlzaWJsZVdyaXRlc18gPSB0aGlzLnZpc2libGVXcml0ZXNfLnJlbW92ZVdyaXRlKFxuICAgICAgICAgIHdyaXRlVG9SZW1vdmUucGF0aFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSB3cml0ZVRvUmVtb3ZlLmNoaWxkcmVuO1xuICAgICAgICBmb3JFYWNoKGNoaWxkcmVuLCAoY2hpbGROYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICB0aGlzLnZpc2libGVXcml0ZXNfID0gdGhpcy52aXNpYmxlV3JpdGVzXy5yZW1vdmVXcml0ZShcbiAgICAgICAgICAgIHdyaXRlVG9SZW1vdmUucGF0aC5jaGlsZChjaGlsZE5hbWUpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGEgY29tcGxldGUgc25hcHNob3QgZm9yIHRoZSBnaXZlbiBwYXRoIGlmIHRoZXJlJ3MgdmlzaWJsZSB3cml0ZSBkYXRhIGF0IHRoYXQgcGF0aCwgZWxzZSBudWxsLlxuICAgKiBObyBzZXJ2ZXIgZGF0YSBpcyBjb25zaWRlcmVkLlxuICAgKlxuICAgKiBAcGFyYW0geyFQYXRofSBwYXRoXG4gICAqIEByZXR1cm4gez9Ob2RlfVxuICAgKi9cbiAgZ2V0Q29tcGxldGVXcml0ZURhdGEocGF0aDogUGF0aCk6IE5vZGUgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy52aXNpYmxlV3JpdGVzXy5nZXRDb21wbGV0ZU5vZGUocGF0aCk7XG4gIH1cblxuICAvKipcbiAgICogR2l2ZW4gb3B0aW9uYWwsIHVuZGVybHlpbmcgc2VydmVyIGRhdGEsIGFuZCBhbiBvcHRpb25hbCBzZXQgb2YgY29uc3RyYWludHMgKGV4Y2x1ZGUgc29tZSBzZXRzLCBpbmNsdWRlIGhpZGRlblxuICAgKiB3cml0ZXMpLCBhdHRlbXB0IHRvIGNhbGN1bGF0ZSBhIGNvbXBsZXRlIHNuYXBzaG90IGZvciB0aGUgZ2l2ZW4gcGF0aFxuICAgKlxuICAgKiBAcGFyYW0geyFQYXRofSB0cmVlUGF0aFxuICAgKiBAcGFyYW0gez9Ob2RlfSBjb21wbGV0ZVNlcnZlckNhY2hlXG4gICAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj49fSB3cml0ZUlkc1RvRXhjbHVkZSBBbiBvcHRpb25hbCBzZXQgdG8gYmUgZXhjbHVkZWRcbiAgICogQHBhcmFtIHtib29sZWFuPX0gaW5jbHVkZUhpZGRlbldyaXRlcyBEZWZhdWx0cyB0byBmYWxzZSwgd2hldGhlciBvciBub3QgdG8gbGF5ZXIgb24gd3JpdGVzIHdpdGggdmlzaWJsZSBzZXQgdG8gZmFsc2VcbiAgICogQHJldHVybiB7P05vZGV9XG4gICAqL1xuICBjYWxjQ29tcGxldGVFdmVudENhY2hlKFxuICAgIHRyZWVQYXRoOiBQYXRoLFxuICAgIGNvbXBsZXRlU2VydmVyQ2FjaGU6IE5vZGUgfCBudWxsLFxuICAgIHdyaXRlSWRzVG9FeGNsdWRlPzogbnVtYmVyW10sXG4gICAgaW5jbHVkZUhpZGRlbldyaXRlcz86IGJvb2xlYW5cbiAgKTogTm9kZSB8IG51bGwge1xuICAgIGlmICghd3JpdGVJZHNUb0V4Y2x1ZGUgJiYgIWluY2x1ZGVIaWRkZW5Xcml0ZXMpIHtcbiAgICAgIGNvbnN0IHNoYWRvd2luZ05vZGUgPSB0aGlzLnZpc2libGVXcml0ZXNfLmdldENvbXBsZXRlTm9kZSh0cmVlUGF0aCk7XG4gICAgICBpZiAoc2hhZG93aW5nTm9kZSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBzaGFkb3dpbmdOb2RlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc3ViTWVyZ2UgPSB0aGlzLnZpc2libGVXcml0ZXNfLmNoaWxkQ29tcG91bmRXcml0ZSh0cmVlUGF0aCk7XG4gICAgICAgIGlmIChzdWJNZXJnZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICByZXR1cm4gY29tcGxldGVTZXJ2ZXJDYWNoZTtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBjb21wbGV0ZVNlcnZlckNhY2hlID09IG51bGwgJiZcbiAgICAgICAgICAhc3ViTWVyZ2UuaGFzQ29tcGxldGVXcml0ZShQYXRoLkVtcHR5KVxuICAgICAgICApIHtcbiAgICAgICAgICAvLyBXZSB3b3VsZG4ndCBoYXZlIGEgY29tcGxldGUgc25hcHNob3QsIHNpbmNlIHRoZXJlJ3Mgbm8gdW5kZXJseWluZyBkYXRhIGFuZCBubyBjb21wbGV0ZSBzaGFkb3dcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBsYXllcmVkQ2FjaGUgPSBjb21wbGV0ZVNlcnZlckNhY2hlIHx8IENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuICAgICAgICAgIHJldHVybiBzdWJNZXJnZS5hcHBseShsYXllcmVkQ2FjaGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG1lcmdlID0gdGhpcy52aXNpYmxlV3JpdGVzXy5jaGlsZENvbXBvdW5kV3JpdGUodHJlZVBhdGgpO1xuICAgICAgaWYgKCFpbmNsdWRlSGlkZGVuV3JpdGVzICYmIG1lcmdlLmlzRW1wdHkoKSkge1xuICAgICAgICByZXR1cm4gY29tcGxldGVTZXJ2ZXJDYWNoZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIElmIHRoZSBzZXJ2ZXIgY2FjaGUgaXMgbnVsbCwgYW5kIHdlIGRvbid0IGhhdmUgYSBjb21wbGV0ZSBjYWNoZSwgd2UgbmVlZCB0byByZXR1cm4gbnVsbFxuICAgICAgICBpZiAoXG4gICAgICAgICAgIWluY2x1ZGVIaWRkZW5Xcml0ZXMgJiZcbiAgICAgICAgICBjb21wbGV0ZVNlcnZlckNhY2hlID09IG51bGwgJiZcbiAgICAgICAgICAhbWVyZ2UuaGFzQ29tcGxldGVXcml0ZShQYXRoLkVtcHR5KVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBmaWx0ZXIgPSBmdW5jdGlvbih3cml0ZTogV3JpdGVSZWNvcmQpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICh3cml0ZS52aXNpYmxlIHx8IGluY2x1ZGVIaWRkZW5Xcml0ZXMpICYmXG4gICAgICAgICAgICAgICghd3JpdGVJZHNUb0V4Y2x1ZGUgfHxcbiAgICAgICAgICAgICAgICAhfndyaXRlSWRzVG9FeGNsdWRlLmluZGV4T2Yod3JpdGUud3JpdGVJZCkpICYmXG4gICAgICAgICAgICAgICh3cml0ZS5wYXRoLmNvbnRhaW5zKHRyZWVQYXRoKSB8fCB0cmVlUGF0aC5jb250YWlucyh3cml0ZS5wYXRoKSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb25zdCBtZXJnZUF0UGF0aCA9IFdyaXRlVHJlZS5sYXllclRyZWVfKFxuICAgICAgICAgICAgdGhpcy5hbGxXcml0ZXNfLFxuICAgICAgICAgICAgZmlsdGVyLFxuICAgICAgICAgICAgdHJlZVBhdGhcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IGxheWVyZWRDYWNoZSA9IGNvbXBsZXRlU2VydmVyQ2FjaGUgfHwgQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG4gICAgICAgICAgcmV0dXJuIG1lcmdlQXRQYXRoLmFwcGx5KGxheWVyZWRDYWNoZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV2l0aCBvcHRpb25hbCwgdW5kZXJseWluZyBzZXJ2ZXIgZGF0YSwgYXR0ZW1wdCB0byByZXR1cm4gYSBjaGlsZHJlbiBub2RlIG9mIGNoaWxkcmVuIHRoYXQgd2UgaGF2ZSBjb21wbGV0ZSBkYXRhIGZvci5cbiAgICogVXNlZCB3aGVuIGNyZWF0aW5nIG5ldyB2aWV3cywgdG8gcHJlLWZpbGwgdGhlaXIgY29tcGxldGUgZXZlbnQgY2hpbGRyZW4gc25hcHNob3QuXG4gICAqXG4gICAqIEBwYXJhbSB7IVBhdGh9IHRyZWVQYXRoXG4gICAqIEBwYXJhbSB7P0NoaWxkcmVuTm9kZX0gY29tcGxldGVTZXJ2ZXJDaGlsZHJlblxuICAgKiBAcmV0dXJuIHshQ2hpbGRyZW5Ob2RlfVxuICAgKi9cbiAgY2FsY0NvbXBsZXRlRXZlbnRDaGlsZHJlbihcbiAgICB0cmVlUGF0aDogUGF0aCxcbiAgICBjb21wbGV0ZVNlcnZlckNoaWxkcmVuOiBDaGlsZHJlbk5vZGUgfCBudWxsXG4gICkge1xuICAgIGxldCBjb21wbGV0ZUNoaWxkcmVuID0gQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREUgYXMgTm9kZTtcbiAgICBjb25zdCB0b3BMZXZlbFNldCA9IHRoaXMudmlzaWJsZVdyaXRlc18uZ2V0Q29tcGxldGVOb2RlKHRyZWVQYXRoKTtcbiAgICBpZiAodG9wTGV2ZWxTZXQpIHtcbiAgICAgIGlmICghdG9wTGV2ZWxTZXQuaXNMZWFmTm9kZSgpKSB7XG4gICAgICAgIC8vIHdlJ3JlIHNoYWRvd2luZyBldmVyeXRoaW5nLiBSZXR1cm4gdGhlIGNoaWxkcmVuLlxuICAgICAgICB0b3BMZXZlbFNldC5mb3JFYWNoQ2hpbGQoUFJJT1JJVFlfSU5ERVgsIGZ1bmN0aW9uKFxuICAgICAgICAgIGNoaWxkTmFtZSxcbiAgICAgICAgICBjaGlsZFNuYXBcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29tcGxldGVDaGlsZHJlbiA9IGNvbXBsZXRlQ2hpbGRyZW4udXBkYXRlSW1tZWRpYXRlQ2hpbGQoXG4gICAgICAgICAgICBjaGlsZE5hbWUsXG4gICAgICAgICAgICBjaGlsZFNuYXBcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb21wbGV0ZUNoaWxkcmVuO1xuICAgIH0gZWxzZSBpZiAoY29tcGxldGVTZXJ2ZXJDaGlsZHJlbikge1xuICAgICAgLy8gTGF5ZXIgYW55IGNoaWxkcmVuIHdlIGhhdmUgb24gdG9wIG9mIHRoaXNcbiAgICAgIC8vIFdlIGtub3cgd2UgZG9uJ3QgaGF2ZSBhIHRvcC1sZXZlbCBzZXQsIHNvIGp1c3QgZW51bWVyYXRlIGV4aXN0aW5nIGNoaWxkcmVuXG4gICAgICBjb25zdCBtZXJnZSA9IHRoaXMudmlzaWJsZVdyaXRlc18uY2hpbGRDb21wb3VuZFdyaXRlKHRyZWVQYXRoKTtcbiAgICAgIGNvbXBsZXRlU2VydmVyQ2hpbGRyZW4uZm9yRWFjaENoaWxkKFBSSU9SSVRZX0lOREVYLCBmdW5jdGlvbihcbiAgICAgICAgY2hpbGROYW1lLFxuICAgICAgICBjaGlsZE5vZGVcbiAgICAgICkge1xuICAgICAgICBjb25zdCBub2RlID0gbWVyZ2VcbiAgICAgICAgICAuY2hpbGRDb21wb3VuZFdyaXRlKG5ldyBQYXRoKGNoaWxkTmFtZSkpXG4gICAgICAgICAgLmFwcGx5KGNoaWxkTm9kZSk7XG4gICAgICAgIGNvbXBsZXRlQ2hpbGRyZW4gPSBjb21wbGV0ZUNoaWxkcmVuLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKFxuICAgICAgICAgIGNoaWxkTmFtZSxcbiAgICAgICAgICBub2RlXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIC8vIEFkZCBhbnkgY29tcGxldGUgY2hpbGRyZW4gd2UgaGF2ZSBmcm9tIHRoZSBzZXRcbiAgICAgIG1lcmdlLmdldENvbXBsZXRlQ2hpbGRyZW4oKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWVkTm9kZSkge1xuICAgICAgICBjb21wbGV0ZUNoaWxkcmVuID0gY29tcGxldGVDaGlsZHJlbi51cGRhdGVJbW1lZGlhdGVDaGlsZChcbiAgICAgICAgICBuYW1lZE5vZGUubmFtZSxcbiAgICAgICAgICBuYW1lZE5vZGUubm9kZVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gY29tcGxldGVDaGlsZHJlbjtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gV2UgZG9uJ3QgaGF2ZSBhbnl0aGluZyB0byBsYXllciBvbiB0b3Agb2YuIExheWVyIG9uIGFueSBjaGlsZHJlbiB3ZSBoYXZlXG4gICAgICAvLyBOb3RlIHRoYXQgd2UgY2FuIHJldHVybiBhbiBlbXB0eSBzbmFwIGlmIHdlIGhhdmUgYSBkZWZpbmVkIGRlbGV0ZVxuICAgICAgY29uc3QgbWVyZ2UgPSB0aGlzLnZpc2libGVXcml0ZXNfLmNoaWxkQ29tcG91bmRXcml0ZSh0cmVlUGF0aCk7XG4gICAgICBtZXJnZS5nZXRDb21wbGV0ZUNoaWxkcmVuKCkuZm9yRWFjaChmdW5jdGlvbihuYW1lZE5vZGUpIHtcbiAgICAgICAgY29tcGxldGVDaGlsZHJlbiA9IGNvbXBsZXRlQ2hpbGRyZW4udXBkYXRlSW1tZWRpYXRlQ2hpbGQoXG4gICAgICAgICAgbmFtZWROb2RlLm5hbWUsXG4gICAgICAgICAgbmFtZWROb2RlLm5vZGVcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNvbXBsZXRlQ2hpbGRyZW47XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdpdmVuIHRoYXQgdGhlIHVuZGVybHlpbmcgc2VydmVyIGRhdGEgaGFzIHVwZGF0ZWQsIGRldGVybWluZSB3aGF0LCBpZiBhbnl0aGluZywgbmVlZHMgdG8gYmVcbiAgICogYXBwbGllZCB0byB0aGUgZXZlbnQgY2FjaGUuXG4gICAqXG4gICAqIFBvc3NpYmlsaXRpZXM6XG4gICAqXG4gICAqIDEuIE5vIHdyaXRlcyBhcmUgc2hhZG93aW5nLiBFdmVudHMgc2hvdWxkIGJlIHJhaXNlZCwgdGhlIHNuYXAgdG8gYmUgYXBwbGllZCBjb21lcyBmcm9tIHRoZSBzZXJ2ZXIgZGF0YVxuICAgKlxuICAgKiAyLiBTb21lIHdyaXRlIGlzIGNvbXBsZXRlbHkgc2hhZG93aW5nLiBObyBldmVudHMgdG8gYmUgcmFpc2VkXG4gICAqXG4gICAqIDMuIElzIHBhcnRpYWxseSBzaGFkb3dlZC4gRXZlbnRzXG4gICAqXG4gICAqIEVpdGhlciBleGlzdGluZ0V2ZW50U25hcCBvciBleGlzdGluZ1NlcnZlclNuYXAgbXVzdCBleGlzdFxuICAgKlxuICAgKiBAcGFyYW0geyFQYXRofSB0cmVlUGF0aFxuICAgKiBAcGFyYW0geyFQYXRofSBjaGlsZFBhdGhcbiAgICogQHBhcmFtIHs/Tm9kZX0gZXhpc3RpbmdFdmVudFNuYXBcbiAgICogQHBhcmFtIHs/Tm9kZX0gZXhpc3RpbmdTZXJ2ZXJTbmFwXG4gICAqIEByZXR1cm4gez9Ob2RlfVxuICAgKi9cbiAgY2FsY0V2ZW50Q2FjaGVBZnRlclNlcnZlck92ZXJ3cml0ZShcbiAgICB0cmVlUGF0aDogUGF0aCxcbiAgICBjaGlsZFBhdGg6IFBhdGgsXG4gICAgZXhpc3RpbmdFdmVudFNuYXA6IE5vZGUgfCBudWxsLFxuICAgIGV4aXN0aW5nU2VydmVyU25hcDogTm9kZSB8IG51bGxcbiAgKTogTm9kZSB8IG51bGwge1xuICAgIGFzc2VydChcbiAgICAgIGV4aXN0aW5nRXZlbnRTbmFwIHx8IGV4aXN0aW5nU2VydmVyU25hcCxcbiAgICAgICdFaXRoZXIgZXhpc3RpbmdFdmVudFNuYXAgb3IgZXhpc3RpbmdTZXJ2ZXJTbmFwIG11c3QgZXhpc3QnXG4gICAgKTtcbiAgICBjb25zdCBwYXRoID0gdHJlZVBhdGguY2hpbGQoY2hpbGRQYXRoKTtcbiAgICBpZiAodGhpcy52aXNpYmxlV3JpdGVzXy5oYXNDb21wbGV0ZVdyaXRlKHBhdGgpKSB7XG4gICAgICAvLyBBdCB0aGlzIHBvaW50IHdlIGNhbiBwcm9iYWJseSBndWFyYW50ZWUgdGhhdCB3ZSdyZSBpbiBjYXNlIDIsIG1lYW5pbmcgbm8gZXZlbnRzXG4gICAgICAvLyBNYXkgbmVlZCB0byBjaGVjayB2aXNpYmlsaXR5IHdoaWxlIGRvaW5nIHRoZSBmaW5kUm9vdE1vc3RWYWx1ZUFuZFBhdGggY2FsbFxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5vIGNvbXBsZXRlIHNoYWRvd2luZy4gV2UncmUgZWl0aGVyIHBhcnRpYWxseSBzaGFkb3dpbmcgb3Igbm90IHNoYWRvd2luZyBhdCBhbGwuXG4gICAgICBjb25zdCBjaGlsZE1lcmdlID0gdGhpcy52aXNpYmxlV3JpdGVzXy5jaGlsZENvbXBvdW5kV3JpdGUocGF0aCk7XG4gICAgICBpZiAoY2hpbGRNZXJnZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgLy8gV2UncmUgbm90IHNoYWRvd2luZyBhdCBhbGwuIENhc2UgMVxuICAgICAgICByZXR1cm4gZXhpc3RpbmdTZXJ2ZXJTbmFwLmdldENoaWxkKGNoaWxkUGF0aCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUaGlzIGNvdWxkIGJlIG1vcmUgZWZmaWNpZW50IGlmIHRoZSBzZXJ2ZXJOb2RlICsgdXBkYXRlcyBkb2Vzbid0IGNoYW5nZSB0aGUgZXZlbnRTbmFwXG4gICAgICAgIC8vIEhvd2V2ZXIgdGhpcyBpcyB0cmlja3kgdG8gZmluZCBvdXQsIHNpbmNlIHVzZXIgdXBkYXRlcyBkb24ndCBuZWNlc3NhcnkgY2hhbmdlIHRoZSBzZXJ2ZXJcbiAgICAgICAgLy8gc25hcCwgZS5nLiBwcmlvcml0eSB1cGRhdGVzIG9uIGVtcHR5IG5vZGVzLCBvciBkZWVwIGRlbGV0ZXMuIEFub3RoZXIgc3BlY2lhbCBjYXNlIGlzIGlmIHRoZSBzZXJ2ZXJcbiAgICAgICAgLy8gYWRkcyBub2RlcywgYnV0IGRvZXNuJ3QgY2hhbmdlIGFueSBleGlzdGluZyB3cml0ZXMuIEl0IGlzIHRoZXJlZm9yZSBub3QgZW5vdWdoIHRvXG4gICAgICAgIC8vIG9ubHkgY2hlY2sgaWYgdGhlIHVwZGF0ZXMgY2hhbmdlIHRoZSBzZXJ2ZXJOb2RlLlxuICAgICAgICAvLyBNYXliZSBjaGVjayBpZiB0aGUgbWVyZ2UgdHJlZSBjb250YWlucyB0aGVzZSBzcGVjaWFsIGNhc2VzIGFuZCBvbmx5IGRvIGEgZnVsbCBvdmVyd3JpdGUgaW4gdGhhdCBjYXNlP1xuICAgICAgICByZXR1cm4gY2hpbGRNZXJnZS5hcHBseShleGlzdGluZ1NlcnZlclNuYXAuZ2V0Q2hpbGQoY2hpbGRQYXRoKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjb21wbGV0ZSBjaGlsZCBmb3IgYSBnaXZlbiBzZXJ2ZXIgc25hcCBhZnRlciBhcHBseWluZyBhbGwgdXNlciB3cml0ZXMgb3IgbnVsbCBpZiB0aGVyZSBpcyBub1xuICAgKiBjb21wbGV0ZSBjaGlsZCBmb3IgdGhpcyBDaGlsZEtleS5cbiAgICpcbiAgICogQHBhcmFtIHshUGF0aH0gdHJlZVBhdGhcbiAgICogQHBhcmFtIHshc3RyaW5nfSBjaGlsZEtleVxuICAgKiBAcGFyYW0geyFDYWNoZU5vZGV9IGV4aXN0aW5nU2VydmVyU25hcFxuICAgKiBAcmV0dXJuIHs/Tm9kZX1cbiAgICovXG4gIGNhbGNDb21wbGV0ZUNoaWxkKFxuICAgIHRyZWVQYXRoOiBQYXRoLFxuICAgIGNoaWxkS2V5OiBzdHJpbmcsXG4gICAgZXhpc3RpbmdTZXJ2ZXJTbmFwOiBDYWNoZU5vZGVcbiAgKTogTm9kZSB8IG51bGwge1xuICAgIGNvbnN0IHBhdGggPSB0cmVlUGF0aC5jaGlsZChjaGlsZEtleSk7XG4gICAgY29uc3Qgc2hhZG93aW5nTm9kZSA9IHRoaXMudmlzaWJsZVdyaXRlc18uZ2V0Q29tcGxldGVOb2RlKHBhdGgpO1xuICAgIGlmIChzaGFkb3dpbmdOb2RlICE9IG51bGwpIHtcbiAgICAgIHJldHVybiBzaGFkb3dpbmdOb2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZXhpc3RpbmdTZXJ2ZXJTbmFwLmlzQ29tcGxldGVGb3JDaGlsZChjaGlsZEtleSkpIHtcbiAgICAgICAgY29uc3QgY2hpbGRNZXJnZSA9IHRoaXMudmlzaWJsZVdyaXRlc18uY2hpbGRDb21wb3VuZFdyaXRlKHBhdGgpO1xuICAgICAgICByZXR1cm4gY2hpbGRNZXJnZS5hcHBseShcbiAgICAgICAgICBleGlzdGluZ1NlcnZlclNuYXAuZ2V0Tm9kZSgpLmdldEltbWVkaWF0ZUNoaWxkKGNoaWxkS2V5KVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBub2RlIGlmIHRoZXJlIGlzIGEgY29tcGxldGUgb3ZlcndyaXRlIGZvciB0aGlzIHBhdGguIE1vcmUgc3BlY2lmaWNhbGx5LCBpZiB0aGVyZSBpcyBhIHdyaXRlIGF0XG4gICAqIGEgaGlnaGVyIHBhdGgsIHRoaXMgd2lsbCByZXR1cm4gdGhlIGNoaWxkIG9mIHRoYXQgd3JpdGUgcmVsYXRpdmUgdG8gdGhlIHdyaXRlIGFuZCB0aGlzIHBhdGguXG4gICAqIFJldHVybnMgbnVsbCBpZiB0aGVyZSBpcyBubyB3cml0ZSBhdCB0aGlzIHBhdGguXG4gICAqXG4gICAqIEBwYXJhbSB7IVBhdGh9IHBhdGhcbiAgICogQHJldHVybiB7P05vZGV9XG4gICAqL1xuICBzaGFkb3dpbmdXcml0ZShwYXRoOiBQYXRoKTogTm9kZSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLnZpc2libGVXcml0ZXNfLmdldENvbXBsZXRlTm9kZShwYXRoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHdoZW4gcHJvY2Vzc2luZyBjaGlsZCByZW1vdmUgZXZlbnRzIG9uIGEgcXVlcnkuIElmIHdlIGNhbiwgd2UgcHVsbCBpbiBjaGlsZHJlbiB0aGF0IHdlcmUgb3V0c2lkZVxuICAgKiB0aGUgd2luZG93LCBidXQgbWF5IG5vdyBiZSBpbiB0aGUgd2luZG93LlxuICAgKlxuICAgKiBAcGFyYW0geyFQYXRofSB0cmVlUGF0aFxuICAgKiBAcGFyYW0gez9Ob2RlfSBjb21wbGV0ZVNlcnZlckRhdGFcbiAgICogQHBhcmFtIHshTmFtZWROb2RlfSBzdGFydFBvc3RcbiAgICogQHBhcmFtIHshbnVtYmVyfSBjb3VudFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJldmVyc2VcbiAgICogQHBhcmFtIHshSW5kZXh9IGluZGV4XG4gICAqIEByZXR1cm4geyFBcnJheS48IU5hbWVkTm9kZT59XG4gICAqL1xuICBjYWxjSW5kZXhlZFNsaWNlKFxuICAgIHRyZWVQYXRoOiBQYXRoLFxuICAgIGNvbXBsZXRlU2VydmVyRGF0YTogTm9kZSB8IG51bGwsXG4gICAgc3RhcnRQb3N0OiBOYW1lZE5vZGUsXG4gICAgY291bnQ6IG51bWJlcixcbiAgICByZXZlcnNlOiBib29sZWFuLFxuICAgIGluZGV4OiBJbmRleFxuICApOiBOYW1lZE5vZGVbXSB7XG4gICAgbGV0IHRvSXRlcmF0ZTogTm9kZTtcbiAgICBjb25zdCBtZXJnZSA9IHRoaXMudmlzaWJsZVdyaXRlc18uY2hpbGRDb21wb3VuZFdyaXRlKHRyZWVQYXRoKTtcbiAgICBjb25zdCBzaGFkb3dpbmdOb2RlID0gbWVyZ2UuZ2V0Q29tcGxldGVOb2RlKFBhdGguRW1wdHkpO1xuICAgIGlmIChzaGFkb3dpbmdOb2RlICE9IG51bGwpIHtcbiAgICAgIHRvSXRlcmF0ZSA9IHNoYWRvd2luZ05vZGU7XG4gICAgfSBlbHNlIGlmIChjb21wbGV0ZVNlcnZlckRhdGEgIT0gbnVsbCkge1xuICAgICAgdG9JdGVyYXRlID0gbWVyZ2UuYXBwbHkoY29tcGxldGVTZXJ2ZXJEYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm8gY2hpbGRyZW4gdG8gaXRlcmF0ZSBvblxuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICB0b0l0ZXJhdGUgPSB0b0l0ZXJhdGUud2l0aEluZGV4KGluZGV4KTtcbiAgICBpZiAoIXRvSXRlcmF0ZS5pc0VtcHR5KCkgJiYgIXRvSXRlcmF0ZS5pc0xlYWZOb2RlKCkpIHtcbiAgICAgIGNvbnN0IG5vZGVzID0gW107XG4gICAgICBjb25zdCBjbXAgPSBpbmRleC5nZXRDb21wYXJlKCk7XG4gICAgICBjb25zdCBpdGVyID0gcmV2ZXJzZVxuICAgICAgICA/ICh0b0l0ZXJhdGUgYXMgQ2hpbGRyZW5Ob2RlKS5nZXRSZXZlcnNlSXRlcmF0b3JGcm9tKHN0YXJ0UG9zdCwgaW5kZXgpXG4gICAgICAgIDogKHRvSXRlcmF0ZSBhcyBDaGlsZHJlbk5vZGUpLmdldEl0ZXJhdG9yRnJvbShzdGFydFBvc3QsIGluZGV4KTtcbiAgICAgIGxldCBuZXh0ID0gaXRlci5nZXROZXh0KCk7XG4gICAgICB3aGlsZSAobmV4dCAmJiBub2Rlcy5sZW5ndGggPCBjb3VudCkge1xuICAgICAgICBpZiAoY21wKG5leHQsIHN0YXJ0UG9zdCkgIT09IDApIHtcbiAgICAgICAgICBub2Rlcy5wdXNoKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIG5leHQgPSBpdGVyLmdldE5leHQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBub2RlcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXcml0ZVJlY29yZH0gd3JpdGVSZWNvcmRcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSByZWNvcmRDb250YWluc1BhdGhfKHdyaXRlUmVjb3JkOiBXcml0ZVJlY29yZCwgcGF0aDogUGF0aCk6IGJvb2xlYW4ge1xuICAgIGlmICh3cml0ZVJlY29yZC5zbmFwKSB7XG4gICAgICByZXR1cm4gd3JpdGVSZWNvcmQucGF0aC5jb250YWlucyhwYXRoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZmluZEtleSBjYW4gcmV0dXJuIHVuZGVmaW5lZCwgc28gdXNlICEhIHRvIGNvZXJjZSB0byBib29sZWFuXG4gICAgICByZXR1cm4gISFmaW5kS2V5KHdyaXRlUmVjb3JkLmNoaWxkcmVuLCBmdW5jdGlvbihcbiAgICAgICAgY2hpbGRTbmFwOiBOb2RlLFxuICAgICAgICBjaGlsZE5hbWU6IHN0cmluZ1xuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB3cml0ZVJlY29yZC5wYXRoLmNoaWxkKGNoaWxkTmFtZSkuY29udGFpbnMocGF0aCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmUtbGF5ZXIgdGhlIHdyaXRlcyBhbmQgbWVyZ2VzIGludG8gYSB0cmVlIHNvIHdlIGNhbiBlZmZpY2llbnRseSBjYWxjdWxhdGUgZXZlbnQgc25hcHNob3RzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHJlc2V0VHJlZV8oKSB7XG4gICAgdGhpcy52aXNpYmxlV3JpdGVzXyA9IFdyaXRlVHJlZS5sYXllclRyZWVfKFxuICAgICAgdGhpcy5hbGxXcml0ZXNfLFxuICAgICAgV3JpdGVUcmVlLkRlZmF1bHRGaWx0ZXJfLFxuICAgICAgUGF0aC5FbXB0eVxuICAgICk7XG4gICAgaWYgKHRoaXMuYWxsV3JpdGVzXy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmxhc3RXcml0ZUlkXyA9IHRoaXMuYWxsV3JpdGVzX1t0aGlzLmFsbFdyaXRlc18ubGVuZ3RoIC0gMV0ud3JpdGVJZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sYXN0V3JpdGVJZF8gPSAtMTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgZmlsdGVyIHVzZWQgd2hlbiBjb25zdHJ1Y3RpbmcgdGhlIHRyZWUuIEtlZXAgZXZlcnl0aGluZyB0aGF0J3MgdmlzaWJsZS5cbiAgICpcbiAgICogQHBhcmFtIHshV3JpdGVSZWNvcmR9IHdyaXRlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBEZWZhdWx0RmlsdGVyXyh3cml0ZTogV3JpdGVSZWNvcmQpIHtcbiAgICByZXR1cm4gd3JpdGUudmlzaWJsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGF0aWMgbWV0aG9kLiBHaXZlbiBhbiBhcnJheSBvZiBXcml0ZVJlY29yZHMsIGEgZmlsdGVyIGZvciB3aGljaCBvbmVzIHRvIGluY2x1ZGUsIGFuZCBhIHBhdGgsIGNvbnN0cnVjdCB0aGUgdHJlZSBvZlxuICAgKiBldmVudCBkYXRhIGF0IHRoYXQgcGF0aC5cbiAgICpcbiAgICogQHBhcmFtIHshQXJyYXkuPCFXcml0ZVJlY29yZD59IHdyaXRlc1xuICAgKiBAcGFyYW0geyFmdW5jdGlvbighV3JpdGVSZWNvcmQpOmJvb2xlYW59IGZpbHRlclxuICAgKiBAcGFyYW0geyFQYXRofSB0cmVlUm9vdFxuICAgKiBAcmV0dXJuIHshQ29tcG91bmRXcml0ZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGxheWVyVHJlZV8oXG4gICAgd3JpdGVzOiBXcml0ZVJlY29yZFtdLFxuICAgIGZpbHRlcjogKHc6IFdyaXRlUmVjb3JkKSA9PiBib29sZWFuLFxuICAgIHRyZWVSb290OiBQYXRoXG4gICk6IENvbXBvdW5kV3JpdGUge1xuICAgIGxldCBjb21wb3VuZFdyaXRlID0gQ29tcG91bmRXcml0ZS5FbXB0eTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdyaXRlcy5sZW5ndGg7ICsraSkge1xuICAgICAgY29uc3Qgd3JpdGUgPSB3cml0ZXNbaV07XG4gICAgICAvLyBUaGVvcnksIGEgbGF0ZXIgc2V0IHdpbGwgZWl0aGVyOlxuICAgICAgLy8gYSkgYWJvcnQgYSByZWxldmFudCB0cmFuc2FjdGlvbiwgc28gbm8gbmVlZCB0byB3b3JyeSBhYm91dCBleGNsdWRpbmcgaXQgZnJvbSBjYWxjdWxhdGluZyB0aGF0IHRyYW5zYWN0aW9uXG4gICAgICAvLyBiKSBub3QgYmUgcmVsZXZhbnQgdG8gYSB0cmFuc2FjdGlvbiAoc2VwYXJhdGUgYnJhbmNoKSwgc28gYWdhaW4gd2lsbCBub3QgYWZmZWN0IHRoZSBkYXRhIGZvciB0aGF0IHRyYW5zYWN0aW9uXG4gICAgICBpZiAoZmlsdGVyKHdyaXRlKSkge1xuICAgICAgICBjb25zdCB3cml0ZVBhdGggPSB3cml0ZS5wYXRoO1xuICAgICAgICBsZXQgcmVsYXRpdmVQYXRoO1xuICAgICAgICBpZiAod3JpdGUuc25hcCkge1xuICAgICAgICAgIGlmICh0cmVlUm9vdC5jb250YWlucyh3cml0ZVBhdGgpKSB7XG4gICAgICAgICAgICByZWxhdGl2ZVBhdGggPSBQYXRoLnJlbGF0aXZlUGF0aCh0cmVlUm9vdCwgd3JpdGVQYXRoKTtcbiAgICAgICAgICAgIGNvbXBvdW5kV3JpdGUgPSBjb21wb3VuZFdyaXRlLmFkZFdyaXRlKHJlbGF0aXZlUGF0aCwgd3JpdGUuc25hcCk7XG4gICAgICAgICAgfSBlbHNlIGlmICh3cml0ZVBhdGguY29udGFpbnModHJlZVJvb3QpKSB7XG4gICAgICAgICAgICByZWxhdGl2ZVBhdGggPSBQYXRoLnJlbGF0aXZlUGF0aCh3cml0ZVBhdGgsIHRyZWVSb290KTtcbiAgICAgICAgICAgIGNvbXBvdW5kV3JpdGUgPSBjb21wb3VuZFdyaXRlLmFkZFdyaXRlKFxuICAgICAgICAgICAgICBQYXRoLkVtcHR5LFxuICAgICAgICAgICAgICB3cml0ZS5zbmFwLmdldENoaWxkKHJlbGF0aXZlUGF0aClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFRoZXJlIGlzIG5vIG92ZXJsYXAgYmV0d2VlbiByb290IHBhdGggYW5kIHdyaXRlIHBhdGgsIGlnbm9yZSB3cml0ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh3cml0ZS5jaGlsZHJlbikge1xuICAgICAgICAgIGlmICh0cmVlUm9vdC5jb250YWlucyh3cml0ZVBhdGgpKSB7XG4gICAgICAgICAgICByZWxhdGl2ZVBhdGggPSBQYXRoLnJlbGF0aXZlUGF0aCh0cmVlUm9vdCwgd3JpdGVQYXRoKTtcbiAgICAgICAgICAgIGNvbXBvdW5kV3JpdGUgPSBjb21wb3VuZFdyaXRlLmFkZFdyaXRlcyhcbiAgICAgICAgICAgICAgcmVsYXRpdmVQYXRoLFxuICAgICAgICAgICAgICB3cml0ZS5jaGlsZHJlblxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHdyaXRlUGF0aC5jb250YWlucyh0cmVlUm9vdCkpIHtcbiAgICAgICAgICAgIHJlbGF0aXZlUGF0aCA9IFBhdGgucmVsYXRpdmVQYXRoKHdyaXRlUGF0aCwgdHJlZVJvb3QpO1xuICAgICAgICAgICAgaWYgKHJlbGF0aXZlUGF0aC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgY29tcG91bmRXcml0ZSA9IGNvbXBvdW5kV3JpdGUuYWRkV3JpdGVzKFxuICAgICAgICAgICAgICAgIFBhdGguRW1wdHksXG4gICAgICAgICAgICAgICAgd3JpdGUuY2hpbGRyZW5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gc2FmZUdldCh3cml0ZS5jaGlsZHJlbiwgcmVsYXRpdmVQYXRoLmdldEZyb250KCkpO1xuICAgICAgICAgICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGVyZSBleGlzdHMgYSBjaGlsZCBpbiB0aGlzIG5vZGUgdGhhdCBtYXRjaGVzIHRoZSByb290IHBhdGhcbiAgICAgICAgICAgICAgICBjb25zdCBkZWVwTm9kZSA9IGNoaWxkLmdldENoaWxkKHJlbGF0aXZlUGF0aC5wb3BGcm9udCgpKTtcbiAgICAgICAgICAgICAgICBjb21wb3VuZFdyaXRlID0gY29tcG91bmRXcml0ZS5hZGRXcml0ZShQYXRoLkVtcHR5LCBkZWVwTm9kZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm8gb3ZlcmxhcCBiZXR3ZWVuIHJvb3QgcGF0aCBhbmQgd3JpdGUgcGF0aCwgaWdub3JlIHdyaXRlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IGFzc2VydGlvbkVycm9yKCdXcml0ZVJlY29yZCBzaG91bGQgaGF2ZSAuc25hcCBvciAuY2hpbGRyZW4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29tcG91bmRXcml0ZTtcbiAgfVxufVxuXG4vKipcbiAqIEEgV3JpdGVUcmVlUmVmIHdyYXBzIGEgV3JpdGVUcmVlIGFuZCBhIHBhdGgsIGZvciBjb252ZW5pZW50IGFjY2VzcyB0byBhIHBhcnRpY3VsYXIgc3VidHJlZS4gIEFsbCBvZiB0aGUgbWV0aG9kc1xuICoganVzdCBwcm94eSB0byB0aGUgdW5kZXJseWluZyBXcml0ZVRyZWUuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBjbGFzcyBXcml0ZVRyZWVSZWYge1xuICAvKipcbiAgICogVGhlIHBhdGggdG8gdGhpcyBwYXJ0aWN1bGFyIHdyaXRlIHRyZWUgcmVmLiBVc2VkIGZvciBjYWxsaW5nIG1ldGhvZHMgb24gd3JpdGVUcmVlXyB3aGlsZSBleHBvc2luZyBhIHNpbXBsZXJcbiAgICogaW50ZXJmYWNlIHRvIGNhbGxlcnMuXG4gICAqXG4gICAqIEB0eXBlIHshUGF0aH1cbiAgICogQHByaXZhdGVcbiAgICogQGNvbnN0XG4gICAqL1xuICBwcml2YXRlIHJlYWRvbmx5IHRyZWVQYXRoXzogUGF0aDtcblxuICAvKipcbiAgICogKiBBIHJlZmVyZW5jZSB0byB0aGUgYWN0dWFsIHRyZWUgb2Ygd3JpdGUgZGF0YS4gQWxsIG1ldGhvZHMgYXJlIHBhc3MtdGhyb3VnaCB0byB0aGUgdHJlZSwgYnV0IHdpdGggdGhlIGFwcHJvcHJpYXRlXG4gICAqIHBhdGggcHJlZml4ZWQuXG4gICAqXG4gICAqIFRoaXMgbGV0cyB1cyBtYWtlIGNoZWFwIHJlZmVyZW5jZXMgdG8gcG9pbnRzIGluIHRoZSB0cmVlIGZvciBzeW5jIHBvaW50cyB3aXRob3V0IGhhdmluZyB0byBjb3B5IGFuZCBtYWludGFpbiBhbGwgb2ZcbiAgICogdGhlIGRhdGEuXG4gICAqXG4gICAqIEB0eXBlIHshV3JpdGVUcmVlfVxuICAgKiBAcHJpdmF0ZVxuICAgKiBAY29uc3RcbiAgICovXG4gIHByaXZhdGUgcmVhZG9ubHkgd3JpdGVUcmVlXzogV3JpdGVUcmVlO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFQYXRofSBwYXRoXG4gICAqIEBwYXJhbSB7IVdyaXRlVHJlZX0gd3JpdGVUcmVlXG4gICAqL1xuICBjb25zdHJ1Y3RvcihwYXRoOiBQYXRoLCB3cml0ZVRyZWU6IFdyaXRlVHJlZSkge1xuICAgIHRoaXMudHJlZVBhdGhfID0gcGF0aDtcbiAgICB0aGlzLndyaXRlVHJlZV8gPSB3cml0ZVRyZWU7XG4gIH1cblxuICAvKipcbiAgICogSWYgcG9zc2libGUsIHJldHVybnMgYSBjb21wbGV0ZSBldmVudCBjYWNoZSwgdXNpbmcgdGhlIHVuZGVybHlpbmcgc2VydmVyIGRhdGEgaWYgcG9zc2libGUuIEluIGFkZGl0aW9uLCBjYW4gYmUgdXNlZFxuICAgKiB0byBnZXQgYSBjYWNoZSB0aGF0IGluY2x1ZGVzIGhpZGRlbiB3cml0ZXMsIGFuZCBleGNsdWRlcyBhcmJpdHJhcnkgd3JpdGVzLiBOb3RlIHRoYXQgY3VzdG9taXppbmcgdGhlIHJldHVybmVkIG5vZGVcbiAgICogY2FuIGxlYWQgdG8gYSBtb3JlIGV4cGVuc2l2ZSBjYWxjdWxhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHs/Tm9kZX0gY29tcGxldGVTZXJ2ZXJDYWNoZVxuICAgKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+PX0gd3JpdGVJZHNUb0V4Y2x1ZGUgT3B0aW9uYWwgd3JpdGVzIHRvIGV4Y2x1ZGUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGluY2x1ZGVIaWRkZW5Xcml0ZXMgRGVmYXVsdHMgdG8gZmFsc2UsIHdoZXRoZXIgb3Igbm90IHRvIGxheWVyIG9uIHdyaXRlcyB3aXRoIHZpc2libGUgc2V0IHRvIGZhbHNlXG4gICAqIEByZXR1cm4gez9Ob2RlfVxuICAgKi9cbiAgY2FsY0NvbXBsZXRlRXZlbnRDYWNoZShcbiAgICBjb21wbGV0ZVNlcnZlckNhY2hlOiBOb2RlIHwgbnVsbCxcbiAgICB3cml0ZUlkc1RvRXhjbHVkZT86IG51bWJlcltdLFxuICAgIGluY2x1ZGVIaWRkZW5Xcml0ZXM/OiBib29sZWFuXG4gICk6IE5vZGUgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy53cml0ZVRyZWVfLmNhbGNDb21wbGV0ZUV2ZW50Q2FjaGUoXG4gICAgICB0aGlzLnRyZWVQYXRoXyxcbiAgICAgIGNvbXBsZXRlU2VydmVyQ2FjaGUsXG4gICAgICB3cml0ZUlkc1RvRXhjbHVkZSxcbiAgICAgIGluY2x1ZGVIaWRkZW5Xcml0ZXNcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIElmIHBvc3NpYmxlLCByZXR1cm5zIGEgY2hpbGRyZW4gbm9kZSBjb250YWluaW5nIGFsbCBvZiB0aGUgY29tcGxldGUgY2hpbGRyZW4gd2UgaGF2ZSBkYXRhIGZvci4gVGhlIHJldHVybmVkIGRhdGEgaXMgYVxuICAgKiBtaXggb2YgdGhlIGdpdmVuIHNlcnZlciBkYXRhIGFuZCB3cml0ZSBkYXRhLlxuICAgKlxuICAgKiBAcGFyYW0gez9DaGlsZHJlbk5vZGV9IGNvbXBsZXRlU2VydmVyQ2hpbGRyZW5cbiAgICogQHJldHVybiB7IUNoaWxkcmVuTm9kZX1cbiAgICovXG4gIGNhbGNDb21wbGV0ZUV2ZW50Q2hpbGRyZW4oXG4gICAgY29tcGxldGVTZXJ2ZXJDaGlsZHJlbjogQ2hpbGRyZW5Ob2RlIHwgbnVsbFxuICApOiBDaGlsZHJlbk5vZGUge1xuICAgIHJldHVybiB0aGlzLndyaXRlVHJlZV8uY2FsY0NvbXBsZXRlRXZlbnRDaGlsZHJlbihcbiAgICAgIHRoaXMudHJlZVBhdGhfLFxuICAgICAgY29tcGxldGVTZXJ2ZXJDaGlsZHJlblxuICAgICkgYXMgQ2hpbGRyZW5Ob2RlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdpdmVuIHRoYXQgZWl0aGVyIHRoZSB1bmRlcmx5aW5nIHNlcnZlciBkYXRhIGhhcyB1cGRhdGVkIG9yIHRoZSBvdXRzdGFuZGluZyB3cml0ZXMgaGF2ZSB1cGRhdGVkLCBkZXRlcm1pbmUgd2hhdCxcbiAgICogaWYgYW55dGhpbmcsIG5lZWRzIHRvIGJlIGFwcGxpZWQgdG8gdGhlIGV2ZW50IGNhY2hlLlxuICAgKlxuICAgKiBQb3NzaWJpbGl0aWVzOlxuICAgKlxuICAgKiAxLiBObyB3cml0ZXMgYXJlIHNoYWRvd2luZy4gRXZlbnRzIHNob3VsZCBiZSByYWlzZWQsIHRoZSBzbmFwIHRvIGJlIGFwcGxpZWQgY29tZXMgZnJvbSB0aGUgc2VydmVyIGRhdGFcbiAgICpcbiAgICogMi4gU29tZSB3cml0ZSBpcyBjb21wbGV0ZWx5IHNoYWRvd2luZy4gTm8gZXZlbnRzIHRvIGJlIHJhaXNlZFxuICAgKlxuICAgKiAzLiBJcyBwYXJ0aWFsbHkgc2hhZG93ZWQuIEV2ZW50cyBzaG91bGQgYmUgcmFpc2VkXG4gICAqXG4gICAqIEVpdGhlciBleGlzdGluZ0V2ZW50U25hcCBvciBleGlzdGluZ1NlcnZlclNuYXAgbXVzdCBleGlzdCwgdGhpcyBpcyB2YWxpZGF0ZWQgdmlhIGFuIGFzc2VydFxuICAgKlxuICAgKiBAcGFyYW0geyFQYXRofSBwYXRoXG4gICAqIEBwYXJhbSB7P05vZGV9IGV4aXN0aW5nRXZlbnRTbmFwXG4gICAqIEBwYXJhbSB7P05vZGV9IGV4aXN0aW5nU2VydmVyU25hcFxuICAgKiBAcmV0dXJuIHs/Tm9kZX1cbiAgICovXG4gIGNhbGNFdmVudENhY2hlQWZ0ZXJTZXJ2ZXJPdmVyd3JpdGUoXG4gICAgcGF0aDogUGF0aCxcbiAgICBleGlzdGluZ0V2ZW50U25hcDogTm9kZSB8IG51bGwsXG4gICAgZXhpc3RpbmdTZXJ2ZXJTbmFwOiBOb2RlIHwgbnVsbFxuICApOiBOb2RlIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMud3JpdGVUcmVlXy5jYWxjRXZlbnRDYWNoZUFmdGVyU2VydmVyT3ZlcndyaXRlKFxuICAgICAgdGhpcy50cmVlUGF0aF8sXG4gICAgICBwYXRoLFxuICAgICAgZXhpc3RpbmdFdmVudFNuYXAsXG4gICAgICBleGlzdGluZ1NlcnZlclNuYXBcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBub2RlIGlmIHRoZXJlIGlzIGEgY29tcGxldGUgb3ZlcndyaXRlIGZvciB0aGlzIHBhdGguIE1vcmUgc3BlY2lmaWNhbGx5LCBpZiB0aGVyZSBpcyBhIHdyaXRlIGF0XG4gICAqIGEgaGlnaGVyIHBhdGgsIHRoaXMgd2lsbCByZXR1cm4gdGhlIGNoaWxkIG9mIHRoYXQgd3JpdGUgcmVsYXRpdmUgdG8gdGhlIHdyaXRlIGFuZCB0aGlzIHBhdGguXG4gICAqIFJldHVybnMgbnVsbCBpZiB0aGVyZSBpcyBubyB3cml0ZSBhdCB0aGlzIHBhdGguXG4gICAqXG4gICAqIEBwYXJhbSB7IVBhdGh9IHBhdGhcbiAgICogQHJldHVybiB7P05vZGV9XG4gICAqL1xuICBzaGFkb3dpbmdXcml0ZShwYXRoOiBQYXRoKTogTm9kZSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLndyaXRlVHJlZV8uc2hhZG93aW5nV3JpdGUodGhpcy50cmVlUGF0aF8uY2hpbGQocGF0aCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgd2hlbiBwcm9jZXNzaW5nIGNoaWxkIHJlbW92ZSBldmVudHMgb24gYSBxdWVyeS4gSWYgd2UgY2FuLCB3ZSBwdWxsIGluIGNoaWxkcmVuIHRoYXQgd2VyZSBvdXRzaWRlXG4gICAqIHRoZSB3aW5kb3csIGJ1dCBtYXkgbm93IGJlIGluIHRoZSB3aW5kb3dcbiAgICpcbiAgICogQHBhcmFtIHs/Tm9kZX0gY29tcGxldGVTZXJ2ZXJEYXRhXG4gICAqIEBwYXJhbSB7IU5hbWVkTm9kZX0gc3RhcnRQb3N0XG4gICAqIEBwYXJhbSB7IW51bWJlcn0gY291bnRcbiAgICogQHBhcmFtIHtib29sZWFufSByZXZlcnNlXG4gICAqIEBwYXJhbSB7IUluZGV4fSBpbmRleFxuICAgKiBAcmV0dXJuIHshQXJyYXkuPCFOYW1lZE5vZGU+fVxuICAgKi9cbiAgY2FsY0luZGV4ZWRTbGljZShcbiAgICBjb21wbGV0ZVNlcnZlckRhdGE6IE5vZGUgfCBudWxsLFxuICAgIHN0YXJ0UG9zdDogTmFtZWROb2RlLFxuICAgIGNvdW50OiBudW1iZXIsXG4gICAgcmV2ZXJzZTogYm9vbGVhbixcbiAgICBpbmRleDogSW5kZXhcbiAgKTogTmFtZWROb2RlW10ge1xuICAgIHJldHVybiB0aGlzLndyaXRlVHJlZV8uY2FsY0luZGV4ZWRTbGljZShcbiAgICAgIHRoaXMudHJlZVBhdGhfLFxuICAgICAgY29tcGxldGVTZXJ2ZXJEYXRhLFxuICAgICAgc3RhcnRQb3N0LFxuICAgICAgY291bnQsXG4gICAgICByZXZlcnNlLFxuICAgICAgaW5kZXhcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjb21wbGV0ZSBjaGlsZCBmb3IgYSBnaXZlbiBzZXJ2ZXIgc25hcCBhZnRlciBhcHBseWluZyBhbGwgdXNlciB3cml0ZXMgb3IgbnVsbCBpZiB0aGVyZSBpcyBub1xuICAgKiBjb21wbGV0ZSBjaGlsZCBmb3IgdGhpcyBDaGlsZEtleS5cbiAgICpcbiAgICogQHBhcmFtIHshc3RyaW5nfSBjaGlsZEtleVxuICAgKiBAcGFyYW0geyFDYWNoZU5vZGV9IGV4aXN0aW5nU2VydmVyQ2FjaGVcbiAgICogQHJldHVybiB7P05vZGV9XG4gICAqL1xuICBjYWxjQ29tcGxldGVDaGlsZChcbiAgICBjaGlsZEtleTogc3RyaW5nLFxuICAgIGV4aXN0aW5nU2VydmVyQ2FjaGU6IENhY2hlTm9kZVxuICApOiBOb2RlIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMud3JpdGVUcmVlXy5jYWxjQ29tcGxldGVDaGlsZChcbiAgICAgIHRoaXMudHJlZVBhdGhfLFxuICAgICAgY2hpbGRLZXksXG4gICAgICBleGlzdGluZ1NlcnZlckNhY2hlXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYSBXcml0ZVRyZWVSZWYgZm9yIGEgY2hpbGQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjaGlsZE5hbWVcbiAgICogQHJldHVybiB7IVdyaXRlVHJlZVJlZn1cbiAgICovXG4gIGNoaWxkKGNoaWxkTmFtZTogc3RyaW5nKTogV3JpdGVUcmVlUmVmIHtcbiAgICByZXR1cm4gbmV3IFdyaXRlVHJlZVJlZih0aGlzLnRyZWVQYXRoXy5jaGlsZChjaGlsZE5hbWUpLCB0aGlzLndyaXRlVHJlZV8pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vdXRpbC9QYXRoJztcbmltcG9ydCB7IE9wZXJhdGlvbiwgT3BlcmF0aW9uU291cmNlLCBPcGVyYXRpb25UeXBlIH0gZnJvbSAnLi9PcGVyYXRpb24nO1xuaW1wb3J0IHsgSW1tdXRhYmxlVHJlZSB9IGZyb20gJy4uL3V0aWwvSW1tdXRhYmxlVHJlZSc7XG5cbmV4cG9ydCBjbGFzcyBBY2tVc2VyV3JpdGUgaW1wbGVtZW50cyBPcGVyYXRpb24ge1xuICAvKiogQGluaGVyaXREb2MgKi9cbiAgdHlwZSA9IE9wZXJhdGlvblR5cGUuQUNLX1VTRVJfV1JJVEU7XG5cbiAgLyoqIEBpbmhlcml0RG9jICovXG4gIHNvdXJjZSA9IE9wZXJhdGlvblNvdXJjZS5Vc2VyO1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyFQYXRofSBwYXRoXG4gICAqIEBwYXJhbSB7IUltbXV0YWJsZVRyZWU8IWJvb2xlYW4+fSBhZmZlY3RlZFRyZWUgQSB0cmVlIGNvbnRhaW5pbmcgdHJ1ZSBmb3IgZWFjaCBhZmZlY3RlZCBwYXRoLiBBZmZlY3RlZCBwYXRocyBjYW4ndCBvdmVybGFwLlxuICAgKiBAcGFyYW0geyFib29sZWFufSByZXZlcnRcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIC8qKkBpbmhlcml0RG9jICovIHB1YmxpYyBwYXRoOiBQYXRoLFxuICAgIC8qKkBpbmhlcml0RG9jICovIHB1YmxpYyBhZmZlY3RlZFRyZWU6IEltbXV0YWJsZVRyZWU8Ym9vbGVhbj4sXG4gICAgLyoqQGluaGVyaXREb2MgKi8gcHVibGljIHJldmVydDogYm9vbGVhblxuICApIHt9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBvcGVyYXRpb25Gb3JDaGlsZChjaGlsZE5hbWU6IHN0cmluZyk6IEFja1VzZXJXcml0ZSB7XG4gICAgaWYgKCF0aGlzLnBhdGguaXNFbXB0eSgpKSB7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIHRoaXMucGF0aC5nZXRGcm9udCgpID09PSBjaGlsZE5hbWUsXG4gICAgICAgICdvcGVyYXRpb25Gb3JDaGlsZCBjYWxsZWQgZm9yIHVucmVsYXRlZCBjaGlsZC4nXG4gICAgICApO1xuICAgICAgcmV0dXJuIG5ldyBBY2tVc2VyV3JpdGUoXG4gICAgICAgIHRoaXMucGF0aC5wb3BGcm9udCgpLFxuICAgICAgICB0aGlzLmFmZmVjdGVkVHJlZSxcbiAgICAgICAgdGhpcy5yZXZlcnRcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmFmZmVjdGVkVHJlZS52YWx1ZSAhPSBudWxsKSB7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIHRoaXMuYWZmZWN0ZWRUcmVlLmNoaWxkcmVuLmlzRW1wdHkoKSxcbiAgICAgICAgJ2FmZmVjdGVkVHJlZSBzaG91bGQgbm90IGhhdmUgb3ZlcmxhcHBpbmcgYWZmZWN0ZWQgcGF0aHMuJ1xuICAgICAgKTtcbiAgICAgIC8vIEFsbCBjaGlsZCBsb2NhdGlvbnMgYXJlIGFmZmVjdGVkIGFzIHdlbGw7IGp1c3QgcmV0dXJuIHNhbWUgb3BlcmF0aW9uLlxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNoaWxkVHJlZSA9IHRoaXMuYWZmZWN0ZWRUcmVlLnN1YnRyZWUobmV3IFBhdGgoY2hpbGROYW1lKSk7XG4gICAgICByZXR1cm4gbmV3IEFja1VzZXJXcml0ZShQYXRoLkVtcHR5LCBjaGlsZFRyZWUsIHRoaXMucmV2ZXJ0KTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi91dGlsL1BhdGgnO1xuaW1wb3J0IHsgT3BlcmF0aW9uLCBPcGVyYXRpb25Tb3VyY2UsIE9wZXJhdGlvblR5cGUgfSBmcm9tICcuL09wZXJhdGlvbic7XG5cbi8qKlxuICogQHBhcmFtIHshT3BlcmF0aW9uU291cmNlfSBzb3VyY2VcbiAqIEBwYXJhbSB7IVBhdGh9IHBhdGhcbiAqIEBjb25zdHJ1Y3RvclxuICogQGltcGxlbWVudHMge09wZXJhdGlvbn1cbiAqL1xuZXhwb3J0IGNsYXNzIExpc3RlbkNvbXBsZXRlIGltcGxlbWVudHMgT3BlcmF0aW9uIHtcbiAgLyoqIEBpbmhlcml0RG9jICovXG4gIHR5cGUgPSBPcGVyYXRpb25UeXBlLkxJU1RFTl9DT01QTEVURTtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgc291cmNlOiBPcGVyYXRpb25Tb3VyY2UsIHB1YmxpYyBwYXRoOiBQYXRoKSB7fVxuXG4gIG9wZXJhdGlvbkZvckNoaWxkKGNoaWxkTmFtZTogc3RyaW5nKTogTGlzdGVuQ29tcGxldGUge1xuICAgIGlmICh0aGlzLnBhdGguaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gbmV3IExpc3RlbkNvbXBsZXRlKHRoaXMuc291cmNlLCBQYXRoLkVtcHR5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBMaXN0ZW5Db21wbGV0ZSh0aGlzLnNvdXJjZSwgdGhpcy5wYXRoLnBvcEZyb250KCkpO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgT3BlcmF0aW9uLCBPcGVyYXRpb25Tb3VyY2UsIE9wZXJhdGlvblR5cGUgfSBmcm9tICcuL09wZXJhdGlvbic7XG5pbXBvcnQgeyBPdmVyd3JpdGUgfSBmcm9tICcuL092ZXJ3cml0ZSc7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vdXRpbC9QYXRoJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IEltbXV0YWJsZVRyZWUgfSBmcm9tICcuLi91dGlsL0ltbXV0YWJsZVRyZWUnO1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL3NuYXAvTm9kZSc7XG5cbi8qKlxuICogQHBhcmFtIHshT3BlcmF0aW9uU291cmNlfSBzb3VyY2VcbiAqIEBwYXJhbSB7IVBhdGh9IHBhdGhcbiAqIEBwYXJhbSB7IUltbXV0YWJsZVRyZWUuPCFOb2RlPn0gY2hpbGRyZW5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGltcGxlbWVudHMge09wZXJhdGlvbn1cbiAqL1xuZXhwb3J0IGNsYXNzIE1lcmdlIGltcGxlbWVudHMgT3BlcmF0aW9uIHtcbiAgLyoqIEBpbmhlcml0RG9jICovXG4gIHR5cGUgPSBPcGVyYXRpb25UeXBlLk1FUkdFO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIC8qKkBpbmhlcml0RG9jICovIHB1YmxpYyBzb3VyY2U6IE9wZXJhdGlvblNvdXJjZSxcbiAgICAvKipAaW5oZXJpdERvYyAqLyBwdWJsaWMgcGF0aDogUGF0aCxcbiAgICAvKipAaW5oZXJpdERvYyAqLyBwdWJsaWMgY2hpbGRyZW46IEltbXV0YWJsZVRyZWU8Tm9kZT5cbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgb3BlcmF0aW9uRm9yQ2hpbGQoY2hpbGROYW1lOiBzdHJpbmcpOiBPcGVyYXRpb24ge1xuICAgIGlmICh0aGlzLnBhdGguaXNFbXB0eSgpKSB7XG4gICAgICBjb25zdCBjaGlsZFRyZWUgPSB0aGlzLmNoaWxkcmVuLnN1YnRyZWUobmV3IFBhdGgoY2hpbGROYW1lKSk7XG4gICAgICBpZiAoY2hpbGRUcmVlLmlzRW1wdHkoKSkge1xuICAgICAgICAvLyBUaGlzIGNoaWxkIGlzIHVuYWZmZWN0ZWRcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9IGVsc2UgaWYgKGNoaWxkVHJlZS52YWx1ZSkge1xuICAgICAgICAvLyBXZSBoYXZlIGEgc25hcHNob3QgZm9yIHRoZSBjaGlsZCBpbiBxdWVzdGlvbi4gIFRoaXMgYmVjb21lcyBhbiBvdmVyd3JpdGUgb2YgdGhlIGNoaWxkLlxuICAgICAgICByZXR1cm4gbmV3IE92ZXJ3cml0ZSh0aGlzLnNvdXJjZSwgUGF0aC5FbXB0eSwgY2hpbGRUcmVlLnZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFRoaXMgaXMgYSBtZXJnZSBhdCBhIGRlZXBlciBsZXZlbFxuICAgICAgICByZXR1cm4gbmV3IE1lcmdlKHRoaXMuc291cmNlLCBQYXRoLkVtcHR5LCBjaGlsZFRyZWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIHRoaXMucGF0aC5nZXRGcm9udCgpID09PSBjaGlsZE5hbWUsXG4gICAgICAgIFwiQ2FuJ3QgZ2V0IGEgbWVyZ2UgZm9yIGEgY2hpbGQgbm90IG9uIHRoZSBwYXRoIG9mIHRoZSBvcGVyYXRpb25cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBuZXcgTWVyZ2UodGhpcy5zb3VyY2UsIHRoaXMucGF0aC5wb3BGcm9udCgpLCB0aGlzLmNoaWxkcmVuKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIChcbiAgICAgICdPcGVyYXRpb24oJyArXG4gICAgICB0aGlzLnBhdGggK1xuICAgICAgJzogJyArXG4gICAgICB0aGlzLnNvdXJjZS50b1N0cmluZygpICtcbiAgICAgICcgbWVyZ2U6ICcgK1xuICAgICAgdGhpcy5jaGlsZHJlbi50b1N0cmluZygpICtcbiAgICAgICcpJ1xuICAgICk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi91dGlsL1BhdGgnO1xuXG4vKipcbiAqXG4gKiBAZW51bVxuICovXG5leHBvcnQgZW51bSBPcGVyYXRpb25UeXBlIHtcbiAgT1ZFUldSSVRFLFxuICBNRVJHRSxcbiAgQUNLX1VTRVJfV1JJVEUsXG4gIExJU1RFTl9DT01QTEVURVxufVxuXG4vKipcbiAqIEBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBPcGVyYXRpb24ge1xuICAvKipcbiAgICogQHR5cGUgeyFPcGVyYXRpb25Tb3VyY2V9XG4gICAqL1xuICBzb3VyY2U6IE9wZXJhdGlvblNvdXJjZTtcblxuICAvKipcbiAgICogQHR5cGUgeyFPcGVyYXRpb25UeXBlfVxuICAgKi9cbiAgdHlwZTogT3BlcmF0aW9uVHlwZTtcblxuICAvKipcbiAgICogQHR5cGUgeyFQYXRofVxuICAgKi9cbiAgcGF0aDogUGF0aDtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNoaWxkTmFtZVxuICAgKiBAcmV0dXJuIHs/T3BlcmF0aW9ufVxuICAgKi9cbiAgb3BlcmF0aW9uRm9yQ2hpbGQoY2hpbGROYW1lOiBzdHJpbmcpOiBPcGVyYXRpb24gfCBudWxsO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZnJvbVVzZXJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZnJvbVNlcnZlclxuICogQHBhcmFtIHs/c3RyaW5nfSBxdWVyeUlkXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHRhZ2dlZFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBjbGFzcyBPcGVyYXRpb25Tb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgZnJvbVVzZXI6IGJvb2xlYW4sXG4gICAgcHVibGljIGZyb21TZXJ2ZXI6IGJvb2xlYW4sXG4gICAgcHVibGljIHF1ZXJ5SWQ6IHN0cmluZyB8IG51bGwsXG4gICAgcHVibGljIHRhZ2dlZDogYm9vbGVhblxuICApIHtcbiAgICBhc3NlcnQoIXRhZ2dlZCB8fCBmcm9tU2VydmVyLCAnVGFnZ2VkIHF1ZXJpZXMgbXVzdCBiZSBmcm9tIHNlcnZlci4nKTtcbiAgfVxuICAvKipcbiAgICogQGNvbnN0XG4gICAqIEB0eXBlIHshT3BlcmF0aW9uU291cmNlfVxuICAgKi9cbiAgc3RhdGljIFVzZXIgPSBuZXcgT3BlcmF0aW9uU291cmNlKFxuICAgIC8qZnJvbVVzZXI9Ki8gdHJ1ZSxcbiAgICBmYWxzZSxcbiAgICBudWxsLFxuICAgIC8qdGFnZ2VkPSovIGZhbHNlXG4gICk7XG5cbiAgLyoqXG4gICAqIEBjb25zdFxuICAgKiBAdHlwZSB7IU9wZXJhdGlvblNvdXJjZX1cbiAgICovXG4gIHN0YXRpYyBTZXJ2ZXIgPSBuZXcgT3BlcmF0aW9uU291cmNlKFxuICAgIGZhbHNlLFxuICAgIC8qZnJvbVNlcnZlcj0qLyB0cnVlLFxuICAgIG51bGwsXG4gICAgLyp0YWdnZWQ9Ki8gZmFsc2VcbiAgKTtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHF1ZXJ5SWRcbiAgICogQHJldHVybiB7IU9wZXJhdGlvblNvdXJjZX1cbiAgICovXG4gIHN0YXRpYyBmb3JTZXJ2ZXJUYWdnZWRRdWVyeSA9IGZ1bmN0aW9uKHF1ZXJ5SWQ6IHN0cmluZyk6IE9wZXJhdGlvblNvdXJjZSB7XG4gICAgcmV0dXJuIG5ldyBPcGVyYXRpb25Tb3VyY2UoXG4gICAgICBmYWxzZSxcbiAgICAgIC8qZnJvbVNlcnZlcj0qLyB0cnVlLFxuICAgICAgcXVlcnlJZCxcbiAgICAgIC8qdGFnZ2VkPSovIHRydWVcbiAgICApO1xuICB9O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgT3BlcmF0aW9uLCBPcGVyYXRpb25Tb3VyY2UsIE9wZXJhdGlvblR5cGUgfSBmcm9tICcuL09wZXJhdGlvbic7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vdXRpbC9QYXRoJztcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi9zbmFwL05vZGUnO1xuXG4vKipcbiAqIEBwYXJhbSB7IU9wZXJhdGlvblNvdXJjZX0gc291cmNlXG4gKiBAcGFyYW0geyFQYXRofSBwYXRoXG4gKiBAcGFyYW0geyFOb2RlfSBzbmFwXG4gKiBAY29uc3RydWN0b3JcbiAqIEBpbXBsZW1lbnRzIHtPcGVyYXRpb259XG4gKi9cbmV4cG9ydCBjbGFzcyBPdmVyd3JpdGUgaW1wbGVtZW50cyBPcGVyYXRpb24ge1xuICAvKiogQGluaGVyaXREb2MgKi9cbiAgdHlwZSA9IE9wZXJhdGlvblR5cGUuT1ZFUldSSVRFO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBzb3VyY2U6IE9wZXJhdGlvblNvdXJjZSxcbiAgICBwdWJsaWMgcGF0aDogUGF0aCxcbiAgICBwdWJsaWMgc25hcDogTm9kZVxuICApIHt9XG5cbiAgb3BlcmF0aW9uRm9yQ2hpbGQoY2hpbGROYW1lOiBzdHJpbmcpOiBPdmVyd3JpdGUge1xuICAgIGlmICh0aGlzLnBhdGguaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gbmV3IE92ZXJ3cml0ZShcbiAgICAgICAgdGhpcy5zb3VyY2UsXG4gICAgICAgIFBhdGguRW1wdHksXG4gICAgICAgIHRoaXMuc25hcC5nZXRJbW1lZGlhdGVDaGlsZChjaGlsZE5hbWUpXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IE92ZXJ3cml0ZSh0aGlzLnNvdXJjZSwgdGhpcy5wYXRoLnBvcEZyb250KCksIHRoaXMuc25hcCk7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBzaGExLCBNQVhfTkFNRSwgTUlOX05BTUUgfSBmcm9tICcuLi91dGlsL3V0aWwnO1xuaW1wb3J0IHsgU29ydGVkTWFwLCBTb3J0ZWRNYXBJdGVyYXRvciB9IGZyb20gJy4uL3V0aWwvU29ydGVkTWFwJztcbmltcG9ydCB7IE5vZGUsIE5hbWVkTm9kZSB9IGZyb20gJy4vTm9kZSc7XG5pbXBvcnQgeyB2YWxpZGF0ZVByaW9yaXR5Tm9kZSwgcHJpb3JpdHlIYXNoVGV4dCwgc2V0TWF4Tm9kZSB9IGZyb20gJy4vc25hcCc7XG5pbXBvcnQge1xuICBQUklPUklUWV9JTkRFWCxcbiAgc2V0TWF4Tm9kZSBhcyBzZXRQcmlvcml0eU1heE5vZGVcbn0gZnJvbSAnLi9pbmRleGVzL1ByaW9yaXR5SW5kZXgnO1xuaW1wb3J0IHsgS0VZX0lOREVYLCBLZXlJbmRleCB9IGZyb20gJy4vaW5kZXhlcy9LZXlJbmRleCc7XG5pbXBvcnQgeyBJbmRleE1hcCB9IGZyb20gJy4vSW5kZXhNYXAnO1xuaW1wb3J0IHsgTGVhZk5vZGUgfSBmcm9tICcuL0xlYWZOb2RlJztcbmltcG9ydCB7IE5BTUVfQ09NUEFSQVRPUiB9IGZyb20gJy4vY29tcGFyYXRvcnMnO1xuaW1wb3J0IHsgSW5kZXggfSBmcm9tICcuL2luZGV4ZXMvSW5kZXgnO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL3V0aWwvUGF0aCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hpbGRyZW5Ob2RlQ29uc3RydWN0b3Ige1xuICBuZXcgKFxuICAgIGNoaWxkcmVuXzogU29ydGVkTWFwPHN0cmluZywgTm9kZT4sXG4gICAgcHJpb3JpdHlOb2RlXzogTm9kZSB8IG51bGwsXG4gICAgaW5kZXhNYXBfOiBJbmRleE1hcFxuICApOiBDaGlsZHJlbk5vZGU7XG4gIEVNUFRZX05PREU6IENoaWxkcmVuTm9kZTtcbn1cblxuLy8gVE9ETzogRm9yIG1lbW9yeSBzYXZpbmdzLCBkb24ndCBzdG9yZSBwcmlvcml0eU5vZGVfIGlmIGl0J3MgZW1wdHkuXG5cbmxldCBFTVBUWV9OT0RFOiBDaGlsZHJlbk5vZGU7XG5cbi8qKlxuICogQ2hpbGRyZW5Ob2RlIGlzIGEgY2xhc3MgZm9yIHN0b3JpbmcgaW50ZXJuYWwgbm9kZXMgaW4gYSBEYXRhU25hcHNob3RcbiAqIChpLmUuIG5vZGVzIHdpdGggY2hpbGRyZW4pLiAgSXQgaW1wbGVtZW50cyBOb2RlIGFuZCBzdG9yZXMgdGhlXG4gKiBsaXN0IG9mIGNoaWxkcmVuIGluIHRoZSBjaGlsZHJlbiBwcm9wZXJ0eSwgc29ydGVkIGJ5IGNoaWxkIG5hbWUuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAaW1wbGVtZW50cyB7Tm9kZX1cbiAqL1xuZXhwb3J0IGNsYXNzIENoaWxkcmVuTm9kZSBpbXBsZW1lbnRzIE5vZGUge1xuICBwcml2YXRlIGxhenlIYXNoXzogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgc3RhdGljIGdldCBFTVBUWV9OT0RFKCk6IENoaWxkcmVuTm9kZSB7XG4gICAgcmV0dXJuIChcbiAgICAgIEVNUFRZX05PREUgfHxcbiAgICAgIChFTVBUWV9OT0RFID0gbmV3IENoaWxkcmVuTm9kZShcbiAgICAgICAgbmV3IFNvcnRlZE1hcDxzdHJpbmcsIE5vZGU+KE5BTUVfQ09NUEFSQVRPUiksXG4gICAgICAgIG51bGwsXG4gICAgICAgIEluZGV4TWFwLkRlZmF1bHRcbiAgICAgICkpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyFTb3J0ZWRNYXAuPHN0cmluZywgIU5vZGU+fSBjaGlsZHJlbl8gTGlzdCBvZiBjaGlsZHJlblxuICAgKiBvZiB0aGlzIG5vZGUuLlxuICAgKiBAcGFyYW0gez9Ob2RlfSBwcmlvcml0eU5vZGVfIFRoZSBwcmlvcml0eSBvZiB0aGlzIG5vZGUgKGFzIGEgc25hcHNob3Qgbm9kZSkuXG4gICAqIEBwYXJhbSB7IUluZGV4TWFwfSBpbmRleE1hcF9cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgY2hpbGRyZW5fOiBTb3J0ZWRNYXA8c3RyaW5nLCBOb2RlPixcbiAgICBwcml2YXRlIHJlYWRvbmx5IHByaW9yaXR5Tm9kZV86IE5vZGUgfCBudWxsLFxuICAgIHByaXZhdGUgaW5kZXhNYXBfOiBJbmRleE1hcFxuICApIHtcbiAgICAvKipcbiAgICAgKiBOb3RlOiBUaGUgb25seSByZWFzb24gd2UgYWxsb3cgbnVsbCBwcmlvcml0eSBpcyBmb3IgRU1QVFlfTk9ERSwgc2luY2Ugd2UgY2FuJ3QgdXNlXG4gICAgICogRU1QVFlfTk9ERSBhcyB0aGUgcHJpb3JpdHkgb2YgRU1QVFlfTk9ERS4gIFdlIG1pZ2h0IHdhbnQgdG8gY29uc2lkZXIgbWFraW5nIEVNUFRZX05PREUgaXRzIG93blxuICAgICAqIGNsYXNzIGluc3RlYWQgb2YgYW4gZW1wdHkgQ2hpbGRyZW5Ob2RlLlxuICAgICAqL1xuICAgIGlmICh0aGlzLnByaW9yaXR5Tm9kZV8pIHtcbiAgICAgIHZhbGlkYXRlUHJpb3JpdHlOb2RlKHRoaXMucHJpb3JpdHlOb2RlXyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY2hpbGRyZW5fLmlzRW1wdHkoKSkge1xuICAgICAgYXNzZXJ0KFxuICAgICAgICAhdGhpcy5wcmlvcml0eU5vZGVfIHx8IHRoaXMucHJpb3JpdHlOb2RlXy5pc0VtcHR5KCksXG4gICAgICAgICdBbiBlbXB0eSBub2RlIGNhbm5vdCBoYXZlIGEgcHJpb3JpdHknXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW5oZXJpdERvYyAqL1xuICBpc0xlYWZOb2RlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdERvYyAqL1xuICBnZXRQcmlvcml0eSgpOiBOb2RlIHtcbiAgICByZXR1cm4gdGhpcy5wcmlvcml0eU5vZGVfIHx8IEVNUFRZX05PREU7XG4gIH1cblxuICAvKiogQGluaGVyaXREb2MgKi9cbiAgdXBkYXRlUHJpb3JpdHkobmV3UHJpb3JpdHlOb2RlOiBOb2RlKTogTm9kZSB7XG4gICAgaWYgKHRoaXMuY2hpbGRyZW5fLmlzRW1wdHkoKSkge1xuICAgICAgLy8gRG9uJ3QgYWxsb3cgcHJpb3JpdGllcyBvbiBlbXB0eSBub2Rlc1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgQ2hpbGRyZW5Ob2RlKHRoaXMuY2hpbGRyZW5fLCBuZXdQcmlvcml0eU5vZGUsIHRoaXMuaW5kZXhNYXBfKTtcbiAgICB9XG4gIH1cblxuICAvKiogQGluaGVyaXREb2MgKi9cbiAgZ2V0SW1tZWRpYXRlQ2hpbGQoY2hpbGROYW1lOiBzdHJpbmcpOiBOb2RlIHtcbiAgICAvLyBIYWNrIHRvIHRyZWF0IHByaW9yaXR5IGFzIGEgcmVndWxhciBjaGlsZFxuICAgIGlmIChjaGlsZE5hbWUgPT09ICcucHJpb3JpdHknKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRQcmlvcml0eSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjaGlsZCA9IHRoaXMuY2hpbGRyZW5fLmdldChjaGlsZE5hbWUpO1xuICAgICAgcmV0dXJuIGNoaWxkID09PSBudWxsID8gRU1QVFlfTk9ERSA6IGNoaWxkO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW5oZXJpdERvYyAqL1xuICBnZXRDaGlsZChwYXRoOiBQYXRoKTogTm9kZSB7XG4gICAgY29uc3QgZnJvbnQgPSBwYXRoLmdldEZyb250KCk7XG4gICAgaWYgKGZyb250ID09PSBudWxsKSByZXR1cm4gdGhpcztcblxuICAgIHJldHVybiB0aGlzLmdldEltbWVkaWF0ZUNoaWxkKGZyb250KS5nZXRDaGlsZChwYXRoLnBvcEZyb250KCkpO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0RG9jICovXG4gIGhhc0NoaWxkKGNoaWxkTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY2hpbGRyZW5fLmdldChjaGlsZE5hbWUpICE9PSBudWxsO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0RG9jICovXG4gIHVwZGF0ZUltbWVkaWF0ZUNoaWxkKGNoaWxkTmFtZTogc3RyaW5nLCBuZXdDaGlsZE5vZGU6IE5vZGUpOiBOb2RlIHtcbiAgICBhc3NlcnQobmV3Q2hpbGROb2RlLCAnV2Ugc2hvdWxkIGFsd2F5cyBiZSBwYXNzaW5nIHNuYXBzaG90IG5vZGVzJyk7XG4gICAgaWYgKGNoaWxkTmFtZSA9PT0gJy5wcmlvcml0eScpIHtcbiAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVByaW9yaXR5KG5ld0NoaWxkTm9kZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG5hbWVkTm9kZSA9IG5ldyBOYW1lZE5vZGUoY2hpbGROYW1lLCBuZXdDaGlsZE5vZGUpO1xuICAgICAgbGV0IG5ld0NoaWxkcmVuLCBuZXdJbmRleE1hcCwgbmV3UHJpb3JpdHk7XG4gICAgICBpZiAobmV3Q2hpbGROb2RlLmlzRW1wdHkoKSkge1xuICAgICAgICBuZXdDaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW5fLnJlbW92ZShjaGlsZE5hbWUpO1xuICAgICAgICBuZXdJbmRleE1hcCA9IHRoaXMuaW5kZXhNYXBfLnJlbW92ZUZyb21JbmRleGVzKFxuICAgICAgICAgIG5hbWVkTm9kZSxcbiAgICAgICAgICB0aGlzLmNoaWxkcmVuX1xuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3Q2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuXy5pbnNlcnQoY2hpbGROYW1lLCBuZXdDaGlsZE5vZGUpO1xuICAgICAgICBuZXdJbmRleE1hcCA9IHRoaXMuaW5kZXhNYXBfLmFkZFRvSW5kZXhlcyhuYW1lZE5vZGUsIHRoaXMuY2hpbGRyZW5fKTtcbiAgICAgIH1cblxuICAgICAgbmV3UHJpb3JpdHkgPSBuZXdDaGlsZHJlbi5pc0VtcHR5KCkgPyBFTVBUWV9OT0RFIDogdGhpcy5wcmlvcml0eU5vZGVfO1xuICAgICAgcmV0dXJuIG5ldyBDaGlsZHJlbk5vZGUobmV3Q2hpbGRyZW4sIG5ld1ByaW9yaXR5LCBuZXdJbmRleE1hcCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbmhlcml0RG9jICovXG4gIHVwZGF0ZUNoaWxkKHBhdGg6IFBhdGgsIG5ld0NoaWxkTm9kZTogTm9kZSk6IE5vZGUge1xuICAgIGNvbnN0IGZyb250ID0gcGF0aC5nZXRGcm9udCgpO1xuICAgIGlmIChmcm9udCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG5ld0NoaWxkTm9kZTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXNzZXJ0KFxuICAgICAgICBwYXRoLmdldEZyb250KCkgIT09ICcucHJpb3JpdHknIHx8IHBhdGguZ2V0TGVuZ3RoKCkgPT09IDEsXG4gICAgICAgICcucHJpb3JpdHkgbXVzdCBiZSB0aGUgbGFzdCB0b2tlbiBpbiBhIHBhdGgnXG4gICAgICApO1xuICAgICAgY29uc3QgbmV3SW1tZWRpYXRlQ2hpbGQgPSB0aGlzLmdldEltbWVkaWF0ZUNoaWxkKGZyb250KS51cGRhdGVDaGlsZChcbiAgICAgICAgcGF0aC5wb3BGcm9udCgpLFxuICAgICAgICBuZXdDaGlsZE5vZGVcbiAgICAgICk7XG4gICAgICByZXR1cm4gdGhpcy51cGRhdGVJbW1lZGlhdGVDaGlsZChmcm9udCwgbmV3SW1tZWRpYXRlQ2hpbGQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW5oZXJpdERvYyAqL1xuICBpc0VtcHR5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNoaWxkcmVuXy5pc0VtcHR5KCk7XG4gIH1cblxuICAvKiogQGluaGVyaXREb2MgKi9cbiAgbnVtQ2hpbGRyZW4oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jaGlsZHJlbl8uY291bnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7UmVnRXhwfVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgSU5URUdFUl9SRUdFWFBfID0gL14oMHxbMS05XVxcZCopJC87XG5cbiAgLyoqIEBpbmhlcml0RG9jICovXG4gIHZhbChleHBvcnRGb3JtYXQ/OiBib29sZWFuKTogb2JqZWN0IHtcbiAgICBpZiAodGhpcy5pc0VtcHR5KCkpIHJldHVybiBudWxsO1xuXG4gICAgY29uc3Qgb2JqOiB7IFtrOiBzdHJpbmddOiBPYmplY3QgfSA9IHt9O1xuICAgIGxldCBudW1LZXlzID0gMCxcbiAgICAgIG1heEtleSA9IDAsXG4gICAgICBhbGxJbnRlZ2VyS2V5cyA9IHRydWU7XG4gICAgdGhpcy5mb3JFYWNoQ2hpbGQoUFJJT1JJVFlfSU5ERVgsIGZ1bmN0aW9uKGtleTogc3RyaW5nLCBjaGlsZE5vZGU6IE5vZGUpIHtcbiAgICAgIG9ialtrZXldID0gY2hpbGROb2RlLnZhbChleHBvcnRGb3JtYXQpO1xuXG4gICAgICBudW1LZXlzKys7XG4gICAgICBpZiAoYWxsSW50ZWdlcktleXMgJiYgQ2hpbGRyZW5Ob2RlLklOVEVHRVJfUkVHRVhQXy50ZXN0KGtleSkpIHtcbiAgICAgICAgbWF4S2V5ID0gTWF0aC5tYXgobWF4S2V5LCBOdW1iZXIoa2V5KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGxJbnRlZ2VyS2V5cyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKCFleHBvcnRGb3JtYXQgJiYgYWxsSW50ZWdlcktleXMgJiYgbWF4S2V5IDwgMiAqIG51bUtleXMpIHtcbiAgICAgIC8vIGNvbnZlcnQgdG8gYXJyYXkuXG4gICAgICBjb25zdCBhcnJheTogT2JqZWN0W10gPSBbXTtcbiAgICAgIGZvciAobGV0IGtleSBpbiBvYmopIGFycmF5WyhrZXkgYXMgYW55KSBhcyBudW1iZXJdID0gb2JqW2tleV07XG5cbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGV4cG9ydEZvcm1hdCAmJiAhdGhpcy5nZXRQcmlvcml0eSgpLmlzRW1wdHkoKSkge1xuICAgICAgICBvYmpbJy5wcmlvcml0eSddID0gdGhpcy5nZXRQcmlvcml0eSgpLnZhbCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG4gIH1cblxuICAvKiogQGluaGVyaXREb2MgKi9cbiAgaGFzaCgpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmxhenlIYXNoXyA9PT0gbnVsbCkge1xuICAgICAgbGV0IHRvSGFzaCA9ICcnO1xuICAgICAgaWYgKCF0aGlzLmdldFByaW9yaXR5KCkuaXNFbXB0eSgpKVxuICAgICAgICB0b0hhc2ggKz1cbiAgICAgICAgICAncHJpb3JpdHk6JyArXG4gICAgICAgICAgcHJpb3JpdHlIYXNoVGV4dCh0aGlzLmdldFByaW9yaXR5KCkudmFsKCkgYXMgc3RyaW5nIHwgbnVtYmVyKSArXG4gICAgICAgICAgJzonO1xuXG4gICAgICB0aGlzLmZvckVhY2hDaGlsZChQUklPUklUWV9JTkRFWCwgZnVuY3Rpb24oa2V5LCBjaGlsZE5vZGUpIHtcbiAgICAgICAgY29uc3QgY2hpbGRIYXNoID0gY2hpbGROb2RlLmhhc2goKTtcbiAgICAgICAgaWYgKGNoaWxkSGFzaCAhPT0gJycpIHRvSGFzaCArPSAnOicgKyBrZXkgKyAnOicgKyBjaGlsZEhhc2g7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5sYXp5SGFzaF8gPSB0b0hhc2ggPT09ICcnID8gJycgOiBzaGExKHRvSGFzaCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmxhenlIYXNoXztcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdERvYyAqL1xuICBnZXRQcmVkZWNlc3NvckNoaWxkTmFtZShcbiAgICBjaGlsZE5hbWU6IHN0cmluZyxcbiAgICBjaGlsZE5vZGU6IE5vZGUsXG4gICAgaW5kZXg6IEluZGV4XG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgaWR4ID0gdGhpcy5yZXNvbHZlSW5kZXhfKGluZGV4KTtcbiAgICBpZiAoaWR4KSB7XG4gICAgICBjb25zdCBwcmVkZWNlc3NvciA9IGlkeC5nZXRQcmVkZWNlc3NvcktleShcbiAgICAgICAgbmV3IE5hbWVkTm9kZShjaGlsZE5hbWUsIGNoaWxkTm9kZSlcbiAgICAgICk7XG4gICAgICByZXR1cm4gcHJlZGVjZXNzb3IgPyBwcmVkZWNlc3Nvci5uYW1lIDogbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW5fLmdldFByZWRlY2Vzc29yS2V5KGNoaWxkTmFtZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUluZGV4fSBpbmRleERlZmluaXRpb25cbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldEZpcnN0Q2hpbGROYW1lKGluZGV4RGVmaW5pdGlvbjogSW5kZXgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBpZHggPSB0aGlzLnJlc29sdmVJbmRleF8oaW5kZXhEZWZpbml0aW9uKTtcbiAgICBpZiAoaWR4KSB7XG4gICAgICBjb25zdCBtaW5LZXkgPSBpZHgubWluS2V5KCk7XG4gICAgICByZXR1cm4gbWluS2V5ICYmIG1pbktleS5uYW1lO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbl8ubWluS2V5KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUluZGV4fSBpbmRleERlZmluaXRpb25cbiAgICogQHJldHVybiB7P05hbWVkTm9kZX1cbiAgICovXG4gIGdldEZpcnN0Q2hpbGQoaW5kZXhEZWZpbml0aW9uOiBJbmRleCk6IE5hbWVkTm9kZSB8IG51bGwge1xuICAgIGNvbnN0IG1pbktleSA9IHRoaXMuZ2V0Rmlyc3RDaGlsZE5hbWUoaW5kZXhEZWZpbml0aW9uKTtcbiAgICBpZiAobWluS2V5KSB7XG4gICAgICByZXR1cm4gbmV3IE5hbWVkTm9kZShtaW5LZXksIHRoaXMuY2hpbGRyZW5fLmdldChtaW5LZXkpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdpdmVuIGFuIGluZGV4LCByZXR1cm4gdGhlIGtleSBuYW1lIG9mIHRoZSBsYXJnZXN0IHZhbHVlIHdlIGhhdmUsIGFjY29yZGluZyB0byB0aGF0IGluZGV4XG4gICAqIEBwYXJhbSB7IUluZGV4fSBpbmRleERlZmluaXRpb25cbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldExhc3RDaGlsZE5hbWUoaW5kZXhEZWZpbml0aW9uOiBJbmRleCk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IGlkeCA9IHRoaXMucmVzb2x2ZUluZGV4XyhpbmRleERlZmluaXRpb24pO1xuICAgIGlmIChpZHgpIHtcbiAgICAgIGNvbnN0IG1heEtleSA9IGlkeC5tYXhLZXkoKTtcbiAgICAgIHJldHVybiBtYXhLZXkgJiYgbWF4S2V5Lm5hbWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuXy5tYXhLZXkoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshSW5kZXh9IGluZGV4RGVmaW5pdGlvblxuICAgKiBAcmV0dXJuIHs/TmFtZWROb2RlfVxuICAgKi9cbiAgZ2V0TGFzdENoaWxkKGluZGV4RGVmaW5pdGlvbjogSW5kZXgpOiBOYW1lZE5vZGUgfCBudWxsIHtcbiAgICBjb25zdCBtYXhLZXkgPSB0aGlzLmdldExhc3RDaGlsZE5hbWUoaW5kZXhEZWZpbml0aW9uKTtcbiAgICBpZiAobWF4S2V5KSB7XG4gICAgICByZXR1cm4gbmV3IE5hbWVkTm9kZShtYXhLZXksIHRoaXMuY2hpbGRyZW5fLmdldChtYXhLZXkpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBmb3JFYWNoQ2hpbGQoaW5kZXg6IEluZGV4LCBhY3Rpb246IChrZXk6IHN0cmluZywgbm9kZTogTm9kZSkgPT4gdm9pZCk6IGFueSB7XG4gICAgY29uc3QgaWR4ID0gdGhpcy5yZXNvbHZlSW5kZXhfKGluZGV4KTtcbiAgICBpZiAoaWR4KSB7XG4gICAgICByZXR1cm4gaWR4Lmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24od3JhcHBlZE5vZGUpIHtcbiAgICAgICAgcmV0dXJuIGFjdGlvbih3cmFwcGVkTm9kZS5uYW1lLCB3cmFwcGVkTm9kZS5ub2RlKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbl8uaW5vcmRlclRyYXZlcnNhbChhY3Rpb24pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFJbmRleH0gaW5kZXhEZWZpbml0aW9uXG4gICAqIEByZXR1cm4ge1NvcnRlZE1hcEl0ZXJhdG9yfVxuICAgKi9cbiAgZ2V0SXRlcmF0b3IoXG4gICAgaW5kZXhEZWZpbml0aW9uOiBJbmRleFxuICApOiBTb3J0ZWRNYXBJdGVyYXRvcjxzdHJpbmcgfCBOYW1lZE5vZGUsIE5vZGUsIE5hbWVkTm9kZT4ge1xuICAgIHJldHVybiB0aGlzLmdldEl0ZXJhdG9yRnJvbShpbmRleERlZmluaXRpb24ubWluUG9zdCgpLCBpbmRleERlZmluaXRpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7IU5hbWVkTm9kZX0gc3RhcnRQb3N0XG4gICAqIEBwYXJhbSB7IUluZGV4fSBpbmRleERlZmluaXRpb25cbiAgICogQHJldHVybiB7IVNvcnRlZE1hcEl0ZXJhdG9yfVxuICAgKi9cbiAgZ2V0SXRlcmF0b3JGcm9tKFxuICAgIHN0YXJ0UG9zdDogTmFtZWROb2RlLFxuICAgIGluZGV4RGVmaW5pdGlvbjogSW5kZXhcbiAgKTogU29ydGVkTWFwSXRlcmF0b3I8c3RyaW5nIHwgTmFtZWROb2RlLCBOb2RlLCBOYW1lZE5vZGU+IHtcbiAgICBjb25zdCBpZHggPSB0aGlzLnJlc29sdmVJbmRleF8oaW5kZXhEZWZpbml0aW9uKTtcbiAgICBpZiAoaWR4KSB7XG4gICAgICByZXR1cm4gaWR4LmdldEl0ZXJhdG9yRnJvbShzdGFydFBvc3QsIGtleSA9PiBrZXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpdGVyYXRvciA9IHRoaXMuY2hpbGRyZW5fLmdldEl0ZXJhdG9yRnJvbShcbiAgICAgICAgc3RhcnRQb3N0Lm5hbWUsXG4gICAgICAgIE5hbWVkTm9kZS5XcmFwXG4gICAgICApO1xuICAgICAgbGV0IG5leHQgPSBpdGVyYXRvci5wZWVrKCk7XG4gICAgICB3aGlsZSAobmV4dCAhPSBudWxsICYmIGluZGV4RGVmaW5pdGlvbi5jb21wYXJlKG5leHQsIHN0YXJ0UG9zdCkgPCAwKSB7XG4gICAgICAgIGl0ZXJhdG9yLmdldE5leHQoKTtcbiAgICAgICAgbmV4dCA9IGl0ZXJhdG9yLnBlZWsoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpdGVyYXRvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshSW5kZXh9IGluZGV4RGVmaW5pdGlvblxuICAgKiBAcmV0dXJuIHshU29ydGVkTWFwSXRlcmF0b3J9XG4gICAqL1xuICBnZXRSZXZlcnNlSXRlcmF0b3IoXG4gICAgaW5kZXhEZWZpbml0aW9uOiBJbmRleFxuICApOiBTb3J0ZWRNYXBJdGVyYXRvcjxzdHJpbmcgfCBOYW1lZE5vZGUsIE5vZGUsIE5hbWVkTm9kZT4ge1xuICAgIHJldHVybiB0aGlzLmdldFJldmVyc2VJdGVyYXRvckZyb20oXG4gICAgICBpbmRleERlZmluaXRpb24ubWF4UG9zdCgpLFxuICAgICAgaW5kZXhEZWZpbml0aW9uXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFOYW1lZE5vZGV9IGVuZFBvc3RcbiAgICogQHBhcmFtIHshSW5kZXh9IGluZGV4RGVmaW5pdGlvblxuICAgKiBAcmV0dXJuIHshU29ydGVkTWFwSXRlcmF0b3J9XG4gICAqL1xuICBnZXRSZXZlcnNlSXRlcmF0b3JGcm9tKFxuICAgIGVuZFBvc3Q6IE5hbWVkTm9kZSxcbiAgICBpbmRleERlZmluaXRpb246IEluZGV4XG4gICk6IFNvcnRlZE1hcEl0ZXJhdG9yPHN0cmluZyB8IE5hbWVkTm9kZSwgTm9kZSwgTmFtZWROb2RlPiB7XG4gICAgY29uc3QgaWR4ID0gdGhpcy5yZXNvbHZlSW5kZXhfKGluZGV4RGVmaW5pdGlvbik7XG4gICAgaWYgKGlkeCkge1xuICAgICAgcmV0dXJuIGlkeC5nZXRSZXZlcnNlSXRlcmF0b3JGcm9tKGVuZFBvc3QsIGZ1bmN0aW9uKGtleSkge1xuICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGl0ZXJhdG9yID0gdGhpcy5jaGlsZHJlbl8uZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbShcbiAgICAgICAgZW5kUG9zdC5uYW1lLFxuICAgICAgICBOYW1lZE5vZGUuV3JhcFxuICAgICAgKTtcbiAgICAgIGxldCBuZXh0ID0gaXRlcmF0b3IucGVlaygpO1xuICAgICAgd2hpbGUgKG5leHQgIT0gbnVsbCAmJiBpbmRleERlZmluaXRpb24uY29tcGFyZShuZXh0LCBlbmRQb3N0KSA+IDApIHtcbiAgICAgICAgaXRlcmF0b3IuZ2V0TmV4dCgpO1xuICAgICAgICBuZXh0ID0gaXRlcmF0b3IucGVlaygpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGl0ZXJhdG9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgY29tcGFyZVRvKG90aGVyOiBDaGlsZHJlbk5vZGUpOiBudW1iZXIge1xuICAgIGlmICh0aGlzLmlzRW1wdHkoKSkge1xuICAgICAgaWYgKG90aGVyLmlzRW1wdHkoKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG90aGVyLmlzTGVhZk5vZGUoKSB8fCBvdGhlci5pc0VtcHR5KCkpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH0gZWxzZSBpZiAob3RoZXIgPT09IE1BWF9OT0RFKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE11c3QgYmUgYW5vdGhlciBub2RlIHdpdGggY2hpbGRyZW4uXG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIHdpdGhJbmRleChpbmRleERlZmluaXRpb246IEluZGV4KTogTm9kZSB7XG4gICAgaWYgKFxuICAgICAgaW5kZXhEZWZpbml0aW9uID09PSBLRVlfSU5ERVggfHxcbiAgICAgIHRoaXMuaW5kZXhNYXBfLmhhc0luZGV4KGluZGV4RGVmaW5pdGlvbilcbiAgICApIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBuZXdJbmRleE1hcCA9IHRoaXMuaW5kZXhNYXBfLmFkZEluZGV4KFxuICAgICAgICBpbmRleERlZmluaXRpb24sXG4gICAgICAgIHRoaXMuY2hpbGRyZW5fXG4gICAgICApO1xuICAgICAgcmV0dXJuIG5ldyBDaGlsZHJlbk5vZGUodGhpcy5jaGlsZHJlbl8sIHRoaXMucHJpb3JpdHlOb2RlXywgbmV3SW5kZXhNYXApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgaXNJbmRleGVkKGluZGV4OiBJbmRleCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBpbmRleCA9PT0gS0VZX0lOREVYIHx8IHRoaXMuaW5kZXhNYXBfLmhhc0luZGV4KGluZGV4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgZXF1YWxzKG90aGVyOiBOb2RlKTogYm9vbGVhbiB7XG4gICAgaWYgKG90aGVyID09PSB0aGlzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKG90aGVyLmlzTGVhZk5vZGUoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBvdGhlckNoaWxkcmVuTm9kZSA9IG90aGVyIGFzIENoaWxkcmVuTm9kZTtcbiAgICAgIGlmICghdGhpcy5nZXRQcmlvcml0eSgpLmVxdWFscyhvdGhlckNoaWxkcmVuTm9kZS5nZXRQcmlvcml0eSgpKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB0aGlzLmNoaWxkcmVuXy5jb3VudCgpID09PSBvdGhlckNoaWxkcmVuTm9kZS5jaGlsZHJlbl8uY291bnQoKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IHRoaXNJdGVyID0gdGhpcy5nZXRJdGVyYXRvcihQUklPUklUWV9JTkRFWCk7XG4gICAgICAgIGNvbnN0IG90aGVySXRlciA9IG90aGVyQ2hpbGRyZW5Ob2RlLmdldEl0ZXJhdG9yKFBSSU9SSVRZX0lOREVYKTtcbiAgICAgICAgbGV0IHRoaXNDdXJyZW50ID0gdGhpc0l0ZXIuZ2V0TmV4dCgpO1xuICAgICAgICBsZXQgb3RoZXJDdXJyZW50ID0gb3RoZXJJdGVyLmdldE5leHQoKTtcbiAgICAgICAgd2hpbGUgKHRoaXNDdXJyZW50ICYmIG90aGVyQ3VycmVudCkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXNDdXJyZW50Lm5hbWUgIT09IG90aGVyQ3VycmVudC5uYW1lIHx8XG4gICAgICAgICAgICAhdGhpc0N1cnJlbnQubm9kZS5lcXVhbHMob3RoZXJDdXJyZW50Lm5vZGUpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXNDdXJyZW50ID0gdGhpc0l0ZXIuZ2V0TmV4dCgpO1xuICAgICAgICAgIG90aGVyQ3VycmVudCA9IG90aGVySXRlci5nZXROZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXNDdXJyZW50ID09PSBudWxsICYmIG90aGVyQ3VycmVudCA9PT0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIFNvcnRlZE1hcCBvcmRlcmVkIGJ5IGluZGV4LCBvciBudWxsIGlmIHRoZSBkZWZhdWx0IChieS1rZXkpIG9yZGVyaW5nIGNhbiBiZSB1c2VkXG4gICAqIGluc3RlYWQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7IUluZGV4fSBpbmRleERlZmluaXRpb25cbiAgICogQHJldHVybiB7P1NvcnRlZE1hcC48TmFtZWROb2RlLCBOb2RlPn1cbiAgICovXG4gIHByaXZhdGUgcmVzb2x2ZUluZGV4XyhcbiAgICBpbmRleERlZmluaXRpb246IEluZGV4XG4gICk6IFNvcnRlZE1hcDxOYW1lZE5vZGUsIE5vZGU+IHwgbnVsbCB7XG4gICAgaWYgKGluZGV4RGVmaW5pdGlvbiA9PT0gS0VZX0lOREVYKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuaW5kZXhNYXBfLmdldChpbmRleERlZmluaXRpb24udG9TdHJpbmcoKSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyB7Q2hpbGRyZW5Ob2RlfVxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNsYXNzIE1heE5vZGUgZXh0ZW5kcyBDaGlsZHJlbk5vZGUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihcbiAgICAgIG5ldyBTb3J0ZWRNYXA8c3RyaW5nLCBOb2RlPihOQU1FX0NPTVBBUkFUT1IpLFxuICAgICAgQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREUsXG4gICAgICBJbmRleE1hcC5EZWZhdWx0XG4gICAgKTtcbiAgfVxuXG4gIGNvbXBhcmVUbyhvdGhlcjogTm9kZSk6IG51bWJlciB7XG4gICAgaWYgKG90aGVyID09PSB0aGlzKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICB9XG5cbiAgZXF1YWxzKG90aGVyOiBOb2RlKTogYm9vbGVhbiB7XG4gICAgLy8gTm90IHRoYXQgd2UgZXZlcnkgY29tcGFyZSBpdCwgYnV0IE1BWF9OT0RFIGlzIG9ubHkgZXZlciBlcXVhbCB0byBpdHNlbGZcbiAgICByZXR1cm4gb3RoZXIgPT09IHRoaXM7XG4gIH1cblxuICBnZXRQcmlvcml0eSgpOiBNYXhOb2RlIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGdldEltbWVkaWF0ZUNoaWxkKGNoaWxkTmFtZTogc3RyaW5nKTogQ2hpbGRyZW5Ob2RlIHtcbiAgICByZXR1cm4gQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG4gIH1cblxuICBpc0VtcHR5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIE1hcmtlciB0aGF0IHdpbGwgc29ydCBoaWdoZXIgdGhhbiBhbnkgb3RoZXIgc25hcHNob3QuXG4gKiBAdHlwZSB7IU1BWF9OT0RFfVxuICogQGNvbnN0XG4gKi9cbmV4cG9ydCBjb25zdCBNQVhfTk9ERSA9IG5ldyBNYXhOb2RlKCk7XG5cbi8qKlxuICogRG9jdW1lbnQgTmFtZWROb2RlIGV4dGVuc2lvbnNcbiAqL1xuZGVjbGFyZSBtb2R1bGUgJy4vTm9kZScge1xuICBpbnRlcmZhY2UgTmFtZWROb2RlIHtcbiAgICBNSU46IE5hbWVkTm9kZTtcbiAgICBNQVg6IE5hbWVkTm9kZTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhOYW1lZE5vZGUsIHtcbiAgTUlOOiB7XG4gICAgdmFsdWU6IG5ldyBOYW1lZE5vZGUoTUlOX05BTUUsIENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFKVxuICB9LFxuICBNQVg6IHtcbiAgICB2YWx1ZTogbmV3IE5hbWVkTm9kZShNQVhfTkFNRSwgTUFYX05PREUpXG4gIH1cbn0pO1xuXG4vKipcbiAqIFJlZmVyZW5jZSBFeHRlbnNpb25zXG4gKi9cbktleUluZGV4Ll9fRU1QVFlfTk9ERSA9IENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuTGVhZk5vZGUuX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3RvciA9IENoaWxkcmVuTm9kZTtcbnNldE1heE5vZGUoTUFYX05PREUpO1xuc2V0UHJpb3JpdHlNYXhOb2RlKE1BWF9OT0RFKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IGJ1aWxkQ2hpbGRTZXQgfSBmcm9tICcuL2NoaWxkU2V0JztcbmltcG9ydCB7IGNvbnRhaW5zLCBjbG9uZSwgbWFwLCBzYWZlR2V0IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgTmFtZWROb2RlLCBOb2RlIH0gZnJvbSAnLi9Ob2RlJztcbmltcG9ydCB7IFBSSU9SSVRZX0lOREVYIH0gZnJvbSAnLi9pbmRleGVzL1ByaW9yaXR5SW5kZXgnO1xuaW1wb3J0IHsgS0VZX0lOREVYIH0gZnJvbSAnLi9pbmRleGVzL0tleUluZGV4JztcbmltcG9ydCB7IFNvcnRlZE1hcCB9IGZyb20gJy4uL3V0aWwvU29ydGVkTWFwJztcbmltcG9ydCB7IEluZGV4IH0gZnJvbSAnLi9pbmRleGVzL0luZGV4JztcblxubGV0IF9kZWZhdWx0SW5kZXhNYXA6IEluZGV4TWFwO1xuXG5jb25zdCBmYWxsYmFja09iamVjdCA9IHt9O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCBGYWxsYmFja1R5cGV8U29ydGVkTWFwLjxOYW1lZE5vZGUsIE5vZGU+Pn0gaW5kZXhlc1xuICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgSW5kZXg+fSBpbmRleFNldFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBjbGFzcyBJbmRleE1hcCB7XG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBJbmRleE1hcCBmb3Igbm9kZXMgd2l0aG91dCBhIHByaW9yaXR5XG4gICAqIEB0eXBlIHshSW5kZXhNYXB9XG4gICAqIEBjb25zdFxuICAgKi9cbiAgc3RhdGljIGdldCBEZWZhdWx0KCk6IEluZGV4TWFwIHtcbiAgICBhc3NlcnQoXG4gICAgICBmYWxsYmFja09iamVjdCAmJiBQUklPUklUWV9JTkRFWCxcbiAgICAgICdDaGlsZHJlbk5vZGUudHMgaGFzIG5vdCBiZWVuIGxvYWRlZCdcbiAgICApO1xuICAgIF9kZWZhdWx0SW5kZXhNYXAgPVxuICAgICAgX2RlZmF1bHRJbmRleE1hcCB8fFxuICAgICAgbmV3IEluZGV4TWFwKFxuICAgICAgICB7ICcucHJpb3JpdHknOiBmYWxsYmFja09iamVjdCB9LFxuICAgICAgICB7ICcucHJpb3JpdHknOiBQUklPUklUWV9JTkRFWCB9XG4gICAgICApO1xuICAgIHJldHVybiBfZGVmYXVsdEluZGV4TWFwO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBpbmRleGVzXzoge1xuICAgICAgW2s6IHN0cmluZ106IFNvcnRlZE1hcDxOYW1lZE5vZGUsIE5vZGU+IHwgLypGYWxsYmFja1R5cGUqLyBvYmplY3Q7XG4gICAgfSxcbiAgICBwcml2YXRlIGluZGV4U2V0XzogeyBbazogc3RyaW5nXTogSW5kZXggfVxuICApIHt9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7IXN0cmluZ30gaW5kZXhLZXlcbiAgICogQHJldHVybiB7P1NvcnRlZE1hcC48TmFtZWROb2RlLCBOb2RlPn1cbiAgICovXG4gIGdldChpbmRleEtleTogc3RyaW5nKTogU29ydGVkTWFwPE5hbWVkTm9kZSwgTm9kZT4gfCBudWxsIHtcbiAgICBjb25zdCBzb3J0ZWRNYXAgPSBzYWZlR2V0KHRoaXMuaW5kZXhlc18sIGluZGV4S2V5KTtcbiAgICBpZiAoIXNvcnRlZE1hcCkgdGhyb3cgbmV3IEVycm9yKCdObyBpbmRleCBkZWZpbmVkIGZvciAnICsgaW5kZXhLZXkpO1xuXG4gICAgaWYgKHNvcnRlZE1hcCA9PT0gZmFsbGJhY2tPYmplY3QpIHtcbiAgICAgIC8vIFRoZSBpbmRleCBleGlzdHMsIGJ1dCBpdCBmYWxscyBiYWNrIHRvIGp1c3QgbmFtZSBjb21wYXJpc29uLiBSZXR1cm4gbnVsbCBzbyB0aGF0IHRoZSBjYWxsaW5nIGNvZGUgdXNlcyB0aGVcbiAgICAgIC8vIHJlZ3VsYXIgY2hpbGQgbWFwXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHNvcnRlZE1hcDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshSW5kZXh9IGluZGV4RGVmaW5pdGlvblxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaGFzSW5kZXgoaW5kZXhEZWZpbml0aW9uOiBJbmRleCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBjb250YWlucyh0aGlzLmluZGV4U2V0XywgaW5kZXhEZWZpbml0aW9uLnRvU3RyaW5nKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUluZGV4fSBpbmRleERlZmluaXRpb25cbiAgICogQHBhcmFtIHshU29ydGVkTWFwLjxzdHJpbmcsICFOb2RlPn0gZXhpc3RpbmdDaGlsZHJlblxuICAgKiBAcmV0dXJuIHshSW5kZXhNYXB9XG4gICAqL1xuICBhZGRJbmRleChcbiAgICBpbmRleERlZmluaXRpb246IEluZGV4LFxuICAgIGV4aXN0aW5nQ2hpbGRyZW46IFNvcnRlZE1hcDxzdHJpbmcsIE5vZGU+XG4gICk6IEluZGV4TWFwIHtcbiAgICBhc3NlcnQoXG4gICAgICBpbmRleERlZmluaXRpb24gIT09IEtFWV9JTkRFWCxcbiAgICAgIFwiS2V5SW5kZXggYWx3YXlzIGV4aXN0cyBhbmQgaXNuJ3QgbWVhbnQgdG8gYmUgYWRkZWQgdG8gdGhlIEluZGV4TWFwLlwiXG4gICAgKTtcbiAgICBjb25zdCBjaGlsZExpc3QgPSBbXTtcbiAgICBsZXQgc2F3SW5kZXhlZFZhbHVlID0gZmFsc2U7XG4gICAgY29uc3QgaXRlciA9IGV4aXN0aW5nQ2hpbGRyZW4uZ2V0SXRlcmF0b3IoTmFtZWROb2RlLldyYXApO1xuICAgIGxldCBuZXh0ID0gaXRlci5nZXROZXh0KCk7XG4gICAgd2hpbGUgKG5leHQpIHtcbiAgICAgIHNhd0luZGV4ZWRWYWx1ZSA9XG4gICAgICAgIHNhd0luZGV4ZWRWYWx1ZSB8fCBpbmRleERlZmluaXRpb24uaXNEZWZpbmVkT24obmV4dC5ub2RlKTtcbiAgICAgIGNoaWxkTGlzdC5wdXNoKG5leHQpO1xuICAgICAgbmV4dCA9IGl0ZXIuZ2V0TmV4dCgpO1xuICAgIH1cbiAgICBsZXQgbmV3SW5kZXg7XG4gICAgaWYgKHNhd0luZGV4ZWRWYWx1ZSkge1xuICAgICAgbmV3SW5kZXggPSBidWlsZENoaWxkU2V0KGNoaWxkTGlzdCwgaW5kZXhEZWZpbml0aW9uLmdldENvbXBhcmUoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld0luZGV4ID0gZmFsbGJhY2tPYmplY3Q7XG4gICAgfVxuICAgIGNvbnN0IGluZGV4TmFtZSA9IGluZGV4RGVmaW5pdGlvbi50b1N0cmluZygpO1xuICAgIGNvbnN0IG5ld0luZGV4U2V0ID0gY2xvbmUodGhpcy5pbmRleFNldF8pO1xuICAgIG5ld0luZGV4U2V0W2luZGV4TmFtZV0gPSBpbmRleERlZmluaXRpb247XG4gICAgY29uc3QgbmV3SW5kZXhlcyA9IGNsb25lKHRoaXMuaW5kZXhlc18pO1xuICAgIG5ld0luZGV4ZXNbaW5kZXhOYW1lXSA9IG5ld0luZGV4O1xuICAgIHJldHVybiBuZXcgSW5kZXhNYXAobmV3SW5kZXhlcywgbmV3SW5kZXhTZXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuc3VyZSB0aGF0IHRoaXMgbm9kZSBpcyBwcm9wZXJseSB0cmFja2VkIGluIGFueSBpbmRleGVzIHRoYXQgd2UncmUgbWFpbnRhaW5pbmdcbiAgICogQHBhcmFtIHshTmFtZWROb2RlfSBuYW1lZE5vZGVcbiAgICogQHBhcmFtIHshU29ydGVkTWFwLjxzdHJpbmcsICFOb2RlPn0gZXhpc3RpbmdDaGlsZHJlblxuICAgKiBAcmV0dXJuIHshSW5kZXhNYXB9XG4gICAqL1xuICBhZGRUb0luZGV4ZXMoXG4gICAgbmFtZWROb2RlOiBOYW1lZE5vZGUsXG4gICAgZXhpc3RpbmdDaGlsZHJlbjogU29ydGVkTWFwPHN0cmluZywgTm9kZT5cbiAgKTogSW5kZXhNYXAge1xuICAgIGNvbnN0IG5ld0luZGV4ZXMgPSBtYXAoXG4gICAgICB0aGlzLmluZGV4ZXNfLFxuICAgICAgKGluZGV4ZWRDaGlsZHJlbjogU29ydGVkTWFwPE5hbWVkTm9kZSwgTm9kZT4sIGluZGV4TmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gc2FmZUdldCh0aGlzLmluZGV4U2V0XywgaW5kZXhOYW1lKTtcbiAgICAgICAgYXNzZXJ0KGluZGV4LCAnTWlzc2luZyBpbmRleCBpbXBsZW1lbnRhdGlvbiBmb3IgJyArIGluZGV4TmFtZSk7XG4gICAgICAgIGlmIChpbmRleGVkQ2hpbGRyZW4gPT09IGZhbGxiYWNrT2JqZWN0KSB7XG4gICAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHdlIG5lZWQgdG8gaW5kZXggZXZlcnl0aGluZ1xuICAgICAgICAgIGlmIChpbmRleC5pc0RlZmluZWRPbihuYW1lZE5vZGUubm9kZSkpIHtcbiAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gYnVpbGQgdGhpcyBpbmRleFxuICAgICAgICAgICAgY29uc3QgY2hpbGRMaXN0ID0gW107XG4gICAgICAgICAgICBjb25zdCBpdGVyID0gZXhpc3RpbmdDaGlsZHJlbi5nZXRJdGVyYXRvcihOYW1lZE5vZGUuV3JhcCk7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IGl0ZXIuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgd2hpbGUgKG5leHQpIHtcbiAgICAgICAgICAgICAgaWYgKG5leHQubmFtZSAhPSBuYW1lZE5vZGUubmFtZSkge1xuICAgICAgICAgICAgICAgIGNoaWxkTGlzdC5wdXNoKG5leHQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG5leHQgPSBpdGVyLmdldE5leHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoaWxkTGlzdC5wdXNoKG5hbWVkTm9kZSk7XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRDaGlsZFNldChjaGlsZExpc3QsIGluZGV4LmdldENvbXBhcmUoKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIGNoYW5nZSwgdGhpcyByZW1haW5zIGEgZmFsbGJhY2tcbiAgICAgICAgICAgIHJldHVybiBmYWxsYmFja09iamVjdDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdTbmFwID0gZXhpc3RpbmdDaGlsZHJlbi5nZXQobmFtZWROb2RlLm5hbWUpO1xuICAgICAgICAgIGxldCBuZXdDaGlsZHJlbiA9IGluZGV4ZWRDaGlsZHJlbjtcbiAgICAgICAgICBpZiAoZXhpc3RpbmdTbmFwKSB7XG4gICAgICAgICAgICBuZXdDaGlsZHJlbiA9IG5ld0NoaWxkcmVuLnJlbW92ZShcbiAgICAgICAgICAgICAgbmV3IE5hbWVkTm9kZShuYW1lZE5vZGUubmFtZSwgZXhpc3RpbmdTbmFwKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG5ld0NoaWxkcmVuLmluc2VydChuYW1lZE5vZGUsIG5hbWVkTm9kZS5ub2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gICAgcmV0dXJuIG5ldyBJbmRleE1hcChuZXdJbmRleGVzLCB0aGlzLmluZGV4U2V0Xyk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IEluZGV4TWFwIGluc3RhbmNlIHdpdGggdGhlIGdpdmVuIHZhbHVlIHJlbW92ZWRcbiAgICogQHBhcmFtIHshTmFtZWROb2RlfSBuYW1lZE5vZGVcbiAgICogQHBhcmFtIHshU29ydGVkTWFwLjxzdHJpbmcsICFOb2RlPn0gZXhpc3RpbmdDaGlsZHJlblxuICAgKiBAcmV0dXJuIHshSW5kZXhNYXB9XG4gICAqL1xuICByZW1vdmVGcm9tSW5kZXhlcyhcbiAgICBuYW1lZE5vZGU6IE5hbWVkTm9kZSxcbiAgICBleGlzdGluZ0NoaWxkcmVuOiBTb3J0ZWRNYXA8c3RyaW5nLCBOb2RlPlxuICApOiBJbmRleE1hcCB7XG4gICAgY29uc3QgbmV3SW5kZXhlcyA9IG1hcCh0aGlzLmluZGV4ZXNfLCBmdW5jdGlvbihcbiAgICAgIGluZGV4ZWRDaGlsZHJlbjogU29ydGVkTWFwPE5hbWVkTm9kZSwgTm9kZT5cbiAgICApIHtcbiAgICAgIGlmIChpbmRleGVkQ2hpbGRyZW4gPT09IGZhbGxiYWNrT2JqZWN0KSB7XG4gICAgICAgIC8vIFRoaXMgaXMgdGhlIGZhbGxiYWNrLiBKdXN0IHJldHVybiBpdCwgbm90aGluZyB0byBkbyBpbiB0aGlzIGNhc2VcbiAgICAgICAgcmV0dXJuIGluZGV4ZWRDaGlsZHJlbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU25hcCA9IGV4aXN0aW5nQ2hpbGRyZW4uZ2V0KG5hbWVkTm9kZS5uYW1lKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nU25hcCkge1xuICAgICAgICAgIHJldHVybiBpbmRleGVkQ2hpbGRyZW4ucmVtb3ZlKFxuICAgICAgICAgICAgbmV3IE5hbWVkTm9kZShuYW1lZE5vZGUubmFtZSwgZXhpc3RpbmdTbmFwKVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTm8gcmVjb3JkIG9mIHRoaXMgY2hpbGRcbiAgICAgICAgICByZXR1cm4gaW5kZXhlZENoaWxkcmVuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG5ldyBJbmRleE1hcChuZXdJbmRleGVzLCB0aGlzLmluZGV4U2V0Xyk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IGRvdWJsZVRvSUVFRTc1NFN0cmluZywgc2hhMSB9IGZyb20gJy4uL3V0aWwvdXRpbCc7XG5pbXBvcnQgeyBwcmlvcml0eUhhc2hUZXh0LCB2YWxpZGF0ZVByaW9yaXR5Tm9kZSB9IGZyb20gJy4vc25hcCc7XG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi9Ob2RlJztcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi91dGlsL1BhdGgnO1xuaW1wb3J0IHsgSW5kZXggfSBmcm9tICcuL2luZGV4ZXMvSW5kZXgnO1xuaW1wb3J0IHsgQ2hpbGRyZW5Ob2RlQ29uc3RydWN0b3IgfSBmcm9tICcuL0NoaWxkcmVuTm9kZSc7XG5cbmxldCBfX2NoaWxkcmVuTm9kZUNvbnN0cnVjdG9yOiBDaGlsZHJlbk5vZGVDb25zdHJ1Y3RvcjtcblxuLyoqXG4gKiBMZWFmTm9kZSBpcyBhIGNsYXNzIGZvciBzdG9yaW5nIGxlYWYgbm9kZXMgaW4gYSBEYXRhU25hcHNob3QuICBJdFxuICogaW1wbGVtZW50cyBOb2RlIGFuZCBzdG9yZXMgdGhlIHZhbHVlIG9mIHRoZSBub2RlIChhIHN0cmluZyxcbiAqIG51bWJlciwgb3IgYm9vbGVhbikgYWNjZXNzaWJsZSB2aWEgZ2V0VmFsdWUoKS5cbiAqL1xuZXhwb3J0IGNsYXNzIExlYWZOb2RlIGltcGxlbWVudHMgTm9kZSB7XG4gIHN0YXRpYyBzZXQgX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3Rvcih2YWw6IENoaWxkcmVuTm9kZUNvbnN0cnVjdG9yKSB7XG4gICAgX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3RvciA9IHZhbDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3RvcigpIHtcbiAgICByZXR1cm4gX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3RvcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc29ydCBvcmRlciBmb3IgY29tcGFyaW5nIGxlYWYgbm9kZXMgb2YgZGlmZmVyZW50IHR5cGVzLiBJZiB0d28gbGVhZiBub2RlcyBoYXZlXG4gICAqIHRoZSBzYW1lIHR5cGUsIHRoZSBjb21wYXJpc29uIGZhbGxzIGJhY2sgdG8gdGhlaXIgdmFsdWVcbiAgICogQHR5cGUge0FycmF5Ljwhc3RyaW5nPn1cbiAgICogQGNvbnN0XG4gICAqL1xuICBzdGF0aWMgVkFMVUVfVFlQRV9PUkRFUiA9IFsnb2JqZWN0JywgJ2Jvb2xlYW4nLCAnbnVtYmVyJywgJ3N0cmluZyddO1xuXG4gIHByaXZhdGUgbGF6eUhhc2hfOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAvKipcbiAgICogQGltcGxlbWVudHMge05vZGV9XG4gICAqIEBwYXJhbSB7IShzdHJpbmd8bnVtYmVyfGJvb2xlYW58T2JqZWN0KX0gdmFsdWVfIFRoZSB2YWx1ZSB0byBzdG9yZSBpbiB0aGlzIGxlYWYgbm9kZS5cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBvYmplY3QgdHlwZSBpcyBwb3NzaWJsZSBpbiB0aGUgZXZlbnQgb2YgYSBkZWZlcnJlZCB2YWx1ZVxuICAgKiBAcGFyYW0geyFOb2RlPX0gcHJpb3JpdHlOb2RlXyBUaGUgcHJpb3JpdHkgb2YgdGhpcyBub2RlLlxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSB2YWx1ZV86IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4gfCBvYmplY3QsXG4gICAgcHJpdmF0ZSBwcmlvcml0eU5vZGVfOiBOb2RlID0gTGVhZk5vZGUuX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3Rvci5FTVBUWV9OT0RFXG4gICkge1xuICAgIGFzc2VydChcbiAgICAgIHRoaXMudmFsdWVfICE9PSB1bmRlZmluZWQgJiYgdGhpcy52YWx1ZV8gIT09IG51bGwsXG4gICAgICBcIkxlYWZOb2RlIHNob3VsZG4ndCBiZSBjcmVhdGVkIHdpdGggbnVsbC91bmRlZmluZWQgdmFsdWUuXCJcbiAgICApO1xuXG4gICAgdmFsaWRhdGVQcmlvcml0eU5vZGUodGhpcy5wcmlvcml0eU5vZGVfKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdERvYyAqL1xuICBpc0xlYWZOb2RlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0RG9jICovXG4gIGdldFByaW9yaXR5KCk6IE5vZGUge1xuICAgIHJldHVybiB0aGlzLnByaW9yaXR5Tm9kZV87XG4gIH1cblxuICAvKiogQGluaGVyaXREb2MgKi9cbiAgdXBkYXRlUHJpb3JpdHkobmV3UHJpb3JpdHlOb2RlOiBOb2RlKTogTm9kZSB7XG4gICAgcmV0dXJuIG5ldyBMZWFmTm9kZSh0aGlzLnZhbHVlXywgbmV3UHJpb3JpdHlOb2RlKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdERvYyAqL1xuICBnZXRJbW1lZGlhdGVDaGlsZChjaGlsZE5hbWU6IHN0cmluZyk6IE5vZGUge1xuICAgIC8vIEhhY2sgdG8gdHJlYXQgcHJpb3JpdHkgYXMgYSByZWd1bGFyIGNoaWxkXG4gICAgaWYgKGNoaWxkTmFtZSA9PT0gJy5wcmlvcml0eScpIHtcbiAgICAgIHJldHVybiB0aGlzLnByaW9yaXR5Tm9kZV87XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBMZWFmTm9kZS5fX2NoaWxkcmVuTm9kZUNvbnN0cnVjdG9yLkVNUFRZX05PREU7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbmhlcml0RG9jICovXG4gIGdldENoaWxkKHBhdGg6IFBhdGgpOiBOb2RlIHtcbiAgICBpZiAocGF0aC5pc0VtcHR5KCkpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSBpZiAocGF0aC5nZXRGcm9udCgpID09PSAnLnByaW9yaXR5Jykge1xuICAgICAgcmV0dXJuIHRoaXMucHJpb3JpdHlOb2RlXztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIExlYWZOb2RlLl9fY2hpbGRyZW5Ob2RlQ29uc3RydWN0b3IuRU1QVFlfTk9ERTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGhhc0NoaWxkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdERvYyAqL1xuICBnZXRQcmVkZWNlc3NvckNoaWxkTmFtZShjaGlsZE5hbWU6IFN0cmluZywgY2hpbGROb2RlOiBOb2RlKTogbnVsbCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKiogQGluaGVyaXREb2MgKi9cbiAgdXBkYXRlSW1tZWRpYXRlQ2hpbGQoY2hpbGROYW1lOiBzdHJpbmcsIG5ld0NoaWxkTm9kZTogTm9kZSk6IE5vZGUge1xuICAgIGlmIChjaGlsZE5hbWUgPT09ICcucHJpb3JpdHknKSB7XG4gICAgICByZXR1cm4gdGhpcy51cGRhdGVQcmlvcml0eShuZXdDaGlsZE5vZGUpO1xuICAgIH0gZWxzZSBpZiAobmV3Q2hpbGROb2RlLmlzRW1wdHkoKSAmJiBjaGlsZE5hbWUgIT09ICcucHJpb3JpdHknKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIExlYWZOb2RlLl9fY2hpbGRyZW5Ob2RlQ29uc3RydWN0b3IuRU1QVFlfTk9ERS51cGRhdGVJbW1lZGlhdGVDaGlsZChcbiAgICAgICAgY2hpbGROYW1lLFxuICAgICAgICBuZXdDaGlsZE5vZGVcbiAgICAgICkudXBkYXRlUHJpb3JpdHkodGhpcy5wcmlvcml0eU5vZGVfKTtcbiAgICB9XG4gIH1cblxuICAvKiogQGluaGVyaXREb2MgKi9cbiAgdXBkYXRlQ2hpbGQocGF0aDogUGF0aCwgbmV3Q2hpbGROb2RlOiBOb2RlKTogTm9kZSB7XG4gICAgY29uc3QgZnJvbnQgPSBwYXRoLmdldEZyb250KCk7XG4gICAgaWYgKGZyb250ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbmV3Q2hpbGROb2RlO1xuICAgIH0gZWxzZSBpZiAobmV3Q2hpbGROb2RlLmlzRW1wdHkoKSAmJiBmcm9udCAhPT0gJy5wcmlvcml0eScpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIGZyb250ICE9PSAnLnByaW9yaXR5JyB8fCBwYXRoLmdldExlbmd0aCgpID09PSAxLFxuICAgICAgICAnLnByaW9yaXR5IG11c3QgYmUgdGhlIGxhc3QgdG9rZW4gaW4gYSBwYXRoJ1xuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHRoaXMudXBkYXRlSW1tZWRpYXRlQ2hpbGQoXG4gICAgICAgIGZyb250LFxuICAgICAgICBMZWFmTm9kZS5fX2NoaWxkcmVuTm9kZUNvbnN0cnVjdG9yLkVNUFRZX05PREUudXBkYXRlQ2hpbGQoXG4gICAgICAgICAgcGF0aC5wb3BGcm9udCgpLFxuICAgICAgICAgIG5ld0NoaWxkTm9kZVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW5oZXJpdERvYyAqL1xuICBpc0VtcHR5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdERvYyAqL1xuICBudW1DaGlsZHJlbigpOiBudW1iZXIge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0RG9jICovXG4gIGZvckVhY2hDaGlsZChpbmRleDogSW5kZXgsIGFjdGlvbjogKHM6IHN0cmluZywgbjogTm9kZSkgPT4gdm9pZCk6IGFueSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICB2YWwoZXhwb3J0Rm9ybWF0PzogYm9vbGVhbik6IE9iamVjdCB7XG4gICAgaWYgKGV4cG9ydEZvcm1hdCAmJiAhdGhpcy5nZXRQcmlvcml0eSgpLmlzRW1wdHkoKSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgICcudmFsdWUnOiB0aGlzLmdldFZhbHVlKCksXG4gICAgICAgICcucHJpb3JpdHknOiB0aGlzLmdldFByaW9yaXR5KCkudmFsKClcbiAgICAgIH07XG4gICAgZWxzZSByZXR1cm4gdGhpcy5nZXRWYWx1ZSgpO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0RG9jICovXG4gIGhhc2goKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5sYXp5SGFzaF8gPT09IG51bGwpIHtcbiAgICAgIGxldCB0b0hhc2ggPSAnJztcbiAgICAgIGlmICghdGhpcy5wcmlvcml0eU5vZGVfLmlzRW1wdHkoKSlcbiAgICAgICAgdG9IYXNoICs9XG4gICAgICAgICAgJ3ByaW9yaXR5OicgK1xuICAgICAgICAgIHByaW9yaXR5SGFzaFRleHQodGhpcy5wcmlvcml0eU5vZGVfLnZhbCgpIGFzIG51bWJlciB8IHN0cmluZykgK1xuICAgICAgICAgICc6JztcblxuICAgICAgY29uc3QgdHlwZSA9IHR5cGVvZiB0aGlzLnZhbHVlXztcbiAgICAgIHRvSGFzaCArPSB0eXBlICsgJzonO1xuICAgICAgaWYgKHR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHRvSGFzaCArPSBkb3VibGVUb0lFRUU3NTRTdHJpbmcodGhpcy52YWx1ZV8gYXMgbnVtYmVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRvSGFzaCArPSB0aGlzLnZhbHVlXztcbiAgICAgIH1cbiAgICAgIHRoaXMubGF6eUhhc2hfID0gc2hhMSh0b0hhc2gpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5sYXp5SGFzaF87XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIGxlYWYgbm9kZS5cbiAgICogQHJldHVybiB7T2JqZWN0fHN0cmluZ3xudW1iZXJ8Ym9vbGVhbn0gVGhlIHZhbHVlIG9mIHRoZSBub2RlLlxuICAgKi9cbiAgZ2V0VmFsdWUoKTogb2JqZWN0IHwgc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWVfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBjb21wYXJlVG8ob3RoZXI6IE5vZGUpOiBudW1iZXIge1xuICAgIGlmIChvdGhlciA9PT0gTGVhZk5vZGUuX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3Rvci5FTVBUWV9OT0RFKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKG90aGVyIGluc3RhbmNlb2YgTGVhZk5vZGUuX19jaGlsZHJlbk5vZGVDb25zdHJ1Y3Rvcikge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH0gZWxzZSB7XG4gICAgICBhc3NlcnQob3RoZXIuaXNMZWFmTm9kZSgpLCAnVW5rbm93biBub2RlIHR5cGUnKTtcbiAgICAgIHJldHVybiB0aGlzLmNvbXBhcmVUb0xlYWZOb2RlXyhvdGhlciBhcyBMZWFmTm9kZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbXBhcmlzb24gc3BlY2lmaWNhbGx5IGZvciB0d28gbGVhZiBub2Rlc1xuICAgKiBAcGFyYW0geyFMZWFmTm9kZX0gb3RoZXJMZWFmXG4gICAqIEByZXR1cm4geyFudW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGNvbXBhcmVUb0xlYWZOb2RlXyhvdGhlckxlYWY6IExlYWZOb2RlKTogbnVtYmVyIHtcbiAgICBjb25zdCBvdGhlckxlYWZUeXBlID0gdHlwZW9mIG90aGVyTGVhZi52YWx1ZV87XG4gICAgY29uc3QgdGhpc0xlYWZUeXBlID0gdHlwZW9mIHRoaXMudmFsdWVfO1xuICAgIGNvbnN0IG90aGVySW5kZXggPSBMZWFmTm9kZS5WQUxVRV9UWVBFX09SREVSLmluZGV4T2Yob3RoZXJMZWFmVHlwZSk7XG4gICAgY29uc3QgdGhpc0luZGV4ID0gTGVhZk5vZGUuVkFMVUVfVFlQRV9PUkRFUi5pbmRleE9mKHRoaXNMZWFmVHlwZSk7XG4gICAgYXNzZXJ0KG90aGVySW5kZXggPj0gMCwgJ1Vua25vd24gbGVhZiB0eXBlOiAnICsgb3RoZXJMZWFmVHlwZSk7XG4gICAgYXNzZXJ0KHRoaXNJbmRleCA+PSAwLCAnVW5rbm93biBsZWFmIHR5cGU6ICcgKyB0aGlzTGVhZlR5cGUpO1xuICAgIGlmIChvdGhlckluZGV4ID09PSB0aGlzSW5kZXgpIHtcbiAgICAgIC8vIFNhbWUgdHlwZSwgY29tcGFyZSB2YWx1ZXNcbiAgICAgIGlmICh0aGlzTGVhZlR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIERlZmVycmVkIHZhbHVlIG5vZGVzIGFyZSBhbGwgZXF1YWwsIGJ1dCB3ZSBzaG91bGQgYWxzbyBuZXZlciBnZXQgdG8gdGhpcyBwb2ludC4uLlxuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vdGUgdGhhdCB0aGlzIHdvcmtzIGJlY2F1c2UgdHJ1ZSA+IGZhbHNlLCBhbGwgb3RoZXJzIGFyZSBudW1iZXIgb3Igc3RyaW5nIGNvbXBhcmlzb25zXG4gICAgICAgIGlmICh0aGlzLnZhbHVlXyA8IG90aGVyTGVhZi52YWx1ZV8pIHtcbiAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy52YWx1ZV8gPT09IG90aGVyTGVhZi52YWx1ZV8pIHtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpc0luZGV4IC0gb3RoZXJJbmRleDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIHdpdGhJbmRleCgpOiBOb2RlIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgaXNJbmRleGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBlcXVhbHMob3RoZXI6IE5vZGUpOiBib29sZWFuIHtcbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIGlmIChvdGhlciA9PT0gdGhpcykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmIChvdGhlci5pc0xlYWZOb2RlKCkpIHtcbiAgICAgIGNvbnN0IG90aGVyTGVhZiA9IG90aGVyIGFzIExlYWZOb2RlO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy52YWx1ZV8gPT09IG90aGVyTGVhZi52YWx1ZV8gJiZcbiAgICAgICAgdGhpcy5wcmlvcml0eU5vZGVfLmVxdWFscyhvdGhlckxlYWYucHJpb3JpdHlOb2RlXylcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi91dGlsL1BhdGgnO1xuaW1wb3J0IHsgSW5kZXggfSBmcm9tICcuL2luZGV4ZXMvSW5kZXgnO1xuXG4vKipcbiAqIE5vZGUgaXMgYW4gaW50ZXJmYWNlIGRlZmluaW5nIHRoZSBjb21tb24gZnVuY3Rpb25hbGl0eSBmb3Igbm9kZXMgaW5cbiAqIGEgRGF0YVNuYXBzaG90LlxuICpcbiAqIEBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBOb2RlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhpcyBub2RlIGlzIGEgbGVhZiBub2RlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgYSBsZWFmIG5vZGUuXG4gICAqL1xuICBpc0xlYWZOb2RlKCk6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHByaW9yaXR5IG9mIHRoZSBub2RlLlxuICAgKiBAcmV0dXJuIHshTm9kZX0gVGhlIHByaW9yaXR5IG9mIHRoZSBub2RlLlxuICAgKi9cbiAgZ2V0UHJpb3JpdHkoKTogTm9kZTtcblxuICAvKipcbiAgICogUmV0dXJucyBhIGR1cGxpY2F0ZSBub2RlIHdpdGggdGhlIG5ldyBwcmlvcml0eS5cbiAgICogQHBhcmFtIHshTm9kZX0gbmV3UHJpb3JpdHlOb2RlIE5ldyBwcmlvcml0eSB0byBzZXQgZm9yIHRoZSBub2RlLlxuICAgKiBAcmV0dXJuIHshTm9kZX0gTm9kZSB3aXRoIG5ldyBwcmlvcml0eS5cbiAgICovXG4gIHVwZGF0ZVByaW9yaXR5KG5ld1ByaW9yaXR5Tm9kZTogTm9kZSk6IE5vZGU7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHNwZWNpZmllZCBpbW1lZGlhdGUgY2hpbGQsIG9yIG51bGwgaWYgaXQgZG9lc24ndCBleGlzdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNoaWxkTmFtZSBUaGUgbmFtZSBvZiB0aGUgY2hpbGQgdG8gcmV0cmlldmUuXG4gICAqIEByZXR1cm4geyFOb2RlfSBUaGUgcmV0cmlldmVkIGNoaWxkLCBvciBhbiBlbXB0eSBub2RlLlxuICAgKi9cbiAgZ2V0SW1tZWRpYXRlQ2hpbGQoY2hpbGROYW1lOiBzdHJpbmcpOiBOb2RlO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY2hpbGQgYnkgcGF0aCwgb3IgbnVsbCBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICAgKiBAcGFyYW0geyFQYXRofSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBjaGlsZCB0byByZXRyaWV2ZS5cbiAgICogQHJldHVybiB7IU5vZGV9IFRoZSByZXRyaWV2ZWQgY2hpbGQgb3IgYW4gZW1wdHkgbm9kZS5cbiAgICovXG4gIGdldENoaWxkKHBhdGg6IFBhdGgpOiBOb2RlO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBuYW1lIG9mIHRoZSBjaGlsZCBpbW1lZGlhdGVseSBwcmlvciB0byB0aGUgc3BlY2lmaWVkIGNoaWxkTm9kZSwgb3IgbnVsbC5cbiAgICogQHBhcmFtIHshc3RyaW5nfSBjaGlsZE5hbWUgVGhlIG5hbWUgb2YgdGhlIGNoaWxkIHRvIGZpbmQgdGhlIHByZWRlY2Vzc29yIG9mLlxuICAgKiBAcGFyYW0geyFOb2RlfSBjaGlsZE5vZGUgVGhlIG5vZGUgdG8gZmluZCB0aGUgcHJlZGVjZXNzb3Igb2YuXG4gICAqIEBwYXJhbSB7IUluZGV4fSBpbmRleCBUaGUgaW5kZXggdG8gdXNlIHRvIGRldGVybWluZSB0aGUgcHJlZGVjZXNzb3JcbiAgICogQHJldHVybiB7P3N0cmluZ30gVGhlIG5hbWUgb2YgdGhlIHByZWRlY2Vzc29yIGNoaWxkLCBvciBudWxsIGlmIGNoaWxkTm9kZSBpcyB0aGUgZmlyc3QgY2hpbGQuXG4gICAqL1xuICBnZXRQcmVkZWNlc3NvckNoaWxkTmFtZShcbiAgICBjaGlsZE5hbWU6IFN0cmluZyxcbiAgICBjaGlsZE5vZGU6IE5vZGUsXG4gICAgaW5kZXg6IEluZGV4XG4gICk6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBkdXBsaWNhdGUgbm9kZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGltbWVkaWF0ZSBjaGlsZCB1cGRhdGVkLlxuICAgKiBBbnkgdmFsdWUgaW4gdGhlIG5vZGUgd2lsbCBiZSByZW1vdmVkLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2hpbGROYW1lIFRoZSBuYW1lIG9mIHRoZSBjaGlsZCB0byB1cGRhdGUuXG4gICAqIEBwYXJhbSB7IU5vZGV9IG5ld0NoaWxkTm9kZSBUaGUgbmV3IGNoaWxkIG5vZGVcbiAgICogQHJldHVybiB7IU5vZGV9IFRoZSB1cGRhdGVkIG5vZGUuXG4gICAqL1xuICB1cGRhdGVJbW1lZGlhdGVDaGlsZChjaGlsZE5hbWU6IHN0cmluZywgbmV3Q2hpbGROb2RlOiBOb2RlKTogTm9kZTtcblxuICAvKipcbiAgICogUmV0dXJucyBhIGR1cGxpY2F0ZSBub2RlLCB3aXRoIHRoZSBzcGVjaWZpZWQgY2hpbGQgdXBkYXRlZC4gIEFueSB2YWx1ZSB3aWxsXG4gICAqIGJlIHJlbW92ZWQuXG4gICAqIEBwYXJhbSB7IVBhdGh9IHBhdGggVGhlIHBhdGggb2YgdGhlIGNoaWxkIHRvIHVwZGF0ZS5cbiAgICogQHBhcmFtIHshTm9kZX0gbmV3Q2hpbGROb2RlIFRoZSBuZXcgY2hpbGQgbm9kZSwgd2hpY2ggbWF5IGJlIGFuIGVtcHR5IG5vZGVcbiAgICogQHJldHVybiB7IU5vZGV9IFRoZSB1cGRhdGVkIG5vZGUuXG4gICAqL1xuICB1cGRhdGVDaGlsZChwYXRoOiBQYXRoLCBuZXdDaGlsZE5vZGU6IE5vZGUpOiBOb2RlO1xuXG4gIC8qKlxuICAgKiBUcnVlIGlmIHRoZSBpbW1lZGlhdGUgY2hpbGQgc3BlY2lmaWVkIGV4aXN0c1xuICAgKiBAcGFyYW0geyFzdHJpbmd9IGNoaWxkTmFtZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaGFzQ2hpbGQoY2hpbGROYW1lOiBzdHJpbmcpOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoaXMgbm9kZSBoYXMgbm8gdmFsdWUgb3IgY2hpbGRyZW4uXG4gICAqL1xuICBpc0VtcHR5KCk6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG51bWJlciBvZiBjaGlsZHJlbiBvZiB0aGlzIG5vZGUuXG4gICAqL1xuICBudW1DaGlsZHJlbigpOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIENhbGxzIGFjdGlvbiBmb3IgZWFjaCBjaGlsZC5cbiAgICogQHBhcmFtIHshSW5kZXh9IGluZGV4XG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nLCAhTm9kZSl9IGFjdGlvbiBBY3Rpb24gdG8gYmUgY2FsbGVkIGZvclxuICAgKiBlYWNoIGNoaWxkLiAgSXQncyBwYXNzZWQgdGhlIGNoaWxkIG5hbWUgYW5kIHRoZSBjaGlsZCBub2RlLlxuICAgKiBAcmV0dXJuIHsqfSBUaGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybiBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleSBvbmVcbiAgICovXG4gIGZvckVhY2hDaGlsZChpbmRleDogSW5kZXgsIGFjdGlvbjogKGE6IHN0cmluZywgYjogTm9kZSkgPT4gdm9pZCk6IGFueTtcblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFuPX0gZXhwb3J0Rm9ybWF0IFRydWUgZm9yIGV4cG9ydCBmb3JtYXQgKGFsc28gd2lyZSBwcm90b2NvbCBmb3JtYXQpLlxuICAgKiBAcmV0dXJuIHsqfSBWYWx1ZSBvZiB0aGlzIG5vZGUgYXMgSlNPTi5cbiAgICovXG4gIHZhbChleHBvcnRGb3JtYXQ/OiBib29sZWFuKTogT2JqZWN0O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IGhhc2ggcmVwcmVzZW50aW5nIHRoZSBub2RlIGNvbnRlbnRzLlxuICAgKi9cbiAgaGFzaCgpOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU5vZGV9IG90aGVyIEFub3RoZXIgbm9kZVxuICAgKiBAcmV0dXJuIHshbnVtYmVyfSAtMSBmb3IgbGVzcyB0aGFuLCAwIGZvciBlcXVhbCwgMSBmb3IgZ3JlYXRlciB0aGFuIG90aGVyXG4gICAqL1xuICBjb21wYXJlVG8ob3RoZXI6IE5vZGUpOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU5vZGV9IG90aGVyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgb3Igbm90IHRoaXMgc25hcHNob3QgZXF1YWxzIG90aGVyXG4gICAqL1xuICBlcXVhbHMob3RoZXI6IE5vZGUpOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFJbmRleH0gaW5kZXhEZWZpbml0aW9uXG4gICAqIEByZXR1cm4geyFOb2RlfSBUaGlzIG5vZGUsIHdpdGggdGhlIHNwZWNpZmllZCBpbmRleCBub3cgYXZhaWxhYmxlXG4gICAqL1xuICB3aXRoSW5kZXgoaW5kZXhEZWZpbml0aW9uOiBJbmRleCk6IE5vZGU7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUluZGV4fSBpbmRleERlZmluaXRpb25cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzSW5kZXhlZChpbmRleERlZmluaXRpb246IEluZGV4KTogYm9vbGVhbjtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHshc3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBzdHJ1Y3RcbiAqL1xuZXhwb3J0IGNsYXNzIE5hbWVkTm9kZSB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBuYW1lOiBzdHJpbmcsIHB1YmxpYyBub2RlOiBOb2RlKSB7fVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyFzdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICAgKiBAcmV0dXJuIHtOYW1lZE5vZGV9XG4gICAqL1xuICBzdGF0aWMgV3JhcChuYW1lOiBzdHJpbmcsIG5vZGU6IE5vZGUpIHtcbiAgICByZXR1cm4gbmV3IE5hbWVkTm9kZShuYW1lLCBub2RlKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgTExSQk5vZGUgfSBmcm9tICcuLi91dGlsL1NvcnRlZE1hcCc7XG5pbXBvcnQgeyBTb3J0ZWRNYXAgfSBmcm9tICcuLi91dGlsL1NvcnRlZE1hcCc7XG5pbXBvcnQgeyBOYW1lZE5vZGUgfSBmcm9tICcuL05vZGUnO1xuXG5jb25zdCBMT0dfMiA9IE1hdGgubG9nKDIpO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5jbGFzcyBCYXNlMTJOdW0ge1xuICBjb3VudDogbnVtYmVyO1xuICBwcml2YXRlIGN1cnJlbnRfOiBudW1iZXI7XG4gIHByaXZhdGUgYml0c186IG51bWJlcjtcblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IGxlbmd0aFxuICAgKi9cbiAgY29uc3RydWN0b3IobGVuZ3RoOiBudW1iZXIpIHtcbiAgICBjb25zdCBsb2dCYXNlMiA9IChudW06IG51bWJlcikgPT5cbiAgICAgIHBhcnNlSW50KChNYXRoLmxvZyhudW0pIC8gTE9HXzIpIGFzIGFueSwgMTApO1xuICAgIGNvbnN0IGJpdE1hc2sgPSAoYml0czogbnVtYmVyKSA9PiBwYXJzZUludChBcnJheShiaXRzICsgMSkuam9pbignMScpLCAyKTtcbiAgICB0aGlzLmNvdW50ID0gbG9nQmFzZTIobGVuZ3RoICsgMSk7XG4gICAgdGhpcy5jdXJyZW50XyA9IHRoaXMuY291bnQgLSAxO1xuICAgIGNvbnN0IG1hc2sgPSBiaXRNYXNrKHRoaXMuY291bnQpO1xuICAgIHRoaXMuYml0c18gPSAobGVuZ3RoICsgMSkgJiBtYXNrO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBuZXh0Qml0SXNPbmUoKTogYm9vbGVhbiB7XG4gICAgLy9ub2luc3BlY3Rpb24gSlNCaXR3aXNlT3BlcmF0b3JVc2FnZVxuICAgIGNvbnN0IHJlc3VsdCA9ICEodGhpcy5iaXRzXyAmICgweDEgPDwgdGhpcy5jdXJyZW50XykpO1xuICAgIHRoaXMuY3VycmVudF8tLTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5cbi8qKlxuICogVGFrZXMgYSBsaXN0IG9mIGNoaWxkIG5vZGVzIGFuZCBjb25zdHJ1Y3RzIGEgU29ydGVkU2V0IHVzaW5nIHRoZSBnaXZlbiBjb21wYXJpc29uXG4gKiBmdW5jdGlvblxuICpcbiAqIFVzZXMgdGhlIGFsZ29yaXRobSBkZXNjcmliZWQgaW4gdGhlIHBhcGVyIGxpbmtlZCBoZXJlOlxuICogaHR0cDovL2NpdGVzZWVyeC5pc3QucHN1LmVkdS92aWV3ZG9jL3N1bW1hcnk/ZG9pPTEwLjEuMS40Ni4xNDU4XG4gKlxuICogQHRlbXBsYXRlIEssIFZcbiAqIEBwYXJhbSB7QXJyYXkuPCFOYW1lZE5vZGU+fSBjaGlsZExpc3QgVW5zb3J0ZWQgbGlzdCBvZiBjaGlsZHJlblxuICogQHBhcmFtIHtmdW5jdGlvbighTmFtZWROb2RlLCAhTmFtZWROb2RlKTpudW1iZXJ9IGNtcCBUaGUgY29tcGFyaXNvbiBtZXRob2QgdG8gYmUgdXNlZFxuICogQHBhcmFtIHsoZnVuY3Rpb24oTmFtZWROb2RlKTpLKT19IGtleUZuIEFuIG9wdGlvbmFsIGZ1bmN0aW9uIHRvIGV4dHJhY3QgSyBmcm9tIGEgbm9kZSB3cmFwcGVyLCBpZiBLJ3NcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlIGlzIG5vdCBOYW1lZE5vZGVcbiAqIEBwYXJhbSB7KGZ1bmN0aW9uKEssIEspOm51bWJlcik9fSBtYXBTb3J0Rm4gQW4gb3B0aW9uYWwgb3ZlcnJpZGUgZm9yIGNvbXBhcmF0b3IgdXNlZCBieSB0aGUgZ2VuZXJhdGVkIHNvcnRlZCBtYXBcbiAqIEByZXR1cm4ge1NvcnRlZE1hcC48SywgVj59XG4gKi9cbmV4cG9ydCBjb25zdCBidWlsZENoaWxkU2V0ID0gZnVuY3Rpb248SywgVj4oXG4gIGNoaWxkTGlzdDogTmFtZWROb2RlW10sXG4gIGNtcDogKGE6IE5hbWVkTm9kZSwgYjogTmFtZWROb2RlKSA9PiBudW1iZXIsXG4gIGtleUZuPzogKGE6IE5hbWVkTm9kZSkgPT4gSyxcbiAgbWFwU29ydEZuPzogKGE6IEssIGI6IEspID0+IG51bWJlclxuKTogU29ydGVkTWFwPEssIFY+IHtcbiAgY2hpbGRMaXN0LnNvcnQoY21wKTtcblxuICBjb25zdCBidWlsZEJhbGFuY2VkVHJlZSA9IGZ1bmN0aW9uKFxuICAgIGxvdzogbnVtYmVyLFxuICAgIGhpZ2g6IG51bWJlclxuICApOiBMTFJCTm9kZTxLLCBWPiB8IG51bGwge1xuICAgIGNvbnN0IGxlbmd0aCA9IGhpZ2ggLSBsb3c7XG4gICAgbGV0IG5hbWVkTm9kZTogTmFtZWROb2RlO1xuICAgIGxldCBrZXk6IEs7XG4gICAgaWYgKGxlbmd0aCA9PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2UgaWYgKGxlbmd0aCA9PSAxKSB7XG4gICAgICBuYW1lZE5vZGUgPSBjaGlsZExpc3RbbG93XTtcbiAgICAgIGtleSA9IGtleUZuID8ga2V5Rm4obmFtZWROb2RlKSA6ICgobmFtZWROb2RlIGFzIGFueSkgYXMgSyk7XG4gICAgICByZXR1cm4gbmV3IExMUkJOb2RlKFxuICAgICAgICBrZXksXG4gICAgICAgIChuYW1lZE5vZGUubm9kZSBhcyBhbnkpIGFzIFYsXG4gICAgICAgIExMUkJOb2RlLkJMQUNLLFxuICAgICAgICBudWxsLFxuICAgICAgICBudWxsXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBtaWRkbGUgPSBwYXJzZUludCgobGVuZ3RoIC8gMikgYXMgYW55LCAxMCkgKyBsb3c7XG4gICAgICBjb25zdCBsZWZ0ID0gYnVpbGRCYWxhbmNlZFRyZWUobG93LCBtaWRkbGUpO1xuICAgICAgY29uc3QgcmlnaHQgPSBidWlsZEJhbGFuY2VkVHJlZShtaWRkbGUgKyAxLCBoaWdoKTtcbiAgICAgIG5hbWVkTm9kZSA9IGNoaWxkTGlzdFttaWRkbGVdO1xuICAgICAga2V5ID0ga2V5Rm4gPyBrZXlGbihuYW1lZE5vZGUpIDogKChuYW1lZE5vZGUgYXMgYW55KSBhcyBLKTtcbiAgICAgIHJldHVybiBuZXcgTExSQk5vZGUoXG4gICAgICAgIGtleSxcbiAgICAgICAgKG5hbWVkTm9kZS5ub2RlIGFzIGFueSkgYXMgVixcbiAgICAgICAgTExSQk5vZGUuQkxBQ0ssXG4gICAgICAgIGxlZnQsXG4gICAgICAgIHJpZ2h0XG4gICAgICApO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBidWlsZEZyb20xMkFycmF5ID0gZnVuY3Rpb24oYmFzZTEyOiBCYXNlMTJOdW0pOiBMTFJCTm9kZTxLLCBWPiB7XG4gICAgbGV0IG5vZGU6IExMUkJOb2RlPEssIFY+ID0gbnVsbDtcbiAgICBsZXQgcm9vdCA9IG51bGw7XG4gICAgbGV0IGluZGV4ID0gY2hpbGRMaXN0Lmxlbmd0aDtcblxuICAgIGNvbnN0IGJ1aWxkUGVubmFudCA9IGZ1bmN0aW9uKGNodW5rU2l6ZTogbnVtYmVyLCBjb2xvcjogYm9vbGVhbikge1xuICAgICAgY29uc3QgbG93ID0gaW5kZXggLSBjaHVua1NpemU7XG4gICAgICBjb25zdCBoaWdoID0gaW5kZXg7XG4gICAgICBpbmRleCAtPSBjaHVua1NpemU7XG4gICAgICBjb25zdCBjaGlsZFRyZWUgPSBidWlsZEJhbGFuY2VkVHJlZShsb3cgKyAxLCBoaWdoKTtcbiAgICAgIGNvbnN0IG5hbWVkTm9kZSA9IGNoaWxkTGlzdFtsb3ddO1xuICAgICAgY29uc3Qga2V5OiBLID0ga2V5Rm4gPyBrZXlGbihuYW1lZE5vZGUpIDogKChuYW1lZE5vZGUgYXMgYW55KSBhcyBLKTtcbiAgICAgIGF0dGFjaFBlbm5hbnQoXG4gICAgICAgIG5ldyBMTFJCTm9kZShrZXksIChuYW1lZE5vZGUubm9kZSBhcyBhbnkpIGFzIFYsIGNvbG9yLCBudWxsLCBjaGlsZFRyZWUpXG4gICAgICApO1xuICAgIH07XG5cbiAgICBjb25zdCBhdHRhY2hQZW5uYW50ID0gZnVuY3Rpb24ocGVubmFudDogTExSQk5vZGU8SywgVj4pIHtcbiAgICAgIGlmIChub2RlKSB7XG4gICAgICAgIG5vZGUubGVmdCA9IHBlbm5hbnQ7XG4gICAgICAgIG5vZGUgPSBwZW5uYW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcm9vdCA9IHBlbm5hbnQ7XG4gICAgICAgIG5vZGUgPSBwZW5uYW50O1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJhc2UxMi5jb3VudDsgKytpKSB7XG4gICAgICBjb25zdCBpc09uZSA9IGJhc2UxMi5uZXh0Qml0SXNPbmUoKTtcbiAgICAgIC8vIFRoZSBudW1iZXIgb2Ygbm9kZXMgdGFrZW4gaW4gZWFjaCBzbGljZSBpcyAyXihhcnIubGVuZ3RoIC0gKGkgKyAxKSlcbiAgICAgIGNvbnN0IGNodW5rU2l6ZSA9IE1hdGgucG93KDIsIGJhc2UxMi5jb3VudCAtIChpICsgMSkpO1xuICAgICAgaWYgKGlzT25lKSB7XG4gICAgICAgIGJ1aWxkUGVubmFudChjaHVua1NpemUsIExMUkJOb2RlLkJMQUNLKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGN1cnJlbnQgPT0gMlxuICAgICAgICBidWlsZFBlbm5hbnQoY2h1bmtTaXplLCBMTFJCTm9kZS5CTEFDSyk7XG4gICAgICAgIGJ1aWxkUGVubmFudChjaHVua1NpemUsIExMUkJOb2RlLlJFRCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByb290O1xuICB9O1xuXG4gIGNvbnN0IGJhc2UxMiA9IG5ldyBCYXNlMTJOdW0oY2hpbGRMaXN0Lmxlbmd0aCk7XG4gIGNvbnN0IHJvb3QgPSBidWlsZEZyb20xMkFycmF5KGJhc2UxMik7XG5cbiAgcmV0dXJuIG5ldyBTb3J0ZWRNYXA8SywgVj4obWFwU29ydEZuIHx8IChjbXAgYXMgYW55KSwgcm9vdCk7XG59O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgbmFtZUNvbXBhcmUgfSBmcm9tICcuLi91dGlsL3V0aWwnO1xuaW1wb3J0IHsgTmFtZWROb2RlIH0gZnJvbSAnLi9Ob2RlJztcblxuZXhwb3J0IGZ1bmN0aW9uIE5BTUVfT05MWV9DT01QQVJBVE9SKGxlZnQ6IE5hbWVkTm9kZSwgcmlnaHQ6IE5hbWVkTm9kZSkge1xuICByZXR1cm4gbmFtZUNvbXBhcmUobGVmdC5uYW1lLCByaWdodC5uYW1lKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIE5BTUVfQ09NUEFSQVRPUihsZWZ0OiBzdHJpbmcsIHJpZ2h0OiBzdHJpbmcpIHtcbiAgcmV0dXJuIG5hbWVDb21wYXJlKGxlZnQsIHJpZ2h0KTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IE5vZGUsIE5hbWVkTm9kZSB9IGZyb20gJy4uL05vZGUnO1xuaW1wb3J0IHsgTUlOX05BTUUsIE1BWF9OQU1FIH0gZnJvbSAnLi4vLi4vdXRpbC91dGlsJztcbmltcG9ydCB7IENvbXBhcmF0b3IgfSBmcm9tICcuLi8uLi91dGlsL1NvcnRlZE1hcCc7XG5cbi8qKlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgSW5kZXgge1xuICAvKipcbiAgICogQHBhcmFtIHshTmFtZWROb2RlfSBhXG4gICAqIEBwYXJhbSB7IU5hbWVkTm9kZX0gYlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBhYnN0cmFjdCBjb21wYXJlKGE6IE5hbWVkTm9kZSwgYjogTmFtZWROb2RlKTogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBhYnN0cmFjdCBpc0RlZmluZWRPbihub2RlOiBOb2RlKTogYm9vbGVhbjtcblxuICAvKipcbiAgICogQHJldHVybiB7ZnVuY3Rpb24oIU5hbWVkTm9kZSwgIU5hbWVkTm9kZSk6bnVtYmVyfSBBIHN0YW5kYWxvbmUgY29tcGFyaXNvbiBmdW5jdGlvbiBmb3JcbiAgICogdGhpcyBpbmRleFxuICAgKi9cbiAgZ2V0Q29tcGFyZSgpOiBDb21wYXJhdG9yPE5hbWVkTm9kZT4ge1xuICAgIHJldHVybiB0aGlzLmNvbXBhcmUuYmluZCh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHaXZlbiBhIGJlZm9yZSBhbmQgYWZ0ZXIgdmFsdWUgZm9yIGEgbm9kZSwgZGV0ZXJtaW5lIGlmIHRoZSBpbmRleGVkIHZhbHVlIGhhcyBjaGFuZ2VkLiBFdmVuIGlmIHRoZXkgYXJlIGRpZmZlcmVudCxcbiAgICogaXQncyBwb3NzaWJsZSB0aGF0IHRoZSBjaGFuZ2VzIGFyZSBpc29sYXRlZCB0byBwYXJ0cyBvZiB0aGUgc25hcHNob3QgdGhhdCBhcmUgbm90IGluZGV4ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7IU5vZGV9IG9sZE5vZGVcbiAgICogQHBhcmFtIHshTm9kZX0gbmV3Tm9kZVxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBwb3J0aW9uIG9mIHRoZSBzbmFwc2hvdCBiZWluZyBpbmRleGVkIGNoYW5nZWQgYmV0d2VlbiBvbGROb2RlIGFuZCBuZXdOb2RlXG4gICAqL1xuICBpbmRleGVkVmFsdWVDaGFuZ2VkKG9sZE5vZGU6IE5vZGUsIG5ld05vZGU6IE5vZGUpOiBib29sZWFuIHtcbiAgICBjb25zdCBvbGRXcmFwcGVkID0gbmV3IE5hbWVkTm9kZShNSU5fTkFNRSwgb2xkTm9kZSk7XG4gICAgY29uc3QgbmV3V3JhcHBlZCA9IG5ldyBOYW1lZE5vZGUoTUlOX05BTUUsIG5ld05vZGUpO1xuICAgIHJldHVybiB0aGlzLmNvbXBhcmUob2xkV3JhcHBlZCwgbmV3V3JhcHBlZCkgIT09IDA7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IU5hbWVkTm9kZX0gYSBub2RlIHdyYXBwZXIgdGhhdCB3aWxsIHNvcnQgZXF1YWwgdG8gb3IgbGVzcyB0aGFuXG4gICAqIGFueSBvdGhlciBub2RlIHdyYXBwZXIsIHVzaW5nIHRoaXMgaW5kZXhcbiAgICovXG4gIG1pblBvc3QoKTogTmFtZWROb2RlIHtcbiAgICByZXR1cm4gKE5hbWVkTm9kZSBhcyBhbnkpLk1JTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshTmFtZWROb2RlfSBhIG5vZGUgd3JhcHBlciB0aGF0IHdpbGwgc29ydCBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG9cbiAgICogYW55IG90aGVyIG5vZGUgd3JhcHBlciwgdXNpbmcgdGhpcyBpbmRleFxuICAgKi9cbiAgYWJzdHJhY3QgbWF4UG9zdCgpOiBOYW1lZE5vZGU7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Kn0gaW5kZXhWYWx1ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcmV0dXJuIHshTmFtZWROb2RlfVxuICAgKi9cbiAgYWJzdHJhY3QgbWFrZVBvc3QoaW5kZXhWYWx1ZTogYW55LCBuYW1lOiBzdHJpbmcpOiBOYW1lZE5vZGU7XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFzdHJpbmd9IFN0cmluZyByZXByZXNlbnRhdGlvbiBmb3IgaW5jbHVzaW9uIGluIGEgcXVlcnkgc3BlY1xuICAgKi9cbiAgYWJzdHJhY3QgdG9TdHJpbmcoKTogc3RyaW5nO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgSW5kZXggfSBmcm9tICcuL0luZGV4JztcbmltcG9ydCB7IE5vZGUsIE5hbWVkTm9kZSB9IGZyb20gJy4uL05vZGUnO1xuaW1wb3J0IHsgbmFtZUNvbXBhcmUsIE1BWF9OQU1FIH0gZnJvbSAnLi4vLi4vdXRpbC91dGlsJztcbmltcG9ydCB7IGFzc2VydCwgYXNzZXJ0aW9uRXJyb3IgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBDaGlsZHJlbk5vZGUgfSBmcm9tICcuLi9DaGlsZHJlbk5vZGUnO1xuXG5sZXQgX19FTVBUWV9OT0RFOiBDaGlsZHJlbk5vZGU7XG5cbmV4cG9ydCBjbGFzcyBLZXlJbmRleCBleHRlbmRzIEluZGV4IHtcbiAgc3RhdGljIGdldCBfX0VNUFRZX05PREUoKSB7XG4gICAgcmV0dXJuIF9fRU1QVFlfTk9ERTtcbiAgfVxuXG4gIHN0YXRpYyBzZXQgX19FTVBUWV9OT0RFKHZhbCkge1xuICAgIF9fRU1QVFlfTk9ERSA9IHZhbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgY29tcGFyZShhOiBOYW1lZE5vZGUsIGI6IE5hbWVkTm9kZSk6IG51bWJlciB7XG4gICAgcmV0dXJuIG5hbWVDb21wYXJlKGEubmFtZSwgYi5uYW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgaXNEZWZpbmVkT24obm9kZTogTm9kZSk6IGJvb2xlYW4ge1xuICAgIC8vIFdlIGNvdWxkIHByb2JhYmx5IHJldHVybiB0cnVlIGhlcmUgKHNpbmNlIGV2ZXJ5IG5vZGUgaGFzIGEga2V5KSwgYnV0IGl0J3MgbmV2ZXIgY2FsbGVkXG4gICAgLy8gc28ganVzdCBsZWF2aW5nIHVuaW1wbGVtZW50ZWQgZm9yIG5vdy5cbiAgICB0aHJvdyBhc3NlcnRpb25FcnJvcignS2V5SW5kZXguaXNEZWZpbmVkT24gbm90IGV4cGVjdGVkIHRvIGJlIGNhbGxlZC4nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgaW5kZXhlZFZhbHVlQ2hhbmdlZChvbGROb2RlOiBOb2RlLCBuZXdOb2RlOiBOb2RlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZhbHNlOyAvLyBUaGUga2V5IGZvciBhIG5vZGUgbmV2ZXIgY2hhbmdlcy5cbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgbWluUG9zdCgpIHtcbiAgICByZXR1cm4gKE5hbWVkTm9kZSBhcyBhbnkpLk1JTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgbWF4UG9zdCgpOiBOYW1lZE5vZGUge1xuICAgIC8vIFRPRE86IFRoaXMgc2hvdWxkIHJlYWxseSBiZSBjcmVhdGVkIG9uY2UgYW5kIGNhY2hlZCBpbiBhIHN0YXRpYyBwcm9wZXJ0eSwgYnV0XG4gICAgLy8gTmFtZWROb2RlIGlzbid0IGRlZmluZWQgeWV0LCBzbyBJIGNhbid0IHVzZSBpdCBpbiBhIHN0YXRpYy4gIEJsZWguXG4gICAgcmV0dXJuIG5ldyBOYW1lZE5vZGUoTUFYX05BTUUsIF9fRU1QVFlfTk9ERSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHsqfSBpbmRleFZhbHVlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4geyFOYW1lZE5vZGV9XG4gICAqL1xuICBtYWtlUG9zdChpbmRleFZhbHVlOiBzdHJpbmcsIG5hbWU6IHN0cmluZyk6IE5hbWVkTm9kZSB7XG4gICAgYXNzZXJ0KFxuICAgICAgdHlwZW9mIGluZGV4VmFsdWUgPT09ICdzdHJpbmcnLFxuICAgICAgJ0tleUluZGV4IGluZGV4VmFsdWUgbXVzdCBhbHdheXMgYmUgYSBzdHJpbmcuJ1xuICAgICk7XG4gICAgLy8gV2UganVzdCB1c2UgZW1wdHkgbm9kZSwgYnV0IGl0J2xsIG5ldmVyIGJlIGNvbXBhcmVkLCBzaW5jZSBvdXIgY29tcGFyYXRvciBvbmx5IGxvb2tzIGF0IG5hbWUuXG4gICAgcmV0dXJuIG5ldyBOYW1lZE5vZGUoaW5kZXhWYWx1ZSwgX19FTVBUWV9OT0RFKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshc3RyaW5nfSBTdHJpbmcgcmVwcmVzZW50YXRpb24gZm9yIGluY2x1c2lvbiBpbiBhIHF1ZXJ5IHNwZWNcbiAgICovXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICcua2V5JztcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgS0VZX0lOREVYID0gbmV3IEtleUluZGV4KCk7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBuYW1lQ29tcGFyZSwgTUFYX05BTUUgfSBmcm9tICcuLi8uLi91dGlsL3V0aWwnO1xuaW1wb3J0IHsgSW5kZXggfSBmcm9tICcuL0luZGV4JztcbmltcG9ydCB7IENoaWxkcmVuTm9kZSwgTUFYX05PREUgfSBmcm9tICcuLi9DaGlsZHJlbk5vZGUnO1xuaW1wb3J0IHsgTmFtZWROb2RlLCBOb2RlIH0gZnJvbSAnLi4vTm9kZSc7XG5pbXBvcnQgeyBub2RlRnJvbUpTT04gfSBmcm9tICcuLi9ub2RlRnJvbUpTT04nO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uLy4uL3V0aWwvUGF0aCc7XG5cbi8qKlxuICogQHBhcmFtIHshUGF0aH0gaW5kZXhQYXRoXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIHtJbmRleH1cbiAqL1xuZXhwb3J0IGNsYXNzIFBhdGhJbmRleCBleHRlbmRzIEluZGV4IHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBpbmRleFBhdGhfOiBQYXRoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGFzc2VydChcbiAgICAgICFpbmRleFBhdGhfLmlzRW1wdHkoKSAmJiBpbmRleFBhdGhfLmdldEZyb250KCkgIT09ICcucHJpb3JpdHknLFxuICAgICAgXCJDYW4ndCBjcmVhdGUgUGF0aEluZGV4IHdpdGggZW1wdHkgcGF0aCBvciAucHJpb3JpdHkga2V5XCJcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU5vZGV9IHNuYXBcbiAgICogQHJldHVybiB7IU5vZGV9XG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIHByb3RlY3RlZCBleHRyYWN0Q2hpbGQoc25hcDogTm9kZSk6IE5vZGUge1xuICAgIHJldHVybiBzbmFwLmdldENoaWxkKHRoaXMuaW5kZXhQYXRoXyk7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGlzRGVmaW5lZE9uKG5vZGU6IE5vZGUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIW5vZGUuZ2V0Q2hpbGQodGhpcy5pbmRleFBhdGhfKS5pc0VtcHR5KCk7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGNvbXBhcmUoYTogTmFtZWROb2RlLCBiOiBOYW1lZE5vZGUpOiBudW1iZXIge1xuICAgIGNvbnN0IGFDaGlsZCA9IHRoaXMuZXh0cmFjdENoaWxkKGEubm9kZSk7XG4gICAgY29uc3QgYkNoaWxkID0gdGhpcy5leHRyYWN0Q2hpbGQoYi5ub2RlKTtcbiAgICBjb25zdCBpbmRleENtcCA9IGFDaGlsZC5jb21wYXJlVG8oYkNoaWxkKTtcbiAgICBpZiAoaW5kZXhDbXAgPT09IDApIHtcbiAgICAgIHJldHVybiBuYW1lQ29tcGFyZShhLm5hbWUsIGIubmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBpbmRleENtcDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIG1ha2VQb3N0KGluZGV4VmFsdWU6IG9iamVjdCwgbmFtZTogc3RyaW5nKTogTmFtZWROb2RlIHtcbiAgICBjb25zdCB2YWx1ZU5vZGUgPSBub2RlRnJvbUpTT04oaW5kZXhWYWx1ZSk7XG4gICAgY29uc3Qgbm9kZSA9IENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFLnVwZGF0ZUNoaWxkKFxuICAgICAgdGhpcy5pbmRleFBhdGhfLFxuICAgICAgdmFsdWVOb2RlXG4gICAgKTtcbiAgICByZXR1cm4gbmV3IE5hbWVkTm9kZShuYW1lLCBub2RlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgbWF4UG9zdCgpOiBOYW1lZE5vZGUge1xuICAgIGNvbnN0IG5vZGUgPSBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERS51cGRhdGVDaGlsZCh0aGlzLmluZGV4UGF0aF8sIE1BWF9OT0RFKTtcbiAgICByZXR1cm4gbmV3IE5hbWVkTm9kZShNQVhfTkFNRSwgbm9kZSk7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuaW5kZXhQYXRoXy5zbGljZSgpLmpvaW4oJy8nKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgSW5kZXggfSBmcm9tICcuL0luZGV4JztcbmltcG9ydCB7IG5hbWVDb21wYXJlLCBNQVhfTkFNRSB9IGZyb20gJy4uLy4uL3V0aWwvdXRpbCc7XG5pbXBvcnQgeyBOYW1lZE5vZGUsIE5vZGUgfSBmcm9tICcuLi9Ob2RlJztcbmltcG9ydCB7IExlYWZOb2RlIH0gZnJvbSAnLi4vTGVhZk5vZGUnO1xuXG5sZXQgbm9kZUZyb21KU09OOiAoYTogYW55KSA9PiBOb2RlO1xubGV0IE1BWF9OT0RFOiBOb2RlO1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0Tm9kZUZyb21KU09OKHZhbDogKGE6IGFueSkgPT4gTm9kZSkge1xuICBub2RlRnJvbUpTT04gPSB2YWw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRNYXhOb2RlKHZhbDogTm9kZSkge1xuICBNQVhfTk9ERSA9IHZhbDtcbn1cblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIHtJbmRleH1cbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBQcmlvcml0eUluZGV4IGV4dGVuZHMgSW5kZXgge1xuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGNvbXBhcmUoYTogTmFtZWROb2RlLCBiOiBOYW1lZE5vZGUpOiBudW1iZXIge1xuICAgIGNvbnN0IGFQcmlvcml0eSA9IGEubm9kZS5nZXRQcmlvcml0eSgpO1xuICAgIGNvbnN0IGJQcmlvcml0eSA9IGIubm9kZS5nZXRQcmlvcml0eSgpO1xuICAgIGNvbnN0IGluZGV4Q21wID0gYVByaW9yaXR5LmNvbXBhcmVUbyhiUHJpb3JpdHkpO1xuICAgIGlmIChpbmRleENtcCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG5hbWVDb21wYXJlKGEubmFtZSwgYi5uYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGluZGV4Q21wO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgaXNEZWZpbmVkT24obm9kZTogTm9kZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhbm9kZS5nZXRQcmlvcml0eSgpLmlzRW1wdHkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgaW5kZXhlZFZhbHVlQ2hhbmdlZChvbGROb2RlOiBOb2RlLCBuZXdOb2RlOiBOb2RlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICFvbGROb2RlLmdldFByaW9yaXR5KCkuZXF1YWxzKG5ld05vZGUuZ2V0UHJpb3JpdHkoKSk7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIG1pblBvc3QoKTogTmFtZWROb2RlIHtcbiAgICByZXR1cm4gKE5hbWVkTm9kZSBhcyBhbnkpLk1JTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgbWF4UG9zdCgpOiBOYW1lZE5vZGUge1xuICAgIHJldHVybiBuZXcgTmFtZWROb2RlKE1BWF9OQU1FLCBuZXcgTGVhZk5vZGUoJ1tQUklPUklUWS1QT1NUXScsIE1BWF9OT0RFKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHsqfSBpbmRleFZhbHVlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4geyFOYW1lZE5vZGV9XG4gICAqL1xuICBtYWtlUG9zdChpbmRleFZhbHVlOiBhbnksIG5hbWU6IHN0cmluZyk6IE5hbWVkTm9kZSB7XG4gICAgY29uc3QgcHJpb3JpdHlOb2RlID0gbm9kZUZyb21KU09OKGluZGV4VmFsdWUpO1xuICAgIHJldHVybiBuZXcgTmFtZWROb2RlKG5hbWUsIG5ldyBMZWFmTm9kZSgnW1BSSU9SSVRZLVBPU1RdJywgcHJpb3JpdHlOb2RlKSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IXN0cmluZ30gU3RyaW5nIHJlcHJlc2VudGF0aW9uIGZvciBpbmNsdXNpb24gaW4gYSBxdWVyeSBzcGVjXG4gICAqL1xuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiAnLnByaW9yaXR5JztcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgUFJJT1JJVFlfSU5ERVggPSBuZXcgUHJpb3JpdHlJbmRleCgpO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgSW5kZXggfSBmcm9tICcuL0luZGV4JztcbmltcG9ydCB7IE5hbWVkTm9kZSwgTm9kZSB9IGZyb20gJy4uL05vZGUnO1xuaW1wb3J0IHsgbmFtZUNvbXBhcmUgfSBmcm9tICcuLi8uLi91dGlsL3V0aWwnO1xuaW1wb3J0IHsgbm9kZUZyb21KU09OIH0gZnJvbSAnLi4vbm9kZUZyb21KU09OJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIHtJbmRleH1cbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBWYWx1ZUluZGV4IGV4dGVuZHMgSW5kZXgge1xuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGNvbXBhcmUoYTogTmFtZWROb2RlLCBiOiBOYW1lZE5vZGUpOiBudW1iZXIge1xuICAgIGNvbnN0IGluZGV4Q21wID0gYS5ub2RlLmNvbXBhcmVUbyhiLm5vZGUpO1xuICAgIGlmIChpbmRleENtcCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG5hbWVDb21wYXJlKGEubmFtZSwgYi5uYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGluZGV4Q21wO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgaXNEZWZpbmVkT24obm9kZTogTm9kZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBpbmRleGVkVmFsdWVDaGFuZ2VkKG9sZE5vZGU6IE5vZGUsIG5ld05vZGU6IE5vZGUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIW9sZE5vZGUuZXF1YWxzKG5ld05vZGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBtaW5Qb3N0KCk6IE5hbWVkTm9kZSB7XG4gICAgcmV0dXJuIChOYW1lZE5vZGUgYXMgYW55KS5NSU47XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIG1heFBvc3QoKTogTmFtZWROb2RlIHtcbiAgICByZXR1cm4gKE5hbWVkTm9kZSBhcyBhbnkpLk1BWDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyp9IGluZGV4VmFsdWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7IU5hbWVkTm9kZX1cbiAgICovXG4gIG1ha2VQb3N0KGluZGV4VmFsdWU6IG9iamVjdCwgbmFtZTogc3RyaW5nKTogTmFtZWROb2RlIHtcbiAgICBjb25zdCB2YWx1ZU5vZGUgPSBub2RlRnJvbUpTT04oaW5kZXhWYWx1ZSk7XG4gICAgcmV0dXJuIG5ldyBOYW1lZE5vZGUobmFtZSwgdmFsdWVOb2RlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshc3RyaW5nfSBTdHJpbmcgcmVwcmVzZW50YXRpb24gZm9yIGluY2x1c2lvbiBpbiBhIHF1ZXJ5IHNwZWNcbiAgICovXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICcudmFsdWUnO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBWQUxVRV9JTkRFWCA9IG5ldyBWYWx1ZUluZGV4KCk7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDaGlsZHJlbk5vZGUgfSBmcm9tICcuL0NoaWxkcmVuTm9kZSc7XG5pbXBvcnQgeyBMZWFmTm9kZSB9IGZyb20gJy4vTGVhZk5vZGUnO1xuaW1wb3J0IHsgTmFtZWROb2RlLCBOb2RlIH0gZnJvbSAnLi9Ob2RlJztcbmltcG9ydCB7IGZvckVhY2gsIGNvbnRhaW5zIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgYnVpbGRDaGlsZFNldCB9IGZyb20gJy4vY2hpbGRTZXQnO1xuaW1wb3J0IHsgTkFNRV9DT01QQVJBVE9SLCBOQU1FX09OTFlfQ09NUEFSQVRPUiB9IGZyb20gJy4vY29tcGFyYXRvcnMnO1xuaW1wb3J0IHsgSW5kZXhNYXAgfSBmcm9tICcuL0luZGV4TWFwJztcbmltcG9ydCB7IFBSSU9SSVRZX0lOREVYLCBzZXROb2RlRnJvbUpTT04gfSBmcm9tICcuL2luZGV4ZXMvUHJpb3JpdHlJbmRleCc7XG5pbXBvcnQgeyBTb3J0ZWRNYXAgfSBmcm9tICcuLi91dGlsL1NvcnRlZE1hcCc7XG5cbmNvbnN0IFVTRV9ISU5aRSA9IHRydWU7XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIHNuYXBzaG90IG5vZGUgcmVwcmVzZW50aW5nIHRoZSBwYXNzZWQgSlNPTiBhbmQgcmV0dXJucyBpdC5cbiAqIEBwYXJhbSB7Kn0ganNvbiBKU09OIHRvIGNyZWF0ZSBhIG5vZGUgZm9yLlxuICogQHBhcmFtIHs/c3RyaW5nfD9udW1iZXI9fSBwcmlvcml0eSBPcHRpb25hbCBwcmlvcml0eSB0byB1c2UuICBUaGlzIHdpbGwgYmUgaWdub3JlZCBpZiB0aGVcbiAqIHBhc3NlZCBKU09OIGNvbnRhaW5zIGEgLnByaW9yaXR5IHByb3BlcnR5LlxuICogQHJldHVybiB7IU5vZGV9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub2RlRnJvbUpTT04oXG4gIGpzb246IGFueSB8IG51bGwsXG4gIHByaW9yaXR5OiBzdHJpbmcgfCBudW1iZXIgfCBudWxsID0gbnVsbFxuKTogTm9kZSB7XG4gIGlmIChqc29uID09PSBudWxsKSB7XG4gICAgcmV0dXJuIENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBqc29uID09PSAnb2JqZWN0JyAmJiAnLnByaW9yaXR5JyBpbiBqc29uKSB7XG4gICAgcHJpb3JpdHkgPSBqc29uWycucHJpb3JpdHknXTtcbiAgfVxuXG4gIGFzc2VydChcbiAgICBwcmlvcml0eSA9PT0gbnVsbCB8fFxuICAgICAgdHlwZW9mIHByaW9yaXR5ID09PSAnc3RyaW5nJyB8fFxuICAgICAgdHlwZW9mIHByaW9yaXR5ID09PSAnbnVtYmVyJyB8fFxuICAgICAgKHR5cGVvZiBwcmlvcml0eSA9PT0gJ29iamVjdCcgJiYgJy5zdicgaW4gKHByaW9yaXR5IGFzIG9iamVjdCkpLFxuICAgICdJbnZhbGlkIHByaW9yaXR5IHR5cGUgZm91bmQ6ICcgKyB0eXBlb2YgcHJpb3JpdHlcbiAgKTtcblxuICBpZiAodHlwZW9mIGpzb24gPT09ICdvYmplY3QnICYmICcudmFsdWUnIGluIGpzb24gJiYganNvblsnLnZhbHVlJ10gIT09IG51bGwpIHtcbiAgICBqc29uID0ganNvblsnLnZhbHVlJ107XG4gIH1cblxuICAvLyBWYWxpZCBsZWFmIG5vZGVzIGluY2x1ZGUgbm9uLW9iamVjdHMgb3Igc2VydmVyLXZhbHVlIHdyYXBwZXIgb2JqZWN0c1xuICBpZiAodHlwZW9mIGpzb24gIT09ICdvYmplY3QnIHx8ICcuc3YnIGluIGpzb24pIHtcbiAgICBjb25zdCBqc29uTGVhZiA9IGpzb24gYXMgc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB8IG9iamVjdDtcbiAgICByZXR1cm4gbmV3IExlYWZOb2RlKGpzb25MZWFmLCBub2RlRnJvbUpTT04ocHJpb3JpdHkpKTtcbiAgfVxuXG4gIGlmICghKGpzb24gaW5zdGFuY2VvZiBBcnJheSkgJiYgVVNFX0hJTlpFKSB7XG4gICAgY29uc3QgY2hpbGRyZW46IE5hbWVkTm9kZVtdID0gW107XG4gICAgbGV0IGNoaWxkcmVuSGF2ZVByaW9yaXR5ID0gZmFsc2U7XG4gICAgY29uc3QgaGluemVKc29uT2JqOiB7IFtrOiBzdHJpbmddOiBhbnkgfSA9IGpzb24gYXMgb2JqZWN0O1xuICAgIGZvckVhY2goaGluemVKc29uT2JqLCAoa2V5OiBzdHJpbmcsIGNoaWxkOiBhbnkpID0+IHtcbiAgICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJyB8fCBrZXkuc3Vic3RyaW5nKDAsIDEpICE9PSAnLicpIHtcbiAgICAgICAgLy8gSWdub3JlIG1ldGFkYXRhIG5vZGVzXG4gICAgICAgIGNvbnN0IGNoaWxkTm9kZSA9IG5vZGVGcm9tSlNPTihoaW56ZUpzb25PYmpba2V5XSk7XG4gICAgICAgIGlmICghY2hpbGROb2RlLmlzRW1wdHkoKSkge1xuICAgICAgICAgIGNoaWxkcmVuSGF2ZVByaW9yaXR5ID1cbiAgICAgICAgICAgIGNoaWxkcmVuSGF2ZVByaW9yaXR5IHx8ICFjaGlsZE5vZGUuZ2V0UHJpb3JpdHkoKS5pc0VtcHR5KCk7XG4gICAgICAgICAgY2hpbGRyZW4ucHVzaChuZXcgTmFtZWROb2RlKGtleSwgY2hpbGROb2RlKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPT0gMCkge1xuICAgICAgcmV0dXJuIENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuICAgIH1cblxuICAgIGNvbnN0IGNoaWxkU2V0ID0gYnVpbGRDaGlsZFNldChcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgTkFNRV9PTkxZX0NPTVBBUkFUT1IsXG4gICAgICBuYW1lZE5vZGUgPT4gbmFtZWROb2RlLm5hbWUsXG4gICAgICBOQU1FX0NPTVBBUkFUT1JcbiAgICApIGFzIFNvcnRlZE1hcDxzdHJpbmcsIE5vZGU+O1xuICAgIGlmIChjaGlsZHJlbkhhdmVQcmlvcml0eSkge1xuICAgICAgY29uc3Qgc29ydGVkQ2hpbGRTZXQgPSBidWlsZENoaWxkU2V0KFxuICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgUFJJT1JJVFlfSU5ERVguZ2V0Q29tcGFyZSgpXG4gICAgICApO1xuICAgICAgcmV0dXJuIG5ldyBDaGlsZHJlbk5vZGUoXG4gICAgICAgIGNoaWxkU2V0LFxuICAgICAgICBub2RlRnJvbUpTT04ocHJpb3JpdHkpLFxuICAgICAgICBuZXcgSW5kZXhNYXAoXG4gICAgICAgICAgeyAnLnByaW9yaXR5Jzogc29ydGVkQ2hpbGRTZXQgfSxcbiAgICAgICAgICB7ICcucHJpb3JpdHknOiBQUklPUklUWV9JTkRFWCB9XG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgQ2hpbGRyZW5Ob2RlKFxuICAgICAgICBjaGlsZFNldCxcbiAgICAgICAgbm9kZUZyb21KU09OKHByaW9yaXR5KSxcbiAgICAgICAgSW5kZXhNYXAuRGVmYXVsdFxuICAgICAgKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IG5vZGU6IE5vZGUgPSBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERTtcbiAgICBjb25zdCBqc29uT2JqID0ganNvbiBhcyBvYmplY3Q7XG4gICAgZm9yRWFjaChqc29uT2JqLCAoa2V5OiBzdHJpbmcsIGNoaWxkRGF0YTogYW55KSA9PiB7XG4gICAgICBpZiAoY29udGFpbnMoanNvbk9iaiwga2V5KSkge1xuICAgICAgICBpZiAoa2V5LnN1YnN0cmluZygwLCAxKSAhPT0gJy4nKSB7XG4gICAgICAgICAgLy8gaWdub3JlIG1ldGFkYXRhIG5vZGVzLlxuICAgICAgICAgIGNvbnN0IGNoaWxkTm9kZSA9IG5vZGVGcm9tSlNPTihjaGlsZERhdGEpO1xuICAgICAgICAgIGlmIChjaGlsZE5vZGUuaXNMZWFmTm9kZSgpIHx8ICFjaGlsZE5vZGUuaXNFbXB0eSgpKVxuICAgICAgICAgICAgbm9kZSA9IG5vZGUudXBkYXRlSW1tZWRpYXRlQ2hpbGQoa2V5LCBjaGlsZE5vZGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbm9kZS51cGRhdGVQcmlvcml0eShub2RlRnJvbUpTT04ocHJpb3JpdHkpKTtcbiAgfVxufVxuXG5zZXROb2RlRnJvbUpTT04obm9kZUZyb21KU09OKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IGRvdWJsZVRvSUVFRTc1NFN0cmluZyB9IGZyb20gJy4uL3V0aWwvdXRpbCc7XG5pbXBvcnQgeyBjb250YWlucyB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuL05vZGUnO1xuXG5sZXQgTUFYX05PREU6IE5vZGU7XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRNYXhOb2RlKHZhbDogTm9kZSkge1xuICBNQVhfTk9ERSA9IHZhbDtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyghc3RyaW5nfCFudW1iZXIpfSBwcmlvcml0eVxuICogQHJldHVybiB7IXN0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IHByaW9yaXR5SGFzaFRleHQgPSBmdW5jdGlvbihwcmlvcml0eTogc3RyaW5nIHwgbnVtYmVyKTogc3RyaW5nIHtcbiAgaWYgKHR5cGVvZiBwcmlvcml0eSA9PT0gJ251bWJlcicpXG4gICAgcmV0dXJuICdudW1iZXI6JyArIGRvdWJsZVRvSUVFRTc1NFN0cmluZyhwcmlvcml0eSk7XG4gIGVsc2UgcmV0dXJuICdzdHJpbmc6JyArIHByaW9yaXR5O1xufTtcblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBhIHByaW9yaXR5IHNuYXBzaG90IE5vZGUgaXMgdmFsaWQuXG4gKlxuICogQHBhcmFtIHshTm9kZX0gcHJpb3JpdHlOb2RlXG4gKi9cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZVByaW9yaXR5Tm9kZSA9IGZ1bmN0aW9uKHByaW9yaXR5Tm9kZTogTm9kZSkge1xuICBpZiAocHJpb3JpdHlOb2RlLmlzTGVhZk5vZGUoKSkge1xuICAgIGNvbnN0IHZhbCA9IHByaW9yaXR5Tm9kZS52YWwoKTtcbiAgICBhc3NlcnQoXG4gICAgICB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyB8fFxuICAgICAgICB0eXBlb2YgdmFsID09PSAnbnVtYmVyJyB8fFxuICAgICAgICAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcgJiYgY29udGFpbnModmFsLCAnLnN2JykpLFxuICAgICAgJ1ByaW9yaXR5IG11c3QgYmUgYSBzdHJpbmcgb3IgbnVtYmVyLidcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGFzc2VydChcbiAgICAgIHByaW9yaXR5Tm9kZSA9PT0gTUFYX05PREUgfHwgcHJpb3JpdHlOb2RlLmlzRW1wdHkoKSxcbiAgICAgICdwcmlvcml0eSBvZiB1bmV4cGVjdGVkIHR5cGUuJ1xuICAgICk7XG4gIH1cbiAgLy8gRG9uJ3QgY2FsbCBnZXRQcmlvcml0eSgpIG9uIE1BWF9OT0RFIHRvIGF2b2lkIGhpdHRpbmcgYXNzZXJ0aW9uLlxuICBhc3NlcnQoXG4gICAgcHJpb3JpdHlOb2RlID09PSBNQVhfTk9ERSB8fCBwcmlvcml0eU5vZGUuZ2V0UHJpb3JpdHkoKS5pc0VtcHR5KCksXG4gICAgXCJQcmlvcml0eSBub2RlcyBjYW4ndCBoYXZlIGEgcHJpb3JpdHkgb2YgdGhlaXIgb3duLlwiXG4gICk7XG59O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgZGVlcENvcHkgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBjb250YWlucyB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuLyoqXG4gKiBUcmFja3MgYSBjb2xsZWN0aW9uIG9mIHN0YXRzLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgY2xhc3MgU3RhdHNDb2xsZWN0aW9uIHtcbiAgcHJpdmF0ZSBjb3VudGVyc186IHsgW2s6IHN0cmluZ106IG51bWJlciB9ID0ge307XG5cbiAgaW5jcmVtZW50Q291bnRlcihuYW1lOiBzdHJpbmcsIGFtb3VudDogbnVtYmVyID0gMSkge1xuICAgIGlmICghY29udGFpbnModGhpcy5jb3VudGVyc18sIG5hbWUpKSB0aGlzLmNvdW50ZXJzX1tuYW1lXSA9IDA7XG5cbiAgICB0aGlzLmNvdW50ZXJzX1tuYW1lXSArPSBhbW91bnQ7XG4gIH1cblxuICBnZXQoKSB7XG4gICAgcmV0dXJuIGRlZXBDb3B5KHRoaXMuY291bnRlcnNfKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgY2xvbmUsIGZvckVhY2ggfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBTdGF0c0NvbGxlY3Rpb24gfSBmcm9tICcuL1N0YXRzQ29sbGVjdGlvbic7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZGVsdGEgZnJvbSB0aGUgcHJldmlvdXMgY2FsbCB0byBnZXQgc3RhdHMuXG4gKlxuICogQHBhcmFtIGNvbGxlY3Rpb25fIFRoZSBjb2xsZWN0aW9uIHRvIFwibGlzdGVuXCIgdG8uXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGNsYXNzIFN0YXRzTGlzdGVuZXIge1xuICBwcml2YXRlIGxhc3RfOiB7IFtrOiBzdHJpbmddOiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY29sbGVjdGlvbl86IFN0YXRzQ29sbGVjdGlvbikge31cblxuICBnZXQoKTogeyBbazogc3RyaW5nXTogbnVtYmVyIH0ge1xuICAgIGNvbnN0IG5ld1N0YXRzID0gdGhpcy5jb2xsZWN0aW9uXy5nZXQoKTtcblxuICAgIGNvbnN0IGRlbHRhOiB0eXBlb2YgbmV3U3RhdHMgPSBjbG9uZShuZXdTdGF0cyk7XG4gICAgaWYgKHRoaXMubGFzdF8pIHtcbiAgICAgIGZvckVhY2godGhpcy5sYXN0XywgKHN0YXQ6IHN0cmluZywgdmFsdWU6IG51bWJlcikgPT4ge1xuICAgICAgICBkZWx0YVtzdGF0XSA9IGRlbHRhW3N0YXRdIC0gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5sYXN0XyA9IG5ld1N0YXRzO1xuXG4gICAgcmV0dXJuIGRlbHRhO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBTdGF0c0NvbGxlY3Rpb24gfSBmcm9tICcuL1N0YXRzQ29sbGVjdGlvbic7XG5pbXBvcnQgeyBSZXBvSW5mbyB9IGZyb20gJy4uL1JlcG9JbmZvJztcblxuZXhwb3J0IGNsYXNzIFN0YXRzTWFuYWdlciB7XG4gIHByaXZhdGUgc3RhdGljIGNvbGxlY3Rpb25zXzogeyBbazogc3RyaW5nXTogU3RhdHNDb2xsZWN0aW9uIH0gPSB7fTtcbiAgcHJpdmF0ZSBzdGF0aWMgcmVwb3J0ZXJzXzogeyBbazogc3RyaW5nXTogYW55IH0gPSB7fTtcblxuICBzdGF0aWMgZ2V0Q29sbGVjdGlvbihyZXBvSW5mbzogUmVwb0luZm8pOiBTdGF0c0NvbGxlY3Rpb24ge1xuICAgIGNvbnN0IGhhc2hTdHJpbmcgPSByZXBvSW5mby50b1N0cmluZygpO1xuXG4gICAgaWYgKCF0aGlzLmNvbGxlY3Rpb25zX1toYXNoU3RyaW5nXSkge1xuICAgICAgdGhpcy5jb2xsZWN0aW9uc19baGFzaFN0cmluZ10gPSBuZXcgU3RhdHNDb2xsZWN0aW9uKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY29sbGVjdGlvbnNfW2hhc2hTdHJpbmddO1xuICB9XG5cbiAgc3RhdGljIGdldE9yQ3JlYXRlUmVwb3J0ZXI8VD4oXG4gICAgcmVwb0luZm86IFJlcG9JbmZvLFxuICAgIGNyZWF0b3JGdW5jdGlvbjogKCkgPT4gVFxuICApOiBUIHtcbiAgICBjb25zdCBoYXNoU3RyaW5nID0gcmVwb0luZm8udG9TdHJpbmcoKTtcblxuICAgIGlmICghdGhpcy5yZXBvcnRlcnNfW2hhc2hTdHJpbmddKSB7XG4gICAgICB0aGlzLnJlcG9ydGVyc19baGFzaFN0cmluZ10gPSBjcmVhdG9yRnVuY3Rpb24oKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZXBvcnRlcnNfW2hhc2hTdHJpbmddO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBjb250YWlucywgZm9yRWFjaCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IHNldFRpbWVvdXROb25CbG9ja2luZyB9IGZyb20gJy4uL3V0aWwvdXRpbCc7XG5pbXBvcnQgeyBTdGF0c0xpc3RlbmVyIH0gZnJvbSAnLi9TdGF0c0xpc3RlbmVyJztcbmltcG9ydCB7IFN0YXRzQ29sbGVjdGlvbiB9IGZyb20gJy4vU3RhdHNDb2xsZWN0aW9uJztcbmltcG9ydCB7IFNlcnZlckFjdGlvbnMgfSBmcm9tICcuLi9TZXJ2ZXJBY3Rpb25zJztcblxuLy8gQXNzdW1pbmcgc29tZSBhcHBzIG1heSBoYXZlIGEgc2hvcnQgYW1vdW50IG9mIHRpbWUgb24gcGFnZSwgYW5kIGEgYnVsayBvZiBmaXJlYmFzZSBvcGVyYXRpb25zIHByb2JhYmx5XG4vLyBoYXBwZW4gb24gcGFnZSBsb2FkLCB3ZSB0cnkgdG8gcmVwb3J0IG91ciBmaXJzdCBzZXQgb2Ygc3RhdHMgcHJldHR5IHF1aWNrbHksIGJ1dCB3ZSB3YWl0IGF0IGxlYXN0IDEwXG4vLyBzZWNvbmRzIHRvIHRyeSB0byBlbnN1cmUgdGhlIEZpcmViYXNlIGNvbm5lY3Rpb24gaXMgZXN0YWJsaXNoZWQgLyBzZXR0bGVkLlxuY29uc3QgRklSU1RfU1RBVFNfTUlOX1RJTUUgPSAxMCAqIDEwMDA7XG5jb25zdCBGSVJTVF9TVEFUU19NQVhfVElNRSA9IDMwICogMTAwMDtcblxuLy8gV2UnbGwgY29udGludWUgdG8gcmVwb3J0IHN0YXRzIG9uIGF2ZXJhZ2UgZXZlcnkgNSBtaW51dGVzLlxuY29uc3QgUkVQT1JUX1NUQVRTX0lOVEVSVkFMID0gNSAqIDYwICogMTAwMDtcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGNsYXNzIFN0YXRzUmVwb3J0ZXIge1xuICBwcml2YXRlIHN0YXRzTGlzdGVuZXJfOiBTdGF0c0xpc3RlbmVyO1xuICBwcml2YXRlIHN0YXRzVG9SZXBvcnRfOiB7IFtrOiBzdHJpbmddOiBib29sZWFuIH0gPSB7fTtcblxuICAvKipcbiAgICogQHBhcmFtIGNvbGxlY3Rpb25cbiAgICogQHBhcmFtIHNlcnZlcl9cbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb246IFN0YXRzQ29sbGVjdGlvbiwgcHJpdmF0ZSBzZXJ2ZXJfOiBTZXJ2ZXJBY3Rpb25zKSB7XG4gICAgdGhpcy5zdGF0c0xpc3RlbmVyXyA9IG5ldyBTdGF0c0xpc3RlbmVyKGNvbGxlY3Rpb24pO1xuXG4gICAgY29uc3QgdGltZW91dCA9XG4gICAgICBGSVJTVF9TVEFUU19NSU5fVElNRSArXG4gICAgICAoRklSU1RfU1RBVFNfTUFYX1RJTUUgLSBGSVJTVF9TVEFUU19NSU5fVElNRSkgKiBNYXRoLnJhbmRvbSgpO1xuICAgIHNldFRpbWVvdXROb25CbG9ja2luZyh0aGlzLnJlcG9ydFN0YXRzXy5iaW5kKHRoaXMpLCBNYXRoLmZsb29yKHRpbWVvdXQpKTtcbiAgfVxuXG4gIGluY2x1ZGVTdGF0KHN0YXQ6IHN0cmluZykge1xuICAgIHRoaXMuc3RhdHNUb1JlcG9ydF9bc3RhdF0gPSB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSByZXBvcnRTdGF0c18oKSB7XG4gICAgY29uc3Qgc3RhdHMgPSB0aGlzLnN0YXRzTGlzdGVuZXJfLmdldCgpO1xuICAgIGNvbnN0IHJlcG9ydGVkU3RhdHM6IHR5cGVvZiBzdGF0cyA9IHt9O1xuICAgIGxldCBoYXZlU3RhdHNUb1JlcG9ydCA9IGZhbHNlO1xuXG4gICAgZm9yRWFjaChzdGF0cywgKHN0YXQ6IHN0cmluZywgdmFsdWU6IG51bWJlcikgPT4ge1xuICAgICAgaWYgKHZhbHVlID4gMCAmJiBjb250YWlucyh0aGlzLnN0YXRzVG9SZXBvcnRfLCBzdGF0KSkge1xuICAgICAgICByZXBvcnRlZFN0YXRzW3N0YXRdID0gdmFsdWU7XG4gICAgICAgIGhhdmVTdGF0c1RvUmVwb3J0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChoYXZlU3RhdHNUb1JlcG9ydCkge1xuICAgICAgdGhpcy5zZXJ2ZXJfLnJlcG9ydFN0YXRzKHJlcG9ydGVkU3RhdHMpO1xuICAgIH1cblxuICAgIC8vIHF1ZXVlIG91ciBuZXh0IHJ1bi5cbiAgICBzZXRUaW1lb3V0Tm9uQmxvY2tpbmcoXG4gICAgICB0aGlzLnJlcG9ydFN0YXRzXy5iaW5kKHRoaXMpLFxuICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMiAqIFJFUE9SVF9TVEFUU19JTlRFUlZBTClcbiAgICApO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBqc29uRXZhbCwgc3RyaW5naWZ5IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcbiAqIFdyYXBzIGEgRE9NIFN0b3JhZ2Ugb2JqZWN0IGFuZDpcbiAqIC0gYXV0b21hdGljYWxseSBlbmNvZGUgb2JqZWN0cyBhcyBKU09OIHN0cmluZ3MgYmVmb3JlIHN0b3JpbmcgdGhlbSB0byBhbGxvdyB1cyB0byBzdG9yZSBhcmJpdHJhcnkgdHlwZXMuXG4gKiAtIHByZWZpeGVzIG5hbWVzIHdpdGggXCJmaXJlYmFzZTpcIiB0byBhdm9pZCBjb2xsaXNpb25zIHdpdGggYXBwIGRhdGEuXG4gKlxuICogV2UgYXV0b21hdGljYWxseSAoc2VlIHN0b3JhZ2UuanMpIGNyZWF0ZSB0d28gc3VjaCB3cmFwcGVycywgb25lIGZvciBzZXNzaW9uU3RvcmFnZSxcbiAqIGFuZCBvbmUgZm9yIGxvY2FsU3RvcmFnZS5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGNsYXNzIERPTVN0b3JhZ2VXcmFwcGVyIHtcbiAgLy8gVXNlIGEgcHJlZml4IHRvIGF2b2lkIGNvbGxpc2lvbnMgd2l0aCBvdGhlciBzdHVmZiBzYXZlZCBieSB0aGUgYXBwLlxuICBwcml2YXRlIHByZWZpeF8gPSAnZmlyZWJhc2U6JztcblxuICAvKipcbiAgICogQHBhcmFtIHtTdG9yYWdlfSBkb21TdG9yYWdlXyBUaGUgdW5kZXJseWluZyBzdG9yYWdlIG9iamVjdCAoZS5nLiBsb2NhbFN0b3JhZ2Ugb3Igc2Vzc2lvblN0b3JhZ2UpXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRvbVN0b3JhZ2VfOiBTdG9yYWdlKSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgdG8gc2F2ZSB0aGUgdmFsdWUgdW5kZXJcbiAgICogQHBhcmFtIHs/T2JqZWN0fSB2YWx1ZSBUaGUgdmFsdWUgYmVpbmcgc3RvcmVkLCBvciBudWxsIHRvIHJlbW92ZSB0aGUga2V5LlxuICAgKi9cbiAgc2V0KGtleTogc3RyaW5nLCB2YWx1ZTogYW55IHwgbnVsbCkge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICB0aGlzLmRvbVN0b3JhZ2VfLnJlbW92ZUl0ZW0odGhpcy5wcmVmaXhlZE5hbWVfKGtleSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRvbVN0b3JhZ2VfLnNldEl0ZW0odGhpcy5wcmVmaXhlZE5hbWVfKGtleSksIHN0cmluZ2lmeSh2YWx1ZSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gICAqIEByZXR1cm4geyp9IFRoZSB2YWx1ZSB0aGF0IHdhcyBzdG9yZWQgdW5kZXIgdGhpcyBrZXksIG9yIG51bGxcbiAgICovXG4gIGdldChrZXk6IHN0cmluZyk6IGFueSB7XG4gICAgY29uc3Qgc3RvcmVkVmFsID0gdGhpcy5kb21TdG9yYWdlXy5nZXRJdGVtKHRoaXMucHJlZml4ZWROYW1lXyhrZXkpKTtcbiAgICBpZiAoc3RvcmVkVmFsID09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ganNvbkV2YWwoc3RvcmVkVmFsKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICAgKi9cbiAgcmVtb3ZlKGtleTogc3RyaW5nKSB7XG4gICAgdGhpcy5kb21TdG9yYWdlXy5yZW1vdmVJdGVtKHRoaXMucHJlZml4ZWROYW1lXyhrZXkpKTtcbiAgfVxuXG4gIGlzSW5NZW1vcnlTdG9yYWdlOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBwcmVmaXhlZE5hbWVfKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMucHJlZml4XyArIG5hbWU7XG4gIH1cblxuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmRvbVN0b3JhZ2VfLnRvU3RyaW5nKCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGNvbnRhaW5zIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcbiAqIEFuIGluLW1lbW9yeSBzdG9yYWdlIGltcGxlbWVudGF0aW9uIHRoYXQgbWF0Y2hlcyB0aGUgQVBJIG9mIERPTVN0b3JhZ2VXcmFwcGVyXG4gKiAoVE9ETzogY3JlYXRlIGludGVyZmFjZSBmb3IgYm90aCB0byBpbXBsZW1lbnQpLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgY2xhc3MgTWVtb3J5U3RvcmFnZSB7XG4gIHByaXZhdGUgY2FjaGVfOiB7IFtrOiBzdHJpbmddOiBhbnkgfSA9IHt9O1xuXG4gIHNldChrZXk6IHN0cmluZywgdmFsdWU6IGFueSB8IG51bGwpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgZGVsZXRlIHRoaXMuY2FjaGVfW2tleV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2FjaGVfW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBnZXQoa2V5OiBzdHJpbmcpOiBhbnkge1xuICAgIGlmIChjb250YWlucyh0aGlzLmNhY2hlXywga2V5KSkge1xuICAgICAgcmV0dXJuIHRoaXMuY2FjaGVfW2tleV07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmVtb3ZlKGtleTogc3RyaW5nKSB7XG4gICAgZGVsZXRlIHRoaXMuY2FjaGVfW2tleV07XG4gIH1cblxuICBpc0luTWVtb3J5U3RvcmFnZSA9IHRydWU7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBET01TdG9yYWdlV3JhcHBlciB9IGZyb20gJy4vRE9NU3RvcmFnZVdyYXBwZXInO1xuaW1wb3J0IHsgTWVtb3J5U3RvcmFnZSB9IGZyb20gJy4vTWVtb3J5U3RvcmFnZSc7XG5cbmRlY2xhcmUgY29uc3Qgd2luZG93OiBhbnk7XG5cbi8qKlxuICogSGVscGVyIHRvIGNyZWF0ZSBhIERPTVN0b3JhZ2VXcmFwcGVyIG9yIGVsc2UgZmFsbCBiYWNrIHRvIE1lbW9yeVN0b3JhZ2UuXG4gKiBUT0RPOiBPbmNlIE1lbW9yeVN0b3JhZ2UgYW5kIERPTVN0b3JhZ2VXcmFwcGVyIGhhdmUgYSBzaGFyZWQgaW50ZXJmYWNlIHRoaXMgbWV0aG9kIGFubm90YXRpb24gc2hvdWxkIGNoYW5nZVxuICogdG8gcmVmbGVjdCB0aGlzIHR5cGVcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZG9tU3RvcmFnZU5hbWUgTmFtZSBvZiB0aGUgdW5kZXJseWluZyBzdG9yYWdlIG9iamVjdFxuICogICAoZS5nLiAnbG9jYWxTdG9yYWdlJyBvciAnc2Vzc2lvblN0b3JhZ2UnKS5cbiAqIEByZXR1cm4gez99IFR1cm5pbmcgb2ZmIHR5cGUgaW5mb3JtYXRpb24gdW50aWwgYSBjb21tb24gaW50ZXJmYWNlIGlzIGRlZmluZWQuXG4gKi9cbmNvbnN0IGNyZWF0ZVN0b3JhZ2Vmb3IgPSBmdW5jdGlvbihcbiAgZG9tU3RvcmFnZU5hbWU6IHN0cmluZ1xuKTogRE9NU3RvcmFnZVdyYXBwZXIgfCBNZW1vcnlTdG9yYWdlIHtcbiAgdHJ5IHtcbiAgICAvLyBOT1RFOiBqdXN0IGFjY2Vzc2luZyBcImxvY2FsU3RvcmFnZVwiIG9yIFwid2luZG93Wydsb2NhbFN0b3JhZ2UnXVwiIG1heSB0aHJvdyBhIHNlY3VyaXR5IGV4Y2VwdGlvbixcbiAgICAvLyBzbyBpdCBtdXN0IGJlIGluc2lkZSB0aGUgdHJ5L2NhdGNoLlxuICAgIGlmIChcbiAgICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2Ygd2luZG93W2RvbVN0b3JhZ2VOYW1lXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIC8vIE5lZWQgdG8gdGVzdCBjYWNoZS4gSnVzdCBiZWNhdXNlIGl0J3MgaGVyZSBkb2Vzbid0IG1lYW4gaXQgd29ya3NcbiAgICAgIGNvbnN0IGRvbVN0b3JhZ2UgPSB3aW5kb3dbZG9tU3RvcmFnZU5hbWVdO1xuICAgICAgZG9tU3RvcmFnZS5zZXRJdGVtKCdmaXJlYmFzZTpzZW50aW5lbCcsICdjYWNoZScpO1xuICAgICAgZG9tU3RvcmFnZS5yZW1vdmVJdGVtKCdmaXJlYmFzZTpzZW50aW5lbCcpO1xuICAgICAgcmV0dXJuIG5ldyBET01TdG9yYWdlV3JhcHBlcihkb21TdG9yYWdlKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHt9XG5cbiAgLy8gRmFpbGVkIHRvIGNyZWF0ZSB3cmFwcGVyLiAgSnVzdCByZXR1cm4gaW4tbWVtb3J5IHN0b3JhZ2UuXG4gIC8vIFRPRE86IGxvZz9cbiAgcmV0dXJuIG5ldyBNZW1vcnlTdG9yYWdlKCk7XG59O1xuXG4vKiogQSBzdG9yYWdlIG9iamVjdCB0aGF0IGxhc3RzIGFjcm9zcyBzZXNzaW9ucyAqL1xuZXhwb3J0IGNvbnN0IFBlcnNpc3RlbnRTdG9yYWdlID0gY3JlYXRlU3RvcmFnZWZvcignbG9jYWxTdG9yYWdlJyk7XG5cbi8qKiBBIHN0b3JhZ2Ugb2JqZWN0IHRoYXQgb25seSBsYXN0cyBvbmUgc2Vzc2lvbiAqL1xuZXhwb3J0IGNvbnN0IFNlc3Npb25TdG9yYWdlID0gY3JlYXRlU3RvcmFnZWZvcignc2Vzc2lvblN0b3JhZ2UnKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGlzRW1wdHksIGdldENvdW50LCBmb3JFYWNoLCBjb250YWlucyB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuLyoqXG4gKiBJbXBsZW1lbnRzIGEgc2V0IHdpdGggYSBjb3VudCBvZiBlbGVtZW50cy5cbiAqXG4gKiBAdGVtcGxhdGUgSywgVlxuICovXG5leHBvcnQgY2xhc3MgQ291bnRlZFNldDxLLCBWPiB7XG4gIHNldDogeyBbazogc3RyaW5nXTogViB9ID0ge307XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUt9IGl0ZW1cbiAgICogQHBhcmFtIHtWfSB2YWxcbiAgICovXG4gIGFkZChpdGVtOiBLLCB2YWw6IFYpIHtcbiAgICB0aGlzLnNldFtpdGVtIGFzIGFueV0gPSB2YWwgIT09IG51bGwgPyB2YWwgOiAodHJ1ZSBhcyBhbnkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUt9IGtleVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgY29udGFpbnMoa2V5OiBLKSB7XG4gICAgcmV0dXJuIGNvbnRhaW5zKHRoaXMuc2V0LCBrZXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUt9IGl0ZW1cbiAgICogQHJldHVybiB7Vn1cbiAgICovXG4gIGdldChpdGVtOiBLKTogViB8IHZvaWQge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5zKGl0ZW0pID8gdGhpcy5zZXRbaXRlbSBhcyBhbnldIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUt9IGl0ZW1cbiAgICovXG4gIHJlbW92ZShpdGVtOiBLKSB7XG4gICAgZGVsZXRlIHRoaXMuc2V0W2l0ZW0gYXMgYW55XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGV2ZXJ5dGhpbmcgaW4gdGhlIHNldFxuICAgKi9cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5zZXQgPSB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcnVlIGlmIHRoZXJlJ3Mgbm90aGluZyBpbiB0aGUgc2V0XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0VtcHR5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBpc0VtcHR5KHRoaXMuc2V0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBudW1iZXIgb2YgaXRlbXMgaW4gdGhlIHNldFxuICAgKi9cbiAgY291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gZ2V0Q291bnQodGhpcy5zZXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1biBhIGZ1bmN0aW9uIG9uIGVhY2ggayx2IHBhaXIgaW4gdGhlIHNldFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKEssIFYpfSBmblxuICAgKi9cbiAgZWFjaChmbjogKGs6IEssIHY6IFYpID0+IHZvaWQpIHtcbiAgICBmb3JFYWNoKHRoaXMuc2V0LCAoazogSywgdjogVikgPT4gZm4oaywgdikpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vc3RseSBmb3IgZGVidWdnaW5nXG4gICAqIEByZXR1cm4ge0FycmF5LjxLPn0gVGhlIGtleXMgcHJlc2VudCBpbiB0aGlzIENvdW50ZWRTZXRcbiAgICovXG4gIGtleXMoKTogS1tdIHtcbiAgICBjb25zdCBrZXlzOiBLW10gPSBbXTtcbiAgICBmb3JFYWNoKHRoaXMuc2V0LCAoazogSykgPT4ge1xuICAgICAga2V5cy5wdXNoKGspO1xuICAgIH0pO1xuICAgIHJldHVybiBrZXlzO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxuICogQmFzZSBjbGFzcyB0byBiZSB1c2VkIGlmIHlvdSB3YW50IHRvIGVtaXQgZXZlbnRzLiBDYWxsIHRoZSBjb25zdHJ1Y3RvciB3aXRoXG4gKiB0aGUgc2V0IG9mIGFsbG93ZWQgZXZlbnQgbmFtZXMuXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBFdmVudEVtaXR0ZXIge1xuICBwcml2YXRlIGxpc3RlbmVyc186IHtcbiAgICBbZXZlbnRUeXBlOiBzdHJpbmddOiBBcnJheTx7XG4gICAgICBjYWxsYmFjayguLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG4gICAgICBjb250ZXh0OiBhbnk7XG4gICAgfT47XG4gIH0gPSB7fTtcblxuICAvKipcbiAgICogQHBhcmFtIHshQXJyYXkuPHN0cmluZz59IGFsbG93ZWRFdmVudHNfXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFsbG93ZWRFdmVudHNfOiBBcnJheTxzdHJpbmc+KSB7XG4gICAgYXNzZXJ0KFxuICAgICAgQXJyYXkuaXNBcnJheShhbGxvd2VkRXZlbnRzXykgJiYgYWxsb3dlZEV2ZW50c18ubGVuZ3RoID4gMCxcbiAgICAgICdSZXF1aXJlcyBhIG5vbi1lbXB0eSBhcnJheSdcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvIGJlIG92ZXJyaWRkZW4gYnkgZGVyaXZlZCBjbGFzc2VzIGluIG9yZGVyIHRvIGZpcmUgYW4gaW5pdGlhbCBldmVudCB3aGVuXG4gICAqIHNvbWVib2R5IHN1YnNjcmliZXMgZm9yIGRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSB7IXN0cmluZ30gZXZlbnRUeXBlXG4gICAqIEByZXR1cm4ge0FycmF5LjwqPn0gQXJyYXkgb2YgcGFyYW1ldGVycyB0byB0cmlnZ2VyIGluaXRpYWwgZXZlbnQgd2l0aC5cbiAgICovXG4gIGFic3RyYWN0IGdldEluaXRpYWxFdmVudChldmVudFR5cGU6IHN0cmluZyk6IGFueVtdO1xuXG4gIC8qKlxuICAgKiBUbyBiZSBjYWxsZWQgYnkgZGVyaXZlZCBjbGFzc2VzIHRvIHRyaWdnZXIgZXZlbnRzLlxuICAgKiBAcGFyYW0geyFzdHJpbmd9IGV2ZW50VHlwZVxuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gICAqL1xuICBwcm90ZWN0ZWQgdHJpZ2dlcihldmVudFR5cGU6IHN0cmluZywgLi4udmFyX2FyZ3M6IGFueVtdKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5saXN0ZW5lcnNfW2V2ZW50VHlwZV0pKSB7XG4gICAgICAvLyBDbG9uZSB0aGUgbGlzdCwgc2luY2UgY2FsbGJhY2tzIGNvdWxkIGFkZC9yZW1vdmUgbGlzdGVuZXJzLlxuICAgICAgY29uc3QgbGlzdGVuZXJzID0gWy4uLnRoaXMubGlzdGVuZXJzX1tldmVudFR5cGVdXTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGlzdGVuZXJzW2ldLmNhbGxiYWNrLmFwcGx5KGxpc3RlbmVyc1tpXS5jb250ZXh0LCB2YXJfYXJncyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb24oZXZlbnRUeXBlOiBzdHJpbmcsIGNhbGxiYWNrOiAoYTogYW55KSA9PiB2b2lkLCBjb250ZXh0OiBhbnkpIHtcbiAgICB0aGlzLnZhbGlkYXRlRXZlbnRUeXBlXyhldmVudFR5cGUpO1xuICAgIHRoaXMubGlzdGVuZXJzX1tldmVudFR5cGVdID0gdGhpcy5saXN0ZW5lcnNfW2V2ZW50VHlwZV0gfHwgW107XG4gICAgdGhpcy5saXN0ZW5lcnNfW2V2ZW50VHlwZV0ucHVzaCh7IGNhbGxiYWNrLCBjb250ZXh0IH0pO1xuXG4gICAgY29uc3QgZXZlbnREYXRhID0gdGhpcy5nZXRJbml0aWFsRXZlbnQoZXZlbnRUeXBlKTtcbiAgICBpZiAoZXZlbnREYXRhKSB7XG4gICAgICBjYWxsYmFjay5hcHBseShjb250ZXh0LCBldmVudERhdGEpO1xuICAgIH1cbiAgfVxuXG4gIG9mZihldmVudFR5cGU6IHN0cmluZywgY2FsbGJhY2s6IChhOiBhbnkpID0+IHZvaWQsIGNvbnRleHQ6IGFueSkge1xuICAgIHRoaXMudmFsaWRhdGVFdmVudFR5cGVfKGV2ZW50VHlwZSk7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNfW2V2ZW50VHlwZV0gfHwgW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChcbiAgICAgICAgbGlzdGVuZXJzW2ldLmNhbGxiYWNrID09PSBjYWxsYmFjayAmJlxuICAgICAgICAoIWNvbnRleHQgfHwgY29udGV4dCA9PT0gbGlzdGVuZXJzW2ldLmNvbnRleHQpXG4gICAgICApIHtcbiAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpLCAxKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdmFsaWRhdGVFdmVudFR5cGVfKGV2ZW50VHlwZTogc3RyaW5nKSB7XG4gICAgYXNzZXJ0KFxuICAgICAgdGhpcy5hbGxvd2VkRXZlbnRzXy5maW5kKGZ1bmN0aW9uKGV0KSB7XG4gICAgICAgIHJldHVybiBldCA9PT0gZXZlbnRUeXBlO1xuICAgICAgfSksXG4gICAgICAnVW5rbm93biBldmVudDogJyArIGV2ZW50VHlwZVxuICAgICk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFNvcnRlZE1hcCB9IGZyb20gJy4vU29ydGVkTWFwJztcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuL1BhdGgnO1xuaW1wb3J0IHsgc3RyaW5nQ29tcGFyZSB9IGZyb20gJy4vdXRpbCc7XG5pbXBvcnQgeyBmb3JFYWNoIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG5sZXQgZW1wdHlDaGlsZHJlblNpbmdsZXRvbjogU29ydGVkTWFwPHN0cmluZywgSW1tdXRhYmxlVHJlZTxudWxsPj47XG5cbi8qKlxuICogU2luZ2xldG9uIGVtcHR5IGNoaWxkcmVuIGNvbGxlY3Rpb24uXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7IVNvcnRlZE1hcC48c3RyaW5nLCAhSW1tdXRhYmxlVHJlZS48Pz4+fVxuICovXG5jb25zdCBFbXB0eUNoaWxkcmVuID0gKCk6IFNvcnRlZE1hcDxzdHJpbmcsIEltbXV0YWJsZVRyZWU8bnVsbD4+ID0+IHtcbiAgaWYgKCFlbXB0eUNoaWxkcmVuU2luZ2xldG9uKSB7XG4gICAgZW1wdHlDaGlsZHJlblNpbmdsZXRvbiA9IG5ldyBTb3J0ZWRNYXA8c3RyaW5nLCBJbW11dGFibGVUcmVlPG51bGw+PihcbiAgICAgIHN0cmluZ0NvbXBhcmVcbiAgICApO1xuICB9XG4gIHJldHVybiBlbXB0eUNoaWxkcmVuU2luZ2xldG9uO1xufTtcblxuLyoqXG4gKiBBIHRyZWUgd2l0aCBpbW11dGFibGUgZWxlbWVudHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbW11dGFibGVUcmVlPFQ+IHtcbiAgc3RhdGljIEVtcHR5ID0gbmV3IEltbXV0YWJsZVRyZWU8YW55PihudWxsKTtcblxuICAvKipcbiAgICogQHRlbXBsYXRlIFRcbiAgICogQHBhcmFtIHshT2JqZWN0LjxzdHJpbmcsICFUPn0gb2JqXG4gICAqIEByZXR1cm4geyFJbW11dGFibGVUcmVlLjwhVD59XG4gICAqL1xuICBzdGF0aWMgZnJvbU9iamVjdDxUPihvYmo6IHsgW2s6IHN0cmluZ106IFQgfSk6IEltbXV0YWJsZVRyZWU8VD4ge1xuICAgIGxldCB0cmVlOiBJbW11dGFibGVUcmVlPFQ+ID0gSW1tdXRhYmxlVHJlZS5FbXB0eTtcbiAgICBmb3JFYWNoKG9iaiwgKGNoaWxkUGF0aDogc3RyaW5nLCBjaGlsZFNuYXA6IFQpID0+IHtcbiAgICAgIHRyZWUgPSB0cmVlLnNldChuZXcgUGF0aChjaGlsZFBhdGgpLCBjaGlsZFNuYXApO1xuICAgIH0pO1xuICAgIHJldHVybiB0cmVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0ZW1wbGF0ZSBUXG4gICAqIEBwYXJhbSB7P1R9IHZhbHVlXG4gICAqIEBwYXJhbSB7U29ydGVkTWFwLjxzdHJpbmcsICFJbW11dGFibGVUcmVlLjxUPj49fSBjaGlsZHJlblxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHJlYWRvbmx5IHZhbHVlOiBUIHwgbnVsbCxcbiAgICBwdWJsaWMgcmVhZG9ubHkgY2hpbGRyZW46IFNvcnRlZE1hcDxcbiAgICAgIHN0cmluZyxcbiAgICAgIEltbXV0YWJsZVRyZWU8VD5cbiAgICA+ID0gRW1wdHlDaGlsZHJlbigpXG4gICkge31cblxuICAvKipcbiAgICogVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgZW1wdHkgYW5kIHRoZXJlIGFyZSBubyBjaGlsZHJlblxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNFbXB0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZSA9PT0gbnVsbCAmJiB0aGlzLmNoaWxkcmVuLmlzRW1wdHkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHaXZlbiBhIHBhdGggYW5kIHByZWRpY2F0ZSwgcmV0dXJuIHRoZSBmaXJzdCBub2RlIGFuZCB0aGUgcGF0aCB0byB0aGF0IG5vZGVcbiAgICogd2hlcmUgdGhlIHByZWRpY2F0ZSByZXR1cm5zIHRydWUuXG4gICAqXG4gICAqIFRPRE8gRG8gYSBwZXJmIHRlc3QgLS0gSWYgd2UncmUgY3JlYXRpbmcgYSBidW5jaCBvZiB7cGF0aDogdmFsdWU6fSBvYmplY3RzXG4gICAqIG9uIHRoZSB3YXkgYmFjayBvdXQsIGl0IG1heSBiZSBiZXR0ZXIgdG8gcGFzcyBkb3duIGEgcGF0aFNvRmFyIG9iai5cbiAgICpcbiAgICogQHBhcmFtIHshUGF0aH0gcmVsYXRpdmVQYXRoIFRoZSByZW1haW5kZXIgb2YgdGhlIHBhdGhcbiAgICogQHBhcmFtIHtmdW5jdGlvbihUKTpib29sZWFufSBwcmVkaWNhdGUgVGhlIHByZWRpY2F0ZSB0byBzYXRpc2Z5IHRvIHJldHVybiBhXG4gICAqICAgbm9kZVxuICAgKiBAcmV0dXJuIHs/e3BhdGg6IVBhdGgsIHZhbHVlOiFUfX1cbiAgICovXG4gIGZpbmRSb290TW9zdE1hdGNoaW5nUGF0aEFuZFZhbHVlKFxuICAgIHJlbGF0aXZlUGF0aDogUGF0aCxcbiAgICBwcmVkaWNhdGU6IChhOiBUKSA9PiBib29sZWFuXG4gICk6IHsgcGF0aDogUGF0aDsgdmFsdWU6IFQgfSB8IG51bGwge1xuICAgIGlmICh0aGlzLnZhbHVlICE9IG51bGwgJiYgcHJlZGljYXRlKHRoaXMudmFsdWUpKSB7XG4gICAgICByZXR1cm4geyBwYXRoOiBQYXRoLkVtcHR5LCB2YWx1ZTogdGhpcy52YWx1ZSB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocmVsYXRpdmVQYXRoLmlzRW1wdHkoKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGZyb250ID0gcmVsYXRpdmVQYXRoLmdldEZyb250KCk7XG4gICAgICAgIGNvbnN0IGNoaWxkID0gdGhpcy5jaGlsZHJlbi5nZXQoZnJvbnQpO1xuICAgICAgICBpZiAoY2hpbGQgIT09IG51bGwpIHtcbiAgICAgICAgICBjb25zdCBjaGlsZEV4aXN0aW5nUGF0aEFuZFZhbHVlID0gY2hpbGQuZmluZFJvb3RNb3N0TWF0Y2hpbmdQYXRoQW5kVmFsdWUoXG4gICAgICAgICAgICByZWxhdGl2ZVBhdGgucG9wRnJvbnQoKSxcbiAgICAgICAgICAgIHByZWRpY2F0ZVxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKGNoaWxkRXhpc3RpbmdQYXRoQW5kVmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBuZXcgUGF0aChmcm9udCkuY2hpbGQoXG4gICAgICAgICAgICAgIGNoaWxkRXhpc3RpbmdQYXRoQW5kVmFsdWUucGF0aFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiB7IHBhdGg6IGZ1bGxQYXRoLCB2YWx1ZTogY2hpbGRFeGlzdGluZ1BhdGhBbmRWYWx1ZS52YWx1ZSB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmluZCwgaWYgaXQgZXhpc3RzLCB0aGUgc2hvcnRlc3Qgc3VicGF0aCBvZiB0aGUgZ2l2ZW4gcGF0aCB0aGF0IHBvaW50cyBhIGRlZmluZWRcbiAgICogdmFsdWUgaW4gdGhlIHRyZWVcbiAgICogQHBhcmFtIHshUGF0aH0gcmVsYXRpdmVQYXRoXG4gICAqIEByZXR1cm4gez97cGF0aDogIVBhdGgsIHZhbHVlOiAhVH19XG4gICAqL1xuICBmaW5kUm9vdE1vc3RWYWx1ZUFuZFBhdGgoXG4gICAgcmVsYXRpdmVQYXRoOiBQYXRoXG4gICk6IHsgcGF0aDogUGF0aDsgdmFsdWU6IFQgfSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmZpbmRSb290TW9zdE1hdGNoaW5nUGF0aEFuZFZhbHVlKHJlbGF0aXZlUGF0aCwgKCkgPT4gdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshUGF0aH0gcmVsYXRpdmVQYXRoXG4gICAqIEByZXR1cm4geyFJbW11dGFibGVUcmVlLjxUPn0gVGhlIHN1YnRyZWUgYXQgdGhlIGdpdmVuIHBhdGhcbiAgICovXG4gIHN1YnRyZWUocmVsYXRpdmVQYXRoOiBQYXRoKTogSW1tdXRhYmxlVHJlZTxUPiB7XG4gICAgaWYgKHJlbGF0aXZlUGF0aC5pc0VtcHR5KCkpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBmcm9udCA9IHJlbGF0aXZlUGF0aC5nZXRGcm9udCgpO1xuICAgICAgY29uc3QgY2hpbGRUcmVlID0gdGhpcy5jaGlsZHJlbi5nZXQoZnJvbnQpO1xuICAgICAgaWYgKGNoaWxkVHJlZSAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gY2hpbGRUcmVlLnN1YnRyZWUocmVsYXRpdmVQYXRoLnBvcEZyb250KCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIEltbXV0YWJsZVRyZWUuRW1wdHk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgYSB2YWx1ZSBhdCB0aGUgc3BlY2lmaWVkIHBhdGguXG4gICAqXG4gICAqIEBwYXJhbSB7IVBhdGh9IHJlbGF0aXZlUGF0aCBQYXRoIHRvIHNldCB2YWx1ZSBhdC5cbiAgICogQHBhcmFtIHs/VH0gdG9TZXQgVmFsdWUgdG8gc2V0LlxuICAgKiBAcmV0dXJuIHshSW1tdXRhYmxlVHJlZS48VD59IFJlc3VsdGluZyB0cmVlLlxuICAgKi9cbiAgc2V0KHJlbGF0aXZlUGF0aDogUGF0aCwgdG9TZXQ6IFQgfCBudWxsKTogSW1tdXRhYmxlVHJlZTxUPiB7XG4gICAgaWYgKHJlbGF0aXZlUGF0aC5pc0VtcHR5KCkpIHtcbiAgICAgIHJldHVybiBuZXcgSW1tdXRhYmxlVHJlZSh0b1NldCwgdGhpcy5jaGlsZHJlbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGZyb250ID0gcmVsYXRpdmVQYXRoLmdldEZyb250KCk7XG4gICAgICBjb25zdCBjaGlsZCA9IHRoaXMuY2hpbGRyZW4uZ2V0KGZyb250KSB8fCBJbW11dGFibGVUcmVlLkVtcHR5O1xuICAgICAgY29uc3QgbmV3Q2hpbGQgPSBjaGlsZC5zZXQocmVsYXRpdmVQYXRoLnBvcEZyb250KCksIHRvU2V0KTtcbiAgICAgIGNvbnN0IG5ld0NoaWxkcmVuID0gdGhpcy5jaGlsZHJlbi5pbnNlcnQoZnJvbnQsIG5ld0NoaWxkKTtcbiAgICAgIHJldHVybiBuZXcgSW1tdXRhYmxlVHJlZSh0aGlzLnZhbHVlLCBuZXdDaGlsZHJlbik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIHZhbHVlIGF0IHRoZSBzcGVjaWZpZWQgcGF0aC5cbiAgICpcbiAgICogQHBhcmFtIHshUGF0aH0gcmVsYXRpdmVQYXRoIFBhdGggdG8gdmFsdWUgdG8gcmVtb3ZlLlxuICAgKiBAcmV0dXJuIHshSW1tdXRhYmxlVHJlZS48VD59IFJlc3VsdGluZyB0cmVlLlxuICAgKi9cbiAgcmVtb3ZlKHJlbGF0aXZlUGF0aDogUGF0aCk6IEltbXV0YWJsZVRyZWU8VD4ge1xuICAgIGlmIChyZWxhdGl2ZVBhdGguaXNFbXB0eSgpKSB7XG4gICAgICBpZiAodGhpcy5jaGlsZHJlbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgcmV0dXJuIEltbXV0YWJsZVRyZWUuRW1wdHk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IEltbXV0YWJsZVRyZWUobnVsbCwgdGhpcy5jaGlsZHJlbik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGZyb250ID0gcmVsYXRpdmVQYXRoLmdldEZyb250KCk7XG4gICAgICBjb25zdCBjaGlsZCA9IHRoaXMuY2hpbGRyZW4uZ2V0KGZyb250KTtcbiAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICBjb25zdCBuZXdDaGlsZCA9IGNoaWxkLnJlbW92ZShyZWxhdGl2ZVBhdGgucG9wRnJvbnQoKSk7XG4gICAgICAgIGxldCBuZXdDaGlsZHJlbjtcbiAgICAgICAgaWYgKG5ld0NoaWxkLmlzRW1wdHkoKSkge1xuICAgICAgICAgIG5ld0NoaWxkcmVuID0gdGhpcy5jaGlsZHJlbi5yZW1vdmUoZnJvbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld0NoaWxkcmVuID0gdGhpcy5jaGlsZHJlbi5pbnNlcnQoZnJvbnQsIG5ld0NoaWxkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gbnVsbCAmJiBuZXdDaGlsZHJlbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICByZXR1cm4gSW1tdXRhYmxlVHJlZS5FbXB0eTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbmV3IEltbXV0YWJsZVRyZWUodGhpcy52YWx1ZSwgbmV3Q2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhIHZhbHVlIGZyb20gdGhlIHRyZWUuXG4gICAqXG4gICAqIEBwYXJhbSB7IVBhdGh9IHJlbGF0aXZlUGF0aCBQYXRoIHRvIGdldCB2YWx1ZSBmb3IuXG4gICAqIEByZXR1cm4gez9UfSBWYWx1ZSBhdCBwYXRoLCBvciBudWxsLlxuICAgKi9cbiAgZ2V0KHJlbGF0aXZlUGF0aDogUGF0aCk6IFQgfCBudWxsIHtcbiAgICBpZiAocmVsYXRpdmVQYXRoLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGZyb250ID0gcmVsYXRpdmVQYXRoLmdldEZyb250KCk7XG4gICAgICBjb25zdCBjaGlsZCA9IHRoaXMuY2hpbGRyZW4uZ2V0KGZyb250KTtcbiAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICByZXR1cm4gY2hpbGQuZ2V0KHJlbGF0aXZlUGF0aC5wb3BGcm9udCgpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBsYWNlIHRoZSBzdWJ0cmVlIGF0IHRoZSBzcGVjaWZpZWQgcGF0aCB3aXRoIHRoZSBnaXZlbiBuZXcgdHJlZS5cbiAgICpcbiAgICogQHBhcmFtIHshUGF0aH0gcmVsYXRpdmVQYXRoIFBhdGggdG8gcmVwbGFjZSBzdWJ0cmVlIGZvci5cbiAgICogQHBhcmFtIHshSW1tdXRhYmxlVHJlZX0gbmV3VHJlZSBOZXcgdHJlZS5cbiAgICogQHJldHVybiB7IUltbXV0YWJsZVRyZWV9IFJlc3VsdGluZyB0cmVlLlxuICAgKi9cbiAgc2V0VHJlZShyZWxhdGl2ZVBhdGg6IFBhdGgsIG5ld1RyZWU6IEltbXV0YWJsZVRyZWU8VD4pOiBJbW11dGFibGVUcmVlPFQ+IHtcbiAgICBpZiAocmVsYXRpdmVQYXRoLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIG5ld1RyZWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGZyb250ID0gcmVsYXRpdmVQYXRoLmdldEZyb250KCk7XG4gICAgICBjb25zdCBjaGlsZCA9IHRoaXMuY2hpbGRyZW4uZ2V0KGZyb250KSB8fCBJbW11dGFibGVUcmVlLkVtcHR5O1xuICAgICAgY29uc3QgbmV3Q2hpbGQgPSBjaGlsZC5zZXRUcmVlKHJlbGF0aXZlUGF0aC5wb3BGcm9udCgpLCBuZXdUcmVlKTtcbiAgICAgIGxldCBuZXdDaGlsZHJlbjtcbiAgICAgIGlmIChuZXdDaGlsZC5pc0VtcHR5KCkpIHtcbiAgICAgICAgbmV3Q2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuLnJlbW92ZShmcm9udCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdDaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW4uaW5zZXJ0KGZyb250LCBuZXdDaGlsZCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IEltbXV0YWJsZVRyZWUodGhpcy52YWx1ZSwgbmV3Q2hpbGRyZW4pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIGRlcHRoIGZpcnN0IGZvbGQgb24gdGhpcyB0cmVlLiBUcmFuc2Zvcm1zIGEgdHJlZSBpbnRvIGEgc2luZ2xlXG4gICAqIHZhbHVlLCBnaXZlbiBhIGZ1bmN0aW9uIHRoYXQgb3BlcmF0ZXMgb24gdGhlIHBhdGggdG8gYSBub2RlLCBhbiBvcHRpb25hbFxuICAgKiBjdXJyZW50IHZhbHVlLCBhbmQgYSBtYXAgb2YgY2hpbGQgbmFtZXMgdG8gZm9sZGVkIHN1YnRyZWVzXG4gICAqIEB0ZW1wbGF0ZSBWXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oUGF0aCwgP1QsIE9iamVjdC48c3RyaW5nLCBWPik6Vn0gZm5cbiAgICogQHJldHVybiB7Vn1cbiAgICovXG4gIGZvbGQ8Vj4oZm46IChwYXRoOiBQYXRoLCB2YWx1ZTogVCwgY2hpbGRyZW46IHsgW2s6IHN0cmluZ106IFYgfSkgPT4gVik6IFYge1xuICAgIHJldHVybiB0aGlzLmZvbGRfKFBhdGguRW1wdHksIGZuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWN1cnNpdmUgaGVscGVyIGZvciBwdWJsaWMtZmFjaW5nIGZvbGQoKSBtZXRob2RcbiAgICogQHRlbXBsYXRlIFZcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aFNvRmFyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oUGF0aCwgP1QsIE9iamVjdC48c3RyaW5nLCBWPik6Vn0gZm5cbiAgICogQHJldHVybiB7Vn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgZm9sZF88Vj4oXG4gICAgcGF0aFNvRmFyOiBQYXRoLFxuICAgIGZuOiAocGF0aDogUGF0aCwgdmFsdWU6IFQgfCBudWxsLCBjaGlsZHJlbjogeyBbazogc3RyaW5nXTogViB9KSA9PiBWXG4gICk6IFYge1xuICAgIGNvbnN0IGFjY3VtOiB7IFtrOiBzdHJpbmddOiBWIH0gPSB7fTtcbiAgICB0aGlzLmNoaWxkcmVuLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24oXG4gICAgICBjaGlsZEtleTogc3RyaW5nLFxuICAgICAgY2hpbGRUcmVlOiBJbW11dGFibGVUcmVlPFQ+XG4gICAgKSB7XG4gICAgICBhY2N1bVtjaGlsZEtleV0gPSBjaGlsZFRyZWUuZm9sZF8ocGF0aFNvRmFyLmNoaWxkKGNoaWxkS2V5KSwgZm4pO1xuICAgIH0pO1xuICAgIHJldHVybiBmbihwYXRoU29GYXIsIHRoaXMudmFsdWUsIGFjY3VtKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIHRoZSBmaXJzdCBtYXRjaGluZyB2YWx1ZSBvbiB0aGUgZ2l2ZW4gcGF0aC4gUmV0dXJuIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgZiB0byBpdC5cbiAgICogQHRlbXBsYXRlIFZcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICAgKiBAcGFyYW0geyFmdW5jdGlvbighUGF0aCwgIVQpOj9WfSBmXG4gICAqIEByZXR1cm4gez9WfVxuICAgKi9cbiAgZmluZE9uUGF0aDxWPihwYXRoOiBQYXRoLCBmOiAocGF0aDogUGF0aCwgdmFsdWU6IFQpID0+IFYgfCBudWxsKTogViB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmZpbmRPblBhdGhfKHBhdGgsIFBhdGguRW1wdHksIGYpO1xuICB9XG5cbiAgcHJpdmF0ZSBmaW5kT25QYXRoXzxWPihcbiAgICBwYXRoVG9Gb2xsb3c6IFBhdGgsXG4gICAgcGF0aFNvRmFyOiBQYXRoLFxuICAgIGY6IChwYXRoOiBQYXRoLCB2YWx1ZTogVCkgPT4gViB8IG51bGxcbiAgKTogViB8IG51bGwge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMudmFsdWUgPyBmKHBhdGhTb0ZhciwgdGhpcy52YWx1ZSkgOiBmYWxzZTtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocGF0aFRvRm9sbG93LmlzRW1wdHkoKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGZyb250ID0gcGF0aFRvRm9sbG93LmdldEZyb250KCkhO1xuICAgICAgICBjb25zdCBuZXh0Q2hpbGQgPSB0aGlzLmNoaWxkcmVuLmdldChmcm9udCk7XG4gICAgICAgIGlmIChuZXh0Q2hpbGQpIHtcbiAgICAgICAgICByZXR1cm4gbmV4dENoaWxkLmZpbmRPblBhdGhfKFxuICAgICAgICAgICAgcGF0aFRvRm9sbG93LnBvcEZyb250KCksXG4gICAgICAgICAgICBwYXRoU29GYXIuY2hpbGQoZnJvbnQpLFxuICAgICAgICAgICAgZlxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICAgKiBAcGFyYW0geyFmdW5jdGlvbighUGF0aCwgIVQpfSBmXG4gICAqIEByZXR1cm5zIHshSW1tdXRhYmxlVHJlZS48VD59XG4gICAqL1xuICBmb3JlYWNoT25QYXRoKFxuICAgIHBhdGg6IFBhdGgsXG4gICAgZjogKHBhdGg6IFBhdGgsIHZhbHVlOiBUKSA9PiB2b2lkXG4gICk6IEltbXV0YWJsZVRyZWU8VD4ge1xuICAgIHJldHVybiB0aGlzLmZvcmVhY2hPblBhdGhfKHBhdGgsIFBhdGguRW1wdHksIGYpO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JlYWNoT25QYXRoXyhcbiAgICBwYXRoVG9Gb2xsb3c6IFBhdGgsXG4gICAgY3VycmVudFJlbGF0aXZlUGF0aDogUGF0aCxcbiAgICBmOiAocGF0aDogUGF0aCwgdmFsdWU6IFQpID0+IHZvaWRcbiAgKTogSW1tdXRhYmxlVHJlZTxUPiB7XG4gICAgaWYgKHBhdGhUb0ZvbGxvdy5pc0VtcHR5KCkpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy52YWx1ZSkge1xuICAgICAgICBmKGN1cnJlbnRSZWxhdGl2ZVBhdGgsIHRoaXMudmFsdWUpO1xuICAgICAgfVxuICAgICAgY29uc3QgZnJvbnQgPSBwYXRoVG9Gb2xsb3cuZ2V0RnJvbnQoKTtcbiAgICAgIGNvbnN0IG5leHRDaGlsZCA9IHRoaXMuY2hpbGRyZW4uZ2V0KGZyb250KTtcbiAgICAgIGlmIChuZXh0Q2hpbGQpIHtcbiAgICAgICAgcmV0dXJuIG5leHRDaGlsZC5mb3JlYWNoT25QYXRoXyhcbiAgICAgICAgICBwYXRoVG9Gb2xsb3cucG9wRnJvbnQoKSxcbiAgICAgICAgICBjdXJyZW50UmVsYXRpdmVQYXRoLmNoaWxkKGZyb250KSxcbiAgICAgICAgICBmXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gSW1tdXRhYmxlVHJlZS5FbXB0eTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsbHMgdGhlIGdpdmVuIGZ1bmN0aW9uIGZvciBlYWNoIG5vZGUgaW4gdGhlIHRyZWUgdGhhdCBoYXMgYSB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtmdW5jdGlvbighUGF0aCwgIVQpfSBmIEEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdpdGhcbiAgICogICB0aGUgcGF0aCBmcm9tIHRoZSByb290IG9mIHRoZSB0cmVlIHRvIGEgbm9kZSwgYW5kIHRoZSB2YWx1ZSBhdCB0aGF0IG5vZGUuXG4gICAqICAgQ2FsbGVkIGluIGRlcHRoLWZpcnN0IG9yZGVyLlxuICAgKi9cbiAgZm9yZWFjaChmOiAocGF0aDogUGF0aCwgdmFsdWU6IFQpID0+IHZvaWQpIHtcbiAgICB0aGlzLmZvcmVhY2hfKFBhdGguRW1wdHksIGYpO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JlYWNoXyhcbiAgICBjdXJyZW50UmVsYXRpdmVQYXRoOiBQYXRoLFxuICAgIGY6IChwYXRoOiBQYXRoLCB2YWx1ZTogVCkgPT4gdm9pZFxuICApIHtcbiAgICB0aGlzLmNoaWxkcmVuLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24oY2hpbGROYW1lLCBjaGlsZFRyZWUpIHtcbiAgICAgIGNoaWxkVHJlZS5mb3JlYWNoXyhjdXJyZW50UmVsYXRpdmVQYXRoLmNoaWxkKGNoaWxkTmFtZSksIGYpO1xuICAgIH0pO1xuICAgIGlmICh0aGlzLnZhbHVlKSB7XG4gICAgICBmKGN1cnJlbnRSZWxhdGl2ZVBhdGgsIHRoaXMudmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZywgIVQpfSBmXG4gICAqL1xuICBmb3JlYWNoQ2hpbGQoZjogKG5hbWU6IHN0cmluZywgdmFsdWU6IFQpID0+IHZvaWQpIHtcbiAgICB0aGlzLmNoaWxkcmVuLmlub3JkZXJUcmF2ZXJzYWwoXG4gICAgICAoY2hpbGROYW1lOiBzdHJpbmcsIGNoaWxkVHJlZTogSW1tdXRhYmxlVHJlZTxUPikgPT4ge1xuICAgICAgICBpZiAoY2hpbGRUcmVlLnZhbHVlKSB7XG4gICAgICAgICAgZihjaGlsZE5hbWUsIGNoaWxkVHJlZS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxuICogRmFuY3kgSUQgZ2VuZXJhdG9yIHRoYXQgY3JlYXRlcyAyMC1jaGFyYWN0ZXIgc3RyaW5nIGlkZW50aWZpZXJzIHdpdGggdGhlXG4gKiBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqXG4gKiAxLiBUaGV5J3JlIGJhc2VkIG9uIHRpbWVzdGFtcCBzbyB0aGF0IHRoZXkgc29ydCAqYWZ0ZXIqIGFueSBleGlzdGluZyBpZHMuXG4gKiAyLiBUaGV5IGNvbnRhaW4gNzItYml0cyBvZiByYW5kb20gZGF0YSBhZnRlciB0aGUgdGltZXN0YW1wIHNvIHRoYXQgSURzIHdvbid0XG4gKiAgICBjb2xsaWRlIHdpdGggb3RoZXIgY2xpZW50cycgSURzLlxuICogMy4gVGhleSBzb3J0ICpsZXhpY29ncmFwaGljYWxseSogKHNvIHRoZSB0aW1lc3RhbXAgaXMgY29udmVydGVkIHRvIGNoYXJhY3RlcnNcbiAqICAgIHRoYXQgd2lsbCBzb3J0IHByb3Blcmx5KS5cbiAqIDQuIFRoZXkncmUgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nLiBFdmVuIGlmIHlvdSBnZW5lcmF0ZSBtb3JlIHRoYW4gb25lIGluXG4gKiAgICB0aGUgc2FtZSB0aW1lc3RhbXAsIHRoZSBsYXR0ZXIgb25lcyB3aWxsIHNvcnQgYWZ0ZXIgdGhlIGZvcm1lciBvbmVzLiBXZSBkb1xuICogICAgdGhpcyBieSB1c2luZyB0aGUgcHJldmlvdXMgcmFuZG9tIGJpdHMgYnV0IFwiaW5jcmVtZW50aW5nXCIgdGhlbSBieSAxIChvbmx5XG4gKiAgICBpbiB0aGUgY2FzZSBvZiBhIHRpbWVzdGFtcCBjb2xsaXNpb24pLlxuICovXG5leHBvcnQgY29uc3QgbmV4dFB1c2hJZCA9IChmdW5jdGlvbigpIHtcbiAgLy8gTW9kZWxlZCBhZnRlciBiYXNlNjQgd2ViLXNhZmUgY2hhcnMsIGJ1dCBvcmRlcmVkIGJ5IEFTQ0lJLlxuICBjb25zdCBQVVNIX0NIQVJTID1cbiAgICAnLTAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWl9hYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eic7XG5cbiAgLy8gVGltZXN0YW1wIG9mIGxhc3QgcHVzaCwgdXNlZCB0byBwcmV2ZW50IGxvY2FsIGNvbGxpc2lvbnMgaWYgeW91IHB1c2ggdHdpY2VcbiAgLy8gaW4gb25lIG1zLlxuICBsZXQgbGFzdFB1c2hUaW1lID0gMDtcblxuICAvLyBXZSBnZW5lcmF0ZSA3Mi1iaXRzIG9mIHJhbmRvbW5lc3Mgd2hpY2ggZ2V0IHR1cm5lZCBpbnRvIDEyIGNoYXJhY3RlcnMgYW5kXG4gIC8vIGFwcGVuZGVkIHRvIHRoZSB0aW1lc3RhbXAgdG8gcHJldmVudCBjb2xsaXNpb25zIHdpdGggb3RoZXIgY2xpZW50cy4gV2VcbiAgLy8gc3RvcmUgdGhlIGxhc3QgY2hhcmFjdGVycyB3ZSBnZW5lcmF0ZWQgYmVjYXVzZSBpbiB0aGUgZXZlbnQgb2YgYSBjb2xsaXNpb24sXG4gIC8vIHdlJ2xsIHVzZSB0aG9zZSBzYW1lIGNoYXJhY3RlcnMgZXhjZXB0IFwiaW5jcmVtZW50ZWRcIiBieSBvbmUuXG4gIGNvbnN0IGxhc3RSYW5kQ2hhcnM6IG51bWJlcltdID0gW107XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKG5vdzogbnVtYmVyKSB7XG4gICAgY29uc3QgZHVwbGljYXRlVGltZSA9IG5vdyA9PT0gbGFzdFB1c2hUaW1lO1xuICAgIGxhc3RQdXNoVGltZSA9IG5vdztcblxuICAgIGxldCBpO1xuICAgIGNvbnN0IHRpbWVTdGFtcENoYXJzID0gbmV3IEFycmF5KDgpO1xuICAgIGZvciAoaSA9IDc7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0aW1lU3RhbXBDaGFyc1tpXSA9IFBVU0hfQ0hBUlMuY2hhckF0KG5vdyAlIDY0KTtcbiAgICAgIC8vIE5PVEU6IENhbid0IHVzZSA8PCBoZXJlIGJlY2F1c2UgamF2YXNjcmlwdCB3aWxsIGNvbnZlcnQgdG8gaW50IGFuZCBsb3NlXG4gICAgICAvLyB0aGUgdXBwZXIgYml0cy5cbiAgICAgIG5vdyA9IE1hdGguZmxvb3Iobm93IC8gNjQpO1xuICAgIH1cbiAgICBhc3NlcnQobm93ID09PSAwLCAnQ2Fubm90IHB1c2ggYXQgdGltZSA9PSAwJyk7XG5cbiAgICBsZXQgaWQgPSB0aW1lU3RhbXBDaGFycy5qb2luKCcnKTtcblxuICAgIGlmICghZHVwbGljYXRlVGltZSkge1xuICAgICAgZm9yIChpID0gMDsgaSA8IDEyOyBpKyspIHtcbiAgICAgICAgbGFzdFJhbmRDaGFyc1tpXSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDY0KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgdGhlIHRpbWVzdGFtcCBoYXNuJ3QgY2hhbmdlZCBzaW5jZSBsYXN0IHB1c2gsIHVzZSB0aGUgc2FtZSByYW5kb21cbiAgICAgIC8vIG51bWJlciwgZXhjZXB0IGluY3JlbWVudGVkIGJ5IDEuXG4gICAgICBmb3IgKGkgPSAxMTsgaSA+PSAwICYmIGxhc3RSYW5kQ2hhcnNbaV0gPT09IDYzOyBpLS0pIHtcbiAgICAgICAgbGFzdFJhbmRDaGFyc1tpXSA9IDA7XG4gICAgICB9XG4gICAgICBsYXN0UmFuZENoYXJzW2ldKys7XG4gICAgfVxuICAgIGZvciAoaSA9IDA7IGkgPCAxMjsgaSsrKSB7XG4gICAgICBpZCArPSBQVVNIX0NIQVJTLmNoYXJBdChsYXN0UmFuZENoYXJzW2ldKTtcbiAgICB9XG4gICAgYXNzZXJ0KGlkLmxlbmd0aCA9PT0gMjAsICduZXh0UHVzaElkOiBMZW5ndGggc2hvdWxkIGJlIDIwLicpO1xuXG4gICAgcmV0dXJuIGlkO1xuICB9O1xufSkoKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJy4vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IGlzTW9iaWxlQ29yZG92YSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuLyoqXG4gKiBNb25pdG9ycyBvbmxpbmUgc3RhdGUgKGFzIHJlcG9ydGVkIGJ5IHdpbmRvdy5vbmxpbmUvb2ZmbGluZSBldmVudHMpLlxuICpcbiAqIFRoZSBleHBlY3RhdGlvbiBpcyB0aGF0IHRoaXMgY291bGQgaGF2ZSBtYW55IGZhbHNlIHBvc2l0aXZlcyAodGhpbmtzIHdlIGFyZSBvbmxpbmVcbiAqIHdoZW4gd2UncmUgbm90KSwgYnV0IG5vIGZhbHNlIG5lZ2F0aXZlcy4gIFNvIHdlIGNhbiBzYWZlbHkgdXNlIGl0IHRvIGRldGVybWluZSB3aGVuXG4gKiB3ZSBkZWZpbml0ZWx5IGNhbm5vdCByZWFjaCB0aGUgaW50ZXJuZXQuXG4gKlxuICogQGV4dGVuZHMge0V2ZW50RW1pdHRlcn1cbiAqL1xuZXhwb3J0IGNsYXNzIE9ubGluZU1vbml0b3IgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBwcml2YXRlIG9ubGluZV8gPSB0cnVlO1xuXG4gIHN0YXRpYyBnZXRJbnN0YW5jZSgpIHtcbiAgICByZXR1cm4gbmV3IE9ubGluZU1vbml0b3IoKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFsnb25saW5lJ10pO1xuXG4gICAgLy8gV2UndmUgaGFkIHJlcGVhdGVkIGNvbXBsYWludHMgdGhhdCBDb3Jkb3ZhIGFwcHMgY2FuIGdldCBzdHVjayBcIm9mZmxpbmVcIiwgZS5nLlxuICAgIC8vIGh0dHBzOi8vZm9ydW0uaW9uaWNmcmFtZXdvcmsuY29tL3QvZmlyZWJhc2UtY29ubmVjdGlvbi1pcy1sb3N0LWFuZC1uZXZlci1jb21lLWJhY2svNDM4MTBcbiAgICAvLyBJdCB3b3VsZCBzZWVtIHRoYXQgdGhlICdvbmxpbmUnIGV2ZW50IGRvZXMgbm90IGFsd2F5cyBmaXJlIGNvbnNpc3RlbnRseS4gU28gd2UgZGlzYWJsZSBpdFxuICAgIC8vIGZvciBDb3Jkb3ZhLlxuICAgIGlmIChcbiAgICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAhaXNNb2JpbGVDb3Jkb3ZhKClcbiAgICApIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAnb25saW5lJyxcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIGlmICghdGhpcy5vbmxpbmVfKSB7XG4gICAgICAgICAgICB0aGlzLm9ubGluZV8gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdvbmxpbmUnLCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGZhbHNlXG4gICAgICApO1xuXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgJ29mZmxpbmUnLFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMub25saW5lXykge1xuICAgICAgICAgICAgdGhpcy5vbmxpbmVfID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ29ubGluZScsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGZhbHNlXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFzdHJpbmd9IGV2ZW50VHlwZVxuICAgKiBAcmV0dXJuIHtBcnJheS48Ym9vbGVhbj59XG4gICAqL1xuICBnZXRJbml0aWFsRXZlbnQoZXZlbnRUeXBlOiBzdHJpbmcpOiBib29sZWFuW10ge1xuICAgIGFzc2VydChldmVudFR5cGUgPT09ICdvbmxpbmUnLCAnVW5rbm93biBldmVudCB0eXBlOiAnICsgZXZlbnRUeXBlKTtcbiAgICByZXR1cm4gW3RoaXMub25saW5lX107XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGN1cnJlbnRseU9ubGluZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5vbmxpbmVfO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBuYW1lQ29tcGFyZSB9IGZyb20gJy4vdXRpbCc7XG5pbXBvcnQgeyBzdHJpbmdMZW5ndGggfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG4vKipcbiAqIEFuIGltbXV0YWJsZSBvYmplY3QgcmVwcmVzZW50aW5nIGEgcGFyc2VkIHBhdGguICBJdCdzIGltbXV0YWJsZSBzbyB0aGF0IHlvdVxuICogY2FuIHBhc3MgdGhlbSBhcm91bmQgdG8gb3RoZXIgZnVuY3Rpb25zIHdpdGhvdXQgd29ycnlpbmcgYWJvdXQgdGhlbSBjaGFuZ2luZ1xuICogaXQuXG4gKi9cblxuZXhwb3J0IGNsYXNzIFBhdGgge1xuICBwcml2YXRlIHBpZWNlc186IHN0cmluZ1tdO1xuICBwcml2YXRlIHBpZWNlTnVtXzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBTaW5nbGV0b24gdG8gcmVwcmVzZW50IGFuIGVtcHR5IHBhdGhcbiAgICpcbiAgICogQGNvbnN0XG4gICAqL1xuICBzdGF0aWMgZ2V0IEVtcHR5KCkge1xuICAgIHJldHVybiBuZXcgUGF0aCgnJyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd8QXJyYXkuPHN0cmluZz59IHBhdGhPclN0cmluZyBQYXRoIHN0cmluZyB0byBwYXJzZSxcbiAgICogICAgICBvciBhbm90aGVyIHBhdGgsIG9yIHRoZSByYXcgdG9rZW5zIGFycmF5XG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gcGllY2VOdW1cbiAgICovXG4gIGNvbnN0cnVjdG9yKHBhdGhPclN0cmluZzogc3RyaW5nIHwgc3RyaW5nW10sIHBpZWNlTnVtPzogbnVtYmVyKSB7XG4gICAgaWYgKHBpZWNlTnVtID09PSB2b2lkIDApIHtcbiAgICAgIHRoaXMucGllY2VzXyA9IChwYXRoT3JTdHJpbmcgYXMgc3RyaW5nKS5zcGxpdCgnLycpO1xuXG4gICAgICAvLyBSZW1vdmUgZW1wdHkgcGllY2VzLlxuICAgICAgbGV0IGNvcHlUbyA9IDA7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGllY2VzXy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodGhpcy5waWVjZXNfW2ldLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLnBpZWNlc19bY29weVRvXSA9IHRoaXMucGllY2VzX1tpXTtcbiAgICAgICAgICBjb3B5VG8rKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5waWVjZXNfLmxlbmd0aCA9IGNvcHlUbztcblxuICAgICAgdGhpcy5waWVjZU51bV8gPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBpZWNlc18gPSBwYXRoT3JTdHJpbmcgYXMgc3RyaW5nW107XG4gICAgICB0aGlzLnBpZWNlTnVtXyA9IHBpZWNlTnVtO1xuICAgIH1cbiAgfVxuXG4gIGdldEZyb250KCk6IHN0cmluZyB8IG51bGwge1xuICAgIGlmICh0aGlzLnBpZWNlTnVtXyA+PSB0aGlzLnBpZWNlc18ubGVuZ3RoKSByZXR1cm4gbnVsbDtcblxuICAgIHJldHVybiB0aGlzLnBpZWNlc19bdGhpcy5waWVjZU51bV9dO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG51bWJlciBvZiBzZWdtZW50cyBpbiB0aGlzIHBhdGhcbiAgICovXG4gIGdldExlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnBpZWNlc18ubGVuZ3RoIC0gdGhpcy5waWVjZU51bV87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVBhdGh9XG4gICAqL1xuICBwb3BGcm9udCgpOiBQYXRoIHtcbiAgICBsZXQgcGllY2VOdW0gPSB0aGlzLnBpZWNlTnVtXztcbiAgICBpZiAocGllY2VOdW0gPCB0aGlzLnBpZWNlc18ubGVuZ3RoKSB7XG4gICAgICBwaWVjZU51bSsrO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFBhdGgodGhpcy5waWVjZXNfLCBwaWVjZU51bSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGdldEJhY2soKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgaWYgKHRoaXMucGllY2VOdW1fIDwgdGhpcy5waWVjZXNfLmxlbmd0aClcbiAgICAgIHJldHVybiB0aGlzLnBpZWNlc19bdGhpcy5waWVjZXNfLmxlbmd0aCAtIDFdO1xuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIGxldCBwYXRoU3RyaW5nID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IHRoaXMucGllY2VOdW1fOyBpIDwgdGhpcy5waWVjZXNfLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5waWVjZXNfW2ldICE9PSAnJykgcGF0aFN0cmluZyArPSAnLycgKyB0aGlzLnBpZWNlc19baV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhdGhTdHJpbmcgfHwgJy8nO1xuICB9XG5cbiAgdG9VcmxFbmNvZGVkU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgbGV0IHBhdGhTdHJpbmcgPSAnJztcbiAgICBmb3IgKGxldCBpID0gdGhpcy5waWVjZU51bV87IGkgPCB0aGlzLnBpZWNlc18ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLnBpZWNlc19baV0gIT09ICcnKVxuICAgICAgICBwYXRoU3RyaW5nICs9ICcvJyArIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcodGhpcy5waWVjZXNfW2ldKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhdGhTdHJpbmcgfHwgJy8nO1xuICB9XG5cbiAgLyoqXG4gICAqIFNoYWxsb3cgY29weSBvZiB0aGUgcGFydHMgb2YgdGhlIHBhdGguXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gYmVnaW5cbiAgICogQHJldHVybiB7IUFycmF5PHN0cmluZz59XG4gICAqL1xuICBzbGljZShiZWdpbjogbnVtYmVyID0gMCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdGhpcy5waWVjZXNfLnNsaWNlKHRoaXMucGllY2VOdW1fICsgYmVnaW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9QYXRofVxuICAgKi9cbiAgcGFyZW50KCk6IFBhdGggfCBudWxsIHtcbiAgICBpZiAodGhpcy5waWVjZU51bV8gPj0gdGhpcy5waWVjZXNfLmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBwaWVjZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gdGhpcy5waWVjZU51bV87IGkgPCB0aGlzLnBpZWNlc18ubGVuZ3RoIC0gMTsgaSsrKVxuICAgICAgcGllY2VzLnB1c2godGhpcy5waWVjZXNfW2ldKTtcblxuICAgIHJldHVybiBuZXcgUGF0aChwaWVjZXMsIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfCFQYXRofSBjaGlsZFBhdGhPYmpcbiAgICogQHJldHVybiB7IVBhdGh9XG4gICAqL1xuICBjaGlsZChjaGlsZFBhdGhPYmo6IHN0cmluZyB8IFBhdGgpOiBQYXRoIHtcbiAgICBjb25zdCBwaWVjZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gdGhpcy5waWVjZU51bV87IGkgPCB0aGlzLnBpZWNlc18ubGVuZ3RoOyBpKyspXG4gICAgICBwaWVjZXMucHVzaCh0aGlzLnBpZWNlc19baV0pO1xuXG4gICAgaWYgKGNoaWxkUGF0aE9iaiBpbnN0YW5jZW9mIFBhdGgpIHtcbiAgICAgIGZvciAoXG4gICAgICAgIGxldCBpID0gY2hpbGRQYXRoT2JqLnBpZWNlTnVtXztcbiAgICAgICAgaSA8IGNoaWxkUGF0aE9iai5waWVjZXNfLmxlbmd0aDtcbiAgICAgICAgaSsrXG4gICAgICApIHtcbiAgICAgICAgcGllY2VzLnB1c2goY2hpbGRQYXRoT2JqLnBpZWNlc19baV0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjaGlsZFBpZWNlcyA9IGNoaWxkUGF0aE9iai5zcGxpdCgnLycpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZFBpZWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoY2hpbGRQaWVjZXNbaV0ubGVuZ3RoID4gMCkgcGllY2VzLnB1c2goY2hpbGRQaWVjZXNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgUGF0aChwaWVjZXMsIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlcmUgYXJlIG5vIHNlZ21lbnRzIGluIHRoaXMgcGF0aFxuICAgKi9cbiAgaXNFbXB0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5waWVjZU51bV8gPj0gdGhpcy5waWVjZXNfLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFQYXRofSBvdXRlclBhdGhcbiAgICogQHBhcmFtIHshUGF0aH0gaW5uZXJQYXRoXG4gICAqIEByZXR1cm4geyFQYXRofSBUaGUgcGF0aCBmcm9tIG91dGVyUGF0aCB0byBpbm5lclBhdGhcbiAgICovXG4gIHN0YXRpYyByZWxhdGl2ZVBhdGgob3V0ZXJQYXRoOiBQYXRoLCBpbm5lclBhdGg6IFBhdGgpOiBQYXRoIHtcbiAgICBjb25zdCBvdXRlciA9IG91dGVyUGF0aC5nZXRGcm9udCgpLFxuICAgICAgaW5uZXIgPSBpbm5lclBhdGguZ2V0RnJvbnQoKTtcbiAgICBpZiAob3V0ZXIgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBpbm5lclBhdGg7XG4gICAgfSBlbHNlIGlmIChvdXRlciA9PT0gaW5uZXIpIHtcbiAgICAgIHJldHVybiBQYXRoLnJlbGF0aXZlUGF0aChvdXRlclBhdGgucG9wRnJvbnQoKSwgaW5uZXJQYXRoLnBvcEZyb250KCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdJTlRFUk5BTCBFUlJPUjogaW5uZXJQYXRoICgnICtcbiAgICAgICAgICBpbm5lclBhdGggK1xuICAgICAgICAgICcpIGlzIG5vdCB3aXRoaW4gJyArXG4gICAgICAgICAgJ291dGVyUGF0aCAoJyArXG4gICAgICAgICAgb3V0ZXJQYXRoICtcbiAgICAgICAgICAnKSdcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVBhdGh9IGxlZnRcbiAgICogQHBhcmFtIHshUGF0aH0gcmlnaHRcbiAgICogQHJldHVybiB7bnVtYmVyfSAtMSwgMCwgMSBpZiBsZWZ0IGlzIGxlc3MsIGVxdWFsLCBvciBncmVhdGVyIHRoYW4gdGhlIHJpZ2h0LlxuICAgKi9cbiAgc3RhdGljIGNvbXBhcmVQYXRocyhsZWZ0OiBQYXRoLCByaWdodDogUGF0aCk6IG51bWJlciB7XG4gICAgY29uc3QgbGVmdEtleXMgPSBsZWZ0LnNsaWNlKCk7XG4gICAgY29uc3QgcmlnaHRLZXlzID0gcmlnaHQuc2xpY2UoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlZnRLZXlzLmxlbmd0aCAmJiBpIDwgcmlnaHRLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjbXAgPSBuYW1lQ29tcGFyZShsZWZ0S2V5c1tpXSwgcmlnaHRLZXlzW2ldKTtcbiAgICAgIGlmIChjbXAgIT09IDApIHJldHVybiBjbXA7XG4gICAgfVxuICAgIGlmIChsZWZ0S2V5cy5sZW5ndGggPT09IHJpZ2h0S2V5cy5sZW5ndGgpIHJldHVybiAwO1xuICAgIHJldHVybiBsZWZ0S2V5cy5sZW5ndGggPCByaWdodEtleXMubGVuZ3RoID8gLTEgOiAxO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7UGF0aH0gb3RoZXJcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiBwYXRocyBhcmUgdGhlIHNhbWUuXG4gICAqL1xuICBlcXVhbHMob3RoZXI6IFBhdGgpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5nZXRMZW5ndGgoKSAhPT0gb3RoZXIuZ2V0TGVuZ3RoKCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmb3IgKFxuICAgICAgbGV0IGkgPSB0aGlzLnBpZWNlTnVtXywgaiA9IG90aGVyLnBpZWNlTnVtXztcbiAgICAgIGkgPD0gdGhpcy5waWVjZXNfLmxlbmd0aDtcbiAgICAgIGkrKywgaisrXG4gICAgKSB7XG4gICAgICBpZiAodGhpcy5waWVjZXNfW2ldICE9PSBvdGhlci5waWVjZXNfW2pdKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyFQYXRofSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoaXMgcGF0aCBpcyBhIHBhcmVudCAob3IgdGhlIHNhbWUgYXMpIG90aGVyXG4gICAqL1xuICBjb250YWlucyhvdGhlcjogUGF0aCk6IGJvb2xlYW4ge1xuICAgIGxldCBpID0gdGhpcy5waWVjZU51bV87XG4gICAgbGV0IGogPSBvdGhlci5waWVjZU51bV87XG4gICAgaWYgKHRoaXMuZ2V0TGVuZ3RoKCkgPiBvdGhlci5nZXRMZW5ndGgoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB3aGlsZSAoaSA8IHRoaXMucGllY2VzXy5sZW5ndGgpIHtcbiAgICAgIGlmICh0aGlzLnBpZWNlc19baV0gIT09IG90aGVyLnBpZWNlc19bal0pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgKytpO1xuICAgICAgKytqO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufSAvLyBlbmQgUGF0aFxuXG4vKipcbiAqIER5bmFtaWMgKG11dGFibGUpIHBhdGggdXNlZCB0byBjb3VudCBwYXRoIGxlbmd0aHMuXG4gKlxuICogVGhpcyBjbGFzcyBpcyB1c2VkIHRvIGVmZmljaWVudGx5IGNoZWNrIHBhdGhzIGZvciB2YWxpZFxuICogbGVuZ3RoIChpbiBVVEY4IGJ5dGVzKSBhbmQgZGVwdGggKHVzZWQgaW4gcGF0aCB2YWxpZGF0aW9uKS5cbiAqXG4gKiBUaHJvd3MgRXJyb3IgZXhjZXB0aW9uIGlmIHBhdGggaXMgZXZlciBpbnZhbGlkLlxuICpcbiAqIFRoZSBkZWZpbml0aW9uIG9mIGEgcGF0aCBhbHdheXMgYmVnaW5zIHdpdGggJy8nLlxuICovXG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvblBhdGgge1xuICAvKiogQHR5cGUgeyFBcnJheTxzdHJpbmc+fSAqL1xuICBwcml2YXRlIHBhcnRzXzogc3RyaW5nW107XG4gIC8qKiBAdHlwZSB7bnVtYmVyfSBJbml0aWFsaXplIHRvIG51bWJlciBvZiAnLycgY2hhcnMgbmVlZGVkIGluIHBhdGguICovXG4gIHByaXZhdGUgYnl0ZUxlbmd0aF86IG51bWJlcjtcblxuICAvKipcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aCBJbml0aWFsIFBhdGguXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvclByZWZpeF8gUHJlZml4IGZvciBhbnkgZXJyb3IgbWVzc2FnZXMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihwYXRoOiBQYXRoLCBwcml2YXRlIGVycm9yUHJlZml4Xzogc3RyaW5nKSB7XG4gICAgLyoqIEB0eXBlIHshQXJyYXk8c3RyaW5nPn0gKi9cbiAgICB0aGlzLnBhcnRzXyA9IHBhdGguc2xpY2UoKTtcbiAgICAvKiogQHR5cGUge251bWJlcn0gSW5pdGlhbGl6ZSB0byBudW1iZXIgb2YgJy8nIGNoYXJzIG5lZWRlZCBpbiBwYXRoLiAqL1xuICAgIHRoaXMuYnl0ZUxlbmd0aF8gPSBNYXRoLm1heCgxLCB0aGlzLnBhcnRzXy5sZW5ndGgpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBhcnRzXy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5ieXRlTGVuZ3RoXyArPSBzdHJpbmdMZW5ndGgodGhpcy5wYXJ0c19baV0pO1xuICAgIH1cbiAgICB0aGlzLmNoZWNrVmFsaWRfKCk7XG4gIH1cblxuICAvKiogQGNvbnN0IHtudW1iZXJ9IE1heGltdW0ga2V5IGRlcHRoLiAqL1xuICBzdGF0aWMgZ2V0IE1BWF9QQVRIX0RFUFRIKCkge1xuICAgIHJldHVybiAzMjtcbiAgfVxuXG4gIC8qKiBAY29uc3Qge251bWJlcn0gTWF4aW11bSBudW1iZXIgb2YgKFVURjgpIGJ5dGVzIGluIGEgRmlyZWJhc2UgcGF0aC4gKi9cbiAgc3RhdGljIGdldCBNQVhfUEFUSF9MRU5HVEhfQllURVMoKSB7XG4gICAgcmV0dXJuIDc2ODtcbiAgfVxuXG4gIC8qKiBAcGFyYW0ge3N0cmluZ30gY2hpbGQgKi9cbiAgcHVzaChjaGlsZDogc3RyaW5nKSB7XG4gICAgLy8gQ291bnQgdGhlIG5lZWRlZCAnLydcbiAgICBpZiAodGhpcy5wYXJ0c18ubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5ieXRlTGVuZ3RoXyArPSAxO1xuICAgIH1cbiAgICB0aGlzLnBhcnRzXy5wdXNoKGNoaWxkKTtcbiAgICB0aGlzLmJ5dGVMZW5ndGhfICs9IHN0cmluZ0xlbmd0aChjaGlsZCk7XG4gICAgdGhpcy5jaGVja1ZhbGlkXygpO1xuICB9XG5cbiAgcG9wKCkge1xuICAgIGNvbnN0IGxhc3QgPSB0aGlzLnBhcnRzXy5wb3AoKTtcbiAgICB0aGlzLmJ5dGVMZW5ndGhfIC09IHN0cmluZ0xlbmd0aChsYXN0KTtcbiAgICAvLyBVbi1jb3VudCB0aGUgcHJldmlvdXMgJy8nXG4gICAgaWYgKHRoaXMucGFydHNfLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuYnl0ZUxlbmd0aF8gLT0gMTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNoZWNrVmFsaWRfKCkge1xuICAgIGlmICh0aGlzLmJ5dGVMZW5ndGhfID4gVmFsaWRhdGlvblBhdGguTUFYX1BBVEhfTEVOR1RIX0JZVEVTKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIHRoaXMuZXJyb3JQcmVmaXhfICtcbiAgICAgICAgICAnaGFzIGEga2V5IHBhdGggbG9uZ2VyIHRoYW4gJyArXG4gICAgICAgICAgVmFsaWRhdGlvblBhdGguTUFYX1BBVEhfTEVOR1RIX0JZVEVTICtcbiAgICAgICAgICAnIGJ5dGVzICgnICtcbiAgICAgICAgICB0aGlzLmJ5dGVMZW5ndGhfICtcbiAgICAgICAgICAnKS4nXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAodGhpcy5wYXJ0c18ubGVuZ3RoID4gVmFsaWRhdGlvblBhdGguTUFYX1BBVEhfREVQVEgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgdGhpcy5lcnJvclByZWZpeF8gK1xuICAgICAgICAgICdwYXRoIHNwZWNpZmllZCBleGNlZWRzIHRoZSBtYXhpbXVtIGRlcHRoIHRoYXQgY2FuIGJlIHdyaXR0ZW4gKCcgK1xuICAgICAgICAgIFZhbGlkYXRpb25QYXRoLk1BWF9QQVRIX0RFUFRIICtcbiAgICAgICAgICAnKSBvciBvYmplY3QgY29udGFpbnMgYSBjeWNsZSAnICtcbiAgICAgICAgICB0aGlzLnRvRXJyb3JTdHJpbmcoKVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RyaW5nIGZvciB1c2UgaW4gZXJyb3IgbWVzc2FnZXMgLSB1c2VzICcuJyBub3RhdGlvbiBmb3IgcGF0aC5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9FcnJvclN0cmluZygpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLnBhcnRzXy5sZW5ndGggPT0gMCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICByZXR1cm4gXCJpbiBwcm9wZXJ0eSAnXCIgKyB0aGlzLnBhcnRzXy5qb2luKCcuJykgKyBcIidcIjtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4vUGF0aCc7XG5pbXBvcnQgeyBTcGFyc2VTbmFwc2hvdFRyZWUgfSBmcm9tICcuLi9TcGFyc2VTbmFwc2hvdFRyZWUnO1xuaW1wb3J0IHsgTGVhZk5vZGUgfSBmcm9tICcuLi9zbmFwL0xlYWZOb2RlJztcbmltcG9ydCB7IG5vZGVGcm9tSlNPTiB9IGZyb20gJy4uL3NuYXAvbm9kZUZyb21KU09OJztcbmltcG9ydCB7IFBSSU9SSVRZX0lOREVYIH0gZnJvbSAnLi4vc25hcC9pbmRleGVzL1ByaW9yaXR5SW5kZXgnO1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL3NuYXAvTm9kZSc7XG5pbXBvcnQgeyBDaGlsZHJlbk5vZGUgfSBmcm9tICcuLi9zbmFwL0NoaWxkcmVuTm9kZSc7XG5cbi8qKlxuICogR2VuZXJhdGUgcGxhY2Vob2xkZXJzIGZvciBkZWZlcnJlZCB2YWx1ZXMuXG4gKiBAcGFyYW0gez9PYmplY3R9IHZhbHVlc1xuICogQHJldHVybiB7IU9iamVjdH1cbiAqL1xuZXhwb3J0IGNvbnN0IGdlbmVyYXRlV2l0aFZhbHVlcyA9IGZ1bmN0aW9uKFxuICB2YWx1ZXM6IHtcbiAgICBbazogc3RyaW5nXTogYW55O1xuICB9IHwgbnVsbFxuKTogeyBbazogc3RyaW5nXTogYW55IH0ge1xuICB2YWx1ZXMgPSB2YWx1ZXMgfHwge307XG4gIHZhbHVlc1sndGltZXN0YW1wJ10gPSB2YWx1ZXNbJ3RpbWVzdGFtcCddIHx8IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICByZXR1cm4gdmFsdWVzO1xufTtcblxuLyoqXG4gKiBWYWx1ZSB0byB1c2Ugd2hlbiBmaXJpbmcgbG9jYWwgZXZlbnRzLiBXaGVuIHdyaXRpbmcgc2VydmVyIHZhbHVlcywgZmlyZVxuICogbG9jYWwgZXZlbnRzIHdpdGggYW4gYXBwcm94aW1hdGUgdmFsdWUsIG90aGVyd2lzZSByZXR1cm4gdmFsdWUgYXMtaXMuXG4gKiBAcGFyYW0geyhPYmplY3R8c3RyaW5nfG51bWJlcnxib29sZWFuKX0gdmFsdWVcbiAqIEBwYXJhbSB7IU9iamVjdH0gc2VydmVyVmFsdWVzXG4gKiBAcmV0dXJuIHshKHN0cmluZ3xudW1iZXJ8Ym9vbGVhbil9XG4gKi9cbmV4cG9ydCBjb25zdCByZXNvbHZlRGVmZXJyZWRWYWx1ZSA9IGZ1bmN0aW9uKFxuICB2YWx1ZTogeyBbazogc3RyaW5nXTogYW55IH0gfCBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuLFxuICBzZXJ2ZXJWYWx1ZXM6IHsgW2s6IHN0cmluZ106IGFueSB9XG4pOiBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuIHtcbiAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIHZhbHVlIGFzIHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW47XG4gIH0gZWxzZSB7XG4gICAgYXNzZXJ0KCcuc3YnIGluIHZhbHVlLCAnVW5leHBlY3RlZCBsZWFmIG5vZGUgb3IgcHJpb3JpdHkgY29udGVudHMnKTtcbiAgICByZXR1cm4gc2VydmVyVmFsdWVzW3ZhbHVlWycuc3YnXV07XG4gIH1cbn07XG5cbi8qKlxuICogUmVjdXJzaXZlbHkgcmVwbGFjZSBhbGwgZGVmZXJyZWQgdmFsdWVzIGFuZCBwcmlvcml0aWVzIGluIHRoZSB0cmVlIHdpdGggdGhlXG4gKiBzcGVjaWZpZWQgZ2VuZXJhdGVkIHJlcGxhY2VtZW50IHZhbHVlcy5cbiAqIEBwYXJhbSB7IVNwYXJzZVNuYXBzaG90VHJlZX0gdHJlZVxuICogQHBhcmFtIHshT2JqZWN0fSBzZXJ2ZXJWYWx1ZXNcbiAqIEByZXR1cm4geyFTcGFyc2VTbmFwc2hvdFRyZWV9XG4gKi9cbmV4cG9ydCBjb25zdCByZXNvbHZlRGVmZXJyZWRWYWx1ZVRyZWUgPSBmdW5jdGlvbihcbiAgdHJlZTogU3BhcnNlU25hcHNob3RUcmVlLFxuICBzZXJ2ZXJWYWx1ZXM6IE9iamVjdFxuKTogU3BhcnNlU25hcHNob3RUcmVlIHtcbiAgY29uc3QgcmVzb2x2ZWRUcmVlID0gbmV3IFNwYXJzZVNuYXBzaG90VHJlZSgpO1xuICB0cmVlLmZvckVhY2hUcmVlKG5ldyBQYXRoKCcnKSwgZnVuY3Rpb24ocGF0aCwgbm9kZSkge1xuICAgIHJlc29sdmVkVHJlZS5yZW1lbWJlcihcbiAgICAgIHBhdGgsXG4gICAgICByZXNvbHZlRGVmZXJyZWRWYWx1ZVNuYXBzaG90KG5vZGUsIHNlcnZlclZhbHVlcylcbiAgICApO1xuICB9KTtcbiAgcmV0dXJuIHJlc29sdmVkVHJlZTtcbn07XG5cbi8qKlxuICogUmVjdXJzaXZlbHkgcmVwbGFjZSBhbGwgZGVmZXJyZWQgdmFsdWVzIGFuZCBwcmlvcml0aWVzIGluIHRoZSBub2RlIHdpdGggdGhlXG4gKiBzcGVjaWZpZWQgZ2VuZXJhdGVkIHJlcGxhY2VtZW50IHZhbHVlcy4gIElmIHRoZXJlIGFyZSBubyBzZXJ2ZXIgdmFsdWVzIGluIHRoZSBub2RlLFxuICogaXQnbGwgYmUgcmV0dXJuZWQgYXMtaXMuXG4gKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gKiBAcGFyYW0geyFPYmplY3R9IHNlcnZlclZhbHVlc1xuICogQHJldHVybiB7IU5vZGV9XG4gKi9cbmV4cG9ydCBjb25zdCByZXNvbHZlRGVmZXJyZWRWYWx1ZVNuYXBzaG90ID0gZnVuY3Rpb24oXG4gIG5vZGU6IE5vZGUsXG4gIHNlcnZlclZhbHVlczogT2JqZWN0XG4pOiBOb2RlIHtcbiAgY29uc3QgcmF3UHJpID0gbm9kZS5nZXRQcmlvcml0eSgpLnZhbCgpIGFzXG4gICAgfCBvYmplY3RcbiAgICB8IGJvb2xlYW5cbiAgICB8IG51bGxcbiAgICB8IG51bWJlclxuICAgIHwgc3RyaW5nO1xuICBjb25zdCBwcmlvcml0eSA9IHJlc29sdmVEZWZlcnJlZFZhbHVlKHJhd1ByaSwgc2VydmVyVmFsdWVzKTtcbiAgbGV0IG5ld05vZGU6IE5vZGU7XG5cbiAgaWYgKG5vZGUuaXNMZWFmTm9kZSgpKSB7XG4gICAgY29uc3QgbGVhZk5vZGUgPSBub2RlIGFzIExlYWZOb2RlO1xuICAgIGNvbnN0IHZhbHVlID0gcmVzb2x2ZURlZmVycmVkVmFsdWUobGVhZk5vZGUuZ2V0VmFsdWUoKSwgc2VydmVyVmFsdWVzKTtcbiAgICBpZiAoXG4gICAgICB2YWx1ZSAhPT0gbGVhZk5vZGUuZ2V0VmFsdWUoKSB8fFxuICAgICAgcHJpb3JpdHkgIT09IGxlYWZOb2RlLmdldFByaW9yaXR5KCkudmFsKClcbiAgICApIHtcbiAgICAgIHJldHVybiBuZXcgTGVhZk5vZGUodmFsdWUsIG5vZGVGcm9tSlNPTihwcmlvcml0eSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgY2hpbGRyZW5Ob2RlID0gbm9kZSBhcyBDaGlsZHJlbk5vZGU7XG4gICAgbmV3Tm9kZSA9IGNoaWxkcmVuTm9kZTtcbiAgICBpZiAocHJpb3JpdHkgIT09IGNoaWxkcmVuTm9kZS5nZXRQcmlvcml0eSgpLnZhbCgpKSB7XG4gICAgICBuZXdOb2RlID0gbmV3Tm9kZS51cGRhdGVQcmlvcml0eShuZXcgTGVhZk5vZGUocHJpb3JpdHkpKTtcbiAgICB9XG4gICAgY2hpbGRyZW5Ob2RlLmZvckVhY2hDaGlsZChQUklPUklUWV9JTkRFWCwgZnVuY3Rpb24oY2hpbGROYW1lLCBjaGlsZE5vZGUpIHtcbiAgICAgIGNvbnN0IG5ld0NoaWxkTm9kZSA9IHJlc29sdmVEZWZlcnJlZFZhbHVlU25hcHNob3QoXG4gICAgICAgIGNoaWxkTm9kZSxcbiAgICAgICAgc2VydmVyVmFsdWVzXG4gICAgICApO1xuICAgICAgaWYgKG5ld0NoaWxkTm9kZSAhPT0gY2hpbGROb2RlKSB7XG4gICAgICAgIG5ld05vZGUgPSBuZXdOb2RlLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKGNoaWxkTmFtZSwgbmV3Q2hpbGROb2RlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbmV3Tm9kZTtcbiAgfVxufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBJbXBsZW1lbnRhdGlvbiBvZiBhbiBpbW11dGFibGUgU29ydGVkTWFwIHVzaW5nIGEgTGVmdC1sZWFuaW5nXG4gKiBSZWQtQmxhY2sgVHJlZSwgYWRhcHRlZCBmcm9tIHRoZSBpbXBsZW1lbnRhdGlvbiBpbiBNdWdzXG4gKiAoaHR0cDovL21hZHMzNzkuZ2l0aHViLmNvbS9tdWdzLykgYnkgTWFkcyBIYXJ0bWFubiBKZW5zZW5cbiAqIChtYWRzMzc5QGdtYWlsLmNvbSkuXG4gKlxuICogT3JpZ2luYWwgcGFwZXIgb24gTGVmdC1sZWFuaW5nIFJlZC1CbGFjayBUcmVlczpcbiAqICAgaHR0cDovL3d3dy5jcy5wcmluY2V0b24uZWR1L35ycy90YWxrcy9MTFJCL0xMUkIucGRmXG4gKlxuICogSW52YXJpYW50IDE6IE5vIHJlZCBub2RlIGhhcyBhIHJlZCBjaGlsZFxuICogSW52YXJpYW50IDI6IEV2ZXJ5IGxlYWYgcGF0aCBoYXMgdGhlIHNhbWUgbnVtYmVyIG9mIGJsYWNrIG5vZGVzXG4gKiBJbnZhcmlhbnQgMzogT25seSB0aGUgbGVmdCBjaGlsZCBjYW4gYmUgcmVkIChsZWZ0IGxlYW5pbmcpXG4gKi9cblxuLy8gVE9ETzogVGhlcmUgYXJlIHNvbWUgaW1wcm92ZW1lbnRzIEknZCBsaWtlIHRvIG1ha2UgdG8gaW1wcm92ZSBtZW1vcnkgLyBwZXJmOlxuLy8gICogQ3JlYXRlIHR3byBwcm90b3R5cGVzLCBMTFJlZE5vZGUgYW5kIExMQmxhY2tOb2RlLCBpbnN0ZWFkIG9mIHN0b3JpbmcgYVxuLy8gICAgY29sb3IgcHJvcGVydHkgaW4gZXZlcnkgbm9kZS5cbi8vIFRPRE86IEl0IHdvdWxkIGFsc28gYmUgZ29vZCAoYW5kIHBvc3NpYmx5IG5lY2Vzc2FyeSkgdG8gY3JlYXRlIGEgYmFzZVxuLy8gaW50ZXJmYWNlIGZvciBMTFJCTm9kZSBhbmQgTExSQkVtcHR5Tm9kZS5cblxuZXhwb3J0IHR5cGUgQ29tcGFyYXRvcjxLPiA9IChrZXkxOiBLLCBrZXkyOiBLKSA9PiBudW1iZXI7XG5cbi8qKlxuICogQW4gaXRlcmF0b3Igb3ZlciBhbiBMTFJCTm9kZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFNvcnRlZE1hcEl0ZXJhdG9yPEssIFYsIFQ+IHtcbiAgLyoqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtBcnJheS48IUxMUkJOb2RlPn1cbiAgICovXG4gIHByaXZhdGUgbm9kZVN0YWNrXzogKExMUkJOb2RlPEssIFY+IHwgTExSQkVtcHR5Tm9kZTxLLCBWPilbXSA9IFtdO1xuXG4gIC8qKlxuICAgKiBAdGVtcGxhdGUgSywgViwgVFxuICAgKiBAcGFyYW0ge0xMUkJOb2RlfExMUkJFbXB0eU5vZGV9IG5vZGUgTm9kZSB0byBpdGVyYXRlLlxuICAgKiBAcGFyYW0gez9LfSBzdGFydEtleVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKEssIEspOiBudW1iZXJ9IGNvbXBhcmF0b3JcbiAgICogQHBhcmFtIHtib29sZWFufSBpc1JldmVyc2VfIFdoZXRoZXIgb3Igbm90IHRvIGl0ZXJhdGUgaW4gcmV2ZXJzZVxuICAgKiBAcGFyYW0geyhmdW5jdGlvbihLLCBWKTpUKT19IHJlc3VsdEdlbmVyYXRvcl9cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIG5vZGU6IExMUkJOb2RlPEssIFY+IHwgTExSQkVtcHR5Tm9kZTxLLCBWPixcbiAgICBzdGFydEtleTogSyB8IG51bGwsXG4gICAgY29tcGFyYXRvcjogQ29tcGFyYXRvcjxLPixcbiAgICBwcml2YXRlIGlzUmV2ZXJzZV86IGJvb2xlYW4sXG4gICAgcHJpdmF0ZSByZXN1bHRHZW5lcmF0b3JfOiAoKGs6IEssIHY6IFYpID0+IFQpIHwgbnVsbCA9IG51bGxcbiAgKSB7XG4gICAgbGV0IGNtcCA9IDE7XG4gICAgd2hpbGUgKCFub2RlLmlzRW1wdHkoKSkge1xuICAgICAgbm9kZSA9IG5vZGUgYXMgTExSQk5vZGU8SywgVj47XG4gICAgICBjbXAgPSBzdGFydEtleSA/IGNvbXBhcmF0b3Iobm9kZS5rZXksIHN0YXJ0S2V5KSA6IDE7XG4gICAgICAvLyBmbGlwIHRoZSBjb21wYXJpc29uIGlmIHdlJ3JlIGdvaW5nIGluIHJldmVyc2VcbiAgICAgIGlmIChpc1JldmVyc2VfKSBjbXAgKj0gLTE7XG5cbiAgICAgIGlmIChjbXAgPCAwKSB7XG4gICAgICAgIC8vIFRoaXMgbm9kZSBpcyBsZXNzIHRoYW4gb3VyIHN0YXJ0IGtleS4gaWdub3JlIGl0XG4gICAgICAgIGlmICh0aGlzLmlzUmV2ZXJzZV8pIHtcbiAgICAgICAgICBub2RlID0gbm9kZS5sZWZ0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vZGUgPSBub2RlLnJpZ2h0O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNtcCA9PT0gMCkge1xuICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZXhhY3RseSBlcXVhbCB0byBvdXIgc3RhcnQga2V5LiBQdXNoIGl0IG9uIHRoZSBzdGFjaywgYnV0IHN0b3AgaXRlcmF0aW5nO1xuICAgICAgICB0aGlzLm5vZGVTdGFja18ucHVzaChub2RlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZ3JlYXRlciB0aGFuIG91ciBzdGFydCBrZXksIGFkZCBpdCB0byB0aGUgc3RhY2sgYW5kIG1vdmUgdG8gdGhlIG5leHQgb25lXG4gICAgICAgIHRoaXMubm9kZVN0YWNrXy5wdXNoKG5vZGUpO1xuICAgICAgICBpZiAodGhpcy5pc1JldmVyc2VfKSB7XG4gICAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm9kZSA9IG5vZGUubGVmdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldE5leHQoKTogVCB7XG4gICAgaWYgKHRoaXMubm9kZVN0YWNrXy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXG4gICAgbGV0IG5vZGUgPSB0aGlzLm5vZGVTdGFja18ucG9wKCk7XG4gICAgbGV0IHJlc3VsdDogVDtcbiAgICBpZiAodGhpcy5yZXN1bHRHZW5lcmF0b3JfKVxuICAgICAgcmVzdWx0ID0gdGhpcy5yZXN1bHRHZW5lcmF0b3JfKG5vZGUua2V5LCBub2RlLnZhbHVlKTtcbiAgICBlbHNlIHJlc3VsdCA9IHsga2V5OiBub2RlLmtleSwgdmFsdWU6IG5vZGUudmFsdWUgfSBhcyBhbnk7XG5cbiAgICBpZiAodGhpcy5pc1JldmVyc2VfKSB7XG4gICAgICBub2RlID0gbm9kZS5sZWZ0O1xuICAgICAgd2hpbGUgKCFub2RlLmlzRW1wdHkoKSkge1xuICAgICAgICB0aGlzLm5vZGVTdGFja18ucHVzaChub2RlKTtcbiAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUgPSBub2RlLnJpZ2h0O1xuICAgICAgd2hpbGUgKCFub2RlLmlzRW1wdHkoKSkge1xuICAgICAgICB0aGlzLm5vZGVTdGFja18ucHVzaChub2RlKTtcbiAgICAgICAgbm9kZSA9IG5vZGUubGVmdDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgaGFzTmV4dCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5ub2RlU3RhY2tfLmxlbmd0aCA+IDA7XG4gIH1cblxuICBwZWVrKCk6IFQge1xuICAgIGlmICh0aGlzLm5vZGVTdGFja18ubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IG5vZGUgPSB0aGlzLm5vZGVTdGFja19bdGhpcy5ub2RlU3RhY2tfLmxlbmd0aCAtIDFdO1xuICAgIGlmICh0aGlzLnJlc3VsdEdlbmVyYXRvcl8pIHtcbiAgICAgIHJldHVybiB0aGlzLnJlc3VsdEdlbmVyYXRvcl8obm9kZS5rZXksIG5vZGUudmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4geyBrZXk6IG5vZGUua2V5LCB2YWx1ZTogbm9kZS52YWx1ZSB9IGFzIGFueTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgbm9kZSBpbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2sgdHJlZS5cbiAqL1xuZXhwb3J0IGNsYXNzIExMUkJOb2RlPEssIFY+IHtcbiAgY29sb3I6IGJvb2xlYW47XG4gIGxlZnQ6IExMUkJOb2RlPEssIFY+IHwgTExSQkVtcHR5Tm9kZTxLLCBWPjtcbiAgcmlnaHQ6IExMUkJOb2RlPEssIFY+IHwgTExSQkVtcHR5Tm9kZTxLLCBWPjtcblxuICAvKipcbiAgICogQHRlbXBsYXRlIEssIFZcbiAgICogQHBhcmFtIHshS30ga2V5IEtleSBhc3NvY2lhdGVkIHdpdGggdGhpcyBub2RlLlxuICAgKiBAcGFyYW0geyFWfSB2YWx1ZSBWYWx1ZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBub2RlLlxuICAgKiBAcGFyYW0gez9ib29sZWFufSBjb2xvciBXaGV0aGVyIHRoaXMgbm9kZSBpcyByZWQuXG4gICAqIEBwYXJhbSB7PyhMTFJCTm9kZXxMTFJCRW1wdHlOb2RlKT19IGxlZnQgTGVmdCBjaGlsZC5cbiAgICogQHBhcmFtIHs/KExMUkJOb2RlfExMUkJFbXB0eU5vZGUpPX0gcmlnaHQgUmlnaHQgY2hpbGQuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMga2V5OiBLLFxuICAgIHB1YmxpYyB2YWx1ZTogVixcbiAgICBjb2xvcjogYm9vbGVhbiB8IG51bGwsXG4gICAgbGVmdD86IExMUkJOb2RlPEssIFY+IHwgTExSQkVtcHR5Tm9kZTxLLCBWPiB8IG51bGwsXG4gICAgcmlnaHQ/OiBMTFJCTm9kZTxLLCBWPiB8IExMUkJFbXB0eU5vZGU8SywgVj4gfCBudWxsXG4gICkge1xuICAgIHRoaXMuY29sb3IgPSBjb2xvciAhPSBudWxsID8gY29sb3IgOiBMTFJCTm9kZS5SRUQ7XG4gICAgdGhpcy5sZWZ0ID1cbiAgICAgIGxlZnQgIT0gbnVsbCA/IGxlZnQgOiAoU29ydGVkTWFwLkVNUFRZX05PREUgYXMgTExSQkVtcHR5Tm9kZTxLLCBWPik7XG4gICAgdGhpcy5yaWdodCA9XG4gICAgICByaWdodCAhPSBudWxsID8gcmlnaHQgOiAoU29ydGVkTWFwLkVNUFRZX05PREUgYXMgTExSQkVtcHR5Tm9kZTxLLCBWPik7XG4gIH1cblxuICBzdGF0aWMgUkVEID0gdHJ1ZTtcbiAgc3RhdGljIEJMQUNLID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUsIG9wdGlvbmFsbHkgcmVwbGFjaW5nIHBpZWNlcyBvZiBpdC5cbiAgICpcbiAgICogQHBhcmFtIHs/S30ga2V5IE5ldyBrZXkgZm9yIHRoZSBub2RlLCBvciBudWxsLlxuICAgKiBAcGFyYW0gez9WfSB2YWx1ZSBOZXcgdmFsdWUgZm9yIHRoZSBub2RlLCBvciBudWxsLlxuICAgKiBAcGFyYW0gez9ib29sZWFufSBjb2xvciBOZXcgY29sb3IgZm9yIHRoZSBub2RlLCBvciBudWxsLlxuICAgKiBAcGFyYW0gez9MTFJCTm9kZXxMTFJCRW1wdHlOb2RlfSBsZWZ0IE5ldyBsZWZ0IGNoaWxkIGZvciB0aGUgbm9kZSwgb3IgbnVsbC5cbiAgICogQHBhcmFtIHs/TExSQk5vZGV8TExSQkVtcHR5Tm9kZX0gcmlnaHQgTmV3IHJpZ2h0IGNoaWxkIGZvciB0aGUgbm9kZSwgb3IgbnVsbC5cbiAgICogQHJldHVybiB7IUxMUkJOb2RlfSBUaGUgbm9kZSBjb3B5LlxuICAgKi9cbiAgY29weShcbiAgICBrZXk6IEsgfCBudWxsLFxuICAgIHZhbHVlOiBWIHwgbnVsbCxcbiAgICBjb2xvcjogYm9vbGVhbiB8IG51bGwsXG4gICAgbGVmdDogTExSQk5vZGU8SywgVj4gfCBMTFJCRW1wdHlOb2RlPEssIFY+IHwgbnVsbCxcbiAgICByaWdodDogTExSQk5vZGU8SywgVj4gfCBMTFJCRW1wdHlOb2RlPEssIFY+IHwgbnVsbFxuICApOiBMTFJCTm9kZTxLLCBWPiB7XG4gICAgcmV0dXJuIG5ldyBMTFJCTm9kZShcbiAgICAgIGtleSAhPSBudWxsID8ga2V5IDogdGhpcy5rZXksXG4gICAgICB2YWx1ZSAhPSBudWxsID8gdmFsdWUgOiB0aGlzLnZhbHVlLFxuICAgICAgY29sb3IgIT0gbnVsbCA/IGNvbG9yIDogdGhpcy5jb2xvcixcbiAgICAgIGxlZnQgIT0gbnVsbCA/IGxlZnQgOiB0aGlzLmxlZnQsXG4gICAgICByaWdodCAhPSBudWxsID8gcmlnaHQgOiB0aGlzLnJpZ2h0XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSB0b3RhbCBudW1iZXIgb2Ygbm9kZXMgaW4gdGhlIHRyZWUuXG4gICAqL1xuICBjb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmxlZnQuY291bnQoKSArIDEgKyB0aGlzLnJpZ2h0LmNvdW50KCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdHJlZSBpcyBlbXB0eS5cbiAgICovXG4gIGlzRW1wdHkoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYXZlcnNlcyB0aGUgdHJlZSBpbiBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAqIGZvciBlYWNoIG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUssICFWKToqfSBhY3Rpb24gQ2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGZvciBlYWNoXG4gICAqICAgbm9kZS4gIElmIGl0IHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAqIEByZXR1cm4geyp9IFRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICogICB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb25cbiAgICovXG4gIGlub3JkZXJUcmF2ZXJzYWwoYWN0aW9uOiAoazogSywgdjogVikgPT4gYW55KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMubGVmdC5pbm9yZGVyVHJhdmVyc2FsKGFjdGlvbikgfHxcbiAgICAgIGFjdGlvbih0aGlzLmtleSwgdGhpcy52YWx1ZSkgfHxcbiAgICAgIHRoaXMucmlnaHQuaW5vcmRlclRyYXZlcnNhbChhY3Rpb24pXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAqIGZvciBlYWNoIG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIU9iamVjdCwgIU9iamVjdCl9IGFjdGlvbiBDYWxsYmFjayBmdW5jdGlvbiB0byBiZSBjYWxsZWQgZm9yIGVhY2hcbiAgICogbm9kZS4gIElmIGl0IHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAqIEByZXR1cm4geyp9IFRydWUgaWYgdHJhdmVyc2FsIHdhcyBhYm9ydGVkLlxuICAgKi9cbiAgcmV2ZXJzZVRyYXZlcnNhbChhY3Rpb246IChrOiBLLCB2OiBWKSA9PiB2b2lkKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMucmlnaHQucmV2ZXJzZVRyYXZlcnNhbChhY3Rpb24pIHx8XG4gICAgICBhY3Rpb24odGhpcy5rZXksIHRoaXMudmFsdWUpIHx8XG4gICAgICB0aGlzLmxlZnQucmV2ZXJzZVRyYXZlcnNhbChhY3Rpb24pXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshT2JqZWN0fSBUaGUgbWluaW11bSBub2RlIGluIHRoZSB0cmVlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBtaW5fKCk6IExMUkJOb2RlPEssIFY+IHtcbiAgICBpZiAodGhpcy5sZWZ0LmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAodGhpcy5sZWZ0IGFzIExMUkJOb2RlPEssIFY+KS5taW5fKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFLfSBUaGUgbWF4aW11bSBrZXkgaW4gdGhlIHRyZWUuXG4gICAqL1xuICBtaW5LZXkoKTogSyB7XG4gICAgcmV0dXJuIHRoaXMubWluXygpLmtleTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshS30gVGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxuICAgKi9cbiAgbWF4S2V5KCk6IEsge1xuICAgIGlmICh0aGlzLnJpZ2h0LmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIHRoaXMua2V5O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5yaWdodC5tYXhLZXkoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHshT2JqZWN0fSBrZXkgS2V5IHRvIGluc2VydC5cbiAgICogQHBhcmFtIHshT2JqZWN0fSB2YWx1ZSBWYWx1ZSB0byBpbnNlcnQuXG4gICAqIEBwYXJhbSB7Q29tcGFyYXRvcn0gY29tcGFyYXRvciBDb21wYXJhdG9yLlxuICAgKiBAcmV0dXJuIHshTExSQk5vZGV9IE5ldyB0cmVlLCB3aXRoIHRoZSBrZXkvdmFsdWUgYWRkZWQuXG4gICAqL1xuICBpbnNlcnQoa2V5OiBLLCB2YWx1ZTogViwgY29tcGFyYXRvcjogQ29tcGFyYXRvcjxLPik6IExMUkJOb2RlPEssIFY+IHtcbiAgICBsZXQgY21wLCBuO1xuICAgIG4gPSB0aGlzO1xuICAgIGNtcCA9IGNvbXBhcmF0b3Ioa2V5LCBuLmtleSk7XG4gICAgaWYgKGNtcCA8IDApIHtcbiAgICAgIG4gPSBuLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbi5sZWZ0Lmluc2VydChrZXksIHZhbHVlLCBjb21wYXJhdG9yKSwgbnVsbCk7XG4gICAgfSBlbHNlIGlmIChjbXAgPT09IDApIHtcbiAgICAgIG4gPSBuLmNvcHkobnVsbCwgdmFsdWUsIG51bGwsIG51bGwsIG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuID0gbi5jb3B5KFxuICAgICAgICBudWxsLFxuICAgICAgICBudWxsLFxuICAgICAgICBudWxsLFxuICAgICAgICBudWxsLFxuICAgICAgICBuLnJpZ2h0Lmluc2VydChrZXksIHZhbHVlLCBjb21wYXJhdG9yKVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIG4uZml4VXBfKCk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7IUxMUkJOb2RlfExMUkJFbXB0eU5vZGV9IE5ldyB0cmVlLCB3aXRoIHRoZSBtaW5pbXVtIGtleSByZW1vdmVkLlxuICAgKi9cbiAgcHJpdmF0ZSByZW1vdmVNaW5fKCk6IExMUkJOb2RlPEssIFY+IHwgTExSQkVtcHR5Tm9kZTxLLCBWPiB7XG4gICAgaWYgKHRoaXMubGVmdC5pc0VtcHR5KCkpIHtcbiAgICAgIHJldHVybiBTb3J0ZWRNYXAuRU1QVFlfTk9ERSBhcyBMTFJCRW1wdHlOb2RlPEssIFY+O1xuICAgIH1cbiAgICBsZXQgbjogTExSQk5vZGU8SywgVj4gPSB0aGlzO1xuICAgIGlmICghbi5sZWZ0LmlzUmVkXygpICYmICFuLmxlZnQubGVmdC5pc1JlZF8oKSkgbiA9IG4ubW92ZVJlZExlZnRfKCk7XG4gICAgbiA9IG4uY29weShudWxsLCBudWxsLCBudWxsLCAobi5sZWZ0IGFzIExMUkJOb2RlPEssIFY+KS5yZW1vdmVNaW5fKCksIG51bGwpO1xuICAgIHJldHVybiBuLmZpeFVwXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU9iamVjdH0ga2V5IFRoZSBrZXkgb2YgdGhlIGl0ZW0gdG8gcmVtb3ZlLlxuICAgKiBAcGFyYW0ge0NvbXBhcmF0b3J9IGNvbXBhcmF0b3IgQ29tcGFyYXRvci5cbiAgICogQHJldHVybiB7IUxMUkJOb2RlfExMUkJFbXB0eU5vZGV9IE5ldyB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQgaXRlbSByZW1vdmVkLlxuICAgKi9cbiAgcmVtb3ZlKFxuICAgIGtleTogSyxcbiAgICBjb21wYXJhdG9yOiBDb21wYXJhdG9yPEs+XG4gICk6IExMUkJOb2RlPEssIFY+IHwgTExSQkVtcHR5Tm9kZTxLLCBWPiB7XG4gICAgbGV0IG4sIHNtYWxsZXN0O1xuICAgIG4gPSB0aGlzO1xuICAgIGlmIChjb21wYXJhdG9yKGtleSwgbi5rZXkpIDwgMCkge1xuICAgICAgaWYgKCFuLmxlZnQuaXNFbXB0eSgpICYmICFuLmxlZnQuaXNSZWRfKCkgJiYgIW4ubGVmdC5sZWZ0LmlzUmVkXygpKSB7XG4gICAgICAgIG4gPSBuLm1vdmVSZWRMZWZ0XygpO1xuICAgICAgfVxuICAgICAgbiA9IG4uY29weShudWxsLCBudWxsLCBudWxsLCBuLmxlZnQucmVtb3ZlKGtleSwgY29tcGFyYXRvciksIG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobi5sZWZ0LmlzUmVkXygpKSBuID0gbi5yb3RhdGVSaWdodF8oKTtcbiAgICAgIGlmICghbi5yaWdodC5pc0VtcHR5KCkgJiYgIW4ucmlnaHQuaXNSZWRfKCkgJiYgIW4ucmlnaHQubGVmdC5pc1JlZF8oKSkge1xuICAgICAgICBuID0gbi5tb3ZlUmVkUmlnaHRfKCk7XG4gICAgICB9XG4gICAgICBpZiAoY29tcGFyYXRvcihrZXksIG4ua2V5KSA9PT0gMCkge1xuICAgICAgICBpZiAobi5yaWdodC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICByZXR1cm4gU29ydGVkTWFwLkVNUFRZX05PREUgYXMgTExSQkVtcHR5Tm9kZTxLLCBWPjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzbWFsbGVzdCA9IChuLnJpZ2h0IGFzIExMUkJOb2RlPEssIFY+KS5taW5fKCk7XG4gICAgICAgICAgbiA9IG4uY29weShcbiAgICAgICAgICAgIHNtYWxsZXN0LmtleSxcbiAgICAgICAgICAgIHNtYWxsZXN0LnZhbHVlLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAobi5yaWdodCBhcyBMTFJCTm9kZTxLLCBWPikucmVtb3ZlTWluXygpXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbiA9IG4uY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCBuLnJpZ2h0LnJlbW92ZShrZXksIGNvbXBhcmF0b3IpKTtcbiAgICB9XG4gICAgcmV0dXJuIG4uZml4VXBfKCk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIGEgUkVEIG5vZGUuXG4gICAqL1xuICBpc1JlZF8oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29sb3I7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7IUxMUkJOb2RlfSBOZXcgdHJlZSBhZnRlciBwZXJmb3JtaW5nIGFueSBuZWVkZWQgcm90YXRpb25zLlxuICAgKi9cbiAgcHJpdmF0ZSBmaXhVcF8oKTogTExSQk5vZGU8SywgVj4ge1xuICAgIGxldCBuID0gdGhpcyBhcyBhbnk7XG4gICAgaWYgKG4ucmlnaHQuaXNSZWRfKCkgJiYgIW4ubGVmdC5pc1JlZF8oKSkgbiA9IG4ucm90YXRlTGVmdF8oKTtcbiAgICBpZiAobi5sZWZ0LmlzUmVkXygpICYmIG4ubGVmdC5sZWZ0LmlzUmVkXygpKSBuID0gbi5yb3RhdGVSaWdodF8oKTtcbiAgICBpZiAobi5sZWZ0LmlzUmVkXygpICYmIG4ucmlnaHQuaXNSZWRfKCkpIG4gPSBuLmNvbG9yRmxpcF8oKTtcbiAgICByZXR1cm4gbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJuIHshTExSQk5vZGV9IE5ldyB0cmVlLCBhZnRlciBtb3ZlUmVkTGVmdC5cbiAgICovXG4gIHByaXZhdGUgbW92ZVJlZExlZnRfKCk6IExMUkJOb2RlPEssIFY+IHtcbiAgICBsZXQgbiA9IHRoaXMuY29sb3JGbGlwXygpO1xuICAgIGlmIChuLnJpZ2h0LmxlZnQuaXNSZWRfKCkpIHtcbiAgICAgIG4gPSBuLmNvcHkoXG4gICAgICAgIG51bGwsXG4gICAgICAgIG51bGwsXG4gICAgICAgIG51bGwsXG4gICAgICAgIG51bGwsXG4gICAgICAgIChuLnJpZ2h0IGFzIExMUkJOb2RlPEssIFY+KS5yb3RhdGVSaWdodF8oKVxuICAgICAgKTtcbiAgICAgIG4gPSBuLnJvdGF0ZUxlZnRfKCk7XG4gICAgICBuID0gbi5jb2xvckZsaXBfKCk7XG4gICAgfVxuICAgIHJldHVybiBuO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4geyFMTFJCTm9kZX0gTmV3IHRyZWUsIGFmdGVyIG1vdmVSZWRSaWdodC5cbiAgICovXG4gIHByaXZhdGUgbW92ZVJlZFJpZ2h0XygpOiBMTFJCTm9kZTxLLCBWPiB7XG4gICAgbGV0IG4gPSB0aGlzLmNvbG9yRmxpcF8oKTtcbiAgICBpZiAobi5sZWZ0LmxlZnQuaXNSZWRfKCkpIHtcbiAgICAgIG4gPSBuLnJvdGF0ZVJpZ2h0XygpO1xuICAgICAgbiA9IG4uY29sb3JGbGlwXygpO1xuICAgIH1cbiAgICByZXR1cm4gbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJuIHshTExSQk5vZGV9IE5ldyB0cmVlLCBhZnRlciByb3RhdGVMZWZ0LlxuICAgKi9cbiAgcHJpdmF0ZSByb3RhdGVMZWZ0XygpOiBMTFJCTm9kZTxLLCBWPiB7XG4gICAgY29uc3QgbmwgPSB0aGlzLmNvcHkobnVsbCwgbnVsbCwgTExSQk5vZGUuUkVELCBudWxsLCB0aGlzLnJpZ2h0LmxlZnQpO1xuICAgIHJldHVybiB0aGlzLnJpZ2h0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgbmwsIG51bGwpIGFzIExMUkJOb2RlPEssIFY+O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4geyFMTFJCTm9kZX0gTmV3IHRyZWUsIGFmdGVyIHJvdGF0ZVJpZ2h0LlxuICAgKi9cbiAgcHJpdmF0ZSByb3RhdGVSaWdodF8oKTogTExSQk5vZGU8SywgVj4ge1xuICAgIGNvbnN0IG5yID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLlJFRCwgdGhpcy5sZWZ0LnJpZ2h0LCBudWxsKTtcbiAgICByZXR1cm4gdGhpcy5sZWZ0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgbnVsbCwgbnIpIGFzIExMUkJOb2RlPEssIFY+O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4geyFMTFJCTm9kZX0gTmV3IHRyZWUsIGFmdGVyIGNvbG9yRmxpcC5cbiAgICovXG4gIHByaXZhdGUgY29sb3JGbGlwXygpOiBMTFJCTm9kZTxLLCBWPiB7XG4gICAgY29uc3QgbGVmdCA9IHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsICF0aGlzLmxlZnQuY29sb3IsIG51bGwsIG51bGwpO1xuICAgIGNvbnN0IHJpZ2h0ID0gdGhpcy5yaWdodC5jb3B5KG51bGwsIG51bGwsICF0aGlzLnJpZ2h0LmNvbG9yLCBudWxsLCBudWxsKTtcbiAgICByZXR1cm4gdGhpcy5jb3B5KG51bGwsIG51bGwsICF0aGlzLmNvbG9yLCBsZWZ0LCByaWdodCk7XG4gIH1cblxuICAvKipcbiAgICogRm9yIHRlc3RpbmcuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYWxsIGlzIHdlbGwuXG4gICAqL1xuICBwcml2YXRlIGNoZWNrTWF4RGVwdGhfKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGJsYWNrRGVwdGggPSB0aGlzLmNoZWNrXygpO1xuICAgIHJldHVybiBNYXRoLnBvdygyLjAsIGJsYWNrRGVwdGgpIDw9IHRoaXMuY291bnQoKSArIDE7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7bnVtYmVyfSBOb3Qgc3VyZSB3aGF0IHRoaXMgcmV0dXJucyBleGFjdGx5LiA6LSkuXG4gICAqL1xuICBjaGVja18oKTogbnVtYmVyIHtcbiAgICBsZXQgYmxhY2tEZXB0aDtcbiAgICBpZiAodGhpcy5pc1JlZF8oKSAmJiB0aGlzLmxlZnQuaXNSZWRfKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1JlZCBub2RlIGhhcyByZWQgY2hpbGQoJyArIHRoaXMua2V5ICsgJywnICsgdGhpcy52YWx1ZSArICcpJ1xuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHRoaXMucmlnaHQuaXNSZWRfKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1JpZ2h0IGNoaWxkIG9mICgnICsgdGhpcy5rZXkgKyAnLCcgKyB0aGlzLnZhbHVlICsgJykgaXMgcmVkJ1xuICAgICAgKTtcbiAgICB9XG4gICAgYmxhY2tEZXB0aCA9IHRoaXMubGVmdC5jaGVja18oKTtcbiAgICBpZiAoYmxhY2tEZXB0aCAhPT0gdGhpcy5yaWdodC5jaGVja18oKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdCbGFjayBkZXB0aHMgZGlmZmVyJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBibGFja0RlcHRoICsgKHRoaXMuaXNSZWRfKCkgPyAwIDogMSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhbiBlbXB0eSBub2RlIChhIGxlYWYgbm9kZSBpbiB0aGUgUmVkLUJsYWNrIFRyZWUpLlxuICovXG5leHBvcnQgY2xhc3MgTExSQkVtcHR5Tm9kZTxLLCBWPiB7XG4gIGtleTogSztcbiAgdmFsdWU6IFY7XG4gIGxlZnQ6IExMUkJOb2RlPEssIFY+IHwgTExSQkVtcHR5Tm9kZTxLLCBWPjtcbiAgcmlnaHQ6IExMUkJOb2RlPEssIFY+IHwgTExSQkVtcHR5Tm9kZTxLLCBWPjtcbiAgY29sb3I6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUuXG4gICAqXG4gICAqIEByZXR1cm4geyFMTFJCRW1wdHlOb2RlfSBUaGUgbm9kZSBjb3B5LlxuICAgKi9cbiAgY29weShcbiAgICBrZXk6IEsgfCBudWxsLFxuICAgIHZhbHVlOiBWIHwgbnVsbCxcbiAgICBjb2xvcjogYm9vbGVhbiB8IG51bGwsXG4gICAgbGVmdDogTExSQk5vZGU8SywgVj4gfCBMTFJCRW1wdHlOb2RlPEssIFY+IHwgbnVsbCxcbiAgICByaWdodDogTExSQk5vZGU8SywgVj4gfCBMTFJCRW1wdHlOb2RlPEssIFY+IHwgbnVsbFxuICApOiBMTFJCRW1wdHlOb2RlPEssIFY+IHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZC5cbiAgICpcbiAgICogQHBhcmFtIHshS30ga2V5IEtleSB0byBiZSBhZGRlZC5cbiAgICogQHBhcmFtIHshVn0gdmFsdWUgVmFsdWUgdG8gYmUgYWRkZWQuXG4gICAqIEBwYXJhbSB7Q29tcGFyYXRvcn0gY29tcGFyYXRvciBDb21wYXJhdG9yLlxuICAgKiBAcmV0dXJuIHshTExSQk5vZGV9IE5ldyB0cmVlLCB3aXRoIGl0ZW0gYWRkZWQuXG4gICAqL1xuICBpbnNlcnQoa2V5OiBLLCB2YWx1ZTogViwgY29tcGFyYXRvcjogQ29tcGFyYXRvcjxLPik6IExMUkJOb2RlPEssIFY+IHtcbiAgICByZXR1cm4gbmV3IExMUkJOb2RlKGtleSwgdmFsdWUsIG51bGwpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7IUt9IGtleSBUaGUga2V5IHRvIHJlbW92ZS5cbiAgICogQHBhcmFtIHtDb21wYXJhdG9yfSBjb21wYXJhdG9yIENvbXBhcmF0b3IuXG4gICAqIEByZXR1cm4geyFMTFJCRW1wdHlOb2RlfSBOZXcgdHJlZSwgd2l0aCBpdGVtIHJlbW92ZWQuXG4gICAqL1xuICByZW1vdmUoa2V5OiBLLCBjb21wYXJhdG9yOiBDb21wYXJhdG9yPEs+KTogTExSQkVtcHR5Tm9kZTxLLCBWPiB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgdG90YWwgbnVtYmVyIG9mIG5vZGVzIGluIHRoZSB0cmVlLlxuICAgKi9cbiAgY291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSB0cmVlIGlzIGVtcHR5LlxuICAgKi9cbiAgaXNFbXB0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgKiBmb3IgZWFjaCBub2RlLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFLLCAhVik6Kn0gYWN0aW9uIENhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBmb3IgZWFjaFxuICAgKiBub2RlLiAgSWYgaXQgcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0cmF2ZXJzYWwgd2FzIGFib3J0ZWQuXG4gICAqL1xuICBpbm9yZGVyVHJhdmVyc2FsKGFjdGlvbjogKGs6IEssIHY6IFYpID0+IGFueSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAqIGZvciBlYWNoIG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUssICFWKX0gYWN0aW9uIENhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBmb3IgZWFjaFxuICAgKiBub2RlLiAgSWYgaXQgcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0cmF2ZXJzYWwgd2FzIGFib3J0ZWQuXG4gICAqL1xuICByZXZlcnNlVHJhdmVyc2FsKGFjdGlvbjogKGs6IEssIHY6IFYpID0+IHZvaWQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7bnVsbH1cbiAgICovXG4gIG1pbktleSgpOiBudWxsIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudWxsfVxuICAgKi9cbiAgbWF4S2V5KCk6IG51bGwge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge251bWJlcn0gTm90IHN1cmUgd2hhdCB0aGlzIHJldHVybnMgZXhhY3RseS4gOi0pLlxuICAgKi9cbiAgY2hlY2tfKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIG5vZGUgaXMgcmVkLlxuICAgKi9cbiAgaXNSZWRfKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIEFuIGltbXV0YWJsZSBzb3J0ZWQgbWFwIGltcGxlbWVudGF0aW9uLCBiYXNlZCBvbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2tcbiAqIHRyZWUuXG4gKi9cbmV4cG9ydCBjbGFzcyBTb3J0ZWRNYXA8SywgVj4ge1xuICAvKipcbiAgICogQWx3YXlzIHVzZSB0aGUgc2FtZSBlbXB0eSBub2RlLCB0byByZWR1Y2UgbWVtb3J5LlxuICAgKiBAY29uc3RcbiAgICovXG4gIHN0YXRpYyBFTVBUWV9OT0RFID0gbmV3IExMUkJFbXB0eU5vZGUoKTtcblxuICAvKipcbiAgICogQHRlbXBsYXRlIEssIFZcbiAgICogQHBhcmFtIHtmdW5jdGlvbihLLCBLKTpudW1iZXJ9IGNvbXBhcmF0b3JfIEtleSBjb21wYXJhdG9yLlxuICAgKiBAcGFyYW0ge0xMUkJOb2RlPX0gcm9vdF8gKE9wdGlvbmFsKSBSb290IG5vZGUgZm9yIHRoZSBtYXAuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGNvbXBhcmF0b3JfOiBDb21wYXJhdG9yPEs+LFxuICAgIHByaXZhdGUgcm9vdF86XG4gICAgICB8IExMUkJOb2RlPEssIFY+XG4gICAgICB8IExMUkJFbXB0eU5vZGU8SywgVj4gPSBTb3J0ZWRNYXAuRU1QVFlfTk9ERSBhcyBMTFJCRW1wdHlOb2RlPEssIFY+XG4gICkge31cblxuICAvKipcbiAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZCBvciByZXBsYWNlZC5cbiAgICogKFRPRE86IFdlIHNob3VsZCBwZXJoYXBzIHJlbmFtZSB0aGlzIG1ldGhvZCB0byAncHV0JylcbiAgICpcbiAgICogQHBhcmFtIHshS30ga2V5IEtleSB0byBiZSBhZGRlZC5cbiAgICogQHBhcmFtIHshVn0gdmFsdWUgVmFsdWUgdG8gYmUgYWRkZWQuXG4gICAqIEByZXR1cm4geyFTb3J0ZWRNYXAuPEssIFY+fSBOZXcgbWFwLCB3aXRoIGl0ZW0gYWRkZWQuXG4gICAqL1xuICBpbnNlcnQoa2V5OiBLLCB2YWx1ZTogVik6IFNvcnRlZE1hcDxLLCBWPiB7XG4gICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXAoXG4gICAgICB0aGlzLmNvbXBhcmF0b3JfLFxuICAgICAgdGhpcy5yb290X1xuICAgICAgICAuaW5zZXJ0KGtleSwgdmFsdWUsIHRoaXMuY29tcGFyYXRvcl8pXG4gICAgICAgIC5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLkJMQUNLLCBudWxsLCBudWxsKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSByZW1vdmVkLlxuICAgKlxuICAgKiBAcGFyYW0geyFLfSBrZXkgVGhlIGtleSB0byByZW1vdmUuXG4gICAqIEByZXR1cm4geyFTb3J0ZWRNYXAuPEssIFY+fSBOZXcgbWFwLCB3aXRoIGl0ZW0gcmVtb3ZlZC5cbiAgICovXG4gIHJlbW92ZShrZXk6IEspOiBTb3J0ZWRNYXA8SywgVj4ge1xuICAgIHJldHVybiBuZXcgU29ydGVkTWFwKFxuICAgICAgdGhpcy5jb21wYXJhdG9yXyxcbiAgICAgIHRoaXMucm9vdF9cbiAgICAgICAgLnJlbW92ZShrZXksIHRoaXMuY29tcGFyYXRvcl8pXG4gICAgICAgIC5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLkJMQUNLLCBudWxsLCBudWxsKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIG5vZGUgd2l0aCB0aGUgZ2l2ZW4ga2V5LCBvciBudWxsLlxuICAgKlxuICAgKiBAcGFyYW0geyFLfSBrZXkgVGhlIGtleSB0byBsb29rIHVwLlxuICAgKiBAcmV0dXJuIHs/Vn0gVGhlIHZhbHVlIG9mIHRoZSBub2RlIHdpdGggdGhlIGdpdmVuIGtleSwgb3IgbnVsbCBpZiB0aGVcbiAgICoga2V5IGRvZXNuJ3QgZXhpc3QuXG4gICAqL1xuICBnZXQoa2V5OiBLKTogViB8IG51bGwge1xuICAgIGxldCBjbXA7XG4gICAgbGV0IG5vZGUgPSB0aGlzLnJvb3RfO1xuICAgIHdoaWxlICghbm9kZS5pc0VtcHR5KCkpIHtcbiAgICAgIGNtcCA9IHRoaXMuY29tcGFyYXRvcl8oa2V5LCBub2RlLmtleSk7XG4gICAgICBpZiAoY21wID09PSAwKSB7XG4gICAgICAgIHJldHVybiBub2RlLnZhbHVlO1xuICAgICAgfSBlbHNlIGlmIChjbXAgPCAwKSB7XG4gICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7XG4gICAgICB9IGVsc2UgaWYgKGNtcCA+IDApIHtcbiAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGtleSBvZiB0aGUgaXRlbSAqYmVmb3JlKiB0aGUgc3BlY2lmaWVkIGtleSwgb3IgbnVsbCBpZiBrZXkgaXMgdGhlIGZpcnN0IGl0ZW0uXG4gICAqIEBwYXJhbSB7S30ga2V5IFRoZSBrZXkgdG8gZmluZCB0aGUgcHJlZGVjZXNzb3Igb2ZcbiAgICogQHJldHVybiB7P0t9IFRoZSBwcmVkZWNlc3NvciBrZXkuXG4gICAqL1xuICBnZXRQcmVkZWNlc3NvcktleShrZXk6IEspOiBLIHwgbnVsbCB7XG4gICAgbGV0IGNtcCxcbiAgICAgIG5vZGUgPSB0aGlzLnJvb3RfLFxuICAgICAgcmlnaHRQYXJlbnQgPSBudWxsO1xuICAgIHdoaWxlICghbm9kZS5pc0VtcHR5KCkpIHtcbiAgICAgIGNtcCA9IHRoaXMuY29tcGFyYXRvcl8oa2V5LCBub2RlLmtleSk7XG4gICAgICBpZiAoY21wID09PSAwKSB7XG4gICAgICAgIGlmICghbm9kZS5sZWZ0LmlzRW1wdHkoKSkge1xuICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7XG4gICAgICAgICAgd2hpbGUgKCFub2RlLnJpZ2h0LmlzRW1wdHkoKSkgbm9kZSA9IG5vZGUucmlnaHQ7XG4gICAgICAgICAgcmV0dXJuIG5vZGUua2V5O1xuICAgICAgICB9IGVsc2UgaWYgKHJpZ2h0UGFyZW50KSB7XG4gICAgICAgICAgcmV0dXJuIHJpZ2h0UGFyZW50LmtleTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gZmlyc3QgaXRlbS5cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjbXAgPCAwKSB7XG4gICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7XG4gICAgICB9IGVsc2UgaWYgKGNtcCA+IDApIHtcbiAgICAgICAgcmlnaHRQYXJlbnQgPSBub2RlO1xuICAgICAgICBub2RlID0gbm9kZS5yaWdodDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnQXR0ZW1wdGVkIHRvIGZpbmQgcHJlZGVjZXNzb3Iga2V5IGZvciBhIG5vbmV4aXN0ZW50IGtleS4gIFdoYXQgZ2l2ZXM/J1xuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgbWFwIGlzIGVtcHR5LlxuICAgKi9cbiAgaXNFbXB0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5yb290Xy5pc0VtcHR5KCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgdG90YWwgbnVtYmVyIG9mIG5vZGVzIGluIHRoZSBtYXAuXG4gICAqL1xuICBjb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnJvb3RfLmNvdW50KCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P0t9IFRoZSBtaW5pbXVtIGtleSBpbiB0aGUgbWFwLlxuICAgKi9cbiAgbWluS2V5KCk6IEsgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5yb290Xy5taW5LZXkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/S30gVGhlIG1heGltdW0ga2V5IGluIHRoZSBtYXAuXG4gICAqL1xuICBtYXhLZXkoKTogSyB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLnJvb3RfLm1heEtleSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYXZlcnNlcyB0aGUgbWFwIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICogZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUssICFWKToqfSBhY3Rpb24gQ2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkXG4gICAqIGZvciBlYWNoIGtleS92YWx1ZSBwYWlyLiAgSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAqIEByZXR1cm4geyp9IFRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICogICB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb25cbiAgICovXG4gIGlub3JkZXJUcmF2ZXJzYWwoYWN0aW9uOiAoazogSywgdjogVikgPT4gYW55KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMucm9vdF8uaW5vcmRlclRyYXZlcnNhbChhY3Rpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYXZlcnNlcyB0aGUgbWFwIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgKiBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci5cbiAgICpcbiAgICogQHBhcmFtIHtmdW5jdGlvbighT2JqZWN0LCAhT2JqZWN0KX0gYWN0aW9uIENhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZFxuICAgKiBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgKiBAcmV0dXJuIHsqfSBUcnVlIGlmIHRoZSB0cmF2ZXJzYWwgd2FzIGFib3J0ZWQuXG4gICAqL1xuICByZXZlcnNlVHJhdmVyc2FsKGFjdGlvbjogKGs6IEssIHY6IFYpID0+IHZvaWQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5yb290Xy5yZXZlcnNlVHJhdmVyc2FsKGFjdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBpdGVyYXRvciBvdmVyIHRoZSBTb3J0ZWRNYXAuXG4gICAqIEB0ZW1wbGF0ZSBUXG4gICAqIEBwYXJhbSB7KGZ1bmN0aW9uKEssIFYpOlQpPX0gcmVzdWx0R2VuZXJhdG9yXG4gICAqIEByZXR1cm4ge1NvcnRlZE1hcEl0ZXJhdG9yLjxLLCBWLCBUPn0gVGhlIGl0ZXJhdG9yLlxuICAgKi9cbiAgZ2V0SXRlcmF0b3I8VD4oXG4gICAgcmVzdWx0R2VuZXJhdG9yPzogKGs6IEssIHY6IFYpID0+IFRcbiAgKTogU29ydGVkTWFwSXRlcmF0b3I8SywgViwgVD4ge1xuICAgIHJldHVybiBuZXcgU29ydGVkTWFwSXRlcmF0b3IoXG4gICAgICB0aGlzLnJvb3RfLFxuICAgICAgbnVsbCxcbiAgICAgIHRoaXMuY29tcGFyYXRvcl8sXG4gICAgICBmYWxzZSxcbiAgICAgIHJlc3VsdEdlbmVyYXRvclxuICAgICk7XG4gIH1cblxuICBnZXRJdGVyYXRvckZyb208VD4oXG4gICAga2V5OiBLLFxuICAgIHJlc3VsdEdlbmVyYXRvcj86IChrOiBLLCB2OiBWKSA9PiBUXG4gICk6IFNvcnRlZE1hcEl0ZXJhdG9yPEssIFYsIFQ+IHtcbiAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKFxuICAgICAgdGhpcy5yb290XyxcbiAgICAgIGtleSxcbiAgICAgIHRoaXMuY29tcGFyYXRvcl8sXG4gICAgICBmYWxzZSxcbiAgICAgIHJlc3VsdEdlbmVyYXRvclxuICAgICk7XG4gIH1cblxuICBnZXRSZXZlcnNlSXRlcmF0b3JGcm9tPFQ+KFxuICAgIGtleTogSyxcbiAgICByZXN1bHRHZW5lcmF0b3I/OiAoazogSywgdjogVikgPT4gVFxuICApOiBTb3J0ZWRNYXBJdGVyYXRvcjxLLCBWLCBUPiB7XG4gICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXBJdGVyYXRvcihcbiAgICAgIHRoaXMucm9vdF8sXG4gICAgICBrZXksXG4gICAgICB0aGlzLmNvbXBhcmF0b3JfLFxuICAgICAgdHJ1ZSxcbiAgICAgIHJlc3VsdEdlbmVyYXRvclxuICAgICk7XG4gIH1cblxuICBnZXRSZXZlcnNlSXRlcmF0b3I8VD4oXG4gICAgcmVzdWx0R2VuZXJhdG9yPzogKGs6IEssIHY6IFYpID0+IFRcbiAgKTogU29ydGVkTWFwSXRlcmF0b3I8SywgViwgVD4ge1xuICAgIHJldHVybiBuZXcgU29ydGVkTWFwSXRlcmF0b3IoXG4gICAgICB0aGlzLnJvb3RfLFxuICAgICAgbnVsbCxcbiAgICAgIHRoaXMuY29tcGFyYXRvcl8sXG4gICAgICB0cnVlLFxuICAgICAgcmVzdWx0R2VuZXJhdG9yXG4gICAgKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4vUGF0aCc7XG5pbXBvcnQgeyBmb3JFYWNoLCBjb250YWlucywgc2FmZUdldCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuLyoqXG4gKiBOb2RlIGluIGEgVHJlZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFRyZWVOb2RlPFQ+IHtcbiAgLy8gVE9ETzogQ29uc2lkZXIgbWFraW5nIGFjY2Vzc29ycyB0aGF0IGNyZWF0ZSBjaGlsZHJlbiBhbmQgdmFsdWUgbGF6aWx5IG9yXG4gIC8vIHNlcGFyYXRlIEludGVybmFsIC8gTGVhZiAndHlwZXMnLlxuICBjaGlsZHJlbjogeyBbbmFtZTogc3RyaW5nXTogVHJlZU5vZGU8VD4gfSA9IHt9O1xuICBjaGlsZENvdW50ID0gMDtcbiAgdmFsdWU6IFQgfCBudWxsID0gbnVsbDtcbn1cblxuLyoqXG4gKiBBIGxpZ2h0LXdlaWdodCB0cmVlLCB0cmF2ZXJzYWJsZSBieSBwYXRoLiAgTm9kZXMgY2FuIGhhdmUgYm90aCB2YWx1ZXMgYW5kIGNoaWxkcmVuLlxuICogTm9kZXMgYXJlIG5vdCBlbnVtZXJhdGVkIChieSBmb3JFYWNoQ2hpbGQpIHVubGVzcyB0aGV5IGhhdmUgYSB2YWx1ZSBvciBub24tZW1wdHlcbiAqIGNoaWxkcmVuLlxuICovXG5leHBvcnQgY2xhc3MgVHJlZTxUPiB7XG4gIC8qKlxuICAgKiBAdGVtcGxhdGUgVFxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWVfIE9wdGlvbmFsIG5hbWUgb2YgdGhlIG5vZGUuXG4gICAqIEBwYXJhbSB7VHJlZT19IHBhcmVudF8gT3B0aW9uYWwgcGFyZW50IG5vZGUuXG4gICAqIEBwYXJhbSB7VHJlZU5vZGU9fSBub2RlXyBPcHRpb25hbCBub2RlIHRvIHdyYXAuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIG5hbWVfOiBzdHJpbmcgPSAnJyxcbiAgICBwcml2YXRlIHBhcmVudF86IFRyZWU8VD4gfCBudWxsID0gbnVsbCxcbiAgICBwcml2YXRlIG5vZGVfOiBUcmVlTm9kZTxUPiA9IG5ldyBUcmVlTm9kZTxUPigpXG4gICkge31cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN1Yi1UcmVlIGZvciB0aGUgZ2l2ZW4gcGF0aC5cbiAgICpcbiAgICogQHBhcmFtIHshKHN0cmluZ3xQYXRoKX0gcGF0aE9iaiBQYXRoIHRvIGxvb2sgdXAuXG4gICAqIEByZXR1cm4geyFUcmVlLjxUPn0gVHJlZSBmb3IgcGF0aC5cbiAgICovXG4gIHN1YlRyZWUocGF0aE9iajogc3RyaW5nIHwgUGF0aCk6IFRyZWU8VD4ge1xuICAgIC8vIFRPRE86IFJlcXVpcmUgcGF0aE9iaiB0byBiZSBQYXRoP1xuICAgIGxldCBwYXRoID0gcGF0aE9iaiBpbnN0YW5jZW9mIFBhdGggPyBwYXRoT2JqIDogbmV3IFBhdGgocGF0aE9iaik7XG4gICAgbGV0IGNoaWxkID0gdGhpcyBhcyBhbnksXG4gICAgICBuZXh0O1xuICAgIHdoaWxlICgobmV4dCA9IHBhdGguZ2V0RnJvbnQoKSkgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGNoaWxkTm9kZSA9IHNhZmVHZXQoY2hpbGQubm9kZV8uY2hpbGRyZW4sIG5leHQpIHx8IG5ldyBUcmVlTm9kZSgpO1xuICAgICAgY2hpbGQgPSBuZXcgVHJlZShuZXh0LCBjaGlsZCwgY2hpbGROb2RlKTtcbiAgICAgIHBhdGggPSBwYXRoLnBvcEZyb250KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoaWxkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoaXMgdHJlZSBub2RlLlxuICAgKlxuICAgKiBAcmV0dXJuIHs/VH0gVGhlIGRhdGEgb3IgbnVsbCBpZiBubyBkYXRhIGV4aXN0cy5cbiAgICovXG4gIGdldFZhbHVlKCk6IFQgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5ub2RlXy52YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGRhdGEgdG8gdGhpcyB0cmVlIG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7IVR9IHZhbHVlIFZhbHVlIHRvIHNldC5cbiAgICovXG4gIHNldFZhbHVlKHZhbHVlOiBUKSB7XG4gICAgYXNzZXJ0KHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcsICdDYW5ub3Qgc2V0IHZhbHVlIHRvIHVuZGVmaW5lZCcpO1xuICAgIHRoaXMubm9kZV8udmFsdWUgPSB2YWx1ZTtcbiAgICB0aGlzLnVwZGF0ZVBhcmVudHNfKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIHRoZSBjb250ZW50cyBvZiB0aGUgdHJlZSBub2RlIChpdHMgdmFsdWUgYW5kIGFsbCBjaGlsZHJlbikuXG4gICAqL1xuICBjbGVhcigpIHtcbiAgICB0aGlzLm5vZGVfLnZhbHVlID0gbnVsbDtcbiAgICB0aGlzLm5vZGVfLmNoaWxkcmVuID0ge307XG4gICAgdGhpcy5ub2RlXy5jaGlsZENvdW50ID0gMDtcbiAgICB0aGlzLnVwZGF0ZVBhcmVudHNfKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgdHJlZSBoYXMgYW55IGNoaWxkcmVuLlxuICAgKi9cbiAgaGFzQ2hpbGRyZW4oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubm9kZV8uY2hpbGRDb3VudCA+IDA7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgdHJlZSBpcyBlbXB0eSAobm8gdmFsdWUgb3IgY2hpbGRyZW4pLlxuICAgKi9cbiAgaXNFbXB0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5nZXRWYWx1ZSgpID09PSBudWxsICYmICF0aGlzLmhhc0NoaWxkcmVuKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbHMgYWN0aW9uIGZvciBlYWNoIGNoaWxkIG9mIHRoaXMgdHJlZSBub2RlLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFUcmVlLjxUPil9IGFjdGlvbiBBY3Rpb24gdG8gYmUgY2FsbGVkIGZvciBlYWNoIGNoaWxkLlxuICAgKi9cbiAgZm9yRWFjaENoaWxkKGFjdGlvbjogKHRyZWU6IFRyZWU8VD4pID0+IHZvaWQpIHtcbiAgICBmb3JFYWNoKHRoaXMubm9kZV8uY2hpbGRyZW4sIChjaGlsZDogc3RyaW5nLCBjaGlsZFRyZWU6IFRyZWVOb2RlPFQ+KSA9PiB7XG4gICAgICBhY3Rpb24obmV3IFRyZWU8VD4oY2hpbGQsIHRoaXMsIGNoaWxkVHJlZSkpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERvZXMgYSBkZXB0aC1maXJzdCB0cmF2ZXJzYWwgb2YgdGhpcyBub2RlJ3MgZGVzY2VuZGFudHMsIGNhbGxpbmcgYWN0aW9uIGZvciBlYWNoIG9uZS5cbiAgICpcbiAgICogQHBhcmFtIHtmdW5jdGlvbighVHJlZS48VD4pfSBhY3Rpb24gQWN0aW9uIHRvIGJlIGNhbGxlZCBmb3IgZWFjaCBjaGlsZC5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gaW5jbHVkZVNlbGYgV2hldGhlciB0byBjYWxsIGFjdGlvbiBvbiB0aGlzIG5vZGUgYXMgd2VsbC4gRGVmYXVsdHMgdG9cbiAgICogICBmYWxzZS5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gY2hpbGRyZW5GaXJzdCBXaGV0aGVyIHRvIGNhbGwgYWN0aW9uIG9uIGNoaWxkcmVuIGJlZm9yZSBjYWxsaW5nIGl0IG9uXG4gICAqICAgcGFyZW50LlxuICAgKi9cbiAgZm9yRWFjaERlc2NlbmRhbnQoXG4gICAgYWN0aW9uOiAodHJlZTogVHJlZTxUPikgPT4gdm9pZCxcbiAgICBpbmNsdWRlU2VsZj86IGJvb2xlYW4sXG4gICAgY2hpbGRyZW5GaXJzdD86IGJvb2xlYW5cbiAgKSB7XG4gICAgaWYgKGluY2x1ZGVTZWxmICYmICFjaGlsZHJlbkZpcnN0KSBhY3Rpb24odGhpcyk7XG5cbiAgICB0aGlzLmZvckVhY2hDaGlsZChmdW5jdGlvbihjaGlsZCkge1xuICAgICAgY2hpbGQuZm9yRWFjaERlc2NlbmRhbnQoYWN0aW9uLCAvKmluY2x1ZGVTZWxmPSovIHRydWUsIGNoaWxkcmVuRmlyc3QpO1xuICAgIH0pO1xuXG4gICAgaWYgKGluY2x1ZGVTZWxmICYmIGNoaWxkcmVuRmlyc3QpIGFjdGlvbih0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxscyBhY3Rpb24gb24gZWFjaCBhbmNlc3RvciBub2RlLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFUcmVlLjxUPil9IGFjdGlvbiBBY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGVhY2ggcGFyZW50OyByZXR1cm5cbiAgICogICB0cnVlIHRvIGFib3J0LlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBpbmNsdWRlU2VsZiBXaGV0aGVyIHRvIGNhbGwgYWN0aW9uIG9uIHRoaXMgbm9kZSBhcyB3ZWxsLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSBhY3Rpb24gY2FsbGJhY2sgcmV0dXJuZWQgdHJ1ZS5cbiAgICovXG4gIGZvckVhY2hBbmNlc3RvcihcbiAgICBhY3Rpb246ICh0cmVlOiBUcmVlPFQ+KSA9PiB2b2lkLFxuICAgIGluY2x1ZGVTZWxmPzogYm9vbGVhblxuICApOiBib29sZWFuIHtcbiAgICBsZXQgbm9kZSA9IGluY2x1ZGVTZWxmID8gdGhpcyA6IHRoaXMucGFyZW50KCk7XG4gICAgd2hpbGUgKG5vZGUgIT09IG51bGwpIHtcbiAgICAgIGlmIChhY3Rpb24obm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBub2RlID0gbm9kZS5wYXJlbnQoKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIERvZXMgYSBkZXB0aC1maXJzdCB0cmF2ZXJzYWwgb2YgdGhpcyBub2RlJ3MgZGVzY2VuZGFudHMuICBXaGVuIGEgZGVzY2VuZGFudCB3aXRoIGEgdmFsdWVcbiAgICogaXMgZm91bmQsIGFjdGlvbiBpcyBjYWxsZWQgb24gaXQgYW5kIHRyYXZlcnNhbCBkb2VzIG5vdCBjb250aW51ZSBpbnNpZGUgdGhlIG5vZGUuXG4gICAqIEFjdGlvbiBpcyAqbm90KiBjYWxsZWQgb24gdGhpcyBub2RlLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFUcmVlLjxUPil9IGFjdGlvbiBBY3Rpb24gdG8gYmUgY2FsbGVkIGZvciBlYWNoIGNoaWxkLlxuICAgKi9cbiAgZm9yRWFjaEltbWVkaWF0ZURlc2NlbmRhbnRXaXRoVmFsdWUoYWN0aW9uOiAodHJlZTogVHJlZTxUPikgPT4gdm9pZCkge1xuICAgIHRoaXMuZm9yRWFjaENoaWxkKGZ1bmN0aW9uKGNoaWxkKSB7XG4gICAgICBpZiAoY2hpbGQuZ2V0VmFsdWUoKSAhPT0gbnVsbCkgYWN0aW9uKGNoaWxkKTtcbiAgICAgIGVsc2UgY2hpbGQuZm9yRWFjaEltbWVkaWF0ZURlc2NlbmRhbnRXaXRoVmFsdWUoYWN0aW9uKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUGF0aH0gVGhlIHBhdGggb2YgdGhpcyB0cmVlIG5vZGUsIGFzIGEgUGF0aC5cbiAgICovXG4gIHBhdGgoKTogUGF0aCB7XG4gICAgcmV0dXJuIG5ldyBQYXRoKFxuICAgICAgdGhpcy5wYXJlbnRfID09PSBudWxsXG4gICAgICAgID8gdGhpcy5uYW1lX1xuICAgICAgICA6IHRoaXMucGFyZW50Xy5wYXRoKCkgKyAnLycgKyB0aGlzLm5hbWVfXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBuYW1lIG9mIHRoZSB0cmVlIG5vZGUuXG4gICAqL1xuICBuYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMubmFtZV87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P1RyZWV9IFRoZSBwYXJlbnQgdHJlZSBub2RlLCBvciBudWxsIGlmIHRoaXMgaXMgdGhlIHJvb3Qgb2YgdGhlIHRyZWUuXG4gICAqL1xuICBwYXJlbnQoKTogVHJlZTxUPiB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLnBhcmVudF87XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBvciByZW1vdmVzIHRoaXMgY2hpbGQgZnJvbSBpdHMgcGFyZW50IGJhc2VkIG9uIHdoZXRoZXIgaXQncyBlbXB0eSBvciBub3QuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZVBhcmVudHNfKCkge1xuICAgIGlmICh0aGlzLnBhcmVudF8gIT09IG51bGwpIHRoaXMucGFyZW50Xy51cGRhdGVDaGlsZF8odGhpcy5uYW1lXywgdGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBvciByZW1vdmVzIHRoZSBwYXNzZWQgY2hpbGQgdG8gdGhpcyB0cmVlIG5vZGUsIGRlcGVuZGluZyBvbiB3aGV0aGVyIGl0J3MgZW1wdHkuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjaGlsZE5hbWUgVGhlIG5hbWUgb2YgdGhlIGNoaWxkIHRvIHVwZGF0ZS5cbiAgICogQHBhcmFtIHshVHJlZS48VD59IGNoaWxkIFRoZSBjaGlsZCB0byB1cGRhdGUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZUNoaWxkXyhjaGlsZE5hbWU6IHN0cmluZywgY2hpbGQ6IFRyZWU8VD4pIHtcbiAgICBjb25zdCBjaGlsZEVtcHR5ID0gY2hpbGQuaXNFbXB0eSgpO1xuICAgIGNvbnN0IGNoaWxkRXhpc3RzID0gY29udGFpbnModGhpcy5ub2RlXy5jaGlsZHJlbiwgY2hpbGROYW1lKTtcbiAgICBpZiAoY2hpbGRFbXB0eSAmJiBjaGlsZEV4aXN0cykge1xuICAgICAgZGVsZXRlIHRoaXMubm9kZV8uY2hpbGRyZW5bY2hpbGROYW1lXTtcbiAgICAgIHRoaXMubm9kZV8uY2hpbGRDb3VudC0tO1xuICAgICAgdGhpcy51cGRhdGVQYXJlbnRzXygpO1xuICAgIH0gZWxzZSBpZiAoIWNoaWxkRW1wdHkgJiYgIWNoaWxkRXhpc3RzKSB7XG4gICAgICB0aGlzLm5vZGVfLmNoaWxkcmVuW2NoaWxkTmFtZV0gPSBjaGlsZC5ub2RlXztcbiAgICAgIHRoaXMubm9kZV8uY2hpbGRDb3VudCsrO1xuICAgICAgdGhpcy51cGRhdGVQYXJlbnRzXygpO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnLi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG5kZWNsYXJlIGNvbnN0IGRvY3VtZW50OiBhbnk7XG5cbi8qKlxuICogQGV4dGVuZHMge0V2ZW50RW1pdHRlcn1cbiAqL1xuZXhwb3J0IGNsYXNzIFZpc2liaWxpdHlNb25pdG9yIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgcHJpdmF0ZSB2aXNpYmxlXzogYm9vbGVhbjtcblxuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XG4gICAgcmV0dXJuIG5ldyBWaXNpYmlsaXR5TW9uaXRvcigpO1xuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoWyd2aXNpYmxlJ10pO1xuICAgIGxldCBoaWRkZW46IHN0cmluZztcbiAgICBsZXQgdmlzaWJpbGl0eUNoYW5nZTogc3RyaW5nO1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudFsnaGlkZGVuJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIE9wZXJhIDEyLjEwIGFuZCBGaXJlZm94IDE4IGFuZCBsYXRlciBzdXBwb3J0XG4gICAgICAgIHZpc2liaWxpdHlDaGFuZ2UgPSAndmlzaWJpbGl0eWNoYW5nZSc7XG4gICAgICAgIGhpZGRlbiA9ICdoaWRkZW4nO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZG9jdW1lbnRbJ21vekhpZGRlbiddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB2aXNpYmlsaXR5Q2hhbmdlID0gJ21venZpc2liaWxpdHljaGFuZ2UnO1xuICAgICAgICBoaWRkZW4gPSAnbW96SGlkZGVuJztcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50Wydtc0hpZGRlbiddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB2aXNpYmlsaXR5Q2hhbmdlID0gJ21zdmlzaWJpbGl0eWNoYW5nZSc7XG4gICAgICAgIGhpZGRlbiA9ICdtc0hpZGRlbic7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkb2N1bWVudFsnd2Via2l0SGlkZGVuJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZpc2liaWxpdHlDaGFuZ2UgPSAnd2Via2l0dmlzaWJpbGl0eWNoYW5nZSc7XG4gICAgICAgIGhpZGRlbiA9ICd3ZWJraXRIaWRkZW4nO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEluaXRpYWxseSwgd2UgYWx3YXlzIGFzc3VtZSB3ZSBhcmUgdmlzaWJsZS4gVGhpcyBlbnN1cmVzIHRoYXQgaW4gYnJvd3NlcnNcbiAgICAvLyB3aXRob3V0IHBhZ2UgdmlzaWJpbGl0eSBzdXBwb3J0IG9yIGluIGNhc2VzIHdoZXJlIHdlIGFyZSBuZXZlciB2aXNpYmxlXG4gICAgLy8gKGUuZy4gY2hyb21lIGV4dGVuc2lvbiksIHdlIGFjdCBhcyBpZiB3ZSBhcmUgdmlzaWJsZSwgaS5lLiBkb24ndCBkZWxheVxuICAgIC8vIHJlY29ubmVjdHNcbiAgICB0aGlzLnZpc2libGVfID0gdHJ1ZTtcblxuICAgIGlmICh2aXNpYmlsaXR5Q2hhbmdlKSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICB2aXNpYmlsaXR5Q2hhbmdlLFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgdmlzaWJsZSA9ICFkb2N1bWVudFtoaWRkZW5dO1xuICAgICAgICAgIGlmICh2aXNpYmxlICE9PSB0aGlzLnZpc2libGVfKSB7XG4gICAgICAgICAgICB0aGlzLnZpc2libGVfID0gdmlzaWJsZTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcigndmlzaWJsZScsIHZpc2libGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IXN0cmluZ30gZXZlbnRUeXBlXG4gICAqIEByZXR1cm4ge0FycmF5Ljxib29sZWFuPn1cbiAgICovXG4gIGdldEluaXRpYWxFdmVudChldmVudFR5cGU6IHN0cmluZyk6IGJvb2xlYW5bXSB7XG4gICAgYXNzZXJ0KGV2ZW50VHlwZSA9PT0gJ3Zpc2libGUnLCAnVW5rbm93biBldmVudCB0eXBlOiAnICsgZXZlbnRUeXBlKTtcbiAgICByZXR1cm4gW3RoaXMudmlzaWJsZV9dO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vUGF0aCc7XG5pbXBvcnQgeyBSZXBvSW5mbyB9IGZyb20gJy4uLy4uL1JlcG9JbmZvJztcbmltcG9ydCB7IHdhcm5JZlBhZ2VJc1NlY3VyZSwgZmF0YWwgfSBmcm9tICcuLi91dGlsJztcblxuLyoqXG4gKiBAcGFyYW0geyFzdHJpbmd9IHBhdGhTdHJpbmdcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZGVjb2RlUGF0aChwYXRoU3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xuICBsZXQgcGF0aFN0cmluZ0RlY29kZWQgPSAnJztcbiAgY29uc3QgcGllY2VzID0gcGF0aFN0cmluZy5zcGxpdCgnLycpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBpZWNlcy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChwaWVjZXNbaV0ubGVuZ3RoID4gMCkge1xuICAgICAgbGV0IHBpZWNlID0gcGllY2VzW2ldO1xuICAgICAgdHJ5IHtcbiAgICAgICAgcGllY2UgPSBkZWNvZGVVUklDb21wb25lbnQocGllY2UucmVwbGFjZSgvXFwrL2csICcgJykpO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIHBhdGhTdHJpbmdEZWNvZGVkICs9ICcvJyArIHBpZWNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcGF0aFN0cmluZ0RlY29kZWQ7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7IXN0cmluZ30gZGF0YVVSTFxuICogQHJldHVybiB7e3JlcG9JbmZvOiAhUmVwb0luZm8sIHBhdGg6ICFQYXRofX1cbiAqL1xuZXhwb3J0IGNvbnN0IHBhcnNlUmVwb0luZm8gPSBmdW5jdGlvbihcbiAgZGF0YVVSTDogc3RyaW5nXG4pOiB7IHJlcG9JbmZvOiBSZXBvSW5mbzsgcGF0aDogUGF0aCB9IHtcbiAgY29uc3QgcGFyc2VkVXJsID0gcGFyc2VVUkwoZGF0YVVSTCksXG4gICAgbmFtZXNwYWNlID0gcGFyc2VkVXJsLnN1YmRvbWFpbjtcblxuICBpZiAocGFyc2VkVXJsLmRvbWFpbiA9PT0gJ2ZpcmViYXNlJykge1xuICAgIGZhdGFsKFxuICAgICAgcGFyc2VkVXJsLmhvc3QgK1xuICAgICAgICAnIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQuICcgK1xuICAgICAgICAnUGxlYXNlIHVzZSA8WU9VUiBGSVJFQkFTRT4uZmlyZWJhc2Vpby5jb20gaW5zdGVhZCdcbiAgICApO1xuICB9XG5cbiAgLy8gQ2F0Y2ggY29tbW9uIGVycm9yIG9mIHVuaW5pdGlhbGl6ZWQgbmFtZXNwYWNlIHZhbHVlLlxuICBpZiAoIW5hbWVzcGFjZSB8fCBuYW1lc3BhY2UgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBmYXRhbChcbiAgICAgICdDYW5ub3QgcGFyc2UgRmlyZWJhc2UgdXJsLiBQbGVhc2UgdXNlIGh0dHBzOi8vPFlPVVIgRklSRUJBU0U+LmZpcmViYXNlaW8uY29tJ1xuICAgICk7XG4gIH1cblxuICBpZiAoIXBhcnNlZFVybC5zZWN1cmUpIHtcbiAgICB3YXJuSWZQYWdlSXNTZWN1cmUoKTtcbiAgfVxuXG4gIGNvbnN0IHdlYlNvY2tldE9ubHkgPSBwYXJzZWRVcmwuc2NoZW1lID09PSAnd3MnIHx8IHBhcnNlZFVybC5zY2hlbWUgPT09ICd3c3MnO1xuXG4gIHJldHVybiB7XG4gICAgcmVwb0luZm86IG5ldyBSZXBvSW5mbyhcbiAgICAgIHBhcnNlZFVybC5ob3N0LFxuICAgICAgcGFyc2VkVXJsLnNlY3VyZSxcbiAgICAgIG5hbWVzcGFjZSxcbiAgICAgIHdlYlNvY2tldE9ubHlcbiAgICApLFxuICAgIHBhdGg6IG5ldyBQYXRoKHBhcnNlZFVybC5wYXRoU3RyaW5nKVxuICB9O1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHshc3RyaW5nfSBkYXRhVVJMXG4gKiBAcmV0dXJuIHt7aG9zdDogc3RyaW5nLCBwb3J0OiBudW1iZXIsIGRvbWFpbjogc3RyaW5nLCBzdWJkb21haW46IHN0cmluZywgc2VjdXJlOiBib29sZWFuLCBzY2hlbWU6IHN0cmluZywgcGF0aFN0cmluZzogc3RyaW5nfX1cbiAqL1xuZXhwb3J0IGNvbnN0IHBhcnNlVVJMID0gZnVuY3Rpb24oXG4gIGRhdGFVUkw6IHN0cmluZ1xuKToge1xuICBob3N0OiBzdHJpbmc7XG4gIHBvcnQ6IG51bWJlcjtcbiAgZG9tYWluOiBzdHJpbmc7XG4gIHN1YmRvbWFpbjogc3RyaW5nO1xuICBzZWN1cmU6IGJvb2xlYW47XG4gIHNjaGVtZTogc3RyaW5nO1xuICBwYXRoU3RyaW5nOiBzdHJpbmc7XG59IHtcbiAgLy8gRGVmYXVsdCB0byBlbXB0eSBzdHJpbmdzIGluIHRoZSBldmVudCBvZiBhIG1hbGZvcm1lZCBzdHJpbmcuXG4gIGxldCBob3N0ID0gJycsXG4gICAgZG9tYWluID0gJycsXG4gICAgc3ViZG9tYWluID0gJycsXG4gICAgcGF0aFN0cmluZyA9ICcnO1xuXG4gIC8vIEFsd2F5cyBkZWZhdWx0IHRvIFNTTCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gIGxldCBzZWN1cmUgPSB0cnVlLFxuICAgIHNjaGVtZSA9ICdodHRwcycsXG4gICAgcG9ydCA9IDQ0MztcblxuICAvLyBEb24ndCBkbyBhbnkgdmFsaWRhdGlvbiBoZXJlLiBUaGUgY2FsbGVyIGlzIHJlc3BvbnNpYmxlIGZvciB2YWxpZGF0aW5nIHRoZSByZXN1bHQgb2YgcGFyc2luZy5cbiAgaWYgKHR5cGVvZiBkYXRhVVJMID09PSAnc3RyaW5nJykge1xuICAgIC8vIFBhcnNlIHNjaGVtZS5cbiAgICBsZXQgY29sb25JbmQgPSBkYXRhVVJMLmluZGV4T2YoJy8vJyk7XG4gICAgaWYgKGNvbG9uSW5kID49IDApIHtcbiAgICAgIHNjaGVtZSA9IGRhdGFVUkwuc3Vic3RyaW5nKDAsIGNvbG9uSW5kIC0gMSk7XG4gICAgICBkYXRhVVJMID0gZGF0YVVSTC5zdWJzdHJpbmcoY29sb25JbmQgKyAyKTtcbiAgICB9XG5cbiAgICAvLyBQYXJzZSBob3N0IGFuZCBwYXRoLlxuICAgIGxldCBzbGFzaEluZCA9IGRhdGFVUkwuaW5kZXhPZignLycpO1xuICAgIGlmIChzbGFzaEluZCA9PT0gLTEpIHtcbiAgICAgIHNsYXNoSW5kID0gZGF0YVVSTC5sZW5ndGg7XG4gICAgfVxuICAgIGhvc3QgPSBkYXRhVVJMLnN1YnN0cmluZygwLCBzbGFzaEluZCk7XG4gICAgcGF0aFN0cmluZyA9IGRlY29kZVBhdGgoZGF0YVVSTC5zdWJzdHJpbmcoc2xhc2hJbmQpKTtcblxuICAgIGNvbnN0IHBhcnRzID0gaG9zdC5zcGxpdCgnLicpO1xuICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDMpIHtcbiAgICAgIC8vIE5vcm1hbGl6ZSBuYW1lc3BhY2VzIHRvIGxvd2VyY2FzZSB0byBzaGFyZSBzdG9yYWdlIC8gY29ubmVjdGlvbi5cbiAgICAgIGRvbWFpbiA9IHBhcnRzWzFdO1xuICAgICAgc3ViZG9tYWluID0gcGFydHNbMF0udG9Mb3dlckNhc2UoKTtcbiAgICB9IGVsc2UgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgZG9tYWluID0gcGFydHNbMF07XG4gICAgfVxuXG4gICAgLy8gSWYgd2UgaGF2ZSBhIHBvcnQsIHVzZSBzY2hlbWUgZm9yIGRldGVybWluaW5nIGlmIGl0J3Mgc2VjdXJlLlxuICAgIGNvbG9uSW5kID0gaG9zdC5pbmRleE9mKCc6Jyk7XG4gICAgaWYgKGNvbG9uSW5kID49IDApIHtcbiAgICAgIHNlY3VyZSA9IHNjaGVtZSA9PT0gJ2h0dHBzJyB8fCBzY2hlbWUgPT09ICd3c3MnO1xuICAgICAgcG9ydCA9IHBhcnNlSW50KGhvc3Quc3Vic3RyaW5nKGNvbG9uSW5kICsgMSksIDEwKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGhvc3QsXG4gICAgcG9ydCxcbiAgICBkb21haW4sXG4gICAgc3ViZG9tYWluLFxuICAgIHNlY3VyZSxcbiAgICBzY2hlbWUsXG4gICAgcGF0aFN0cmluZ1xuICB9O1xufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFF1ZXJ5IH0gZnJvbSAnLi4vLi4vYXBpL1F1ZXJ5JztcblxuZGVjbGFyZSBjb25zdCB3aW5kb3c6IGFueTtcbmRlY2xhcmUgY29uc3QgV2luZG93czogYW55O1xuXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBmb3JFYWNoIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgYmFzZTY0IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgU2hhMSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IHN0cmluZ1RvQnl0ZUFycmF5IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgU2Vzc2lvblN0b3JhZ2UgfSBmcm9tICcuLi9zdG9yYWdlL3N0b3JhZ2UnO1xuaW1wb3J0IHsgaXNOb2RlU2RrIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcbiAqIFJldHVybnMgYSBsb2NhbGx5LXVuaXF1ZSBJRCAoZ2VuZXJhdGVkIGJ5IGp1c3QgaW5jcmVtZW50aW5nIHVwIGZyb20gMCBlYWNoIHRpbWUgaXRzIGNhbGxlZCkuXG4gKiBAdHlwZSB7ZnVuY3Rpb24oKTogbnVtYmVyfSBHZW5lcmF0ZWQgSUQuXG4gKi9cbmV4cG9ydCBjb25zdCBMVUlER2VuZXJhdG9yOiAoKCkgPT4gbnVtYmVyKSA9IChmdW5jdGlvbigpIHtcbiAgbGV0IGlkID0gMTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBpZCsrO1xuICB9O1xufSkoKTtcblxuLyoqXG4gKiBTaGExIGhhc2ggb2YgdGhlIGlucHV0IHN0cmluZ1xuICogQHBhcmFtIHshc3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBoYXNoXG4gKiBAcmV0dXJuIHshc3RyaW5nfSBUaGUgcmVzdWx0aW5nIGhhc2hcbiAqL1xuZXhwb3J0IGNvbnN0IHNoYTEgPSBmdW5jdGlvbihzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHV0ZjhCeXRlcyA9IHN0cmluZ1RvQnl0ZUFycmF5KHN0cik7XG4gIGNvbnN0IHNoYTEgPSBuZXcgU2hhMSgpO1xuICBzaGExLnVwZGF0ZSh1dGY4Qnl0ZXMpO1xuICBjb25zdCBzaGExQnl0ZXMgPSBzaGExLmRpZ2VzdCgpO1xuICByZXR1cm4gYmFzZTY0LmVuY29kZUJ5dGVBcnJheShzaGExQnl0ZXMpO1xufTtcblxuLyoqXG4gKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCBidWlsZExvZ01lc3NhZ2VfID0gZnVuY3Rpb24oLi4udmFyX2FyZ3M6IGFueVtdKTogc3RyaW5nIHtcbiAgbGV0IG1lc3NhZ2UgPSAnJztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YXJfYXJncy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChcbiAgICAgIEFycmF5LmlzQXJyYXkodmFyX2FyZ3NbaV0pIHx8XG4gICAgICAodmFyX2FyZ3NbaV0gJiZcbiAgICAgICAgdHlwZW9mIHZhcl9hcmdzW2ldID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB0eXBlb2YgdmFyX2FyZ3NbaV0ubGVuZ3RoID09PSAnbnVtYmVyJylcbiAgICApIHtcbiAgICAgIG1lc3NhZ2UgKz0gYnVpbGRMb2dNZXNzYWdlXy5hcHBseShudWxsLCB2YXJfYXJnc1tpXSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFyX2FyZ3NbaV0gPT09ICdvYmplY3QnKSB7XG4gICAgICBtZXNzYWdlICs9IHN0cmluZ2lmeSh2YXJfYXJnc1tpXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lc3NhZ2UgKz0gdmFyX2FyZ3NbaV07XG4gICAgfVxuICAgIG1lc3NhZ2UgKz0gJyAnO1xuICB9XG5cbiAgcmV0dXJuIG1lc3NhZ2U7XG59O1xuXG4vKipcbiAqIFVzZSB0aGlzIGZvciBhbGwgZGVidWcgbWVzc2FnZXMgaW4gRmlyZWJhc2UuXG4gKiBAdHlwZSB7P2Z1bmN0aW9uKHN0cmluZyl9XG4gKi9cbmV4cG9ydCBsZXQgbG9nZ2VyOiAoKGE6IHN0cmluZykgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcblxuLyoqXG4gKiBGbGFnIHRvIGNoZWNrIGZvciBsb2cgYXZhaWxhYmlsaXR5IG9uIGZpcnN0IGxvZyBtZXNzYWdlXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqIEBwcml2YXRlXG4gKi9cbmxldCBmaXJzdExvZ18gPSB0cnVlO1xuXG4vKipcbiAqIFRoZSBpbXBsZW1lbnRhdGlvbiBvZiBGaXJlYmFzZS5lbmFibGVMb2dnaW5nIChkZWZpbmVkIGhlcmUgdG8gYnJlYWsgZGVwZW5kZW5jaWVzKVxuICogQHBhcmFtIHtib29sZWFufD9mdW5jdGlvbihzdHJpbmcpfSBsb2dnZXJfIEEgZmxhZyB0byB0dXJuIG9uIGxvZ2dpbmcsIG9yIGEgY3VzdG9tIGxvZ2dlclxuICogQHBhcmFtIHtib29sZWFuPX0gcGVyc2lzdGVudCBXaGV0aGVyIG9yIG5vdCB0byBwZXJzaXN0IGxvZ2dpbmcgc2V0dGluZ3MgYWNyb3NzIHJlZnJlc2hlc1xuICovXG5leHBvcnQgY29uc3QgZW5hYmxlTG9nZ2luZyA9IGZ1bmN0aW9uKFxuICBsb2dnZXJfPzogYm9vbGVhbiB8ICgoYTogc3RyaW5nKSA9PiB2b2lkKSB8IG51bGwsXG4gIHBlcnNpc3RlbnQ/OiBib29sZWFuXG4pIHtcbiAgYXNzZXJ0KFxuICAgICFwZXJzaXN0ZW50IHx8IChsb2dnZXJfID09PSB0cnVlIHx8IGxvZ2dlcl8gPT09IGZhbHNlKSxcbiAgICBcIkNhbid0IHR1cm4gb24gY3VzdG9tIGxvZ2dlcnMgcGVyc2lzdGVudGx5LlwiXG4gICk7XG4gIGlmIChsb2dnZXJfID09PSB0cnVlKSB7XG4gICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLmxvZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBsb2dnZXIgPSBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uc29sZS5sb2cgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIElFIGRvZXMgdGhpcy5cbiAgICAgICAgbG9nZ2VyID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocGVyc2lzdGVudCkgU2Vzc2lvblN0b3JhZ2Uuc2V0KCdsb2dnaW5nX2VuYWJsZWQnLCB0cnVlKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgbG9nZ2VyXyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGxvZ2dlciA9IGxvZ2dlcl87XG4gIH0gZWxzZSB7XG4gICAgbG9nZ2VyID0gbnVsbDtcbiAgICBTZXNzaW9uU3RvcmFnZS5yZW1vdmUoJ2xvZ2dpbmdfZW5hYmxlZCcpO1xuICB9XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0gey4uLihzdHJpbmd8QXJndW1lbnRzKX0gdmFyX2FyZ3NcbiAqL1xuZXhwb3J0IGNvbnN0IGxvZyA9IGZ1bmN0aW9uKC4uLnZhcl9hcmdzOiBzdHJpbmdbXSkge1xuICBpZiAoZmlyc3RMb2dfID09PSB0cnVlKSB7XG4gICAgZmlyc3RMb2dfID0gZmFsc2U7XG4gICAgaWYgKGxvZ2dlciA9PT0gbnVsbCAmJiBTZXNzaW9uU3RvcmFnZS5nZXQoJ2xvZ2dpbmdfZW5hYmxlZCcpID09PSB0cnVlKVxuICAgICAgZW5hYmxlTG9nZ2luZyh0cnVlKTtcbiAgfVxuXG4gIGlmIChsb2dnZXIpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gYnVpbGRMb2dNZXNzYWdlXy5hcHBseShudWxsLCB2YXJfYXJncyk7XG4gICAgbG9nZ2VyKG1lc3NhZ2UpO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7IXN0cmluZ30gcHJlZml4XG4gKiBAcmV0dXJuIHtmdW5jdGlvbiguLi5bKl0pfVxuICovXG5leHBvcnQgY29uc3QgbG9nV3JhcHBlciA9IGZ1bmN0aW9uKFxuICBwcmVmaXg6IHN0cmluZ1xuKTogKC4uLnZhcl9hcmdzOiBhbnlbXSkgPT4gdm9pZCB7XG4gIHJldHVybiBmdW5jdGlvbiguLi52YXJfYXJnczogYW55W10pIHtcbiAgICBsb2cocHJlZml4LCAuLi52YXJfYXJncyk7XG4gIH07XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7Li4uc3RyaW5nfSB2YXJfYXJnc1xuICovXG5leHBvcnQgY29uc3QgZXJyb3IgPSBmdW5jdGlvbiguLi52YXJfYXJnczogc3RyaW5nW10pIHtcbiAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSAnRklSRUJBU0UgSU5URVJOQUwgRVJST1I6ICcgKyBidWlsZExvZ01lc3NhZ2VfKC4uLnZhcl9hcmdzKTtcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUuZXJyb3IgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHsuLi5zdHJpbmd9IHZhcl9hcmdzXG4gKi9cbmV4cG9ydCBjb25zdCBmYXRhbCA9IGZ1bmN0aW9uKC4uLnZhcl9hcmdzOiBzdHJpbmdbXSkge1xuICBjb25zdCBtZXNzYWdlID0gYnVpbGRMb2dNZXNzYWdlXyguLi52YXJfYXJncyk7XG4gIHRocm93IG5ldyBFcnJvcignRklSRUJBU0UgRkFUQUwgRVJST1I6ICcgKyBtZXNzYWdlKTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICovXG5leHBvcnQgY29uc3Qgd2FybiA9IGZ1bmN0aW9uKC4uLnZhcl9hcmdzOiBhbnlbXSkge1xuICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9ICdGSVJFQkFTRSBXQVJOSU5HOiAnICsgYnVpbGRMb2dNZXNzYWdlXyguLi52YXJfYXJncyk7XG4gICAgaWYgKHR5cGVvZiBjb25zb2xlLndhcm4gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBMb2dzIGEgd2FybmluZyBpZiB0aGUgY29udGFpbmluZyBwYWdlIHVzZXMgaHR0cHMuIENhbGxlZCB3aGVuIGEgY2FsbCB0byBuZXcgRmlyZWJhc2VcbiAqIGRvZXMgbm90IHVzZSBodHRwcy5cbiAqL1xuZXhwb3J0IGNvbnN0IHdhcm5JZlBhZ2VJc1NlY3VyZSA9IGZ1bmN0aW9uKCkge1xuICAvLyBCZSB2ZXJ5IGNhcmVmdWwgYWNjZXNzaW5nIGJyb3dzZXIgZ2xvYmFscy4gV2hvIGtub3dzIHdoYXQgbWF5IG9yIG1heSBub3QgZXhpc3QuXG4gIGlmIChcbiAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHdpbmRvdy5sb2NhdGlvbiAmJlxuICAgIHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCAmJlxuICAgIHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwczonKSAhPT0gLTFcbiAgKSB7XG4gICAgd2FybihcbiAgICAgICdJbnNlY3VyZSBGaXJlYmFzZSBhY2Nlc3MgZnJvbSBhIHNlY3VyZSBwYWdlLiAnICtcbiAgICAgICAgJ1BsZWFzZSB1c2UgaHR0cHMgaW4gY2FsbHMgdG8gbmV3IEZpcmViYXNlKCkuJ1xuICAgICk7XG4gIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHshU3RyaW5nfSBtZXRob2ROYW1lXG4gKi9cbmV4cG9ydCBjb25zdCB3YXJuQWJvdXRVbnN1cHBvcnRlZE1ldGhvZCA9IGZ1bmN0aW9uKG1ldGhvZE5hbWU6IHN0cmluZykge1xuICB3YXJuKFxuICAgIG1ldGhvZE5hbWUgK1xuICAgICAgJyBpcyB1bnN1cHBvcnRlZCBhbmQgd2lsbCBsaWtlbHkgY2hhbmdlIHNvb24uICAnICtcbiAgICAgICdQbGVhc2UgZG8gbm90IHVzZS4nXG4gICk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBkYXRhIGlzIE5hTiwgb3IgKy8tIEluZmluaXR5LlxuICogQHBhcmFtIHsqfSBkYXRhXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgY29uc3QgaXNJbnZhbGlkSlNPTk51bWJlciA9IGZ1bmN0aW9uKGRhdGE6IGFueSk6IGJvb2xlYW4ge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJyAmJlxuICAgIChkYXRhICE9IGRhdGEgfHwgLy8gTmFOXG4gICAgICBkYXRhID09IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSB8fFxuICAgICAgZGF0YSA9PSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkpXG4gICk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZm5cbiAqL1xuZXhwb3J0IGNvbnN0IGV4ZWN1dGVXaGVuRE9NUmVhZHkgPSBmdW5jdGlvbihmbjogKCkgPT4gdm9pZCkge1xuICBpZiAoaXNOb2RlU2RrKCkgfHwgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgIGZuKCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gTW9kZWxlZCBhZnRlciBqUXVlcnkuIFRyeSBET01Db250ZW50TG9hZGVkIGFuZCBvbnJlYWR5c3RhdGVjaGFuZ2UgKHdoaWNoXG4gICAgLy8gZmlyZSBiZWZvcmUgb25sb2FkKSwgYnV0IGZhbGwgYmFjayB0byBvbmxvYWQuXG5cbiAgICBsZXQgY2FsbGVkID0gZmFsc2U7XG4gICAgbGV0IHdyYXBwZWRGbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCFkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgIHNldFRpbWVvdXQod3JhcHBlZEZuLCBNYXRoLmZsb29yKDEwKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgZm4oKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCB3cmFwcGVkRm4sIGZhbHNlKTtcbiAgICAgIC8vIGZhbGxiYWNrIHRvIG9ubG9hZC5cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgd3JhcHBlZEZuLCBmYWxzZSk7XG4gICAgfSBlbHNlIGlmICgoZG9jdW1lbnQgYXMgYW55KS5hdHRhY2hFdmVudCkge1xuICAgICAgLy8gSUUuXG4gICAgICAoZG9jdW1lbnQgYXMgYW55KS5hdHRhY2hFdmVudCgnb25yZWFkeXN0YXRlY2hhbmdlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB3cmFwcGVkRm4oKTtcbiAgICAgIH0pO1xuICAgICAgLy8gZmFsbGJhY2sgdG8gb25sb2FkLlxuICAgICAgKHdpbmRvdyBhcyBhbnkpLmF0dGFjaEV2ZW50KCdvbmxvYWQnLCB3cmFwcGVkRm4pO1xuXG4gICAgICAvLyBqUXVlcnkgaGFzIGFuIGV4dHJhIGhhY2sgZm9yIElFIHRoYXQgd2UgY291bGQgZW1wbG95IChiYXNlZCBvblxuICAgICAgLy8gaHR0cDovL2phdmFzY3JpcHQubndib3guY29tL0lFQ29udGVudExvYWRlZC8pIEJ1dCBpdCBsb29rcyByZWFsbHkgb2xkLlxuICAgICAgLy8gSSdtIGhvcGluZyB3ZSBkb24ndCBuZWVkIGl0LlxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBNaW5pbXVtIGtleSBuYW1lLiBJbnZhbGlkIGZvciBhY3R1YWwgZGF0YSwgdXNlZCBhcyBhIG1hcmtlciB0byBzb3J0IGJlZm9yZSBhbnkgdmFsaWQgbmFtZXNcbiAqIEB0eXBlIHshc3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgTUlOX05BTUUgPSAnW01JTl9OQU1FXSc7XG5cbi8qKlxuICogTWF4aW11bSBrZXkgbmFtZS4gSW52YWxpZCBmb3IgYWN0dWFsIGRhdGEsIHVzZWQgYXMgYSBtYXJrZXIgdG8gc29ydCBhYm92ZSBhbnkgdmFsaWQgbmFtZXNcbiAqIEB0eXBlIHshc3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgTUFYX05BTUUgPSAnW01BWF9OQU1FXSc7XG5cbi8qKlxuICogQ29tcGFyZXMgdmFsaWQgRmlyZWJhc2Uga2V5IG5hbWVzLCBwbHVzIG1pbiBhbmQgbWF4IG5hbWVcbiAqIEBwYXJhbSB7IXN0cmluZ30gYVxuICogQHBhcmFtIHshc3RyaW5nfSBiXG4gKiBAcmV0dXJuIHshbnVtYmVyfVxuICovXG5leHBvcnQgY29uc3QgbmFtZUNvbXBhcmUgPSBmdW5jdGlvbihhOiBzdHJpbmcsIGI6IHN0cmluZyk6IG51bWJlciB7XG4gIGlmIChhID09PSBiKSB7XG4gICAgcmV0dXJuIDA7XG4gIH0gZWxzZSBpZiAoYSA9PT0gTUlOX05BTUUgfHwgYiA9PT0gTUFYX05BTUUpIHtcbiAgICByZXR1cm4gLTE7XG4gIH0gZWxzZSBpZiAoYiA9PT0gTUlOX05BTUUgfHwgYSA9PT0gTUFYX05BTUUpIHtcbiAgICByZXR1cm4gMTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBhQXNJbnQgPSB0cnlQYXJzZUludChhKSxcbiAgICAgIGJBc0ludCA9IHRyeVBhcnNlSW50KGIpO1xuXG4gICAgaWYgKGFBc0ludCAhPT0gbnVsbCkge1xuICAgICAgaWYgKGJBc0ludCAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gYUFzSW50IC0gYkFzSW50ID09IDAgPyBhLmxlbmd0aCAtIGIubGVuZ3RoIDogYUFzSW50IC0gYkFzSW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYkFzSW50ICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGEgPCBiID8gLTEgOiAxO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0geyFzdHJpbmd9IGFcbiAqIEBwYXJhbSB7IXN0cmluZ30gYlxuICogQHJldHVybiB7IW51bWJlcn0gY29tcGFyaXNvbiByZXN1bHQuXG4gKi9cbmV4cG9ydCBjb25zdCBzdHJpbmdDb21wYXJlID0gZnVuY3Rpb24oYTogc3RyaW5nLCBiOiBzdHJpbmcpOiBudW1iZXIge1xuICBpZiAoYSA9PT0gYikge1xuICAgIHJldHVybiAwO1xuICB9IGVsc2UgaWYgKGEgPCBiKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAxO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4geyp9XG4gKi9cbmV4cG9ydCBjb25zdCByZXF1aXJlS2V5ID0gZnVuY3Rpb24oXG4gIGtleTogc3RyaW5nLFxuICBvYmo6IHsgW2s6IHN0cmluZ106IGFueSB9XG4pOiBhbnkge1xuICBpZiAob2JqICYmIGtleSBpbiBvYmopIHtcbiAgICByZXR1cm4gb2JqW2tleV07XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ01pc3NpbmcgcmVxdWlyZWQga2V5ICgnICsga2V5ICsgJykgaW4gb2JqZWN0OiAnICsgc3RyaW5naWZ5KG9iailcbiAgICApO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBPYmplY3RUb1VuaXF1ZUtleSA9IGZ1bmN0aW9uKG9iajogYW55KTogc3RyaW5nIHtcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkgcmV0dXJuIHN0cmluZ2lmeShvYmopO1xuXG4gIGNvbnN0IGtleXMgPSBbXTtcbiAgZm9yIChsZXQgayBpbiBvYmopIHtcbiAgICBrZXlzLnB1c2goayk7XG4gIH1cblxuICAvLyBFeHBvcnQgYXMganNvbiwgYnV0IHdpdGggdGhlIGtleXMgc29ydGVkLlxuICBrZXlzLnNvcnQoKTtcbiAgbGV0IGtleSA9ICd7JztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGkgIT09IDApIGtleSArPSAnLCc7XG4gICAga2V5ICs9IHN0cmluZ2lmeShrZXlzW2ldKTtcbiAgICBrZXkgKz0gJzonO1xuICAgIGtleSArPSBPYmplY3RUb1VuaXF1ZUtleShvYmpba2V5c1tpXV0pO1xuICB9XG5cbiAga2V5ICs9ICd9JztcbiAgcmV0dXJuIGtleTtcbn07XG5cbi8qKlxuICogU3BsaXRzIGEgc3RyaW5nIGludG8gYSBudW1iZXIgb2Ygc21hbGxlciBzZWdtZW50cyBvZiBtYXhpbXVtIHNpemVcbiAqIEBwYXJhbSB7IXN0cmluZ30gc3RyIFRoZSBzdHJpbmdcbiAqIEBwYXJhbSB7IW51bWJlcn0gc2Vnc2l6ZSBUaGUgbWF4aW11bSBudW1iZXIgb2YgY2hhcnMgaW4gdGhlIHN0cmluZy5cbiAqIEByZXR1cm4ge0FycmF5LjxzdHJpbmc+fSBUaGUgc3RyaW5nLCBzcGxpdCBpbnRvIGFwcHJvcHJpYXRlbHktc2l6ZWQgY2h1bmtzXG4gKi9cbmV4cG9ydCBjb25zdCBzcGxpdFN0cmluZ0J5U2l6ZSA9IGZ1bmN0aW9uKFxuICBzdHI6IHN0cmluZyxcbiAgc2Vnc2l6ZTogbnVtYmVyXG4pOiBzdHJpbmdbXSB7XG4gIGNvbnN0IGxlbiA9IHN0ci5sZW5ndGg7XG5cbiAgaWYgKGxlbiA8PSBzZWdzaXplKSB7XG4gICAgcmV0dXJuIFtzdHJdO1xuICB9XG5cbiAgY29uc3QgZGF0YVNlZ3MgPSBbXTtcbiAgZm9yIChsZXQgYyA9IDA7IGMgPCBsZW47IGMgKz0gc2Vnc2l6ZSkge1xuICAgIGlmIChjICsgc2Vnc2l6ZSA+IGxlbikge1xuICAgICAgZGF0YVNlZ3MucHVzaChzdHIuc3Vic3RyaW5nKGMsIGxlbikpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhU2Vncy5wdXNoKHN0ci5zdWJzdHJpbmcoYywgYyArIHNlZ3NpemUpKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRhdGFTZWdzO1xufTtcblxuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIGVhY2ggKGtleSwgdmFsdWUpIHBhaXIgaW4gYW4gb2JqZWN0IG9yXG4gKiBhcHBseSBhIGZ1bmN0aW9uIHRvIGVhY2ggKGluZGV4LCB2YWx1ZSkgcGFpciBpbiBhbiBhcnJheVxuICogQHBhcmFtIHshKE9iamVjdHxBcnJheSl9IG9iaiBUaGUgb2JqZWN0IG9yIGFycmF5IHRvIGl0ZXJhdGUgb3ZlclxuICogQHBhcmFtIHtmdW5jdGlvbig/LCA/KX0gZm4gVGhlIGZ1bmN0aW9uIHRvIGFwcGx5XG4gKi9cbmV4cG9ydCBjb25zdCBlYWNoID0gZnVuY3Rpb24oXG4gIG9iajogT2JqZWN0IHwgQXJyYXk8YW55PixcbiAgZm46ICh2PzogYW55LCBrPzogYW55KSA9PiB2b2lkXG4pIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgKytpKSB7XG4gICAgICBmbihpLCBvYmpbaV0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvKipcbiAgICAgKiBpbiB0aGUgY29udmVyc2lvbiBvZiBjb2RlIHdlIHJlbW92ZWQgdGhlIGdvb2cub2JqZWN0LmZvckVhY2hcbiAgICAgKiBmdW5jdGlvbiB3aGljaCBkaWQgYSB2YWx1ZSxrZXkgY2FsbGJhY2suIFdlIHN0YW5kYXJkaXplZCBvblxuICAgICAqIGEgc2luZ2xlIGltcGwgdGhhdCBkb2VzIGEga2V5LCB2YWx1ZSBjYWxsYmFjay4gU28gd2UgaW52ZXJ0XG4gICAgICogdG8gbm90IGhhdmUgdG8gdG91Y2ggdGhlIGBlYWNoYCBjb2RlIHBvaW50c1xuICAgICAqL1xuICAgIGZvckVhY2gob2JqLCAoa2V5OiBhbnksIHZhbDogYW55KSA9PiBmbih2YWwsIGtleSkpO1xuICB9XG59O1xuXG4vKipcbiAqIExpa2UgZ29vZy5iaW5kLCBidXQgZG9lc24ndCBib3RoZXIgdG8gY3JlYXRlIGEgY2xvc3VyZSBpZiBvcHRfY29udGV4dCBpcyBudWxsL3VuZGVmaW5lZC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKil9IGNhbGxiYWNrIENhbGxiYWNrIGZ1bmN0aW9uLlxuICogQHBhcmFtIHs/T2JqZWN0PX0gY29udGV4dCBPcHRpb25hbCBjb250ZXh0IHRvIGJpbmQgdG8uXG4gKiBAcmV0dXJuIHtmdW5jdGlvbigqKX1cbiAqL1xuZXhwb3J0IGNvbnN0IGJpbmRDYWxsYmFjayA9IGZ1bmN0aW9uKFxuICBjYWxsYmFjazogKGE6IGFueSkgPT4gdm9pZCxcbiAgY29udGV4dD86IG9iamVjdCB8IG51bGxcbik6IEZ1bmN0aW9uIHtcbiAgcmV0dXJuIGNvbnRleHQgPyBjYWxsYmFjay5iaW5kKGNvbnRleHQpIDogY2FsbGJhY2s7XG59O1xuXG4vKipcbiAqIEJvcnJvd2VkIGZyb20gaHR0cDovL2hnLnNlY29uZGxpZmUuY29tL2xsc2Qvc3JjL3RpcC9qcy90eXBlZGFycmF5LmpzIChNSVQgTGljZW5zZSlcbiAqIEkgbWFkZSBvbmUgbW9kaWZpY2F0aW9uIGF0IHRoZSBlbmQgYW5kIHJlbW92ZWQgdGhlIE5hTiAvIEluZmluaXR5XG4gKiBoYW5kbGluZyAoc2luY2UgaXQgc2VlbWVkIGJyb2tlbiBbY2F1c2VkIGFuIG92ZXJmbG93XSBhbmQgd2UgZG9uJ3QgbmVlZCBpdCkuICBTZWUgTUpMIGNvbW1lbnRzLlxuICogQHBhcmFtIHshbnVtYmVyfSB2IEEgZG91YmxlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBkb3VibGVUb0lFRUU3NTRTdHJpbmcgPSBmdW5jdGlvbih2OiBudW1iZXIpOiBzdHJpbmcge1xuICBhc3NlcnQoIWlzSW52YWxpZEpTT05OdW1iZXIodiksICdJbnZhbGlkIEpTT04gbnVtYmVyJyk7IC8vIE1KTFxuXG4gIGNvbnN0IGViaXRzID0gMTEsXG4gICAgZmJpdHMgPSA1MjtcbiAgbGV0IGJpYXMgPSAoMSA8PCAoZWJpdHMgLSAxKSkgLSAxLFxuICAgIHMsXG4gICAgZSxcbiAgICBmLFxuICAgIGxuLFxuICAgIGksXG4gICAgYml0cyxcbiAgICBzdHI7XG5cbiAgLy8gQ29tcHV0ZSBzaWduLCBleHBvbmVudCwgZnJhY3Rpb25cbiAgLy8gU2tpcCBOYU4gLyBJbmZpbml0eSBoYW5kbGluZyAtLU1KTC5cbiAgaWYgKHYgPT09IDApIHtcbiAgICBlID0gMDtcbiAgICBmID0gMDtcbiAgICBzID0gMSAvIHYgPT09IC1JbmZpbml0eSA/IDEgOiAwO1xuICB9IGVsc2Uge1xuICAgIHMgPSB2IDwgMDtcbiAgICB2ID0gTWF0aC5hYnModik7XG5cbiAgICBpZiAodiA+PSBNYXRoLnBvdygyLCAxIC0gYmlhcykpIHtcbiAgICAgIC8vIE5vcm1hbGl6ZWRcbiAgICAgIGxuID0gTWF0aC5taW4oTWF0aC5mbG9vcihNYXRoLmxvZyh2KSAvIE1hdGguTE4yKSwgYmlhcyk7XG4gICAgICBlID0gbG4gKyBiaWFzO1xuICAgICAgZiA9IE1hdGgucm91bmQodiAqIE1hdGgucG93KDIsIGZiaXRzIC0gbG4pIC0gTWF0aC5wb3coMiwgZmJpdHMpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRGVub3JtYWxpemVkXG4gICAgICBlID0gMDtcbiAgICAgIGYgPSBNYXRoLnJvdW5kKHYgLyBNYXRoLnBvdygyLCAxIC0gYmlhcyAtIGZiaXRzKSk7XG4gICAgfVxuICB9XG5cbiAgLy8gUGFjayBzaWduLCBleHBvbmVudCwgZnJhY3Rpb25cbiAgYml0cyA9IFtdO1xuICBmb3IgKGkgPSBmYml0czsgaTsgaSAtPSAxKSB7XG4gICAgYml0cy5wdXNoKGYgJSAyID8gMSA6IDApO1xuICAgIGYgPSBNYXRoLmZsb29yKGYgLyAyKTtcbiAgfVxuICBmb3IgKGkgPSBlYml0czsgaTsgaSAtPSAxKSB7XG4gICAgYml0cy5wdXNoKGUgJSAyID8gMSA6IDApO1xuICAgIGUgPSBNYXRoLmZsb29yKGUgLyAyKTtcbiAgfVxuICBiaXRzLnB1c2gocyA/IDEgOiAwKTtcbiAgYml0cy5yZXZlcnNlKCk7XG4gIHN0ciA9IGJpdHMuam9pbignJyk7XG5cbiAgLy8gUmV0dXJuIHRoZSBkYXRhIGFzIGEgaGV4IHN0cmluZy4gLS1NSkxcbiAgbGV0IGhleEJ5dGVTdHJpbmcgPSAnJztcbiAgZm9yIChpID0gMDsgaSA8IDY0OyBpICs9IDgpIHtcbiAgICBsZXQgaGV4Qnl0ZSA9IHBhcnNlSW50KHN0ci5zdWJzdHIoaSwgOCksIDIpLnRvU3RyaW5nKDE2KTtcbiAgICBpZiAoaGV4Qnl0ZS5sZW5ndGggPT09IDEpIGhleEJ5dGUgPSAnMCcgKyBoZXhCeXRlO1xuICAgIGhleEJ5dGVTdHJpbmcgPSBoZXhCeXRlU3RyaW5nICsgaGV4Qnl0ZTtcbiAgfVxuICByZXR1cm4gaGV4Qnl0ZVN0cmluZy50b0xvd2VyQ2FzZSgpO1xufTtcblxuLyoqXG4gKiBVc2VkIHRvIGRldGVjdCBpZiB3ZSdyZSBpbiBhIENocm9tZSBjb250ZW50IHNjcmlwdCAod2hpY2ggZXhlY3V0ZXMgaW4gYW5cbiAqIGlzb2xhdGVkIGVudmlyb25tZW50IHdoZXJlIGxvbmctcG9sbGluZyBkb2Vzbid0IHdvcmspLlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IGlzQ2hyb21lRXh0ZW5zaW9uQ29udGVudFNjcmlwdCA9IGZ1bmN0aW9uKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gISEoXG4gICAgdHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiZcbiAgICB3aW5kb3dbJ2Nocm9tZSddICYmXG4gICAgd2luZG93WydjaHJvbWUnXVsnZXh0ZW5zaW9uJ10gJiZcbiAgICAhL15jaHJvbWUvLnRlc3Qod2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICk7XG59O1xuXG4vKipcbiAqIFVzZWQgdG8gZGV0ZWN0IGlmIHdlJ3JlIGluIGEgV2luZG93cyA4IFN0b3JlIGFwcC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBjb25zdCBpc1dpbmRvd3NTdG9yZUFwcCA9IGZ1bmN0aW9uKCk6IGJvb2xlYW4ge1xuICAvLyBDaGVjayBmb3IgdGhlIHByZXNlbmNlIG9mIGEgY291cGxlIFdpblJUIGdsb2JhbHNcbiAgcmV0dXJuIHR5cGVvZiBXaW5kb3dzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgV2luZG93cy5VSSA9PT0gJ29iamVjdCc7XG59O1xuXG4vKipcbiAqIENvbnZlcnRzIGEgc2VydmVyIGVycm9yIGNvZGUgdG8gYSBKYXZhc2NyaXB0IEVycm9yXG4gKiBAcGFyYW0geyFzdHJpbmd9IGNvZGVcbiAqIEBwYXJhbSB7IVF1ZXJ5fSBxdWVyeVxuICogQHJldHVybiB7RXJyb3J9XG4gKi9cbmV4cG9ydCBjb25zdCBlcnJvckZvclNlcnZlckNvZGUgPSBmdW5jdGlvbihjb2RlOiBzdHJpbmcsIHF1ZXJ5OiBRdWVyeSk6IEVycm9yIHtcbiAgbGV0IHJlYXNvbiA9ICdVbmtub3duIEVycm9yJztcbiAgaWYgKGNvZGUgPT09ICd0b29fYmlnJykge1xuICAgIHJlYXNvbiA9XG4gICAgICAnVGhlIGRhdGEgcmVxdWVzdGVkIGV4Y2VlZHMgdGhlIG1heGltdW0gc2l6ZSAnICtcbiAgICAgICd0aGF0IGNhbiBiZSBhY2Nlc3NlZCB3aXRoIGEgc2luZ2xlIHJlcXVlc3QuJztcbiAgfSBlbHNlIGlmIChjb2RlID09ICdwZXJtaXNzaW9uX2RlbmllZCcpIHtcbiAgICByZWFzb24gPSBcIkNsaWVudCBkb2Vzbid0IGhhdmUgcGVybWlzc2lvbiB0byBhY2Nlc3MgdGhlIGRlc2lyZWQgZGF0YS5cIjtcbiAgfSBlbHNlIGlmIChjb2RlID09ICd1bmF2YWlsYWJsZScpIHtcbiAgICByZWFzb24gPSAnVGhlIHNlcnZpY2UgaXMgdW5hdmFpbGFibGUnO1xuICB9XG5cbiAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgY29kZSArICcgYXQgJyArIHF1ZXJ5LnBhdGgudG9TdHJpbmcoKSArICc6ICcgKyByZWFzb25cbiAgKTtcbiAgKGVycm9yIGFzIGFueSkuY29kZSA9IGNvZGUudG9VcHBlckNhc2UoKTtcbiAgcmV0dXJuIGVycm9yO1xufTtcblxuLyoqXG4gKiBVc2VkIHRvIHRlc3QgZm9yIGludGVnZXItbG9va2luZyBzdHJpbmdzXG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNvbnN0IElOVEVHRVJfUkVHRVhQXyA9IG5ldyBSZWdFeHAoJ14tP1xcXFxkezEsMTB9JCcpO1xuXG4vKipcbiAqIElmIHRoZSBzdHJpbmcgY29udGFpbnMgYSAzMi1iaXQgaW50ZWdlciwgcmV0dXJuIGl0LiAgRWxzZSByZXR1cm4gbnVsbC5cbiAqIEBwYXJhbSB7IXN0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHs/bnVtYmVyfVxuICovXG5leHBvcnQgY29uc3QgdHJ5UGFyc2VJbnQgPSBmdW5jdGlvbihzdHI6IHN0cmluZyk6IG51bWJlciB8IG51bGwge1xuICBpZiAoSU5URUdFUl9SRUdFWFBfLnRlc3Qoc3RyKSkge1xuICAgIGNvbnN0IGludFZhbCA9IE51bWJlcihzdHIpO1xuICAgIGlmIChpbnRWYWwgPj0gLTIxNDc0ODM2NDggJiYgaW50VmFsIDw9IDIxNDc0ODM2NDcpIHtcbiAgICAgIHJldHVybiBpbnRWYWw7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuLyoqXG4gKiBIZWxwZXIgdG8gcnVuIHNvbWUgY29kZSBidXQgY2F0Y2ggYW55IGV4Y2VwdGlvbnMgYW5kIHJlLXRocm93IHRoZW0gbGF0ZXIuXG4gKiBVc2VmdWwgZm9yIHByZXZlbnRpbmcgdXNlciBjYWxsYmFja3MgZnJvbSBicmVha2luZyBpbnRlcm5hbCBjb2RlLlxuICpcbiAqIFJlLXRocm93aW5nIHRoZSBleGNlcHRpb24gZnJvbSBhIHNldFRpbWVvdXQgaXMgYSBsaXR0bGUgZXZpbCwgYnV0IGl0J3MgdmVyeVxuICogY29udmVuaWVudCAod2UgZG9uJ3QgaGF2ZSB0byB0cnkgdG8gZmlndXJlIG91dCB3aGVuIGlzIGEgc2FmZSBwb2ludCB0b1xuICogcmUtdGhyb3cgaXQpLCBhbmQgdGhlIGJlaGF2aW9yIHNlZW1zIHJlYXNvbmFibGU6XG4gKlxuICogKiBJZiB5b3UgYXJlbid0IHBhdXNpbmcgb24gZXhjZXB0aW9ucywgeW91IGdldCBhbiBlcnJvciBpbiB0aGUgY29uc29sZSB3aXRoXG4gKiAgIHRoZSBjb3JyZWN0IHN0YWNrIHRyYWNlLlxuICogKiBJZiB5b3UncmUgcGF1c2luZyBvbiBhbGwgZXhjZXB0aW9ucywgdGhlIGRlYnVnZ2VyIHdpbGwgcGF1c2Ugb24geW91clxuICogICBleGNlcHRpb24gYW5kIHRoZW4gYWdhaW4gd2hlbiB3ZSByZXRocm93IGl0LlxuICogKiBJZiB5b3UncmUgb25seSBwYXVzaW5nIG9uIHVuY2F1Z2h0IGV4Y2VwdGlvbnMsIHRoZSBkZWJ1Z2dlciB3aWxsIG9ubHkgcGF1c2VcbiAqICAgb24gdXMgcmUtdGhyb3dpbmcgaXQuXG4gKlxuICogQHBhcmFtIHshZnVuY3Rpb24oKX0gZm4gVGhlIGNvZGUgdG8gZ3VhcmQuXG4gKi9cbmV4cG9ydCBjb25zdCBleGNlcHRpb25HdWFyZCA9IGZ1bmN0aW9uKGZuOiAoKSA9PiB2b2lkKSB7XG4gIHRyeSB7XG4gICAgZm4oKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIFJlLXRocm93IGV4Y2VwdGlvbiB3aGVuIGl0J3Mgc2FmZS5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgLy8gSXQgdXNlZCB0byBiZSB0aGF0IFwidGhyb3cgZVwiIHdvdWxkIHJlc3VsdCBpbiBhIGdvb2QgY29uc29sZSBlcnJvciB3aXRoXG4gICAgICAvLyByZWxldmFudCBjb250ZXh0LCBidXQgYXMgb2YgQ2hyb21lIDM5LCB5b3UganVzdCBnZXQgdGhlIGZpcmViYXNlLmpzXG4gICAgICAvLyBmaWxlL2xpbmUgbnVtYmVyIHdoZXJlIHdlIHJlLXRocm93IGl0LCB3aGljaCBpcyB1c2VsZXNzLiBTbyB3ZSBsb2dcbiAgICAgIC8vIGUuc3RhY2sgZXhwbGljaXRseS5cbiAgICAgIGNvbnN0IHN0YWNrID0gZS5zdGFjayB8fCAnJztcbiAgICAgIHdhcm4oJ0V4Y2VwdGlvbiB3YXMgdGhyb3duIGJ5IHVzZXIgY2FsbGJhY2suJywgc3RhY2spO1xuICAgICAgdGhyb3cgZTtcbiAgICB9LCBNYXRoLmZsb29yKDApKTtcbiAgfVxufTtcblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gc2FmZWx5IGNhbGwgb3B0X2NhbGxiYWNrIHdpdGggdGhlIHNwZWNpZmllZCBhcmd1bWVudHMuICBJdDpcbiAqIDEuIFR1cm5zIGludG8gYSBuby1vcCBpZiBvcHRfY2FsbGJhY2sgaXMgbnVsbCBvciB1bmRlZmluZWQuXG4gKiAyLiBXcmFwcyB0aGUgY2FsbCBpbnNpZGUgZXhjZXB0aW9uR3VhcmQgdG8gcHJldmVudCBleGNlcHRpb25zIGZyb20gYnJlYWtpbmcgb3VyIHN0YXRlLlxuICpcbiAqIEBwYXJhbSB7P0Z1bmN0aW9uPX0gY2FsbGJhY2sgT3B0aW9uYWwgb25Db21wbGV0ZSBjYWxsYmFjay5cbiAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3MgQXJiaXRyYXJ5IGFyZ3MgdG8gYmUgcGFzc2VkIHRvIG9wdF9vbkNvbXBsZXRlXG4gKi9cbmV4cG9ydCBjb25zdCBjYWxsVXNlckNhbGxiYWNrID0gZnVuY3Rpb24oXG4gIGNhbGxiYWNrPzogRnVuY3Rpb24gfCBudWxsLFxuICAuLi52YXJfYXJnczogYW55W11cbikge1xuICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgZXhjZXB0aW9uR3VhcmQoZnVuY3Rpb24oKSB7XG4gICAgICBjYWxsYmFjayguLi52YXJfYXJncyk7XG4gICAgfSk7XG4gIH1cbn07XG5cbi8qKlxuICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB3ZSB0aGluayB3ZSdyZSBjdXJyZW50bHkgYmVpbmcgY3Jhd2xlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGJlaW5nQ3Jhd2xlZCA9IGZ1bmN0aW9uKCk6IGJvb2xlYW4ge1xuICBjb25zdCB1c2VyQWdlbnQgPVxuICAgICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJlxuICAgICAgd2luZG93WyduYXZpZ2F0b3InXSAmJlxuICAgICAgd2luZG93WyduYXZpZ2F0b3InXVsndXNlckFnZW50J10pIHx8XG4gICAgJyc7XG5cbiAgLy8gRm9yIG5vdyB3ZSB3aGl0ZWxpc3QgdGhlIG1vc3QgcG9wdWxhciBjcmF3bGVycy4gIFdlIHNob3VsZCByZWZpbmUgdGhpcyB0byBiZSB0aGUgc2V0IG9mIGNyYXdsZXJzIHdlXG4gIC8vIGJlbGlldmUgdG8gc3VwcG9ydCBKYXZhU2NyaXB0L0FKQVggcmVuZGVyaW5nLlxuICAvLyBOT1RFOiBHb29nbGUgV2VibWFzdGVyIFRvb2xzIGRvZXNuJ3QgcmVhbGx5IGJlbG9uZywgYnV0IHRoZWlyIFwiVGhpcyBpcyBob3cgYSB2aXNpdG9yIHRvIHlvdXIgd2Vic2l0ZVxuICAvLyB3b3VsZCBoYXZlIHNlZW4gdGhlIHBhZ2VcIiBpcyBmbGFreSBpZiB3ZSBkb24ndCB0cmVhdCBpdCBhcyBhIGNyYXdsZXIuXG4gIHJldHVybiAoXG4gICAgdXNlckFnZW50LnNlYXJjaChcbiAgICAgIC9nb29nbGVib3R8Z29vZ2xlIHdlYm1hc3RlciB0b29sc3xiaW5nYm90fHlhaG9vISBzbHVycHxiYWlkdXNwaWRlcnx5YW5kZXhib3R8ZHVja2R1Y2tib3QvaVxuICAgICkgPj0gMFxuICApO1xufTtcblxuLyoqXG4gKiBFeHBvcnQgYSBwcm9wZXJ0eSBvZiBhbiBvYmplY3QgdXNpbmcgYSBnZXR0ZXIgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHshT2JqZWN0fSBvYmplY3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0geyFmdW5jdGlvbigpOiAqfSBmbkdldFxuICovXG5leHBvcnQgY29uc3QgZXhwb3J0UHJvcEdldHRlciA9IGZ1bmN0aW9uKFxuICBvYmplY3Q6IE9iamVjdCxcbiAgbmFtZTogc3RyaW5nLFxuICBmbkdldDogKCkgPT4gYW55XG4pIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdCwgbmFtZSwgeyBnZXQ6IGZuR2V0IH0pO1xufTtcblxuLyoqXG4gKiBTYW1lIGFzIHNldFRpbWVvdXQoKSBleGNlcHQgb24gTm9kZS5KUyBpdCB3aWxsIC9ub3QvIHByZXZlbnQgdGhlIHByb2Nlc3MgZnJvbSBleGl0aW5nLlxuICpcbiAqIEl0IGlzIHJlbW92ZWQgd2l0aCBjbGVhclRpbWVvdXQoKSBhcyBub3JtYWwuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gRnVuY3Rpb24gdG8gcnVuLlxuICogQHBhcmFtIHtudW1iZXJ9IHRpbWUgTWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIHJ1bm5pbmcuXG4gKiBAcmV0dXJuIHtudW1iZXJ8T2JqZWN0fSBUaGUgc2V0VGltZW91dCgpIHJldHVybiB2YWx1ZS5cbiAqL1xuZXhwb3J0IGNvbnN0IHNldFRpbWVvdXROb25CbG9ja2luZyA9IGZ1bmN0aW9uKFxuICBmbjogRnVuY3Rpb24sXG4gIHRpbWU6IG51bWJlclxuKTogbnVtYmVyIHwgT2JqZWN0IHtcbiAgY29uc3QgdGltZW91dDogbnVtYmVyIHwgT2JqZWN0ID0gc2V0VGltZW91dChmbiwgdGltZSk7XG4gIGlmICh0eXBlb2YgdGltZW91dCA9PT0gJ29iamVjdCcgJiYgKHRpbWVvdXQgYXMgYW55KVsndW5yZWYnXSkge1xuICAgICh0aW1lb3V0IGFzIGFueSlbJ3VucmVmJ10oKTtcbiAgfVxuICByZXR1cm4gdGltZW91dDtcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBQYXRoLCBWYWxpZGF0aW9uUGF0aCB9IGZyb20gJy4vUGF0aCc7XG5pbXBvcnQgeyBmb3JFYWNoLCBjb250YWlucywgc2FmZUdldCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IGlzSW52YWxpZEpTT05OdW1iZXIgfSBmcm9tICcuL3V0aWwnO1xuaW1wb3J0IHsgZXJyb3JQcmVmaXggYXMgZXJyb3JQcmVmaXhGeG4gfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBzdHJpbmdMZW5ndGggfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBSZXBvSW5mbyB9IGZyb20gJy4uL1JlcG9JbmZvJztcblxuLyoqXG4gKiBUcnVlIGZvciBpbnZhbGlkIEZpcmViYXNlIGtleXNcbiAqIEB0eXBlIHtSZWdFeHB9XG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY29uc3QgSU5WQUxJRF9LRVlfUkVHRVhfID0gL1tcXFtcXF0uIyRcXC9cXHUwMDAwLVxcdTAwMUZcXHUwMDdGXS87XG5cbi8qKlxuICogVHJ1ZSBmb3IgaW52YWxpZCBGaXJlYmFzZSBwYXRocy5cbiAqIEFsbG93cyAnLycgaW4gcGF0aHMuXG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNvbnN0IElOVkFMSURfUEFUSF9SRUdFWF8gPSAvW1xcW1xcXS4jJFxcdTAwMDAtXFx1MDAxRlxcdTAwN0ZdLztcblxuLyoqXG4gKiBNYXhpbXVtIG51bWJlciBvZiBjaGFyYWN0ZXJzIHRvIGFsbG93IGluIGxlYWYgdmFsdWVcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY29uc3QgTUFYX0xFQUZfU0laRV8gPSAxMCAqIDEwMjQgKiAxMDI0O1xuXG4vKipcbiAqIEBwYXJhbSB7Kn0ga2V5XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgY29uc3QgaXNWYWxpZEtleSA9IGZ1bmN0aW9uKGtleTogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIGtleSA9PT0gJ3N0cmluZycgJiYga2V5Lmxlbmd0aCAhPT0gMCAmJiAhSU5WQUxJRF9LRVlfUkVHRVhfLnRlc3Qoa2V5KVxuICApO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aFN0cmluZ1xuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IGlzVmFsaWRQYXRoU3RyaW5nID0gZnVuY3Rpb24ocGF0aFN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIHBhdGhTdHJpbmcgPT09ICdzdHJpbmcnICYmXG4gICAgcGF0aFN0cmluZy5sZW5ndGggIT09IDAgJiZcbiAgICAhSU5WQUxJRF9QQVRIX1JFR0VYXy50ZXN0KHBhdGhTdHJpbmcpXG4gICk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoU3RyaW5nXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgY29uc3QgaXNWYWxpZFJvb3RQYXRoU3RyaW5nID0gZnVuY3Rpb24ocGF0aFN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGlmIChwYXRoU3RyaW5nKSB7XG4gICAgLy8gQWxsb3cgJy8uaW5mby8nIGF0IHRoZSBiZWdpbm5pbmcuXG4gICAgcGF0aFN0cmluZyA9IHBhdGhTdHJpbmcucmVwbGFjZSgvXlxcLypcXC5pbmZvKFxcL3wkKS8sICcvJyk7XG4gIH1cblxuICByZXR1cm4gaXNWYWxpZFBhdGhTdHJpbmcocGF0aFN0cmluZyk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7Kn0gcHJpb3JpdHlcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBjb25zdCBpc1ZhbGlkUHJpb3JpdHkgPSBmdW5jdGlvbihwcmlvcml0eTogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiAoXG4gICAgcHJpb3JpdHkgPT09IG51bGwgfHxcbiAgICB0eXBlb2YgcHJpb3JpdHkgPT09ICdzdHJpbmcnIHx8XG4gICAgKHR5cGVvZiBwcmlvcml0eSA9PT0gJ251bWJlcicgJiYgIWlzSW52YWxpZEpTT05OdW1iZXIocHJpb3JpdHkpKSB8fFxuICAgIChwcmlvcml0eSAmJiB0eXBlb2YgcHJpb3JpdHkgPT09ICdvYmplY3QnICYmIGNvbnRhaW5zKHByaW9yaXR5LCAnLnN2JykpXG4gICk7XG59O1xuXG4vKipcbiAqIFByZS12YWxpZGF0ZSBhIGRhdHVtIHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byBGaXJlYmFzZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZm5OYW1lXG4gKiBAcGFyYW0ge251bWJlcn0gYXJndW1lbnROdW1iZXJcbiAqIEBwYXJhbSB7Kn0gZGF0YVxuICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICogQHBhcmFtIHtib29sZWFufSBvcHRpb25hbFxuICovXG5leHBvcnQgY29uc3QgdmFsaWRhdGVGaXJlYmFzZURhdGFBcmcgPSBmdW5jdGlvbihcbiAgZm5OYW1lOiBzdHJpbmcsXG4gIGFyZ3VtZW50TnVtYmVyOiBudW1iZXIsXG4gIGRhdGE6IGFueSxcbiAgcGF0aDogUGF0aCxcbiAgb3B0aW9uYWw6IGJvb2xlYW5cbikge1xuICBpZiAob3B0aW9uYWwgJiYgZGF0YSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cbiAgdmFsaWRhdGVGaXJlYmFzZURhdGEoXG4gICAgZXJyb3JQcmVmaXhGeG4oZm5OYW1lLCBhcmd1bWVudE51bWJlciwgb3B0aW9uYWwpLFxuICAgIGRhdGEsXG4gICAgcGF0aFxuICApO1xufTtcblxuLyoqXG4gKiBWYWxpZGF0ZSBhIGRhdGEgb2JqZWN0IGNsaWVudC1zaWRlIGJlZm9yZSBzZW5kaW5nIHRvIHNlcnZlci5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZXJyb3JQcmVmaXhcbiAqIEBwYXJhbSB7Kn0gZGF0YVxuICogQHBhcmFtIHshUGF0aHwhVmFsaWRhdGlvblBhdGh9IHBhdGhfXG4gKi9cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZUZpcmViYXNlRGF0YSA9IGZ1bmN0aW9uKFxuICBlcnJvclByZWZpeDogc3RyaW5nLFxuICBkYXRhOiBhbnksXG4gIHBhdGhfOiBQYXRoIHwgVmFsaWRhdGlvblBhdGhcbikge1xuICBjb25zdCBwYXRoID1cbiAgICBwYXRoXyBpbnN0YW5jZW9mIFBhdGggPyBuZXcgVmFsaWRhdGlvblBhdGgocGF0aF8sIGVycm9yUHJlZml4KSA6IHBhdGhfO1xuXG4gIGlmIChkYXRhID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXggKyAnY29udGFpbnMgdW5kZWZpbmVkICcgKyBwYXRoLnRvRXJyb3JTdHJpbmcoKSk7XG4gIH1cbiAgaWYgKHR5cGVvZiBkYXRhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgZXJyb3JQcmVmaXggK1xuICAgICAgICAnY29udGFpbnMgYSBmdW5jdGlvbiAnICtcbiAgICAgICAgcGF0aC50b0Vycm9yU3RyaW5nKCkgK1xuICAgICAgICAnIHdpdGggY29udGVudHMgPSAnICtcbiAgICAgICAgZGF0YS50b1N0cmluZygpXG4gICAgKTtcbiAgfVxuICBpZiAoaXNJbnZhbGlkSlNPTk51bWJlcihkYXRhKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGVycm9yUHJlZml4ICsgJ2NvbnRhaW5zICcgKyBkYXRhLnRvU3RyaW5nKCkgKyAnICcgKyBwYXRoLnRvRXJyb3JTdHJpbmcoKVxuICAgICk7XG4gIH1cblxuICAvLyBDaGVjayBtYXggbGVhZiBzaXplLCBidXQgdHJ5IHRvIGF2b2lkIHRoZSB1dGY4IGNvbnZlcnNpb24gaWYgd2UgY2FuLlxuICBpZiAoXG4gICAgdHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnICYmXG4gICAgZGF0YS5sZW5ndGggPiBNQVhfTEVBRl9TSVpFXyAvIDMgJiZcbiAgICBzdHJpbmdMZW5ndGgoZGF0YSkgPiBNQVhfTEVBRl9TSVpFX1xuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBlcnJvclByZWZpeCArXG4gICAgICAgICdjb250YWlucyBhIHN0cmluZyBncmVhdGVyIHRoYW4gJyArXG4gICAgICAgIE1BWF9MRUFGX1NJWkVfICtcbiAgICAgICAgJyB1dGY4IGJ5dGVzICcgK1xuICAgICAgICBwYXRoLnRvRXJyb3JTdHJpbmcoKSArXG4gICAgICAgIFwiICgnXCIgK1xuICAgICAgICBkYXRhLnN1YnN0cmluZygwLCA1MCkgK1xuICAgICAgICBcIi4uLicpXCJcbiAgICApO1xuICB9XG5cbiAgLy8gVE9ETyA9IFBlcmYgPSBDb25zaWRlciBjb21iaW5pbmcgdGhlIHJlY3Vyc2l2ZSB2YWxpZGF0aW9uIG9mIGtleXMgaW50byBOb2RlRnJvbUpTT05cbiAgLy8gdG8gc2F2ZSBleHRyYSB3YWxraW5nIG9mIGxhcmdlIG9iamVjdHMuXG4gIGlmIChkYXRhICYmIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0Jykge1xuICAgIGxldCBoYXNEb3RWYWx1ZSA9IGZhbHNlLFxuICAgICAgaGFzQWN0dWFsQ2hpbGQgPSBmYWxzZTtcbiAgICBmb3JFYWNoKGRhdGEsIGZ1bmN0aW9uKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KSB7XG4gICAgICBpZiAoa2V5ID09PSAnLnZhbHVlJykge1xuICAgICAgICBoYXNEb3RWYWx1ZSA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKGtleSAhPT0gJy5wcmlvcml0eScgJiYga2V5ICE9PSAnLnN2Jykge1xuICAgICAgICBoYXNBY3R1YWxDaGlsZCA9IHRydWU7XG4gICAgICAgIGlmICghaXNWYWxpZEtleShrZXkpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgZXJyb3JQcmVmaXggK1xuICAgICAgICAgICAgICAnIGNvbnRhaW5zIGFuIGludmFsaWQga2V5ICgnICtcbiAgICAgICAgICAgICAga2V5ICtcbiAgICAgICAgICAgICAgJykgJyArXG4gICAgICAgICAgICAgIHBhdGgudG9FcnJvclN0cmluZygpICtcbiAgICAgICAgICAgICAgJy4gIEtleXMgbXVzdCBiZSBub24tZW1wdHkgc3RyaW5ncyAnICtcbiAgICAgICAgICAgICAgJ2FuZCBjYW5cXCd0IGNvbnRhaW4gXCIuXCIsIFwiI1wiLCBcIiRcIiwgXCIvXCIsIFwiW1wiLCBvciBcIl1cIidcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHBhdGgucHVzaChrZXkpO1xuICAgICAgdmFsaWRhdGVGaXJlYmFzZURhdGEoZXJyb3JQcmVmaXgsIHZhbHVlLCBwYXRoKTtcbiAgICAgIHBhdGgucG9wKCk7XG4gICAgfSk7XG5cbiAgICBpZiAoaGFzRG90VmFsdWUgJiYgaGFzQWN0dWFsQ2hpbGQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgZXJyb3JQcmVmaXggK1xuICAgICAgICAgICcgY29udGFpbnMgXCIudmFsdWVcIiBjaGlsZCAnICtcbiAgICAgICAgICBwYXRoLnRvRXJyb3JTdHJpbmcoKSArXG4gICAgICAgICAgJyBpbiBhZGRpdGlvbiB0byBhY3R1YWwgY2hpbGRyZW4uJ1xuICAgICAgKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogUHJlLXZhbGlkYXRlIHBhdGhzIHBhc3NlZCBpbiB0aGUgZmlyZWJhc2UgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGVycm9yUHJlZml4XG4gKiBAcGFyYW0ge0FycmF5PCFQYXRoPn0gbWVyZ2VQYXRoc1xuICovXG5leHBvcnQgY29uc3QgdmFsaWRhdGVGaXJlYmFzZU1lcmdlUGF0aHMgPSBmdW5jdGlvbihcbiAgZXJyb3JQcmVmaXg6IHN0cmluZyxcbiAgbWVyZ2VQYXRoczogUGF0aFtdXG4pIHtcbiAgbGV0IGksIGN1clBhdGg7XG4gIGZvciAoaSA9IDA7IGkgPCBtZXJnZVBhdGhzLmxlbmd0aDsgaSsrKSB7XG4gICAgY3VyUGF0aCA9IG1lcmdlUGF0aHNbaV07XG4gICAgY29uc3Qga2V5cyA9IGN1clBhdGguc2xpY2UoKTtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGtleXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIGlmIChrZXlzW2pdID09PSAnLnByaW9yaXR5JyAmJiBqID09PSBrZXlzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgLy8gLnByaW9yaXR5IGlzIE9LXG4gICAgICB9IGVsc2UgaWYgKCFpc1ZhbGlkS2V5KGtleXNbal0pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBlcnJvclByZWZpeCArXG4gICAgICAgICAgICAnY29udGFpbnMgYW4gaW52YWxpZCBrZXkgKCcgK1xuICAgICAgICAgICAga2V5c1tqXSArXG4gICAgICAgICAgICAnKSBpbiBwYXRoICcgK1xuICAgICAgICAgICAgY3VyUGF0aC50b1N0cmluZygpICtcbiAgICAgICAgICAgICcuIEtleXMgbXVzdCBiZSBub24tZW1wdHkgc3RyaW5ncyAnICtcbiAgICAgICAgICAgICdhbmQgY2FuXFwndCBjb250YWluIFwiLlwiLCBcIiNcIiwgXCIkXCIsIFwiL1wiLCBcIltcIiwgb3IgXCJdXCInXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hlY2sgdGhhdCB1cGRhdGUga2V5cyBhcmUgbm90IGRlc2NlbmRhbnRzIG9mIGVhY2ggb3RoZXIuXG4gIC8vIFdlIHJlbHkgb24gdGhlIHByb3BlcnR5IHRoYXQgc29ydGluZyBndWFyYW50ZWVzIHRoYXQgYW5jZXN0b3JzIGNvbWVcbiAgLy8gcmlnaHQgYmVmb3JlIGRlc2NlbmRhbnRzLlxuICBtZXJnZVBhdGhzLnNvcnQoUGF0aC5jb21wYXJlUGF0aHMpO1xuICBsZXQgcHJldlBhdGg6IFBhdGggfCBudWxsID0gbnVsbDtcbiAgZm9yIChpID0gMDsgaSA8IG1lcmdlUGF0aHMubGVuZ3RoOyBpKyspIHtcbiAgICBjdXJQYXRoID0gbWVyZ2VQYXRoc1tpXTtcbiAgICBpZiAocHJldlBhdGggIT09IG51bGwgJiYgcHJldlBhdGguY29udGFpbnMoY3VyUGF0aCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgZXJyb3JQcmVmaXggK1xuICAgICAgICAgICdjb250YWlucyBhIHBhdGggJyArXG4gICAgICAgICAgcHJldlBhdGgudG9TdHJpbmcoKSArXG4gICAgICAgICAgJyB0aGF0IGlzIGFuY2VzdG9yIG9mIGFub3RoZXIgcGF0aCAnICtcbiAgICAgICAgICBjdXJQYXRoLnRvU3RyaW5nKClcbiAgICAgICk7XG4gICAgfVxuICAgIHByZXZQYXRoID0gY3VyUGF0aDtcbiAgfVxufTtcblxuLyoqXG4gKiBwcmUtdmFsaWRhdGUgYW4gb2JqZWN0IHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byBmaXJlYmFzZSBmdW5jdGlvbiAoXG4gKiBtdXN0IGJlIGFuIG9iamVjdCAtIGUuZy4gZm9yIGZpcmViYXNlLnVwZGF0ZSgpKS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZm5OYW1lXG4gKiBAcGFyYW0ge251bWJlcn0gYXJndW1lbnROdW1iZXJcbiAqIEBwYXJhbSB7Kn0gZGF0YVxuICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICogQHBhcmFtIHtib29sZWFufSBvcHRpb25hbFxuICovXG5leHBvcnQgY29uc3QgdmFsaWRhdGVGaXJlYmFzZU1lcmdlRGF0YUFyZyA9IGZ1bmN0aW9uKFxuICBmbk5hbWU6IHN0cmluZyxcbiAgYXJndW1lbnROdW1iZXI6IG51bWJlcixcbiAgZGF0YTogYW55LFxuICBwYXRoOiBQYXRoLFxuICBvcHRpb25hbDogYm9vbGVhblxuKSB7XG4gIGlmIChvcHRpb25hbCAmJiBkYXRhID09PSB1bmRlZmluZWQpIHJldHVybjtcblxuICBjb25zdCBlcnJvclByZWZpeCA9IGVycm9yUHJlZml4RnhuKGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIG9wdGlvbmFsKTtcblxuICBpZiAoIShkYXRhICYmIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JykgfHwgQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGVycm9yUHJlZml4ICsgJyBtdXN0IGJlIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBjaGlsZHJlbiB0byByZXBsYWNlLidcbiAgICApO1xuICB9XG5cbiAgY29uc3QgbWVyZ2VQYXRoczogUGF0aFtdID0gW107XG4gIGZvckVhY2goZGF0YSwgZnVuY3Rpb24oa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcbiAgICBjb25zdCBjdXJQYXRoID0gbmV3IFBhdGgoa2V5KTtcbiAgICB2YWxpZGF0ZUZpcmViYXNlRGF0YShlcnJvclByZWZpeCwgdmFsdWUsIHBhdGguY2hpbGQoY3VyUGF0aCkpO1xuICAgIGlmIChjdXJQYXRoLmdldEJhY2soKSA9PT0gJy5wcmlvcml0eScpIHtcbiAgICAgIGlmICghaXNWYWxpZFByaW9yaXR5KHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgZXJyb3JQcmVmaXggK1xuICAgICAgICAgICAgXCJjb250YWlucyBhbiBpbnZhbGlkIHZhbHVlIGZvciAnXCIgK1xuICAgICAgICAgICAgY3VyUGF0aC50b1N0cmluZygpICtcbiAgICAgICAgICAgIFwiJywgd2hpY2ggbXVzdCBiZSBhIHZhbGlkIFwiICtcbiAgICAgICAgICAgICdGaXJlYmFzZSBwcmlvcml0eSAoYSBzdHJpbmcsIGZpbml0ZSBudW1iZXIsIHNlcnZlciB2YWx1ZSwgb3IgbnVsbCkuJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICBtZXJnZVBhdGhzLnB1c2goY3VyUGF0aCk7XG4gIH0pO1xuICB2YWxpZGF0ZUZpcmViYXNlTWVyZ2VQYXRocyhlcnJvclByZWZpeCwgbWVyZ2VQYXRocyk7XG59O1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGVQcmlvcml0eSA9IGZ1bmN0aW9uKFxuICBmbk5hbWU6IHN0cmluZyxcbiAgYXJndW1lbnROdW1iZXI6IG51bWJlcixcbiAgcHJpb3JpdHk6IGFueSxcbiAgb3B0aW9uYWw6IGJvb2xlYW5cbikge1xuICBpZiAob3B0aW9uYWwgJiYgcHJpb3JpdHkgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICBpZiAoaXNJbnZhbGlkSlNPTk51bWJlcihwcmlvcml0eSkpXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgZXJyb3JQcmVmaXhGeG4oZm5OYW1lLCBhcmd1bWVudE51bWJlciwgb3B0aW9uYWwpICtcbiAgICAgICAgJ2lzICcgK1xuICAgICAgICBwcmlvcml0eS50b1N0cmluZygpICtcbiAgICAgICAgJywgYnV0IG11c3QgYmUgYSB2YWxpZCBGaXJlYmFzZSBwcmlvcml0eSAoYSBzdHJpbmcsIGZpbml0ZSBudW1iZXIsICcgK1xuICAgICAgICAnc2VydmVyIHZhbHVlLCBvciBudWxsKS4nXG4gICAgKTtcbiAgLy8gU3BlY2lhbCBjYXNlIHRvIGFsbG93IGltcG9ydGluZyBkYXRhIHdpdGggYSAuc3YuXG4gIGlmICghaXNWYWxpZFByaW9yaXR5KHByaW9yaXR5KSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBlcnJvclByZWZpeEZ4bihmbk5hbWUsIGFyZ3VtZW50TnVtYmVyLCBvcHRpb25hbCkgK1xuICAgICAgICAnbXVzdCBiZSBhIHZhbGlkIEZpcmViYXNlIHByaW9yaXR5ICcgK1xuICAgICAgICAnKGEgc3RyaW5nLCBmaW5pdGUgbnVtYmVyLCBzZXJ2ZXIgdmFsdWUsIG9yIG51bGwpLidcbiAgICApO1xufTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlRXZlbnRUeXBlID0gZnVuY3Rpb24oXG4gIGZuTmFtZTogc3RyaW5nLFxuICBhcmd1bWVudE51bWJlcjogbnVtYmVyLFxuICBldmVudFR5cGU6IHN0cmluZyxcbiAgb3B0aW9uYWw6IGJvb2xlYW5cbikge1xuICBpZiAob3B0aW9uYWwgJiYgZXZlbnRUeXBlID09PSB1bmRlZmluZWQpIHJldHVybjtcblxuICBzd2l0Y2ggKGV2ZW50VHlwZSkge1xuICAgIGNhc2UgJ3ZhbHVlJzpcbiAgICBjYXNlICdjaGlsZF9hZGRlZCc6XG4gICAgY2FzZSAnY2hpbGRfcmVtb3ZlZCc6XG4gICAgY2FzZSAnY2hpbGRfY2hhbmdlZCc6XG4gICAgY2FzZSAnY2hpbGRfbW92ZWQnOlxuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgZXJyb3JQcmVmaXhGeG4oZm5OYW1lLCBhcmd1bWVudE51bWJlciwgb3B0aW9uYWwpICtcbiAgICAgICAgICAnbXVzdCBiZSBhIHZhbGlkIGV2ZW50IHR5cGUgPSBcInZhbHVlXCIsIFwiY2hpbGRfYWRkZWRcIiwgXCJjaGlsZF9yZW1vdmVkXCIsICcgK1xuICAgICAgICAgICdcImNoaWxkX2NoYW5nZWRcIiwgb3IgXCJjaGlsZF9tb3ZlZFwiLidcbiAgICAgICk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZUtleSA9IGZ1bmN0aW9uKFxuICBmbk5hbWU6IHN0cmluZyxcbiAgYXJndW1lbnROdW1iZXI6IG51bWJlcixcbiAga2V5OiBzdHJpbmcsXG4gIG9wdGlvbmFsOiBib29sZWFuXG4pIHtcbiAgaWYgKG9wdGlvbmFsICYmIGtleSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gIGlmICghaXNWYWxpZEtleShrZXkpKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGVycm9yUHJlZml4RnhuKGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIG9wdGlvbmFsKSArXG4gICAgICAgICd3YXMgYW4gaW52YWxpZCBrZXkgPSBcIicgK1xuICAgICAgICBrZXkgK1xuICAgICAgICAnXCIuICBGaXJlYmFzZSBrZXlzIG11c3QgYmUgbm9uLWVtcHR5IHN0cmluZ3MgYW5kICcgK1xuICAgICAgICAnY2FuXFwndCBjb250YWluIFwiLlwiLCBcIiNcIiwgXCIkXCIsIFwiL1wiLCBcIltcIiwgb3IgXCJdXCIpLidcbiAgICApO1xufTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlUGF0aFN0cmluZyA9IGZ1bmN0aW9uKFxuICBmbk5hbWU6IHN0cmluZyxcbiAgYXJndW1lbnROdW1iZXI6IG51bWJlcixcbiAgcGF0aFN0cmluZzogc3RyaW5nLFxuICBvcHRpb25hbDogYm9vbGVhblxuKSB7XG4gIGlmIChvcHRpb25hbCAmJiBwYXRoU3RyaW5nID09PSB1bmRlZmluZWQpIHJldHVybjtcblxuICBpZiAoIWlzVmFsaWRQYXRoU3RyaW5nKHBhdGhTdHJpbmcpKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGVycm9yUHJlZml4RnhuKGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIG9wdGlvbmFsKSArXG4gICAgICAgICd3YXMgYW4gaW52YWxpZCBwYXRoID0gXCInICtcbiAgICAgICAgcGF0aFN0cmluZyArXG4gICAgICAgICdcIi4gUGF0aHMgbXVzdCBiZSBub24tZW1wdHkgc3RyaW5ncyBhbmQgJyArXG4gICAgICAgICdjYW5cXCd0IGNvbnRhaW4gXCIuXCIsIFwiI1wiLCBcIiRcIiwgXCJbXCIsIG9yIFwiXVwiJ1xuICAgICk7XG59O1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGVSb290UGF0aFN0cmluZyA9IGZ1bmN0aW9uKFxuICBmbk5hbWU6IHN0cmluZyxcbiAgYXJndW1lbnROdW1iZXI6IG51bWJlcixcbiAgcGF0aFN0cmluZzogc3RyaW5nLFxuICBvcHRpb25hbDogYm9vbGVhblxuKSB7XG4gIGlmIChwYXRoU3RyaW5nKSB7XG4gICAgLy8gQWxsb3cgJy8uaW5mby8nIGF0IHRoZSBiZWdpbm5pbmcuXG4gICAgcGF0aFN0cmluZyA9IHBhdGhTdHJpbmcucmVwbGFjZSgvXlxcLypcXC5pbmZvKFxcL3wkKS8sICcvJyk7XG4gIH1cblxuICB2YWxpZGF0ZVBhdGhTdHJpbmcoZm5OYW1lLCBhcmd1bWVudE51bWJlciwgcGF0aFN0cmluZywgb3B0aW9uYWwpO1xufTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlV3JpdGFibGVQYXRoID0gZnVuY3Rpb24oZm5OYW1lOiBzdHJpbmcsIHBhdGg6IFBhdGgpIHtcbiAgaWYgKHBhdGguZ2V0RnJvbnQoKSA9PT0gJy5pbmZvJykge1xuICAgIHRocm93IG5ldyBFcnJvcihmbk5hbWUgKyBcIiBmYWlsZWQgPSBDYW4ndCBtb2RpZnkgZGF0YSB1bmRlciAvLmluZm8vXCIpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGVVcmwgPSBmdW5jdGlvbihcbiAgZm5OYW1lOiBzdHJpbmcsXG4gIGFyZ3VtZW50TnVtYmVyOiBudW1iZXIsXG4gIHBhcnNlZFVybDogeyByZXBvSW5mbzogUmVwb0luZm87IHBhdGg6IFBhdGggfVxuKSB7XG4gIC8vIFRPRE8gPSBWYWxpZGF0ZSBzZXJ2ZXIgYmV0dGVyLlxuICBjb25zdCBwYXRoU3RyaW5nID0gcGFyc2VkVXJsLnBhdGgudG9TdHJpbmcoKTtcbiAgaWYgKFxuICAgICEodHlwZW9mIHBhcnNlZFVybC5yZXBvSW5mby5ob3N0ID09PSAnc3RyaW5nJykgfHxcbiAgICBwYXJzZWRVcmwucmVwb0luZm8uaG9zdC5sZW5ndGggPT09IDAgfHxcbiAgICAhaXNWYWxpZEtleShwYXJzZWRVcmwucmVwb0luZm8ubmFtZXNwYWNlKSB8fFxuICAgIChwYXRoU3RyaW5nLmxlbmd0aCAhPT0gMCAmJiAhaXNWYWxpZFJvb3RQYXRoU3RyaW5nKHBhdGhTdHJpbmcpKVxuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBlcnJvclByZWZpeEZ4bihmbk5hbWUsIGFyZ3VtZW50TnVtYmVyLCBmYWxzZSkgK1xuICAgICAgICAnbXVzdCBiZSBhIHZhbGlkIGZpcmViYXNlIFVSTCBhbmQgJyArXG4gICAgICAgICd0aGUgcGF0aCBjYW5cXCd0IGNvbnRhaW4gXCIuXCIsIFwiI1wiLCBcIiRcIiwgXCJbXCIsIG9yIFwiXVwiLidcbiAgICApO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGVDcmVkZW50aWFsID0gZnVuY3Rpb24oXG4gIGZuTmFtZTogc3RyaW5nLFxuICBhcmd1bWVudE51bWJlcjogbnVtYmVyLFxuICBjcmVkOiBhbnksXG4gIG9wdGlvbmFsOiBib29sZWFuXG4pIHtcbiAgaWYgKG9wdGlvbmFsICYmIGNyZWQgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICBpZiAoISh0eXBlb2YgY3JlZCA9PT0gJ3N0cmluZycpKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGVycm9yUHJlZml4RnhuKGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIG9wdGlvbmFsKSArXG4gICAgICAgICdtdXN0IGJlIGEgdmFsaWQgY3JlZGVudGlhbCAoYSBzdHJpbmcpLidcbiAgICApO1xufTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlQm9vbGVhbiA9IGZ1bmN0aW9uKFxuICBmbk5hbWU6IHN0cmluZyxcbiAgYXJndW1lbnROdW1iZXI6IG51bWJlcixcbiAgYm9vbDogYW55LFxuICBvcHRpb25hbDogYm9vbGVhblxuKSB7XG4gIGlmIChvcHRpb25hbCAmJiBib29sID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgaWYgKHR5cGVvZiBib29sICE9PSAnYm9vbGVhbicpXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgZXJyb3JQcmVmaXhGeG4oZm5OYW1lLCBhcmd1bWVudE51bWJlciwgb3B0aW9uYWwpICsgJ211c3QgYmUgYSBib29sZWFuLidcbiAgICApO1xufTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlU3RyaW5nID0gZnVuY3Rpb24oXG4gIGZuTmFtZTogc3RyaW5nLFxuICBhcmd1bWVudE51bWJlcjogbnVtYmVyLFxuICBzdHJpbmc6IGFueSxcbiAgb3B0aW9uYWw6IGJvb2xlYW5cbikge1xuICBpZiAob3B0aW9uYWwgJiYgc3RyaW5nID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgaWYgKCEodHlwZW9mIHN0cmluZyA9PT0gJ3N0cmluZycpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgZXJyb3JQcmVmaXhGeG4oZm5OYW1lLCBhcmd1bWVudE51bWJlciwgb3B0aW9uYWwpICtcbiAgICAgICAgJ211c3QgYmUgYSB2YWxpZCBzdHJpbmcuJ1xuICAgICk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZU9iamVjdCA9IGZ1bmN0aW9uKFxuICBmbk5hbWU6IHN0cmluZyxcbiAgYXJndW1lbnROdW1iZXI6IG51bWJlcixcbiAgb2JqOiBhbnksXG4gIG9wdGlvbmFsOiBib29sZWFuXG4pIHtcbiAgaWYgKG9wdGlvbmFsICYmIG9iaiA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gIGlmICghKG9iaiAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JykgfHwgb2JqID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgZXJyb3JQcmVmaXhGeG4oZm5OYW1lLCBhcmd1bWVudE51bWJlciwgb3B0aW9uYWwpICtcbiAgICAgICAgJ211c3QgYmUgYSB2YWxpZCBvYmplY3QuJ1xuICAgICk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZU9iamVjdENvbnRhaW5zS2V5ID0gZnVuY3Rpb24oXG4gIGZuTmFtZTogc3RyaW5nLFxuICBhcmd1bWVudE51bWJlcjogbnVtYmVyLFxuICBvYmo6IGFueSxcbiAga2V5OiBzdHJpbmcsXG4gIG9wdGlvbmFsOiBib29sZWFuLFxuICBvcHRfdHlwZT86IHN0cmluZ1xuKSB7XG4gIGNvbnN0IG9iamVjdENvbnRhaW5zS2V5ID1cbiAgICBvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgY29udGFpbnMob2JqLCBrZXkpO1xuXG4gIGlmICghb2JqZWN0Q29udGFpbnNLZXkpIHtcbiAgICBpZiAob3B0aW9uYWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBlcnJvclByZWZpeEZ4bihmbk5hbWUsIGFyZ3VtZW50TnVtYmVyLCBvcHRpb25hbCkgK1xuICAgICAgICAgICdtdXN0IGNvbnRhaW4gdGhlIGtleSBcIicgK1xuICAgICAgICAgIGtleSArXG4gICAgICAgICAgJ1wiJ1xuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBpZiAob3B0X3R5cGUpIHtcbiAgICBjb25zdCB2YWwgPSBzYWZlR2V0KG9iaiwga2V5KTtcbiAgICBpZiAoXG4gICAgICAob3B0X3R5cGUgPT09ICdudW1iZXInICYmICEodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpKSB8fFxuICAgICAgKG9wdF90eXBlID09PSAnc3RyaW5nJyAmJiAhKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSkgfHxcbiAgICAgIChvcHRfdHlwZSA9PT0gJ2Jvb2xlYW4nICYmICEodHlwZW9mIHZhbCA9PT0gJ2Jvb2xlYW4nKSkgfHxcbiAgICAgIChvcHRfdHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiAhKHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpKSB8fFxuICAgICAgKG9wdF90eXBlID09PSAnb2JqZWN0JyAmJiAhKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSAmJiB2YWwpXG4gICAgKSB7XG4gICAgICBpZiAob3B0aW9uYWwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGVycm9yUHJlZml4RnhuKGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIG9wdGlvbmFsKSArXG4gICAgICAgICAgICAnY29udGFpbnMgaW52YWxpZCB2YWx1ZSBmb3Iga2V5IFwiJyArXG4gICAgICAgICAgICBrZXkgK1xuICAgICAgICAgICAgJ1wiIChtdXN0IGJlIG9mIHR5cGUgXCInICtcbiAgICAgICAgICAgIG9wdF90eXBlICtcbiAgICAgICAgICAgICdcIiknXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgZXJyb3JQcmVmaXhGeG4oZm5OYW1lLCBhcmd1bWVudE51bWJlciwgb3B0aW9uYWwpICtcbiAgICAgICAgICAgICdtdXN0IGNvbnRhaW4gdGhlIGtleSBcIicgK1xuICAgICAgICAgICAga2V5ICtcbiAgICAgICAgICAgICdcIiB3aXRoIHR5cGUgXCInICtcbiAgICAgICAgICAgIG9wdF90eXBlICtcbiAgICAgICAgICAgICdcIidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vc25hcC9Ob2RlJztcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi91dGlsL1BhdGgnO1xuXG4vKipcbiAqIEEgY2FjaGUgbm9kZSBvbmx5IHN0b3JlcyBjb21wbGV0ZSBjaGlsZHJlbi4gQWRkaXRpb25hbGx5IGl0IGhvbGRzIGEgZmxhZyB3aGV0aGVyIHRoZSBub2RlIGNhbiBiZSBjb25zaWRlcmVkIGZ1bGx5XG4gKiBpbml0aWFsaXplZCBpbiB0aGUgc2Vuc2UgdGhhdCB3ZSBrbm93IGF0IG9uZSBwb2ludCBpbiB0aW1lIHRoaXMgcmVwcmVzZW50ZWQgYSB2YWxpZCBzdGF0ZSBvZiB0aGUgd29ybGQsIGUuZy5cbiAqIGluaXRpYWxpemVkIHdpdGggZGF0YSBmcm9tIHRoZSBzZXJ2ZXIsIG9yIGEgY29tcGxldGUgb3ZlcndyaXRlIGJ5IHRoZSBjbGllbnQuIFRoZSBmaWx0ZXJlZCBmbGFnIGFsc28gdHJhY2tzXG4gKiB3aGV0aGVyIGEgbm9kZSBwb3RlbnRpYWxseSBoYWQgY2hpbGRyZW4gcmVtb3ZlZCBkdWUgdG8gYSBmaWx0ZXIuXG4gKi9cbmV4cG9ydCBjbGFzcyBDYWNoZU5vZGUge1xuICAvKipcbiAgICogQHBhcmFtIHshTm9kZX0gbm9kZV9cbiAgICogQHBhcmFtIHtib29sZWFufSBmdWxseUluaXRpYWxpemVkX1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZpbHRlcmVkX1xuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBub2RlXzogTm9kZSxcbiAgICBwcml2YXRlIGZ1bGx5SW5pdGlhbGl6ZWRfOiBib29sZWFuLFxuICAgIHByaXZhdGUgZmlsdGVyZWRfOiBib29sZWFuXG4gICkge31cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoaXMgbm9kZSB3YXMgZnVsbHkgaW5pdGlhbGl6ZWQgd2l0aCBlaXRoZXIgc2VydmVyIGRhdGEgb3IgYSBjb21wbGV0ZSBvdmVyd3JpdGUgYnkgdGhlIGNsaWVudFxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNGdWxseUluaXRpYWxpemVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZ1bGx5SW5pdGlhbGl6ZWRfO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGlzIG5vZGUgaXMgcG90ZW50aWFsbHkgbWlzc2luZyBjaGlsZHJlbiBkdWUgdG8gYSBmaWx0ZXIgYXBwbGllZCB0byB0aGUgbm9kZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNGaWx0ZXJlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5maWx0ZXJlZF87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNDb21wbGV0ZUZvclBhdGgocGF0aDogUGF0aCk6IGJvb2xlYW4ge1xuICAgIGlmIChwYXRoLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNGdWxseUluaXRpYWxpemVkKCkgJiYgIXRoaXMuZmlsdGVyZWRfO1xuICAgIH1cblxuICAgIGNvbnN0IGNoaWxkS2V5ID0gcGF0aC5nZXRGcm9udCgpO1xuICAgIHJldHVybiB0aGlzLmlzQ29tcGxldGVGb3JDaGlsZChjaGlsZEtleSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshc3RyaW5nfSBrZXlcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzQ29tcGxldGVGb3JDaGlsZChrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICAodGhpcy5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSAmJiAhdGhpcy5maWx0ZXJlZF8pIHx8IHRoaXMubm9kZV8uaGFzQ2hpbGQoa2V5KVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IU5vZGV9XG4gICAqL1xuICBnZXROb2RlKCk6IE5vZGUge1xuICAgIHJldHVybiB0aGlzLm5vZGVfO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vc25hcC9Ob2RlJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBzdHJ1Y3RcbiAqIEBwYXJhbSB7IXN0cmluZ30gdHlwZSBUaGUgZXZlbnQgdHlwZVxuICogQHBhcmFtIHshTm9kZX0gc25hcHNob3ROb2RlIFRoZSBkYXRhXG4gKiBAcGFyYW0ge3N0cmluZz19IGNoaWxkTmFtZSBUaGUgbmFtZSBmb3IgdGhpcyBjaGlsZCwgaWYgaXQncyBhIGNoaWxkIGV2ZW50XG4gKiBAcGFyYW0ge05vZGU9fSBvbGRTbmFwIFVzZWQgZm9yIGludGVybWVkaWF0ZSBwcm9jZXNzaW5nIG9mIGNoaWxkIGNoYW5nZWQgZXZlbnRzXG4gKiBAcGFyYW0ge3N0cmluZz19IHByZXZOYW1lIFRoZSBuYW1lIGZvciB0aGUgcHJldmlvdXMgY2hpbGQsIGlmIGFwcGxpY2FibGVcbiAqL1xuZXhwb3J0IGNsYXNzIENoYW5nZSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyB0eXBlOiBzdHJpbmcsXG4gICAgcHVibGljIHNuYXBzaG90Tm9kZTogTm9kZSxcbiAgICBwdWJsaWMgY2hpbGROYW1lPzogc3RyaW5nLFxuICAgIHB1YmxpYyBvbGRTbmFwPzogTm9kZSxcbiAgICBwdWJsaWMgcHJldk5hbWU/OiBzdHJpbmdcbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFOb2RlfSBzbmFwc2hvdFxuICAgKiBAcmV0dXJuIHshQ2hhbmdlfVxuICAgKi9cbiAgc3RhdGljIHZhbHVlQ2hhbmdlKHNuYXBzaG90OiBOb2RlKTogQ2hhbmdlIHtcbiAgICByZXR1cm4gbmV3IENoYW5nZShDaGFuZ2UuVkFMVUUsIHNuYXBzaG90KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2hpbGRLZXlcbiAgICogQHBhcmFtIHshTm9kZX0gc25hcHNob3RcbiAgICogQHJldHVybiB7IUNoYW5nZX1cbiAgICovXG4gIHN0YXRpYyBjaGlsZEFkZGVkQ2hhbmdlKGNoaWxkS2V5OiBzdHJpbmcsIHNuYXBzaG90OiBOb2RlKTogQ2hhbmdlIHtcbiAgICByZXR1cm4gbmV3IENoYW5nZShDaGFuZ2UuQ0hJTERfQURERUQsIHNuYXBzaG90LCBjaGlsZEtleSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNoaWxkS2V5XG4gICAqIEBwYXJhbSB7IU5vZGV9IHNuYXBzaG90XG4gICAqIEByZXR1cm4geyFDaGFuZ2V9XG4gICAqL1xuICBzdGF0aWMgY2hpbGRSZW1vdmVkQ2hhbmdlKGNoaWxkS2V5OiBzdHJpbmcsIHNuYXBzaG90OiBOb2RlKTogQ2hhbmdlIHtcbiAgICByZXR1cm4gbmV3IENoYW5nZShDaGFuZ2UuQ0hJTERfUkVNT1ZFRCwgc25hcHNob3QsIGNoaWxkS2V5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2hpbGRLZXlcbiAgICogQHBhcmFtIHshTm9kZX0gbmV3U25hcHNob3RcbiAgICogQHBhcmFtIHshTm9kZX0gb2xkU25hcHNob3RcbiAgICogQHJldHVybiB7IUNoYW5nZX1cbiAgICovXG4gIHN0YXRpYyBjaGlsZENoYW5nZWRDaGFuZ2UoXG4gICAgY2hpbGRLZXk6IHN0cmluZyxcbiAgICBuZXdTbmFwc2hvdDogTm9kZSxcbiAgICBvbGRTbmFwc2hvdDogTm9kZVxuICApOiBDaGFuZ2Uge1xuICAgIHJldHVybiBuZXcgQ2hhbmdlKENoYW5nZS5DSElMRF9DSEFOR0VELCBuZXdTbmFwc2hvdCwgY2hpbGRLZXksIG9sZFNuYXBzaG90KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2hpbGRLZXlcbiAgICogQHBhcmFtIHshTm9kZX0gc25hcHNob3RcbiAgICogQHJldHVybiB7IUNoYW5nZX1cbiAgICovXG4gIHN0YXRpYyBjaGlsZE1vdmVkQ2hhbmdlKGNoaWxkS2V5OiBzdHJpbmcsIHNuYXBzaG90OiBOb2RlKTogQ2hhbmdlIHtcbiAgICByZXR1cm4gbmV3IENoYW5nZShDaGFuZ2UuQ0hJTERfTU9WRUQsIHNuYXBzaG90LCBjaGlsZEtleSk7XG4gIH1cblxuICAvL2V2ZW50IHR5cGVzXG4gIC8qKiBFdmVudCB0eXBlIGZvciBhIGNoaWxkIGFkZGVkICovXG4gIHN0YXRpYyBDSElMRF9BRERFRCA9ICdjaGlsZF9hZGRlZCc7XG5cbiAgLyoqIEV2ZW50IHR5cGUgZm9yIGEgY2hpbGQgcmVtb3ZlZCAqL1xuICBzdGF0aWMgQ0hJTERfUkVNT1ZFRCA9ICdjaGlsZF9yZW1vdmVkJztcblxuICAvKiogRXZlbnQgdHlwZSBmb3IgYSBjaGlsZCBjaGFuZ2VkICovXG4gIHN0YXRpYyBDSElMRF9DSEFOR0VEID0gJ2NoaWxkX2NoYW5nZWQnO1xuXG4gIC8qKiBFdmVudCB0eXBlIGZvciBhIGNoaWxkIG1vdmVkICovXG4gIHN0YXRpYyBDSElMRF9NT1ZFRCA9ICdjaGlsZF9tb3ZlZCc7XG5cbiAgLyoqIEV2ZW50IHR5cGUgZm9yIGEgdmFsdWUgY2hhbmdlICovXG4gIHN0YXRpYyBWQUxVRSA9ICd2YWx1ZSc7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBnZXRWYWx1ZXMsIHNhZmVHZXQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBDaGFuZ2UgfSBmcm9tICcuL0NoYW5nZSc7XG5pbXBvcnQgeyBhc3NlcnQsIGFzc2VydGlvbkVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgY2xhc3MgQ2hpbGRDaGFuZ2VBY2N1bXVsYXRvciB7XG4gIHByaXZhdGUgY2hhbmdlTWFwXzogeyBbazogc3RyaW5nXTogQ2hhbmdlIH0gPSB7fTtcblxuICAvKipcbiAgICogQHBhcmFtIHshQ2hhbmdlfSBjaGFuZ2VcbiAgICovXG4gIHRyYWNrQ2hpbGRDaGFuZ2UoY2hhbmdlOiBDaGFuZ2UpIHtcbiAgICBjb25zdCB0eXBlID0gY2hhbmdlLnR5cGU7XG4gICAgY29uc3QgY2hpbGRLZXkgLyoqIEB0eXBlIHshc3RyaW5nfSAqLyA9IGNoYW5nZS5jaGlsZE5hbWU7XG4gICAgYXNzZXJ0KFxuICAgICAgdHlwZSA9PSBDaGFuZ2UuQ0hJTERfQURERUQgfHxcbiAgICAgICAgdHlwZSA9PSBDaGFuZ2UuQ0hJTERfQ0hBTkdFRCB8fFxuICAgICAgICB0eXBlID09IENoYW5nZS5DSElMRF9SRU1PVkVELFxuICAgICAgJ09ubHkgY2hpbGQgY2hhbmdlcyBzdXBwb3J0ZWQgZm9yIHRyYWNraW5nJ1xuICAgICk7XG4gICAgYXNzZXJ0KFxuICAgICAgY2hpbGRLZXkgIT09ICcucHJpb3JpdHknLFxuICAgICAgJ09ubHkgbm9uLXByaW9yaXR5IGNoaWxkIGNoYW5nZXMgY2FuIGJlIHRyYWNrZWQuJ1xuICAgICk7XG4gICAgY29uc3Qgb2xkQ2hhbmdlID0gc2FmZUdldCh0aGlzLmNoYW5nZU1hcF8sIGNoaWxkS2V5KSBhcyBDaGFuZ2U7XG4gICAgaWYgKG9sZENoYW5nZSkge1xuICAgICAgY29uc3Qgb2xkVHlwZSA9IG9sZENoYW5nZS50eXBlO1xuICAgICAgaWYgKHR5cGUgPT0gQ2hhbmdlLkNISUxEX0FEREVEICYmIG9sZFR5cGUgPT0gQ2hhbmdlLkNISUxEX1JFTU9WRUQpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VNYXBfW2NoaWxkS2V5XSA9IENoYW5nZS5jaGlsZENoYW5nZWRDaGFuZ2UoXG4gICAgICAgICAgY2hpbGRLZXksXG4gICAgICAgICAgY2hhbmdlLnNuYXBzaG90Tm9kZSxcbiAgICAgICAgICBvbGRDaGFuZ2Uuc25hcHNob3ROb2RlXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB0eXBlID09IENoYW5nZS5DSElMRF9SRU1PVkVEICYmXG4gICAgICAgIG9sZFR5cGUgPT0gQ2hhbmdlLkNISUxEX0FEREVEXG4gICAgICApIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuY2hhbmdlTWFwX1tjaGlsZEtleV07XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB0eXBlID09IENoYW5nZS5DSElMRF9SRU1PVkVEICYmXG4gICAgICAgIG9sZFR5cGUgPT0gQ2hhbmdlLkNISUxEX0NIQU5HRURcbiAgICAgICkge1xuICAgICAgICB0aGlzLmNoYW5nZU1hcF9bY2hpbGRLZXldID0gQ2hhbmdlLmNoaWxkUmVtb3ZlZENoYW5nZShcbiAgICAgICAgICBjaGlsZEtleSxcbiAgICAgICAgICBvbGRDaGFuZ2Uub2xkU25hcFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgdHlwZSA9PSBDaGFuZ2UuQ0hJTERfQ0hBTkdFRCAmJlxuICAgICAgICBvbGRUeXBlID09IENoYW5nZS5DSElMRF9BRERFRFxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlTWFwX1tjaGlsZEtleV0gPSBDaGFuZ2UuY2hpbGRBZGRlZENoYW5nZShcbiAgICAgICAgICBjaGlsZEtleSxcbiAgICAgICAgICBjaGFuZ2Uuc25hcHNob3ROb2RlXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB0eXBlID09IENoYW5nZS5DSElMRF9DSEFOR0VEICYmXG4gICAgICAgIG9sZFR5cGUgPT0gQ2hhbmdlLkNISUxEX0NIQU5HRURcbiAgICAgICkge1xuICAgICAgICB0aGlzLmNoYW5nZU1hcF9bY2hpbGRLZXldID0gQ2hhbmdlLmNoaWxkQ2hhbmdlZENoYW5nZShcbiAgICAgICAgICBjaGlsZEtleSxcbiAgICAgICAgICBjaGFuZ2Uuc25hcHNob3ROb2RlLFxuICAgICAgICAgIG9sZENoYW5nZS5vbGRTbmFwXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBhc3NlcnRpb25FcnJvcihcbiAgICAgICAgICAnSWxsZWdhbCBjb21iaW5hdGlvbiBvZiBjaGFuZ2VzOiAnICtcbiAgICAgICAgICAgIGNoYW5nZSArXG4gICAgICAgICAgICAnIG9jY3VycmVkIGFmdGVyICcgK1xuICAgICAgICAgICAgb2xkQ2hhbmdlXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2hhbmdlTWFwX1tjaGlsZEtleV0gPSBjaGFuZ2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFBcnJheS48IUNoYW5nZT59XG4gICAqL1xuICBnZXRDaGFuZ2VzKCk6IENoYW5nZVtdIHtcbiAgICByZXR1cm4gZ2V0VmFsdWVzKHRoaXMuY2hhbmdlTWFwXyk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENhY2hlTm9kZSB9IGZyb20gJy4vQ2FjaGVOb2RlJztcbmltcG9ydCB7IE5hbWVkTm9kZSwgTm9kZSB9IGZyb20gJy4uL3NuYXAvTm9kZSc7XG5pbXBvcnQgeyBJbmRleCB9IGZyb20gJy4uL3NuYXAvaW5kZXhlcy9JbmRleCc7XG5pbXBvcnQgeyBXcml0ZVRyZWVSZWYgfSBmcm9tICcuLi9Xcml0ZVRyZWUnO1xuaW1wb3J0IHsgVmlld0NhY2hlIH0gZnJvbSAnLi9WaWV3Q2FjaGUnO1xuXG4vKipcbiAqIFNpbmNlIHVwZGF0ZXMgdG8gZmlsdGVyZWQgbm9kZXMgbWlnaHQgcmVxdWlyZSBub2RlcyB0byBiZSBwdWxsZWQgaW4gZnJvbSBcIm91dHNpZGVcIiB0aGUgbm9kZSwgdGhpcyBpbnRlcmZhY2VcbiAqIGNhbiBoZWxwIHRvIGdldCBjb21wbGV0ZSBjaGlsZHJlbiB0aGF0IGNhbiBiZSBwdWxsZWQgaW4uXG4gKiBBIGNsYXNzIGltcGxlbWVudGluZyB0aGlzIGludGVyZmFjZSB0YWtlcyBwb3RlbnRpYWxseSBtdWx0aXBsZSBzb3VyY2VzIChlLmcuIHVzZXIgd3JpdGVzLCBzZXJ2ZXIgZGF0YSBmcm9tXG4gKiBvdGhlciB2aWV3cyBldGMuKSB0byB0cnkgaXQncyBiZXN0IHRvIGdldCBhIGNvbXBsZXRlIGNoaWxkIHRoYXQgbWlnaHQgYmUgdXNlZnVsIGluIHB1bGxpbmcgaW50byB0aGUgdmlldy5cbiAqXG4gKiBAaW50ZXJmYWNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGVDaGlsZFNvdXJjZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFzdHJpbmd9IGNoaWxkS2V5XG4gICAqIEByZXR1cm4gez9Ob2RlfVxuICAgKi9cbiAgZ2V0Q29tcGxldGVDaGlsZChjaGlsZEtleTogc3RyaW5nKTogTm9kZSB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUluZGV4fSBpbmRleFxuICAgKiBAcGFyYW0geyFOYW1lZE5vZGV9IGNoaWxkXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmV2ZXJzZVxuICAgKiBAcmV0dXJuIHs/TmFtZWROb2RlfVxuICAgKi9cbiAgZ2V0Q2hpbGRBZnRlckNoaWxkKFxuICAgIGluZGV4OiBJbmRleCxcbiAgICBjaGlsZDogTmFtZWROb2RlLFxuICAgIHJldmVyc2U6IGJvb2xlYW5cbiAgKTogTmFtZWROb2RlIHwgbnVsbDtcbn1cblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBDb21wbGV0ZUNoaWxkU291cmNlIHRoYXQgbmV2ZXIgcmV0dXJucyBhbnkgYWRkaXRpb25hbCBjaGlsZHJlblxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBpbXBsZW1lbnRzIENvbXBsZXRlQ2hpbGRTb3VyY2VcbiAqL1xuZXhwb3J0IGNsYXNzIE5vQ29tcGxldGVDaGlsZFNvdXJjZV8gaW1wbGVtZW50cyBDb21wbGV0ZUNoaWxkU291cmNlIHtcbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBnZXRDb21wbGV0ZUNoaWxkKGNoaWxkS2V5Pzogc3RyaW5nKTogTm9kZSB8IG51bGwge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBnZXRDaGlsZEFmdGVyQ2hpbGQoXG4gICAgaW5kZXg/OiBJbmRleCxcbiAgICBjaGlsZD86IE5hbWVkTm9kZSxcbiAgICByZXZlcnNlPzogYm9vbGVhblxuICApOiBOYW1lZE5vZGUgfCBudWxsIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIFNpbmdsZXRvbiBpbnN0YW5jZS5cbiAqIEBjb25zdFxuICogQHR5cGUgeyFDb21wbGV0ZUNoaWxkU291cmNlfVxuICovXG5leHBvcnQgY29uc3QgTk9fQ09NUExFVEVfQ0hJTERfU09VUkNFID0gbmV3IE5vQ29tcGxldGVDaGlsZFNvdXJjZV8oKTtcblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBDb21wbGV0ZUNoaWxkU291cmNlIHRoYXQgdXNlcyBhIFdyaXRlVHJlZSBpbiBhZGRpdGlvbiB0byBhbnkgb3RoZXIgc2VydmVyIGRhdGEgb3JcbiAqIG9sZCBldmVudCBjYWNoZXMgYXZhaWxhYmxlIHRvIGNhbGN1bGF0ZSBjb21wbGV0ZSBjaGlsZHJlbi5cbiAqXG4gKlxuICogQGltcGxlbWVudHMgQ29tcGxldGVDaGlsZFNvdXJjZVxuICovXG5leHBvcnQgY2xhc3MgV3JpdGVUcmVlQ29tcGxldGVDaGlsZFNvdXJjZSBpbXBsZW1lbnRzIENvbXBsZXRlQ2hpbGRTb3VyY2Uge1xuICAvKipcbiAgICogQHBhcmFtIHshV3JpdGVUcmVlUmVmfSB3cml0ZXNfXG4gICAqIEBwYXJhbSB7IVZpZXdDYWNoZX0gdmlld0NhY2hlX1xuICAgKiBAcGFyYW0gez9Ob2RlfSBvcHRDb21wbGV0ZVNlcnZlckNhY2hlX1xuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSB3cml0ZXNfOiBXcml0ZVRyZWVSZWYsXG4gICAgcHJpdmF0ZSB2aWV3Q2FjaGVfOiBWaWV3Q2FjaGUsXG4gICAgcHJpdmF0ZSBvcHRDb21wbGV0ZVNlcnZlckNhY2hlXzogTm9kZSB8IG51bGwgPSBudWxsXG4gICkge31cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGdldENvbXBsZXRlQ2hpbGQoY2hpbGRLZXk6IHN0cmluZyk6IE5vZGUgfCBudWxsIHtcbiAgICBjb25zdCBub2RlID0gdGhpcy52aWV3Q2FjaGVfLmdldEV2ZW50Q2FjaGUoKTtcbiAgICBpZiAobm9kZS5pc0NvbXBsZXRlRm9yQ2hpbGQoY2hpbGRLZXkpKSB7XG4gICAgICByZXR1cm4gbm9kZS5nZXROb2RlKCkuZ2V0SW1tZWRpYXRlQ2hpbGQoY2hpbGRLZXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzZXJ2ZXJOb2RlID1cbiAgICAgICAgdGhpcy5vcHRDb21wbGV0ZVNlcnZlckNhY2hlXyAhPSBudWxsXG4gICAgICAgICAgPyBuZXcgQ2FjaGVOb2RlKHRoaXMub3B0Q29tcGxldGVTZXJ2ZXJDYWNoZV8sIHRydWUsIGZhbHNlKVxuICAgICAgICAgIDogdGhpcy52aWV3Q2FjaGVfLmdldFNlcnZlckNhY2hlKCk7XG4gICAgICByZXR1cm4gdGhpcy53cml0ZXNfLmNhbGNDb21wbGV0ZUNoaWxkKGNoaWxkS2V5LCBzZXJ2ZXJOb2RlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGdldENoaWxkQWZ0ZXJDaGlsZChcbiAgICBpbmRleDogSW5kZXgsXG4gICAgY2hpbGQ6IE5hbWVkTm9kZSxcbiAgICByZXZlcnNlOiBib29sZWFuXG4gICk6IE5hbWVkTm9kZSB8IG51bGwge1xuICAgIGNvbnN0IGNvbXBsZXRlU2VydmVyRGF0YSA9XG4gICAgICB0aGlzLm9wdENvbXBsZXRlU2VydmVyQ2FjaGVfICE9IG51bGxcbiAgICAgICAgPyB0aGlzLm9wdENvbXBsZXRlU2VydmVyQ2FjaGVfXG4gICAgICAgIDogdGhpcy52aWV3Q2FjaGVfLmdldENvbXBsZXRlU2VydmVyU25hcCgpO1xuICAgIGNvbnN0IG5vZGVzID0gdGhpcy53cml0ZXNfLmNhbGNJbmRleGVkU2xpY2UoXG4gICAgICBjb21wbGV0ZVNlcnZlckRhdGEsXG4gICAgICBjaGlsZCxcbiAgICAgIDEsXG4gICAgICByZXZlcnNlLFxuICAgICAgaW5kZXhcbiAgICApO1xuICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbm9kZXNbMF07XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBzdHJpbmdpZnkgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vdXRpbC9QYXRoJztcbmltcG9ydCB7IEV2ZW50UmVnaXN0cmF0aW9uIH0gZnJvbSAnLi9FdmVudFJlZ2lzdHJhdGlvbic7XG5pbXBvcnQgeyBEYXRhU25hcHNob3QgfSBmcm9tICcuLi8uLi9hcGkvRGF0YVNuYXBzaG90JztcblxuLyoqXG4gKiBFbmNhcHN1bGF0ZXMgdGhlIGRhdGEgbmVlZGVkIHRvIHJhaXNlIGFuIGV2ZW50XG4gKiBAaW50ZXJmYWNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnQge1xuICAvKipcbiAgICogQHJldHVybiB7IVBhdGh9XG4gICAqL1xuICBnZXRQYXRoKCk6IFBhdGg7XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFzdHJpbmd9XG4gICAqL1xuICBnZXRFdmVudFR5cGUoKTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshZnVuY3Rpb24oKX1cbiAgICovXG4gIGdldEV2ZW50UnVubmVyKCk6ICgpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFzdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpOiBzdHJpbmc7XG59XG5cbi8qKlxuICogRW5jYXBzdWxhdGVzIHRoZSBkYXRhIG5lZWRlZCB0byByYWlzZSBhbiBldmVudFxuICogQGltcGxlbWVudHMge0V2ZW50fVxuICovXG5leHBvcnQgY2xhc3MgRGF0YUV2ZW50IGltcGxlbWVudHMgRXZlbnQge1xuICAvKipcbiAgICogQHBhcmFtIHshc3RyaW5nfSBldmVudFR5cGUgT25lIG9mOiB2YWx1ZSwgY2hpbGRfYWRkZWQsIGNoaWxkX2NoYW5nZWQsIGNoaWxkX21vdmVkLCBjaGlsZF9yZW1vdmVkXG4gICAqIEBwYXJhbSB7IUV2ZW50UmVnaXN0cmF0aW9ufSBldmVudFJlZ2lzdHJhdGlvbiBUaGUgZnVuY3Rpb24gdG8gY2FsbCB0byB3aXRoIHRoZSBldmVudCBkYXRhLiBVc2VyIHByb3ZpZGVkXG4gICAqIEBwYXJhbSB7IURhdGFTbmFwc2hvdH0gc25hcHNob3QgVGhlIGRhdGEgYmFja2luZyB0aGUgZXZlbnRcbiAgICogQHBhcmFtIHs/c3RyaW5nPX0gcHJldk5hbWUgT3B0aW9uYWwsIHRoZSBuYW1lIG9mIHRoZSBwcmV2aW91cyBjaGlsZCBmb3IgY2hpbGRfKiBldmVudHMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgZXZlbnRUeXBlOlxuICAgICAgfCAndmFsdWUnXG4gICAgICB8ICcgY2hpbGRfYWRkZWQnXG4gICAgICB8ICcgY2hpbGRfY2hhbmdlZCdcbiAgICAgIHwgJyBjaGlsZF9tb3ZlZCdcbiAgICAgIHwgJyBjaGlsZF9yZW1vdmVkJyxcbiAgICBwdWJsaWMgZXZlbnRSZWdpc3RyYXRpb246IEV2ZW50UmVnaXN0cmF0aW9uLFxuICAgIHB1YmxpYyBzbmFwc2hvdDogRGF0YVNuYXBzaG90LFxuICAgIHB1YmxpYyBwcmV2TmFtZT86IHN0cmluZyB8IG51bGxcbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgZ2V0UGF0aCgpOiBQYXRoIHtcbiAgICBjb25zdCByZWYgPSB0aGlzLnNuYXBzaG90LmdldFJlZigpO1xuICAgIGlmICh0aGlzLmV2ZW50VHlwZSA9PT0gJ3ZhbHVlJykge1xuICAgICAgcmV0dXJuIHJlZi5wYXRoO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcmVmLmdldFBhcmVudCgpLnBhdGg7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBnZXRFdmVudFR5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5ldmVudFR5cGU7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGdldEV2ZW50UnVubmVyKCk6ICgpID0+IHZvaWQge1xuICAgIHJldHVybiB0aGlzLmV2ZW50UmVnaXN0cmF0aW9uLmdldEV2ZW50UnVubmVyKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmdldFBhdGgoKS50b1N0cmluZygpICtcbiAgICAgICc6JyArXG4gICAgICB0aGlzLmV2ZW50VHlwZSArXG4gICAgICAnOicgK1xuICAgICAgc3RyaW5naWZ5KHRoaXMuc25hcHNob3QuZXhwb3J0VmFsKCkpXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ2FuY2VsRXZlbnQgaW1wbGVtZW50cyBFdmVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge0V2ZW50UmVnaXN0cmF0aW9ufSBldmVudFJlZ2lzdHJhdGlvblxuICAgKiBAcGFyYW0ge0Vycm9yfSBlcnJvclxuICAgKiBAcGFyYW0geyFQYXRofSBwYXRoXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgZXZlbnRSZWdpc3RyYXRpb246IEV2ZW50UmVnaXN0cmF0aW9uLFxuICAgIHB1YmxpYyBlcnJvcjogRXJyb3IsXG4gICAgcHVibGljIHBhdGg6IFBhdGhcbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgZ2V0UGF0aCgpOiBQYXRoIHtcbiAgICByZXR1cm4gdGhpcy5wYXRoO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBnZXRFdmVudFR5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ2NhbmNlbCc7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGdldEV2ZW50UnVubmVyKCk6ICgpID0+IHZvaWQge1xuICAgIHJldHVybiB0aGlzLmV2ZW50UmVnaXN0cmF0aW9uLmdldEV2ZW50UnVubmVyKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnBhdGgudG9TdHJpbmcoKSArICc6Y2FuY2VsJztcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgTmFtZWROb2RlLCBOb2RlIH0gZnJvbSAnLi4vc25hcC9Ob2RlJztcbmltcG9ydCB7IENoYW5nZSB9IGZyb20gJy4vQ2hhbmdlJztcbmltcG9ydCB7IGFzc2VydGlvbkVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgUXVlcnkgfSBmcm9tICcuLi8uLi9hcGkvUXVlcnknO1xuaW1wb3J0IHsgSW5kZXggfSBmcm9tICcuLi9zbmFwL2luZGV4ZXMvSW5kZXgnO1xuaW1wb3J0IHsgRXZlbnRSZWdpc3RyYXRpb24gfSBmcm9tICcuL0V2ZW50UmVnaXN0cmF0aW9uJztcbmltcG9ydCB7IEV2ZW50IH0gZnJvbSAnLi9FdmVudCc7XG5cbi8qKlxuICogQW4gRXZlbnRHZW5lcmF0b3IgaXMgdXNlZCB0byBjb252ZXJ0IFwicmF3XCIgY2hhbmdlcyAoQ2hhbmdlKSBhcyBjb21wdXRlZCBieSB0aGVcbiAqIENhY2hlRGlmZmVyIGludG8gYWN0dWFsIGV2ZW50cyAoRXZlbnQpIHRoYXQgY2FuIGJlIHJhaXNlZC4gIFNlZSBnZW5lcmF0ZUV2ZW50c0ZvckNoYW5nZXMoKVxuICogZm9yIGRldGFpbHMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBjbGFzcyBFdmVudEdlbmVyYXRvciB7XG4gIHByaXZhdGUgaW5kZXhfOiBJbmRleDtcblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHshUXVlcnl9IHF1ZXJ5X1xuICAgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBxdWVyeV86IFF1ZXJ5KSB7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IUluZGV4fVxuICAgICAqL1xuICAgIHRoaXMuaW5kZXhfID0gdGhpcy5xdWVyeV8uZ2V0UXVlcnlQYXJhbXMoKS5nZXRJbmRleCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgc2V0IG9mIHJhdyBjaGFuZ2VzIChubyBtb3ZlZCBldmVudHMgYW5kIHByZXZOYW1lIG5vdCBzcGVjaWZpZWQgeWV0KSwgYW5kIGEgc2V0IG9mXG4gICAqIEV2ZW50UmVnaXN0cmF0aW9ucyB0aGF0IHNob3VsZCBiZSBub3RpZmllZCBvZiB0aGVzZSBjaGFuZ2VzLCBnZW5lcmF0ZSB0aGUgYWN0dWFsIGV2ZW50cyB0byBiZSByYWlzZWQuXG4gICAqXG4gICAqIE5vdGVzOlxuICAgKiAgLSBjaGlsZF9tb3ZlZCBldmVudHMgd2lsbCBiZSBzeW50aGVzaXplZCBhdCB0aGlzIHRpbWUgZm9yIGFueSBjaGlsZF9jaGFuZ2VkIGV2ZW50cyB0aGF0IGFmZmVjdFxuICAgKiAgICBvdXIgaW5kZXguXG4gICAqICAtIHByZXZOYW1lIHdpbGwgYmUgY2FsY3VsYXRlZCBiYXNlZCBvbiB0aGUgaW5kZXggb3JkZXJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7IUFycmF5LjwhQ2hhbmdlPn0gY2hhbmdlc1xuICAgKiBAcGFyYW0geyFOb2RlfSBldmVudENhY2hlXG4gICAqIEBwYXJhbSB7IUFycmF5LjwhRXZlbnRSZWdpc3RyYXRpb24+fSBldmVudFJlZ2lzdHJhdGlvbnNcbiAgICogQHJldHVybiB7IUFycmF5LjwhRXZlbnQ+fVxuICAgKi9cbiAgZ2VuZXJhdGVFdmVudHNGb3JDaGFuZ2VzKFxuICAgIGNoYW5nZXM6IENoYW5nZVtdLFxuICAgIGV2ZW50Q2FjaGU6IE5vZGUsXG4gICAgZXZlbnRSZWdpc3RyYXRpb25zOiBFdmVudFJlZ2lzdHJhdGlvbltdXG4gICk6IEV2ZW50W10ge1xuICAgIGNvbnN0IGV2ZW50czogRXZlbnRbXSA9IFtdO1xuICAgIGNvbnN0IG1vdmVzOiBDaGFuZ2VbXSA9IFtdO1xuXG4gICAgY2hhbmdlcy5mb3JFYWNoKGNoYW5nZSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIGNoYW5nZS50eXBlID09PSBDaGFuZ2UuQ0hJTERfQ0hBTkdFRCAmJlxuICAgICAgICB0aGlzLmluZGV4Xy5pbmRleGVkVmFsdWVDaGFuZ2VkKFxuICAgICAgICAgIGNoYW5nZS5vbGRTbmFwIGFzIE5vZGUsXG4gICAgICAgICAgY2hhbmdlLnNuYXBzaG90Tm9kZVxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgbW92ZXMucHVzaChcbiAgICAgICAgICBDaGFuZ2UuY2hpbGRNb3ZlZENoYW5nZShcbiAgICAgICAgICAgIGNoYW5nZS5jaGlsZE5hbWUgYXMgc3RyaW5nLFxuICAgICAgICAgICAgY2hhbmdlLnNuYXBzaG90Tm9kZVxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuZ2VuZXJhdGVFdmVudHNGb3JUeXBlXyhcbiAgICAgIGV2ZW50cyxcbiAgICAgIENoYW5nZS5DSElMRF9SRU1PVkVELFxuICAgICAgY2hhbmdlcyxcbiAgICAgIGV2ZW50UmVnaXN0cmF0aW9ucyxcbiAgICAgIGV2ZW50Q2FjaGVcbiAgICApO1xuICAgIHRoaXMuZ2VuZXJhdGVFdmVudHNGb3JUeXBlXyhcbiAgICAgIGV2ZW50cyxcbiAgICAgIENoYW5nZS5DSElMRF9BRERFRCxcbiAgICAgIGNoYW5nZXMsXG4gICAgICBldmVudFJlZ2lzdHJhdGlvbnMsXG4gICAgICBldmVudENhY2hlXG4gICAgKTtcbiAgICB0aGlzLmdlbmVyYXRlRXZlbnRzRm9yVHlwZV8oXG4gICAgICBldmVudHMsXG4gICAgICBDaGFuZ2UuQ0hJTERfTU9WRUQsXG4gICAgICBtb3ZlcyxcbiAgICAgIGV2ZW50UmVnaXN0cmF0aW9ucyxcbiAgICAgIGV2ZW50Q2FjaGVcbiAgICApO1xuICAgIHRoaXMuZ2VuZXJhdGVFdmVudHNGb3JUeXBlXyhcbiAgICAgIGV2ZW50cyxcbiAgICAgIENoYW5nZS5DSElMRF9DSEFOR0VELFxuICAgICAgY2hhbmdlcyxcbiAgICAgIGV2ZW50UmVnaXN0cmF0aW9ucyxcbiAgICAgIGV2ZW50Q2FjaGVcbiAgICApO1xuICAgIHRoaXMuZ2VuZXJhdGVFdmVudHNGb3JUeXBlXyhcbiAgICAgIGV2ZW50cyxcbiAgICAgIENoYW5nZS5WQUxVRSxcbiAgICAgIGNoYW5nZXMsXG4gICAgICBldmVudFJlZ2lzdHJhdGlvbnMsXG4gICAgICBldmVudENhY2hlXG4gICAgKTtcblxuICAgIHJldHVybiBldmVudHM7XG4gIH1cblxuICAvKipcbiAgICogR2l2ZW4gY2hhbmdlcyBvZiBhIHNpbmdsZSBjaGFuZ2UgdHlwZSwgZ2VuZXJhdGUgdGhlIGNvcnJlc3BvbmRpbmcgZXZlbnRzLlxuICAgKlxuICAgKiBAcGFyYW0geyFBcnJheS48IUV2ZW50Pn0gZXZlbnRzXG4gICAqIEBwYXJhbSB7IXN0cmluZ30gZXZlbnRUeXBlXG4gICAqIEBwYXJhbSB7IUFycmF5LjwhQ2hhbmdlPn0gY2hhbmdlc1xuICAgKiBAcGFyYW0geyFBcnJheS48IUV2ZW50UmVnaXN0cmF0aW9uPn0gcmVnaXN0cmF0aW9uc1xuICAgKiBAcGFyYW0geyFOb2RlfSBldmVudENhY2hlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlRXZlbnRzRm9yVHlwZV8oXG4gICAgZXZlbnRzOiBFdmVudFtdLFxuICAgIGV2ZW50VHlwZTogc3RyaW5nLFxuICAgIGNoYW5nZXM6IENoYW5nZVtdLFxuICAgIHJlZ2lzdHJhdGlvbnM6IEV2ZW50UmVnaXN0cmF0aW9uW10sXG4gICAgZXZlbnRDYWNoZTogTm9kZVxuICApIHtcbiAgICBjb25zdCBmaWx0ZXJlZENoYW5nZXMgPSBjaGFuZ2VzLmZpbHRlcihjaGFuZ2UgPT4gY2hhbmdlLnR5cGUgPT09IGV2ZW50VHlwZSk7XG5cbiAgICBmaWx0ZXJlZENoYW5nZXMuc29ydCh0aGlzLmNvbXBhcmVDaGFuZ2VzXy5iaW5kKHRoaXMpKTtcbiAgICBmaWx0ZXJlZENoYW5nZXMuZm9yRWFjaChjaGFuZ2UgPT4ge1xuICAgICAgY29uc3QgbWF0ZXJpYWxpemVkQ2hhbmdlID0gdGhpcy5tYXRlcmlhbGl6ZVNpbmdsZUNoYW5nZV8oXG4gICAgICAgIGNoYW5nZSxcbiAgICAgICAgZXZlbnRDYWNoZVxuICAgICAgKTtcbiAgICAgIHJlZ2lzdHJhdGlvbnMuZm9yRWFjaChyZWdpc3RyYXRpb24gPT4ge1xuICAgICAgICBpZiAocmVnaXN0cmF0aW9uLnJlc3BvbmRzVG8oY2hhbmdlLnR5cGUpKSB7XG4gICAgICAgICAgZXZlbnRzLnB1c2goXG4gICAgICAgICAgICByZWdpc3RyYXRpb24uY3JlYXRlRXZlbnQobWF0ZXJpYWxpemVkQ2hhbmdlLCB0aGlzLnF1ZXJ5XylcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFDaGFuZ2V9IGNoYW5nZVxuICAgKiBAcGFyYW0geyFOb2RlfSBldmVudENhY2hlXG4gICAqIEByZXR1cm4geyFDaGFuZ2V9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIG1hdGVyaWFsaXplU2luZ2xlQ2hhbmdlXyhjaGFuZ2U6IENoYW5nZSwgZXZlbnRDYWNoZTogTm9kZSk6IENoYW5nZSB7XG4gICAgaWYgKGNoYW5nZS50eXBlID09PSAndmFsdWUnIHx8IGNoYW5nZS50eXBlID09PSAnY2hpbGRfcmVtb3ZlZCcpIHtcbiAgICAgIHJldHVybiBjaGFuZ2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNoYW5nZS5wcmV2TmFtZSA9IGV2ZW50Q2FjaGUuZ2V0UHJlZGVjZXNzb3JDaGlsZE5hbWUoXG4gICAgICAgIC8qKiBAdHlwZSB7IXN0cmluZ30gKi9cbiAgICAgICAgY2hhbmdlLmNoaWxkTmFtZSxcbiAgICAgICAgY2hhbmdlLnNuYXBzaG90Tm9kZSxcbiAgICAgICAgdGhpcy5pbmRleF9cbiAgICAgICk7XG4gICAgICByZXR1cm4gY2hhbmdlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFDaGFuZ2V9IGFcbiAgICogQHBhcmFtIHshQ2hhbmdlfSBiXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgY29tcGFyZUNoYW5nZXNfKGE6IENoYW5nZSwgYjogQ2hhbmdlKSB7XG4gICAgaWYgKGEuY2hpbGROYW1lID09IG51bGwgfHwgYi5jaGlsZE5hbWUgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IoJ1Nob3VsZCBvbmx5IGNvbXBhcmUgY2hpbGRfIGV2ZW50cy4nKTtcbiAgICB9XG4gICAgY29uc3QgYVdyYXBwZWQgPSBuZXcgTmFtZWROb2RlKGEuY2hpbGROYW1lLCBhLnNuYXBzaG90Tm9kZSk7XG4gICAgY29uc3QgYldyYXBwZWQgPSBuZXcgTmFtZWROb2RlKGIuY2hpbGROYW1lLCBiLnNuYXBzaG90Tm9kZSk7XG4gICAgcmV0dXJuIHRoaXMuaW5kZXhfLmNvbXBhcmUoYVdyYXBwZWQsIGJXcmFwcGVkKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL3V0aWwvUGF0aCc7XG5pbXBvcnQgeyBsb2csIGxvZ2dlciwgZXhjZXB0aW9uR3VhcmQgfSBmcm9tICcuLi91dGlsL3V0aWwnO1xuaW1wb3J0IHsgRXZlbnQgfSBmcm9tICcuL0V2ZW50JztcblxuLyoqXG4gKiBUaGUgZXZlbnQgcXVldWUgc2VydmVzIGEgZmV3IHB1cnBvc2VzOlxuICogMS4gSXQgZW5zdXJlcyB3ZSBtYWludGFpbiBldmVudCBvcmRlciBpbiB0aGUgZmFjZSBvZiBldmVudCBjYWxsYmFja3MgZG9pbmcgb3BlcmF0aW9ucyB0aGF0IHJlc3VsdCBpbiBtb3JlXG4gKiAgICBldmVudHMgYmVpbmcgcXVldWVkLlxuICogMi4gcmFpc2VRdWV1ZWRFdmVudHMoKSBoYW5kbGVzIGJlaW5nIGNhbGxlZCByZWVudHJhbnRseSBuaWNlbHkuICBUaGF0IGlzLCBpZiBpbiB0aGUgY291cnNlIG9mIHJhaXNpbmcgZXZlbnRzLFxuICogICAgcmFpc2VRdWV1ZWRFdmVudHMoKSBpcyBjYWxsZWQgYWdhaW4sIHRoZSBcImlubmVyXCIgY2FsbCB3aWxsIHBpY2sgdXAgcmFpc2luZyBldmVudHMgd2hlcmUgdGhlIFwib3V0ZXJcIiBjYWxsXG4gKiAgICBsZWZ0IG9mZiwgZW5zdXJpbmcgdGhhdCB0aGUgZXZlbnRzIGFyZSBzdGlsbCByYWlzZWQgc3luY2hyb25vdXNseSBhbmQgaW4gb3JkZXIuXG4gKiAzLiBZb3UgY2FuIHVzZSByYWlzZUV2ZW50c0F0UGF0aCBhbmQgcmFpc2VFdmVudHNGb3JDaGFuZ2VkUGF0aCB0byBlbnN1cmUgb25seSByZWxldmFudCBwcmV2aW91c2x5LXF1ZXVlZFxuICogICAgZXZlbnRzIGFyZSByYWlzZWQgc3luY2hyb25vdXNseS5cbiAqXG4gKiBOT1RFOiBUaGlzIGNhbiBhbGwgZ28gYXdheSBpZi93aGVuIHdlIG1vdmUgdG8gYXN5bmMgZXZlbnRzLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgY2xhc3MgRXZlbnRRdWV1ZSB7XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7IUFycmF5LjxFdmVudExpc3Q+fVxuICAgKi9cbiAgcHJpdmF0ZSBldmVudExpc3RzXzogRXZlbnRMaXN0W10gPSBbXTtcblxuICAvKipcbiAgICogVHJhY2tzIHJlY3Vyc2lvbiBkZXB0aCBvZiByYWlzZVF1ZXVlZEV2ZW50c18sIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMuXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHshbnVtYmVyfVxuICAgKi9cbiAgcHJpdmF0ZSByZWN1cnNpb25EZXB0aF8gPSAwO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFBcnJheS48RXZlbnQ+fSBldmVudERhdGFMaXN0IFRoZSBuZXcgZXZlbnRzIHRvIHF1ZXVlLlxuICAgKi9cbiAgcXVldWVFdmVudHMoZXZlbnREYXRhTGlzdDogRXZlbnRbXSkge1xuICAgIC8vIFdlIGdyb3VwIGV2ZW50cyBieSBwYXRoLCBzdG9yaW5nIHRoZW0gaW4gYSBzaW5nbGUgRXZlbnRMaXN0LCB0byBtYWtlIGl0IGVhc2llciB0byBza2lwIG92ZXIgdGhlbSBxdWlja2x5LlxuICAgIGxldCBjdXJyTGlzdCA9IG51bGw7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudERhdGFMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBldmVudERhdGEgPSBldmVudERhdGFMaXN0W2ldO1xuICAgICAgY29uc3QgZXZlbnRQYXRoID0gZXZlbnREYXRhLmdldFBhdGgoKTtcbiAgICAgIGlmIChjdXJyTGlzdCAhPT0gbnVsbCAmJiAhZXZlbnRQYXRoLmVxdWFscyhjdXJyTGlzdC5nZXRQYXRoKCkpKSB7XG4gICAgICAgIHRoaXMuZXZlbnRMaXN0c18ucHVzaChjdXJyTGlzdCk7XG4gICAgICAgIGN1cnJMaXN0ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKGN1cnJMaXN0ID09PSBudWxsKSB7XG4gICAgICAgIGN1cnJMaXN0ID0gbmV3IEV2ZW50TGlzdChldmVudFBhdGgpO1xuICAgICAgfVxuXG4gICAgICBjdXJyTGlzdC5hZGQoZXZlbnREYXRhKTtcbiAgICB9XG4gICAgaWYgKGN1cnJMaXN0KSB7XG4gICAgICB0aGlzLmV2ZW50TGlzdHNfLnB1c2goY3Vyckxpc3QpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBRdWV1ZXMgdGhlIHNwZWNpZmllZCBldmVudHMgYW5kIHN5bmNocm9ub3VzbHkgcmFpc2VzIGFsbCBldmVudHMgKGluY2x1ZGluZyBwcmV2aW91c2x5IHF1ZXVlZCBvbmVzKVxuICAgKiBmb3IgdGhlIHNwZWNpZmllZCBwYXRoLlxuICAgKlxuICAgKiBJdCBpcyBhc3N1bWVkIHRoYXQgdGhlIG5ldyBldmVudHMgYXJlIGFsbCBmb3IgdGhlIHNwZWNpZmllZCBwYXRoLlxuICAgKlxuICAgKiBAcGFyYW0geyFQYXRofSBwYXRoIFRoZSBwYXRoIHRvIHJhaXNlIGV2ZW50cyBmb3IuXG4gICAqIEBwYXJhbSB7IUFycmF5LjxFdmVudD59IGV2ZW50RGF0YUxpc3QgVGhlIG5ldyBldmVudHMgdG8gcmFpc2UuXG4gICAqL1xuICByYWlzZUV2ZW50c0F0UGF0aChwYXRoOiBQYXRoLCBldmVudERhdGFMaXN0OiBFdmVudFtdKSB7XG4gICAgdGhpcy5xdWV1ZUV2ZW50cyhldmVudERhdGFMaXN0KTtcbiAgICB0aGlzLnJhaXNlUXVldWVkRXZlbnRzTWF0Y2hpbmdQcmVkaWNhdGVfKChldmVudFBhdGg6IFBhdGgpID0+XG4gICAgICBldmVudFBhdGguZXF1YWxzKHBhdGgpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBRdWV1ZXMgdGhlIHNwZWNpZmllZCBldmVudHMgYW5kIHN5bmNocm9ub3VzbHkgcmFpc2VzIGFsbCBldmVudHMgKGluY2x1ZGluZyBwcmV2aW91c2x5IHF1ZXVlZCBvbmVzKSBmb3JcbiAgICogbG9jYXRpb25zIHJlbGF0ZWQgdG8gdGhlIHNwZWNpZmllZCBjaGFuZ2UgcGF0aCAoaS5lLiBhbGwgYW5jZXN0b3JzIGFuZCBkZXNjZW5kYW50cykuXG4gICAqXG4gICAqIEl0IGlzIGFzc3VtZWQgdGhhdCB0aGUgbmV3IGV2ZW50cyBhcmUgYWxsIHJlbGF0ZWQgKGFuY2VzdG9yIG9yIGRlc2NlbmRhbnQpIHRvIHRoZSBzcGVjaWZpZWQgcGF0aC5cbiAgICpcbiAgICogQHBhcmFtIHshUGF0aH0gY2hhbmdlZFBhdGggVGhlIHBhdGggdG8gcmFpc2UgZXZlbnRzIGZvci5cbiAgICogQHBhcmFtIHshQXJyYXkuPCFFdmVudD59IGV2ZW50RGF0YUxpc3QgVGhlIGV2ZW50cyB0byByYWlzZVxuICAgKi9cbiAgcmFpc2VFdmVudHNGb3JDaGFuZ2VkUGF0aChjaGFuZ2VkUGF0aDogUGF0aCwgZXZlbnREYXRhTGlzdDogRXZlbnRbXSkge1xuICAgIHRoaXMucXVldWVFdmVudHMoZXZlbnREYXRhTGlzdCk7XG5cbiAgICB0aGlzLnJhaXNlUXVldWVkRXZlbnRzTWF0Y2hpbmdQcmVkaWNhdGVfKChldmVudFBhdGg6IFBhdGgpID0+IHtcbiAgICAgIHJldHVybiBldmVudFBhdGguY29udGFpbnMoY2hhbmdlZFBhdGgpIHx8IGNoYW5nZWRQYXRoLmNvbnRhaW5zKGV2ZW50UGF0aCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshZnVuY3Rpb24oIVBhdGgpOmJvb2xlYW59IHByZWRpY2F0ZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSByYWlzZVF1ZXVlZEV2ZW50c01hdGNoaW5nUHJlZGljYXRlXyhcbiAgICBwcmVkaWNhdGU6IChwYXRoOiBQYXRoKSA9PiBib29sZWFuXG4gICkge1xuICAgIHRoaXMucmVjdXJzaW9uRGVwdGhfKys7XG5cbiAgICBsZXQgc2VudEFsbCA9IHRydWU7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmV2ZW50TGlzdHNfLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBldmVudExpc3QgPSB0aGlzLmV2ZW50TGlzdHNfW2ldO1xuICAgICAgaWYgKGV2ZW50TGlzdCkge1xuICAgICAgICBjb25zdCBldmVudFBhdGggPSBldmVudExpc3QuZ2V0UGF0aCgpO1xuICAgICAgICBpZiAocHJlZGljYXRlKGV2ZW50UGF0aCkpIHtcbiAgICAgICAgICB0aGlzLmV2ZW50TGlzdHNfW2ldLnJhaXNlKCk7XG4gICAgICAgICAgdGhpcy5ldmVudExpc3RzX1tpXSA9IG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VudEFsbCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNlbnRBbGwpIHtcbiAgICAgIHRoaXMuZXZlbnRMaXN0c18gPSBbXTtcbiAgICB9XG5cbiAgICB0aGlzLnJlY3Vyc2lvbkRlcHRoXy0tO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBjbGFzcyBFdmVudExpc3Qge1xuICAvKipcbiAgICogQHR5cGUgeyFBcnJheS48RXZlbnQ+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBldmVudHNfOiBFdmVudFtdID0gW107XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBwYXRoXzogUGF0aCkge31cblxuICAvKipcbiAgICogQHBhcmFtIHshRXZlbnR9IGV2ZW50RGF0YVxuICAgKi9cbiAgYWRkKGV2ZW50RGF0YTogRXZlbnQpIHtcbiAgICB0aGlzLmV2ZW50c18ucHVzaChldmVudERhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIEl0ZXJhdGVzIHRocm91Z2ggdGhlIGxpc3QgYW5kIHJhaXNlcyBlYWNoIGV2ZW50XG4gICAqL1xuICByYWlzZSgpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZXZlbnRzXy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZXZlbnREYXRhID0gdGhpcy5ldmVudHNfW2ldO1xuICAgICAgaWYgKGV2ZW50RGF0YSAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLmV2ZW50c19baV0gPSBudWxsO1xuICAgICAgICBjb25zdCBldmVudEZuID0gZXZlbnREYXRhLmdldEV2ZW50UnVubmVyKCk7XG4gICAgICAgIGlmIChsb2dnZXIpIHtcbiAgICAgICAgICBsb2coJ2V2ZW50OiAnICsgZXZlbnREYXRhLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIGV4Y2VwdGlvbkd1YXJkKGV2ZW50Rm4pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUGF0aH1cbiAgICovXG4gIGdldFBhdGgoKTogUGF0aCB7XG4gICAgcmV0dXJuIHRoaXMucGF0aF87XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IERhdGFTbmFwc2hvdCB9IGZyb20gJy4uLy4uL2FwaS9EYXRhU25hcHNob3QnO1xuaW1wb3J0IHsgRGF0YUV2ZW50LCBDYW5jZWxFdmVudCwgRXZlbnQgfSBmcm9tICcuL0V2ZW50JztcbmltcG9ydCB7IGNvbnRhaW5zLCBnZXRDb3VudCwgZ2V0QW55S2V5LCBldmVyeSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi91dGlsL1BhdGgnO1xuaW1wb3J0IHsgQ2hhbmdlIH0gZnJvbSAnLi9DaGFuZ2UnO1xuaW1wb3J0IHsgUXVlcnkgfSBmcm9tICcuLi8uLi9hcGkvUXVlcnknO1xuXG4vKipcbiAqIEFuIEV2ZW50UmVnaXN0cmF0aW9uIGlzIGJhc2ljYWxseSBhbiBldmVudCB0eXBlICgndmFsdWUnLCAnY2hpbGRfYWRkZWQnLCBldGMuKSBhbmQgYSBjYWxsYmFja1xuICogdG8gYmUgbm90aWZpZWQgb2YgdGhhdCB0eXBlIG9mIGV2ZW50LlxuICpcbiAqIFRoYXQgc2FpZCwgaXQgY2FuIGFsc28gY29udGFpbiBhIGNhbmNlbCBjYWxsYmFjayB0byBiZSBub3RpZmllZCBpZiB0aGUgZXZlbnQgaXMgY2FuY2VsZWQuICBBbmRcbiAqIGN1cnJlbnRseSwgdGhpcyBjb2RlIGlzIG9yZ2FuaXplZCBhcm91bmQgdGhlIGlkZWEgdGhhdCB5b3Ugd291bGQgcmVnaXN0ZXIgbXVsdGlwbGUgY2hpbGRfIGNhbGxiYWNrc1xuICogdG9nZXRoZXIsIGFzIGEgc2luZ2xlIEV2ZW50UmVnaXN0cmF0aW9uLiAgVGhvdWdoIGN1cnJlbnRseSB3ZSBkb24ndCBkbyB0aGF0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEV2ZW50UmVnaXN0cmF0aW9uIHtcbiAgLyoqXG4gICAqIFRydWUgaWYgdGhpcyBjb250YWluZXIgaGFzIGEgY2FsbGJhY2sgdG8gdHJpZ2dlciBmb3IgdGhpcyBldmVudCB0eXBlXG4gICAqIEBwYXJhbSB7IXN0cmluZ30gZXZlbnRUeXBlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICByZXNwb25kc1RvKGV2ZW50VHlwZTogc3RyaW5nKTogYm9vbGVhbjtcblxuICAvKipcbiAgICogQHBhcmFtIHshQ2hhbmdlfSBjaGFuZ2VcbiAgICogQHBhcmFtIHshUXVlcnl9IHF1ZXJ5XG4gICAqIEByZXR1cm4geyFFdmVudH1cbiAgICovXG4gIGNyZWF0ZUV2ZW50KGNoYW5nZTogQ2hhbmdlLCBxdWVyeTogUXVlcnkpOiBFdmVudDtcblxuICAvKipcbiAgICogR2l2ZW4gZXZlbnQgZGF0YSwgcmV0dXJuIGEgZnVuY3Rpb24gdG8gdHJpZ2dlciB0aGUgdXNlcidzIGNhbGxiYWNrXG4gICAqIEBwYXJhbSB7IUV2ZW50fSBldmVudERhdGFcbiAgICogQHJldHVybiB7ZnVuY3Rpb24oKX1cbiAgICovXG4gIGdldEV2ZW50UnVubmVyKGV2ZW50RGF0YTogRXZlbnQpOiAoKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFcnJvcn0gZXJyb3JcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICAgKiBAcmV0dXJuIHs/Q2FuY2VsRXZlbnR9XG4gICAqL1xuICBjcmVhdGVDYW5jZWxFdmVudChlcnJvcjogRXJyb3IsIHBhdGg6IFBhdGgpOiBDYW5jZWxFdmVudCB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUV2ZW50UmVnaXN0cmF0aW9ufSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgbWF0Y2hlcyhvdGhlcjogRXZlbnRSZWdpc3RyYXRpb24pOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBGYWxzZSBiYXNpY2FsbHkgbWVhbnMgdGhpcyBpcyBhIFwiZHVtbXlcIiBjYWxsYmFjayBjb250YWluZXIgYmVpbmcgdXNlZCBhcyBhIHNlbnRpbmVsXG4gICAqIHRvIHJlbW92ZSBhbGwgY2FsbGJhY2sgY29udGFpbmVycyBvZiBhIHBhcnRpY3VsYXIgdHlwZS4gIChlLmcuIGlmIHRoZSB1c2VyIGRvZXNcbiAgICogcmVmLm9mZigndmFsdWUnKSB3aXRob3V0IHNwZWNpZnlpbmcgYSBzcGVjaWZpYyBjYWxsYmFjaykuXG4gICAqXG4gICAqIChUT0RPOiBSZXdvcmsgdGhpcywgc2luY2UgaXQncyBoYWNreSlcbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGhhc0FueUNhbGxiYWNrKCk6IGJvb2xlYW47XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyByZWdpc3RyYXRpb24gZm9yICd2YWx1ZScgZXZlbnRzLlxuICovXG5leHBvcnQgY2xhc3MgVmFsdWVFdmVudFJlZ2lzdHJhdGlvbiBpbXBsZW1lbnRzIEV2ZW50UmVnaXN0cmF0aW9uIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9uKCFEYXRhU25hcHNob3QpfSBjYWxsYmFja19cbiAgICogQHBhcmFtIHs/ZnVuY3Rpb24oRXJyb3IpfSBjYW5jZWxDYWxsYmFja19cbiAgICogQHBhcmFtIHs/T2JqZWN0fSBjb250ZXh0X1xuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBjYWxsYmFja186ICgoZDogRGF0YVNuYXBzaG90KSA9PiB2b2lkKSB8IG51bGwsXG4gICAgcHJpdmF0ZSBjYW5jZWxDYWxsYmFja186ICgoZTogRXJyb3IpID0+IHZvaWQpIHwgbnVsbCxcbiAgICBwcml2YXRlIGNvbnRleHRfOiBPYmplY3QgfCBudWxsXG4gICkge31cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIHJlc3BvbmRzVG8oZXZlbnRUeXBlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZXZlbnRUeXBlID09PSAndmFsdWUnO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBjcmVhdGVFdmVudChjaGFuZ2U6IENoYW5nZSwgcXVlcnk6IFF1ZXJ5KTogRGF0YUV2ZW50IHtcbiAgICBjb25zdCBpbmRleCA9IHF1ZXJ5LmdldFF1ZXJ5UGFyYW1zKCkuZ2V0SW5kZXgoKTtcbiAgICByZXR1cm4gbmV3IERhdGFFdmVudChcbiAgICAgICd2YWx1ZScsXG4gICAgICB0aGlzLFxuICAgICAgbmV3IERhdGFTbmFwc2hvdChjaGFuZ2Uuc25hcHNob3ROb2RlLCBxdWVyeS5nZXRSZWYoKSwgaW5kZXgpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgZ2V0RXZlbnRSdW5uZXIoZXZlbnREYXRhOiBDYW5jZWxFdmVudCB8IERhdGFFdmVudCk6ICgpID0+IHZvaWQge1xuICAgIGNvbnN0IGN0eCA9IHRoaXMuY29udGV4dF87XG4gICAgaWYgKGV2ZW50RGF0YS5nZXRFdmVudFR5cGUoKSA9PT0gJ2NhbmNlbCcpIHtcbiAgICAgIGFzc2VydChcbiAgICAgICAgdGhpcy5jYW5jZWxDYWxsYmFja18sXG4gICAgICAgICdSYWlzaW5nIGEgY2FuY2VsIGV2ZW50IG9uIGEgbGlzdGVuZXIgd2l0aCBubyBjYW5jZWwgY2FsbGJhY2snXG4gICAgICApO1xuICAgICAgY29uc3QgY2FuY2VsQ0IgPSB0aGlzLmNhbmNlbENhbGxiYWNrXztcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gV2Uga25vdyB0aGF0IGVycm9yIGV4aXN0cywgd2UgY2hlY2tlZCBhYm92ZSB0aGF0IHRoaXMgaXMgYSBjYW5jZWwgZXZlbnRcbiAgICAgICAgY2FuY2VsQ0IuY2FsbChjdHgsIChldmVudERhdGEgYXMgQ2FuY2VsRXZlbnQpLmVycm9yKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNiID0gdGhpcy5jYWxsYmFja187XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNiLmNhbGwoY3R4LCAoZXZlbnREYXRhIGFzIERhdGFFdmVudCkuc25hcHNob3QpO1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGNyZWF0ZUNhbmNlbEV2ZW50KGVycm9yOiBFcnJvciwgcGF0aDogUGF0aCk6IENhbmNlbEV2ZW50IHwgbnVsbCB7XG4gICAgaWYgKHRoaXMuY2FuY2VsQ2FsbGJhY2tfKSB7XG4gICAgICByZXR1cm4gbmV3IENhbmNlbEV2ZW50KHRoaXMsIGVycm9yLCBwYXRoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBtYXRjaGVzKG90aGVyOiBFdmVudFJlZ2lzdHJhdGlvbik6IGJvb2xlYW4ge1xuICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgVmFsdWVFdmVudFJlZ2lzdHJhdGlvbikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKCFvdGhlci5jYWxsYmFja18gfHwgIXRoaXMuY2FsbGJhY2tfKSB7XG4gICAgICAvLyBJZiBubyBjYWxsYmFjayBzcGVjaWZpZWQsIHdlIGNvbnNpZGVyIGl0IHRvIG1hdGNoIGFueSBjYWxsYmFjay5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBvdGhlci5jYWxsYmFja18gPT09IHRoaXMuY2FsbGJhY2tfICYmIG90aGVyLmNvbnRleHRfID09PSB0aGlzLmNvbnRleHRfXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgaGFzQW55Q2FsbGJhY2soKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY2FsbGJhY2tfICE9PSBudWxsO1xuICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgcmVnaXN0cmF0aW9uIG9mIDEgb3IgbW9yZSBjaGlsZF94eHggZXZlbnRzLlxuICpcbiAqIEN1cnJlbnRseSwgaXQgaXMgYWx3YXlzIGV4YWN0bHkgMSBjaGlsZF94eHggZXZlbnQsIGJ1dCB0aGUgaWRlYSBpcyB3ZSBtaWdodCBsZXQgeW91XG4gKiByZWdpc3RlciBhIGdyb3VwIG9mIGNhbGxiYWNrcyB0b2dldGhlciBpbiB0aGUgZnV0dXJlLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQGltcGxlbWVudHMge0V2ZW50UmVnaXN0cmF0aW9ufVxuICovXG5leHBvcnQgY2xhc3MgQ2hpbGRFdmVudFJlZ2lzdHJhdGlvbiBpbXBsZW1lbnRzIEV2ZW50UmVnaXN0cmF0aW9uIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7P09iamVjdC48c3RyaW5nLCBmdW5jdGlvbighRGF0YVNuYXBzaG90LCA/c3RyaW5nPSk+fSBjYWxsYmFja3NfXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9uKEVycm9yKX0gY2FuY2VsQ2FsbGJhY2tfXG4gICAqIEBwYXJhbSB7T2JqZWN0PX0gY29udGV4dF9cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgY2FsbGJhY2tzXzpcbiAgICAgIHwgKHsgW2s6IHN0cmluZ106IChkOiBEYXRhU25hcHNob3QsIHM/OiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkIH0pXG4gICAgICB8IG51bGwsXG4gICAgcHJpdmF0ZSBjYW5jZWxDYWxsYmFja186ICgoZTogRXJyb3IpID0+IHZvaWQpIHwgbnVsbCxcbiAgICBwcml2YXRlIGNvbnRleHRfPzogT2JqZWN0XG4gICkge31cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIHJlc3BvbmRzVG8oZXZlbnRUeXBlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBsZXQgZXZlbnRUb0NoZWNrID1cbiAgICAgIGV2ZW50VHlwZSA9PT0gJ2NoaWxkcmVuX2FkZGVkJyA/ICdjaGlsZF9hZGRlZCcgOiBldmVudFR5cGU7XG4gICAgZXZlbnRUb0NoZWNrID1cbiAgICAgIGV2ZW50VG9DaGVjayA9PT0gJ2NoaWxkcmVuX3JlbW92ZWQnID8gJ2NoaWxkX3JlbW92ZWQnIDogZXZlbnRUb0NoZWNrO1xuICAgIHJldHVybiBjb250YWlucyh0aGlzLmNhbGxiYWNrc18sIGV2ZW50VG9DaGVjayk7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGNyZWF0ZUNhbmNlbEV2ZW50KGVycm9yOiBFcnJvciwgcGF0aDogUGF0aCk6IENhbmNlbEV2ZW50IHwgbnVsbCB7XG4gICAgaWYgKHRoaXMuY2FuY2VsQ2FsbGJhY2tfKSB7XG4gICAgICByZXR1cm4gbmV3IENhbmNlbEV2ZW50KHRoaXMsIGVycm9yLCBwYXRoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBjcmVhdGVFdmVudChjaGFuZ2U6IENoYW5nZSwgcXVlcnk6IFF1ZXJ5KTogRGF0YUV2ZW50IHtcbiAgICBhc3NlcnQoY2hhbmdlLmNoaWxkTmFtZSAhPSBudWxsLCAnQ2hpbGQgZXZlbnRzIHNob3VsZCBoYXZlIGEgY2hpbGROYW1lLicpO1xuICAgIGNvbnN0IHJlZiA9IHF1ZXJ5LmdldFJlZigpLmNoaWxkKC8qKiBAdHlwZSB7IXN0cmluZ30gKi8gKGNoYW5nZS5jaGlsZE5hbWUpKTtcbiAgICBjb25zdCBpbmRleCA9IHF1ZXJ5LmdldFF1ZXJ5UGFyYW1zKCkuZ2V0SW5kZXgoKTtcbiAgICByZXR1cm4gbmV3IERhdGFFdmVudChcbiAgICAgIGNoYW5nZS50eXBlIGFzIGFueSxcbiAgICAgIHRoaXMsXG4gICAgICBuZXcgRGF0YVNuYXBzaG90KGNoYW5nZS5zbmFwc2hvdE5vZGUsIHJlZiwgaW5kZXggYXMgYW55KSxcbiAgICAgIGNoYW5nZS5wcmV2TmFtZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGdldEV2ZW50UnVubmVyKGV2ZW50RGF0YTogQ2FuY2VsRXZlbnQgfCBEYXRhRXZlbnQpOiAoKSA9PiB2b2lkIHtcbiAgICBjb25zdCBjdHggPSB0aGlzLmNvbnRleHRfO1xuICAgIGlmIChldmVudERhdGEuZ2V0RXZlbnRUeXBlKCkgPT09ICdjYW5jZWwnKSB7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIHRoaXMuY2FuY2VsQ2FsbGJhY2tfLFxuICAgICAgICAnUmFpc2luZyBhIGNhbmNlbCBldmVudCBvbiBhIGxpc3RlbmVyIHdpdGggbm8gY2FuY2VsIGNhbGxiYWNrJ1xuICAgICAgKTtcbiAgICAgIGNvbnN0IGNhbmNlbENCID0gdGhpcy5jYW5jZWxDYWxsYmFja187XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFdlIGtub3cgdGhhdCBlcnJvciBleGlzdHMsIHdlIGNoZWNrZWQgYWJvdmUgdGhhdCB0aGlzIGlzIGEgY2FuY2VsIGV2ZW50XG4gICAgICAgIGNhbmNlbENCLmNhbGwoY3R4LCAoZXZlbnREYXRhIGFzIENhbmNlbEV2ZW50KS5lcnJvcik7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjYiA9IHRoaXMuY2FsbGJhY2tzX1soZXZlbnREYXRhIGFzIERhdGFFdmVudCkuZXZlbnRUeXBlXTtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgY2IuY2FsbChcbiAgICAgICAgICBjdHgsXG4gICAgICAgICAgKGV2ZW50RGF0YSBhcyBEYXRhRXZlbnQpLnNuYXBzaG90LFxuICAgICAgICAgIChldmVudERhdGEgYXMgRGF0YUV2ZW50KS5wcmV2TmFtZVxuICAgICAgICApO1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIG1hdGNoZXMob3RoZXI6IEV2ZW50UmVnaXN0cmF0aW9uKTogYm9vbGVhbiB7XG4gICAgaWYgKG90aGVyIGluc3RhbmNlb2YgQ2hpbGRFdmVudFJlZ2lzdHJhdGlvbikge1xuICAgICAgaWYgKCF0aGlzLmNhbGxiYWNrc18gfHwgIW90aGVyLmNhbGxiYWNrc18pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuY29udGV4dF8gPT09IG90aGVyLmNvbnRleHRfKSB7XG4gICAgICAgIGNvbnN0IG90aGVyQ291bnQgPSBnZXRDb3VudChvdGhlci5jYWxsYmFja3NfKTtcbiAgICAgICAgY29uc3QgdGhpc0NvdW50ID0gZ2V0Q291bnQodGhpcy5jYWxsYmFja3NfKTtcbiAgICAgICAgaWYgKG90aGVyQ291bnQgPT09IHRoaXNDb3VudCkge1xuICAgICAgICAgIC8vIElmIGNvdW50IGlzIDEsIGRvIGFuIGV4YWN0IG1hdGNoIG9uIGV2ZW50VHlwZSwgaWYgZWl0aGVyIGlzIGRlZmluZWQgYnV0IG51bGwsIGl0J3MgYSBtYXRjaC5cbiAgICAgICAgICAvLyAgSWYgZXZlbnQgdHlwZXMgZG9uJ3QgbWF0Y2gsIG5vdCBhIG1hdGNoXG4gICAgICAgICAgLy8gSWYgY291bnQgaXMgbm90IDEsIGV4YWN0IG1hdGNoIGFjcm9zcyBhbGxcblxuICAgICAgICAgIGlmIChvdGhlckNvdW50ID09PSAxKSB7XG4gICAgICAgICAgICBjb25zdCBvdGhlcktleSAvKiogQHR5cGUgeyFzdHJpbmd9ICovID0gZ2V0QW55S2V5KG90aGVyLmNhbGxiYWNrc18pO1xuICAgICAgICAgICAgY29uc3QgdGhpc0tleSAvKiogQHR5cGUgeyFzdHJpbmd9ICovID0gZ2V0QW55S2V5KHRoaXMuY2FsbGJhY2tzXyk7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICB0aGlzS2V5ID09PSBvdGhlcktleSAmJlxuICAgICAgICAgICAgICAoIW90aGVyLmNhbGxiYWNrc19bb3RoZXJLZXldIHx8XG4gICAgICAgICAgICAgICAgIXRoaXMuY2FsbGJhY2tzX1t0aGlzS2V5XSB8fFxuICAgICAgICAgICAgICAgIG90aGVyLmNhbGxiYWNrc19bb3RoZXJLZXldID09PSB0aGlzLmNhbGxiYWNrc19bdGhpc0tleV0pXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBFeGFjdCBtYXRjaCBvbiBlYWNoIGtleS5cbiAgICAgICAgICAgIHJldHVybiBldmVyeShcbiAgICAgICAgICAgICAgdGhpcy5jYWxsYmFja3NfLFxuICAgICAgICAgICAgICAoZXZlbnRUeXBlLCBjYikgPT4gb3RoZXIuY2FsbGJhY2tzX1tldmVudFR5cGVdID09PSBjYlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGhhc0FueUNhbGxiYWNrKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNhbGxiYWNrc18gIT09IG51bGw7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IE1JTl9OQU1FLCBNQVhfTkFNRSB9IGZyb20gJy4uL3V0aWwvdXRpbCc7XG5pbXBvcnQgeyBLRVlfSU5ERVggfSBmcm9tICcuLi9zbmFwL2luZGV4ZXMvS2V5SW5kZXgnO1xuaW1wb3J0IHsgUFJJT1JJVFlfSU5ERVggfSBmcm9tICcuLi9zbmFwL2luZGV4ZXMvUHJpb3JpdHlJbmRleCc7XG5pbXBvcnQgeyBWQUxVRV9JTkRFWCB9IGZyb20gJy4uL3NuYXAvaW5kZXhlcy9WYWx1ZUluZGV4JztcbmltcG9ydCB7IFBhdGhJbmRleCB9IGZyb20gJy4uL3NuYXAvaW5kZXhlcy9QYXRoSW5kZXgnO1xuaW1wb3J0IHsgSW5kZXhlZEZpbHRlciB9IGZyb20gJy4vZmlsdGVyL0luZGV4ZWRGaWx0ZXInO1xuaW1wb3J0IHsgTGltaXRlZEZpbHRlciB9IGZyb20gJy4vZmlsdGVyL0xpbWl0ZWRGaWx0ZXInO1xuaW1wb3J0IHsgUmFuZ2VkRmlsdGVyIH0gZnJvbSAnLi9maWx0ZXIvUmFuZ2VkRmlsdGVyJztcbmltcG9ydCB7IHN0cmluZ2lmeSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IE5vZGVGaWx0ZXIgfSBmcm9tICcuL2ZpbHRlci9Ob2RlRmlsdGVyJztcbmltcG9ydCB7IEluZGV4IH0gZnJvbSAnLi4vc25hcC9pbmRleGVzL0luZGV4JztcblxuLyoqXG4gKiBUaGlzIGNsYXNzIGlzIGFuIGltbXV0YWJsZS1mcm9tLXRoZS1wdWJsaWMtYXBpIHN0cnVjdCBjb250YWluaW5nIGEgc2V0IG9mIHF1ZXJ5IHBhcmFtZXRlcnMgZGVmaW5pbmcgYVxuICogcmFuZ2UgdG8gYmUgcmV0dXJuZWQgZm9yIGEgcGFydGljdWxhciBsb2NhdGlvbi4gSXQgaXMgYXNzdW1lZCB0aGF0IHZhbGlkYXRpb24gb2YgcGFyYW1ldGVycyBpcyBkb25lIGF0IHRoZVxuICogdXNlci1mYWNpbmcgQVBJIGxldmVsLCBzbyBpdCBpcyBub3QgZG9uZSBoZXJlLlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBjbGFzcyBRdWVyeVBhcmFtcyB7XG4gIHByaXZhdGUgbGltaXRTZXRfID0gZmFsc2U7XG4gIHByaXZhdGUgc3RhcnRTZXRfID0gZmFsc2U7XG4gIHByaXZhdGUgc3RhcnROYW1lU2V0XyA9IGZhbHNlO1xuICBwcml2YXRlIGVuZFNldF8gPSBmYWxzZTtcbiAgcHJpdmF0ZSBlbmROYW1lU2V0XyA9IGZhbHNlO1xuXG4gIHByaXZhdGUgbGltaXRfID0gMDtcbiAgcHJpdmF0ZSB2aWV3RnJvbV8gPSAnJztcbiAgcHJpdmF0ZSBpbmRleFN0YXJ0VmFsdWVfOiBhbnkgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBpbmRleFN0YXJ0TmFtZV8gPSAnJztcbiAgcHJpdmF0ZSBpbmRleEVuZFZhbHVlXzogYW55IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgaW5kZXhFbmROYW1lXyA9ICcnO1xuXG4gIHByaXZhdGUgaW5kZXhfID0gUFJJT1JJVFlfSU5ERVg7XG5cbiAgLyoqXG4gICAqIFdpcmUgUHJvdG9jb2wgQ29uc3RhbnRzXG4gICAqIEBjb25zdFxuICAgKiBAZW51bSB7c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgV0lSRV9QUk9UT0NPTF9DT05TVEFOVFNfID0ge1xuICAgIElOREVYX1NUQVJUX1ZBTFVFOiAnc3AnLFxuICAgIElOREVYX1NUQVJUX05BTUU6ICdzbicsXG4gICAgSU5ERVhfRU5EX1ZBTFVFOiAnZXAnLFxuICAgIElOREVYX0VORF9OQU1FOiAnZW4nLFxuICAgIExJTUlUOiAnbCcsXG4gICAgVklFV19GUk9NOiAndmYnLFxuICAgIFZJRVdfRlJPTV9MRUZUOiAnbCcsXG4gICAgVklFV19GUk9NX1JJR0hUOiAncicsXG4gICAgSU5ERVg6ICdpJ1xuICB9O1xuXG4gIC8qKlxuICAgKiBSRVNUIFF1ZXJ5IENvbnN0YW50c1xuICAgKiBAY29uc3RcbiAgICogQGVudW0ge3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFJFU1RfUVVFUllfQ09OU1RBTlRTXyA9IHtcbiAgICBPUkRFUl9CWTogJ29yZGVyQnknLFxuICAgIFBSSU9SSVRZX0lOREVYOiAnJHByaW9yaXR5JyxcbiAgICBWQUxVRV9JTkRFWDogJyR2YWx1ZScsXG4gICAgS0VZX0lOREVYOiAnJGtleScsXG4gICAgU1RBUlRfQVQ6ICdzdGFydEF0JyxcbiAgICBFTkRfQVQ6ICdlbmRBdCcsXG4gICAgTElNSVRfVE9fRklSU1Q6ICdsaW1pdFRvRmlyc3QnLFxuICAgIExJTUlUX1RPX0xBU1Q6ICdsaW1pdFRvTGFzdCdcbiAgfTtcblxuICAvKipcbiAgICogRGVmYXVsdCwgZW1wdHkgcXVlcnkgcGFyYW1ldGVyc1xuICAgKiBAdHlwZSB7IVF1ZXJ5UGFyYW1zfVxuICAgKiBAY29uc3RcbiAgICovXG4gIHN0YXRpYyByZWFkb25seSBERUZBVUxUID0gbmV3IFF1ZXJ5UGFyYW1zKCk7XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBoYXNTdGFydCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zdGFydFNldF87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBpdCB3b3VsZCByZXR1cm4gZnJvbSBsZWZ0LlxuICAgKi9cbiAgaXNWaWV3RnJvbUxlZnQoKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMudmlld0Zyb21fID09PSAnJykge1xuICAgICAgLy8gbGltaXQoKSwgcmF0aGVyIHRoYW4gbGltaXRUb0ZpcnN0IG9yIGxpbWl0VG9MYXN0IHdhcyBjYWxsZWQuXG4gICAgICAvLyBUaGlzIG1lYW5zIHRoYXQgb25seSBvbmUgb2Ygc3RhcnRTZXRfIGFuZCBlbmRTZXRfIGlzIHRydWUuIFVzZSB0aGVtXG4gICAgICAvLyB0byBjYWxjdWxhdGUgd2hpY2ggc2lkZSBvZiB0aGUgdmlldyB0byBhbmNob3IgdG8uIElmIG5laXRoZXIgaXMgc2V0LFxuICAgICAgLy8gYW5jaG9yIHRvIHRoZSBlbmQuXG4gICAgICByZXR1cm4gdGhpcy5zdGFydFNldF87XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMudmlld0Zyb21fID09PSBRdWVyeVBhcmFtcy5XSVJFX1BST1RPQ09MX0NPTlNUQU5UU18uVklFV19GUk9NX0xFRlRcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE9ubHkgdmFsaWQgdG8gY2FsbCBpZiBoYXNTdGFydCgpIHJldHVybnMgdHJ1ZVxuICAgKiBAcmV0dXJuIHsqfVxuICAgKi9cbiAgZ2V0SW5kZXhTdGFydFZhbHVlKCk6IGFueSB7XG4gICAgYXNzZXJ0KHRoaXMuc3RhcnRTZXRfLCAnT25seSB2YWxpZCBpZiBzdGFydCBoYXMgYmVlbiBzZXQnKTtcbiAgICByZXR1cm4gdGhpcy5pbmRleFN0YXJ0VmFsdWVfO1xuICB9XG5cbiAgLyoqXG4gICAqIE9ubHkgdmFsaWQgdG8gY2FsbCBpZiBoYXNTdGFydCgpIHJldHVybnMgdHJ1ZS5cbiAgICogUmV0dXJucyB0aGUgc3RhcnRpbmcga2V5IG5hbWUgZm9yIHRoZSByYW5nZSBkZWZpbmVkIGJ5IHRoZXNlIHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICogQHJldHVybiB7IXN0cmluZ31cbiAgICovXG4gIGdldEluZGV4U3RhcnROYW1lKCk6IHN0cmluZyB7XG4gICAgYXNzZXJ0KHRoaXMuc3RhcnRTZXRfLCAnT25seSB2YWxpZCBpZiBzdGFydCBoYXMgYmVlbiBzZXQnKTtcbiAgICBpZiAodGhpcy5zdGFydE5hbWVTZXRfKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbmRleFN0YXJ0TmFtZV87XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBNSU5fTkFNRTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGhhc0VuZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5lbmRTZXRfO1xuICB9XG5cbiAgLyoqXG4gICAqIE9ubHkgdmFsaWQgdG8gY2FsbCBpZiBoYXNFbmQoKSByZXR1cm5zIHRydWUuXG4gICAqIEByZXR1cm4geyp9XG4gICAqL1xuICBnZXRJbmRleEVuZFZhbHVlKCk6IGFueSB7XG4gICAgYXNzZXJ0KHRoaXMuZW5kU2V0XywgJ09ubHkgdmFsaWQgaWYgZW5kIGhhcyBiZWVuIHNldCcpO1xuICAgIHJldHVybiB0aGlzLmluZGV4RW5kVmFsdWVfO1xuICB9XG5cbiAgLyoqXG4gICAqIE9ubHkgdmFsaWQgdG8gY2FsbCBpZiBoYXNFbmQoKSByZXR1cm5zIHRydWUuXG4gICAqIFJldHVybnMgdGhlIGVuZCBrZXkgbmFtZSBmb3IgdGhlIHJhbmdlIGRlZmluZWQgYnkgdGhlc2UgcXVlcnkgcGFyYW1ldGVyc1xuICAgKiBAcmV0dXJuIHshc3RyaW5nfVxuICAgKi9cbiAgZ2V0SW5kZXhFbmROYW1lKCk6IHN0cmluZyB7XG4gICAgYXNzZXJ0KHRoaXMuZW5kU2V0XywgJ09ubHkgdmFsaWQgaWYgZW5kIGhhcyBiZWVuIHNldCcpO1xuICAgIGlmICh0aGlzLmVuZE5hbWVTZXRfKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbmRleEVuZE5hbWVfO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gTUFYX05BTUU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBoYXNMaW1pdCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5saW1pdFNldF87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBhIGxpbWl0IGhhcyBiZWVuIHNldCBhbmQgaXQgaGFzIGJlZW4gZXhwbGljaXRseSBhbmNob3JlZFxuICAgKi9cbiAgaGFzQW5jaG9yZWRMaW1pdCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5saW1pdFNldF8gJiYgdGhpcy52aWV3RnJvbV8gIT09ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIE9ubHkgdmFsaWQgdG8gY2FsbCBpZiBoYXNMaW1pdCgpIHJldHVybnMgdHJ1ZVxuICAgKiBAcmV0dXJuIHshbnVtYmVyfVxuICAgKi9cbiAgZ2V0TGltaXQoKTogbnVtYmVyIHtcbiAgICBhc3NlcnQodGhpcy5saW1pdFNldF8sICdPbmx5IHZhbGlkIGlmIGxpbWl0IGhhcyBiZWVuIHNldCcpO1xuICAgIHJldHVybiB0aGlzLmxpbWl0XztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshSW5kZXh9XG4gICAqL1xuICBnZXRJbmRleCgpOiBJbmRleCB7XG4gICAgcmV0dXJuIHRoaXMuaW5kZXhfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFRdWVyeVBhcmFtc31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgY29weV8oKTogUXVlcnlQYXJhbXMge1xuICAgIGNvbnN0IGNvcHkgPSBuZXcgUXVlcnlQYXJhbXMoKTtcbiAgICBjb3B5LmxpbWl0U2V0XyA9IHRoaXMubGltaXRTZXRfO1xuICAgIGNvcHkubGltaXRfID0gdGhpcy5saW1pdF87XG4gICAgY29weS5zdGFydFNldF8gPSB0aGlzLnN0YXJ0U2V0XztcbiAgICBjb3B5LmluZGV4U3RhcnRWYWx1ZV8gPSB0aGlzLmluZGV4U3RhcnRWYWx1ZV87XG4gICAgY29weS5zdGFydE5hbWVTZXRfID0gdGhpcy5zdGFydE5hbWVTZXRfO1xuICAgIGNvcHkuaW5kZXhTdGFydE5hbWVfID0gdGhpcy5pbmRleFN0YXJ0TmFtZV87XG4gICAgY29weS5lbmRTZXRfID0gdGhpcy5lbmRTZXRfO1xuICAgIGNvcHkuaW5kZXhFbmRWYWx1ZV8gPSB0aGlzLmluZGV4RW5kVmFsdWVfO1xuICAgIGNvcHkuZW5kTmFtZVNldF8gPSB0aGlzLmVuZE5hbWVTZXRfO1xuICAgIGNvcHkuaW5kZXhFbmROYW1lXyA9IHRoaXMuaW5kZXhFbmROYW1lXztcbiAgICBjb3B5LmluZGV4XyA9IHRoaXMuaW5kZXhfO1xuICAgIGNvcHkudmlld0Zyb21fID0gdGhpcy52aWV3RnJvbV87XG4gICAgcmV0dXJuIGNvcHk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshbnVtYmVyfSBuZXdMaW1pdFxuICAgKiBAcmV0dXJuIHshUXVlcnlQYXJhbXN9XG4gICAqL1xuICBsaW1pdChuZXdMaW1pdDogbnVtYmVyKTogUXVlcnlQYXJhbXMge1xuICAgIGNvbnN0IG5ld1BhcmFtcyA9IHRoaXMuY29weV8oKTtcbiAgICBuZXdQYXJhbXMubGltaXRTZXRfID0gdHJ1ZTtcbiAgICBuZXdQYXJhbXMubGltaXRfID0gbmV3TGltaXQ7XG4gICAgbmV3UGFyYW1zLnZpZXdGcm9tXyA9ICcnO1xuICAgIHJldHVybiBuZXdQYXJhbXM7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshbnVtYmVyfSBuZXdMaW1pdFxuICAgKiBAcmV0dXJuIHshUXVlcnlQYXJhbXN9XG4gICAqL1xuICBsaW1pdFRvRmlyc3QobmV3TGltaXQ6IG51bWJlcik6IFF1ZXJ5UGFyYW1zIHtcbiAgICBjb25zdCBuZXdQYXJhbXMgPSB0aGlzLmNvcHlfKCk7XG4gICAgbmV3UGFyYW1zLmxpbWl0U2V0XyA9IHRydWU7XG4gICAgbmV3UGFyYW1zLmxpbWl0XyA9IG5ld0xpbWl0O1xuICAgIG5ld1BhcmFtcy52aWV3RnJvbV8gPSBRdWVyeVBhcmFtcy5XSVJFX1BST1RPQ09MX0NPTlNUQU5UU18uVklFV19GUk9NX0xFRlQ7XG4gICAgcmV0dXJuIG5ld1BhcmFtcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFudW1iZXJ9IG5ld0xpbWl0XG4gICAqIEByZXR1cm4geyFRdWVyeVBhcmFtc31cbiAgICovXG4gIGxpbWl0VG9MYXN0KG5ld0xpbWl0OiBudW1iZXIpOiBRdWVyeVBhcmFtcyB7XG4gICAgY29uc3QgbmV3UGFyYW1zID0gdGhpcy5jb3B5XygpO1xuICAgIG5ld1BhcmFtcy5saW1pdFNldF8gPSB0cnVlO1xuICAgIG5ld1BhcmFtcy5saW1pdF8gPSBuZXdMaW1pdDtcbiAgICBuZXdQYXJhbXMudmlld0Zyb21fID0gUXVlcnlQYXJhbXMuV0lSRV9QUk9UT0NPTF9DT05TVEFOVFNfLlZJRVdfRlJPTV9SSUdIVDtcbiAgICByZXR1cm4gbmV3UGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Kn0gaW5kZXhWYWx1ZVxuICAgKiBAcGFyYW0gez9zdHJpbmc9fSBrZXlcbiAgICogQHJldHVybiB7IVF1ZXJ5UGFyYW1zfVxuICAgKi9cbiAgc3RhcnRBdChpbmRleFZhbHVlOiBhbnksIGtleT86IHN0cmluZyB8IG51bGwpOiBRdWVyeVBhcmFtcyB7XG4gICAgY29uc3QgbmV3UGFyYW1zID0gdGhpcy5jb3B5XygpO1xuICAgIG5ld1BhcmFtcy5zdGFydFNldF8gPSB0cnVlO1xuICAgIGlmICghKGluZGV4VmFsdWUgIT09IHVuZGVmaW5lZCkpIHtcbiAgICAgIGluZGV4VmFsdWUgPSBudWxsO1xuICAgIH1cbiAgICBuZXdQYXJhbXMuaW5kZXhTdGFydFZhbHVlXyA9IGluZGV4VmFsdWU7XG4gICAgaWYgKGtleSAhPSBudWxsKSB7XG4gICAgICBuZXdQYXJhbXMuc3RhcnROYW1lU2V0XyA9IHRydWU7XG4gICAgICBuZXdQYXJhbXMuaW5kZXhTdGFydE5hbWVfID0ga2V5O1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXdQYXJhbXMuc3RhcnROYW1lU2V0XyA9IGZhbHNlO1xuICAgICAgbmV3UGFyYW1zLmluZGV4U3RhcnROYW1lXyA9ICcnO1xuICAgIH1cbiAgICByZXR1cm4gbmV3UGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Kn0gaW5kZXhWYWx1ZVxuICAgKiBAcGFyYW0gez9zdHJpbmc9fSBrZXlcbiAgICogQHJldHVybiB7IVF1ZXJ5UGFyYW1zfVxuICAgKi9cbiAgZW5kQXQoaW5kZXhWYWx1ZTogYW55LCBrZXk/OiBzdHJpbmcgfCBudWxsKTogUXVlcnlQYXJhbXMge1xuICAgIGNvbnN0IG5ld1BhcmFtcyA9IHRoaXMuY29weV8oKTtcbiAgICBuZXdQYXJhbXMuZW5kU2V0XyA9IHRydWU7XG4gICAgaWYgKCEoaW5kZXhWYWx1ZSAhPT0gdW5kZWZpbmVkKSkge1xuICAgICAgaW5kZXhWYWx1ZSA9IG51bGw7XG4gICAgfVxuICAgIG5ld1BhcmFtcy5pbmRleEVuZFZhbHVlXyA9IGluZGV4VmFsdWU7XG4gICAgaWYgKGtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBuZXdQYXJhbXMuZW5kTmFtZVNldF8gPSB0cnVlO1xuICAgICAgbmV3UGFyYW1zLmluZGV4RW5kTmFtZV8gPSBrZXk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld1BhcmFtcy5lbmROYW1lU2V0XyA9IGZhbHNlO1xuICAgICAgbmV3UGFyYW1zLmluZGV4RW5kTmFtZV8gPSAnJztcbiAgICB9XG4gICAgcmV0dXJuIG5ld1BhcmFtcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFJbmRleH0gaW5kZXhcbiAgICogQHJldHVybiB7IVF1ZXJ5UGFyYW1zfVxuICAgKi9cbiAgb3JkZXJCeShpbmRleDogSW5kZXgpOiBRdWVyeVBhcmFtcyB7XG4gICAgY29uc3QgbmV3UGFyYW1zID0gdGhpcy5jb3B5XygpO1xuICAgIG5ld1BhcmFtcy5pbmRleF8gPSBpbmRleDtcbiAgICByZXR1cm4gbmV3UGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFPYmplY3R9XG4gICAqL1xuICBnZXRRdWVyeU9iamVjdCgpOiBPYmplY3Qge1xuICAgIGNvbnN0IFdJUkVfUFJPVE9DT0xfQ09OU1RBTlRTID0gUXVlcnlQYXJhbXMuV0lSRV9QUk9UT0NPTF9DT05TVEFOVFNfO1xuICAgIGNvbnN0IG9iajogeyBbazogc3RyaW5nXTogYW55IH0gPSB7fTtcbiAgICBpZiAodGhpcy5zdGFydFNldF8pIHtcbiAgICAgIG9ialtXSVJFX1BST1RPQ09MX0NPTlNUQU5UUy5JTkRFWF9TVEFSVF9WQUxVRV0gPSB0aGlzLmluZGV4U3RhcnRWYWx1ZV87XG4gICAgICBpZiAodGhpcy5zdGFydE5hbWVTZXRfKSB7XG4gICAgICAgIG9ialtXSVJFX1BST1RPQ09MX0NPTlNUQU5UUy5JTkRFWF9TVEFSVF9OQU1FXSA9IHRoaXMuaW5kZXhTdGFydE5hbWVfO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5lbmRTZXRfKSB7XG4gICAgICBvYmpbV0lSRV9QUk9UT0NPTF9DT05TVEFOVFMuSU5ERVhfRU5EX1ZBTFVFXSA9IHRoaXMuaW5kZXhFbmRWYWx1ZV87XG4gICAgICBpZiAodGhpcy5lbmROYW1lU2V0Xykge1xuICAgICAgICBvYmpbV0lSRV9QUk9UT0NPTF9DT05TVEFOVFMuSU5ERVhfRU5EX05BTUVdID0gdGhpcy5pbmRleEVuZE5hbWVfO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5saW1pdFNldF8pIHtcbiAgICAgIG9ialtXSVJFX1BST1RPQ09MX0NPTlNUQU5UUy5MSU1JVF0gPSB0aGlzLmxpbWl0XztcbiAgICAgIGxldCB2aWV3RnJvbSA9IHRoaXMudmlld0Zyb21fO1xuICAgICAgaWYgKHZpZXdGcm9tID09PSAnJykge1xuICAgICAgICBpZiAodGhpcy5pc1ZpZXdGcm9tTGVmdCgpKSB7XG4gICAgICAgICAgdmlld0Zyb20gPSBXSVJFX1BST1RPQ09MX0NPTlNUQU5UUy5WSUVXX0ZST01fTEVGVDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2aWV3RnJvbSA9IFdJUkVfUFJPVE9DT0xfQ09OU1RBTlRTLlZJRVdfRlJPTV9SSUdIVDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgb2JqW1dJUkVfUFJPVE9DT0xfQ09OU1RBTlRTLlZJRVdfRlJPTV0gPSB2aWV3RnJvbTtcbiAgICB9XG4gICAgLy8gRm9yIG5vdywgcHJpb3JpdHkgaW5kZXggaXMgdGhlIGRlZmF1bHQsIHNvIHdlIG9ubHkgc3BlY2lmeSBpZiBpdCdzIHNvbWUgb3RoZXIgaW5kZXhcbiAgICBpZiAodGhpcy5pbmRleF8gIT09IFBSSU9SSVRZX0lOREVYKSB7XG4gICAgICBvYmpbV0lSRV9QUk9UT0NPTF9DT05TVEFOVFMuSU5ERVhdID0gdGhpcy5pbmRleF8udG9TdHJpbmcoKTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgbG9hZHNBbGxEYXRhKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhKHRoaXMuc3RhcnRTZXRfIHx8IHRoaXMuZW5kU2V0XyB8fCB0aGlzLmxpbWl0U2V0Xyk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzRGVmYXVsdCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5sb2Fkc0FsbERhdGEoKSAmJiB0aGlzLmluZGV4XyA9PSBQUklPUklUWV9JTkRFWDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshTm9kZUZpbHRlcn1cbiAgICovXG4gIGdldE5vZGVGaWx0ZXIoKTogTm9kZUZpbHRlciB7XG4gICAgaWYgKHRoaXMubG9hZHNBbGxEYXRhKCkpIHtcbiAgICAgIHJldHVybiBuZXcgSW5kZXhlZEZpbHRlcih0aGlzLmdldEluZGV4KCkpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5oYXNMaW1pdCgpKSB7XG4gICAgICByZXR1cm4gbmV3IExpbWl0ZWRGaWx0ZXIodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgUmFuZ2VkRmlsdGVyKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc2V0IG9mIFJFU1QgcXVlcnkgc3RyaW5nIHBhcmFtZXRlcnMgcmVwcmVzZW50aW5nIHRoaXMgcXVlcnkuXG4gICAqXG4gICAqIEByZXR1cm4geyFPYmplY3QuPHN0cmluZywqPn0gcXVlcnkgc3RyaW5nIHBhcmFtZXRlcnNcbiAgICovXG4gIHRvUmVzdFF1ZXJ5U3RyaW5nUGFyYW1ldGVycygpOiB7IFtrOiBzdHJpbmddOiBhbnkgfSB7XG4gICAgY29uc3QgUkVTVF9DT05TVEFOVFMgPSBRdWVyeVBhcmFtcy5SRVNUX1FVRVJZX0NPTlNUQU5UU187XG4gICAgY29uc3QgcXM6IHsgW2s6IHN0cmluZ106IHN0cmluZyB8IG51bWJlciB9ID0ge307XG5cbiAgICBpZiAodGhpcy5pc0RlZmF1bHQoKSkge1xuICAgICAgcmV0dXJuIHFzO1xuICAgIH1cblxuICAgIGxldCBvcmRlckJ5O1xuICAgIGlmICh0aGlzLmluZGV4XyA9PT0gUFJJT1JJVFlfSU5ERVgpIHtcbiAgICAgIG9yZGVyQnkgPSBSRVNUX0NPTlNUQU5UUy5QUklPUklUWV9JTkRFWDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaW5kZXhfID09PSBWQUxVRV9JTkRFWCkge1xuICAgICAgb3JkZXJCeSA9IFJFU1RfQ09OU1RBTlRTLlZBTFVFX0lOREVYO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pbmRleF8gPT09IEtFWV9JTkRFWCkge1xuICAgICAgb3JkZXJCeSA9IFJFU1RfQ09OU1RBTlRTLktFWV9JTkRFWDtcbiAgICB9IGVsc2Uge1xuICAgICAgYXNzZXJ0KHRoaXMuaW5kZXhfIGluc3RhbmNlb2YgUGF0aEluZGV4LCAnVW5yZWNvZ25pemVkIGluZGV4IHR5cGUhJyk7XG4gICAgICBvcmRlckJ5ID0gdGhpcy5pbmRleF8udG9TdHJpbmcoKTtcbiAgICB9XG4gICAgcXNbUkVTVF9DT05TVEFOVFMuT1JERVJfQlldID0gc3RyaW5naWZ5KG9yZGVyQnkpO1xuXG4gICAgaWYgKHRoaXMuc3RhcnRTZXRfKSB7XG4gICAgICBxc1tSRVNUX0NPTlNUQU5UUy5TVEFSVF9BVF0gPSBzdHJpbmdpZnkodGhpcy5pbmRleFN0YXJ0VmFsdWVfKTtcbiAgICAgIGlmICh0aGlzLnN0YXJ0TmFtZVNldF8pIHtcbiAgICAgICAgcXNbUkVTVF9DT05TVEFOVFMuU1RBUlRfQVRdICs9ICcsJyArIHN0cmluZ2lmeSh0aGlzLmluZGV4U3RhcnROYW1lXyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZW5kU2V0Xykge1xuICAgICAgcXNbUkVTVF9DT05TVEFOVFMuRU5EX0FUXSA9IHN0cmluZ2lmeSh0aGlzLmluZGV4RW5kVmFsdWVfKTtcbiAgICAgIGlmICh0aGlzLmVuZE5hbWVTZXRfKSB7XG4gICAgICAgIHFzW1JFU1RfQ09OU1RBTlRTLkVORF9BVF0gKz0gJywnICsgc3RyaW5naWZ5KHRoaXMuaW5kZXhFbmROYW1lXyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubGltaXRTZXRfKSB7XG4gICAgICBpZiAodGhpcy5pc1ZpZXdGcm9tTGVmdCgpKSB7XG4gICAgICAgIHFzW1JFU1RfQ09OU1RBTlRTLkxJTUlUX1RPX0ZJUlNUXSA9IHRoaXMubGltaXRfO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcXNbUkVTVF9DT05TVEFOVFMuTElNSVRfVE9fTEFTVF0gPSB0aGlzLmxpbWl0XztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcXM7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEluZGV4ZWRGaWx0ZXIgfSBmcm9tICcuL2ZpbHRlci9JbmRleGVkRmlsdGVyJztcbmltcG9ydCB7IFZpZXdQcm9jZXNzb3IgfSBmcm9tICcuL1ZpZXdQcm9jZXNzb3InO1xuaW1wb3J0IHsgQ2hpbGRyZW5Ob2RlIH0gZnJvbSAnLi4vc25hcC9DaGlsZHJlbk5vZGUnO1xuaW1wb3J0IHsgQ2FjaGVOb2RlIH0gZnJvbSAnLi9DYWNoZU5vZGUnO1xuaW1wb3J0IHsgVmlld0NhY2hlIH0gZnJvbSAnLi9WaWV3Q2FjaGUnO1xuaW1wb3J0IHsgRXZlbnRHZW5lcmF0b3IgfSBmcm9tICcuL0V2ZW50R2VuZXJhdG9yJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IE9wZXJhdGlvbiwgT3BlcmF0aW9uVHlwZSB9IGZyb20gJy4uL29wZXJhdGlvbi9PcGVyYXRpb24nO1xuaW1wb3J0IHsgQ2hhbmdlIH0gZnJvbSAnLi9DaGFuZ2UnO1xuaW1wb3J0IHsgUFJJT1JJVFlfSU5ERVggfSBmcm9tICcuLi9zbmFwL2luZGV4ZXMvUHJpb3JpdHlJbmRleCc7XG5pbXBvcnQgeyBRdWVyeSB9IGZyb20gJy4uLy4uL2FwaS9RdWVyeSc7XG5pbXBvcnQgeyBFdmVudFJlZ2lzdHJhdGlvbiB9IGZyb20gJy4vRXZlbnRSZWdpc3RyYXRpb24nO1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL3NuYXAvTm9kZSc7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vdXRpbC9QYXRoJztcbmltcG9ydCB7IFdyaXRlVHJlZVJlZiB9IGZyb20gJy4uL1dyaXRlVHJlZSc7XG5pbXBvcnQgeyBDYW5jZWxFdmVudCwgRXZlbnQgfSBmcm9tICcuL0V2ZW50JztcblxuLyoqXG4gKiBBIHZpZXcgcmVwcmVzZW50cyBhIHNwZWNpZmljIGxvY2F0aW9uIGFuZCBxdWVyeSB0aGF0IGhhcyAxIG9yIG1vcmUgZXZlbnQgcmVnaXN0cmF0aW9ucy5cbiAqXG4gKiBJdCBkb2VzIHNldmVyYWwgdGhpbmdzOlxuICogIC0gTWFpbnRhaW5zIHRoZSBsaXN0IG9mIGV2ZW50IHJlZ2lzdHJhdGlvbnMgZm9yIHRoaXMgbG9jYXRpb24vcXVlcnkuXG4gKiAgLSBNYWludGFpbnMgYSBjYWNoZSBvZiB0aGUgZGF0YSB2aXNpYmxlIGZvciB0aGlzIGxvY2F0aW9uL3F1ZXJ5LlxuICogIC0gQXBwbGllcyBuZXcgb3BlcmF0aW9ucyAodmlhIGFwcGx5T3BlcmF0aW9uKSwgdXBkYXRlcyB0aGUgY2FjaGUsIGFuZCBiYXNlZCBvbiB0aGUgZXZlbnRcbiAqICAgIHJlZ2lzdHJhdGlvbnMgcmV0dXJucyB0aGUgc2V0IG9mIGV2ZW50cyB0byBiZSByYWlzZWQuXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGNsYXNzIFZpZXcge1xuICBwcml2YXRlIHByb2Nlc3Nvcl86IFZpZXdQcm9jZXNzb3I7XG4gIHByaXZhdGUgdmlld0NhY2hlXzogVmlld0NhY2hlO1xuICBwcml2YXRlIGV2ZW50UmVnaXN0cmF0aW9uc186IEV2ZW50UmVnaXN0cmF0aW9uW10gPSBbXTtcbiAgcHJpdmF0ZSBldmVudEdlbmVyYXRvcl86IEV2ZW50R2VuZXJhdG9yO1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyFRdWVyeX0gcXVlcnlfXG4gICAqIEBwYXJhbSB7IVZpZXdDYWNoZX0gaW5pdGlhbFZpZXdDYWNoZVxuICAgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBxdWVyeV86IFF1ZXJ5LCBpbml0aWFsVmlld0NhY2hlOiBWaWV3Q2FjaGUpIHtcbiAgICBjb25zdCBwYXJhbXMgPSB0aGlzLnF1ZXJ5Xy5nZXRRdWVyeVBhcmFtcygpO1xuXG4gICAgY29uc3QgaW5kZXhGaWx0ZXIgPSBuZXcgSW5kZXhlZEZpbHRlcihwYXJhbXMuZ2V0SW5kZXgoKSk7XG4gICAgY29uc3QgZmlsdGVyID0gcGFyYW1zLmdldE5vZGVGaWx0ZXIoKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtWaWV3UHJvY2Vzc29yfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5wcm9jZXNzb3JfID0gbmV3IFZpZXdQcm9jZXNzb3IoZmlsdGVyKTtcblxuICAgIGNvbnN0IGluaXRpYWxTZXJ2ZXJDYWNoZSA9IGluaXRpYWxWaWV3Q2FjaGUuZ2V0U2VydmVyQ2FjaGUoKTtcbiAgICBjb25zdCBpbml0aWFsRXZlbnRDYWNoZSA9IGluaXRpYWxWaWV3Q2FjaGUuZ2V0RXZlbnRDYWNoZSgpO1xuXG4gICAgLy8gRG9uJ3QgZmlsdGVyIHNlcnZlciBub2RlIHdpdGggb3RoZXIgZmlsdGVyIHRoYW4gaW5kZXgsIHdhaXQgZm9yIHRhZ2dlZCBsaXN0ZW5cbiAgICBjb25zdCBzZXJ2ZXJTbmFwID0gaW5kZXhGaWx0ZXIudXBkYXRlRnVsbE5vZGUoXG4gICAgICBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERSxcbiAgICAgIGluaXRpYWxTZXJ2ZXJDYWNoZS5nZXROb2RlKCksXG4gICAgICBudWxsXG4gICAgKTtcbiAgICBjb25zdCBldmVudFNuYXAgPSBmaWx0ZXIudXBkYXRlRnVsbE5vZGUoXG4gICAgICBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERSxcbiAgICAgIGluaXRpYWxFdmVudENhY2hlLmdldE5vZGUoKSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIGNvbnN0IG5ld1NlcnZlckNhY2hlID0gbmV3IENhY2hlTm9kZShcbiAgICAgIHNlcnZlclNuYXAsXG4gICAgICBpbml0aWFsU2VydmVyQ2FjaGUuaXNGdWxseUluaXRpYWxpemVkKCksXG4gICAgICBpbmRleEZpbHRlci5maWx0ZXJzTm9kZXMoKVxuICAgICk7XG4gICAgY29uc3QgbmV3RXZlbnRDYWNoZSA9IG5ldyBDYWNoZU5vZGUoXG4gICAgICBldmVudFNuYXAsXG4gICAgICBpbml0aWFsRXZlbnRDYWNoZS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSxcbiAgICAgIGZpbHRlci5maWx0ZXJzTm9kZXMoKVxuICAgICk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7IVZpZXdDYWNoZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMudmlld0NhY2hlXyA9IG5ldyBWaWV3Q2FjaGUobmV3RXZlbnRDYWNoZSwgbmV3U2VydmVyQ2FjaGUpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFFdmVudEdlbmVyYXRvcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZXZlbnRHZW5lcmF0b3JfID0gbmV3IEV2ZW50R2VuZXJhdG9yKHRoaXMucXVlcnlfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUXVlcnl9XG4gICAqL1xuICBnZXRRdWVyeSgpOiBRdWVyeSB7XG4gICAgcmV0dXJuIHRoaXMucXVlcnlfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9Ob2RlfVxuICAgKi9cbiAgZ2V0U2VydmVyQ2FjaGUoKTogTm9kZSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLnZpZXdDYWNoZV8uZ2V0U2VydmVyQ2FjaGUoKS5nZXROb2RlKCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshUGF0aH0gcGF0aFxuICAgKiBAcmV0dXJuIHs/Tm9kZX1cbiAgICovXG4gIGdldENvbXBsZXRlU2VydmVyQ2FjaGUocGF0aDogUGF0aCk6IE5vZGUgfCBudWxsIHtcbiAgICBjb25zdCBjYWNoZSA9IHRoaXMudmlld0NhY2hlXy5nZXRDb21wbGV0ZVNlcnZlclNuYXAoKTtcbiAgICBpZiAoY2FjaGUpIHtcbiAgICAgIC8vIElmIHRoaXMgaXNuJ3QgYSBcImxvYWRzQWxsRGF0YVwiIHZpZXcsIHRoZW4gY2FjaGUgaXNuJ3QgYWN0dWFsbHkgYSBjb21wbGV0ZSBjYWNoZSBhbmRcbiAgICAgIC8vIHdlIG5lZWQgdG8gc2VlIGlmIGl0IGNvbnRhaW5zIHRoZSBjaGlsZCB3ZSdyZSBpbnRlcmVzdGVkIGluLlxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnF1ZXJ5Xy5nZXRRdWVyeVBhcmFtcygpLmxvYWRzQWxsRGF0YSgpIHx8XG4gICAgICAgICghcGF0aC5pc0VtcHR5KCkgJiYgIWNhY2hlLmdldEltbWVkaWF0ZUNoaWxkKHBhdGguZ2V0RnJvbnQoKSkuaXNFbXB0eSgpKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBjYWNoZS5nZXRDaGlsZChwYXRoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzRW1wdHkoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZXZlbnRSZWdpc3RyYXRpb25zXy5sZW5ndGggPT09IDA7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRXZlbnRSZWdpc3RyYXRpb259IGV2ZW50UmVnaXN0cmF0aW9uXG4gICAqL1xuICBhZGRFdmVudFJlZ2lzdHJhdGlvbihldmVudFJlZ2lzdHJhdGlvbjogRXZlbnRSZWdpc3RyYXRpb24pIHtcbiAgICB0aGlzLmV2ZW50UmVnaXN0cmF0aW9uc18ucHVzaChldmVudFJlZ2lzdHJhdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHs/RXZlbnRSZWdpc3RyYXRpb259IGV2ZW50UmVnaXN0cmF0aW9uIElmIG51bGwsIHJlbW92ZSBhbGwgY2FsbGJhY2tzLlxuICAgKiBAcGFyYW0ge0Vycm9yPX0gY2FuY2VsRXJyb3IgSWYgYSBjYW5jZWxFcnJvciBpcyBwcm92aWRlZCwgYXBwcm9wcmlhdGUgY2FuY2VsIGV2ZW50cyB3aWxsIGJlIHJldHVybmVkLlxuICAgKiBAcmV0dXJuIHshQXJyYXkuPCFFdmVudD59IENhbmNlbCBldmVudHMsIGlmIGNhbmNlbEVycm9yIHdhcyBwcm92aWRlZC5cbiAgICovXG4gIHJlbW92ZUV2ZW50UmVnaXN0cmF0aW9uKFxuICAgIGV2ZW50UmVnaXN0cmF0aW9uOiBFdmVudFJlZ2lzdHJhdGlvbiB8IG51bGwsXG4gICAgY2FuY2VsRXJyb3I/OiBFcnJvclxuICApOiBFdmVudFtdIHtcbiAgICBjb25zdCBjYW5jZWxFdmVudHM6IENhbmNlbEV2ZW50W10gPSBbXTtcbiAgICBpZiAoY2FuY2VsRXJyb3IpIHtcbiAgICAgIGFzc2VydChcbiAgICAgICAgZXZlbnRSZWdpc3RyYXRpb24gPT0gbnVsbCxcbiAgICAgICAgJ0EgY2FuY2VsIHNob3VsZCBjYW5jZWwgYWxsIGV2ZW50IHJlZ2lzdHJhdGlvbnMuJ1xuICAgICAgKTtcbiAgICAgIGNvbnN0IHBhdGggPSB0aGlzLnF1ZXJ5Xy5wYXRoO1xuICAgICAgdGhpcy5ldmVudFJlZ2lzdHJhdGlvbnNfLmZvckVhY2goZnVuY3Rpb24ocmVnaXN0cmF0aW9uKSB7XG4gICAgICAgIGNhbmNlbEVycm9yIC8qKiBAdHlwZSB7IUVycm9yfSAqLyA9IGNhbmNlbEVycm9yO1xuICAgICAgICBjb25zdCBtYXliZUV2ZW50ID0gcmVnaXN0cmF0aW9uLmNyZWF0ZUNhbmNlbEV2ZW50KGNhbmNlbEVycm9yLCBwYXRoKTtcbiAgICAgICAgaWYgKG1heWJlRXZlbnQpIHtcbiAgICAgICAgICBjYW5jZWxFdmVudHMucHVzaChtYXliZUV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50UmVnaXN0cmF0aW9uKSB7XG4gICAgICBsZXQgcmVtYWluaW5nID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZXZlbnRSZWdpc3RyYXRpb25zXy5sZW5ndGg7ICsraSkge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuZXZlbnRSZWdpc3RyYXRpb25zX1tpXTtcbiAgICAgICAgaWYgKCFleGlzdGluZy5tYXRjaGVzKGV2ZW50UmVnaXN0cmF0aW9uKSkge1xuICAgICAgICAgIHJlbWFpbmluZy5wdXNoKGV4aXN0aW5nKTtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudFJlZ2lzdHJhdGlvbi5oYXNBbnlDYWxsYmFjaygpKSB7XG4gICAgICAgICAgLy8gV2UncmUgcmVtb3ZpbmcganVzdCB0aGlzIG9uZVxuICAgICAgICAgIHJlbWFpbmluZyA9IHJlbWFpbmluZy5jb25jYXQodGhpcy5ldmVudFJlZ2lzdHJhdGlvbnNfLnNsaWNlKGkgKyAxKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuZXZlbnRSZWdpc3RyYXRpb25zXyA9IHJlbWFpbmluZztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ldmVudFJlZ2lzdHJhdGlvbnNfID0gW107XG4gICAgfVxuICAgIHJldHVybiBjYW5jZWxFdmVudHM7XG4gIH1cblxuICAvKipcbiAgICogQXBwbGllcyB0aGUgZ2l2ZW4gT3BlcmF0aW9uLCB1cGRhdGVzIG91ciBjYWNoZSwgYW5kIHJldHVybnMgdGhlIGFwcHJvcHJpYXRlIGV2ZW50cy5cbiAgICpcbiAgICogQHBhcmFtIHshT3BlcmF0aW9ufSBvcGVyYXRpb25cbiAgICogQHBhcmFtIHshV3JpdGVUcmVlUmVmfSB3cml0ZXNDYWNoZVxuICAgKiBAcGFyYW0gez9Ob2RlfSBjb21wbGV0ZVNlcnZlckNhY2hlXG4gICAqIEByZXR1cm4geyFBcnJheS48IUV2ZW50Pn1cbiAgICovXG4gIGFwcGx5T3BlcmF0aW9uKFxuICAgIG9wZXJhdGlvbjogT3BlcmF0aW9uLFxuICAgIHdyaXRlc0NhY2hlOiBXcml0ZVRyZWVSZWYsXG4gICAgY29tcGxldGVTZXJ2ZXJDYWNoZTogTm9kZSB8IG51bGxcbiAgKTogRXZlbnRbXSB7XG4gICAgaWYgKFxuICAgICAgb3BlcmF0aW9uLnR5cGUgPT09IE9wZXJhdGlvblR5cGUuTUVSR0UgJiZcbiAgICAgIG9wZXJhdGlvbi5zb3VyY2UucXVlcnlJZCAhPT0gbnVsbFxuICAgICkge1xuICAgICAgYXNzZXJ0KFxuICAgICAgICB0aGlzLnZpZXdDYWNoZV8uZ2V0Q29tcGxldGVTZXJ2ZXJTbmFwKCksXG4gICAgICAgICdXZSBzaG91bGQgYWx3YXlzIGhhdmUgYSBmdWxsIGNhY2hlIGJlZm9yZSBoYW5kbGluZyBtZXJnZXMnXG4gICAgICApO1xuICAgICAgYXNzZXJ0KFxuICAgICAgICB0aGlzLnZpZXdDYWNoZV8uZ2V0Q29tcGxldGVFdmVudFNuYXAoKSxcbiAgICAgICAgJ01pc3NpbmcgZXZlbnQgY2FjaGUsIGV2ZW4gdGhvdWdoIHdlIGhhdmUgYSBzZXJ2ZXIgY2FjaGUnXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZFZpZXdDYWNoZSA9IHRoaXMudmlld0NhY2hlXztcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLnByb2Nlc3Nvcl8uYXBwbHlPcGVyYXRpb24oXG4gICAgICBvbGRWaWV3Q2FjaGUsXG4gICAgICBvcGVyYXRpb24sXG4gICAgICB3cml0ZXNDYWNoZSxcbiAgICAgIGNvbXBsZXRlU2VydmVyQ2FjaGVcbiAgICApO1xuICAgIHRoaXMucHJvY2Vzc29yXy5hc3NlcnRJbmRleGVkKHJlc3VsdC52aWV3Q2FjaGUpO1xuXG4gICAgYXNzZXJ0KFxuICAgICAgcmVzdWx0LnZpZXdDYWNoZS5nZXRTZXJ2ZXJDYWNoZSgpLmlzRnVsbHlJbml0aWFsaXplZCgpIHx8XG4gICAgICAgICFvbGRWaWV3Q2FjaGUuZ2V0U2VydmVyQ2FjaGUoKS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSxcbiAgICAgICdPbmNlIGEgc2VydmVyIHNuYXAgaXMgY29tcGxldGUsIGl0IHNob3VsZCBuZXZlciBnbyBiYWNrJ1xuICAgICk7XG5cbiAgICB0aGlzLnZpZXdDYWNoZV8gPSByZXN1bHQudmlld0NhY2hlO1xuXG4gICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVFdmVudHNGb3JDaGFuZ2VzXyhcbiAgICAgIHJlc3VsdC5jaGFuZ2VzLFxuICAgICAgcmVzdWx0LnZpZXdDYWNoZS5nZXRFdmVudENhY2hlKCkuZ2V0Tm9kZSgpLFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRXZlbnRSZWdpc3RyYXRpb259IHJlZ2lzdHJhdGlvblxuICAgKiBAcmV0dXJuIHshQXJyYXkuPCFFdmVudD59XG4gICAqL1xuICBnZXRJbml0aWFsRXZlbnRzKHJlZ2lzdHJhdGlvbjogRXZlbnRSZWdpc3RyYXRpb24pOiBFdmVudFtdIHtcbiAgICBjb25zdCBldmVudFNuYXAgPSB0aGlzLnZpZXdDYWNoZV8uZ2V0RXZlbnRDYWNoZSgpO1xuICAgIGNvbnN0IGluaXRpYWxDaGFuZ2VzOiBDaGFuZ2VbXSA9IFtdO1xuICAgIGlmICghZXZlbnRTbmFwLmdldE5vZGUoKS5pc0xlYWZOb2RlKCkpIHtcbiAgICAgIGNvbnN0IGV2ZW50Tm9kZSA9IGV2ZW50U25hcC5nZXROb2RlKCkgYXMgQ2hpbGRyZW5Ob2RlO1xuICAgICAgZXZlbnROb2RlLmZvckVhY2hDaGlsZChQUklPUklUWV9JTkRFWCwgZnVuY3Rpb24oa2V5LCBjaGlsZE5vZGUpIHtcbiAgICAgICAgaW5pdGlhbENoYW5nZXMucHVzaChDaGFuZ2UuY2hpbGRBZGRlZENoYW5nZShrZXksIGNoaWxkTm9kZSkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChldmVudFNuYXAuaXNGdWxseUluaXRpYWxpemVkKCkpIHtcbiAgICAgIGluaXRpYWxDaGFuZ2VzLnB1c2goQ2hhbmdlLnZhbHVlQ2hhbmdlKGV2ZW50U25hcC5nZXROb2RlKCkpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVFdmVudHNGb3JDaGFuZ2VzXyhcbiAgICAgIGluaXRpYWxDaGFuZ2VzLFxuICAgICAgZXZlbnRTbmFwLmdldE5vZGUoKSxcbiAgICAgIHJlZ2lzdHJhdGlvblxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHshQXJyYXkuPCFDaGFuZ2U+fSBjaGFuZ2VzXG4gICAqIEBwYXJhbSB7IU5vZGV9IGV2ZW50Q2FjaGVcbiAgICogQHBhcmFtIHtFdmVudFJlZ2lzdHJhdGlvbj19IGV2ZW50UmVnaXN0cmF0aW9uXG4gICAqIEByZXR1cm4geyFBcnJheS48IUV2ZW50Pn1cbiAgICovXG4gIGdlbmVyYXRlRXZlbnRzRm9yQ2hhbmdlc18oXG4gICAgY2hhbmdlczogQ2hhbmdlW10sXG4gICAgZXZlbnRDYWNoZTogTm9kZSxcbiAgICBldmVudFJlZ2lzdHJhdGlvbj86IEV2ZW50UmVnaXN0cmF0aW9uXG4gICk6IEV2ZW50W10ge1xuICAgIGNvbnN0IHJlZ2lzdHJhdGlvbnMgPSBldmVudFJlZ2lzdHJhdGlvblxuICAgICAgPyBbZXZlbnRSZWdpc3RyYXRpb25dXG4gICAgICA6IHRoaXMuZXZlbnRSZWdpc3RyYXRpb25zXztcbiAgICByZXR1cm4gdGhpcy5ldmVudEdlbmVyYXRvcl8uZ2VuZXJhdGVFdmVudHNGb3JDaGFuZ2VzKFxuICAgICAgY2hhbmdlcyxcbiAgICAgIGV2ZW50Q2FjaGUsXG4gICAgICByZWdpc3RyYXRpb25zXG4gICAgKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ2hpbGRyZW5Ob2RlIH0gZnJvbSAnLi4vc25hcC9DaGlsZHJlbk5vZGUnO1xuaW1wb3J0IHsgQ2FjaGVOb2RlIH0gZnJvbSAnLi9DYWNoZU5vZGUnO1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL3NuYXAvTm9kZSc7XG5cbi8qKlxuICogU3RvcmVzIHRoZSBkYXRhIHdlIGhhdmUgY2FjaGVkIGZvciBhIHZpZXcuXG4gKlxuICogc2VydmVyU25hcCBpcyB0aGUgY2FjaGVkIHNlcnZlciBkYXRhLCBldmVudFNuYXAgaXMgdGhlIGNhY2hlZCBldmVudCBkYXRhIChzZXJ2ZXIgZGF0YSBwbHVzIGFueSBsb2NhbCB3cml0ZXMpLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgY2xhc3MgVmlld0NhY2hlIHtcbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7IUNhY2hlTm9kZX0gZXZlbnRDYWNoZV9cbiAgICogQHBhcmFtIHshQ2FjaGVOb2RlfSBzZXJ2ZXJDYWNoZV9cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZXZlbnRDYWNoZV86IENhY2hlTm9kZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IHNlcnZlckNhY2hlXzogQ2FjaGVOb2RlXG4gICkge31cblxuICAvKipcbiAgICogQGNvbnN0XG4gICAqIEB0eXBlIHtWaWV3Q2FjaGV9XG4gICAqL1xuICBzdGF0aWMgRW1wdHkgPSBuZXcgVmlld0NhY2hlKFxuICAgIG5ldyBDYWNoZU5vZGUoXG4gICAgICBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERSxcbiAgICAgIC8qZnVsbHlJbml0aWFsaXplZD0qLyBmYWxzZSxcbiAgICAgIC8qZmlsdGVyZWQ9Ki8gZmFsc2VcbiAgICApLFxuICAgIG5ldyBDYWNoZU5vZGUoXG4gICAgICBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERSxcbiAgICAgIC8qZnVsbHlJbml0aWFsaXplZD0qLyBmYWxzZSxcbiAgICAgIC8qZmlsdGVyZWQ9Ki8gZmFsc2VcbiAgICApXG4gICk7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU5vZGV9IGV2ZW50U25hcFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbXBsZXRlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZmlsdGVyZWRcbiAgICogQHJldHVybiB7IVZpZXdDYWNoZX1cbiAgICovXG4gIHVwZGF0ZUV2ZW50U25hcChcbiAgICBldmVudFNuYXA6IE5vZGUsXG4gICAgY29tcGxldGU6IGJvb2xlYW4sXG4gICAgZmlsdGVyZWQ6IGJvb2xlYW5cbiAgKTogVmlld0NhY2hlIHtcbiAgICByZXR1cm4gbmV3IFZpZXdDYWNoZShcbiAgICAgIG5ldyBDYWNoZU5vZGUoZXZlbnRTbmFwLCBjb21wbGV0ZSwgZmlsdGVyZWQpLFxuICAgICAgdGhpcy5zZXJ2ZXJDYWNoZV9cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU5vZGV9IHNlcnZlclNuYXBcbiAgICogQHBhcmFtIHtib29sZWFufSBjb21wbGV0ZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZpbHRlcmVkXG4gICAqIEByZXR1cm4geyFWaWV3Q2FjaGV9XG4gICAqL1xuICB1cGRhdGVTZXJ2ZXJTbmFwKFxuICAgIHNlcnZlclNuYXA6IE5vZGUsXG4gICAgY29tcGxldGU6IGJvb2xlYW4sXG4gICAgZmlsdGVyZWQ6IGJvb2xlYW5cbiAgKTogVmlld0NhY2hlIHtcbiAgICByZXR1cm4gbmV3IFZpZXdDYWNoZShcbiAgICAgIHRoaXMuZXZlbnRDYWNoZV8sXG4gICAgICBuZXcgQ2FjaGVOb2RlKHNlcnZlclNuYXAsIGNvbXBsZXRlLCBmaWx0ZXJlZClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFDYWNoZU5vZGV9XG4gICAqL1xuICBnZXRFdmVudENhY2hlKCk6IENhY2hlTm9kZSB7XG4gICAgcmV0dXJuIHRoaXMuZXZlbnRDYWNoZV87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P05vZGV9XG4gICAqL1xuICBnZXRDb21wbGV0ZUV2ZW50U25hcCgpOiBOb2RlIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZXZlbnRDYWNoZV8uaXNGdWxseUluaXRpYWxpemVkKClcbiAgICAgID8gdGhpcy5ldmVudENhY2hlXy5nZXROb2RlKClcbiAgICAgIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshQ2FjaGVOb2RlfVxuICAgKi9cbiAgZ2V0U2VydmVyQ2FjaGUoKTogQ2FjaGVOb2RlIHtcbiAgICByZXR1cm4gdGhpcy5zZXJ2ZXJDYWNoZV87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P05vZGV9XG4gICAqL1xuICBnZXRDb21wbGV0ZVNlcnZlclNuYXAoKTogTm9kZSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLnNlcnZlckNhY2hlXy5pc0Z1bGx5SW5pdGlhbGl6ZWQoKVxuICAgICAgPyB0aGlzLnNlcnZlckNhY2hlXy5nZXROb2RlKClcbiAgICAgIDogbnVsbDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgT3BlcmF0aW9uLCBPcGVyYXRpb25UeXBlIH0gZnJvbSAnLi4vb3BlcmF0aW9uL09wZXJhdGlvbic7XG5pbXBvcnQgeyBhc3NlcnQsIGFzc2VydGlvbkVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgQ2hpbGRDaGFuZ2VBY2N1bXVsYXRvciB9IGZyb20gJy4vQ2hpbGRDaGFuZ2VBY2N1bXVsYXRvcic7XG5pbXBvcnQgeyBDaGFuZ2UgfSBmcm9tICcuL0NoYW5nZSc7XG5pbXBvcnQgeyBDaGlsZHJlbk5vZGUgfSBmcm9tICcuLi9zbmFwL0NoaWxkcmVuTm9kZSc7XG5pbXBvcnQgeyBLRVlfSU5ERVggfSBmcm9tICcuLi9zbmFwL2luZGV4ZXMvS2V5SW5kZXgnO1xuaW1wb3J0IHsgSW1tdXRhYmxlVHJlZSB9IGZyb20gJy4uL3V0aWwvSW1tdXRhYmxlVHJlZSc7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vdXRpbC9QYXRoJztcbmltcG9ydCB7XG4gIFdyaXRlVHJlZUNvbXBsZXRlQ2hpbGRTb3VyY2UsXG4gIE5PX0NPTVBMRVRFX0NISUxEX1NPVVJDRSxcbiAgQ29tcGxldGVDaGlsZFNvdXJjZVxufSBmcm9tICcuL0NvbXBsZXRlQ2hpbGRTb3VyY2UnO1xuaW1wb3J0IHsgVmlld0NhY2hlIH0gZnJvbSAnLi9WaWV3Q2FjaGUnO1xuaW1wb3J0IHsgTm9kZUZpbHRlciB9IGZyb20gJy4vZmlsdGVyL05vZGVGaWx0ZXInO1xuaW1wb3J0IHsgV3JpdGVUcmVlUmVmIH0gZnJvbSAnLi4vV3JpdGVUcmVlJztcbmltcG9ydCB7IE92ZXJ3cml0ZSB9IGZyb20gJy4uL29wZXJhdGlvbi9PdmVyd3JpdGUnO1xuaW1wb3J0IHsgTWVyZ2UgfSBmcm9tICcuLi9vcGVyYXRpb24vTWVyZ2UnO1xuaW1wb3J0IHsgQWNrVXNlcldyaXRlIH0gZnJvbSAnLi4vb3BlcmF0aW9uL0Fja1VzZXJXcml0ZSc7XG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vc25hcC9Ob2RlJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBzdHJ1Y3RcbiAqL1xuZXhwb3J0IGNsYXNzIFByb2Nlc3NvclJlc3VsdCB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFWaWV3Q2FjaGV9IHZpZXdDYWNoZVxuICAgKiBAcGFyYW0geyFBcnJheS48IUNoYW5nZT59IGNoYW5nZXNcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyByZWFkb25seSB2aWV3Q2FjaGU6IFZpZXdDYWNoZSxcbiAgICBwdWJsaWMgcmVhZG9ubHkgY2hhbmdlczogQ2hhbmdlW11cbiAgKSB7fVxufVxuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgY2xhc3MgVmlld1Byb2Nlc3NvciB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFOb2RlRmlsdGVyfSBmaWx0ZXJfXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGZpbHRlcl86IE5vZGVGaWx0ZXIpIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVZpZXdDYWNoZX0gdmlld0NhY2hlXG4gICAqL1xuICBhc3NlcnRJbmRleGVkKHZpZXdDYWNoZTogVmlld0NhY2hlKSB7XG4gICAgYXNzZXJ0KFxuICAgICAgdmlld0NhY2hlXG4gICAgICAgIC5nZXRFdmVudENhY2hlKClcbiAgICAgICAgLmdldE5vZGUoKVxuICAgICAgICAuaXNJbmRleGVkKHRoaXMuZmlsdGVyXy5nZXRJbmRleCgpKSxcbiAgICAgICdFdmVudCBzbmFwIG5vdCBpbmRleGVkJ1xuICAgICk7XG4gICAgYXNzZXJ0KFxuICAgICAgdmlld0NhY2hlXG4gICAgICAgIC5nZXRTZXJ2ZXJDYWNoZSgpXG4gICAgICAgIC5nZXROb2RlKClcbiAgICAgICAgLmlzSW5kZXhlZCh0aGlzLmZpbHRlcl8uZ2V0SW5kZXgoKSksXG4gICAgICAnU2VydmVyIHNuYXAgbm90IGluZGV4ZWQnXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFWaWV3Q2FjaGV9IG9sZFZpZXdDYWNoZVxuICAgKiBAcGFyYW0geyFPcGVyYXRpb259IG9wZXJhdGlvblxuICAgKiBAcGFyYW0geyFXcml0ZVRyZWVSZWZ9IHdyaXRlc0NhY2hlXG4gICAqIEBwYXJhbSB7P05vZGV9IGNvbXBsZXRlQ2FjaGVcbiAgICogQHJldHVybiB7IVByb2Nlc3NvclJlc3VsdH1cbiAgICovXG4gIGFwcGx5T3BlcmF0aW9uKFxuICAgIG9sZFZpZXdDYWNoZTogVmlld0NhY2hlLFxuICAgIG9wZXJhdGlvbjogT3BlcmF0aW9uLFxuICAgIHdyaXRlc0NhY2hlOiBXcml0ZVRyZWVSZWYsXG4gICAgY29tcGxldGVDYWNoZTogTm9kZSB8IG51bGxcbiAgKTogUHJvY2Vzc29yUmVzdWx0IHtcbiAgICBjb25zdCBhY2N1bXVsYXRvciA9IG5ldyBDaGlsZENoYW5nZUFjY3VtdWxhdG9yKCk7XG4gICAgbGV0IG5ld1ZpZXdDYWNoZSwgZmlsdGVyU2VydmVyTm9kZTtcbiAgICBpZiAob3BlcmF0aW9uLnR5cGUgPT09IE9wZXJhdGlvblR5cGUuT1ZFUldSSVRFKSB7XG4gICAgICBjb25zdCBvdmVyd3JpdGUgPSBvcGVyYXRpb24gYXMgT3ZlcndyaXRlO1xuICAgICAgaWYgKG92ZXJ3cml0ZS5zb3VyY2UuZnJvbVVzZXIpIHtcbiAgICAgICAgbmV3Vmlld0NhY2hlID0gdGhpcy5hcHBseVVzZXJPdmVyd3JpdGVfKFxuICAgICAgICAgIG9sZFZpZXdDYWNoZSxcbiAgICAgICAgICBvdmVyd3JpdGUucGF0aCxcbiAgICAgICAgICBvdmVyd3JpdGUuc25hcCxcbiAgICAgICAgICB3cml0ZXNDYWNoZSxcbiAgICAgICAgICBjb21wbGV0ZUNhY2hlLFxuICAgICAgICAgIGFjY3VtdWxhdG9yXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhc3NlcnQob3ZlcndyaXRlLnNvdXJjZS5mcm9tU2VydmVyLCAnVW5rbm93biBzb3VyY2UuJyk7XG4gICAgICAgIC8vIFdlIGZpbHRlciB0aGUgbm9kZSBpZiBpdCdzIGEgdGFnZ2VkIHVwZGF0ZSBvciB0aGUgbm9kZSBoYXMgYmVlbiBwcmV2aW91c2x5IGZpbHRlcmVkICBhbmQgdGhlXG4gICAgICAgIC8vIHVwZGF0ZSBpcyBub3QgYXQgdGhlIHJvb3QgaW4gd2hpY2ggY2FzZSBpdCBpcyBvayAoYW5kIG5lY2Vzc2FyeSkgdG8gbWFyayB0aGUgbm9kZSB1bmZpbHRlcmVkXG4gICAgICAgIC8vIGFnYWluXG4gICAgICAgIGZpbHRlclNlcnZlck5vZGUgPVxuICAgICAgICAgIG92ZXJ3cml0ZS5zb3VyY2UudGFnZ2VkIHx8XG4gICAgICAgICAgKG9sZFZpZXdDYWNoZS5nZXRTZXJ2ZXJDYWNoZSgpLmlzRmlsdGVyZWQoKSAmJlxuICAgICAgICAgICAgIW92ZXJ3cml0ZS5wYXRoLmlzRW1wdHkoKSk7XG4gICAgICAgIG5ld1ZpZXdDYWNoZSA9IHRoaXMuYXBwbHlTZXJ2ZXJPdmVyd3JpdGVfKFxuICAgICAgICAgIG9sZFZpZXdDYWNoZSxcbiAgICAgICAgICBvdmVyd3JpdGUucGF0aCxcbiAgICAgICAgICBvdmVyd3JpdGUuc25hcCxcbiAgICAgICAgICB3cml0ZXNDYWNoZSxcbiAgICAgICAgICBjb21wbGV0ZUNhY2hlLFxuICAgICAgICAgIGZpbHRlclNlcnZlck5vZGUsXG4gICAgICAgICAgYWNjdW11bGF0b3JcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG9wZXJhdGlvbi50eXBlID09PSBPcGVyYXRpb25UeXBlLk1FUkdFKSB7XG4gICAgICBjb25zdCBtZXJnZSA9IG9wZXJhdGlvbiBhcyBNZXJnZTtcbiAgICAgIGlmIChtZXJnZS5zb3VyY2UuZnJvbVVzZXIpIHtcbiAgICAgICAgbmV3Vmlld0NhY2hlID0gdGhpcy5hcHBseVVzZXJNZXJnZV8oXG4gICAgICAgICAgb2xkVmlld0NhY2hlLFxuICAgICAgICAgIG1lcmdlLnBhdGgsXG4gICAgICAgICAgbWVyZ2UuY2hpbGRyZW4sXG4gICAgICAgICAgd3JpdGVzQ2FjaGUsXG4gICAgICAgICAgY29tcGxldGVDYWNoZSxcbiAgICAgICAgICBhY2N1bXVsYXRvclxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXNzZXJ0KG1lcmdlLnNvdXJjZS5mcm9tU2VydmVyLCAnVW5rbm93biBzb3VyY2UuJyk7XG4gICAgICAgIC8vIFdlIGZpbHRlciB0aGUgbm9kZSBpZiBpdCdzIGEgdGFnZ2VkIHVwZGF0ZSBvciB0aGUgbm9kZSBoYXMgYmVlbiBwcmV2aW91c2x5IGZpbHRlcmVkXG4gICAgICAgIGZpbHRlclNlcnZlck5vZGUgPVxuICAgICAgICAgIG1lcmdlLnNvdXJjZS50YWdnZWQgfHwgb2xkVmlld0NhY2hlLmdldFNlcnZlckNhY2hlKCkuaXNGaWx0ZXJlZCgpO1xuICAgICAgICBuZXdWaWV3Q2FjaGUgPSB0aGlzLmFwcGx5U2VydmVyTWVyZ2VfKFxuICAgICAgICAgIG9sZFZpZXdDYWNoZSxcbiAgICAgICAgICBtZXJnZS5wYXRoLFxuICAgICAgICAgIG1lcmdlLmNoaWxkcmVuLFxuICAgICAgICAgIHdyaXRlc0NhY2hlLFxuICAgICAgICAgIGNvbXBsZXRlQ2FjaGUsXG4gICAgICAgICAgZmlsdGVyU2VydmVyTm9kZSxcbiAgICAgICAgICBhY2N1bXVsYXRvclxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAob3BlcmF0aW9uLnR5cGUgPT09IE9wZXJhdGlvblR5cGUuQUNLX1VTRVJfV1JJVEUpIHtcbiAgICAgIGNvbnN0IGFja1VzZXJXcml0ZSA9IG9wZXJhdGlvbiBhcyBBY2tVc2VyV3JpdGU7XG4gICAgICBpZiAoIWFja1VzZXJXcml0ZS5yZXZlcnQpIHtcbiAgICAgICAgbmV3Vmlld0NhY2hlID0gdGhpcy5hY2tVc2VyV3JpdGVfKFxuICAgICAgICAgIG9sZFZpZXdDYWNoZSxcbiAgICAgICAgICBhY2tVc2VyV3JpdGUucGF0aCxcbiAgICAgICAgICBhY2tVc2VyV3JpdGUuYWZmZWN0ZWRUcmVlLFxuICAgICAgICAgIHdyaXRlc0NhY2hlLFxuICAgICAgICAgIGNvbXBsZXRlQ2FjaGUsXG4gICAgICAgICAgYWNjdW11bGF0b3JcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld1ZpZXdDYWNoZSA9IHRoaXMucmV2ZXJ0VXNlcldyaXRlXyhcbiAgICAgICAgICBvbGRWaWV3Q2FjaGUsXG4gICAgICAgICAgYWNrVXNlcldyaXRlLnBhdGgsXG4gICAgICAgICAgd3JpdGVzQ2FjaGUsXG4gICAgICAgICAgY29tcGxldGVDYWNoZSxcbiAgICAgICAgICBhY2N1bXVsYXRvclxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAob3BlcmF0aW9uLnR5cGUgPT09IE9wZXJhdGlvblR5cGUuTElTVEVOX0NPTVBMRVRFKSB7XG4gICAgICBuZXdWaWV3Q2FjaGUgPSB0aGlzLmxpc3RlbkNvbXBsZXRlXyhcbiAgICAgICAgb2xkVmlld0NhY2hlLFxuICAgICAgICBvcGVyYXRpb24ucGF0aCxcbiAgICAgICAgd3JpdGVzQ2FjaGUsXG4gICAgICAgIGFjY3VtdWxhdG9yXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBhc3NlcnRpb25FcnJvcignVW5rbm93biBvcGVyYXRpb24gdHlwZTogJyArIG9wZXJhdGlvbi50eXBlKTtcbiAgICB9XG4gICAgY29uc3QgY2hhbmdlcyA9IGFjY3VtdWxhdG9yLmdldENoYW5nZXMoKTtcbiAgICBWaWV3UHJvY2Vzc29yLm1heWJlQWRkVmFsdWVFdmVudF8ob2xkVmlld0NhY2hlLCBuZXdWaWV3Q2FjaGUsIGNoYW5nZXMpO1xuICAgIHJldHVybiBuZXcgUHJvY2Vzc29yUmVzdWx0KG5ld1ZpZXdDYWNoZSwgY2hhbmdlcyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshVmlld0NhY2hlfSBvbGRWaWV3Q2FjaGVcbiAgICogQHBhcmFtIHshVmlld0NhY2hlfSBuZXdWaWV3Q2FjaGVcbiAgICogQHBhcmFtIHshQXJyYXkuPCFDaGFuZ2U+fSBhY2N1bXVsYXRvclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgbWF5YmVBZGRWYWx1ZUV2ZW50XyhcbiAgICBvbGRWaWV3Q2FjaGU6IFZpZXdDYWNoZSxcbiAgICBuZXdWaWV3Q2FjaGU6IFZpZXdDYWNoZSxcbiAgICBhY2N1bXVsYXRvcjogQ2hhbmdlW11cbiAgKSB7XG4gICAgY29uc3QgZXZlbnRTbmFwID0gbmV3Vmlld0NhY2hlLmdldEV2ZW50Q2FjaGUoKTtcbiAgICBpZiAoZXZlbnRTbmFwLmlzRnVsbHlJbml0aWFsaXplZCgpKSB7XG4gICAgICBjb25zdCBpc0xlYWZPckVtcHR5ID1cbiAgICAgICAgZXZlbnRTbmFwLmdldE5vZGUoKS5pc0xlYWZOb2RlKCkgfHwgZXZlbnRTbmFwLmdldE5vZGUoKS5pc0VtcHR5KCk7XG4gICAgICBjb25zdCBvbGRDb21wbGV0ZVNuYXAgPSBvbGRWaWV3Q2FjaGUuZ2V0Q29tcGxldGVFdmVudFNuYXAoKTtcbiAgICAgIGlmIChcbiAgICAgICAgYWNjdW11bGF0b3IubGVuZ3RoID4gMCB8fFxuICAgICAgICAhb2xkVmlld0NhY2hlLmdldEV2ZW50Q2FjaGUoKS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSB8fFxuICAgICAgICAoaXNMZWFmT3JFbXB0eSAmJlxuICAgICAgICAgICFldmVudFNuYXBcbiAgICAgICAgICAgIC5nZXROb2RlKClcbiAgICAgICAgICAgIC5lcXVhbHMoLyoqIEB0eXBlIHshTm9kZX0gKi8gKG9sZENvbXBsZXRlU25hcCkpKSB8fFxuICAgICAgICAhZXZlbnRTbmFwXG4gICAgICAgICAgLmdldE5vZGUoKVxuICAgICAgICAgIC5nZXRQcmlvcml0eSgpXG4gICAgICAgICAgLmVxdWFscyhvbGRDb21wbGV0ZVNuYXAuZ2V0UHJpb3JpdHkoKSlcbiAgICAgICkge1xuICAgICAgICBhY2N1bXVsYXRvci5wdXNoKFxuICAgICAgICAgIENoYW5nZS52YWx1ZUNoYW5nZShcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7IU5vZGV9ICovIG5ld1ZpZXdDYWNoZS5nZXRDb21wbGV0ZUV2ZW50U25hcCgpXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFWaWV3Q2FjaGV9IHZpZXdDYWNoZVxuICAgKiBAcGFyYW0geyFQYXRofSBjaGFuZ2VQYXRoXG4gICAqIEBwYXJhbSB7IVdyaXRlVHJlZVJlZn0gd3JpdGVzQ2FjaGVcbiAgICogQHBhcmFtIHshQ29tcGxldGVDaGlsZFNvdXJjZX0gc291cmNlXG4gICAqIEBwYXJhbSB7IUNoaWxkQ2hhbmdlQWNjdW11bGF0b3J9IGFjY3VtdWxhdG9yXG4gICAqIEByZXR1cm4geyFWaWV3Q2FjaGV9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlRXZlbnRDYWNoZUFmdGVyU2VydmVyRXZlbnRfKFxuICAgIHZpZXdDYWNoZTogVmlld0NhY2hlLFxuICAgIGNoYW5nZVBhdGg6IFBhdGgsXG4gICAgd3JpdGVzQ2FjaGU6IFdyaXRlVHJlZVJlZixcbiAgICBzb3VyY2U6IENvbXBsZXRlQ2hpbGRTb3VyY2UsXG4gICAgYWNjdW11bGF0b3I6IENoaWxkQ2hhbmdlQWNjdW11bGF0b3JcbiAgKTogVmlld0NhY2hlIHtcbiAgICBjb25zdCBvbGRFdmVudFNuYXAgPSB2aWV3Q2FjaGUuZ2V0RXZlbnRDYWNoZSgpO1xuICAgIGlmICh3cml0ZXNDYWNoZS5zaGFkb3dpbmdXcml0ZShjaGFuZ2VQYXRoKSAhPSBudWxsKSB7XG4gICAgICAvLyB3ZSBoYXZlIGEgc2hhZG93aW5nIHdyaXRlLCBpZ25vcmUgY2hhbmdlc1xuICAgICAgcmV0dXJuIHZpZXdDYWNoZTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG5ld0V2ZW50Q2FjaGUsIHNlcnZlck5vZGU7XG4gICAgICBpZiAoY2hhbmdlUGF0aC5pc0VtcHR5KCkpIHtcbiAgICAgICAgLy8gVE9ETzogZmlndXJlIG91dCBob3cgdGhpcyBwbGF5cyB3aXRoIFwic2xpZGluZyBhY2sgd2luZG93c1wiXG4gICAgICAgIGFzc2VydChcbiAgICAgICAgICB2aWV3Q2FjaGUuZ2V0U2VydmVyQ2FjaGUoKS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSxcbiAgICAgICAgICAnSWYgY2hhbmdlIHBhdGggaXMgZW1wdHksIHdlIG11c3QgaGF2ZSBjb21wbGV0ZSBzZXJ2ZXIgZGF0YSdcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHZpZXdDYWNoZS5nZXRTZXJ2ZXJDYWNoZSgpLmlzRmlsdGVyZWQoKSkge1xuICAgICAgICAgIC8vIFdlIG5lZWQgdG8gc3BlY2lhbCBjYXNlIHRoaXMsIGJlY2F1c2Ugd2UgbmVlZCB0byBvbmx5IGFwcGx5IHdyaXRlcyB0byBjb21wbGV0ZSBjaGlsZHJlbiwgb3JcbiAgICAgICAgICAvLyB3ZSBtaWdodCBlbmQgdXAgcmFpc2luZyBldmVudHMgZm9yIGluY29tcGxldGUgY2hpbGRyZW4uIElmIHRoZSBzZXJ2ZXIgZGF0YSBpcyBmaWx0ZXJlZCBkZWVwXG4gICAgICAgICAgLy8gd3JpdGVzIGNhbm5vdCBiZSBndWFyYW50ZWVkIHRvIGJlIGNvbXBsZXRlXG4gICAgICAgICAgY29uc3Qgc2VydmVyQ2FjaGUgPSB2aWV3Q2FjaGUuZ2V0Q29tcGxldGVTZXJ2ZXJTbmFwKCk7XG4gICAgICAgICAgY29uc3QgY29tcGxldGVDaGlsZHJlbiA9XG4gICAgICAgICAgICBzZXJ2ZXJDYWNoZSBpbnN0YW5jZW9mIENoaWxkcmVuTm9kZVxuICAgICAgICAgICAgICA/IHNlcnZlckNhY2hlXG4gICAgICAgICAgICAgIDogQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG4gICAgICAgICAgY29uc3QgY29tcGxldGVFdmVudENoaWxkcmVuID0gd3JpdGVzQ2FjaGUuY2FsY0NvbXBsZXRlRXZlbnRDaGlsZHJlbihcbiAgICAgICAgICAgIGNvbXBsZXRlQ2hpbGRyZW5cbiAgICAgICAgICApO1xuICAgICAgICAgIG5ld0V2ZW50Q2FjaGUgPSB0aGlzLmZpbHRlcl8udXBkYXRlRnVsbE5vZGUoXG4gICAgICAgICAgICB2aWV3Q2FjaGUuZ2V0RXZlbnRDYWNoZSgpLmdldE5vZGUoKSxcbiAgICAgICAgICAgIGNvbXBsZXRlRXZlbnRDaGlsZHJlbixcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBjb21wbGV0ZU5vZGUgPSB3cml0ZXNDYWNoZS5jYWxjQ29tcGxldGVFdmVudENhY2hlKFxuICAgICAgICAgICAgdmlld0NhY2hlLmdldENvbXBsZXRlU2VydmVyU25hcCgpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBuZXdFdmVudENhY2hlID0gdGhpcy5maWx0ZXJfLnVwZGF0ZUZ1bGxOb2RlKFxuICAgICAgICAgICAgdmlld0NhY2hlLmdldEV2ZW50Q2FjaGUoKS5nZXROb2RlKCksXG4gICAgICAgICAgICBjb21wbGV0ZU5vZGUsXG4gICAgICAgICAgICBhY2N1bXVsYXRvclxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGNoaWxkS2V5ID0gY2hhbmdlUGF0aC5nZXRGcm9udCgpO1xuICAgICAgICBpZiAoY2hpbGRLZXkgPT0gJy5wcmlvcml0eScpIHtcbiAgICAgICAgICBhc3NlcnQoXG4gICAgICAgICAgICBjaGFuZ2VQYXRoLmdldExlbmd0aCgpID09IDEsXG4gICAgICAgICAgICBcIkNhbid0IGhhdmUgYSBwcmlvcml0eSB3aXRoIGFkZGl0aW9uYWwgcGF0aCBjb21wb25lbnRzXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IG9sZEV2ZW50Tm9kZSA9IG9sZEV2ZW50U25hcC5nZXROb2RlKCk7XG4gICAgICAgICAgc2VydmVyTm9kZSA9IHZpZXdDYWNoZS5nZXRTZXJ2ZXJDYWNoZSgpLmdldE5vZGUoKTtcbiAgICAgICAgICAvLyB3ZSBtaWdodCBoYXZlIG92ZXJ3cml0ZXMgZm9yIHRoaXMgcHJpb3JpdHlcbiAgICAgICAgICBjb25zdCB1cGRhdGVkUHJpb3JpdHkgPSB3cml0ZXNDYWNoZS5jYWxjRXZlbnRDYWNoZUFmdGVyU2VydmVyT3ZlcndyaXRlKFxuICAgICAgICAgICAgY2hhbmdlUGF0aCxcbiAgICAgICAgICAgIG9sZEV2ZW50Tm9kZSxcbiAgICAgICAgICAgIHNlcnZlck5vZGVcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmICh1cGRhdGVkUHJpb3JpdHkgIT0gbnVsbCkge1xuICAgICAgICAgICAgbmV3RXZlbnRDYWNoZSA9IHRoaXMuZmlsdGVyXy51cGRhdGVQcmlvcml0eShcbiAgICAgICAgICAgICAgb2xkRXZlbnROb2RlLFxuICAgICAgICAgICAgICB1cGRhdGVkUHJpb3JpdHlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHByaW9yaXR5IGRpZG4ndCBjaGFuZ2UsIGtlZXAgb2xkIG5vZGVcbiAgICAgICAgICAgIG5ld0V2ZW50Q2FjaGUgPSBvbGRFdmVudFNuYXAuZ2V0Tm9kZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBjaGlsZENoYW5nZVBhdGggPSBjaGFuZ2VQYXRoLnBvcEZyb250KCk7XG4gICAgICAgICAgLy8gdXBkYXRlIGNoaWxkXG4gICAgICAgICAgbGV0IG5ld0V2ZW50Q2hpbGQ7XG4gICAgICAgICAgaWYgKG9sZEV2ZW50U25hcC5pc0NvbXBsZXRlRm9yQ2hpbGQoY2hpbGRLZXkpKSB7XG4gICAgICAgICAgICBzZXJ2ZXJOb2RlID0gdmlld0NhY2hlLmdldFNlcnZlckNhY2hlKCkuZ2V0Tm9kZSgpO1xuICAgICAgICAgICAgY29uc3QgZXZlbnRDaGlsZFVwZGF0ZSA9IHdyaXRlc0NhY2hlLmNhbGNFdmVudENhY2hlQWZ0ZXJTZXJ2ZXJPdmVyd3JpdGUoXG4gICAgICAgICAgICAgIGNoYW5nZVBhdGgsXG4gICAgICAgICAgICAgIG9sZEV2ZW50U25hcC5nZXROb2RlKCksXG4gICAgICAgICAgICAgIHNlcnZlck5vZGVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoZXZlbnRDaGlsZFVwZGF0ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIG5ld0V2ZW50Q2hpbGQgPSBvbGRFdmVudFNuYXBcbiAgICAgICAgICAgICAgICAuZ2V0Tm9kZSgpXG4gICAgICAgICAgICAgICAgLmdldEltbWVkaWF0ZUNoaWxkKGNoaWxkS2V5KVxuICAgICAgICAgICAgICAgIC51cGRhdGVDaGlsZChjaGlsZENoYW5nZVBhdGgsIGV2ZW50Q2hpbGRVcGRhdGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gTm90aGluZyBjaGFuZ2VkLCBqdXN0IGtlZXAgdGhlIG9sZCBjaGlsZFxuICAgICAgICAgICAgICBuZXdFdmVudENoaWxkID0gb2xkRXZlbnRTbmFwXG4gICAgICAgICAgICAgICAgLmdldE5vZGUoKVxuICAgICAgICAgICAgICAgIC5nZXRJbW1lZGlhdGVDaGlsZChjaGlsZEtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld0V2ZW50Q2hpbGQgPSB3cml0ZXNDYWNoZS5jYWxjQ29tcGxldGVDaGlsZChcbiAgICAgICAgICAgICAgY2hpbGRLZXksXG4gICAgICAgICAgICAgIHZpZXdDYWNoZS5nZXRTZXJ2ZXJDYWNoZSgpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobmV3RXZlbnRDaGlsZCAhPSBudWxsKSB7XG4gICAgICAgICAgICBuZXdFdmVudENhY2hlID0gdGhpcy5maWx0ZXJfLnVwZGF0ZUNoaWxkKFxuICAgICAgICAgICAgICBvbGRFdmVudFNuYXAuZ2V0Tm9kZSgpLFxuICAgICAgICAgICAgICBjaGlsZEtleSxcbiAgICAgICAgICAgICAgbmV3RXZlbnRDaGlsZCxcbiAgICAgICAgICAgICAgY2hpbGRDaGFuZ2VQYXRoLFxuICAgICAgICAgICAgICBzb3VyY2UsXG4gICAgICAgICAgICAgIGFjY3VtdWxhdG9yXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBubyBjb21wbGV0ZSBjaGlsZCBhdmFpbGFibGUgb3Igbm8gY2hhbmdlXG4gICAgICAgICAgICBuZXdFdmVudENhY2hlID0gb2xkRXZlbnRTbmFwLmdldE5vZGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2aWV3Q2FjaGUudXBkYXRlRXZlbnRTbmFwKFxuICAgICAgICBuZXdFdmVudENhY2hlLFxuICAgICAgICBvbGRFdmVudFNuYXAuaXNGdWxseUluaXRpYWxpemVkKCkgfHwgY2hhbmdlUGF0aC5pc0VtcHR5KCksXG4gICAgICAgIHRoaXMuZmlsdGVyXy5maWx0ZXJzTm9kZXMoKVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshVmlld0NhY2hlfSBvbGRWaWV3Q2FjaGVcbiAgICogQHBhcmFtIHshUGF0aH0gY2hhbmdlUGF0aFxuICAgKiBAcGFyYW0geyFOb2RlfSBjaGFuZ2VkU25hcFxuICAgKiBAcGFyYW0geyFXcml0ZVRyZWVSZWZ9IHdyaXRlc0NhY2hlXG4gICAqIEBwYXJhbSB7P05vZGV9IGNvbXBsZXRlQ2FjaGVcbiAgICogQHBhcmFtIHtib29sZWFufSBmaWx0ZXJTZXJ2ZXJOb2RlXG4gICAqIEBwYXJhbSB7IUNoaWxkQ2hhbmdlQWNjdW11bGF0b3J9IGFjY3VtdWxhdG9yXG4gICAqIEByZXR1cm4geyFWaWV3Q2FjaGV9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhcHBseVNlcnZlck92ZXJ3cml0ZV8oXG4gICAgb2xkVmlld0NhY2hlOiBWaWV3Q2FjaGUsXG4gICAgY2hhbmdlUGF0aDogUGF0aCxcbiAgICBjaGFuZ2VkU25hcDogTm9kZSxcbiAgICB3cml0ZXNDYWNoZTogV3JpdGVUcmVlUmVmLFxuICAgIGNvbXBsZXRlQ2FjaGU6IE5vZGUgfCBudWxsLFxuICAgIGZpbHRlclNlcnZlck5vZGU6IGJvb2xlYW4sXG4gICAgYWNjdW11bGF0b3I6IENoaWxkQ2hhbmdlQWNjdW11bGF0b3JcbiAgKTogVmlld0NhY2hlIHtcbiAgICBjb25zdCBvbGRTZXJ2ZXJTbmFwID0gb2xkVmlld0NhY2hlLmdldFNlcnZlckNhY2hlKCk7XG4gICAgbGV0IG5ld1NlcnZlckNhY2hlO1xuICAgIGNvbnN0IHNlcnZlckZpbHRlciA9IGZpbHRlclNlcnZlck5vZGVcbiAgICAgID8gdGhpcy5maWx0ZXJfXG4gICAgICA6IHRoaXMuZmlsdGVyXy5nZXRJbmRleGVkRmlsdGVyKCk7XG4gICAgaWYgKGNoYW5nZVBhdGguaXNFbXB0eSgpKSB7XG4gICAgICBuZXdTZXJ2ZXJDYWNoZSA9IHNlcnZlckZpbHRlci51cGRhdGVGdWxsTm9kZShcbiAgICAgICAgb2xkU2VydmVyU25hcC5nZXROb2RlKCksXG4gICAgICAgIGNoYW5nZWRTbmFwLFxuICAgICAgICBudWxsXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAoc2VydmVyRmlsdGVyLmZpbHRlcnNOb2RlcygpICYmICFvbGRTZXJ2ZXJTbmFwLmlzRmlsdGVyZWQoKSkge1xuICAgICAgLy8gd2Ugd2FudCB0byBmaWx0ZXIgdGhlIHNlcnZlciBub2RlLCBidXQgd2UgZGlkbid0IGZpbHRlciB0aGUgc2VydmVyIG5vZGUgeWV0LCBzbyBzaW11bGF0ZSBhIGZ1bGwgdXBkYXRlXG4gICAgICBjb25zdCBuZXdTZXJ2ZXJOb2RlID0gb2xkU2VydmVyU25hcFxuICAgICAgICAuZ2V0Tm9kZSgpXG4gICAgICAgIC51cGRhdGVDaGlsZChjaGFuZ2VQYXRoLCBjaGFuZ2VkU25hcCk7XG4gICAgICBuZXdTZXJ2ZXJDYWNoZSA9IHNlcnZlckZpbHRlci51cGRhdGVGdWxsTm9kZShcbiAgICAgICAgb2xkU2VydmVyU25hcC5nZXROb2RlKCksXG4gICAgICAgIG5ld1NlcnZlck5vZGUsXG4gICAgICAgIG51bGxcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNoaWxkS2V5ID0gY2hhbmdlUGF0aC5nZXRGcm9udCgpO1xuICAgICAgaWYgKFxuICAgICAgICAhb2xkU2VydmVyU25hcC5pc0NvbXBsZXRlRm9yUGF0aChjaGFuZ2VQYXRoKSAmJlxuICAgICAgICBjaGFuZ2VQYXRoLmdldExlbmd0aCgpID4gMVxuICAgICAgKSB7XG4gICAgICAgIC8vIFdlIGRvbid0IHVwZGF0ZSBpbmNvbXBsZXRlIG5vZGVzIHdpdGggdXBkYXRlcyBpbnRlbmRlZCBmb3Igb3RoZXIgbGlzdGVuZXJzXG4gICAgICAgIHJldHVybiBvbGRWaWV3Q2FjaGU7XG4gICAgICB9XG4gICAgICBjb25zdCBjaGlsZENoYW5nZVBhdGggPSBjaGFuZ2VQYXRoLnBvcEZyb250KCk7XG4gICAgICBjb25zdCBjaGlsZE5vZGUgPSBvbGRTZXJ2ZXJTbmFwLmdldE5vZGUoKS5nZXRJbW1lZGlhdGVDaGlsZChjaGlsZEtleSk7XG4gICAgICBjb25zdCBuZXdDaGlsZE5vZGUgPSBjaGlsZE5vZGUudXBkYXRlQ2hpbGQoY2hpbGRDaGFuZ2VQYXRoLCBjaGFuZ2VkU25hcCk7XG4gICAgICBpZiAoY2hpbGRLZXkgPT0gJy5wcmlvcml0eScpIHtcbiAgICAgICAgbmV3U2VydmVyQ2FjaGUgPSBzZXJ2ZXJGaWx0ZXIudXBkYXRlUHJpb3JpdHkoXG4gICAgICAgICAgb2xkU2VydmVyU25hcC5nZXROb2RlKCksXG4gICAgICAgICAgbmV3Q2hpbGROb2RlXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdTZXJ2ZXJDYWNoZSA9IHNlcnZlckZpbHRlci51cGRhdGVDaGlsZChcbiAgICAgICAgICBvbGRTZXJ2ZXJTbmFwLmdldE5vZGUoKSxcbiAgICAgICAgICBjaGlsZEtleSxcbiAgICAgICAgICBuZXdDaGlsZE5vZGUsXG4gICAgICAgICAgY2hpbGRDaGFuZ2VQYXRoLFxuICAgICAgICAgIE5PX0NPTVBMRVRFX0NISUxEX1NPVVJDRSxcbiAgICAgICAgICBudWxsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5ld1ZpZXdDYWNoZSA9IG9sZFZpZXdDYWNoZS51cGRhdGVTZXJ2ZXJTbmFwKFxuICAgICAgbmV3U2VydmVyQ2FjaGUsXG4gICAgICBvbGRTZXJ2ZXJTbmFwLmlzRnVsbHlJbml0aWFsaXplZCgpIHx8IGNoYW5nZVBhdGguaXNFbXB0eSgpLFxuICAgICAgc2VydmVyRmlsdGVyLmZpbHRlcnNOb2RlcygpXG4gICAgKTtcbiAgICBjb25zdCBzb3VyY2UgPSBuZXcgV3JpdGVUcmVlQ29tcGxldGVDaGlsZFNvdXJjZShcbiAgICAgIHdyaXRlc0NhY2hlLFxuICAgICAgbmV3Vmlld0NhY2hlLFxuICAgICAgY29tcGxldGVDYWNoZVxuICAgICk7XG4gICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVFdmVudENhY2hlQWZ0ZXJTZXJ2ZXJFdmVudF8oXG4gICAgICBuZXdWaWV3Q2FjaGUsXG4gICAgICBjaGFuZ2VQYXRoLFxuICAgICAgd3JpdGVzQ2FjaGUsXG4gICAgICBzb3VyY2UsXG4gICAgICBhY2N1bXVsYXRvclxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshVmlld0NhY2hlfSBvbGRWaWV3Q2FjaGVcbiAgICogQHBhcmFtIHshUGF0aH0gY2hhbmdlUGF0aFxuICAgKiBAcGFyYW0geyFOb2RlfSBjaGFuZ2VkU25hcFxuICAgKiBAcGFyYW0geyFXcml0ZVRyZWVSZWZ9IHdyaXRlc0NhY2hlXG4gICAqIEBwYXJhbSB7P05vZGV9IGNvbXBsZXRlQ2FjaGVcbiAgICogQHBhcmFtIHshQ2hpbGRDaGFuZ2VBY2N1bXVsYXRvcn0gYWNjdW11bGF0b3JcbiAgICogQHJldHVybiB7IVZpZXdDYWNoZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFwcGx5VXNlck92ZXJ3cml0ZV8oXG4gICAgb2xkVmlld0NhY2hlOiBWaWV3Q2FjaGUsXG4gICAgY2hhbmdlUGF0aDogUGF0aCxcbiAgICBjaGFuZ2VkU25hcDogTm9kZSxcbiAgICB3cml0ZXNDYWNoZTogV3JpdGVUcmVlUmVmLFxuICAgIGNvbXBsZXRlQ2FjaGU6IE5vZGUgfCBudWxsLFxuICAgIGFjY3VtdWxhdG9yOiBDaGlsZENoYW5nZUFjY3VtdWxhdG9yXG4gICk6IFZpZXdDYWNoZSB7XG4gICAgY29uc3Qgb2xkRXZlbnRTbmFwID0gb2xkVmlld0NhY2hlLmdldEV2ZW50Q2FjaGUoKTtcbiAgICBsZXQgbmV3Vmlld0NhY2hlLCBuZXdFdmVudENhY2hlO1xuICAgIGNvbnN0IHNvdXJjZSA9IG5ldyBXcml0ZVRyZWVDb21wbGV0ZUNoaWxkU291cmNlKFxuICAgICAgd3JpdGVzQ2FjaGUsXG4gICAgICBvbGRWaWV3Q2FjaGUsXG4gICAgICBjb21wbGV0ZUNhY2hlXG4gICAgKTtcbiAgICBpZiAoY2hhbmdlUGF0aC5pc0VtcHR5KCkpIHtcbiAgICAgIG5ld0V2ZW50Q2FjaGUgPSB0aGlzLmZpbHRlcl8udXBkYXRlRnVsbE5vZGUoXG4gICAgICAgIG9sZFZpZXdDYWNoZS5nZXRFdmVudENhY2hlKCkuZ2V0Tm9kZSgpLFxuICAgICAgICBjaGFuZ2VkU25hcCxcbiAgICAgICAgYWNjdW11bGF0b3JcbiAgICAgICk7XG4gICAgICBuZXdWaWV3Q2FjaGUgPSBvbGRWaWV3Q2FjaGUudXBkYXRlRXZlbnRTbmFwKFxuICAgICAgICBuZXdFdmVudENhY2hlLFxuICAgICAgICB0cnVlLFxuICAgICAgICB0aGlzLmZpbHRlcl8uZmlsdGVyc05vZGVzKClcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNoaWxkS2V5ID0gY2hhbmdlUGF0aC5nZXRGcm9udCgpO1xuICAgICAgaWYgKGNoaWxkS2V5ID09PSAnLnByaW9yaXR5Jykge1xuICAgICAgICBuZXdFdmVudENhY2hlID0gdGhpcy5maWx0ZXJfLnVwZGF0ZVByaW9yaXR5KFxuICAgICAgICAgIG9sZFZpZXdDYWNoZS5nZXRFdmVudENhY2hlKCkuZ2V0Tm9kZSgpLFxuICAgICAgICAgIGNoYW5nZWRTbmFwXG4gICAgICAgICk7XG4gICAgICAgIG5ld1ZpZXdDYWNoZSA9IG9sZFZpZXdDYWNoZS51cGRhdGVFdmVudFNuYXAoXG4gICAgICAgICAgbmV3RXZlbnRDYWNoZSxcbiAgICAgICAgICBvbGRFdmVudFNuYXAuaXNGdWxseUluaXRpYWxpemVkKCksXG4gICAgICAgICAgb2xkRXZlbnRTbmFwLmlzRmlsdGVyZWQoKVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgY2hpbGRDaGFuZ2VQYXRoID0gY2hhbmdlUGF0aC5wb3BGcm9udCgpO1xuICAgICAgICBjb25zdCBvbGRDaGlsZCA9IG9sZEV2ZW50U25hcC5nZXROb2RlKCkuZ2V0SW1tZWRpYXRlQ2hpbGQoY2hpbGRLZXkpO1xuICAgICAgICBsZXQgbmV3Q2hpbGQ7XG4gICAgICAgIGlmIChjaGlsZENoYW5nZVBhdGguaXNFbXB0eSgpKSB7XG4gICAgICAgICAgLy8gQ2hpbGQgb3ZlcndyaXRlLCB3ZSBjYW4gcmVwbGFjZSB0aGUgY2hpbGRcbiAgICAgICAgICBuZXdDaGlsZCA9IGNoYW5nZWRTbmFwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGNoaWxkTm9kZSA9IHNvdXJjZS5nZXRDb21wbGV0ZUNoaWxkKGNoaWxkS2V5KTtcbiAgICAgICAgICBpZiAoY2hpbGROb2RlICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgY2hpbGRDaGFuZ2VQYXRoLmdldEJhY2soKSA9PT0gJy5wcmlvcml0eScgJiZcbiAgICAgICAgICAgICAgY2hpbGROb2RlLmdldENoaWxkKGNoaWxkQ2hhbmdlUGF0aC5wYXJlbnQoKSkuaXNFbXB0eSgpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHByaW9yaXR5IHVwZGF0ZSBvbiBhbiBlbXB0eSBub2RlLiBJZiB0aGlzIG5vZGUgZXhpc3RzIG9uIHRoZSBzZXJ2ZXIsIHRoZVxuICAgICAgICAgICAgICAvLyBzZXJ2ZXIgd2lsbCBzZW5kIGRvd24gdGhlIHByaW9yaXR5IGluIHRoZSB1cGRhdGUsIHNvIGlnbm9yZSBmb3Igbm93XG4gICAgICAgICAgICAgIG5ld0NoaWxkID0gY2hpbGROb2RlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbmV3Q2hpbGQgPSBjaGlsZE5vZGUudXBkYXRlQ2hpbGQoY2hpbGRDaGFuZ2VQYXRoLCBjaGFuZ2VkU25hcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFRoZXJlIGlzIG5vIGNvbXBsZXRlIGNoaWxkIG5vZGUgYXZhaWxhYmxlXG4gICAgICAgICAgICBuZXdDaGlsZCA9IENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9sZENoaWxkLmVxdWFscyhuZXdDaGlsZCkpIHtcbiAgICAgICAgICBjb25zdCBuZXdFdmVudFNuYXAgPSB0aGlzLmZpbHRlcl8udXBkYXRlQ2hpbGQoXG4gICAgICAgICAgICBvbGRFdmVudFNuYXAuZ2V0Tm9kZSgpLFxuICAgICAgICAgICAgY2hpbGRLZXksXG4gICAgICAgICAgICBuZXdDaGlsZCxcbiAgICAgICAgICAgIGNoaWxkQ2hhbmdlUGF0aCxcbiAgICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yXG4gICAgICAgICAgKTtcbiAgICAgICAgICBuZXdWaWV3Q2FjaGUgPSBvbGRWaWV3Q2FjaGUudXBkYXRlRXZlbnRTbmFwKFxuICAgICAgICAgICAgbmV3RXZlbnRTbmFwLFxuICAgICAgICAgICAgb2xkRXZlbnRTbmFwLmlzRnVsbHlJbml0aWFsaXplZCgpLFxuICAgICAgICAgICAgdGhpcy5maWx0ZXJfLmZpbHRlcnNOb2RlcygpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdWaWV3Q2FjaGUgPSBvbGRWaWV3Q2FjaGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ld1ZpZXdDYWNoZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFWaWV3Q2FjaGV9IHZpZXdDYWNoZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2hpbGRLZXlcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGNhY2hlSGFzQ2hpbGRfKFxuICAgIHZpZXdDYWNoZTogVmlld0NhY2hlLFxuICAgIGNoaWxkS2V5OiBzdHJpbmdcbiAgKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHZpZXdDYWNoZS5nZXRFdmVudENhY2hlKCkuaXNDb21wbGV0ZUZvckNoaWxkKGNoaWxkS2V5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFWaWV3Q2FjaGV9IHZpZXdDYWNoZVxuICAgKiBAcGFyYW0geyFQYXRofSBwYXRoXG4gICAqIEBwYXJhbSB7SW1tdXRhYmxlVHJlZS48IU5vZGU+fSBjaGFuZ2VkQ2hpbGRyZW5cbiAgICogQHBhcmFtIHshV3JpdGVUcmVlUmVmfSB3cml0ZXNDYWNoZVxuICAgKiBAcGFyYW0gez9Ob2RlfSBzZXJ2ZXJDYWNoZVxuICAgKiBAcGFyYW0geyFDaGlsZENoYW5nZUFjY3VtdWxhdG9yfSBhY2N1bXVsYXRvclxuICAgKiBAcmV0dXJuIHshVmlld0NhY2hlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBhcHBseVVzZXJNZXJnZV8oXG4gICAgdmlld0NhY2hlOiBWaWV3Q2FjaGUsXG4gICAgcGF0aDogUGF0aCxcbiAgICBjaGFuZ2VkQ2hpbGRyZW46IEltbXV0YWJsZVRyZWU8Tm9kZT4sXG4gICAgd3JpdGVzQ2FjaGU6IFdyaXRlVHJlZVJlZixcbiAgICBzZXJ2ZXJDYWNoZTogTm9kZSB8IG51bGwsXG4gICAgYWNjdW11bGF0b3I6IENoaWxkQ2hhbmdlQWNjdW11bGF0b3JcbiAgKTogVmlld0NhY2hlIHtcbiAgICAvLyBIQUNLOiBJbiB0aGUgY2FzZSBvZiBhIGxpbWl0IHF1ZXJ5LCB0aGVyZSBtYXkgYmUgc29tZSBjaGFuZ2VzIHRoYXQgYnVtcCB0aGluZ3Mgb3V0IG9mIHRoZVxuICAgIC8vIHdpbmRvdyBsZWF2aW5nIHJvb20gZm9yIG5ldyBpdGVtcy4gIEl0J3MgaW1wb3J0YW50IHdlIHByb2Nlc3MgdGhlc2UgY2hhbmdlcyBmaXJzdCwgc28gd2VcbiAgICAvLyBpdGVyYXRlIHRoZSBjaGFuZ2VzIHR3aWNlLCBmaXJzdCBwcm9jZXNzaW5nIGFueSB0aGF0IGFmZmVjdCBpdGVtcyBjdXJyZW50bHkgaW4gdmlldy5cbiAgICAvLyBUT0RPOiBJIGNvbnNpZGVyIGFuIGl0ZW0gXCJpbiB2aWV3XCIgaWYgY2FjaGVIYXNDaGlsZCBpcyB0cnVlLCB3aGljaCBjaGVja3MgYm90aCB0aGUgc2VydmVyXG4gICAgLy8gYW5kIGV2ZW50IHNuYXAuICBJJ20gbm90IHN1cmUgaWYgdGhpcyB3aWxsIHJlc3VsdCBpbiBlZGdlIGNhc2VzIHdoZW4gYSBjaGlsZCBpcyBpbiBvbmUgYnV0XG4gICAgLy8gbm90IHRoZSBvdGhlci5cbiAgICBsZXQgY3VyVmlld0NhY2hlID0gdmlld0NhY2hlO1xuICAgIGNoYW5nZWRDaGlsZHJlbi5mb3JlYWNoKChyZWxhdGl2ZVBhdGgsIGNoaWxkTm9kZSkgPT4ge1xuICAgICAgY29uc3Qgd3JpdGVQYXRoID0gcGF0aC5jaGlsZChyZWxhdGl2ZVBhdGgpO1xuICAgICAgaWYgKFZpZXdQcm9jZXNzb3IuY2FjaGVIYXNDaGlsZF8odmlld0NhY2hlLCB3cml0ZVBhdGguZ2V0RnJvbnQoKSkpIHtcbiAgICAgICAgY3VyVmlld0NhY2hlID0gdGhpcy5hcHBseVVzZXJPdmVyd3JpdGVfKFxuICAgICAgICAgIGN1clZpZXdDYWNoZSxcbiAgICAgICAgICB3cml0ZVBhdGgsXG4gICAgICAgICAgY2hpbGROb2RlLFxuICAgICAgICAgIHdyaXRlc0NhY2hlLFxuICAgICAgICAgIHNlcnZlckNhY2hlLFxuICAgICAgICAgIGFjY3VtdWxhdG9yXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjaGFuZ2VkQ2hpbGRyZW4uZm9yZWFjaCgocmVsYXRpdmVQYXRoLCBjaGlsZE5vZGUpID0+IHtcbiAgICAgIGNvbnN0IHdyaXRlUGF0aCA9IHBhdGguY2hpbGQocmVsYXRpdmVQYXRoKTtcbiAgICAgIGlmICghVmlld1Byb2Nlc3Nvci5jYWNoZUhhc0NoaWxkXyh2aWV3Q2FjaGUsIHdyaXRlUGF0aC5nZXRGcm9udCgpKSkge1xuICAgICAgICBjdXJWaWV3Q2FjaGUgPSB0aGlzLmFwcGx5VXNlck92ZXJ3cml0ZV8oXG4gICAgICAgICAgY3VyVmlld0NhY2hlLFxuICAgICAgICAgIHdyaXRlUGF0aCxcbiAgICAgICAgICBjaGlsZE5vZGUsXG4gICAgICAgICAgd3JpdGVzQ2FjaGUsXG4gICAgICAgICAgc2VydmVyQ2FjaGUsXG4gICAgICAgICAgYWNjdW11bGF0b3JcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBjdXJWaWV3Q2FjaGU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICAgKiBAcGFyYW0ge0ltbXV0YWJsZVRyZWUuPCFOb2RlPn0gbWVyZ2VcbiAgICogQHJldHVybiB7IU5vZGV9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGFwcGx5TWVyZ2VfKG5vZGU6IE5vZGUsIG1lcmdlOiBJbW11dGFibGVUcmVlPE5vZGU+KTogTm9kZSB7XG4gICAgbWVyZ2UuZm9yZWFjaChmdW5jdGlvbihyZWxhdGl2ZVBhdGgsIGNoaWxkTm9kZSkge1xuICAgICAgbm9kZSA9IG5vZGUudXBkYXRlQ2hpbGQocmVsYXRpdmVQYXRoLCBjaGlsZE5vZGUpO1xuICAgIH0pO1xuICAgIHJldHVybiBub2RlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVZpZXdDYWNoZX0gdmlld0NhY2hlXG4gICAqIEBwYXJhbSB7IVBhdGh9IHBhdGhcbiAgICogQHBhcmFtIHshSW1tdXRhYmxlVHJlZS48IU5vZGU+fSBjaGFuZ2VkQ2hpbGRyZW5cbiAgICogQHBhcmFtIHshV3JpdGVUcmVlUmVmfSB3cml0ZXNDYWNoZVxuICAgKiBAcGFyYW0gez9Ob2RlfSBzZXJ2ZXJDYWNoZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZpbHRlclNlcnZlck5vZGVcbiAgICogQHBhcmFtIHshQ2hpbGRDaGFuZ2VBY2N1bXVsYXRvcn0gYWNjdW11bGF0b3JcbiAgICogQHJldHVybiB7IVZpZXdDYWNoZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgYXBwbHlTZXJ2ZXJNZXJnZV8oXG4gICAgdmlld0NhY2hlOiBWaWV3Q2FjaGUsXG4gICAgcGF0aDogUGF0aCxcbiAgICBjaGFuZ2VkQ2hpbGRyZW46IEltbXV0YWJsZVRyZWU8Tm9kZT4sXG4gICAgd3JpdGVzQ2FjaGU6IFdyaXRlVHJlZVJlZixcbiAgICBzZXJ2ZXJDYWNoZTogTm9kZSB8IG51bGwsXG4gICAgZmlsdGVyU2VydmVyTm9kZTogYm9vbGVhbixcbiAgICBhY2N1bXVsYXRvcjogQ2hpbGRDaGFuZ2VBY2N1bXVsYXRvclxuICApOiBWaWV3Q2FjaGUge1xuICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYSBjYWNoZSB5ZXQsIHRoaXMgbWVyZ2Ugd2FzIGludGVuZGVkIGZvciBhIHByZXZpb3VzbHkgbGlzdGVuIGluIHRoZSBzYW1lIGxvY2F0aW9uLiBJZ25vcmUgaXQgYW5kXG4gICAgLy8gd2FpdCBmb3IgdGhlIGNvbXBsZXRlIGRhdGEgdXBkYXRlIGNvbWluZyBzb29uLlxuICAgIGlmIChcbiAgICAgIHZpZXdDYWNoZVxuICAgICAgICAuZ2V0U2VydmVyQ2FjaGUoKVxuICAgICAgICAuZ2V0Tm9kZSgpXG4gICAgICAgIC5pc0VtcHR5KCkgJiZcbiAgICAgICF2aWV3Q2FjaGUuZ2V0U2VydmVyQ2FjaGUoKS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKVxuICAgICkge1xuICAgICAgcmV0dXJuIHZpZXdDYWNoZTtcbiAgICB9XG5cbiAgICAvLyBIQUNLOiBJbiB0aGUgY2FzZSBvZiBhIGxpbWl0IHF1ZXJ5LCB0aGVyZSBtYXkgYmUgc29tZSBjaGFuZ2VzIHRoYXQgYnVtcCB0aGluZ3Mgb3V0IG9mIHRoZVxuICAgIC8vIHdpbmRvdyBsZWF2aW5nIHJvb20gZm9yIG5ldyBpdGVtcy4gIEl0J3MgaW1wb3J0YW50IHdlIHByb2Nlc3MgdGhlc2UgY2hhbmdlcyBmaXJzdCwgc28gd2VcbiAgICAvLyBpdGVyYXRlIHRoZSBjaGFuZ2VzIHR3aWNlLCBmaXJzdCBwcm9jZXNzaW5nIGFueSB0aGF0IGFmZmVjdCBpdGVtcyBjdXJyZW50bHkgaW4gdmlldy5cbiAgICAvLyBUT0RPOiBJIGNvbnNpZGVyIGFuIGl0ZW0gXCJpbiB2aWV3XCIgaWYgY2FjaGVIYXNDaGlsZCBpcyB0cnVlLCB3aGljaCBjaGVja3MgYm90aCB0aGUgc2VydmVyXG4gICAgLy8gYW5kIGV2ZW50IHNuYXAuICBJJ20gbm90IHN1cmUgaWYgdGhpcyB3aWxsIHJlc3VsdCBpbiBlZGdlIGNhc2VzIHdoZW4gYSBjaGlsZCBpcyBpbiBvbmUgYnV0XG4gICAgLy8gbm90IHRoZSBvdGhlci5cbiAgICBsZXQgY3VyVmlld0NhY2hlID0gdmlld0NhY2hlO1xuICAgIGxldCB2aWV3TWVyZ2VUcmVlO1xuICAgIGlmIChwYXRoLmlzRW1wdHkoKSkge1xuICAgICAgdmlld01lcmdlVHJlZSA9IGNoYW5nZWRDaGlsZHJlbjtcbiAgICB9IGVsc2Uge1xuICAgICAgdmlld01lcmdlVHJlZSA9IEltbXV0YWJsZVRyZWUuRW1wdHkuc2V0VHJlZShwYXRoLCBjaGFuZ2VkQ2hpbGRyZW4pO1xuICAgIH1cbiAgICBjb25zdCBzZXJ2ZXJOb2RlID0gdmlld0NhY2hlLmdldFNlcnZlckNhY2hlKCkuZ2V0Tm9kZSgpO1xuICAgIHZpZXdNZXJnZVRyZWUuY2hpbGRyZW4uaW5vcmRlclRyYXZlcnNhbCgoY2hpbGRLZXksIGNoaWxkVHJlZSkgPT4ge1xuICAgICAgaWYgKHNlcnZlck5vZGUuaGFzQ2hpbGQoY2hpbGRLZXkpKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlckNoaWxkID0gdmlld0NhY2hlXG4gICAgICAgICAgLmdldFNlcnZlckNhY2hlKClcbiAgICAgICAgICAuZ2V0Tm9kZSgpXG4gICAgICAgICAgLmdldEltbWVkaWF0ZUNoaWxkKGNoaWxkS2V5KTtcbiAgICAgICAgY29uc3QgbmV3Q2hpbGQgPSB0aGlzLmFwcGx5TWVyZ2VfKHNlcnZlckNoaWxkLCBjaGlsZFRyZWUpO1xuICAgICAgICBjdXJWaWV3Q2FjaGUgPSB0aGlzLmFwcGx5U2VydmVyT3ZlcndyaXRlXyhcbiAgICAgICAgICBjdXJWaWV3Q2FjaGUsXG4gICAgICAgICAgbmV3IFBhdGgoY2hpbGRLZXkpLFxuICAgICAgICAgIG5ld0NoaWxkLFxuICAgICAgICAgIHdyaXRlc0NhY2hlLFxuICAgICAgICAgIHNlcnZlckNhY2hlLFxuICAgICAgICAgIGZpbHRlclNlcnZlck5vZGUsXG4gICAgICAgICAgYWNjdW11bGF0b3JcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB2aWV3TWVyZ2VUcmVlLmNoaWxkcmVuLmlub3JkZXJUcmF2ZXJzYWwoKGNoaWxkS2V5LCBjaGlsZE1lcmdlVHJlZSkgPT4ge1xuICAgICAgY29uc3QgaXNVbmtub3duRGVlcE1lcmdlID1cbiAgICAgICAgIXZpZXdDYWNoZS5nZXRTZXJ2ZXJDYWNoZSgpLmlzQ29tcGxldGVGb3JDaGlsZChjaGlsZEtleSkgJiZcbiAgICAgICAgY2hpbGRNZXJnZVRyZWUudmFsdWUgPT0gbnVsbDtcbiAgICAgIGlmICghc2VydmVyTm9kZS5oYXNDaGlsZChjaGlsZEtleSkgJiYgIWlzVW5rbm93bkRlZXBNZXJnZSkge1xuICAgICAgICBjb25zdCBzZXJ2ZXJDaGlsZCA9IHZpZXdDYWNoZVxuICAgICAgICAgIC5nZXRTZXJ2ZXJDYWNoZSgpXG4gICAgICAgICAgLmdldE5vZGUoKVxuICAgICAgICAgIC5nZXRJbW1lZGlhdGVDaGlsZChjaGlsZEtleSk7XG4gICAgICAgIGNvbnN0IG5ld0NoaWxkID0gdGhpcy5hcHBseU1lcmdlXyhzZXJ2ZXJDaGlsZCwgY2hpbGRNZXJnZVRyZWUpO1xuICAgICAgICBjdXJWaWV3Q2FjaGUgPSB0aGlzLmFwcGx5U2VydmVyT3ZlcndyaXRlXyhcbiAgICAgICAgICBjdXJWaWV3Q2FjaGUsXG4gICAgICAgICAgbmV3IFBhdGgoY2hpbGRLZXkpLFxuICAgICAgICAgIG5ld0NoaWxkLFxuICAgICAgICAgIHdyaXRlc0NhY2hlLFxuICAgICAgICAgIHNlcnZlckNhY2hlLFxuICAgICAgICAgIGZpbHRlclNlcnZlck5vZGUsXG4gICAgICAgICAgYWNjdW11bGF0b3JcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBjdXJWaWV3Q2FjaGU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshVmlld0NhY2hlfSB2aWV3Q2FjaGVcbiAgICogQHBhcmFtIHshUGF0aH0gYWNrUGF0aFxuICAgKiBAcGFyYW0geyFJbW11dGFibGVUcmVlPCFib29sZWFuPn0gYWZmZWN0ZWRUcmVlXG4gICAqIEBwYXJhbSB7IVdyaXRlVHJlZVJlZn0gd3JpdGVzQ2FjaGVcbiAgICogQHBhcmFtIHs/Tm9kZX0gY29tcGxldGVDYWNoZVxuICAgKiBAcGFyYW0geyFDaGlsZENoYW5nZUFjY3VtdWxhdG9yfSBhY2N1bXVsYXRvclxuICAgKiBAcmV0dXJuIHshVmlld0NhY2hlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBhY2tVc2VyV3JpdGVfKFxuICAgIHZpZXdDYWNoZTogVmlld0NhY2hlLFxuICAgIGFja1BhdGg6IFBhdGgsXG4gICAgYWZmZWN0ZWRUcmVlOiBJbW11dGFibGVUcmVlPGJvb2xlYW4+LFxuICAgIHdyaXRlc0NhY2hlOiBXcml0ZVRyZWVSZWYsXG4gICAgY29tcGxldGVDYWNoZTogTm9kZSB8IG51bGwsXG4gICAgYWNjdW11bGF0b3I6IENoaWxkQ2hhbmdlQWNjdW11bGF0b3JcbiAgKTogVmlld0NhY2hlIHtcbiAgICBpZiAod3JpdGVzQ2FjaGUuc2hhZG93aW5nV3JpdGUoYWNrUGF0aCkgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHZpZXdDYWNoZTtcbiAgICB9XG5cbiAgICAvLyBPbmx5IGZpbHRlciBzZXJ2ZXIgbm9kZSBpZiBpdCBpcyBjdXJyZW50bHkgZmlsdGVyZWRcbiAgICBjb25zdCBmaWx0ZXJTZXJ2ZXJOb2RlID0gdmlld0NhY2hlLmdldFNlcnZlckNhY2hlKCkuaXNGaWx0ZXJlZCgpO1xuXG4gICAgLy8gRXNzZW50aWFsbHkgd2UnbGwganVzdCBnZXQgb3VyIGV4aXN0aW5nIHNlcnZlciBjYWNoZSBmb3IgdGhlIGFmZmVjdGVkIHBhdGhzIGFuZCByZS1hcHBseSBpdCBhcyBhIHNlcnZlciB1cGRhdGVcbiAgICAvLyBub3cgdGhhdCBpdCB3b24ndCBiZSBzaGFkb3dlZC5cbiAgICBjb25zdCBzZXJ2ZXJDYWNoZSA9IHZpZXdDYWNoZS5nZXRTZXJ2ZXJDYWNoZSgpO1xuICAgIGlmIChhZmZlY3RlZFRyZWUudmFsdWUgIT0gbnVsbCkge1xuICAgICAgLy8gVGhpcyBpcyBhbiBvdmVyd3JpdGUuXG4gICAgICBpZiAoXG4gICAgICAgIChhY2tQYXRoLmlzRW1wdHkoKSAmJiBzZXJ2ZXJDYWNoZS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSkgfHxcbiAgICAgICAgc2VydmVyQ2FjaGUuaXNDb21wbGV0ZUZvclBhdGgoYWNrUGF0aClcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBseVNlcnZlck92ZXJ3cml0ZV8oXG4gICAgICAgICAgdmlld0NhY2hlLFxuICAgICAgICAgIGFja1BhdGgsXG4gICAgICAgICAgc2VydmVyQ2FjaGUuZ2V0Tm9kZSgpLmdldENoaWxkKGFja1BhdGgpLFxuICAgICAgICAgIHdyaXRlc0NhY2hlLFxuICAgICAgICAgIGNvbXBsZXRlQ2FjaGUsXG4gICAgICAgICAgZmlsdGVyU2VydmVyTm9kZSxcbiAgICAgICAgICBhY2N1bXVsYXRvclxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChhY2tQYXRoLmlzRW1wdHkoKSkge1xuICAgICAgICAvLyBUaGlzIGlzIGEgZ29vZnkgZWRnZSBjYXNlIHdoZXJlIHdlIGFyZSBhY2tpbmcgZGF0YSBhdCB0aGlzIGxvY2F0aW9uIGJ1dCBkb24ndCBoYXZlIGZ1bGwgZGF0YS4gIFdlXG4gICAgICAgIC8vIHNob3VsZCBqdXN0IHJlLWFwcGx5IHdoYXRldmVyIHdlIGhhdmUgaW4gb3VyIGNhY2hlIGFzIGEgbWVyZ2UuXG4gICAgICAgIGxldCBjaGFuZ2VkQ2hpbGRyZW4gPSBJbW11dGFibGVUcmVlLkVtcHR5O1xuICAgICAgICBzZXJ2ZXJDYWNoZS5nZXROb2RlKCkuZm9yRWFjaENoaWxkKEtFWV9JTkRFWCwgZnVuY3Rpb24obmFtZSwgbm9kZSkge1xuICAgICAgICAgIGNoYW5nZWRDaGlsZHJlbiA9IGNoYW5nZWRDaGlsZHJlbi5zZXQobmV3IFBhdGgobmFtZSksIG5vZGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlTZXJ2ZXJNZXJnZV8oXG4gICAgICAgICAgdmlld0NhY2hlLFxuICAgICAgICAgIGFja1BhdGgsXG4gICAgICAgICAgY2hhbmdlZENoaWxkcmVuLFxuICAgICAgICAgIHdyaXRlc0NhY2hlLFxuICAgICAgICAgIGNvbXBsZXRlQ2FjaGUsXG4gICAgICAgICAgZmlsdGVyU2VydmVyTm9kZSxcbiAgICAgICAgICBhY2N1bXVsYXRvclxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZpZXdDYWNoZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhpcyBpcyBhIG1lcmdlLlxuICAgICAgbGV0IGNoYW5nZWRDaGlsZHJlbiA9IEltbXV0YWJsZVRyZWUuRW1wdHk7XG4gICAgICBhZmZlY3RlZFRyZWUuZm9yZWFjaChmdW5jdGlvbihtZXJnZVBhdGgsIHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlckNhY2hlUGF0aCA9IGFja1BhdGguY2hpbGQobWVyZ2VQYXRoKTtcbiAgICAgICAgaWYgKHNlcnZlckNhY2hlLmlzQ29tcGxldGVGb3JQYXRoKHNlcnZlckNhY2hlUGF0aCkpIHtcbiAgICAgICAgICBjaGFuZ2VkQ2hpbGRyZW4gPSBjaGFuZ2VkQ2hpbGRyZW4uc2V0KFxuICAgICAgICAgICAgbWVyZ2VQYXRoLFxuICAgICAgICAgICAgc2VydmVyQ2FjaGUuZ2V0Tm9kZSgpLmdldENoaWxkKHNlcnZlckNhY2hlUGF0aClcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGlzLmFwcGx5U2VydmVyTWVyZ2VfKFxuICAgICAgICB2aWV3Q2FjaGUsXG4gICAgICAgIGFja1BhdGgsXG4gICAgICAgIGNoYW5nZWRDaGlsZHJlbixcbiAgICAgICAgd3JpdGVzQ2FjaGUsXG4gICAgICAgIGNvbXBsZXRlQ2FjaGUsXG4gICAgICAgIGZpbHRlclNlcnZlck5vZGUsXG4gICAgICAgIGFjY3VtdWxhdG9yXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFWaWV3Q2FjaGV9IHZpZXdDYWNoZVxuICAgKiBAcGFyYW0geyFQYXRofSBwYXRoXG4gICAqIEBwYXJhbSB7IVdyaXRlVHJlZVJlZn0gd3JpdGVzQ2FjaGVcbiAgICogQHBhcmFtIHshQ2hpbGRDaGFuZ2VBY2N1bXVsYXRvcn0gYWNjdW11bGF0b3JcbiAgICogQHJldHVybiB7IVZpZXdDYWNoZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgbGlzdGVuQ29tcGxldGVfKFxuICAgIHZpZXdDYWNoZTogVmlld0NhY2hlLFxuICAgIHBhdGg6IFBhdGgsXG4gICAgd3JpdGVzQ2FjaGU6IFdyaXRlVHJlZVJlZixcbiAgICBhY2N1bXVsYXRvcjogQ2hpbGRDaGFuZ2VBY2N1bXVsYXRvclxuICApOiBWaWV3Q2FjaGUge1xuICAgIGNvbnN0IG9sZFNlcnZlck5vZGUgPSB2aWV3Q2FjaGUuZ2V0U2VydmVyQ2FjaGUoKTtcbiAgICBjb25zdCBuZXdWaWV3Q2FjaGUgPSB2aWV3Q2FjaGUudXBkYXRlU2VydmVyU25hcChcbiAgICAgIG9sZFNlcnZlck5vZGUuZ2V0Tm9kZSgpLFxuICAgICAgb2xkU2VydmVyTm9kZS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKSB8fCBwYXRoLmlzRW1wdHkoKSxcbiAgICAgIG9sZFNlcnZlck5vZGUuaXNGaWx0ZXJlZCgpXG4gICAgKTtcbiAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUV2ZW50Q2FjaGVBZnRlclNlcnZlckV2ZW50XyhcbiAgICAgIG5ld1ZpZXdDYWNoZSxcbiAgICAgIHBhdGgsXG4gICAgICB3cml0ZXNDYWNoZSxcbiAgICAgIE5PX0NPTVBMRVRFX0NISUxEX1NPVVJDRSxcbiAgICAgIGFjY3VtdWxhdG9yXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFWaWV3Q2FjaGV9IHZpZXdDYWNoZVxuICAgKiBAcGFyYW0geyFQYXRofSBwYXRoXG4gICAqIEBwYXJhbSB7IVdyaXRlVHJlZVJlZn0gd3JpdGVzQ2FjaGVcbiAgICogQHBhcmFtIHs/Tm9kZX0gY29tcGxldGVTZXJ2ZXJDYWNoZVxuICAgKiBAcGFyYW0geyFDaGlsZENoYW5nZUFjY3VtdWxhdG9yfSBhY2N1bXVsYXRvclxuICAgKiBAcmV0dXJuIHshVmlld0NhY2hlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSByZXZlcnRVc2VyV3JpdGVfKFxuICAgIHZpZXdDYWNoZTogVmlld0NhY2hlLFxuICAgIHBhdGg6IFBhdGgsXG4gICAgd3JpdGVzQ2FjaGU6IFdyaXRlVHJlZVJlZixcbiAgICBjb21wbGV0ZVNlcnZlckNhY2hlOiBOb2RlIHwgbnVsbCxcbiAgICBhY2N1bXVsYXRvcjogQ2hpbGRDaGFuZ2VBY2N1bXVsYXRvclxuICApOiBWaWV3Q2FjaGUge1xuICAgIGxldCBjb21wbGV0ZTtcbiAgICBpZiAod3JpdGVzQ2FjaGUuc2hhZG93aW5nV3JpdGUocGF0aCkgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHZpZXdDYWNoZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc291cmNlID0gbmV3IFdyaXRlVHJlZUNvbXBsZXRlQ2hpbGRTb3VyY2UoXG4gICAgICAgIHdyaXRlc0NhY2hlLFxuICAgICAgICB2aWV3Q2FjaGUsXG4gICAgICAgIGNvbXBsZXRlU2VydmVyQ2FjaGVcbiAgICAgICk7XG4gICAgICBjb25zdCBvbGRFdmVudENhY2hlID0gdmlld0NhY2hlLmdldEV2ZW50Q2FjaGUoKS5nZXROb2RlKCk7XG4gICAgICBsZXQgbmV3RXZlbnRDYWNoZTtcbiAgICAgIGlmIChwYXRoLmlzRW1wdHkoKSB8fCBwYXRoLmdldEZyb250KCkgPT09ICcucHJpb3JpdHknKSB7XG4gICAgICAgIGxldCBuZXdOb2RlO1xuICAgICAgICBpZiAodmlld0NhY2hlLmdldFNlcnZlckNhY2hlKCkuaXNGdWxseUluaXRpYWxpemVkKCkpIHtcbiAgICAgICAgICBuZXdOb2RlID0gd3JpdGVzQ2FjaGUuY2FsY0NvbXBsZXRlRXZlbnRDYWNoZShcbiAgICAgICAgICAgIHZpZXdDYWNoZS5nZXRDb21wbGV0ZVNlcnZlclNuYXAoKVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgc2VydmVyQ2hpbGRyZW4gPSB2aWV3Q2FjaGUuZ2V0U2VydmVyQ2FjaGUoKS5nZXROb2RlKCk7XG4gICAgICAgICAgYXNzZXJ0KFxuICAgICAgICAgICAgc2VydmVyQ2hpbGRyZW4gaW5zdGFuY2VvZiBDaGlsZHJlbk5vZGUsXG4gICAgICAgICAgICAnc2VydmVyQ2hpbGRyZW4gd291bGQgYmUgY29tcGxldGUgaWYgbGVhZiBub2RlJ1xuICAgICAgICAgICk7XG4gICAgICAgICAgbmV3Tm9kZSA9IHdyaXRlc0NhY2hlLmNhbGNDb21wbGV0ZUV2ZW50Q2hpbGRyZW4oXG4gICAgICAgICAgICBzZXJ2ZXJDaGlsZHJlbiBhcyBDaGlsZHJlbk5vZGVcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIG5ld05vZGUgPSBuZXdOb2RlIGFzIE5vZGU7XG4gICAgICAgIG5ld0V2ZW50Q2FjaGUgPSB0aGlzLmZpbHRlcl8udXBkYXRlRnVsbE5vZGUoXG4gICAgICAgICAgb2xkRXZlbnRDYWNoZSxcbiAgICAgICAgICBuZXdOb2RlLFxuICAgICAgICAgIGFjY3VtdWxhdG9yXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBjaGlsZEtleSA9IHBhdGguZ2V0RnJvbnQoKTtcbiAgICAgICAgbGV0IG5ld0NoaWxkID0gd3JpdGVzQ2FjaGUuY2FsY0NvbXBsZXRlQ2hpbGQoXG4gICAgICAgICAgY2hpbGRLZXksXG4gICAgICAgICAgdmlld0NhY2hlLmdldFNlcnZlckNhY2hlKClcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ld0NoaWxkID09IG51bGwgJiZcbiAgICAgICAgICB2aWV3Q2FjaGUuZ2V0U2VydmVyQ2FjaGUoKS5pc0NvbXBsZXRlRm9yQ2hpbGQoY2hpbGRLZXkpXG4gICAgICAgICkge1xuICAgICAgICAgIG5ld0NoaWxkID0gb2xkRXZlbnRDYWNoZS5nZXRJbW1lZGlhdGVDaGlsZChjaGlsZEtleSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5ld0NoaWxkICE9IG51bGwpIHtcbiAgICAgICAgICBuZXdFdmVudENhY2hlID0gdGhpcy5maWx0ZXJfLnVwZGF0ZUNoaWxkKFxuICAgICAgICAgICAgb2xkRXZlbnRDYWNoZSxcbiAgICAgICAgICAgIGNoaWxkS2V5LFxuICAgICAgICAgICAgbmV3Q2hpbGQsXG4gICAgICAgICAgICBwYXRoLnBvcEZyb250KCksXG4gICAgICAgICAgICBzb3VyY2UsXG4gICAgICAgICAgICBhY2N1bXVsYXRvclxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgdmlld0NhY2hlXG4gICAgICAgICAgICAuZ2V0RXZlbnRDYWNoZSgpXG4gICAgICAgICAgICAuZ2V0Tm9kZSgpXG4gICAgICAgICAgICAuaGFzQ2hpbGQoY2hpbGRLZXkpXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIE5vIGNvbXBsZXRlIGNoaWxkIGF2YWlsYWJsZSwgZGVsZXRlIHRoZSBleGlzdGluZyBvbmUsIGlmIGFueVxuICAgICAgICAgIG5ld0V2ZW50Q2FjaGUgPSB0aGlzLmZpbHRlcl8udXBkYXRlQ2hpbGQoXG4gICAgICAgICAgICBvbGRFdmVudENhY2hlLFxuICAgICAgICAgICAgY2hpbGRLZXksXG4gICAgICAgICAgICBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERSxcbiAgICAgICAgICAgIHBhdGgucG9wRnJvbnQoKSxcbiAgICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdFdmVudENhY2hlID0gb2xkRXZlbnRDYWNoZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgbmV3RXZlbnRDYWNoZS5pc0VtcHR5KCkgJiZcbiAgICAgICAgICB2aWV3Q2FjaGUuZ2V0U2VydmVyQ2FjaGUoKS5pc0Z1bGx5SW5pdGlhbGl6ZWQoKVxuICAgICAgICApIHtcbiAgICAgICAgICAvLyBXZSBtaWdodCBoYXZlIHJldmVydGVkIGFsbCBjaGlsZCB3cml0ZXMuIE1heWJlIHRoZSBvbGQgZXZlbnQgd2FzIGEgbGVhZiBub2RlXG4gICAgICAgICAgY29tcGxldGUgPSB3cml0ZXNDYWNoZS5jYWxjQ29tcGxldGVFdmVudENhY2hlKFxuICAgICAgICAgICAgdmlld0NhY2hlLmdldENvbXBsZXRlU2VydmVyU25hcCgpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoY29tcGxldGUuaXNMZWFmTm9kZSgpKSB7XG4gICAgICAgICAgICBuZXdFdmVudENhY2hlID0gdGhpcy5maWx0ZXJfLnVwZGF0ZUZ1bGxOb2RlKFxuICAgICAgICAgICAgICBuZXdFdmVudENhY2hlLFxuICAgICAgICAgICAgICBjb21wbGV0ZSxcbiAgICAgICAgICAgICAgYWNjdW11bGF0b3JcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb21wbGV0ZSA9XG4gICAgICAgIHZpZXdDYWNoZS5nZXRTZXJ2ZXJDYWNoZSgpLmlzRnVsbHlJbml0aWFsaXplZCgpIHx8XG4gICAgICAgIHdyaXRlc0NhY2hlLnNoYWRvd2luZ1dyaXRlKFBhdGguRW1wdHkpICE9IG51bGw7XG4gICAgICByZXR1cm4gdmlld0NhY2hlLnVwZGF0ZUV2ZW50U25hcChcbiAgICAgICAgbmV3RXZlbnRDYWNoZSxcbiAgICAgICAgY29tcGxldGUsXG4gICAgICAgIHRoaXMuZmlsdGVyXy5maWx0ZXJzTm9kZXMoKVxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IENoYW5nZSB9IGZyb20gJy4uL0NoYW5nZSc7XG5pbXBvcnQgeyBDaGlsZHJlbk5vZGUgfSBmcm9tICcuLi8uLi9zbmFwL0NoaWxkcmVuTm9kZSc7XG5pbXBvcnQgeyBQUklPUklUWV9JTkRFWCB9IGZyb20gJy4uLy4uL3NuYXAvaW5kZXhlcy9Qcmlvcml0eUluZGV4JztcbmltcG9ydCB7IE5vZGVGaWx0ZXIgfSBmcm9tICcuL05vZGVGaWx0ZXInO1xuaW1wb3J0IHsgSW5kZXggfSBmcm9tICcuLi8uLi9zbmFwL2luZGV4ZXMvSW5kZXgnO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uLy4uL3V0aWwvUGF0aCc7XG5pbXBvcnQgeyBDb21wbGV0ZUNoaWxkU291cmNlIH0gZnJvbSAnLi4vQ29tcGxldGVDaGlsZFNvdXJjZSc7XG5pbXBvcnQgeyBDaGlsZENoYW5nZUFjY3VtdWxhdG9yIH0gZnJvbSAnLi4vQ2hpbGRDaGFuZ2VBY2N1bXVsYXRvcic7XG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vLi4vc25hcC9Ob2RlJztcblxuLyoqXG4gKiBEb2Vzbid0IHJlYWxseSBmaWx0ZXIgbm9kZXMgYnV0IGFwcGxpZXMgYW4gaW5kZXggdG8gdGhlIG5vZGUgYW5kIGtlZXBzIHRyYWNrIG9mIGFueSBjaGFuZ2VzXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAaW1wbGVtZW50cyB7Tm9kZUZpbHRlcn1cbiAqIEBwYXJhbSB7IUluZGV4fSBpbmRleFxuICovXG5leHBvcnQgY2xhc3MgSW5kZXhlZEZpbHRlciBpbXBsZW1lbnRzIE5vZGVGaWx0ZXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGluZGV4XzogSW5kZXgpIHt9XG5cbiAgdXBkYXRlQ2hpbGQoXG4gICAgc25hcDogTm9kZSxcbiAgICBrZXk6IHN0cmluZyxcbiAgICBuZXdDaGlsZDogTm9kZSxcbiAgICBhZmZlY3RlZFBhdGg6IFBhdGgsXG4gICAgc291cmNlOiBDb21wbGV0ZUNoaWxkU291cmNlLFxuICAgIG9wdENoYW5nZUFjY3VtdWxhdG9yOiBDaGlsZENoYW5nZUFjY3VtdWxhdG9yIHwgbnVsbFxuICApOiBOb2RlIHtcbiAgICBhc3NlcnQoXG4gICAgICBzbmFwLmlzSW5kZXhlZCh0aGlzLmluZGV4XyksXG4gICAgICAnQSBub2RlIG11c3QgYmUgaW5kZXhlZCBpZiBvbmx5IGEgY2hpbGQgaXMgdXBkYXRlZCdcbiAgICApO1xuICAgIGNvbnN0IG9sZENoaWxkID0gc25hcC5nZXRJbW1lZGlhdGVDaGlsZChrZXkpO1xuICAgIC8vIENoZWNrIGlmIGFueXRoaW5nIGFjdHVhbGx5IGNoYW5nZWQuXG4gICAgaWYgKFxuICAgICAgb2xkQ2hpbGQuZ2V0Q2hpbGQoYWZmZWN0ZWRQYXRoKS5lcXVhbHMobmV3Q2hpbGQuZ2V0Q2hpbGQoYWZmZWN0ZWRQYXRoKSlcbiAgICApIHtcbiAgICAgIC8vIFRoZXJlJ3MgYW4gZWRnZSBjYXNlIHdoZXJlIGEgY2hpbGQgY2FuIGVudGVyIG9yIGxlYXZlIHRoZSB2aWV3IGJlY2F1c2UgYWZmZWN0ZWRQYXRoIHdhcyBzZXQgdG8gbnVsbC5cbiAgICAgIC8vIEluIHRoaXMgY2FzZSwgYWZmZWN0ZWRQYXRoIHdpbGwgYXBwZWFyIG51bGwgaW4gYm90aCB0aGUgb2xkIGFuZCBuZXcgc25hcHNob3RzLiAgU28gd2UgbmVlZFxuICAgICAgLy8gdG8gYXZvaWQgdHJlYXRpbmcgdGhlc2UgY2FzZXMgYXMgXCJub3RoaW5nIGNoYW5nZWQuXCJcbiAgICAgIGlmIChvbGRDaGlsZC5pc0VtcHR5KCkgPT0gbmV3Q2hpbGQuaXNFbXB0eSgpKSB7XG4gICAgICAgIC8vIE5vdGhpbmcgY2hhbmdlZC5cblxuICAgICAgICAvLyBUaGlzIGFzc2VydCBzaG91bGQgYmUgdmFsaWQsIGJ1dCBpdCdzIGV4cGVuc2l2ZSAoY2FuIGRvbWluYXRlIHBlcmYgdGVzdGluZykgc28gZG9uJ3QgYWN0dWFsbHkgZG8gaXQuXG4gICAgICAgIC8vYXNzZXJ0KG9sZENoaWxkLmVxdWFscyhuZXdDaGlsZCksICdPbGQgYW5kIG5ldyBzbmFwc2hvdHMgc2hvdWxkIGJlIGVxdWFsLicpO1xuICAgICAgICByZXR1cm4gc25hcDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob3B0Q2hhbmdlQWNjdW11bGF0b3IgIT0gbnVsbCkge1xuICAgICAgaWYgKG5ld0NoaWxkLmlzRW1wdHkoKSkge1xuICAgICAgICBpZiAoc25hcC5oYXNDaGlsZChrZXkpKSB7XG4gICAgICAgICAgb3B0Q2hhbmdlQWNjdW11bGF0b3IudHJhY2tDaGlsZENoYW5nZShcbiAgICAgICAgICAgIENoYW5nZS5jaGlsZFJlbW92ZWRDaGFuZ2Uoa2V5LCBvbGRDaGlsZClcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFzc2VydChcbiAgICAgICAgICAgIHNuYXAuaXNMZWFmTm9kZSgpLFxuICAgICAgICAgICAgJ0EgY2hpbGQgcmVtb3ZlIHdpdGhvdXQgYW4gb2xkIGNoaWxkIG9ubHkgbWFrZXMgc2Vuc2Ugb24gYSBsZWFmIG5vZGUnXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChvbGRDaGlsZC5pc0VtcHR5KCkpIHtcbiAgICAgICAgb3B0Q2hhbmdlQWNjdW11bGF0b3IudHJhY2tDaGlsZENoYW5nZShcbiAgICAgICAgICBDaGFuZ2UuY2hpbGRBZGRlZENoYW5nZShrZXksIG5ld0NoaWxkKVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3B0Q2hhbmdlQWNjdW11bGF0b3IudHJhY2tDaGlsZENoYW5nZShcbiAgICAgICAgICBDaGFuZ2UuY2hpbGRDaGFuZ2VkQ2hhbmdlKGtleSwgbmV3Q2hpbGQsIG9sZENoaWxkKVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc25hcC5pc0xlYWZOb2RlKCkgJiYgbmV3Q2hpbGQuaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gc25hcDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTWFrZSBzdXJlIHRoZSBub2RlIGlzIGluZGV4ZWRcbiAgICAgIHJldHVybiBzbmFwLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKGtleSwgbmV3Q2hpbGQpLndpdGhJbmRleCh0aGlzLmluZGV4Xyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICB1cGRhdGVGdWxsTm9kZShcbiAgICBvbGRTbmFwOiBOb2RlLFxuICAgIG5ld1NuYXA6IE5vZGUsXG4gICAgb3B0Q2hhbmdlQWNjdW11bGF0b3I6IENoaWxkQ2hhbmdlQWNjdW11bGF0b3IgfCBudWxsXG4gICk6IE5vZGUge1xuICAgIGlmIChvcHRDaGFuZ2VBY2N1bXVsYXRvciAhPSBudWxsKSB7XG4gICAgICBpZiAoIW9sZFNuYXAuaXNMZWFmTm9kZSgpKSB7XG4gICAgICAgIG9sZFNuYXAuZm9yRWFjaENoaWxkKFBSSU9SSVRZX0lOREVYLCBmdW5jdGlvbihrZXksIGNoaWxkTm9kZSkge1xuICAgICAgICAgIGlmICghbmV3U25hcC5oYXNDaGlsZChrZXkpKSB7XG4gICAgICAgICAgICBvcHRDaGFuZ2VBY2N1bXVsYXRvci50cmFja0NoaWxkQ2hhbmdlKFxuICAgICAgICAgICAgICBDaGFuZ2UuY2hpbGRSZW1vdmVkQ2hhbmdlKGtleSwgY2hpbGROb2RlKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCFuZXdTbmFwLmlzTGVhZk5vZGUoKSkge1xuICAgICAgICBuZXdTbmFwLmZvckVhY2hDaGlsZChQUklPUklUWV9JTkRFWCwgZnVuY3Rpb24oa2V5LCBjaGlsZE5vZGUpIHtcbiAgICAgICAgICBpZiAob2xkU25hcC5oYXNDaGlsZChrZXkpKSB7XG4gICAgICAgICAgICBjb25zdCBvbGRDaGlsZCA9IG9sZFNuYXAuZ2V0SW1tZWRpYXRlQ2hpbGQoa2V5KTtcbiAgICAgICAgICAgIGlmICghb2xkQ2hpbGQuZXF1YWxzKGNoaWxkTm9kZSkpIHtcbiAgICAgICAgICAgICAgb3B0Q2hhbmdlQWNjdW11bGF0b3IudHJhY2tDaGlsZENoYW5nZShcbiAgICAgICAgICAgICAgICBDaGFuZ2UuY2hpbGRDaGFuZ2VkQ2hhbmdlKGtleSwgY2hpbGROb2RlLCBvbGRDaGlsZClcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0Q2hhbmdlQWNjdW11bGF0b3IudHJhY2tDaGlsZENoYW5nZShcbiAgICAgICAgICAgICAgQ2hhbmdlLmNoaWxkQWRkZWRDaGFuZ2Uoa2V5LCBjaGlsZE5vZGUpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXdTbmFwLndpdGhJbmRleCh0aGlzLmluZGV4Xyk7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIHVwZGF0ZVByaW9yaXR5KG9sZFNuYXA6IE5vZGUsIG5ld1ByaW9yaXR5OiBOb2RlKTogTm9kZSB7XG4gICAgaWYgKG9sZFNuYXAuaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvbGRTbmFwLnVwZGF0ZVByaW9yaXR5KG5ld1ByaW9yaXR5KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGZpbHRlcnNOb2RlcygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGdldEluZGV4ZWRGaWx0ZXIoKTogSW5kZXhlZEZpbHRlciB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGdldEluZGV4KCk6IEluZGV4IHtcbiAgICByZXR1cm4gdGhpcy5pbmRleF87XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFJhbmdlZEZpbHRlciB9IGZyb20gJy4vUmFuZ2VkRmlsdGVyJztcbmltcG9ydCB7IENoaWxkcmVuTm9kZSB9IGZyb20gJy4uLy4uL3NuYXAvQ2hpbGRyZW5Ob2RlJztcbmltcG9ydCB7IE5vZGUsIE5hbWVkTm9kZSB9IGZyb20gJy4uLy4uL3NuYXAvTm9kZSc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBDaGFuZ2UgfSBmcm9tICcuLi9DaGFuZ2UnO1xuaW1wb3J0IHsgTm9kZUZpbHRlciB9IGZyb20gJy4vTm9kZUZpbHRlcic7XG5pbXBvcnQgeyBJbmRleCB9IGZyb20gJy4uLy4uL3NuYXAvaW5kZXhlcy9JbmRleCc7XG5pbXBvcnQgeyBJbmRleGVkRmlsdGVyIH0gZnJvbSAnLi9JbmRleGVkRmlsdGVyJztcbmltcG9ydCB7IFF1ZXJ5UGFyYW1zIH0gZnJvbSAnLi4vUXVlcnlQYXJhbXMnO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uLy4uL3V0aWwvUGF0aCc7XG5pbXBvcnQgeyBDb21wbGV0ZUNoaWxkU291cmNlIH0gZnJvbSAnLi4vQ29tcGxldGVDaGlsZFNvdXJjZSc7XG5pbXBvcnQgeyBDaGlsZENoYW5nZUFjY3VtdWxhdG9yIH0gZnJvbSAnLi4vQ2hpbGRDaGFuZ2VBY2N1bXVsYXRvcic7XG5cbi8qKlxuICogQXBwbGllcyBhIGxpbWl0IGFuZCBhIHJhbmdlIHRvIGEgbm9kZSBhbmQgdXNlcyBSYW5nZWRGaWx0ZXIgdG8gZG8gdGhlIGhlYXZ5IGxpZnRpbmcgd2hlcmUgcG9zc2libGVcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBpbXBsZW1lbnRzIHtOb2RlRmlsdGVyfVxuICovXG5leHBvcnQgY2xhc3MgTGltaXRlZEZpbHRlciBpbXBsZW1lbnRzIE5vZGVGaWx0ZXIge1xuICAvKipcbiAgICogQGNvbnN0XG4gICAqIEB0eXBlIHtSYW5nZWRGaWx0ZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHJlYWRvbmx5IHJhbmdlZEZpbHRlcl86IFJhbmdlZEZpbHRlcjtcblxuICAvKipcbiAgICogQGNvbnN0XG4gICAqIEB0eXBlIHshSW5kZXh9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHJlYWRvbmx5IGluZGV4XzogSW5kZXg7XG5cbiAgLyoqXG4gICAqIEBjb25zdFxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSByZWFkb25seSBsaW1pdF86IG51bWJlcjtcblxuICAvKipcbiAgICogQGNvbnN0XG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSByZWFkb25seSByZXZlcnNlXzogYm9vbGVhbjtcblxuICAvKipcbiAgICogQHBhcmFtIHshUXVlcnlQYXJhbXN9IHBhcmFtc1xuICAgKi9cbiAgY29uc3RydWN0b3IocGFyYW1zOiBRdWVyeVBhcmFtcykge1xuICAgIHRoaXMucmFuZ2VkRmlsdGVyXyA9IG5ldyBSYW5nZWRGaWx0ZXIocGFyYW1zKTtcbiAgICB0aGlzLmluZGV4XyA9IHBhcmFtcy5nZXRJbmRleCgpO1xuICAgIHRoaXMubGltaXRfID0gcGFyYW1zLmdldExpbWl0KCk7XG4gICAgdGhpcy5yZXZlcnNlXyA9ICFwYXJhbXMuaXNWaWV3RnJvbUxlZnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgdXBkYXRlQ2hpbGQoXG4gICAgc25hcDogTm9kZSxcbiAgICBrZXk6IHN0cmluZyxcbiAgICBuZXdDaGlsZDogTm9kZSxcbiAgICBhZmZlY3RlZFBhdGg6IFBhdGgsXG4gICAgc291cmNlOiBDb21wbGV0ZUNoaWxkU291cmNlLFxuICAgIG9wdENoYW5nZUFjY3VtdWxhdG9yOiBDaGlsZENoYW5nZUFjY3VtdWxhdG9yIHwgbnVsbFxuICApOiBOb2RlIHtcbiAgICBpZiAoIXRoaXMucmFuZ2VkRmlsdGVyXy5tYXRjaGVzKG5ldyBOYW1lZE5vZGUoa2V5LCBuZXdDaGlsZCkpKSB7XG4gICAgICBuZXdDaGlsZCA9IENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFO1xuICAgIH1cbiAgICBpZiAoc25hcC5nZXRJbW1lZGlhdGVDaGlsZChrZXkpLmVxdWFscyhuZXdDaGlsZCkpIHtcbiAgICAgIC8vIE5vIGNoYW5nZVxuICAgICAgcmV0dXJuIHNuYXA7XG4gICAgfSBlbHNlIGlmIChzbmFwLm51bUNoaWxkcmVuKCkgPCB0aGlzLmxpbWl0Xykge1xuICAgICAgcmV0dXJuIHRoaXMucmFuZ2VkRmlsdGVyX1xuICAgICAgICAuZ2V0SW5kZXhlZEZpbHRlcigpXG4gICAgICAgIC51cGRhdGVDaGlsZChcbiAgICAgICAgICBzbmFwLFxuICAgICAgICAgIGtleSxcbiAgICAgICAgICBuZXdDaGlsZCxcbiAgICAgICAgICBhZmZlY3RlZFBhdGgsXG4gICAgICAgICAgc291cmNlLFxuICAgICAgICAgIG9wdENoYW5nZUFjY3VtdWxhdG9yXG4gICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmZ1bGxMaW1pdFVwZGF0ZUNoaWxkXyhcbiAgICAgICAgc25hcCxcbiAgICAgICAga2V5LFxuICAgICAgICBuZXdDaGlsZCxcbiAgICAgICAgc291cmNlLFxuICAgICAgICBvcHRDaGFuZ2VBY2N1bXVsYXRvclxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIHVwZGF0ZUZ1bGxOb2RlKFxuICAgIG9sZFNuYXA6IE5vZGUsXG4gICAgbmV3U25hcDogTm9kZSxcbiAgICBvcHRDaGFuZ2VBY2N1bXVsYXRvcjogQ2hpbGRDaGFuZ2VBY2N1bXVsYXRvciB8IG51bGxcbiAgKTogTm9kZSB7XG4gICAgbGV0IGZpbHRlcmVkO1xuICAgIGlmIChuZXdTbmFwLmlzTGVhZk5vZGUoKSB8fCBuZXdTbmFwLmlzRW1wdHkoKSkge1xuICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBjaGlsZHJlbiBub2RlIHdpdGggdGhlIGNvcnJlY3QgaW5kZXgsIG5vdCBhIGxlYWYgbm9kZTtcbiAgICAgIGZpbHRlcmVkID0gQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREUud2l0aEluZGV4KHRoaXMuaW5kZXhfKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmxpbWl0XyAqIDIgPCBuZXdTbmFwLm51bUNoaWxkcmVuKCkgJiZcbiAgICAgICAgbmV3U25hcC5pc0luZGV4ZWQodGhpcy5pbmRleF8pXG4gICAgICApIHtcbiAgICAgICAgLy8gRWFzaWVyIHRvIGJ1aWxkIHVwIGEgc25hcHNob3QsIHNpbmNlIHdoYXQgd2UncmUgZ2l2ZW4gaGFzIG1vcmUgdGhhbiB0d2ljZSB0aGUgZWxlbWVudHMgd2Ugd2FudFxuICAgICAgICBmaWx0ZXJlZCA9IENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFLndpdGhJbmRleCh0aGlzLmluZGV4Xyk7XG4gICAgICAgIC8vIGFuY2hvciB0byB0aGUgc3RhcnRQb3N0LCBlbmRQb3N0LCBvciBsYXN0IGVsZW1lbnQgYXMgYXBwcm9wcmlhdGVcbiAgICAgICAgbGV0IGl0ZXJhdG9yO1xuICAgICAgICBpZiAodGhpcy5yZXZlcnNlXykge1xuICAgICAgICAgIGl0ZXJhdG9yID0gKG5ld1NuYXAgYXMgQ2hpbGRyZW5Ob2RlKS5nZXRSZXZlcnNlSXRlcmF0b3JGcm9tKFxuICAgICAgICAgICAgdGhpcy5yYW5nZWRGaWx0ZXJfLmdldEVuZFBvc3QoKSxcbiAgICAgICAgICAgIHRoaXMuaW5kZXhfXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVyYXRvciA9IChuZXdTbmFwIGFzIENoaWxkcmVuTm9kZSkuZ2V0SXRlcmF0b3JGcm9tKFxuICAgICAgICAgICAgdGhpcy5yYW5nZWRGaWx0ZXJfLmdldFN0YXJ0UG9zdCgpLFxuICAgICAgICAgICAgdGhpcy5pbmRleF9cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIHdoaWxlIChpdGVyYXRvci5oYXNOZXh0KCkgJiYgY291bnQgPCB0aGlzLmxpbWl0Xykge1xuICAgICAgICAgIGNvbnN0IG5leHQgPSBpdGVyYXRvci5nZXROZXh0KCk7XG4gICAgICAgICAgbGV0IGluUmFuZ2U7XG4gICAgICAgICAgaWYgKHRoaXMucmV2ZXJzZV8pIHtcbiAgICAgICAgICAgIGluUmFuZ2UgPVxuICAgICAgICAgICAgICB0aGlzLmluZGV4Xy5jb21wYXJlKHRoaXMucmFuZ2VkRmlsdGVyXy5nZXRTdGFydFBvc3QoKSwgbmV4dCkgPD0gMDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5SYW5nZSA9XG4gICAgICAgICAgICAgIHRoaXMuaW5kZXhfLmNvbXBhcmUobmV4dCwgdGhpcy5yYW5nZWRGaWx0ZXJfLmdldEVuZFBvc3QoKSkgPD0gMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGluUmFuZ2UpIHtcbiAgICAgICAgICAgIGZpbHRlcmVkID0gZmlsdGVyZWQudXBkYXRlSW1tZWRpYXRlQ2hpbGQobmV4dC5uYW1lLCBuZXh0Lm5vZGUpO1xuICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgcG9zdCwgd2UgY2Fubm90IGtlZXAgYWRkaW5nIGVsZW1tZW50c1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUaGUgc25hcCBjb250YWlucyBsZXNzIHRoYW4gdHdpY2UgdGhlIGxpbWl0LiBGYXN0ZXIgdG8gZGVsZXRlIGZyb20gdGhlIHNuYXAgdGhhbiBidWlsZCB1cCBhIG5ldyBvbmVcbiAgICAgICAgZmlsdGVyZWQgPSBuZXdTbmFwLndpdGhJbmRleCh0aGlzLmluZGV4Xyk7XG4gICAgICAgIC8vIERvbid0IHN1cHBvcnQgcHJpb3JpdGllcyBvbiBxdWVyaWVzXG4gICAgICAgIGZpbHRlcmVkID0gZmlsdGVyZWQudXBkYXRlUHJpb3JpdHkoXG4gICAgICAgICAgQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREVcbiAgICAgICAgKSBhcyBDaGlsZHJlbk5vZGU7XG4gICAgICAgIGxldCBzdGFydFBvc3Q7XG4gICAgICAgIGxldCBlbmRQb3N0O1xuICAgICAgICBsZXQgY21wO1xuICAgICAgICBsZXQgaXRlcmF0b3I7XG4gICAgICAgIGlmICh0aGlzLnJldmVyc2VfKSB7XG4gICAgICAgICAgaXRlcmF0b3IgPSBmaWx0ZXJlZC5nZXRSZXZlcnNlSXRlcmF0b3IodGhpcy5pbmRleF8pO1xuICAgICAgICAgIHN0YXJ0UG9zdCA9IHRoaXMucmFuZ2VkRmlsdGVyXy5nZXRFbmRQb3N0KCk7XG4gICAgICAgICAgZW5kUG9zdCA9IHRoaXMucmFuZ2VkRmlsdGVyXy5nZXRTdGFydFBvc3QoKTtcbiAgICAgICAgICBjb25zdCBpbmRleENvbXBhcmUgPSB0aGlzLmluZGV4Xy5nZXRDb21wYXJlKCk7XG4gICAgICAgICAgY21wID0gKGE6IE5hbWVkTm9kZSwgYjogTmFtZWROb2RlKSA9PiBpbmRleENvbXBhcmUoYiwgYSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlcmF0b3IgPSBmaWx0ZXJlZC5nZXRJdGVyYXRvcih0aGlzLmluZGV4Xyk7XG4gICAgICAgICAgc3RhcnRQb3N0ID0gdGhpcy5yYW5nZWRGaWx0ZXJfLmdldFN0YXJ0UG9zdCgpO1xuICAgICAgICAgIGVuZFBvc3QgPSB0aGlzLnJhbmdlZEZpbHRlcl8uZ2V0RW5kUG9zdCgpO1xuICAgICAgICAgIGNtcCA9IHRoaXMuaW5kZXhfLmdldENvbXBhcmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIGxldCBmb3VuZFN0YXJ0UG9zdCA9IGZhbHNlO1xuICAgICAgICB3aGlsZSAoaXRlcmF0b3IuaGFzTmV4dCgpKSB7XG4gICAgICAgICAgbGV0IG5leHQgPSBpdGVyYXRvci5nZXROZXh0KCk7XG4gICAgICAgICAgaWYgKCFmb3VuZFN0YXJ0UG9zdCAmJiBjbXAoc3RhcnRQb3N0LCBuZXh0KSA8PSAwKSB7XG4gICAgICAgICAgICAvLyBzdGFydCBhZGRpbmdcbiAgICAgICAgICAgIGZvdW5kU3RhcnRQb3N0ID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IGluUmFuZ2UgPVxuICAgICAgICAgICAgZm91bmRTdGFydFBvc3QgJiYgY291bnQgPCB0aGlzLmxpbWl0XyAmJiBjbXAobmV4dCwgZW5kUG9zdCkgPD0gMDtcbiAgICAgICAgICBpZiAoaW5SYW5nZSkge1xuICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmlsdGVyZWQgPSBmaWx0ZXJlZC51cGRhdGVJbW1lZGlhdGVDaGlsZChcbiAgICAgICAgICAgICAgbmV4dC5uYW1lLFxuICAgICAgICAgICAgICBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmFuZ2VkRmlsdGVyX1xuICAgICAgLmdldEluZGV4ZWRGaWx0ZXIoKVxuICAgICAgLnVwZGF0ZUZ1bGxOb2RlKG9sZFNuYXAsIGZpbHRlcmVkLCBvcHRDaGFuZ2VBY2N1bXVsYXRvcik7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIHVwZGF0ZVByaW9yaXR5KG9sZFNuYXA6IE5vZGUsIG5ld1ByaW9yaXR5OiBOb2RlKTogTm9kZSB7XG4gICAgLy8gRG9uJ3Qgc3VwcG9ydCBwcmlvcml0aWVzIG9uIHF1ZXJpZXNcbiAgICByZXR1cm4gb2xkU25hcDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgZmlsdGVyc05vZGVzKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBnZXRJbmRleGVkRmlsdGVyKCk6IEluZGV4ZWRGaWx0ZXIge1xuICAgIHJldHVybiB0aGlzLnJhbmdlZEZpbHRlcl8uZ2V0SW5kZXhlZEZpbHRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBnZXRJbmRleCgpOiBJbmRleCB7XG4gICAgcmV0dXJuIHRoaXMuaW5kZXhfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU5vZGV9IHNuYXBcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNoaWxkS2V5XG4gICAqIEBwYXJhbSB7IU5vZGV9IGNoaWxkU25hcFxuICAgKiBAcGFyYW0geyFDb21wbGV0ZUNoaWxkU291cmNlfSBzb3VyY2VcbiAgICogQHBhcmFtIHs/Q2hpbGRDaGFuZ2VBY2N1bXVsYXRvcn0gY2hhbmdlQWNjdW11bGF0b3JcbiAgICogQHJldHVybiB7IU5vZGV9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGZ1bGxMaW1pdFVwZGF0ZUNoaWxkXyhcbiAgICBzbmFwOiBOb2RlLFxuICAgIGNoaWxkS2V5OiBzdHJpbmcsXG4gICAgY2hpbGRTbmFwOiBOb2RlLFxuICAgIHNvdXJjZTogQ29tcGxldGVDaGlsZFNvdXJjZSxcbiAgICBjaGFuZ2VBY2N1bXVsYXRvcjogQ2hpbGRDaGFuZ2VBY2N1bXVsYXRvciB8IG51bGxcbiAgKTogTm9kZSB7XG4gICAgLy8gVE9ETzogcmVuYW1lIGFsbCBjYWNoZSBzdHVmZiBldGMgdG8gZ2VuZXJhbCBzbmFwIHRlcm1pbm9sb2d5XG4gICAgbGV0IGNtcDtcbiAgICBpZiAodGhpcy5yZXZlcnNlXykge1xuICAgICAgY29uc3QgaW5kZXhDbXAgPSB0aGlzLmluZGV4Xy5nZXRDb21wYXJlKCk7XG4gICAgICBjbXAgPSAoYTogTmFtZWROb2RlLCBiOiBOYW1lZE5vZGUpID0+IGluZGV4Q21wKGIsIGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbXAgPSB0aGlzLmluZGV4Xy5nZXRDb21wYXJlKCk7XG4gICAgfVxuICAgIGNvbnN0IG9sZEV2ZW50Q2FjaGUgPSBzbmFwIGFzIENoaWxkcmVuTm9kZTtcbiAgICBhc3NlcnQob2xkRXZlbnRDYWNoZS5udW1DaGlsZHJlbigpID09IHRoaXMubGltaXRfLCAnJyk7XG4gICAgY29uc3QgbmV3Q2hpbGROYW1lZE5vZGUgPSBuZXcgTmFtZWROb2RlKGNoaWxkS2V5LCBjaGlsZFNuYXApO1xuICAgIGNvbnN0IHdpbmRvd0JvdW5kYXJ5ID0gdGhpcy5yZXZlcnNlX1xuICAgICAgPyBvbGRFdmVudENhY2hlLmdldEZpcnN0Q2hpbGQodGhpcy5pbmRleF8pXG4gICAgICA6IChvbGRFdmVudENhY2hlLmdldExhc3RDaGlsZCh0aGlzLmluZGV4XykgYXMgTmFtZWROb2RlKTtcbiAgICBjb25zdCBpblJhbmdlID0gdGhpcy5yYW5nZWRGaWx0ZXJfLm1hdGNoZXMobmV3Q2hpbGROYW1lZE5vZGUpO1xuICAgIGlmIChvbGRFdmVudENhY2hlLmhhc0NoaWxkKGNoaWxkS2V5KSkge1xuICAgICAgY29uc3Qgb2xkQ2hpbGRTbmFwID0gb2xkRXZlbnRDYWNoZS5nZXRJbW1lZGlhdGVDaGlsZChjaGlsZEtleSk7XG4gICAgICBsZXQgbmV4dENoaWxkID0gc291cmNlLmdldENoaWxkQWZ0ZXJDaGlsZChcbiAgICAgICAgdGhpcy5pbmRleF8sXG4gICAgICAgIHdpbmRvd0JvdW5kYXJ5LFxuICAgICAgICB0aGlzLnJldmVyc2VfXG4gICAgICApO1xuICAgICAgd2hpbGUgKFxuICAgICAgICBuZXh0Q2hpbGQgIT0gbnVsbCAmJlxuICAgICAgICAobmV4dENoaWxkLm5hbWUgPT0gY2hpbGRLZXkgfHwgb2xkRXZlbnRDYWNoZS5oYXNDaGlsZChuZXh0Q2hpbGQubmFtZSkpXG4gICAgICApIHtcbiAgICAgICAgLy8gVGhlcmUgaXMgYSB3ZWlyZCBlZGdlIGNhc2Ugd2hlcmUgYSBub2RlIGlzIHVwZGF0ZWQgYXMgcGFydCBvZiBhIG1lcmdlIGluIHRoZSB3cml0ZSB0cmVlLCBidXQgaGFzbid0XG4gICAgICAgIC8vIGJlZW4gYXBwbGllZCB0byB0aGUgbGltaXRlZCBmaWx0ZXIgeWV0LiBJZ25vcmUgdGhpcyBuZXh0IGNoaWxkIHdoaWNoIHdpbGwgYmUgdXBkYXRlZCBsYXRlciBpblxuICAgICAgICAvLyB0aGUgbGltaXRlZCBmaWx0ZXIuLi5cbiAgICAgICAgbmV4dENoaWxkID0gc291cmNlLmdldENoaWxkQWZ0ZXJDaGlsZChcbiAgICAgICAgICB0aGlzLmluZGV4XyxcbiAgICAgICAgICBuZXh0Q2hpbGQsXG4gICAgICAgICAgdGhpcy5yZXZlcnNlX1xuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgY29tcGFyZU5leHQgPVxuICAgICAgICBuZXh0Q2hpbGQgPT0gbnVsbCA/IDEgOiBjbXAobmV4dENoaWxkLCBuZXdDaGlsZE5hbWVkTm9kZSk7XG4gICAgICBjb25zdCByZW1haW5zSW5XaW5kb3cgPVxuICAgICAgICBpblJhbmdlICYmICFjaGlsZFNuYXAuaXNFbXB0eSgpICYmIGNvbXBhcmVOZXh0ID49IDA7XG4gICAgICBpZiAocmVtYWluc0luV2luZG93KSB7XG4gICAgICAgIGlmIChjaGFuZ2VBY2N1bXVsYXRvciAhPSBudWxsKSB7XG4gICAgICAgICAgY2hhbmdlQWNjdW11bGF0b3IudHJhY2tDaGlsZENoYW5nZShcbiAgICAgICAgICAgIENoYW5nZS5jaGlsZENoYW5nZWRDaGFuZ2UoY2hpbGRLZXksIGNoaWxkU25hcCwgb2xkQ2hpbGRTbmFwKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9sZEV2ZW50Q2FjaGUudXBkYXRlSW1tZWRpYXRlQ2hpbGQoY2hpbGRLZXksIGNoaWxkU25hcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoY2hhbmdlQWNjdW11bGF0b3IgIT0gbnVsbCkge1xuICAgICAgICAgIGNoYW5nZUFjY3VtdWxhdG9yLnRyYWNrQ2hpbGRDaGFuZ2UoXG4gICAgICAgICAgICBDaGFuZ2UuY2hpbGRSZW1vdmVkQ2hhbmdlKGNoaWxkS2V5LCBvbGRDaGlsZFNuYXApXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdFdmVudENhY2hlID0gb2xkRXZlbnRDYWNoZS51cGRhdGVJbW1lZGlhdGVDaGlsZChcbiAgICAgICAgICBjaGlsZEtleSxcbiAgICAgICAgICBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBuZXh0Q2hpbGRJblJhbmdlID1cbiAgICAgICAgICBuZXh0Q2hpbGQgIT0gbnVsbCAmJiB0aGlzLnJhbmdlZEZpbHRlcl8ubWF0Y2hlcyhuZXh0Q2hpbGQpO1xuICAgICAgICBpZiAobmV4dENoaWxkSW5SYW5nZSkge1xuICAgICAgICAgIGlmIChjaGFuZ2VBY2N1bXVsYXRvciAhPSBudWxsKSB7XG4gICAgICAgICAgICBjaGFuZ2VBY2N1bXVsYXRvci50cmFja0NoaWxkQ2hhbmdlKFxuICAgICAgICAgICAgICBDaGFuZ2UuY2hpbGRBZGRlZENoYW5nZShuZXh0Q2hpbGQubmFtZSwgbmV4dENoaWxkLm5vZGUpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbmV3RXZlbnRDYWNoZS51cGRhdGVJbW1lZGlhdGVDaGlsZChcbiAgICAgICAgICAgIG5leHRDaGlsZC5uYW1lLFxuICAgICAgICAgICAgbmV4dENoaWxkLm5vZGVcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBuZXdFdmVudENhY2hlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjaGlsZFNuYXAuaXNFbXB0eSgpKSB7XG4gICAgICAvLyB3ZSdyZSBkZWxldGluZyBhIG5vZGUsIGJ1dCBpdCB3YXMgbm90IGluIHRoZSB3aW5kb3csIHNvIGlnbm9yZSBpdFxuICAgICAgcmV0dXJuIHNuYXA7XG4gICAgfSBlbHNlIGlmIChpblJhbmdlKSB7XG4gICAgICBpZiAoY21wKHdpbmRvd0JvdW5kYXJ5LCBuZXdDaGlsZE5hbWVkTm9kZSkgPj0gMCkge1xuICAgICAgICBpZiAoY2hhbmdlQWNjdW11bGF0b3IgIT0gbnVsbCkge1xuICAgICAgICAgIGNoYW5nZUFjY3VtdWxhdG9yLnRyYWNrQ2hpbGRDaGFuZ2UoXG4gICAgICAgICAgICBDaGFuZ2UuY2hpbGRSZW1vdmVkQ2hhbmdlKHdpbmRvd0JvdW5kYXJ5Lm5hbWUsIHdpbmRvd0JvdW5kYXJ5Lm5vZGUpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjaGFuZ2VBY2N1bXVsYXRvci50cmFja0NoaWxkQ2hhbmdlKFxuICAgICAgICAgICAgQ2hhbmdlLmNoaWxkQWRkZWRDaGFuZ2UoY2hpbGRLZXksIGNoaWxkU25hcClcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvbGRFdmVudENhY2hlXG4gICAgICAgICAgLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKGNoaWxkS2V5LCBjaGlsZFNuYXApXG4gICAgICAgICAgLnVwZGF0ZUltbWVkaWF0ZUNoaWxkKHdpbmRvd0JvdW5kYXJ5Lm5hbWUsIENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzbmFwO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc25hcDtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEluZGV4ZWRGaWx0ZXIgfSBmcm9tICcuL0luZGV4ZWRGaWx0ZXInO1xuaW1wb3J0IHsgUFJJT1JJVFlfSU5ERVggfSBmcm9tICcuLi8uLi9zbmFwL2luZGV4ZXMvUHJpb3JpdHlJbmRleCc7XG5pbXBvcnQgeyBOYW1lZE5vZGUsIE5vZGUgfSBmcm9tICcuLi8uLi8uLi9jb3JlL3NuYXAvTm9kZSc7XG5pbXBvcnQgeyBDaGlsZHJlbk5vZGUgfSBmcm9tICcuLi8uLi9zbmFwL0NoaWxkcmVuTm9kZSc7XG5pbXBvcnQgeyBOb2RlRmlsdGVyIH0gZnJvbSAnLi9Ob2RlRmlsdGVyJztcbmltcG9ydCB7IFF1ZXJ5UGFyYW1zIH0gZnJvbSAnLi4vUXVlcnlQYXJhbXMnO1xuaW1wb3J0IHsgSW5kZXggfSBmcm9tICcuLi8uLi9zbmFwL2luZGV4ZXMvSW5kZXgnO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uLy4uL3V0aWwvUGF0aCc7XG5pbXBvcnQgeyBDb21wbGV0ZUNoaWxkU291cmNlIH0gZnJvbSAnLi4vQ29tcGxldGVDaGlsZFNvdXJjZSc7XG5pbXBvcnQgeyBDaGlsZENoYW5nZUFjY3VtdWxhdG9yIH0gZnJvbSAnLi4vQ2hpbGRDaGFuZ2VBY2N1bXVsYXRvcic7XG5cbi8qKlxuICogRmlsdGVycyBub2RlcyBieSByYW5nZSBhbmQgdXNlcyBhbiBJbmRleEZpbHRlciB0byB0cmFjayBhbnkgY2hhbmdlcyBhZnRlciBmaWx0ZXJpbmcgdGhlIG5vZGVcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBpbXBsZW1lbnRzIHtOb2RlRmlsdGVyfVxuICovXG5leHBvcnQgY2xhc3MgUmFuZ2VkRmlsdGVyIGltcGxlbWVudHMgTm9kZUZpbHRlciB7XG4gIC8qKlxuICAgKiBAdHlwZSB7IUluZGV4ZWRGaWx0ZXJ9XG4gICAqIEBjb25zdFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBpbmRleGVkRmlsdGVyXzogSW5kZXhlZEZpbHRlcjtcblxuICAvKipcbiAgICogQGNvbnN0XG4gICAqIEB0eXBlIHshSW5kZXh9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGluZGV4XzogSW5kZXg7XG5cbiAgLyoqXG4gICAqIEBjb25zdFxuICAgKiBAdHlwZSB7IU5hbWVkTm9kZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgc3RhcnRQb3N0XzogTmFtZWROb2RlO1xuXG4gIC8qKlxuICAgKiBAY29uc3RcbiAgICogQHR5cGUgeyFOYW1lZE5vZGV9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGVuZFBvc3RfOiBOYW1lZE5vZGU7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVF1ZXJ5UGFyYW1zfSBwYXJhbXNcbiAgICovXG4gIGNvbnN0cnVjdG9yKHBhcmFtczogUXVlcnlQYXJhbXMpIHtcbiAgICB0aGlzLmluZGV4ZWRGaWx0ZXJfID0gbmV3IEluZGV4ZWRGaWx0ZXIocGFyYW1zLmdldEluZGV4KCkpO1xuICAgIHRoaXMuaW5kZXhfID0gcGFyYW1zLmdldEluZGV4KCk7XG4gICAgdGhpcy5zdGFydFBvc3RfID0gUmFuZ2VkRmlsdGVyLmdldFN0YXJ0UG9zdF8ocGFyYW1zKTtcbiAgICB0aGlzLmVuZFBvc3RfID0gUmFuZ2VkRmlsdGVyLmdldEVuZFBvc3RfKHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IU5hbWVkTm9kZX1cbiAgICovXG4gIGdldFN0YXJ0UG9zdCgpOiBOYW1lZE5vZGUge1xuICAgIHJldHVybiB0aGlzLnN0YXJ0UG9zdF87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IU5hbWVkTm9kZX1cbiAgICovXG4gIGdldEVuZFBvc3QoKTogTmFtZWROb2RlIHtcbiAgICByZXR1cm4gdGhpcy5lbmRQb3N0XztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFOYW1lZE5vZGV9IG5vZGVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIG1hdGNoZXMobm9kZTogTmFtZWROb2RlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuaW5kZXhfLmNvbXBhcmUodGhpcy5nZXRTdGFydFBvc3QoKSwgbm9kZSkgPD0gMCAmJlxuICAgICAgdGhpcy5pbmRleF8uY29tcGFyZShub2RlLCB0aGlzLmdldEVuZFBvc3QoKSkgPD0gMFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIHVwZGF0ZUNoaWxkKFxuICAgIHNuYXA6IE5vZGUsXG4gICAga2V5OiBzdHJpbmcsXG4gICAgbmV3Q2hpbGQ6IE5vZGUsXG4gICAgYWZmZWN0ZWRQYXRoOiBQYXRoLFxuICAgIHNvdXJjZTogQ29tcGxldGVDaGlsZFNvdXJjZSxcbiAgICBvcHRDaGFuZ2VBY2N1bXVsYXRvcjogQ2hpbGRDaGFuZ2VBY2N1bXVsYXRvciB8IG51bGxcbiAgKTogTm9kZSB7XG4gICAgaWYgKCF0aGlzLm1hdGNoZXMobmV3IE5hbWVkTm9kZShrZXksIG5ld0NoaWxkKSkpIHtcbiAgICAgIG5ld0NoaWxkID0gQ2hpbGRyZW5Ob2RlLkVNUFRZX05PREU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmluZGV4ZWRGaWx0ZXJfLnVwZGF0ZUNoaWxkKFxuICAgICAgc25hcCxcbiAgICAgIGtleSxcbiAgICAgIG5ld0NoaWxkLFxuICAgICAgYWZmZWN0ZWRQYXRoLFxuICAgICAgc291cmNlLFxuICAgICAgb3B0Q2hhbmdlQWNjdW11bGF0b3JcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICB1cGRhdGVGdWxsTm9kZShcbiAgICBvbGRTbmFwOiBOb2RlLFxuICAgIG5ld1NuYXA6IE5vZGUsXG4gICAgb3B0Q2hhbmdlQWNjdW11bGF0b3I6IENoaWxkQ2hhbmdlQWNjdW11bGF0b3IgfCBudWxsXG4gICk6IE5vZGUge1xuICAgIGlmIChuZXdTbmFwLmlzTGVhZk5vZGUoKSkge1xuICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBjaGlsZHJlbiBub2RlIHdpdGggdGhlIGNvcnJlY3QgaW5kZXgsIG5vdCBhIGxlYWYgbm9kZTtcbiAgICAgIG5ld1NuYXAgPSBDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERTtcbiAgICB9XG4gICAgbGV0IGZpbHRlcmVkID0gbmV3U25hcC53aXRoSW5kZXgodGhpcy5pbmRleF8pO1xuICAgIC8vIERvbid0IHN1cHBvcnQgcHJpb3JpdGllcyBvbiBxdWVyaWVzXG4gICAgZmlsdGVyZWQgPSBmaWx0ZXJlZC51cGRhdGVQcmlvcml0eShDaGlsZHJlbk5vZGUuRU1QVFlfTk9ERSk7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgbmV3U25hcC5mb3JFYWNoQ2hpbGQoUFJJT1JJVFlfSU5ERVgsIGZ1bmN0aW9uKGtleSwgY2hpbGROb2RlKSB7XG4gICAgICBpZiAoIXNlbGYubWF0Y2hlcyhuZXcgTmFtZWROb2RlKGtleSwgY2hpbGROb2RlKSkpIHtcbiAgICAgICAgZmlsdGVyZWQgPSBmaWx0ZXJlZC51cGRhdGVJbW1lZGlhdGVDaGlsZChrZXksIENoaWxkcmVuTm9kZS5FTVBUWV9OT0RFKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5pbmRleGVkRmlsdGVyXy51cGRhdGVGdWxsTm9kZShcbiAgICAgIG9sZFNuYXAsXG4gICAgICBmaWx0ZXJlZCxcbiAgICAgIG9wdENoYW5nZUFjY3VtdWxhdG9yXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgdXBkYXRlUHJpb3JpdHkob2xkU25hcDogTm9kZSwgbmV3UHJpb3JpdHk6IE5vZGUpOiBOb2RlIHtcbiAgICAvLyBEb24ndCBzdXBwb3J0IHByaW9yaXRpZXMgb24gcXVlcmllc1xuICAgIHJldHVybiBvbGRTbmFwO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBmaWx0ZXJzTm9kZXMoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGdldEluZGV4ZWRGaWx0ZXIoKTogSW5kZXhlZEZpbHRlciB7XG4gICAgcmV0dXJuIHRoaXMuaW5kZXhlZEZpbHRlcl87XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGdldEluZGV4KCk6IEluZGV4IHtcbiAgICByZXR1cm4gdGhpcy5pbmRleF87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshUXVlcnlQYXJhbXN9IHBhcmFtc1xuICAgKiBAcmV0dXJuIHshTmFtZWROb2RlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0U3RhcnRQb3N0XyhwYXJhbXM6IFF1ZXJ5UGFyYW1zKTogTmFtZWROb2RlIHtcbiAgICBpZiAocGFyYW1zLmhhc1N0YXJ0KCkpIHtcbiAgICAgIGNvbnN0IHN0YXJ0TmFtZSA9IHBhcmFtcy5nZXRJbmRleFN0YXJ0TmFtZSgpO1xuICAgICAgcmV0dXJuIHBhcmFtcy5nZXRJbmRleCgpLm1ha2VQb3N0KHBhcmFtcy5nZXRJbmRleFN0YXJ0VmFsdWUoKSwgc3RhcnROYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHBhcmFtcy5nZXRJbmRleCgpLm1pblBvc3QoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshUXVlcnlQYXJhbXN9IHBhcmFtc1xuICAgKiBAcmV0dXJuIHshTmFtZWROb2RlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0RW5kUG9zdF8ocGFyYW1zOiBRdWVyeVBhcmFtcyk6IE5hbWVkTm9kZSB7XG4gICAgaWYgKHBhcmFtcy5oYXNFbmQoKSkge1xuICAgICAgY29uc3QgZW5kTmFtZSA9IHBhcmFtcy5nZXRJbmRleEVuZE5hbWUoKTtcbiAgICAgIHJldHVybiBwYXJhbXMuZ2V0SW5kZXgoKS5tYWtlUG9zdChwYXJhbXMuZ2V0SW5kZXhFbmRWYWx1ZSgpLCBlbmROYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHBhcmFtcy5nZXRJbmRleCgpLm1heFBvc3QoKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIGV4ZWN1dGVXaGVuRE9NUmVhZHksXG4gIGlzQ2hyb21lRXh0ZW5zaW9uQ29udGVudFNjcmlwdCxcbiAgaXNXaW5kb3dzU3RvcmVBcHAsXG4gIGxvZyxcbiAgbG9nV3JhcHBlcixcbiAgTFVJREdlbmVyYXRvcixcbiAgc3BsaXRTdHJpbmdCeVNpemVcbn0gZnJvbSAnLi4vY29yZS91dGlsL3V0aWwnO1xuaW1wb3J0IHsgQ291bnRlZFNldCB9IGZyb20gJy4uL2NvcmUvdXRpbC9Db3VudGVkU2V0JztcbmltcG9ydCB7IFN0YXRzTWFuYWdlciB9IGZyb20gJy4uL2NvcmUvc3RhdHMvU3RhdHNNYW5hZ2VyJztcbmltcG9ydCB7IFBhY2tldFJlY2VpdmVyIH0gZnJvbSAnLi9wb2xsaW5nL1BhY2tldFJlY2VpdmVyJztcbmltcG9ydCB7XG4gIEZPUkdFX0RPTUFJTixcbiAgRk9SR0VfUkVGLFxuICBMQVNUX1NFU1NJT05fUEFSQU0sXG4gIExPTkdfUE9MTElORyxcbiAgUFJPVE9DT0xfVkVSU0lPTixcbiAgUkVGRVJFUl9QQVJBTSxcbiAgVFJBTlNQT1JUX1NFU1NJT05fUEFSQU0sXG4gIFZFUlNJT05fUEFSQU1cbn0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgYmFzZTY0RW5jb2RlLCBzdHJpbmdpZnkgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBpc05vZGVTZGsgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBUcmFuc3BvcnQgfSBmcm9tICcuL1RyYW5zcG9ydCc7XG5pbXBvcnQgeyBSZXBvSW5mbyB9IGZyb20gJy4uL2NvcmUvUmVwb0luZm8nO1xuaW1wb3J0IHsgU3RhdHNDb2xsZWN0aW9uIH0gZnJvbSAnLi4vY29yZS9zdGF0cy9TdGF0c0NvbGxlY3Rpb24nO1xuXG4vLyBVUkwgcXVlcnkgcGFyYW1ldGVycyBhc3NvY2lhdGVkIHdpdGggbG9uZ3BvbGxpbmdcbmV4cG9ydCBjb25zdCBGSVJFQkFTRV9MT05HUE9MTF9TVEFSVF9QQVJBTSA9ICdzdGFydCc7XG5leHBvcnQgY29uc3QgRklSRUJBU0VfTE9OR1BPTExfQ0xPU0VfQ09NTUFORCA9ICdjbG9zZSc7XG5leHBvcnQgY29uc3QgRklSRUJBU0VfTE9OR1BPTExfQ09NTUFORF9DQl9OQU1FID0gJ3BMUENvbW1hbmQnO1xuZXhwb3J0IGNvbnN0IEZJUkVCQVNFX0xPTkdQT0xMX0RBVEFfQ0JfTkFNRSA9ICdwUlRMUENCJztcbmV4cG9ydCBjb25zdCBGSVJFQkFTRV9MT05HUE9MTF9JRF9QQVJBTSA9ICdpZCc7XG5leHBvcnQgY29uc3QgRklSRUJBU0VfTE9OR1BPTExfUFdfUEFSQU0gPSAncHcnO1xuZXhwb3J0IGNvbnN0IEZJUkVCQVNFX0xPTkdQT0xMX1NFUklBTF9QQVJBTSA9ICdzZXInO1xuZXhwb3J0IGNvbnN0IEZJUkVCQVNFX0xPTkdQT0xMX0NBTExCQUNLX0lEX1BBUkFNID0gJ2NiJztcbmV4cG9ydCBjb25zdCBGSVJFQkFTRV9MT05HUE9MTF9TRUdNRU5UX05VTV9QQVJBTSA9ICdzZWcnO1xuZXhwb3J0IGNvbnN0IEZJUkVCQVNFX0xPTkdQT0xMX1NFR01FTlRTX0lOX1BBQ0tFVCA9ICd0cyc7XG5leHBvcnQgY29uc3QgRklSRUJBU0VfTE9OR1BPTExfREFUQV9QQVJBTSA9ICdkJztcbmV4cG9ydCBjb25zdCBGSVJFQkFTRV9MT05HUE9MTF9ESVNDT05OX0ZSQU1FX1BBUkFNID0gJ2Rpc2Nvbm4nO1xuZXhwb3J0IGNvbnN0IEZJUkVCQVNFX0xPTkdQT0xMX0RJU0NPTk5fRlJBTUVfUkVRVUVTVF9QQVJBTSA9ICdkZnJhbWUnO1xuXG4vL0RhdGEgc2l6ZSBjb25zdGFudHMuXG4vL1RPRE86IFBlcmY6IHRoZSBtYXhpbXVtIGxlbmd0aCBhY3R1YWxseSBkaWZmZXJzIGZyb20gYnJvd3NlciB0byBicm93c2VyLlxuLy8gV2Ugc2hvdWxkIGNoZWNrIHdoYXQgYnJvd3NlciB3ZSdyZSBvbiBhbmQgc2V0IGFjY29yZGluZ2x5LlxuY29uc3QgTUFYX1VSTF9EQVRBX1NJWkUgPSAxODcwO1xuY29uc3QgU0VHX0hFQURFUl9TSVpFID0gMzA7IC8vaWU6ICZzZWc9ODI5OTIzNCZ0cz05ODIzODkxMjMmZD1cbmNvbnN0IE1BWF9QQVlMT0FEX1NJWkUgPSBNQVhfVVJMX0RBVEFfU0laRSAtIFNFR19IRUFERVJfU0laRTtcblxuLyoqXG4gKiBLZWVwYWxpdmUgcGVyaW9kXG4gKiBzZW5kIGEgZnJlc2ggcmVxdWVzdCBhdCBtaW5pbXVtIGV2ZXJ5IDI1IHNlY29uZHMuIE9wZXJhIGhhcyBhIG1heGltdW0gcmVxdWVzdFxuICogbGVuZ3RoIG9mIDMwIHNlY29uZHMgdGhhdCB3ZSBjYW4ndCBleGNlZWQuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmNvbnN0IEtFRVBBTElWRV9SRVFVRVNUX0lOVEVSVkFMID0gMjUwMDA7XG5cbi8qKlxuICogSG93IGxvbmcgdG8gd2FpdCBiZWZvcmUgYWJvcnRpbmcgYSBsb25nLXBvbGxpbmcgY29ubmVjdGlvbiBhdHRlbXB0LlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5jb25zdCBMUF9DT05ORUNUX1RJTUVPVVQgPSAzMDAwMDtcblxuLyoqXG4gKiBUaGlzIGNsYXNzIG1hbmFnZXMgYSBzaW5nbGUgbG9uZy1wb2xsaW5nIGNvbm5lY3Rpb24uXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAaW1wbGVtZW50cyB7VHJhbnNwb3J0fVxuICovXG5leHBvcnQgY2xhc3MgQnJvd3NlclBvbGxDb25uZWN0aW9uIGltcGxlbWVudHMgVHJhbnNwb3J0IHtcbiAgYnl0ZXNTZW50ID0gMDtcbiAgYnl0ZXNSZWNlaXZlZCA9IDA7XG4gIHVybEZuOiAocGFyYW1zOiBvYmplY3QpID0+IHN0cmluZztcbiAgc2NyaXB0VGFnSG9sZGVyOiBGaXJlYmFzZUlGcmFtZVNjcmlwdEhvbGRlcjtcbiAgbXlEaXNjb25uRnJhbWU6IEhUTUxJRnJhbWVFbGVtZW50O1xuICBjdXJTZWdtZW50TnVtOiBudW1iZXI7XG4gIG15UGFja2V0T3JkZXJlcjogUGFja2V0UmVjZWl2ZXI7XG4gIGlkOiBzdHJpbmc7XG4gIHBhc3N3b3JkOiBzdHJpbmc7XG4gIHByaXZhdGUgbG9nXzogKC4uLmE6IGFueVtdKSA9PiB2b2lkO1xuICBwcml2YXRlIHN0YXRzXzogU3RhdHNDb2xsZWN0aW9uO1xuICBwcml2YXRlIGV2ZXJDb25uZWN0ZWRfID0gZmFsc2U7XG4gIHByaXZhdGUgaXNDbG9zZWRfOiBib29sZWFuO1xuICBwcml2YXRlIGNvbm5lY3RUaW1lb3V0VGltZXJfOiBudW1iZXIgfCBudWxsO1xuICBwcml2YXRlIG9uRGlzY29ubmVjdF86ICgoYT86IGJvb2xlYW4pID0+IHZvaWQpIHwgbnVsbDtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbm5JZCBBbiBpZGVudGlmaWVyIGZvciB0aGlzIGNvbm5lY3Rpb24sIHVzZWQgZm9yIGxvZ2dpbmdcbiAgICogQHBhcmFtIHtSZXBvSW5mb30gcmVwb0luZm8gVGhlIGluZm8gZm9yIHRoZSBlbmRwb2ludCB0byBzZW5kIGRhdGEgdG8uXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gdHJhbnNwb3J0U2Vzc2lvbklkIE9wdGlvbmFsIHRyYW5zcG9ydFNlc3Npb25pZCBpZiB3ZSBhcmUgcmVjb25uZWN0aW5nIGZvciBhbiBleGlzdGluZ1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0IHNlc3Npb25cbiAgICogQHBhcmFtIHtzdHJpbmc9fSAgbGFzdFNlc3Npb25JZCBPcHRpb25hbCBsYXN0U2Vzc2lvbklkIGlmIHRoZSBQZXJzaXN0ZW50Q29ubmVjdGlvbiBoYXMgYWxyZWFkeSBjcmVhdGVkIGFcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbiBwcmV2aW91c2x5XG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgY29ubklkOiBzdHJpbmcsXG4gICAgcHVibGljIHJlcG9JbmZvOiBSZXBvSW5mbyxcbiAgICBwdWJsaWMgdHJhbnNwb3J0U2Vzc2lvbklkPzogc3RyaW5nLFxuICAgIHB1YmxpYyBsYXN0U2Vzc2lvbklkPzogc3RyaW5nXG4gICkge1xuICAgIHRoaXMubG9nXyA9IGxvZ1dyYXBwZXIoY29ubklkKTtcbiAgICB0aGlzLnN0YXRzXyA9IFN0YXRzTWFuYWdlci5nZXRDb2xsZWN0aW9uKHJlcG9JbmZvKTtcbiAgICB0aGlzLnVybEZuID0gKHBhcmFtczogeyBbazogc3RyaW5nXTogc3RyaW5nIH0pID0+XG4gICAgICByZXBvSW5mby5jb25uZWN0aW9uVVJMKExPTkdfUE9MTElORywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKE9iamVjdCl9IG9uTWVzc2FnZSBDYWxsYmFjayB3aGVuIG1lc3NhZ2VzIGFycml2ZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IG9uRGlzY29ubmVjdCBDYWxsYmFjayB3aXRoIGNvbm5lY3Rpb24gbG9zdC5cbiAgICovXG4gIG9wZW4ob25NZXNzYWdlOiAobXNnOiBPYmplY3QpID0+IHZvaWQsIG9uRGlzY29ubmVjdDogKGE/OiBib29sZWFuKSA9PiB2b2lkKSB7XG4gICAgdGhpcy5jdXJTZWdtZW50TnVtID0gMDtcbiAgICB0aGlzLm9uRGlzY29ubmVjdF8gPSBvbkRpc2Nvbm5lY3Q7XG4gICAgdGhpcy5teVBhY2tldE9yZGVyZXIgPSBuZXcgUGFja2V0UmVjZWl2ZXIob25NZXNzYWdlKTtcbiAgICB0aGlzLmlzQ2xvc2VkXyA9IGZhbHNlO1xuXG4gICAgdGhpcy5jb25uZWN0VGltZW91dFRpbWVyXyA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5sb2dfKCdUaW1lZCBvdXQgdHJ5aW5nIHRvIGNvbm5lY3QuJyk7XG4gICAgICAvLyBNYWtlIHN1cmUgd2UgY2xlYXIgdGhlIGhvc3QgY2FjaGVcbiAgICAgIHRoaXMub25DbG9zZWRfKCk7XG4gICAgICB0aGlzLmNvbm5lY3RUaW1lb3V0VGltZXJfID0gbnVsbDtcbiAgICB9LCBNYXRoLmZsb29yKExQX0NPTk5FQ1RfVElNRU9VVCkpIGFzIGFueTtcblxuICAgIC8vIEVuc3VyZSB3ZSBkZWxheSB0aGUgY3JlYXRpb24gb2YgdGhlIGlmcmFtZSB1bnRpbCB0aGUgRE9NIGlzIGxvYWRlZC5cbiAgICBleGVjdXRlV2hlbkRPTVJlYWR5KCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmlzQ2xvc2VkXykgcmV0dXJuO1xuXG4gICAgICAvL1NldCB1cCBhIGNhbGxiYWNrIHRoYXQgZ2V0cyB0cmlnZ2VyZWQgb25jZSBhIGNvbm5lY3Rpb24gaXMgc2V0IHVwLlxuICAgICAgdGhpcy5zY3JpcHRUYWdIb2xkZXIgPSBuZXcgRmlyZWJhc2VJRnJhbWVTY3JpcHRIb2xkZXIoXG4gICAgICAgICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgY29uc3QgW2NvbW1hbmQsIGFyZzEsIGFyZzIsIGFyZzMsIGFyZzRdID0gYXJncztcbiAgICAgICAgICB0aGlzLmluY3JlbWVudEluY29taW5nQnl0ZXNfKGFyZ3MpO1xuICAgICAgICAgIGlmICghdGhpcy5zY3JpcHRUYWdIb2xkZXIpIHJldHVybjsgLy8gd2UgY2xvc2VkIHRoZSBjb25uZWN0aW9uLlxuXG4gICAgICAgICAgaWYgKHRoaXMuY29ubmVjdFRpbWVvdXRUaW1lcl8pIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNvbm5lY3RUaW1lb3V0VGltZXJfKTtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdFRpbWVvdXRUaW1lcl8gPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmV2ZXJDb25uZWN0ZWRfID0gdHJ1ZTtcbiAgICAgICAgICBpZiAoY29tbWFuZCA9PSBGSVJFQkFTRV9MT05HUE9MTF9TVEFSVF9QQVJBTSkge1xuICAgICAgICAgICAgdGhpcy5pZCA9IGFyZzE7XG4gICAgICAgICAgICB0aGlzLnBhc3N3b3JkID0gYXJnMjtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbW1hbmQgPT09IEZJUkVCQVNFX0xPTkdQT0xMX0NMT1NFX0NPTU1BTkQpIHtcbiAgICAgICAgICAgIC8vIERvbid0IGNsZWFyIHRoZSBob3N0IGNhY2hlLiBXZSBnb3QgYSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIsIHNvIHdlIGtub3cgaXQncyByZWFjaGFibGVcbiAgICAgICAgICAgIGlmIChhcmcxKSB7XG4gICAgICAgICAgICAgIC8vIFdlIGFyZW4ndCBleHBlY3RpbmcgYW55IG1vcmUgZGF0YSAob3RoZXIgdGhhbiB3aGF0IHRoZSBzZXJ2ZXIncyBhbHJlYWR5IGluIHRoZSBwcm9jZXNzIG9mIHNlbmRpbmcgdXNcbiAgICAgICAgICAgICAgLy8gdGhyb3VnaCBvdXIgYWxyZWFkeSBvcGVuIHBvbGxzKSwgc28gZG9uJ3Qgc2VuZCBhbnkgbW9yZS5cbiAgICAgICAgICAgICAgdGhpcy5zY3JpcHRUYWdIb2xkZXIuc2VuZE5ld1BvbGxzID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgLy8gYXJnMSBpbiB0aGlzIGNhc2UgaXMgdGhlIGxhc3QgcmVzcG9uc2UgbnVtYmVyIHNlbnQgYnkgdGhlIHNlcnZlci4gV2Ugc2hvdWxkIHRyeSB0byByZWNlaXZlXG4gICAgICAgICAgICAgIC8vIGFsbCBvZiB0aGUgcmVzcG9uc2VzIHVwIHRvIHRoaXMgb25lIGJlZm9yZSBjbG9zaW5nXG4gICAgICAgICAgICAgIHRoaXMubXlQYWNrZXRPcmRlcmVyLmNsb3NlQWZ0ZXIoYXJnMSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub25DbG9zZWRfKCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5vbkNsb3NlZF8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnJlY29nbml6ZWQgY29tbWFuZCByZWNlaXZlZDogJyArIGNvbW1hbmQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICBjb25zdCBbcE4sIGRhdGFdID0gYXJncztcbiAgICAgICAgICB0aGlzLmluY3JlbWVudEluY29taW5nQnl0ZXNfKGFyZ3MpO1xuICAgICAgICAgIHRoaXMubXlQYWNrZXRPcmRlcmVyLmhhbmRsZVJlc3BvbnNlKHBOLCBkYXRhKTtcbiAgICAgICAgfSxcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIHRoaXMub25DbG9zZWRfKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHRoaXMudXJsRm5cbiAgICAgICk7XG5cbiAgICAgIC8vU2VuZCB0aGUgaW5pdGlhbCByZXF1ZXN0IHRvIGNvbm5lY3QuIFRoZSBzZXJpYWwgbnVtYmVyIGlzIHNpbXBseSB0byBrZWVwIHRoZSBicm93c2VyIGZyb20gcHVsbGluZyBwcmV2aW91cyByZXN1bHRzXG4gICAgICAvL2Zyb20gY2FjaGUuXG4gICAgICBjb25zdCB1cmxQYXJhbXM6IHsgW2s6IHN0cmluZ106IHN0cmluZyB8IG51bWJlciB9ID0ge307XG4gICAgICB1cmxQYXJhbXNbRklSRUJBU0VfTE9OR1BPTExfU1RBUlRfUEFSQU1dID0gJ3QnO1xuICAgICAgdXJsUGFyYW1zW0ZJUkVCQVNFX0xPTkdQT0xMX1NFUklBTF9QQVJBTV0gPSBNYXRoLmZsb29yKFxuICAgICAgICBNYXRoLnJhbmRvbSgpICogMTAwMDAwMDAwXG4gICAgICApO1xuICAgICAgaWYgKHRoaXMuc2NyaXB0VGFnSG9sZGVyLnVuaXF1ZUNhbGxiYWNrSWRlbnRpZmllcilcbiAgICAgICAgdXJsUGFyYW1zW1xuICAgICAgICAgIEZJUkVCQVNFX0xPTkdQT0xMX0NBTExCQUNLX0lEX1BBUkFNXG4gICAgICAgIF0gPSB0aGlzLnNjcmlwdFRhZ0hvbGRlci51bmlxdWVDYWxsYmFja0lkZW50aWZpZXI7XG4gICAgICB1cmxQYXJhbXNbVkVSU0lPTl9QQVJBTV0gPSBQUk9UT0NPTF9WRVJTSU9OO1xuICAgICAgaWYgKHRoaXMudHJhbnNwb3J0U2Vzc2lvbklkKSB7XG4gICAgICAgIHVybFBhcmFtc1tUUkFOU1BPUlRfU0VTU0lPTl9QQVJBTV0gPSB0aGlzLnRyYW5zcG9ydFNlc3Npb25JZDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmxhc3RTZXNzaW9uSWQpIHtcbiAgICAgICAgdXJsUGFyYW1zW0xBU1RfU0VTU0lPTl9QQVJBTV0gPSB0aGlzLmxhc3RTZXNzaW9uSWQ7XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgICFpc05vZGVTZGsoKSAmJlxuICAgICAgICB0eXBlb2YgbG9jYXRpb24gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIGxvY2F0aW9uLmhyZWYgJiZcbiAgICAgICAgbG9jYXRpb24uaHJlZi5pbmRleE9mKEZPUkdFX0RPTUFJTikgIT09IC0xXG4gICAgICApIHtcbiAgICAgICAgdXJsUGFyYW1zW1JFRkVSRVJfUEFSQU1dID0gRk9SR0VfUkVGO1xuICAgICAgfVxuICAgICAgY29uc3QgY29ubmVjdFVSTCA9IHRoaXMudXJsRm4odXJsUGFyYW1zKTtcbiAgICAgIHRoaXMubG9nXygnQ29ubmVjdGluZyB2aWEgbG9uZy1wb2xsIHRvICcgKyBjb25uZWN0VVJMKTtcbiAgICAgIHRoaXMuc2NyaXB0VGFnSG9sZGVyLmFkZFRhZyhjb25uZWN0VVJMLCAoKSA9PiB7XG4gICAgICAgIC8qIGRvIG5vdGhpbmcgKi9cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGwgdGhpcyB3aGVuIGEgaGFuZHNoYWtlIGhhcyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IGFuZCB3ZSB3YW50IHRvIGNvbnNpZGVyIHRoZSBjb25uZWN0aW9uIGVzdGFibGlzaGVkXG4gICAqL1xuICBzdGFydCgpIHtcbiAgICB0aGlzLnNjcmlwdFRhZ0hvbGRlci5zdGFydExvbmdQb2xsKHRoaXMuaWQsIHRoaXMucGFzc3dvcmQpO1xuICAgIHRoaXMuYWRkRGlzY29ubmVjdFBpbmdGcmFtZSh0aGlzLmlkLCB0aGlzLnBhc3N3b3JkKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGZvcmNlQWxsb3dfOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBGb3JjZXMgbG9uZyBwb2xsaW5nIHRvIGJlIGNvbnNpZGVyZWQgYXMgYSBwb3RlbnRpYWwgdHJhbnNwb3J0XG4gICAqL1xuICBzdGF0aWMgZm9yY2VBbGxvdygpIHtcbiAgICBCcm93c2VyUG9sbENvbm5lY3Rpb24uZm9yY2VBbGxvd18gPSB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgZm9yY2VEaXNhbGxvd186IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEZvcmNlcyBsb25ncG9sbGluZyB0byBub3QgYmUgY29uc2lkZXJlZCBhcyBhIHBvdGVudGlhbCB0cmFuc3BvcnRcbiAgICovXG4gIHN0YXRpYyBmb3JjZURpc2FsbG93KCkge1xuICAgIEJyb3dzZXJQb2xsQ29ubmVjdGlvbi5mb3JjZURpc2FsbG93XyA9IHRydWU7XG4gIH1cblxuICAvLyBTdGF0aWMgbWV0aG9kLCB1c2Ugc3RyaW5nIGxpdGVyYWwgc28gaXQgY2FuIGJlIGFjY2Vzc2VkIGluIGEgZ2VuZXJpYyB3YXlcbiAgc3RhdGljIGlzQXZhaWxhYmxlKCkge1xuICAgIC8vIE5PVEU6IEluIFJlYWN0LU5hdGl2ZSB0aGVyZSdzIG5vcm1hbGx5IG5vICdkb2N1bWVudCcsIGJ1dCBpZiB5b3UgZGVidWcgYSBSZWFjdC1OYXRpdmUgYXBwIGluXG4gICAgLy8gdGhlIENocm9tZSBkZWJ1Z2dlciwgJ2RvY3VtZW50JyBpcyBkZWZpbmVkLCBidXQgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBpcyBudWxsICgyMDE1LzA2LzA4KS5cbiAgICByZXR1cm4gKFxuICAgICAgQnJvd3NlclBvbGxDb25uZWN0aW9uLmZvcmNlQWxsb3dfIHx8XG4gICAgICAoIUJyb3dzZXJQb2xsQ29ubmVjdGlvbi5mb3JjZURpc2FsbG93XyAmJlxuICAgICAgICB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgIT0gbnVsbCAmJlxuICAgICAgICAhaXNDaHJvbWVFeHRlbnNpb25Db250ZW50U2NyaXB0KCkgJiZcbiAgICAgICAgIWlzV2luZG93c1N0b3JlQXBwKCkgJiZcbiAgICAgICAgIWlzTm9kZVNkaygpKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogTm8tb3AgZm9yIHBvbGxpbmdcbiAgICovXG4gIG1hcmtDb25uZWN0aW9uSGVhbHRoeSgpIHt9XG5cbiAgLyoqXG4gICAqIFN0b3BzIHBvbGxpbmcgYW5kIGNsZWFucyB1cCB0aGUgaWZyYW1lXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHNodXRkb3duXygpIHtcbiAgICB0aGlzLmlzQ2xvc2VkXyA9IHRydWU7XG5cbiAgICBpZiAodGhpcy5zY3JpcHRUYWdIb2xkZXIpIHtcbiAgICAgIHRoaXMuc2NyaXB0VGFnSG9sZGVyLmNsb3NlKCk7XG4gICAgICB0aGlzLnNjcmlwdFRhZ0hvbGRlciA9IG51bGw7XG4gICAgfVxuXG4gICAgLy9yZW1vdmUgdGhlIGRpc2Nvbm5lY3QgZnJhbWUsIHdoaWNoIHdpbGwgdHJpZ2dlciBhbiBYSFIgY2FsbCB0byB0aGUgc2VydmVyIHRvIHRlbGwgaXQgd2UncmUgbGVhdmluZy5cbiAgICBpZiAodGhpcy5teURpc2Nvbm5GcmFtZSkge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLm15RGlzY29ubkZyYW1lKTtcbiAgICAgIHRoaXMubXlEaXNjb25uRnJhbWUgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbm5lY3RUaW1lb3V0VGltZXJfKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5jb25uZWN0VGltZW91dFRpbWVyXyk7XG4gICAgICB0aGlzLmNvbm5lY3RUaW1lb3V0VGltZXJfID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gdGhpcyB0cmFuc3BvcnQgaXMgY2xvc2VkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIG9uQ2xvc2VkXygpIHtcbiAgICBpZiAoIXRoaXMuaXNDbG9zZWRfKSB7XG4gICAgICB0aGlzLmxvZ18oJ0xvbmdwb2xsIGlzIGNsb3NpbmcgaXRzZWxmJyk7XG4gICAgICB0aGlzLnNodXRkb3duXygpO1xuXG4gICAgICBpZiAodGhpcy5vbkRpc2Nvbm5lY3RfKSB7XG4gICAgICAgIHRoaXMub25EaXNjb25uZWN0Xyh0aGlzLmV2ZXJDb25uZWN0ZWRfKTtcbiAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RfID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXh0ZXJuYWwtZmFjaW5nIGNsb3NlIGhhbmRsZXIuIFJlYWxUaW1lIGhhcyByZXF1ZXN0ZWQgd2Ugc2h1dCBkb3duLiBLaWxsIG91ciBjb25uZWN0aW9uIGFuZCB0ZWxsIHRoZSBzZXJ2ZXJcbiAgICogdGhhdCB3ZSd2ZSBsZWZ0LlxuICAgKi9cbiAgY2xvc2UoKSB7XG4gICAgaWYgKCF0aGlzLmlzQ2xvc2VkXykge1xuICAgICAgdGhpcy5sb2dfKCdMb25ncG9sbCBpcyBiZWluZyBjbG9zZWQuJyk7XG4gICAgICB0aGlzLnNodXRkb3duXygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIHRoZSBKU09OIG9iamVjdCBkb3duIHRvIHRoZSBzZXJ2ZXIuIEl0IHdpbGwgbmVlZCB0byBiZSBzdHJpbmdpZmllZCwgYmFzZTY0IGVuY29kZWQsIGFuZCB0aGVuXG4gICAqIGJyb2tlbiBpbnRvIGNodW5rcyAoc2luY2UgVVJMcyBoYXZlIGEgc21hbGwgbWF4aW11bSBsZW5ndGgpLlxuICAgKiBAcGFyYW0geyFPYmplY3R9IGRhdGEgVGhlIEpTT04gZGF0YSB0byB0cmFuc21pdC5cbiAgICovXG4gIHNlbmQoZGF0YTogT2JqZWN0KSB7XG4gICAgY29uc3QgZGF0YVN0ciA9IHN0cmluZ2lmeShkYXRhKTtcbiAgICB0aGlzLmJ5dGVzU2VudCArPSBkYXRhU3RyLmxlbmd0aDtcbiAgICB0aGlzLnN0YXRzXy5pbmNyZW1lbnRDb3VudGVyKCdieXRlc19zZW50JywgZGF0YVN0ci5sZW5ndGgpO1xuXG4gICAgLy9maXJzdCwgbGV0cyBnZXQgdGhlIGJhc2U2NC1lbmNvZGVkIGRhdGFcbiAgICBjb25zdCBiYXNlNjRkYXRhID0gYmFzZTY0RW5jb2RlKGRhdGFTdHIpO1xuXG4gICAgLy9XZSBjYW4gb25seSBmaXQgYSBjZXJ0YWluIGFtb3VudCBpbiBlYWNoIFVSTCwgc28gd2UgbmVlZCB0byBzcGxpdCB0aGlzIHJlcXVlc3RcbiAgICAvL3VwIGludG8gbXVsdGlwbGUgcGllY2VzIGlmIGl0IGRvZXNuJ3QgZml0IGluIG9uZSByZXF1ZXN0LlxuICAgIGNvbnN0IGRhdGFTZWdzID0gc3BsaXRTdHJpbmdCeVNpemUoYmFzZTY0ZGF0YSwgTUFYX1BBWUxPQURfU0laRSk7XG5cbiAgICAvL0VucXVldWUgZWFjaCBzZWdtZW50IGZvciB0cmFuc21pc3Npb24uIFdlIGFzc2lnbiBlYWNoIGNodW5rIGEgc2VxdWVudGlhbCBJRCBhbmQgYSB0b3RhbCBudW1iZXJcbiAgICAvL29mIHNlZ21lbnRzIHNvIHRoYXQgd2UgY2FuIHJlYXNzZW1ibGUgdGhlIHBhY2tldCBvbiB0aGUgc2VydmVyLlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YVNlZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc2NyaXB0VGFnSG9sZGVyLmVucXVldWVTZWdtZW50KFxuICAgICAgICB0aGlzLmN1clNlZ21lbnROdW0sXG4gICAgICAgIGRhdGFTZWdzLmxlbmd0aCxcbiAgICAgICAgZGF0YVNlZ3NbaV1cbiAgICAgICk7XG4gICAgICB0aGlzLmN1clNlZ21lbnROdW0rKztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyBob3cgd2Ugbm90aWZ5IHRoZSBzZXJ2ZXIgdGhhdCB3ZSdyZSBsZWF2aW5nLlxuICAgKiBXZSBhcmVuJ3QgYWJsZSB0byBzZW5kIHJlcXVlc3RzIHdpdGggREhUTUwgb24gYSB3aW5kb3cgY2xvc2UgZXZlbnQsIGJ1dCB3ZSBjYW5cbiAgICogdHJpZ2dlciBYSFIgcmVxdWVzdHMgaW4gc29tZSBicm93c2VycyAoZXZlcnl0aGluZyBidXQgT3BlcmEgYmFzaWNhbGx5KS5cbiAgICogQHBhcmFtIHshc3RyaW5nfSBpZFxuICAgKiBAcGFyYW0geyFzdHJpbmd9IHB3XG4gICAqL1xuICBhZGREaXNjb25uZWN0UGluZ0ZyYW1lKGlkOiBzdHJpbmcsIHB3OiBzdHJpbmcpIHtcbiAgICBpZiAoaXNOb2RlU2RrKCkpIHJldHVybjtcbiAgICB0aGlzLm15RGlzY29ubkZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gICAgY29uc3QgdXJsUGFyYW1zOiB7IFtrOiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9O1xuICAgIHVybFBhcmFtc1tGSVJFQkFTRV9MT05HUE9MTF9ESVNDT05OX0ZSQU1FX1JFUVVFU1RfUEFSQU1dID0gJ3QnO1xuICAgIHVybFBhcmFtc1tGSVJFQkFTRV9MT05HUE9MTF9JRF9QQVJBTV0gPSBpZDtcbiAgICB1cmxQYXJhbXNbRklSRUJBU0VfTE9OR1BPTExfUFdfUEFSQU1dID0gcHc7XG4gICAgdGhpcy5teURpc2Nvbm5GcmFtZS5zcmMgPSB0aGlzLnVybEZuKHVybFBhcmFtcyk7XG4gICAgdGhpcy5teURpc2Nvbm5GcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLm15RGlzY29ubkZyYW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIHRvIHRyYWNrIHRoZSBieXRlcyByZWNlaXZlZCBieSB0aGlzIGNsaWVudFxuICAgKiBAcGFyYW0geyp9IGFyZ3NcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgaW5jcmVtZW50SW5jb21pbmdCeXRlc18oYXJnczogYW55KSB7XG4gICAgLy8gVE9ETzogVGhpcyBpcyBhbiBhbm5veWluZyBwZXJmIGhpdCBqdXN0IHRvIHRyYWNrIHRoZSBudW1iZXIgb2YgaW5jb21pbmcgYnl0ZXMuICBNYXliZSBpdCBzaG91bGQgYmUgb3B0LWluLlxuICAgIGNvbnN0IGJ5dGVzUmVjZWl2ZWQgPSBzdHJpbmdpZnkoYXJncykubGVuZ3RoO1xuICAgIHRoaXMuYnl0ZXNSZWNlaXZlZCArPSBieXRlc1JlY2VpdmVkO1xuICAgIHRoaXMuc3RhdHNfLmluY3JlbWVudENvdW50ZXIoJ2J5dGVzX3JlY2VpdmVkJywgYnl0ZXNSZWNlaXZlZCk7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRnJhbWVFbGVtZW50IGV4dGVuZHMgSFRNTElGcmFtZUVsZW1lbnQge1xuICBkb2M6IERvY3VtZW50O1xufVxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBBIHdyYXBwZXIgYXJvdW5kIGFuIGlmcmFtZSB0aGF0IGlzIHVzZWQgYXMgYSBsb25nLXBvbGxpbmcgc2NyaXB0IGhvbGRlci5cbiAqIEBjb25zdHJ1Y3RvclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbmV4cG9ydCBjbGFzcyBGaXJlYmFzZUlGcmFtZVNjcmlwdEhvbGRlciB7XG4gIC8vV2UgbWFpbnRhaW4gYSBjb3VudCBvZiBhbGwgb2YgdGhlIG91dHN0YW5kaW5nIHJlcXVlc3RzLCBiZWNhdXNlIGlmIHdlIGhhdmUgdG9vIG1hbnkgYWN0aXZlIGF0IG9uY2UgaXQgY2FuIGNhdXNlXG4gIC8vcHJvYmxlbXMgaW4gc29tZSBicm93c2Vycy5cbiAgLyoqXG4gICAqIEB0eXBlIHtDb3VudGVkU2V0LjxudW1iZXIsIG51bWJlcj59XG4gICAqL1xuICBvdXRzdGFuZGluZ1JlcXVlc3RzID0gbmV3IENvdW50ZWRTZXQ8bnVtYmVyLCBudW1iZXI+KCk7XG5cbiAgLy9BIHF1ZXVlIG9mIHRoZSBwZW5kaW5nIHNlZ21lbnRzIHdhaXRpbmcgZm9yIHRyYW5zbWlzc2lvbiB0byB0aGUgc2VydmVyLlxuICBwZW5kaW5nU2VnczogeyBzZWc6IG51bWJlcjsgdHM6IG51bWJlcjsgZDogYW55IH1bXSA9IFtdO1xuXG4gIC8vQSBzZXJpYWwgbnVtYmVyLiBXZSB1c2UgdGhpcyBmb3IgdHdvIHRoaW5nczpcbiAgLy8gMSkgQSB3YXkgdG8gZW5zdXJlIHRoZSBicm93c2VyIGRvZXNuJ3QgY2FjaGUgcmVzcG9uc2VzIHRvIHBvbGxzXG4gIC8vIDIpIEEgd2F5IHRvIG1ha2UgdGhlIHNlcnZlciBhd2FyZSB3aGVuIGxvbmctcG9sbHMgYXJyaXZlIGluIGEgZGlmZmVyZW50IG9yZGVyIHRoYW4gd2Ugc3RhcnRlZCB0aGVtLiBUaGVcbiAgLy8gICAgc2VydmVyIG5lZWRzIHRvIHJlbGVhc2UgYm90aCBwb2xscyBpbiB0aGlzIGNhc2Ugb3IgaXQgd2lsbCBjYXVzZSBwcm9ibGVtcyBpbiBPcGVyYSBzaW5jZSBPcGVyYSBjYW4gb25seSBleGVjdXRlXG4gIC8vICAgIEpTT05QIGNvZGUgaW4gdGhlIG9yZGVyIGl0IHdhcyBhZGRlZCB0byB0aGUgaWZyYW1lLlxuICBjdXJyZW50U2VyaWFsID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMDAwKTtcblxuICAvLyBUaGlzIGdldHMgc2V0IHRvIGZhbHNlIHdoZW4gd2UncmUgXCJjbG9zaW5nIGRvd25cIiB0aGUgY29ubmVjdGlvbiAoZS5nLiB3ZSdyZSBzd2l0Y2hpbmcgdHJhbnNwb3J0cyBidXQgdGhlcmUncyBzdGlsbFxuICAvLyBpbmNvbWluZyBkYXRhIGZyb20gdGhlIHNlcnZlciB0aGF0IHdlJ3JlIHdhaXRpbmcgZm9yKS5cbiAgc2VuZE5ld1BvbGxzID0gdHJ1ZTtcblxuICB1bmlxdWVDYWxsYmFja0lkZW50aWZpZXI6IG51bWJlcjtcbiAgbXlJRnJhbWU6IElGcmFtZUVsZW1lbnQ7XG4gIGFsaXZlOiBib29sZWFuO1xuICBteUlEOiBzdHJpbmc7XG4gIG15UFc6IHN0cmluZztcbiAgY29tbWFuZENCOiAoY29tbWFuZDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4gdm9pZDtcbiAgb25NZXNzYWdlQ0I6ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZDtcblxuICAvKipcbiAgICogQHBhcmFtIGNvbW1hbmRDQiAtIFRoZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgd2hlbiBjb250cm9sIGNvbW1hbmRzIGFyZSByZWNldmllZCBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAqIEBwYXJhbSBvbk1lc3NhZ2VDQiAtIFRoZSBjYWxsYmFjayB0byBiZSB0cmlnZ2VyZWQgd2hlbiByZXNwb25zZXMgYXJyaXZlIGZyb20gdGhlIHNlcnZlci5cbiAgICogQHBhcmFtIG9uRGlzY29ubmVjdCAtIFRoZSBjYWxsYmFjayB0byBiZSB0cmlnZ2VyZWQgd2hlbiB0aGlzIHRhZyBob2xkZXIgaXMgY2xvc2VkXG4gICAqIEBwYXJhbSB1cmxGbiAtIEEgZnVuY3Rpb24gdGhhdCBwcm92aWRlcyB0aGUgVVJMIG9mIHRoZSBlbmRwb2ludCB0byBzZW5kIGRhdGEgdG8uXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBjb21tYW5kQ0I6IChjb21tYW5kOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkLFxuICAgIG9uTWVzc2FnZUNCOiAoLi4uYXJnczogYW55W10pID0+IHZvaWQsXG4gICAgcHVibGljIG9uRGlzY29ubmVjdDogKCkgPT4gdm9pZCxcbiAgICBwdWJsaWMgdXJsRm46IChhOiBvYmplY3QpID0+IHN0cmluZ1xuICApIHtcbiAgICBpZiAoIWlzTm9kZVNkaygpKSB7XG4gICAgICAvL0VhY2ggc2NyaXB0IGhvbGRlciByZWdpc3RlcnMgYSBjb3VwbGUgb2YgdW5pcXVlbHkgbmFtZWQgY2FsbGJhY2tzIHdpdGggdGhlIHdpbmRvdy4gVGhlc2UgYXJlIGNhbGxlZCBmcm9tIHRoZVxuICAgICAgLy9pZnJhbWVzIHdoZXJlIHdlIHB1dCB0aGUgbG9uZy1wb2xsaW5nIHNjcmlwdCB0YWdzLiBXZSBoYXZlIHR3byBjYWxsYmFja3M6XG4gICAgICAvLyAgIDEpIENvbW1hbmQgQ2FsbGJhY2sgLSBUcmlnZ2VyZWQgZm9yIGNvbnRyb2wgaXNzdWVzLCBsaWtlIHN0YXJ0aW5nIGEgY29ubmVjdGlvbi5cbiAgICAgIC8vICAgMikgTWVzc2FnZSBDYWxsYmFjayAtIFRyaWdnZXJlZCB3aGVuIG5ldyBkYXRhIGFycml2ZXMuXG4gICAgICB0aGlzLnVuaXF1ZUNhbGxiYWNrSWRlbnRpZmllciA9IExVSURHZW5lcmF0b3IoKTtcbiAgICAgICh3aW5kb3cgYXMgYW55KVtcbiAgICAgICAgRklSRUJBU0VfTE9OR1BPTExfQ09NTUFORF9DQl9OQU1FICsgdGhpcy51bmlxdWVDYWxsYmFja0lkZW50aWZpZXJcbiAgICAgIF0gPSBjb21tYW5kQ0I7XG4gICAgICAod2luZG93IGFzIGFueSlbXG4gICAgICAgIEZJUkVCQVNFX0xPTkdQT0xMX0RBVEFfQ0JfTkFNRSArIHRoaXMudW5pcXVlQ2FsbGJhY2tJZGVudGlmaWVyXG4gICAgICBdID0gb25NZXNzYWdlQ0I7XG5cbiAgICAgIC8vQ3JlYXRlIGFuIGlmcmFtZSBmb3IgdXMgdG8gYWRkIHNjcmlwdCB0YWdzIHRvLlxuICAgICAgdGhpcy5teUlGcmFtZSA9IEZpcmViYXNlSUZyYW1lU2NyaXB0SG9sZGVyLmNyZWF0ZUlGcmFtZV8oKTtcblxuICAgICAgLy8gU2V0IHRoZSBpZnJhbWUncyBjb250ZW50cy5cbiAgICAgIGxldCBzY3JpcHQgPSAnJztcbiAgICAgIC8vIGlmIHdlIHNldCBhIGphdmFzY3JpcHQgdXJsLCBpdCdzIElFIGFuZCB3ZSBuZWVkIHRvIHNldCB0aGUgZG9jdW1lbnQgZG9tYWluLiBUaGUgamF2YXNjcmlwdCB1cmwgaXMgc3VmZmljaWVudFxuICAgICAgLy8gZm9yIGllOSwgYnV0IGllOCBuZWVkcyB0byBkbyBpdCBhZ2FpbiBpbiB0aGUgZG9jdW1lbnQgaXRzZWxmLlxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLm15SUZyYW1lLnNyYyAmJlxuICAgICAgICB0aGlzLm15SUZyYW1lLnNyYy5zdWJzdHIoMCwgJ2phdmFzY3JpcHQ6Jy5sZW5ndGgpID09PSAnamF2YXNjcmlwdDonXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgY3VycmVudERvbWFpbiA9IGRvY3VtZW50LmRvbWFpbjtcbiAgICAgICAgc2NyaXB0ID0gJzxzY3JpcHQ+ZG9jdW1lbnQuZG9tYWluPVwiJyArIGN1cnJlbnREb21haW4gKyAnXCI7PC9zY3JpcHQ+JztcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlmcmFtZUNvbnRlbnRzID0gJzxodG1sPjxib2R5PicgKyBzY3JpcHQgKyAnPC9ib2R5PjwvaHRtbD4nO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5teUlGcmFtZS5kb2Mub3BlbigpO1xuICAgICAgICB0aGlzLm15SUZyYW1lLmRvYy53cml0ZShpZnJhbWVDb250ZW50cyk7XG4gICAgICAgIHRoaXMubXlJRnJhbWUuZG9jLmNsb3NlKCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGxvZygnZnJhbWUgd3JpdGluZyBleGNlcHRpb24nKTtcbiAgICAgICAgaWYgKGUuc3RhY2spIHtcbiAgICAgICAgICBsb2coZS5zdGFjayk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nKGUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbW1hbmRDQiA9IGNvbW1hbmRDQjtcbiAgICAgIHRoaXMub25NZXNzYWdlQ0IgPSBvbk1lc3NhZ2VDQjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRWFjaCBicm93c2VyIGhhcyBpdHMgb3duIGZ1bm55IHdheSB0byBoYW5kbGUgaWZyYW1lcy4gSGVyZSB3ZSBtdXNoIHRoZW0gYWxsIHRvZ2V0aGVyIGludG8gb25lIG9iamVjdCB0aGF0IEkgY2FuXG4gICAqIGFjdHVhbGx5IHVzZS5cbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGNyZWF0ZUlGcmFtZV8oKTogSUZyYW1lRWxlbWVudCB7XG4gICAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJykgYXMgSUZyYW1lRWxlbWVudDtcbiAgICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgIC8vIFRoaXMgaXMgbmVjZXNzYXJ5IGluIG9yZGVyIHRvIGluaXRpYWxpemUgdGhlIGRvY3VtZW50IGluc2lkZSB0aGUgaWZyYW1lXG4gICAgaWYgKGRvY3VtZW50LmJvZHkpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIElmIGRvY3VtZW50LmRvbWFpbiBoYXMgYmVlbiBtb2RpZmllZCBpbiBJRSwgdGhpcyB3aWxsIHRocm93IGFuIGVycm9yLCBhbmQgd2UgbmVlZCB0byBzZXQgdGhlXG4gICAgICAgIC8vIGRvbWFpbiBvZiB0aGUgaWZyYW1lJ3MgZG9jdW1lbnQgbWFudWFsbHkuIFdlIGNhbiBkbyB0aGlzIHZpYSBhIGphdmFzY3JpcHQ6IHVybCBhcyB0aGUgc3JjIGF0dHJpYnV0ZVxuICAgICAgICAvLyBBbHNvIG5vdGUgdGhhdCB3ZSBtdXN0IGRvIHRoaXMgKmFmdGVyKiB0aGUgaWZyYW1lIGhhcyBiZWVuIGFwcGVuZGVkIHRvIHRoZSBwYWdlLiBPdGhlcndpc2UgaXQgZG9lc24ndCB3b3JrLlxuICAgICAgICBjb25zdCBhID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7XG4gICAgICAgIGlmICghYSkge1xuICAgICAgICAgIC8vIEFwb2xvZ2llcyBmb3IgdGhlIGxvZy1zcGFtLCBJIG5lZWQgdG8gZG8gc29tZXRoaW5nIHRvIGtlZXAgY2xvc3VyZSBmcm9tIG9wdGltaXppbmcgb3V0IHRoZSBhc3NpZ25tZW50IGFib3ZlLlxuICAgICAgICAgIGxvZygnTm8gSUUgZG9tYWluIHNldHRpbmcgcmVxdWlyZWQnKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zdCBkb21haW4gPSBkb2N1bWVudC5kb21haW47XG4gICAgICAgIGlmcmFtZS5zcmMgPVxuICAgICAgICAgIFwiamF2YXNjcmlwdDp2b2lkKChmdW5jdGlvbigpe2RvY3VtZW50Lm9wZW4oKTtkb2N1bWVudC5kb21haW49J1wiICtcbiAgICAgICAgICBkb21haW4gK1xuICAgICAgICAgIFwiJztkb2N1bWVudC5jbG9zZSgpO30pKCkpXCI7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIExvbmdQb2xsQ29ubmVjdGlvbiBhdHRlbXB0cyB0byBkZWxheSBpbml0aWFsaXphdGlvbiB1bnRpbCB0aGUgZG9jdW1lbnQgaXMgcmVhZHksIHNvIGhvcGVmdWxseSB0aGlzXG4gICAgICAvLyBuZXZlciBnZXRzIGhpdC5cbiAgICAgIHRocm93ICdEb2N1bWVudCBib2R5IGhhcyBub3QgaW5pdGlhbGl6ZWQuIFdhaXQgdG8gaW5pdGlhbGl6ZSBGaXJlYmFzZSB1bnRpbCBhZnRlciB0aGUgZG9jdW1lbnQgaXMgcmVhZHkuJztcbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIGRvY3VtZW50IG9mIHRoZSBpZnJhbWUgaW4gYSBicm93c2VyLXNwZWNpZmljIHdheS5cbiAgICBpZiAoaWZyYW1lLmNvbnRlbnREb2N1bWVudCkge1xuICAgICAgKGlmcmFtZSBhcyBhbnkpLmRvYyA9IGlmcmFtZS5jb250ZW50RG9jdW1lbnQ7IC8vIEZpcmVmb3gsIE9wZXJhLCBTYWZhcmlcbiAgICB9IGVsc2UgaWYgKGlmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICAoaWZyYW1lIGFzIGFueSkuZG9jID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7IC8vIEludGVybmV0IEV4cGxvcmVyXG4gICAgfSBlbHNlIGlmICgoaWZyYW1lIGFzIGFueSkuZG9jdW1lbnQpIHtcbiAgICAgIChpZnJhbWUgYXMgYW55KS5kb2MgPSAoaWZyYW1lIGFzIGFueSkuZG9jdW1lbnQ7IC8vb3RoZXJzP1xuICAgIH1cblxuICAgIHJldHVybiBpZnJhbWU7XG4gIH1cblxuICAvKipcbiAgICogQ2FuY2VsIGFsbCBvdXRzdGFuZGluZyBxdWVyaWVzIGFuZCByZW1vdmUgdGhlIGZyYW1lLlxuICAgKi9cbiAgY2xvc2UoKSB7XG4gICAgLy9NYXJrIHRoaXMgaWZyYW1lIGFzIGRlYWQsIHNvIG5vIG5ldyByZXF1ZXN0cyBhcmUgc2VudC5cbiAgICB0aGlzLmFsaXZlID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5teUlGcmFtZSkge1xuICAgICAgLy9XZSBoYXZlIHRvIGFjdHVhbGx5IHJlbW92ZSBhbGwgb2YgdGhlIGh0bWwgaW5zaWRlIHRoaXMgaWZyYW1lIGJlZm9yZSByZW1vdmluZyBpdCBmcm9tIHRoZVxuICAgICAgLy93aW5kb3csIG9yIElFIHdpbGwgY29udGludWUgbG9hZGluZyBhbmQgZXhlY3V0aW5nIHRoZSBzY3JpcHQgdGFncyB3ZSd2ZSBhbHJlYWR5IGFkZGVkLCB3aGljaFxuICAgICAgLy9jYW4gbGVhZCB0byBzb21lIGVycm9ycyBiZWluZyB0aHJvd24uIFNldHRpbmcgaW5uZXJIVE1MIHNlZW1zIHRvIGJlIHRoZSBlYXNpZXN0IHdheSB0byBkbyB0aGlzLlxuICAgICAgdGhpcy5teUlGcmFtZS5kb2MuYm9keS5pbm5lckhUTUwgPSAnJztcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5teUlGcmFtZSAhPT0gbnVsbCkge1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5teUlGcmFtZSk7XG4gICAgICAgICAgdGhpcy5teUlGcmFtZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0sIE1hdGguZmxvb3IoMCkpO1xuICAgIH1cblxuICAgIGlmIChpc05vZGVTZGsoKSAmJiB0aGlzLm15SUQpIHtcbiAgICAgIGNvbnN0IHVybFBhcmFtczogeyBbazogc3RyaW5nXTogc3RyaW5nIH0gPSB7fTtcbiAgICAgIHVybFBhcmFtc1tGSVJFQkFTRV9MT05HUE9MTF9ESVNDT05OX0ZSQU1FX1BBUkFNXSA9ICd0JztcbiAgICAgIHVybFBhcmFtc1tGSVJFQkFTRV9MT05HUE9MTF9JRF9QQVJBTV0gPSB0aGlzLm15SUQ7XG4gICAgICB1cmxQYXJhbXNbRklSRUJBU0VfTE9OR1BPTExfUFdfUEFSQU1dID0gdGhpcy5teVBXO1xuICAgICAgY29uc3QgdGhlVVJMID0gdGhpcy51cmxGbih1cmxQYXJhbXMpO1xuICAgICAgKEZpcmViYXNlSUZyYW1lU2NyaXB0SG9sZGVyIGFzIGFueSkubm9kZVJlc3RSZXF1ZXN0KHRoZVVSTCk7XG4gICAgfVxuXG4gICAgLy8gUHJvdGVjdCBmcm9tIGJlaW5nIGNhbGxlZCByZWN1cnNpdmVseS5cbiAgICBjb25zdCBvbkRpc2Nvbm5lY3QgPSB0aGlzLm9uRGlzY29ubmVjdDtcbiAgICBpZiAob25EaXNjb25uZWN0KSB7XG4gICAgICB0aGlzLm9uRGlzY29ubmVjdCA9IG51bGw7XG4gICAgICBvbkRpc2Nvbm5lY3QoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWN0dWFsbHkgc3RhcnQgdGhlIGxvbmctcG9sbGluZyBzZXNzaW9uIGJ5IGFkZGluZyB0aGUgZmlyc3Qgc2NyaXB0IHRhZyhzKSB0byB0aGUgaWZyYW1lLlxuICAgKiBAcGFyYW0geyFzdHJpbmd9IGlkIC0gVGhlIElEIG9mIHRoaXMgY29ubmVjdGlvblxuICAgKiBAcGFyYW0geyFzdHJpbmd9IHB3IC0gVGhlIHBhc3N3b3JkIGZvciB0aGlzIGNvbm5lY3Rpb25cbiAgICovXG4gIHN0YXJ0TG9uZ1BvbGwoaWQ6IHN0cmluZywgcHc6IHN0cmluZykge1xuICAgIHRoaXMubXlJRCA9IGlkO1xuICAgIHRoaXMubXlQVyA9IHB3O1xuICAgIHRoaXMuYWxpdmUgPSB0cnVlO1xuXG4gICAgLy9zZW5kIHRoZSBpbml0aWFsIHJlcXVlc3QuIElmIHRoZXJlIGFyZSByZXF1ZXN0cyBxdWV1ZWQsIG1ha2Ugc3VyZSB0aGF0IHdlIHRyYW5zbWl0IGFzIG1hbnkgYXMgd2UgYXJlIGN1cnJlbnRseSBhYmxlIHRvLlxuICAgIHdoaWxlICh0aGlzLm5ld1JlcXVlc3RfKCkpIHt9XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyBjYWxsZWQgYW55IHRpbWUgc29tZW9uZSBtaWdodCB3YW50IGEgc2NyaXB0IHRhZyB0byBiZSBhZGRlZC4gSXQgYWRkcyBhIHNjcmlwdCB0YWcgd2hlbiB0aGVyZSBhcmVuJ3RcbiAgICogdG9vIG1hbnkgb3V0c3RhbmRpbmcgcmVxdWVzdHMgYW5kIHdlIGFyZSBzdGlsbCBhbGl2ZS5cbiAgICpcbiAgICogSWYgdGhlcmUgYXJlIG91dHN0YW5kaW5nIHBhY2tldCBzZWdtZW50cyB0byBzZW5kLCBpdCBzZW5kcyBvbmUuIElmIHRoZXJlIGFyZW4ndCwgaXQgc2VuZHMgYSBsb25nLXBvbGwgYW55d2F5cyBpZlxuICAgKiBuZWVkZWQuXG4gICAqL1xuICBwcml2YXRlIG5ld1JlcXVlc3RfKCkge1xuICAgIC8vIFdlIGtlZXAgb25lIG91dHN0YW5kaW5nIHJlcXVlc3Qgb3BlbiBhbGwgdGhlIHRpbWUgdG8gcmVjZWl2ZSBkYXRhLCBidXQgaWYgd2UgbmVlZCB0byBzZW5kIGRhdGFcbiAgICAvLyAocGVuZGluZ1NlZ3MubGVuZ3RoID4gMCkgdGhlbiB3ZSBjcmVhdGUgYSBuZXcgcmVxdWVzdCB0byBzZW5kIHRoZSBkYXRhLiAgVGhlIHNlcnZlciB3aWxsIGF1dG9tYXRpY2FsbHlcbiAgICAvLyBjbG9zZSB0aGUgb2xkIHJlcXVlc3QuXG4gICAgaWYgKFxuICAgICAgdGhpcy5hbGl2ZSAmJlxuICAgICAgdGhpcy5zZW5kTmV3UG9sbHMgJiZcbiAgICAgIHRoaXMub3V0c3RhbmRpbmdSZXF1ZXN0cy5jb3VudCgpIDwgKHRoaXMucGVuZGluZ1NlZ3MubGVuZ3RoID4gMCA/IDIgOiAxKVxuICAgICkge1xuICAgICAgLy9jb25zdHJ1Y3Qgb3VyIHVybFxuICAgICAgdGhpcy5jdXJyZW50U2VyaWFsKys7XG4gICAgICBjb25zdCB1cmxQYXJhbXM6IHsgW2s6IHN0cmluZ106IHN0cmluZyB8IG51bWJlciB9ID0ge307XG4gICAgICB1cmxQYXJhbXNbRklSRUJBU0VfTE9OR1BPTExfSURfUEFSQU1dID0gdGhpcy5teUlEO1xuICAgICAgdXJsUGFyYW1zW0ZJUkVCQVNFX0xPTkdQT0xMX1BXX1BBUkFNXSA9IHRoaXMubXlQVztcbiAgICAgIHVybFBhcmFtc1tGSVJFQkFTRV9MT05HUE9MTF9TRVJJQUxfUEFSQU1dID0gdGhpcy5jdXJyZW50U2VyaWFsO1xuICAgICAgbGV0IHRoZVVSTCA9IHRoaXMudXJsRm4odXJsUGFyYW1zKTtcbiAgICAgIC8vTm93IGFkZCBhcyBtdWNoIGRhdGEgYXMgd2UgY2FuLlxuICAgICAgbGV0IGN1ckRhdGFTdHJpbmcgPSAnJztcbiAgICAgIGxldCBpID0gMDtcblxuICAgICAgd2hpbGUgKHRoaXMucGVuZGluZ1NlZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAvL2ZpcnN0LCBsZXRzIHNlZSBpZiB0aGUgbmV4dCBzZWdtZW50IHdpbGwgZml0LlxuICAgICAgICBjb25zdCBuZXh0U2VnID0gdGhpcy5wZW5kaW5nU2Vnc1swXTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5leHRTZWcuZC5sZW5ndGggKyBTRUdfSEVBREVSX1NJWkUgKyBjdXJEYXRhU3RyaW5nLmxlbmd0aCA8PVxuICAgICAgICAgIE1BWF9VUkxfREFUQV9TSVpFXG4gICAgICAgICkge1xuICAgICAgICAgIC8vZ3JlYXQsIHRoZSBzZWdtZW50IHdpbGwgZml0LiBMZXRzIGFwcGVuZCBpdC5cbiAgICAgICAgICBjb25zdCB0aGVTZWcgPSB0aGlzLnBlbmRpbmdTZWdzLnNoaWZ0KCk7XG4gICAgICAgICAgY3VyRGF0YVN0cmluZyA9XG4gICAgICAgICAgICBjdXJEYXRhU3RyaW5nICtcbiAgICAgICAgICAgICcmJyArXG4gICAgICAgICAgICBGSVJFQkFTRV9MT05HUE9MTF9TRUdNRU5UX05VTV9QQVJBTSArXG4gICAgICAgICAgICBpICtcbiAgICAgICAgICAgICc9JyArXG4gICAgICAgICAgICB0aGVTZWcuc2VnICtcbiAgICAgICAgICAgICcmJyArXG4gICAgICAgICAgICBGSVJFQkFTRV9MT05HUE9MTF9TRUdNRU5UU19JTl9QQUNLRVQgK1xuICAgICAgICAgICAgaSArXG4gICAgICAgICAgICAnPScgK1xuICAgICAgICAgICAgdGhlU2VnLnRzICtcbiAgICAgICAgICAgICcmJyArXG4gICAgICAgICAgICBGSVJFQkFTRV9MT05HUE9MTF9EQVRBX1BBUkFNICtcbiAgICAgICAgICAgIGkgK1xuICAgICAgICAgICAgJz0nICtcbiAgICAgICAgICAgIHRoZVNlZy5kO1xuICAgICAgICAgIGkrKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGVVUkwgPSB0aGVVUkwgKyBjdXJEYXRhU3RyaW5nO1xuICAgICAgdGhpcy5hZGRMb25nUG9sbFRhZ18odGhlVVJMLCB0aGlzLmN1cnJlbnRTZXJpYWwpO1xuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBRdWV1ZSBhIHBhY2tldCBmb3IgdHJhbnNtaXNzaW9uIHRvIHRoZSBzZXJ2ZXIuXG4gICAqIEBwYXJhbSBzZWdudW0gLSBBIHNlcXVlbnRpYWwgaWQgZm9yIHRoaXMgcGFja2V0IHNlZ21lbnQgdXNlZCBmb3IgcmVhc3NlbWJseVxuICAgKiBAcGFyYW0gdG90YWxzZWdzIC0gVGhlIHRvdGFsIG51bWJlciBvZiBzZWdtZW50cyBpbiB0aGlzIHBhY2tldFxuICAgKiBAcGFyYW0gZGF0YSAtIFRoZSBkYXRhIGZvciB0aGlzIHNlZ21lbnQuXG4gICAqL1xuICBlbnF1ZXVlU2VnbWVudChzZWdudW06IG51bWJlciwgdG90YWxzZWdzOiBudW1iZXIsIGRhdGE6IGFueSkge1xuICAgIC8vYWRkIHRoaXMgdG8gdGhlIHF1ZXVlIG9mIHNlZ21lbnRzIHRvIHNlbmQuXG4gICAgdGhpcy5wZW5kaW5nU2Vncy5wdXNoKHsgc2VnOiBzZWdudW0sIHRzOiB0b3RhbHNlZ3MsIGQ6IGRhdGEgfSk7XG5cbiAgICAvL3NlbmQgdGhlIGRhdGEgaW1tZWRpYXRlbHkgaWYgdGhlcmUgaXNuJ3QgYWxyZWFkeSBkYXRhIGJlaW5nIHRyYW5zbWl0dGVkLCB1bmxlc3NcbiAgICAvL3N0YXJ0TG9uZ1BvbGwgaGFzbid0IGJlZW4gY2FsbGVkIHlldC5cbiAgICBpZiAodGhpcy5hbGl2ZSkge1xuICAgICAgdGhpcy5uZXdSZXF1ZXN0XygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBzY3JpcHQgdGFnIGZvciBhIHJlZ3VsYXIgbG9uZy1wb2xsIHJlcXVlc3QuXG4gICAqIEBwYXJhbSB7IXN0cmluZ30gdXJsIC0gVGhlIFVSTCBvZiB0aGUgc2NyaXB0IHRhZy5cbiAgICogQHBhcmFtIHshbnVtYmVyfSBzZXJpYWwgLSBUaGUgc2VyaWFsIG51bWJlciBvZiB0aGUgcmVxdWVzdC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgYWRkTG9uZ1BvbGxUYWdfKHVybDogc3RyaW5nLCBzZXJpYWw6IG51bWJlcikge1xuICAgIC8vcmVtZW1iZXIgdGhhdCB3ZSBzZW50IHRoaXMgcmVxdWVzdC5cbiAgICB0aGlzLm91dHN0YW5kaW5nUmVxdWVzdHMuYWRkKHNlcmlhbCwgMSk7XG5cbiAgICBjb25zdCBkb05ld1JlcXVlc3QgPSAoKSA9PiB7XG4gICAgICB0aGlzLm91dHN0YW5kaW5nUmVxdWVzdHMucmVtb3ZlKHNlcmlhbCk7XG4gICAgICB0aGlzLm5ld1JlcXVlc3RfKCk7XG4gICAgfTtcblxuICAgIC8vIElmIHRoaXMgcmVxdWVzdCBkb2Vzbid0IHJldHVybiBvbiBpdHMgb3duIGFjY29yZCAoYnkgdGhlIHNlcnZlciBzZW5kaW5nIHVzIHNvbWUgZGF0YSksIHdlJ2xsXG4gICAgLy8gY3JlYXRlIGEgbmV3IG9uZSBhZnRlciB0aGUgS0VFUEFMSVZFIGludGVydmFsIHRvIG1ha2Ugc3VyZSB3ZSBhbHdheXMga2VlcCBhIGZyZXNoIHJlcXVlc3Qgb3Blbi5cbiAgICBjb25zdCBrZWVwYWxpdmVUaW1lb3V0ID0gc2V0VGltZW91dChcbiAgICAgIGRvTmV3UmVxdWVzdCxcbiAgICAgIE1hdGguZmxvb3IoS0VFUEFMSVZFX1JFUVVFU1RfSU5URVJWQUwpXG4gICAgKTtcblxuICAgIGNvbnN0IHJlYWR5U3RhdGVDQiA9ICgpID0+IHtcbiAgICAgIC8vIFJlcXVlc3QgY29tcGxldGVkLiAgQ2FuY2VsIHRoZSBrZWVwYWxpdmUuXG4gICAgICBjbGVhclRpbWVvdXQoa2VlcGFsaXZlVGltZW91dCk7XG5cbiAgICAgIC8vIFRyaWdnZXIgYSBuZXcgcmVxdWVzdCBzbyB3ZSBjYW4gY29udGludWUgcmVjZWl2aW5nIGRhdGEuXG4gICAgICBkb05ld1JlcXVlc3QoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5hZGRUYWcodXJsLCByZWFkeVN0YXRlQ0IpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhbiBhcmJpdHJhcnkgc2NyaXB0IHRhZyB0byB0aGUgaWZyYW1lLlxuICAgKiBAcGFyYW0geyFzdHJpbmd9IHVybCAtIFRoZSBVUkwgZm9yIHRoZSBzY3JpcHQgdGFnIHNvdXJjZS5cbiAgICogQHBhcmFtIHshZnVuY3Rpb24oKX0gbG9hZENCIC0gQSBjYWxsYmFjayB0byBiZSB0cmlnZ2VyZWQgb25jZSB0aGUgc2NyaXB0IGhhcyBsb2FkZWQuXG4gICAqL1xuICBhZGRUYWcodXJsOiBzdHJpbmcsIGxvYWRDQjogKCkgPT4gdm9pZCkge1xuICAgIGlmIChpc05vZGVTZGsoKSkge1xuICAgICAgKHRoaXMgYXMgYW55KS5kb05vZGVMb25nUG9sbCh1cmwsIGxvYWRDQik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIGlmIHdlJ3JlIGFscmVhZHkgY2xvc2VkLCBkb24ndCBhZGQgdGhpcyBwb2xsXG4gICAgICAgICAgaWYgKCF0aGlzLnNlbmROZXdQb2xscykgcmV0dXJuO1xuICAgICAgICAgIGNvbnN0IG5ld1NjcmlwdCA9IHRoaXMubXlJRnJhbWUuZG9jLmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICAgIG5ld1NjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4gICAgICAgICAgbmV3U2NyaXB0LmFzeW5jID0gdHJ1ZTtcbiAgICAgICAgICBuZXdTY3JpcHQuc3JjID0gdXJsO1xuICAgICAgICAgIG5ld1NjcmlwdC5vbmxvYWQgPSAobmV3U2NyaXB0IGFzIGFueSkub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zdCByc3RhdGUgPSAobmV3U2NyaXB0IGFzIGFueSkucmVhZHlTdGF0ZTtcbiAgICAgICAgICAgIGlmICghcnN0YXRlIHx8IHJzdGF0ZSA9PT0gJ2xvYWRlZCcgfHwgcnN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgICAgICAgICAgIG5ld1NjcmlwdC5vbmxvYWQgPSAobmV3U2NyaXB0IGFzIGFueSkub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgaWYgKG5ld1NjcmlwdC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgbmV3U2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobmV3U2NyaXB0KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBsb2FkQ0IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIG5ld1NjcmlwdC5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgbG9nKCdMb25nLXBvbGwgc2NyaXB0IGZhaWxlZCB0byBsb2FkOiAnICsgdXJsKTtcbiAgICAgICAgICAgIHRoaXMuc2VuZE5ld1BvbGxzID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICB0aGlzLm15SUZyYW1lLmRvYy5ib2R5LmFwcGVuZENoaWxkKG5ld1NjcmlwdCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBUT0RPOiB3ZSBzaG91bGQgbWFrZSB0aGlzIGVycm9yIHZpc2libGUgc29tZWhvd1xuICAgICAgICB9XG4gICAgICB9LCBNYXRoLmZsb29yKDEpKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIGVycm9yLFxuICBsb2dXcmFwcGVyLFxuICByZXF1aXJlS2V5LFxuICBzZXRUaW1lb3V0Tm9uQmxvY2tpbmcsXG4gIHdhcm5cbn0gZnJvbSAnLi4vY29yZS91dGlsL3V0aWwnO1xuaW1wb3J0IHsgUGVyc2lzdGVudFN0b3JhZ2UgfSBmcm9tICcuLi9jb3JlL3N0b3JhZ2Uvc3RvcmFnZSc7XG5pbXBvcnQgeyBQUk9UT0NPTF9WRVJTSU9OIH0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgVHJhbnNwb3J0TWFuYWdlciB9IGZyb20gJy4vVHJhbnNwb3J0TWFuYWdlcic7XG5pbXBvcnQgeyBSZXBvSW5mbyB9IGZyb20gJy4uL2NvcmUvUmVwb0luZm8nO1xuaW1wb3J0IHsgVHJhbnNwb3J0LCBUcmFuc3BvcnRDb25zdHJ1Y3RvciB9IGZyb20gJy4vVHJhbnNwb3J0JztcblxuLy8gQWJvcnQgdXBncmFkZSBhdHRlbXB0IGlmIGl0IHRha2VzIGxvbmdlciB0aGFuIDYwcy5cbmNvbnN0IFVQR1JBREVfVElNRU9VVCA9IDYwMDAwO1xuXG4vLyBGb3Igc29tZSB0cmFuc3BvcnRzIChXZWJTb2NrZXRzKSwgd2UgbmVlZCB0byBcInZhbGlkYXRlXCIgdGhlIHRyYW5zcG9ydCBieSBleGNoYW5naW5nIGEgZmV3IHJlcXVlc3RzIGFuZCByZXNwb25zZXMuXG4vLyBJZiB3ZSBoYXZlbid0IHNlbnQgZW5vdWdoIHJlcXVlc3RzIHdpdGhpbiA1cywgd2UnbGwgc3RhcnQgc2VuZGluZyBub29wIHBpbmcgcmVxdWVzdHMuXG5jb25zdCBERUxBWV9CRUZPUkVfU0VORElOR19FWFRSQV9SRVFVRVNUUyA9IDUwMDA7XG5cbi8vIElmIHRoZSBpbml0aWFsIGRhdGEgc2VudCB0cmlnZ2VycyBhIGxvdCBvZiBiYW5kd2lkdGggKGkuZS4gaXQncyBhIGxhcmdlIHB1dCBvciBhIGxpc3RlbiBmb3IgYSBsYXJnZSBhbW91bnQgb2YgZGF0YSlcbi8vIHRoZW4gd2UgbWF5IG5vdCBiZSBhYmxlIHRvIGV4Y2hhbmdlIG91ciBwaW5nL3BvbmcgcmVxdWVzdHMgd2l0aGluIHRoZSBoZWFsdGh5IHRpbWVvdXQuICBTbyBpZiB3ZSByZWFjaCB0aGUgdGltZW91dFxuLy8gYnV0IHdlJ3ZlIHNlbnQvcmVjZWl2ZWQgZW5vdWdoIGJ5dGVzLCB3ZSBkb24ndCBjYW5jZWwgdGhlIGNvbm5lY3Rpb24uXG5jb25zdCBCWVRFU19TRU5UX0hFQUxUSFlfT1ZFUlJJREUgPSAxMCAqIDEwMjQ7XG5jb25zdCBCWVRFU19SRUNFSVZFRF9IRUFMVEhZX09WRVJSSURFID0gMTAwICogMTAyNDtcblxuY29uc3QgZW51bSBSZWFsdGltZVN0YXRlIHtcbiAgQ09OTkVDVElORyxcbiAgQ09OTkVDVEVELFxuICBESVNDT05ORUNURURcbn1cblxuY29uc3QgTUVTU0FHRV9UWVBFID0gJ3QnO1xuY29uc3QgTUVTU0FHRV9EQVRBID0gJ2QnO1xuY29uc3QgQ09OVFJPTF9TSFVURE9XTiA9ICdzJztcbmNvbnN0IENPTlRST0xfUkVTRVQgPSAncic7XG5jb25zdCBDT05UUk9MX0VSUk9SID0gJ2UnO1xuY29uc3QgQ09OVFJPTF9QT05HID0gJ28nO1xuY29uc3QgU1dJVENIX0FDSyA9ICdhJztcbmNvbnN0IEVORF9UUkFOU01JU1NJT04gPSAnbic7XG5jb25zdCBQSU5HID0gJ3AnO1xuXG5jb25zdCBTRVJWRVJfSEVMTE8gPSAnaCc7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyByZWFsLXRpbWUgY29ubmVjdGlvbiB0byB0aGUgc2VydmVyIHVzaW5nIHdoaWNoZXZlciBtZXRob2Qgd29ya3NcbiAqIGJlc3QgaW4gdGhlIGN1cnJlbnQgYnJvd3Nlci5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb24ge1xuICBjb25uZWN0aW9uQ291bnQgPSAwO1xuICBwZW5kaW5nRGF0YU1lc3NhZ2VzOiBhbnlbXSA9IFtdO1xuICBzZXNzaW9uSWQ6IHN0cmluZztcblxuICBwcml2YXRlIGNvbm5fOiBUcmFuc3BvcnQ7XG4gIHByaXZhdGUgaGVhbHRoeVRpbWVvdXRfOiBudW1iZXI7XG4gIHByaXZhdGUgaXNIZWFsdGh5XzogYm9vbGVhbjtcbiAgcHJpdmF0ZSBsb2dfOiAoLi4uYXJnczogYW55W10pID0+IHZvaWQ7XG4gIHByaXZhdGUgcHJpbWFyeVJlc3BvbnNlc1JlcXVpcmVkXzogbnVtYmVyO1xuICBwcml2YXRlIHJ4XzogVHJhbnNwb3J0O1xuICBwcml2YXRlIHNlY29uZGFyeUNvbm5fOiBUcmFuc3BvcnQ7XG4gIHByaXZhdGUgc2Vjb25kYXJ5UmVzcG9uc2VzUmVxdWlyZWRfOiBudW1iZXI7XG4gIHByaXZhdGUgc3RhdGVfID0gUmVhbHRpbWVTdGF0ZS5DT05ORUNUSU5HO1xuICBwcml2YXRlIHRyYW5zcG9ydE1hbmFnZXJfOiBUcmFuc3BvcnRNYW5hZ2VyO1xuICBwcml2YXRlIHR4XzogVHJhbnNwb3J0O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFzdHJpbmd9IGlkIC0gYW4gaWQgZm9yIHRoaXMgY29ubmVjdGlvblxuICAgKiBAcGFyYW0geyFSZXBvSW5mb30gcmVwb0luZm9fIC0gdGhlIGluZm8gZm9yIHRoZSBlbmRwb2ludCB0byBjb25uZWN0IHRvXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oT2JqZWN0KX0gb25NZXNzYWdlXyAtIHRoZSBjYWxsYmFjayB0byBiZSB0cmlnZ2VyZWQgd2hlbiBhIHNlcnZlci1wdXNoIG1lc3NhZ2UgYXJyaXZlc1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG51bWJlciwgc3RyaW5nKX0gb25SZWFkeV8gLSB0aGUgY2FsbGJhY2sgdG8gYmUgdHJpZ2dlcmVkIHdoZW4gdGhpcyBjb25uZWN0aW9uIGlzIHJlYWR5IHRvIHNlbmQgbWVzc2FnZXMuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gb25EaXNjb25uZWN0XyAtIHRoZSBjYWxsYmFjayB0byBiZSB0cmlnZ2VyZWQgd2hlbiBhIGNvbm5lY3Rpb24gd2FzIGxvc3RcbiAgICogQHBhcmFtIHtmdW5jdGlvbihzdHJpbmcpfSBvbktpbGxfIC0gdGhlIGNhbGxiYWNrIHRvIGJlIHRyaWdnZXJlZCB3aGVuIHRoaXMgY29ubmVjdGlvbiBoYXMgcGVybWFuZW50bHkgc2h1dCBkb3duLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IGxhc3RTZXNzaW9uSWQgLSBsYXN0IHNlc3Npb24gaWQgaW4gcGVyc2lzdGVudCBjb25uZWN0aW9uLiBpcyB1c2VkIHRvIGNsZWFuIHVwIG9sZCBzZXNzaW9uIGluIHJlYWwtdGltZSBzZXJ2ZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBpZDogc3RyaW5nLFxuICAgIHByaXZhdGUgcmVwb0luZm9fOiBSZXBvSW5mbyxcbiAgICBwcml2YXRlIG9uTWVzc2FnZV86IChhOiBPYmplY3QpID0+IHZvaWQsXG4gICAgcHJpdmF0ZSBvblJlYWR5XzogKGE6IG51bWJlciwgYjogc3RyaW5nKSA9PiB2b2lkLFxuICAgIHByaXZhdGUgb25EaXNjb25uZWN0XzogKCkgPT4gdm9pZCxcbiAgICBwcml2YXRlIG9uS2lsbF86IChhOiBzdHJpbmcpID0+IHZvaWQsXG4gICAgcHVibGljIGxhc3RTZXNzaW9uSWQ/OiBzdHJpbmdcbiAgKSB7XG4gICAgdGhpcy5sb2dfID0gbG9nV3JhcHBlcignYzonICsgdGhpcy5pZCArICc6Jyk7XG4gICAgdGhpcy50cmFuc3BvcnRNYW5hZ2VyXyA9IG5ldyBUcmFuc3BvcnRNYW5hZ2VyKHJlcG9JbmZvXyk7XG4gICAgdGhpcy5sb2dfKCdDb25uZWN0aW9uIGNyZWF0ZWQnKTtcbiAgICB0aGlzLnN0YXJ0XygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyBhIGNvbm5lY3Rpb24gYXR0ZW1wdFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGFydF8oKSB7XG4gICAgY29uc3QgY29ubiA9IHRoaXMudHJhbnNwb3J0TWFuYWdlcl8uaW5pdGlhbFRyYW5zcG9ydCgpO1xuICAgIHRoaXMuY29ubl8gPSBuZXcgY29ubihcbiAgICAgIHRoaXMubmV4dFRyYW5zcG9ydElkXygpLFxuICAgICAgdGhpcy5yZXBvSW5mb18sXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB0aGlzLmxhc3RTZXNzaW9uSWRcbiAgICApO1xuXG4gICAgLy8gRm9yIGNlcnRhaW4gdHJhbnNwb3J0cyAoV2ViU29ja2V0cyksIHdlIG5lZWQgdG8gc2VuZCBhbmQgcmVjZWl2ZSBzZXZlcmFsIG1lc3NhZ2VzIGJhY2sgYW5kIGZvcnRoIGJlZm9yZSB3ZVxuICAgIC8vIGNhbiBjb25zaWRlciB0aGUgdHJhbnNwb3J0IGhlYWx0aHkuXG4gICAgdGhpcy5wcmltYXJ5UmVzcG9uc2VzUmVxdWlyZWRfID0gY29ublsncmVzcG9uc2VzUmVxdWlyZWRUb0JlSGVhbHRoeSddIHx8IDA7XG5cbiAgICBjb25zdCBvbk1lc3NhZ2VSZWNlaXZlZCA9IHRoaXMuY29ublJlY2VpdmVyXyh0aGlzLmNvbm5fKTtcbiAgICBjb25zdCBvbkNvbm5lY3Rpb25Mb3N0ID0gdGhpcy5kaXNjb25uUmVjZWl2ZXJfKHRoaXMuY29ubl8pO1xuICAgIHRoaXMudHhfID0gdGhpcy5jb25uXztcbiAgICB0aGlzLnJ4XyA9IHRoaXMuY29ubl87XG4gICAgdGhpcy5zZWNvbmRhcnlDb25uXyA9IG51bGw7XG4gICAgdGhpcy5pc0hlYWx0aHlfID0gZmFsc2U7XG5cbiAgICAvKlxuICAgICAqIEZpcmVmb3ggZG9lc24ndCBsaWtlIHdoZW4gY29kZSBmcm9tIG9uZSBpZnJhbWUgdHJpZXMgdG8gY3JlYXRlIGFub3RoZXIgaWZyYW1lIGJ5IHdheSBvZiB0aGUgcGFyZW50IGZyYW1lLlxuICAgICAqIFRoaXMgY2FuIG9jY3VyIGluIHRoZSBjYXNlIG9mIGEgcmVkaXJlY3QsIGkuZS4gd2UgZ3Vlc3NlZCB3cm9uZyBvbiB3aGF0IHNlcnZlciB0byBjb25uZWN0IHRvIGFuZCByZWNlaXZlZCBhIHJlc2V0LlxuICAgICAqIFNvbWVob3csIHNldFRpbWVvdXQgc2VlbXMgdG8gbWFrZSB0aGlzIG9rLiBUaGF0IGRvZXNuJ3QgbWFrZSBzZW5zZSBmcm9tIGEgc2VjdXJpdHkgcGVyc3BlY3RpdmUsIHNpbmNlIHlvdSBzaG91bGRcbiAgICAgKiBzdGlsbCBoYXZlIHRoZSBjb250ZXh0IG9mIHlvdXIgb3JpZ2luYXRpbmcgZnJhbWUuXG4gICAgICovXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyB0aGlzLmNvbm5fIGdldHMgc2V0IHRvIG51bGwgaW4gc29tZSBvZiB0aGUgdGVzdHMuIENoZWNrIHRvIG1ha2Ugc3VyZSBpdCBzdGlsbCBleGlzdHMgYmVmb3JlIHVzaW5nIGl0XG4gICAgICB0aGlzLmNvbm5fICYmIHRoaXMuY29ubl8ub3Blbihvbk1lc3NhZ2VSZWNlaXZlZCwgb25Db25uZWN0aW9uTG9zdCk7XG4gICAgfSwgTWF0aC5mbG9vcigwKSk7XG5cbiAgICBjb25zdCBoZWFsdGh5VGltZW91dF9tcyA9IGNvbm5bJ2hlYWx0aHlUaW1lb3V0J10gfHwgMDtcbiAgICBpZiAoaGVhbHRoeVRpbWVvdXRfbXMgPiAwKSB7XG4gICAgICB0aGlzLmhlYWx0aHlUaW1lb3V0XyA9IHNldFRpbWVvdXROb25CbG9ja2luZygoKSA9PiB7XG4gICAgICAgIHRoaXMuaGVhbHRoeVRpbWVvdXRfID0gbnVsbDtcbiAgICAgICAgaWYgKCF0aGlzLmlzSGVhbHRoeV8pIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmNvbm5fICYmXG4gICAgICAgICAgICB0aGlzLmNvbm5fLmJ5dGVzUmVjZWl2ZWQgPiBCWVRFU19SRUNFSVZFRF9IRUFMVEhZX09WRVJSSURFXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ18oXG4gICAgICAgICAgICAgICdDb25uZWN0aW9uIGV4Y2VlZGVkIGhlYWx0aHkgdGltZW91dCBidXQgaGFzIHJlY2VpdmVkICcgK1xuICAgICAgICAgICAgICAgIHRoaXMuY29ubl8uYnl0ZXNSZWNlaXZlZCArXG4gICAgICAgICAgICAgICAgJyBieXRlcy4gIE1hcmtpbmcgY29ubmVjdGlvbiBoZWFsdGh5LidcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmlzSGVhbHRoeV8gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5jb25uXy5tYXJrQ29ubmVjdGlvbkhlYWx0aHkoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5jb25uXyAmJlxuICAgICAgICAgICAgdGhpcy5jb25uXy5ieXRlc1NlbnQgPiBCWVRFU19TRU5UX0hFQUxUSFlfT1ZFUlJJREVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMubG9nXyhcbiAgICAgICAgICAgICAgJ0Nvbm5lY3Rpb24gZXhjZWVkZWQgaGVhbHRoeSB0aW1lb3V0IGJ1dCBoYXMgc2VudCAnICtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5fLmJ5dGVzU2VudCArXG4gICAgICAgICAgICAgICAgJyBieXRlcy4gIExlYXZpbmcgY29ubmVjdGlvbiBhbGl2ZS4nXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgLy8gTk9URTogV2UgZG9uJ3Qgd2FudCB0byBtYXJrIGl0IGhlYWx0aHksIHNpbmNlIHdlIGhhdmUgbm8gZ3VhcmFudGVlIHRoYXQgdGhlIGJ5dGVzIGhhdmUgbWFkZSBpdCB0b1xuICAgICAgICAgICAgLy8gdGhlIHNlcnZlci5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2dfKCdDbG9zaW5nIHVuaGVhbHRoeSBjb25uZWN0aW9uIGFmdGVyIHRpbWVvdXQuJyk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBNYXRoLmZsb29yKGhlYWx0aHlUaW1lb3V0X21zKSkgYXMgYW55O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshc3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBuZXh0VHJhbnNwb3J0SWRfKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdjOicgKyB0aGlzLmlkICsgJzonICsgdGhpcy5jb25uZWN0aW9uQ291bnQrKztcbiAgfVxuXG4gIHByaXZhdGUgZGlzY29ublJlY2VpdmVyXyhjb25uKSB7XG4gICAgcmV0dXJuIGV2ZXJDb25uZWN0ZWQgPT4ge1xuICAgICAgaWYgKGNvbm4gPT09IHRoaXMuY29ubl8pIHtcbiAgICAgICAgdGhpcy5vbkNvbm5lY3Rpb25Mb3N0XyhldmVyQ29ubmVjdGVkKTtcbiAgICAgIH0gZWxzZSBpZiAoY29ubiA9PT0gdGhpcy5zZWNvbmRhcnlDb25uXykge1xuICAgICAgICB0aGlzLmxvZ18oJ1NlY29uZGFyeSBjb25uZWN0aW9uIGxvc3QuJyk7XG4gICAgICAgIHRoaXMub25TZWNvbmRhcnlDb25uZWN0aW9uTG9zdF8oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubG9nXygnY2xvc2luZyBhbiBvbGQgY29ubmVjdGlvbicpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGNvbm5SZWNlaXZlcl8oY29ubjogVHJhbnNwb3J0KSB7XG4gICAgcmV0dXJuIChtZXNzYWdlOiBvYmplY3QpID0+IHtcbiAgICAgIGlmICh0aGlzLnN0YXRlXyAhPSBSZWFsdGltZVN0YXRlLkRJU0NPTk5FQ1RFRCkge1xuICAgICAgICBpZiAoY29ubiA9PT0gdGhpcy5yeF8pIHtcbiAgICAgICAgICB0aGlzLm9uUHJpbWFyeU1lc3NhZ2VSZWNlaXZlZF8obWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoY29ubiA9PT0gdGhpcy5zZWNvbmRhcnlDb25uXykge1xuICAgICAgICAgIHRoaXMub25TZWNvbmRhcnlNZXNzYWdlUmVjZWl2ZWRfKG1lc3NhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubG9nXygnbWVzc2FnZSBvbiBvbGQgY29ubmVjdGlvbicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YU1zZyBBbiBhcmJpdHJhcnkgZGF0YSBtZXNzYWdlIHRvIGJlIHNlbnQgdG8gdGhlIHNlcnZlclxuICAgKi9cbiAgc2VuZFJlcXVlc3QoZGF0YU1zZzogb2JqZWN0KSB7XG4gICAgLy8gd3JhcCBpbiBhIGRhdGEgbWVzc2FnZSBlbnZlbG9wZSBhbmQgc2VuZCBpdCBvblxuICAgIGNvbnN0IG1zZyA9IHsgdDogJ2QnLCBkOiBkYXRhTXNnIH07XG4gICAgdGhpcy5zZW5kRGF0YV8obXNnKTtcbiAgfVxuXG4gIHRyeUNsZWFudXBDb25uZWN0aW9uKCkge1xuICAgIGlmICh0aGlzLnR4XyA9PT0gdGhpcy5zZWNvbmRhcnlDb25uXyAmJiB0aGlzLnJ4XyA9PT0gdGhpcy5zZWNvbmRhcnlDb25uXykge1xuICAgICAgdGhpcy5sb2dfKFxuICAgICAgICAnY2xlYW5pbmcgdXAgYW5kIHByb21vdGluZyBhIGNvbm5lY3Rpb246ICcgKyB0aGlzLnNlY29uZGFyeUNvbm5fLmNvbm5JZFxuICAgICAgKTtcbiAgICAgIHRoaXMuY29ubl8gPSB0aGlzLnNlY29uZGFyeUNvbm5fO1xuICAgICAgdGhpcy5zZWNvbmRhcnlDb25uXyA9IG51bGw7XG4gICAgICAvLyB0aGUgc2VydmVyIHdpbGwgc2h1dGRvd24gdGhlIG9sZCBjb25uZWN0aW9uXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBvblNlY29uZGFyeUNvbnRyb2xfKGNvbnRyb2xEYXRhOiB7IFtrOiBzdHJpbmddOiBhbnkgfSkge1xuICAgIGlmIChNRVNTQUdFX1RZUEUgaW4gY29udHJvbERhdGEpIHtcbiAgICAgIGNvbnN0IGNtZCA9IGNvbnRyb2xEYXRhW01FU1NBR0VfVFlQRV0gYXMgc3RyaW5nO1xuICAgICAgaWYgKGNtZCA9PT0gU1dJVENIX0FDSykge1xuICAgICAgICB0aGlzLnVwZ3JhZGVJZlNlY29uZGFyeUhlYWx0aHlfKCk7XG4gICAgICB9IGVsc2UgaWYgKGNtZCA9PT0gQ09OVFJPTF9SRVNFVCkge1xuICAgICAgICAvLyBNb3N0IGxpa2VseSB0aGUgc2Vzc2lvbiB3YXNuJ3QgdmFsaWQuIEFiYW5kb24gdGhlIHN3aXRjaCBhdHRlbXB0XG4gICAgICAgIHRoaXMubG9nXygnR290IGEgcmVzZXQgb24gc2Vjb25kYXJ5LCBjbG9zaW5nIGl0Jyk7XG4gICAgICAgIHRoaXMuc2Vjb25kYXJ5Q29ubl8uY2xvc2UoKTtcbiAgICAgICAgLy8gSWYgd2Ugd2VyZSBhbHJlYWR5IHVzaW5nIHRoaXMgY29ubmVjdGlvbiBmb3Igc29tZXRoaW5nLCB0aGFuIHdlIG5lZWQgdG8gZnVsbHkgY2xvc2VcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRoaXMudHhfID09PSB0aGlzLnNlY29uZGFyeUNvbm5fIHx8XG4gICAgICAgICAgdGhpcy5yeF8gPT09IHRoaXMuc2Vjb25kYXJ5Q29ubl9cbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNtZCA9PT0gQ09OVFJPTF9QT05HKSB7XG4gICAgICAgIHRoaXMubG9nXygnZ290IHBvbmcgb24gc2Vjb25kYXJ5LicpO1xuICAgICAgICB0aGlzLnNlY29uZGFyeVJlc3BvbnNlc1JlcXVpcmVkXy0tO1xuICAgICAgICB0aGlzLnVwZ3JhZGVJZlNlY29uZGFyeUhlYWx0aHlfKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBvblNlY29uZGFyeU1lc3NhZ2VSZWNlaXZlZF8ocGFyc2VkRGF0YTogb2JqZWN0KSB7XG4gICAgY29uc3QgbGF5ZXI6IHN0cmluZyA9IHJlcXVpcmVLZXkoJ3QnLCBwYXJzZWREYXRhKTtcbiAgICBjb25zdCBkYXRhOiBhbnkgPSByZXF1aXJlS2V5KCdkJywgcGFyc2VkRGF0YSk7XG4gICAgaWYgKGxheWVyID09ICdjJykge1xuICAgICAgdGhpcy5vblNlY29uZGFyeUNvbnRyb2xfKGRhdGEpO1xuICAgIH0gZWxzZSBpZiAobGF5ZXIgPT0gJ2QnKSB7XG4gICAgICAvLyBnb3QgYSBkYXRhIG1lc3NhZ2UsIGJ1dCB3ZSdyZSBzdGlsbCBzZWNvbmQgY29ubmVjdGlvbi4gTmVlZCB0byBidWZmZXIgaXQgdXBcbiAgICAgIHRoaXMucGVuZGluZ0RhdGFNZXNzYWdlcy5wdXNoKGRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gcHJvdG9jb2wgbGF5ZXI6ICcgKyBsYXllcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGdyYWRlSWZTZWNvbmRhcnlIZWFsdGh5XygpIHtcbiAgICBpZiAodGhpcy5zZWNvbmRhcnlSZXNwb25zZXNSZXF1aXJlZF8gPD0gMCkge1xuICAgICAgdGhpcy5sb2dfKCdTZWNvbmRhcnkgY29ubmVjdGlvbiBpcyBoZWFsdGh5LicpO1xuICAgICAgdGhpcy5pc0hlYWx0aHlfID0gdHJ1ZTtcbiAgICAgIHRoaXMuc2Vjb25kYXJ5Q29ubl8ubWFya0Nvbm5lY3Rpb25IZWFsdGh5KCk7XG4gICAgICB0aGlzLnByb2NlZWRXaXRoVXBncmFkZV8oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2VuZCBhIHBpbmcgdG8gbWFrZSBzdXJlIHRoZSBjb25uZWN0aW9uIGlzIGhlYWx0aHkuXG4gICAgICB0aGlzLmxvZ18oJ3NlbmRpbmcgcGluZyBvbiBzZWNvbmRhcnkuJyk7XG4gICAgICB0aGlzLnNlY29uZGFyeUNvbm5fLnNlbmQoeyB0OiAnYycsIGQ6IHsgdDogUElORywgZDoge30gfSB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHByb2NlZWRXaXRoVXBncmFkZV8oKSB7XG4gICAgLy8gdGVsbCB0aGlzIGNvbm5lY3Rpb24gdG8gY29uc2lkZXIgaXRzZWxmIG9wZW5cbiAgICB0aGlzLnNlY29uZGFyeUNvbm5fLnN0YXJ0KCk7XG4gICAgLy8gc2VuZCBhY2tcbiAgICB0aGlzLmxvZ18oJ3NlbmRpbmcgY2xpZW50IGFjayBvbiBzZWNvbmRhcnknKTtcbiAgICB0aGlzLnNlY29uZGFyeUNvbm5fLnNlbmQoeyB0OiAnYycsIGQ6IHsgdDogU1dJVENIX0FDSywgZDoge30gfSB9KTtcblxuICAgIC8vIHNlbmQgZW5kIHBhY2tldCBvbiBwcmltYXJ5IHRyYW5zcG9ydCwgc3dpdGNoIHRvIHNlbmRpbmcgb24gdGhpcyBvbmVcbiAgICAvLyBjYW4gcmVjZWl2ZSBvbiB0aGlzIG9uZSwgYnVmZmVyIHJlc3BvbnNlcyB1bnRpbCBlbmQgcmVjZWl2ZWQgb24gcHJpbWFyeSB0cmFuc3BvcnRcbiAgICB0aGlzLmxvZ18oJ0VuZGluZyB0cmFuc21pc3Npb24gb24gcHJpbWFyeScpO1xuICAgIHRoaXMuY29ubl8uc2VuZCh7IHQ6ICdjJywgZDogeyB0OiBFTkRfVFJBTlNNSVNTSU9OLCBkOiB7fSB9IH0pO1xuICAgIHRoaXMudHhfID0gdGhpcy5zZWNvbmRhcnlDb25uXztcblxuICAgIHRoaXMudHJ5Q2xlYW51cENvbm5lY3Rpb24oKTtcbiAgfVxuXG4gIHByaXZhdGUgb25QcmltYXJ5TWVzc2FnZVJlY2VpdmVkXyhwYXJzZWREYXRhOiB7IFtrOiBzdHJpbmddOiBhbnkgfSkge1xuICAgIC8vIE11c3QgcmVmZXIgdG8gcGFyc2VkRGF0YSBwcm9wZXJ0aWVzIGluIHF1b3Rlcywgc28gY2xvc3VyZSBkb2Vzbid0IHRvdWNoIHRoZW0uXG4gICAgY29uc3QgbGF5ZXI6IHN0cmluZyA9IHJlcXVpcmVLZXkoJ3QnLCBwYXJzZWREYXRhKTtcbiAgICBjb25zdCBkYXRhOiBhbnkgPSByZXF1aXJlS2V5KCdkJywgcGFyc2VkRGF0YSk7XG4gICAgaWYgKGxheWVyID09ICdjJykge1xuICAgICAgdGhpcy5vbkNvbnRyb2xfKGRhdGEpO1xuICAgIH0gZWxzZSBpZiAobGF5ZXIgPT0gJ2QnKSB7XG4gICAgICB0aGlzLm9uRGF0YU1lc3NhZ2VfKGRhdGEpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgb25EYXRhTWVzc2FnZV8obWVzc2FnZTogYW55KSB7XG4gICAgdGhpcy5vblByaW1hcnlSZXNwb25zZV8oKTtcblxuICAgIC8vIFdlIGRvbid0IGRvIGFueXRoaW5nIHdpdGggZGF0YSBtZXNzYWdlcywganVzdCBraWNrIHRoZW0gdXAgYSBsZXZlbFxuICAgIHRoaXMub25NZXNzYWdlXyhtZXNzYWdlKTtcbiAgfVxuXG4gIHByaXZhdGUgb25QcmltYXJ5UmVzcG9uc2VfKCkge1xuICAgIGlmICghdGhpcy5pc0hlYWx0aHlfKSB7XG4gICAgICB0aGlzLnByaW1hcnlSZXNwb25zZXNSZXF1aXJlZF8tLTtcbiAgICAgIGlmICh0aGlzLnByaW1hcnlSZXNwb25zZXNSZXF1aXJlZF8gPD0gMCkge1xuICAgICAgICB0aGlzLmxvZ18oJ1ByaW1hcnkgY29ubmVjdGlvbiBpcyBoZWFsdGh5LicpO1xuICAgICAgICB0aGlzLmlzSGVhbHRoeV8gPSB0cnVlO1xuICAgICAgICB0aGlzLmNvbm5fLm1hcmtDb25uZWN0aW9uSGVhbHRoeSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgb25Db250cm9sXyhjb250cm9sRGF0YTogeyBbazogc3RyaW5nXTogYW55IH0pIHtcbiAgICBjb25zdCBjbWQ6IHN0cmluZyA9IHJlcXVpcmVLZXkoTUVTU0FHRV9UWVBFLCBjb250cm9sRGF0YSk7XG4gICAgaWYgKE1FU1NBR0VfREFUQSBpbiBjb250cm9sRGF0YSkge1xuICAgICAgY29uc3QgcGF5bG9hZCA9IGNvbnRyb2xEYXRhW01FU1NBR0VfREFUQV07XG4gICAgICBpZiAoY21kID09PSBTRVJWRVJfSEVMTE8pIHtcbiAgICAgICAgdGhpcy5vbkhhbmRzaGFrZV8ocGF5bG9hZCk7XG4gICAgICB9IGVsc2UgaWYgKGNtZCA9PT0gRU5EX1RSQU5TTUlTU0lPTikge1xuICAgICAgICB0aGlzLmxvZ18oJ3JlY3ZkIGVuZCB0cmFuc21pc3Npb24gb24gcHJpbWFyeScpO1xuICAgICAgICB0aGlzLnJ4XyA9IHRoaXMuc2Vjb25kYXJ5Q29ubl87XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wZW5kaW5nRGF0YU1lc3NhZ2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgdGhpcy5vbkRhdGFNZXNzYWdlXyh0aGlzLnBlbmRpbmdEYXRhTWVzc2FnZXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGVuZGluZ0RhdGFNZXNzYWdlcyA9IFtdO1xuICAgICAgICB0aGlzLnRyeUNsZWFudXBDb25uZWN0aW9uKCk7XG4gICAgICB9IGVsc2UgaWYgKGNtZCA9PT0gQ09OVFJPTF9TSFVURE9XTikge1xuICAgICAgICAvLyBUaGlzIHdhcyBwcmV2aW91c2x5IHRoZSAnb25LaWxsJyBjYWxsYmFjayBwYXNzZWQgdG8gdGhlIGxvd2VyLWxldmVsIGNvbm5lY3Rpb25cbiAgICAgICAgLy8gcGF5bG9hZCBpbiB0aGlzIGNhc2UgaXMgdGhlIHJlYXNvbiBmb3IgdGhlIHNodXRkb3duLiBHZW5lcmFsbHkgYSBodW1hbi1yZWFkYWJsZSBlcnJvclxuICAgICAgICB0aGlzLm9uQ29ubmVjdGlvblNodXRkb3duXyhwYXlsb2FkKTtcbiAgICAgIH0gZWxzZSBpZiAoY21kID09PSBDT05UUk9MX1JFU0VUKSB7XG4gICAgICAgIC8vIHBheWxvYWQgaW4gdGhpcyBjYXNlIGlzIHRoZSBob3N0IHdlIHNob3VsZCBjb250YWN0XG4gICAgICAgIHRoaXMub25SZXNldF8ocGF5bG9hZCk7XG4gICAgICB9IGVsc2UgaWYgKGNtZCA9PT0gQ09OVFJPTF9FUlJPUikge1xuICAgICAgICBlcnJvcignU2VydmVyIEVycm9yOiAnICsgcGF5bG9hZCk7XG4gICAgICB9IGVsc2UgaWYgKGNtZCA9PT0gQ09OVFJPTF9QT05HKSB7XG4gICAgICAgIHRoaXMubG9nXygnZ290IHBvbmcgb24gcHJpbWFyeS4nKTtcbiAgICAgICAgdGhpcy5vblByaW1hcnlSZXNwb25zZV8oKTtcbiAgICAgICAgdGhpcy5zZW5kUGluZ09uUHJpbWFyeUlmTmVjZXNzYXJ5XygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXJyb3IoJ1Vua25vd24gY29udHJvbCBwYWNrZXQgY29tbWFuZDogJyArIGNtZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kc2hha2UgVGhlIGhhbmRzaGFrZSBkYXRhIHJldHVybmVkIGZyb20gdGhlIHNlcnZlclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBvbkhhbmRzaGFrZV8oaGFuZHNoYWtlOiB7XG4gICAgdHM6IG51bWJlcjtcbiAgICB2OiBzdHJpbmc7XG4gICAgaDogc3RyaW5nO1xuICAgIHM6IHN0cmluZztcbiAgfSkge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IGhhbmRzaGFrZS50cztcbiAgICBjb25zdCB2ZXJzaW9uID0gaGFuZHNoYWtlLnY7XG4gICAgY29uc3QgaG9zdCA9IGhhbmRzaGFrZS5oO1xuICAgIHRoaXMuc2Vzc2lvbklkID0gaGFuZHNoYWtlLnM7XG4gICAgdGhpcy5yZXBvSW5mb18udXBkYXRlSG9zdChob3N0KTtcbiAgICAvLyBpZiB3ZSd2ZSBhbHJlYWR5IGNsb3NlZCB0aGUgY29ubmVjdGlvbiwgdGhlbiBkb24ndCBib3RoZXIgdHJ5aW5nIHRvIHByb2dyZXNzIGZ1cnRoZXJcbiAgICBpZiAodGhpcy5zdGF0ZV8gPT0gUmVhbHRpbWVTdGF0ZS5DT05ORUNUSU5HKSB7XG4gICAgICB0aGlzLmNvbm5fLnN0YXJ0KCk7XG4gICAgICB0aGlzLm9uQ29ubmVjdGlvbkVzdGFibGlzaGVkXyh0aGlzLmNvbm5fLCB0aW1lc3RhbXApO1xuICAgICAgaWYgKFBST1RPQ09MX1ZFUlNJT04gIT09IHZlcnNpb24pIHtcbiAgICAgICAgd2FybignUHJvdG9jb2wgdmVyc2lvbiBtaXNtYXRjaCBkZXRlY3RlZCcpO1xuICAgICAgfVxuICAgICAgLy8gVE9ETzogZG8gd2Ugd2FudCB0byB1cGdyYWRlPyB3aGVuPyBtYXliZSBhIGRlbGF5P1xuICAgICAgdGhpcy50cnlTdGFydFVwZ3JhZGVfKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB0cnlTdGFydFVwZ3JhZGVfKCkge1xuICAgIGNvbnN0IGNvbm4gPSB0aGlzLnRyYW5zcG9ydE1hbmFnZXJfLnVwZ3JhZGVUcmFuc3BvcnQoKTtcbiAgICBpZiAoY29ubikge1xuICAgICAgdGhpcy5zdGFydFVwZ3JhZGVfKGNvbm4pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3RhcnRVcGdyYWRlXyhjb25uOiBUcmFuc3BvcnRDb25zdHJ1Y3Rvcikge1xuICAgIHRoaXMuc2Vjb25kYXJ5Q29ubl8gPSBuZXcgY29ubihcbiAgICAgIHRoaXMubmV4dFRyYW5zcG9ydElkXygpLFxuICAgICAgdGhpcy5yZXBvSW5mb18sXG4gICAgICB0aGlzLnNlc3Npb25JZFxuICAgICk7XG4gICAgLy8gRm9yIGNlcnRhaW4gdHJhbnNwb3J0cyAoV2ViU29ja2V0cyksIHdlIG5lZWQgdG8gc2VuZCBhbmQgcmVjZWl2ZSBzZXZlcmFsIG1lc3NhZ2VzIGJhY2sgYW5kIGZvcnRoIGJlZm9yZSB3ZVxuICAgIC8vIGNhbiBjb25zaWRlciB0aGUgdHJhbnNwb3J0IGhlYWx0aHkuXG4gICAgdGhpcy5zZWNvbmRhcnlSZXNwb25zZXNSZXF1aXJlZF8gPVxuICAgICAgY29ublsncmVzcG9uc2VzUmVxdWlyZWRUb0JlSGVhbHRoeSddIHx8IDA7XG5cbiAgICBjb25zdCBvbk1lc3NhZ2UgPSB0aGlzLmNvbm5SZWNlaXZlcl8odGhpcy5zZWNvbmRhcnlDb25uXyk7XG4gICAgY29uc3Qgb25EaXNjb25uZWN0ID0gdGhpcy5kaXNjb25uUmVjZWl2ZXJfKHRoaXMuc2Vjb25kYXJ5Q29ubl8pO1xuICAgIHRoaXMuc2Vjb25kYXJ5Q29ubl8ub3Blbihvbk1lc3NhZ2UsIG9uRGlzY29ubmVjdCk7XG5cbiAgICAvLyBJZiB3ZSBoYXZlbid0IHN1Y2Nlc3NmdWxseSB1cGdyYWRlZCBhZnRlciBVUEdSQURFX1RJTUVPVVQsIGdpdmUgdXAgYW5kIGtpbGwgdGhlIHNlY29uZGFyeS5cbiAgICBzZXRUaW1lb3V0Tm9uQmxvY2tpbmcoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuc2Vjb25kYXJ5Q29ubl8pIHtcbiAgICAgICAgdGhpcy5sb2dfKCdUaW1lZCBvdXQgdHJ5aW5nIHRvIHVwZ3JhZGUuJyk7XG4gICAgICAgIHRoaXMuc2Vjb25kYXJ5Q29ubl8uY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9LCBNYXRoLmZsb29yKFVQR1JBREVfVElNRU9VVCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBvblJlc2V0Xyhob3N0OiBzdHJpbmcpIHtcbiAgICB0aGlzLmxvZ18oJ1Jlc2V0IHBhY2tldCByZWNlaXZlZC4gIE5ldyBob3N0OiAnICsgaG9zdCk7XG4gICAgdGhpcy5yZXBvSW5mb18udXBkYXRlSG9zdChob3N0KTtcbiAgICAvLyBUT0RPOiBpZiB3ZSdyZSBhbHJlYWR5IFwiY29ubmVjdGVkXCIsIHdlIG5lZWQgdG8gdHJpZ2dlciBhIGRpc2Nvbm5lY3QgYXQgdGhlIG5leHQgbGF5ZXIgdXAuXG4gICAgLy8gV2UgZG9uJ3QgY3VycmVudGx5IHN1cHBvcnQgcmVzZXRzIGFmdGVyIHRoZSBjb25uZWN0aW9uIGhhcyBhbHJlYWR5IGJlZW4gZXN0YWJsaXNoZWRcbiAgICBpZiAodGhpcy5zdGF0ZV8gPT09IFJlYWx0aW1lU3RhdGUuQ09OTkVDVEVEKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENsb3NlIHdoYXRldmVyIGNvbm5lY3Rpb25zIHdlIGhhdmUgb3BlbiBhbmQgc3RhcnQgYWdhaW4uXG4gICAgICB0aGlzLmNsb3NlQ29ubmVjdGlvbnNfKCk7XG4gICAgICB0aGlzLnN0YXJ0XygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgb25Db25uZWN0aW9uRXN0YWJsaXNoZWRfKGNvbm46IFRyYW5zcG9ydCwgdGltZXN0YW1wOiBudW1iZXIpIHtcbiAgICB0aGlzLmxvZ18oJ1JlYWx0aW1lIGNvbm5lY3Rpb24gZXN0YWJsaXNoZWQuJyk7XG4gICAgdGhpcy5jb25uXyA9IGNvbm47XG4gICAgdGhpcy5zdGF0ZV8gPSBSZWFsdGltZVN0YXRlLkNPTk5FQ1RFRDtcblxuICAgIGlmICh0aGlzLm9uUmVhZHlfKSB7XG4gICAgICB0aGlzLm9uUmVhZHlfKHRpbWVzdGFtcCwgdGhpcy5zZXNzaW9uSWQpO1xuICAgICAgdGhpcy5vblJlYWR5XyA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gSWYgYWZ0ZXIgNSBzZWNvbmRzIHdlIGhhdmVuJ3Qgc2VudCBlbm91Z2ggcmVxdWVzdHMgdG8gdGhlIHNlcnZlciB0byBnZXQgdGhlIGNvbm5lY3Rpb24gaGVhbHRoeSxcbiAgICAvLyBzZW5kIHNvbWUgcGluZ3MuXG4gICAgaWYgKHRoaXMucHJpbWFyeVJlc3BvbnNlc1JlcXVpcmVkXyA9PT0gMCkge1xuICAgICAgdGhpcy5sb2dfKCdQcmltYXJ5IGNvbm5lY3Rpb24gaXMgaGVhbHRoeS4nKTtcbiAgICAgIHRoaXMuaXNIZWFsdGh5XyA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFRpbWVvdXROb25CbG9ja2luZygoKSA9PiB7XG4gICAgICAgIHRoaXMuc2VuZFBpbmdPblByaW1hcnlJZk5lY2Vzc2FyeV8oKTtcbiAgICAgIH0sIE1hdGguZmxvb3IoREVMQVlfQkVGT1JFX1NFTkRJTkdfRVhUUkFfUkVRVUVTVFMpKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNlbmRQaW5nT25QcmltYXJ5SWZOZWNlc3NhcnlfKCkge1xuICAgIC8vIElmIHRoZSBjb25uZWN0aW9uIGlzbid0IGNvbnNpZGVyZWQgaGVhbHRoeSB5ZXQsIHdlJ2xsIHNlbmQgYSBub29wIHBpbmcgcGFja2V0IHJlcXVlc3QuXG4gICAgaWYgKCF0aGlzLmlzSGVhbHRoeV8gJiYgdGhpcy5zdGF0ZV8gPT09IFJlYWx0aW1lU3RhdGUuQ09OTkVDVEVEKSB7XG4gICAgICB0aGlzLmxvZ18oJ3NlbmRpbmcgcGluZyBvbiBwcmltYXJ5LicpO1xuICAgICAgdGhpcy5zZW5kRGF0YV8oeyB0OiAnYycsIGQ6IHsgdDogUElORywgZDoge30gfSB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG9uU2Vjb25kYXJ5Q29ubmVjdGlvbkxvc3RfKCkge1xuICAgIGNvbnN0IGNvbm4gPSB0aGlzLnNlY29uZGFyeUNvbm5fO1xuICAgIHRoaXMuc2Vjb25kYXJ5Q29ubl8gPSBudWxsO1xuICAgIGlmICh0aGlzLnR4XyA9PT0gY29ubiB8fCB0aGlzLnJ4XyA9PT0gY29ubikge1xuICAgICAgLy8gd2UgYXJlIHJlbHlpbmcgb24gdGhpcyBjb25uZWN0aW9uIGFscmVhZHkgaW4gc29tZSBjYXBhY2l0eS4gVGhlcmVmb3JlLCBhIGZhaWx1cmUgaXMgcmVhbFxuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGV2ZXJDb25uZWN0ZWQgV2hldGhlciBvciBub3QgdGhlIGNvbm5lY3Rpb24gZXZlciByZWFjaGVkIGEgc2VydmVyLiBVc2VkIHRvIGRldGVybWluZSBpZlxuICAgKiB3ZSBzaG91bGQgZmx1c2ggdGhlIGhvc3QgY2FjaGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgb25Db25uZWN0aW9uTG9zdF8oZXZlckNvbm5lY3RlZDogYm9vbGVhbikge1xuICAgIHRoaXMuY29ubl8gPSBudWxsO1xuXG4gICAgLy8gTk9URTogSUYgeW91J3JlIHNlZWluZyBhIEZpcmVmb3ggZXJyb3IgZm9yIHRoaXMgbGluZSwgSSB0aGluayBpdCBtaWdodCBiZSBiZWNhdXNlIGl0J3MgZ2V0dGluZ1xuICAgIC8vIGNhbGxlZCBvbiB3aW5kb3cgY2xvc2UgYW5kIFJlYWx0aW1lU3RhdGUuQ09OTkVDVElORyBpcyBubyBsb25nZXIgZGVmaW5lZC4gIEp1c3QgYSBndWVzcy5cbiAgICBpZiAoIWV2ZXJDb25uZWN0ZWQgJiYgdGhpcy5zdGF0ZV8gPT09IFJlYWx0aW1lU3RhdGUuQ09OTkVDVElORykge1xuICAgICAgdGhpcy5sb2dfKCdSZWFsdGltZSBjb25uZWN0aW9uIGZhaWxlZC4nKTtcbiAgICAgIC8vIFNpbmNlIHdlIGZhaWxlZCB0byBjb25uZWN0IGF0IGFsbCwgY2xlYXIgYW55IGNhY2hlZCBlbnRyeSBmb3IgdGhpcyBuYW1lc3BhY2UgaW4gY2FzZSB0aGUgbWFjaGluZSB3ZW50IGF3YXlcbiAgICAgIGlmICh0aGlzLnJlcG9JbmZvXy5pc0NhY2hlYWJsZUhvc3QoKSkge1xuICAgICAgICBQZXJzaXN0ZW50U3RvcmFnZS5yZW1vdmUoJ2hvc3Q6JyArIHRoaXMucmVwb0luZm9fLmhvc3QpO1xuICAgICAgICAvLyByZXNldCB0aGUgaW50ZXJuYWwgaG9zdCB0byB3aGF0IHdlIHdvdWxkIHNob3cgdGhlIHVzZXIsIGkuZS4gPG5zPi5maXJlYmFzZWlvLmNvbVxuICAgICAgICB0aGlzLnJlcG9JbmZvXy5pbnRlcm5hbEhvc3QgPSB0aGlzLnJlcG9JbmZvXy5ob3N0O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZV8gPT09IFJlYWx0aW1lU3RhdGUuQ09OTkVDVEVEKSB7XG4gICAgICB0aGlzLmxvZ18oJ1JlYWx0aW1lIGNvbm5lY3Rpb24gbG9zdC4nKTtcbiAgICB9XG5cbiAgICB0aGlzLmNsb3NlKCk7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlYXNvblxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBvbkNvbm5lY3Rpb25TaHV0ZG93bl8ocmVhc29uOiBzdHJpbmcpIHtcbiAgICB0aGlzLmxvZ18oJ0Nvbm5lY3Rpb24gc2h1dGRvd24gY29tbWFuZCByZWNlaXZlZC4gU2h1dHRpbmcgZG93bi4uLicpO1xuXG4gICAgaWYgKHRoaXMub25LaWxsXykge1xuICAgICAgdGhpcy5vbktpbGxfKHJlYXNvbik7XG4gICAgICB0aGlzLm9uS2lsbF8gPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFdlIGludGVudGlvbmFsbHkgZG9uJ3Qgd2FudCB0byBmaXJlIG9uRGlzY29ubmVjdCAoa2lsbCBpcyBhIGRpZmZlcmVudCBjYXNlKSxcbiAgICAvLyBzbyBjbGVhciB0aGUgY2FsbGJhY2suXG4gICAgdGhpcy5vbkRpc2Nvbm5lY3RfID0gbnVsbDtcblxuICAgIHRoaXMuY2xvc2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2VuZERhdGFfKGRhdGE6IG9iamVjdCkge1xuICAgIGlmICh0aGlzLnN0YXRlXyAhPT0gUmVhbHRpbWVTdGF0ZS5DT05ORUNURUQpIHtcbiAgICAgIHRocm93ICdDb25uZWN0aW9uIGlzIG5vdCBjb25uZWN0ZWQnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnR4Xy5zZW5kKGRhdGEpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgdGhpcyBjb25uZWN0aW9uLCBjYWxsaW5nIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja3NcbiAgICovXG4gIGNsb3NlKCkge1xuICAgIGlmICh0aGlzLnN0YXRlXyAhPT0gUmVhbHRpbWVTdGF0ZS5ESVNDT05ORUNURUQpIHtcbiAgICAgIHRoaXMubG9nXygnQ2xvc2luZyByZWFsdGltZSBjb25uZWN0aW9uLicpO1xuICAgICAgdGhpcy5zdGF0ZV8gPSBSZWFsdGltZVN0YXRlLkRJU0NPTk5FQ1RFRDtcblxuICAgICAgdGhpcy5jbG9zZUNvbm5lY3Rpb25zXygpO1xuXG4gICAgICBpZiAodGhpcy5vbkRpc2Nvbm5lY3RfKSB7XG4gICAgICAgIHRoaXMub25EaXNjb25uZWN0XygpO1xuICAgICAgICB0aGlzLm9uRGlzY29ubmVjdF8gPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBjbG9zZUNvbm5lY3Rpb25zXygpIHtcbiAgICB0aGlzLmxvZ18oJ1NodXR0aW5nIGRvd24gYWxsIGNvbm5lY3Rpb25zJyk7XG4gICAgaWYgKHRoaXMuY29ubl8pIHtcbiAgICAgIHRoaXMuY29ubl8uY2xvc2UoKTtcbiAgICAgIHRoaXMuY29ubl8gPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNlY29uZGFyeUNvbm5fKSB7XG4gICAgICB0aGlzLnNlY29uZGFyeUNvbm5fLmNsb3NlKCk7XG4gICAgICB0aGlzLnNlY29uZGFyeUNvbm5fID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5oZWFsdGh5VGltZW91dF8pIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhlYWx0aHlUaW1lb3V0Xyk7XG4gICAgICB0aGlzLmhlYWx0aHlUaW1lb3V0XyA9IG51bGw7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5leHBvcnQgY29uc3QgUFJPVE9DT0xfVkVSU0lPTiA9ICc1JztcblxuZXhwb3J0IGNvbnN0IFZFUlNJT05fUEFSQU0gPSAndic7XG5cbmV4cG9ydCBjb25zdCBUUkFOU1BPUlRfU0VTU0lPTl9QQVJBTSA9ICdzJztcblxuZXhwb3J0IGNvbnN0IFJFRkVSRVJfUEFSQU0gPSAncic7XG5cbmV4cG9ydCBjb25zdCBGT1JHRV9SRUYgPSAnZic7XG5cbmV4cG9ydCBjb25zdCBGT1JHRV9ET01BSU4gPSAnZmlyZWJhc2Vpby5jb20nO1xuXG5leHBvcnQgY29uc3QgTEFTVF9TRVNTSU9OX1BBUkFNID0gJ2xzJztcblxuZXhwb3J0IGNvbnN0IFdFQlNPQ0tFVCA9ICd3ZWJzb2NrZXQnO1xuXG5leHBvcnQgY29uc3QgTE9OR19QT0xMSU5HID0gJ2xvbmdfcG9sbGluZyc7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBCcm93c2VyUG9sbENvbm5lY3Rpb24gfSBmcm9tICcuL0Jyb3dzZXJQb2xsQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBXZWJTb2NrZXRDb25uZWN0aW9uIH0gZnJvbSAnLi9XZWJTb2NrZXRDb25uZWN0aW9uJztcbmltcG9ydCB7IHdhcm4sIGVhY2ggfSBmcm9tICcuLi9jb3JlL3V0aWwvdXRpbCc7XG5pbXBvcnQgeyBUcmFuc3BvcnRDb25zdHJ1Y3RvciB9IGZyb20gJy4vVHJhbnNwb3J0JztcbmltcG9ydCB7IFJlcG9JbmZvIH0gZnJvbSAnLi4vY29yZS9SZXBvSW5mbyc7XG5cbi8qKlxuICogQ3VycmVudGx5IHNpbXBsaXN0aWMsIHRoaXMgY2xhc3MgbWFuYWdlcyB3aGF0IHRyYW5zcG9ydCBhIENvbm5lY3Rpb24gc2hvdWxkIHVzZSBhdCB2YXJpb3VzIHN0YWdlcyBvZiBpdHNcbiAqIGxpZmVjeWNsZS5cbiAqXG4gKiBJdCBzdGFydHMgd2l0aCBsb25ncG9sbGluZyBpbiBhIGJyb3dzZXIsIGFuZCBodHRwcG9sbGluZyBvbiBub2RlLiBJdCB0aGVuIHVwZ3JhZGVzIHRvIHdlYnNvY2tldHMgaWZcbiAqIHRoZXkgYXJlIGF2YWlsYWJsZS5cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgY2xhc3MgVHJhbnNwb3J0TWFuYWdlciB7XG4gIHByaXZhdGUgdHJhbnNwb3J0c186IFRyYW5zcG9ydENvbnN0cnVjdG9yW107XG5cbiAgLyoqXG4gICAqIEBjb25zdFxuICAgKiBAdHlwZSB7IUFycmF5LjxmdW5jdGlvbihuZXc6VHJhbnNwb3J0LCBzdHJpbmcsIFJlcG9JbmZvLCBzdHJpbmc9KT59XG4gICAqL1xuICBzdGF0aWMgZ2V0IEFMTF9UUkFOU1BPUlRTKCkge1xuICAgIHJldHVybiBbQnJvd3NlclBvbGxDb25uZWN0aW9uLCBXZWJTb2NrZXRDb25uZWN0aW9uXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFSZXBvSW5mb30gcmVwb0luZm8gTWV0YWRhdGEgYXJvdW5kIHRoZSBuYW1lc3BhY2Ugd2UncmUgY29ubmVjdGluZyB0b1xuICAgKi9cbiAgY29uc3RydWN0b3IocmVwb0luZm86IFJlcG9JbmZvKSB7XG4gICAgdGhpcy5pbml0VHJhbnNwb3J0c18ocmVwb0luZm8pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVJlcG9JbmZvfSByZXBvSW5mb1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBpbml0VHJhbnNwb3J0c18ocmVwb0luZm86IFJlcG9JbmZvKSB7XG4gICAgY29uc3QgaXNXZWJTb2NrZXRzQXZhaWxhYmxlOiBib29sZWFuID1cbiAgICAgIFdlYlNvY2tldENvbm5lY3Rpb24gJiYgV2ViU29ja2V0Q29ubmVjdGlvblsnaXNBdmFpbGFibGUnXSgpO1xuICAgIGxldCBpc1NraXBQb2xsQ29ubmVjdGlvbiA9XG4gICAgICBpc1dlYlNvY2tldHNBdmFpbGFibGUgJiYgIVdlYlNvY2tldENvbm5lY3Rpb24ucHJldmlvdXNseUZhaWxlZCgpO1xuXG4gICAgaWYgKHJlcG9JbmZvLndlYlNvY2tldE9ubHkpIHtcbiAgICAgIGlmICghaXNXZWJTb2NrZXRzQXZhaWxhYmxlKVxuICAgICAgICB3YXJuKFxuICAgICAgICAgIFwid3NzOi8vIFVSTCB1c2VkLCBidXQgYnJvd3NlciBpc24ndCBrbm93biB0byBzdXBwb3J0IHdlYnNvY2tldHMuICBUcnlpbmcgYW55d2F5LlwiXG4gICAgICAgICk7XG5cbiAgICAgIGlzU2tpcFBvbGxDb25uZWN0aW9uID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoaXNTa2lwUG9sbENvbm5lY3Rpb24pIHtcbiAgICAgIHRoaXMudHJhbnNwb3J0c18gPSBbV2ViU29ja2V0Q29ubmVjdGlvbl07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRyYW5zcG9ydHMgPSAodGhpcy50cmFuc3BvcnRzXyA9IFtdIGFzIFRyYW5zcG9ydENvbnN0cnVjdG9yW10pO1xuICAgICAgZWFjaChcbiAgICAgICAgVHJhbnNwb3J0TWFuYWdlci5BTExfVFJBTlNQT1JUUyxcbiAgICAgICAgKGk6IG51bWJlciwgdHJhbnNwb3J0OiBUcmFuc3BvcnRDb25zdHJ1Y3RvcikgPT4ge1xuICAgICAgICAgIGlmICh0cmFuc3BvcnQgJiYgdHJhbnNwb3J0Wydpc0F2YWlsYWJsZSddKCkpIHtcbiAgICAgICAgICAgIHRyYW5zcG9ydHMucHVzaCh0cmFuc3BvcnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7ZnVuY3Rpb24obmV3OlRyYW5zcG9ydCwgIXN0cmluZywgIVJlcG9JbmZvLCBzdHJpbmc9LCBzdHJpbmc9KX0gVGhlIGNvbnN0cnVjdG9yIGZvciB0aGVcbiAgICogaW5pdGlhbCB0cmFuc3BvcnQgdG8gdXNlXG4gICAqL1xuICBpbml0aWFsVHJhbnNwb3J0KCk6IFRyYW5zcG9ydENvbnN0cnVjdG9yIHtcbiAgICBpZiAodGhpcy50cmFuc3BvcnRzXy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gdGhpcy50cmFuc3BvcnRzX1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB0cmFuc3BvcnRzIGF2YWlsYWJsZScpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/ZnVuY3Rpb24obmV3OlRyYW5zcG9ydCwgZnVuY3Rpb24oKSxmdW5jdGlvbigpLCBzdHJpbmc9KX0gVGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgbmV4dFxuICAgKiB0cmFuc3BvcnQsIG9yIG51bGxcbiAgICovXG4gIHVwZ3JhZGVUcmFuc3BvcnQoKTogVHJhbnNwb3J0Q29uc3RydWN0b3IgfCBudWxsIHtcbiAgICBpZiAodGhpcy50cmFuc3BvcnRzXy5sZW5ndGggPiAxKSB7XG4gICAgICByZXR1cm4gdGhpcy50cmFuc3BvcnRzX1sxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBSZXBvSW5mbyB9IGZyb20gJy4uL2NvcmUvUmVwb0luZm8nO1xuXG5kZWNsYXJlIGNvbnN0IE1veldlYlNvY2tldDogYW55O1xuXG5pbXBvcnQgZmlyZWJhc2UgZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBsb2dXcmFwcGVyLCBzcGxpdFN0cmluZ0J5U2l6ZSB9IGZyb20gJy4uL2NvcmUvdXRpbC91dGlsJztcbmltcG9ydCB7IFN0YXRzTWFuYWdlciB9IGZyb20gJy4uL2NvcmUvc3RhdHMvU3RhdHNNYW5hZ2VyJztcbmltcG9ydCB7XG4gIEZPUkdFX0RPTUFJTixcbiAgRk9SR0VfUkVGLFxuICBMQVNUX1NFU1NJT05fUEFSQU0sXG4gIFBST1RPQ09MX1ZFUlNJT04sXG4gIFJFRkVSRVJfUEFSQU0sXG4gIFRSQU5TUE9SVF9TRVNTSU9OX1BBUkFNLFxuICBWRVJTSU9OX1BBUkFNLFxuICBXRUJTT0NLRVRcbn0gZnJvbSAnLi9Db25zdGFudHMnO1xuaW1wb3J0IHsgQ09OU1RBTlRTIGFzIEVOVl9DT05TVEFOVFMgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBQZXJzaXN0ZW50U3RvcmFnZSB9IGZyb20gJy4uL2NvcmUvc3RvcmFnZS9zdG9yYWdlJztcbmltcG9ydCB7IGpzb25FdmFsLCBzdHJpbmdpZnkgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBpc05vZGVTZGsgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBUcmFuc3BvcnQgfSBmcm9tICcuL1RyYW5zcG9ydCc7XG5pbXBvcnQgeyBTdGF0c0NvbGxlY3Rpb24gfSBmcm9tICcuLi9jb3JlL3N0YXRzL1N0YXRzQ29sbGVjdGlvbic7XG5cbmNvbnN0IFdFQlNPQ0tFVF9NQVhfRlJBTUVfU0laRSA9IDE2Mzg0O1xuY29uc3QgV0VCU09DS0VUX0tFRVBBTElWRV9JTlRFUlZBTCA9IDQ1MDAwO1xuXG5sZXQgV2ViU29ja2V0SW1wbCA9IG51bGw7XG5pZiAodHlwZW9mIE1veldlYlNvY2tldCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgV2ViU29ja2V0SW1wbCA9IE1veldlYlNvY2tldDtcbn0gZWxzZSBpZiAodHlwZW9mIFdlYlNvY2tldCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgV2ViU29ja2V0SW1wbCA9IFdlYlNvY2tldDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFdlYlNvY2tldEltcGwoaW1wbCkge1xuICBXZWJTb2NrZXRJbXBsID0gaW1wbDtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgd2Vic29ja2V0IGNvbm5lY3Rpb24gd2l0aCB0aGUgZ2l2ZW4gY2FsbGJhY2tzLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAaW1wbGVtZW50cyB7VHJhbnNwb3J0fVxuICovXG5leHBvcnQgY2xhc3MgV2ViU29ja2V0Q29ubmVjdGlvbiBpbXBsZW1lbnRzIFRyYW5zcG9ydCB7XG4gIGtlZXBhbGl2ZVRpbWVyOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgZnJhbWVzOiBzdHJpbmdbXSB8IG51bGwgPSBudWxsO1xuICB0b3RhbEZyYW1lcyA9IDA7XG4gIGJ5dGVzU2VudCA9IDA7XG4gIGJ5dGVzUmVjZWl2ZWQgPSAwO1xuICBjb25uVVJMOiBzdHJpbmc7XG4gIG9uRGlzY29ubmVjdDogKGE/OiBib29sZWFuKSA9PiB2b2lkO1xuICBvbk1lc3NhZ2U6IChtc2c6IE9iamVjdCkgPT4gdm9pZDtcbiAgbXlTb2NrOiBhbnkgfCBudWxsO1xuICBwcml2YXRlIGxvZ186ICguLi5hOiBhbnlbXSkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBzdGF0c186IFN0YXRzQ29sbGVjdGlvbjtcbiAgcHJpdmF0ZSBldmVyQ29ubmVjdGVkXzogYm9vbGVhbjtcbiAgcHJpdmF0ZSBpc0Nsb3NlZF86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb25uSWQgaWRlbnRpZmllciBmb3IgdGhpcyB0cmFuc3BvcnRcbiAgICogQHBhcmFtIHtSZXBvSW5mb30gcmVwb0luZm8gVGhlIGluZm8gZm9yIHRoZSB3ZWJzb2NrZXQgZW5kcG9pbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gdHJhbnNwb3J0U2Vzc2lvbklkIE9wdGlvbmFsIHRyYW5zcG9ydFNlc3Npb25JZCBpZiB0aGlzIGlzIGNvbm5lY3RpbmcgdG8gYW4gZXhpc3RpbmcgdHJhbnNwb3J0XG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbGFzdFNlc3Npb25JZCBPcHRpb25hbCBsYXN0U2Vzc2lvbklkIGlmIHRoZXJlIHdhcyBhIHByZXZpb3VzIGNvbm5lY3Rpb25cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBjb25uSWQ6IHN0cmluZyxcbiAgICByZXBvSW5mbzogUmVwb0luZm8sXG4gICAgdHJhbnNwb3J0U2Vzc2lvbklkPzogc3RyaW5nLFxuICAgIGxhc3RTZXNzaW9uSWQ/OiBzdHJpbmdcbiAgKSB7XG4gICAgdGhpcy5sb2dfID0gbG9nV3JhcHBlcih0aGlzLmNvbm5JZCk7XG4gICAgdGhpcy5zdGF0c18gPSBTdGF0c01hbmFnZXIuZ2V0Q29sbGVjdGlvbihyZXBvSW5mbyk7XG4gICAgdGhpcy5jb25uVVJMID0gV2ViU29ja2V0Q29ubmVjdGlvbi5jb25uZWN0aW9uVVJMXyhcbiAgICAgIHJlcG9JbmZvLFxuICAgICAgdHJhbnNwb3J0U2Vzc2lvbklkLFxuICAgICAgbGFzdFNlc3Npb25JZFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtSZXBvSW5mb30gcmVwb0luZm8gVGhlIGluZm8gZm9yIHRoZSB3ZWJzb2NrZXQgZW5kcG9pbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gdHJhbnNwb3J0U2Vzc2lvbklkIE9wdGlvbmFsIHRyYW5zcG9ydFNlc3Npb25JZCBpZiB0aGlzIGlzIGNvbm5lY3RpbmcgdG8gYW4gZXhpc3RpbmcgdHJhbnNwb3J0XG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbGFzdFNlc3Npb25JZCBPcHRpb25hbCBsYXN0U2Vzc2lvbklkIGlmIHRoZXJlIHdhcyBhIHByZXZpb3VzIGNvbm5lY3Rpb25cbiAgICogQHJldHVybiB7c3RyaW5nfSBjb25uZWN0aW9uIHVybFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgY29ubmVjdGlvblVSTF8oXG4gICAgcmVwb0luZm86IFJlcG9JbmZvLFxuICAgIHRyYW5zcG9ydFNlc3Npb25JZD86IHN0cmluZyxcbiAgICBsYXN0U2Vzc2lvbklkPzogc3RyaW5nXG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgdXJsUGFyYW1zOiB7IFtrOiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9O1xuICAgIHVybFBhcmFtc1tWRVJTSU9OX1BBUkFNXSA9IFBST1RPQ09MX1ZFUlNJT047XG5cbiAgICBpZiAoXG4gICAgICAhaXNOb2RlU2RrKCkgJiZcbiAgICAgIHR5cGVvZiBsb2NhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIGxvY2F0aW9uLmhyZWYgJiZcbiAgICAgIGxvY2F0aW9uLmhyZWYuaW5kZXhPZihGT1JHRV9ET01BSU4pICE9PSAtMVxuICAgICkge1xuICAgICAgdXJsUGFyYW1zW1JFRkVSRVJfUEFSQU1dID0gRk9SR0VfUkVGO1xuICAgIH1cbiAgICBpZiAodHJhbnNwb3J0U2Vzc2lvbklkKSB7XG4gICAgICB1cmxQYXJhbXNbVFJBTlNQT1JUX1NFU1NJT05fUEFSQU1dID0gdHJhbnNwb3J0U2Vzc2lvbklkO1xuICAgIH1cbiAgICBpZiAobGFzdFNlc3Npb25JZCkge1xuICAgICAgdXJsUGFyYW1zW0xBU1RfU0VTU0lPTl9QQVJBTV0gPSBsYXN0U2Vzc2lvbklkO1xuICAgIH1cbiAgICByZXR1cm4gcmVwb0luZm8uY29ubmVjdGlvblVSTChXRUJTT0NLRVQsIHVybFBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIG9uTWVzc2FnZSBDYWxsYmFjayB3aGVuIG1lc3NhZ2VzIGFycml2ZVxuICAgKiBAcGFyYW0gb25EaXNjb25uZWN0IENhbGxiYWNrIHdpdGggY29ubmVjdGlvbiBsb3N0LlxuICAgKi9cbiAgb3Blbihvbk1lc3NhZ2U6IChtc2c6IE9iamVjdCkgPT4gdm9pZCwgb25EaXNjb25uZWN0OiAoYT86IGJvb2xlYW4pID0+IHZvaWQpIHtcbiAgICB0aGlzLm9uRGlzY29ubmVjdCA9IG9uRGlzY29ubmVjdDtcbiAgICB0aGlzLm9uTWVzc2FnZSA9IG9uTWVzc2FnZTtcblxuICAgIHRoaXMubG9nXygnV2Vic29ja2V0IGNvbm5lY3RpbmcgdG8gJyArIHRoaXMuY29ublVSTCk7XG5cbiAgICB0aGlzLmV2ZXJDb25uZWN0ZWRfID0gZmFsc2U7XG4gICAgLy8gQXNzdW1lIGZhaWx1cmUgdW50aWwgcHJvdmVuIG90aGVyd2lzZS5cbiAgICBQZXJzaXN0ZW50U3RvcmFnZS5zZXQoJ3ByZXZpb3VzX3dlYnNvY2tldF9mYWlsdXJlJywgdHJ1ZSk7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKGlzTm9kZVNkaygpKSB7XG4gICAgICAgIGNvbnN0IGRldmljZSA9IEVOVl9DT05TVEFOVFMuTk9ERV9BRE1JTiA/ICdBZG1pbk5vZGUnIDogJ05vZGUnO1xuICAgICAgICAvLyBVQSBGb3JtYXQ6IEZpcmViYXNlLzx3aXJlX3Byb3RvY29sPi88c2RrX3ZlcnNpb24+LzxwbGF0Zm9ybT4vPGRldmljZT5cbiAgICAgICAgY29uc3Qgb3B0aW9uczogeyBbazogc3RyaW5nXTogb2JqZWN0IH0gPSB7XG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiBgRmlyZWJhc2UvJHtQUk9UT0NPTF9WRVJTSU9OfS8ke1xuICAgICAgICAgICAgICBmaXJlYmFzZS5TREtfVkVSU0lPTlxuICAgICAgICAgICAgfS8ke3Byb2Nlc3MucGxhdGZvcm19LyR7ZGV2aWNlfWBcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gUGx1bWIgYXBwcm9wcmlhdGUgaHR0cF9wcm94eSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpbnRvIGZheWUtd2Vic29ja2V0IGlmIGl0IGV4aXN0cy5cbiAgICAgICAgY29uc3QgZW52ID0gcHJvY2Vzc1snZW52J107XG4gICAgICAgIGNvbnN0IHByb3h5ID1cbiAgICAgICAgICB0aGlzLmNvbm5VUkwuaW5kZXhPZignd3NzOi8vJykgPT0gMFxuICAgICAgICAgICAgPyBlbnZbJ0hUVFBTX1BST1hZJ10gfHwgZW52WydodHRwc19wcm94eSddXG4gICAgICAgICAgICA6IGVudlsnSFRUUF9QUk9YWSddIHx8IGVudlsnaHR0cF9wcm94eSddO1xuXG4gICAgICAgIGlmIChwcm94eSkge1xuICAgICAgICAgIG9wdGlvbnNbJ3Byb3h5J10gPSB7IG9yaWdpbjogcHJveHkgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubXlTb2NrID0gbmV3IFdlYlNvY2tldEltcGwodGhpcy5jb25uVVJMLCBbXSwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm15U29jayA9IG5ldyBXZWJTb2NrZXRJbXBsKHRoaXMuY29ublVSTCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5sb2dfKCdFcnJvciBpbnN0YW50aWF0aW5nIFdlYlNvY2tldC4nKTtcbiAgICAgIGNvbnN0IGVycm9yID0gZS5tZXNzYWdlIHx8IGUuZGF0YTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aGlzLmxvZ18oZXJyb3IpO1xuICAgICAgfVxuICAgICAgdGhpcy5vbkNsb3NlZF8oKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm15U29jay5vbm9wZW4gPSAoKSA9PiB7XG4gICAgICB0aGlzLmxvZ18oJ1dlYnNvY2tldCBjb25uZWN0ZWQuJyk7XG4gICAgICB0aGlzLmV2ZXJDb25uZWN0ZWRfID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgdGhpcy5teVNvY2sub25jbG9zZSA9ICgpID0+IHtcbiAgICAgIHRoaXMubG9nXygnV2Vic29ja2V0IGNvbm5lY3Rpb24gd2FzIGRpc2Nvbm5lY3RlZC4nKTtcbiAgICAgIHRoaXMubXlTb2NrID0gbnVsbDtcbiAgICAgIHRoaXMub25DbG9zZWRfKCk7XG4gICAgfTtcblxuICAgIHRoaXMubXlTb2NrLm9ubWVzc2FnZSA9IChtOiBvYmplY3QpID0+IHtcbiAgICAgIHRoaXMuaGFuZGxlSW5jb21pbmdGcmFtZShtKTtcbiAgICB9O1xuXG4gICAgdGhpcy5teVNvY2sub25lcnJvciA9IChlOiBhbnkpID0+IHtcbiAgICAgIHRoaXMubG9nXygnV2ViU29ja2V0IGVycm9yLiAgQ2xvc2luZyBjb25uZWN0aW9uLicpO1xuICAgICAgY29uc3QgZXJyb3IgPSBlLm1lc3NhZ2UgfHwgZS5kYXRhO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRoaXMubG9nXyhlcnJvcik7XG4gICAgICB9XG4gICAgICB0aGlzLm9uQ2xvc2VkXygpO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogTm8tb3AgZm9yIHdlYnNvY2tldHMsIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmcgb25jZSB0aGUgY29ubmVjdGlvbiBpcyBjb25maXJtZWQgYXMgb3BlblxuICAgKi9cbiAgc3RhcnQoKSB7fVxuXG4gIHN0YXRpYyBmb3JjZURpc2FsbG93XzogQm9vbGVhbjtcblxuICBzdGF0aWMgZm9yY2VEaXNhbGxvdygpIHtcbiAgICBXZWJTb2NrZXRDb25uZWN0aW9uLmZvcmNlRGlzYWxsb3dfID0gdHJ1ZTtcbiAgfVxuXG4gIHN0YXRpYyBpc0F2YWlsYWJsZSgpOiBib29sZWFuIHtcbiAgICBsZXQgaXNPbGRBbmRyb2lkID0gZmFsc2U7XG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQpIHtcbiAgICAgIGNvbnN0IG9sZEFuZHJvaWRSZWdleCA9IC9BbmRyb2lkIChbMC05XXswLH1cXC5bMC05XXswLH0pLztcbiAgICAgIGNvbnN0IG9sZEFuZHJvaWRNYXRjaCA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2gob2xkQW5kcm9pZFJlZ2V4KTtcbiAgICAgIGlmIChvbGRBbmRyb2lkTWF0Y2ggJiYgb2xkQW5kcm9pZE1hdGNoLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgaWYgKHBhcnNlRmxvYXQob2xkQW5kcm9pZE1hdGNoWzFdKSA8IDQuNCkge1xuICAgICAgICAgIGlzT2xkQW5kcm9pZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgIWlzT2xkQW5kcm9pZCAmJlxuICAgICAgV2ViU29ja2V0SW1wbCAhPT0gbnVsbCAmJlxuICAgICAgIVdlYlNvY2tldENvbm5lY3Rpb24uZm9yY2VEaXNhbGxvd19cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiByZXNwb25zZSBiZWZvcmUgd2UgY29uc2lkZXIgdGhlIGNvbm5lY3Rpb24gXCJoZWFsdGh5LlwiXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBzdGF0aWMgcmVzcG9uc2VzUmVxdWlyZWRUb0JlSGVhbHRoeSA9IDI7XG5cbiAgLyoqXG4gICAqIFRpbWUgdG8gd2FpdCBmb3IgdGhlIGNvbm5lY3Rpb24gdGUgYmVjb21lIGhlYWx0aHkgYmVmb3JlIGdpdmluZyB1cC5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIHN0YXRpYyBoZWFsdGh5VGltZW91dCA9IDMwMDAwO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgd2UgcHJldmlvdXNseSBmYWlsZWQgdG8gY29ubmVjdCB3aXRoIHRoaXMgdHJhbnNwb3J0LlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgc3RhdGljIHByZXZpb3VzbHlGYWlsZWQoKTogYm9vbGVhbiB7XG4gICAgLy8gSWYgb3VyIHBlcnNpc3RlbnQgc3RvcmFnZSBpcyBhY3R1YWxseSBvbmx5IGluLW1lbW9yeSBzdG9yYWdlLFxuICAgIC8vIHdlIGRlZmF1bHQgdG8gYXNzdW1pbmcgdGhhdCBpdCBwcmV2aW91c2x5IGZhaWxlZCB0byBiZSBzYWZlLlxuICAgIHJldHVybiAoXG4gICAgICBQZXJzaXN0ZW50U3RvcmFnZS5pc0luTWVtb3J5U3RvcmFnZSB8fFxuICAgICAgUGVyc2lzdGVudFN0b3JhZ2UuZ2V0KCdwcmV2aW91c193ZWJzb2NrZXRfZmFpbHVyZScpID09PSB0cnVlXG4gICAgKTtcbiAgfVxuXG4gIG1hcmtDb25uZWN0aW9uSGVhbHRoeSgpIHtcbiAgICBQZXJzaXN0ZW50U3RvcmFnZS5yZW1vdmUoJ3ByZXZpb3VzX3dlYnNvY2tldF9mYWlsdXJlJyk7XG4gIH1cblxuICBwcml2YXRlIGFwcGVuZEZyYW1lXyhkYXRhOiBzdHJpbmcpIHtcbiAgICB0aGlzLmZyYW1lcy5wdXNoKGRhdGEpO1xuICAgIGlmICh0aGlzLmZyYW1lcy5sZW5ndGggPT0gdGhpcy50b3RhbEZyYW1lcykge1xuICAgICAgY29uc3QgZnVsbE1lc3MgPSB0aGlzLmZyYW1lcy5qb2luKCcnKTtcbiAgICAgIHRoaXMuZnJhbWVzID0gbnVsbDtcbiAgICAgIGNvbnN0IGpzb25NZXNzID0ganNvbkV2YWwoZnVsbE1lc3MpO1xuXG4gICAgICAvL2hhbmRsZSB0aGUgbWVzc2FnZVxuICAgICAgdGhpcy5vbk1lc3NhZ2UoanNvbk1lc3MpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gZnJhbWVDb3VudCBUaGUgbnVtYmVyIG9mIGZyYW1lcyB3ZSBhcmUgZXhwZWN0aW5nIGZyb20gdGhlIHNlcnZlclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVOZXdGcmFtZUNvdW50XyhmcmFtZUNvdW50OiBudW1iZXIpIHtcbiAgICB0aGlzLnRvdGFsRnJhbWVzID0gZnJhbWVDb3VudDtcbiAgICB0aGlzLmZyYW1lcyA9IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIEF0dGVtcHRzIHRvIHBhcnNlIGEgZnJhbWUgY291bnQgb3V0IG9mIHNvbWUgdGV4dC4gSWYgaXQgY2FuJ3QsIGFzc3VtZXMgYSB2YWx1ZSBvZiAxXG4gICAqIEBwYXJhbSB7IVN0cmluZ30gZGF0YVxuICAgKiBAcmV0dXJuIHs/U3RyaW5nfSBBbnkgcmVtYWluaW5nIGRhdGEgdG8gYmUgcHJvY2Vzcywgb3IgbnVsbCBpZiB0aGVyZSBpcyBub25lXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RGcmFtZUNvdW50XyhkYXRhOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBhc3NlcnQodGhpcy5mcmFtZXMgPT09IG51bGwsICdXZSBhbHJlYWR5IGhhdmUgYSBmcmFtZSBidWZmZXInKTtcbiAgICAvLyBUT0RPOiBUaGUgc2VydmVyIGlzIG9ubHkgc3VwcG9zZWQgdG8gc2VuZCB1cCB0byA5OTk5IGZyYW1lcyAoaS5lLiBsZW5ndGggPD0gNCksIGJ1dCB0aGF0IGlzbid0IGJlaW5nIGVuZm9yY2VkXG4gICAgLy8gY3VycmVudGx5LiAgU28gYWxsb3dpbmcgbGFyZ2VyIGZyYW1lIGNvdW50cyAobGVuZ3RoIDw9IDYpLiAgU2VlIGh0dHBzOi8vYXBwLmFzYW5hLmNvbS8wL3NlYXJjaC84Njg4NTk4OTk4MzgwLzgyMzc2MDgwNDI1MDhcbiAgICBpZiAoZGF0YS5sZW5ndGggPD0gNikge1xuICAgICAgY29uc3QgZnJhbWVDb3VudCA9IE51bWJlcihkYXRhKTtcbiAgICAgIGlmICghaXNOYU4oZnJhbWVDb3VudCkpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVOZXdGcmFtZUNvdW50XyhmcmFtZUNvdW50KTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuaGFuZGxlTmV3RnJhbWVDb3VudF8oMSk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICAvKipcbiAgICogUHJvY2VzcyBhIHdlYnNvY2tldCBmcmFtZSB0aGF0IGhhcyBhcnJpdmVkIGZyb20gdGhlIHNlcnZlci5cbiAgICogQHBhcmFtIG1lc3MgVGhlIGZyYW1lIGRhdGFcbiAgICovXG4gIGhhbmRsZUluY29taW5nRnJhbWUobWVzczogeyBbazogc3RyaW5nXTogYW55IH0pIHtcbiAgICBpZiAodGhpcy5teVNvY2sgPT09IG51bGwpIHJldHVybjsgLy8gQ2hyb21lIGFwcGFyZW50bHkgZGVsaXZlcnMgaW5jb21pbmcgcGFja2V0cyBldmVuIGFmdGVyIHdlIC5jbG9zZSgpIHRoZSBjb25uZWN0aW9uIHNvbWV0aW1lcy5cbiAgICBjb25zdCBkYXRhID0gbWVzc1snZGF0YSddIGFzIHN0cmluZztcbiAgICB0aGlzLmJ5dGVzUmVjZWl2ZWQgKz0gZGF0YS5sZW5ndGg7XG4gICAgdGhpcy5zdGF0c18uaW5jcmVtZW50Q291bnRlcignYnl0ZXNfcmVjZWl2ZWQnLCBkYXRhLmxlbmd0aCk7XG5cbiAgICB0aGlzLnJlc2V0S2VlcEFsaXZlKCk7XG5cbiAgICBpZiAodGhpcy5mcmFtZXMgIT09IG51bGwpIHtcbiAgICAgIC8vIHdlJ3JlIGJ1ZmZlcmluZ1xuICAgICAgdGhpcy5hcHBlbmRGcmFtZV8oZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHRyeSB0byBwYXJzZSBvdXQgYSBmcmFtZSBjb3VudCwgb3RoZXJ3aXNlLCBhc3N1bWUgMSBhbmQgcHJvY2VzcyBpdFxuICAgICAgY29uc3QgcmVtYWluaW5nRGF0YSA9IHRoaXMuZXh0cmFjdEZyYW1lQ291bnRfKGRhdGEpO1xuICAgICAgaWYgKHJlbWFpbmluZ0RhdGEgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5hcHBlbmRGcmFtZV8ocmVtYWluaW5nRGF0YSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSBzZXJ2ZXJcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgVGhlIEpTT04gb2JqZWN0IHRvIHRyYW5zbWl0XG4gICAqL1xuICBzZW5kKGRhdGE6IE9iamVjdCkge1xuICAgIHRoaXMucmVzZXRLZWVwQWxpdmUoKTtcblxuICAgIGNvbnN0IGRhdGFTdHIgPSBzdHJpbmdpZnkoZGF0YSk7XG4gICAgdGhpcy5ieXRlc1NlbnQgKz0gZGF0YVN0ci5sZW5ndGg7XG4gICAgdGhpcy5zdGF0c18uaW5jcmVtZW50Q291bnRlcignYnl0ZXNfc2VudCcsIGRhdGFTdHIubGVuZ3RoKTtcblxuICAgIC8vV2UgY2FuIG9ubHkgZml0IGEgY2VydGFpbiBhbW91bnQgaW4gZWFjaCB3ZWJzb2NrZXQgZnJhbWUsIHNvIHdlIG5lZWQgdG8gc3BsaXQgdGhpcyByZXF1ZXN0XG4gICAgLy91cCBpbnRvIG11bHRpcGxlIHBpZWNlcyBpZiBpdCBkb2Vzbid0IGZpdCBpbiBvbmUgcmVxdWVzdC5cblxuICAgIGNvbnN0IGRhdGFTZWdzID0gc3BsaXRTdHJpbmdCeVNpemUoZGF0YVN0ciwgV0VCU09DS0VUX01BWF9GUkFNRV9TSVpFKTtcblxuICAgIC8vU2VuZCB0aGUgbGVuZ3RoIGhlYWRlclxuICAgIGlmIChkYXRhU2Vncy5sZW5ndGggPiAxKSB7XG4gICAgICB0aGlzLnNlbmRTdHJpbmdfKFN0cmluZyhkYXRhU2Vncy5sZW5ndGgpKTtcbiAgICB9XG5cbiAgICAvL1NlbmQgdGhlIGFjdHVhbCBkYXRhIGluIHNlZ21lbnRzLlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YVNlZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc2VuZFN0cmluZ18oZGF0YVNlZ3NbaV0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2h1dGRvd25fKCkge1xuICAgIHRoaXMuaXNDbG9zZWRfID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5rZWVwYWxpdmVUaW1lcikge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmtlZXBhbGl2ZVRpbWVyKTtcbiAgICAgIHRoaXMua2VlcGFsaXZlVGltZXIgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm15U29jaykge1xuICAgICAgdGhpcy5teVNvY2suY2xvc2UoKTtcbiAgICAgIHRoaXMubXlTb2NrID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG9uQ2xvc2VkXygpIHtcbiAgICBpZiAoIXRoaXMuaXNDbG9zZWRfKSB7XG4gICAgICB0aGlzLmxvZ18oJ1dlYlNvY2tldCBpcyBjbG9zaW5nIGl0c2VsZicpO1xuICAgICAgdGhpcy5zaHV0ZG93bl8oKTtcblxuICAgICAgLy8gc2luY2UgdGhpcyBpcyBhbiBpbnRlcm5hbCBjbG9zZSwgdHJpZ2dlciB0aGUgY2xvc2UgbGlzdGVuZXJcbiAgICAgIGlmICh0aGlzLm9uRGlzY29ubmVjdCkge1xuICAgICAgICB0aGlzLm9uRGlzY29ubmVjdCh0aGlzLmV2ZXJDb25uZWN0ZWRfKTtcbiAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3QgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRlcm5hbC1mYWNpbmcgY2xvc2UgaGFuZGxlci5cbiAgICogQ2xvc2UgdGhlIHdlYnNvY2tldCBhbmQga2lsbCB0aGUgY29ubmVjdGlvbi5cbiAgICovXG4gIGNsb3NlKCkge1xuICAgIGlmICghdGhpcy5pc0Nsb3NlZF8pIHtcbiAgICAgIHRoaXMubG9nXygnV2ViU29ja2V0IGlzIGJlaW5nIGNsb3NlZCcpO1xuICAgICAgdGhpcy5zaHV0ZG93bl8oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogS2lsbCB0aGUgY3VycmVudCBrZWVwYWxpdmUgdGltZXIgYW5kIHN0YXJ0IGEgbmV3IG9uZSwgdG8gZW5zdXJlIHRoYXQgaXQgYWx3YXlzIGZpcmVzIE4gc2Vjb25kcyBhZnRlclxuICAgKiB0aGUgbGFzdCBhY3Rpdml0eS5cbiAgICovXG4gIHJlc2V0S2VlcEFsaXZlKCkge1xuICAgIGNsZWFySW50ZXJ2YWwodGhpcy5rZWVwYWxpdmVUaW1lcik7XG4gICAgdGhpcy5rZWVwYWxpdmVUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIC8vSWYgdGhlcmUgaGFzIGJlZW4gbm8gd2Vic29ja2V0IGFjdGl2aXR5IGZvciBhIHdoaWxlLCBzZW5kIGEgbm8tb3BcbiAgICAgIGlmICh0aGlzLm15U29jaykge1xuICAgICAgICB0aGlzLnNlbmRTdHJpbmdfKCcwJyk7XG4gICAgICB9XG4gICAgICB0aGlzLnJlc2V0S2VlcEFsaXZlKCk7XG4gICAgfSwgTWF0aC5mbG9vcihXRUJTT0NLRVRfS0VFUEFMSVZFX0lOVEVSVkFMKSkgYXMgYW55O1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgYSBzdHJpbmcgb3ZlciB0aGUgd2Vic29ja2V0LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyIFN0cmluZyB0byBzZW5kLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBzZW5kU3RyaW5nXyhzdHI6IHN0cmluZykge1xuICAgIC8vIEZpcmVmb3ggc2VlbXMgdG8gc29tZXRpbWVzIHRocm93IGV4Y2VwdGlvbnMgKE5TX0VSUk9SX1VORVhQRUNURUQpIGZyb20gd2Vic29ja2V0IC5zZW5kKClcbiAgICAvLyBjYWxscyBmb3Igc29tZSB1bmtub3duIHJlYXNvbi4gIFdlIHRyZWF0IHRoZXNlIGFzIGFuIGVycm9yIGFuZCBkaXNjb25uZWN0LlxuICAgIC8vIFNlZSBodHRwczovL2FwcC5hc2FuYS5jb20vMC81ODkyNjExMTQwMjI5Mi82ODAyMTM0MDI1MDQxMFxuICAgIHRyeSB7XG4gICAgICB0aGlzLm15U29jay5zZW5kKHN0cik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5sb2dfKFxuICAgICAgICAnRXhjZXB0aW9uIHRocm93biBmcm9tIFdlYlNvY2tldC5zZW5kKCk6JyxcbiAgICAgICAgZS5tZXNzYWdlIHx8IGUuZGF0YSxcbiAgICAgICAgJ0Nsb3NpbmcgY29ubmVjdGlvbi4nXG4gICAgICApO1xuICAgICAgc2V0VGltZW91dCh0aGlzLm9uQ2xvc2VkXy5iaW5kKHRoaXMpLCAwKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGV4Y2VwdGlvbkd1YXJkIH0gZnJvbSAnLi4vLi4vY29yZS91dGlsL3V0aWwnO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgZW5zdXJlcyB0aGUgcGFja2V0cyBmcm9tIHRoZSBzZXJ2ZXIgYXJyaXZlIGluIG9yZGVyXG4gKiBUaGlzIGNsYXNzIHRha2VzIGRhdGEgZnJvbSB0aGUgc2VydmVyIGFuZCBlbnN1cmVzIGl0IGdldHMgcGFzc2VkIGludG8gdGhlIGNhbGxiYWNrcyBpbiBvcmRlci5cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgY2xhc3MgUGFja2V0UmVjZWl2ZXIge1xuICBwZW5kaW5nUmVzcG9uc2VzOiBhbnlbXSA9IFtdO1xuICBjdXJyZW50UmVzcG9uc2VOdW0gPSAwO1xuICBjbG9zZUFmdGVyUmVzcG9uc2UgPSAtMTtcbiAgb25DbG9zZTogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBvbk1lc3NhZ2VfXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG9uTWVzc2FnZV86IChhOiBPYmplY3QpID0+IHZvaWQpIHt9XG5cbiAgY2xvc2VBZnRlcihyZXNwb25zZU51bTogbnVtYmVyLCBjYWxsYmFjazogKCkgPT4gdm9pZCkge1xuICAgIHRoaXMuY2xvc2VBZnRlclJlc3BvbnNlID0gcmVzcG9uc2VOdW07XG4gICAgdGhpcy5vbkNsb3NlID0gY2FsbGJhY2s7XG4gICAgaWYgKHRoaXMuY2xvc2VBZnRlclJlc3BvbnNlIDwgdGhpcy5jdXJyZW50UmVzcG9uc2VOdW0pIHtcbiAgICAgIHRoaXMub25DbG9zZSgpO1xuICAgICAgdGhpcy5vbkNsb3NlID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRWFjaCBtZXNzYWdlIGZyb20gdGhlIHNlcnZlciBjb21lcyB3aXRoIGEgcmVzcG9uc2UgbnVtYmVyLCBhbmQgYW4gYXJyYXkgb2YgZGF0YS4gVGhlIHJlc3BvbnNlTnVtYmVyXG4gICAqIGFsbG93cyB1cyB0byBlbnN1cmUgdGhhdCB3ZSBwcm9jZXNzIHRoZW0gaW4gdGhlIHJpZ2h0IG9yZGVyLCBzaW5jZSB3ZSBjYW4ndCBiZSBndWFyYW50ZWVkIHRoYXQgYWxsXG4gICAqIGJyb3dzZXJzIHdpbGwgcmVzcG9uZCBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGUgcmVxdWVzdHMgd2Ugc2VudFxuICAgKiBAcGFyYW0ge251bWJlcn0gcmVxdWVzdE51bVxuICAgKiBAcGFyYW0ge0FycmF5fSBkYXRhXG4gICAqL1xuICBoYW5kbGVSZXNwb25zZShyZXF1ZXN0TnVtOiBudW1iZXIsIGRhdGE6IGFueVtdKSB7XG4gICAgdGhpcy5wZW5kaW5nUmVzcG9uc2VzW3JlcXVlc3ROdW1dID0gZGF0YTtcbiAgICB3aGlsZSAodGhpcy5wZW5kaW5nUmVzcG9uc2VzW3RoaXMuY3VycmVudFJlc3BvbnNlTnVtXSkge1xuICAgICAgY29uc3QgdG9Qcm9jZXNzID0gdGhpcy5wZW5kaW5nUmVzcG9uc2VzW3RoaXMuY3VycmVudFJlc3BvbnNlTnVtXTtcbiAgICAgIGRlbGV0ZSB0aGlzLnBlbmRpbmdSZXNwb25zZXNbdGhpcy5jdXJyZW50UmVzcG9uc2VOdW1dO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b1Byb2Nlc3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKHRvUHJvY2Vzc1tpXSkge1xuICAgICAgICAgIGV4Y2VwdGlvbkd1YXJkKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25NZXNzYWdlXyh0b1Byb2Nlc3NbaV0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jdXJyZW50UmVzcG9uc2VOdW0gPT09IHRoaXMuY2xvc2VBZnRlclJlc3BvbnNlKSB7XG4gICAgICAgIGlmICh0aGlzLm9uQ2xvc2UpIHtcbiAgICAgICAgICB0aGlzLm9uQ2xvc2UoKTtcbiAgICAgICAgICB0aGlzLm9uQ2xvc2UgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgdGhpcy5jdXJyZW50UmVzcG9uc2VOdW0rKztcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBXaW5kb3dDb250cm9sbGVyIGZyb20gJy4vc3JjL2NvbnRyb2xsZXJzL3dpbmRvdy1jb250cm9sbGVyJztcbmltcG9ydCBTV0NvbnRyb2xsZXIgZnJvbSAnLi9zcmMvY29udHJvbGxlcnMvc3ctY29udHJvbGxlcic7XG5pbXBvcnQgZmlyZWJhc2UgZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3Rlck1lc3NhZ2luZyhpbnN0YW5jZSkge1xuICBjb25zdCBtZXNzYWdpbmdOYW1lID0gJ21lc3NhZ2luZyc7XG4gIGNvbnN0IGZhY3RvcnlNZXRob2QgPSBhcHAgPT4ge1xuICAgIGlmIChzZWxmICYmICdTZXJ2aWNlV29ya2VyR2xvYmFsU2NvcGUnIGluIHNlbGYpIHtcbiAgICAgIHJldHVybiBuZXcgU1dDb250cm9sbGVyKGFwcCk7XG4gICAgfVxuXG4gICAgLy8gQXNzdW1lIHdlIGFyZSBpbiB0aGUgd2luZG93IGNvbnRleHQuXG4gICAgcmV0dXJuIG5ldyBXaW5kb3dDb250cm9sbGVyKGFwcCk7XG4gIH07XG5cbiAgY29uc3QgbmFtZXNwYWNlRXhwb3J0cyA9IHtcbiAgICAvLyBuby1pbmxpbmVcbiAgICBNZXNzYWdpbmc6IFdpbmRvd0NvbnRyb2xsZXJcbiAgfTtcblxuICBpbnN0YW5jZS5JTlRFUk5BTC5yZWdpc3RlclNlcnZpY2UoXG4gICAgbWVzc2FnaW5nTmFtZSxcbiAgICBmYWN0b3J5TWV0aG9kLFxuICAgIG5hbWVzcGFjZUV4cG9ydHNcbiAgKTtcbn1cblxucmVnaXN0ZXJNZXNzYWdpbmcoZmlyZWJhc2UpO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHsgRXJyb3JGYWN0b3J5IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IEVycm9ycyBmcm9tICcuLi9tb2RlbHMvZXJyb3JzJztcbmltcG9ydCBUb2tlbk1hbmFnZXIgZnJvbSAnLi4vbW9kZWxzL3Rva2VuLW1hbmFnZXInO1xuaW1wb3J0IE5PVElGSUNBVElPTl9QRVJNSVNTSU9OIGZyb20gJy4uL21vZGVscy9ub3RpZmljYXRpb24tcGVybWlzc2lvbic7XG5cbmNvbnN0IFNFTkRFUl9JRF9PUFRJT05fTkFNRSA9ICdtZXNzYWdpbmdTZW5kZXJJZCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnRyb2xsZXJJbnRlcmZhY2Uge1xuICBwdWJsaWMgYXBwO1xuICBwdWJsaWMgSU5URVJOQUw7XG4gIHByb3RlY3RlZCBlcnJvckZhY3RvcnlfO1xuICBwcml2YXRlIG1lc3NhZ2luZ1NlbmRlcklkXzogc3RyaW5nO1xuICBwcml2YXRlIHRva2VuTWFuYWdlcl86IFRva2VuTWFuYWdlcjtcblxuICAvKipcbiAgICogQW4gaW50ZXJmYWNlIG9mIHRoZSBNZXNzYWdpbmcgU2VydmljZSBBUElcbiAgICogQHBhcmFtIHshZmlyZWJhc2UuYXBwLkFwcH0gYXBwXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICB0aGlzLmVycm9yRmFjdG9yeV8gPSBuZXcgRXJyb3JGYWN0b3J5KCdtZXNzYWdpbmcnLCAnTWVzc2FnaW5nJywgRXJyb3JzLm1hcCk7XG5cbiAgICBpZiAoXG4gICAgICAhYXBwLm9wdGlvbnNbU0VOREVSX0lEX09QVElPTl9OQU1FXSB8fFxuICAgICAgdHlwZW9mIGFwcC5vcHRpb25zW1NFTkRFUl9JRF9PUFRJT05fTkFNRV0gIT09ICdzdHJpbmcnXG4gICAgKSB7XG4gICAgICB0aHJvdyB0aGlzLmVycm9yRmFjdG9yeV8uY3JlYXRlKEVycm9ycy5jb2Rlcy5CQURfU0VOREVSX0lEKTtcbiAgICB9XG5cbiAgICB0aGlzLm1lc3NhZ2luZ1NlbmRlcklkXyA9IGFwcC5vcHRpb25zW1NFTkRFUl9JRF9PUFRJT05fTkFNRV07XG5cbiAgICB0aGlzLnRva2VuTWFuYWdlcl8gPSBuZXcgVG9rZW5NYW5hZ2VyKCk7XG5cbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB0aGlzLklOVEVSTkFMID0ge307XG4gICAgdGhpcy5JTlRFUk5BTC5kZWxldGUgPSAoKSA9PiB0aGlzLmRlbGV0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZXhwb3J0XG4gICAqIEByZXR1cm4ge1Byb21pc2U8c3RyaW5nPiB8IFByb21pc2U8bnVsbD59IFJldHVybnMgYSBwcm9taXNlIHRoYXRcbiAgICogcmVzb2x2ZXMgdG8gYW4gRkNNIHRva2VuLlxuICAgKi9cbiAgZ2V0VG9rZW4oKSB7XG4gICAgLy8gQ2hlY2sgd2l0aCBwZXJtaXNzaW9uc1xuICAgIGNvbnN0IGN1cnJlbnRQZXJtaXNzaW9uID0gdGhpcy5nZXROb3RpZmljYXRpb25QZXJtaXNzaW9uXygpO1xuICAgIGlmIChjdXJyZW50UGVybWlzc2lvbiAhPT0gTk9USUZJQ0FUSU9OX1BFUk1JU1NJT04uZ3JhbnRlZCkge1xuICAgICAgaWYgKGN1cnJlbnRQZXJtaXNzaW9uID09PSBOT1RJRklDQVRJT05fUEVSTUlTU0lPTi5kZW5pZWQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFxuICAgICAgICAgIHRoaXMuZXJyb3JGYWN0b3J5Xy5jcmVhdGUoRXJyb3JzLmNvZGVzLk5PVElGSUNBVElPTlNfQkxPQ0tFRClcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gV2UgbXVzdCB3YWl0IGZvciBwZXJtaXNzaW9uIHRvIGJlIGdyYW50ZWRcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZ2V0U1dSZWdpc3RyYXRpb25fKCkudGhlbihyZWdpc3RyYXRpb24gPT4ge1xuICAgICAgcmV0dXJuIHRoaXMudG9rZW5NYW5hZ2VyX1xuICAgICAgICAuZ2V0U2F2ZWRUb2tlbih0aGlzLm1lc3NhZ2luZ1NlbmRlcklkXywgcmVnaXN0cmF0aW9uKVxuICAgICAgICAudGhlbih0b2tlbiA9PiB7XG4gICAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5NYW5hZ2VyXy5jcmVhdGVUb2tlbihcbiAgICAgICAgICAgIHRoaXMubWVzc2FnaW5nU2VuZGVySWRfLFxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgZGVsZXRlcyB0b2tlbnMgdGhhdCB0aGUgdG9rZW4gbWFuYWdlciBsb29rcyBhZnRlciBhbmQgdGhlblxuICAgKiB1bnJlZ2lzdGVycyB0aGUgcHVzaCBzdWJzY3JpcHRpb24gaWYgaXQgZXhpc3RzLlxuICAgKiBAZXhwb3J0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlblxuICAgKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fVxuICAgKi9cbiAgZGVsZXRlVG9rZW4odG9rZW4pIHtcbiAgICByZXR1cm4gdGhpcy50b2tlbk1hbmFnZXJfLmRlbGV0ZVRva2VuKHRva2VuKS50aGVuKCgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmdldFNXUmVnaXN0cmF0aW9uXygpXG4gICAgICAgIC50aGVuKHJlZ2lzdHJhdGlvbiA9PiB7XG4gICAgICAgICAgaWYgKHJlZ2lzdHJhdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHJlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlci5nZXRTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHN1YnNjcmlwdGlvbiA9PiB7XG4gICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRTV1JlZ2lzdHJhdGlvbl8oKTogUHJvbWlzZTxTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uPiB7XG4gICAgdGhyb3cgdGhpcy5lcnJvckZhY3RvcnlfLmNyZWF0ZShFcnJvcnMuY29kZXMuU0hPVUxEX0JFX0lOSEVSSVRFRCk7XG4gIH1cblxuICAvL1xuICAvLyBUaGUgZm9sbG93aW5nIG1ldGhvZHMgc2hvdWxkIG9ubHkgYmUgYXZhaWxhYmxlIGluIHRoZSB3aW5kb3cuXG4gIC8vXG5cbiAgcmVxdWVzdFBlcm1pc3Npb24oKSB7XG4gICAgdGhyb3cgdGhpcy5lcnJvckZhY3RvcnlfLmNyZWF0ZShFcnJvcnMuY29kZXMuQVZBSUxBQkxFX0lOX1dJTkRPVyk7XG4gIH1cblxuICAvKipcbiAgICogQGV4cG9ydFxuICAgKiBAcGFyYW0geyFTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9ufSByZWdpc3RyYXRpb25cbiAgICovXG4gIHVzZVNlcnZpY2VXb3JrZXIocmVnaXN0cmF0aW9uKSB7XG4gICAgdGhyb3cgdGhpcy5lcnJvckZhY3RvcnlfLmNyZWF0ZShFcnJvcnMuY29kZXMuQVZBSUxBQkxFX0lOX1dJTkRPVyk7XG4gIH1cblxuICAvKipcbiAgICogQGV4cG9ydFxuICAgKiBAcGFyYW0geyFmaXJlYmFzZS5PYnNlcnZlcnxmdW5jdGlvbigqKX0gbmV4dE9yT2JzZXJ2ZXJcbiAgICogQHBhcmFtIHtmdW5jdGlvbighRXJyb3IpPX0gb3B0RXJyb3JcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpPX0gb3B0Q29tcGxldGVkXG4gICAqIEByZXR1cm4geyFmdW5jdGlvbigpfVxuICAgKi9cbiAgb25NZXNzYWdlKG5leHRPck9ic2VydmVyLCBvcHRFcnJvciwgb3B0Q29tcGxldGVkKSB7XG4gICAgdGhyb3cgdGhpcy5lcnJvckZhY3RvcnlfLmNyZWF0ZShFcnJvcnMuY29kZXMuQVZBSUxBQkxFX0lOX1dJTkRPVyk7XG4gIH1cblxuICAvKipcbiAgICogQGV4cG9ydFxuICAgKiBAcGFyYW0geyFmaXJlYmFzZS5PYnNlcnZlcnxmdW5jdGlvbigpfSBuZXh0T3JPYnNlcnZlciBBbiBvYnNlcnZlciBvYmplY3RcbiAgICogb3IgYSBmdW5jdGlvbiB0cmlnZ2VyZWQgb24gdG9rZW4gcmVmcmVzaC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbighRXJyb3IpPX0gb3B0RXJyb3IgT3B0aW9uYWwgQSBmdW5jdGlvblxuICAgKiB0cmlnZ2VyZWQgb24gdG9rZW4gcmVmcmVzaCBlcnJvci5cbiAgICogQHBhcmFtIHtmdW5jdGlvbigpPX0gb3B0Q29tcGxldGVkIE9wdGlvbmFsIGZ1bmN0aW9uIHRyaWdnZXJlZCB3aGVuIHRoZVxuICAgKiBvYnNlcnZlciBpcyByZW1vdmVkLlxuICAgKiBAcmV0dXJuIHshZnVuY3Rpb24oKX0gVGhlIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIGZvciB0aGUgb2JzZXJ2ZXIuXG4gICAqL1xuICBvblRva2VuUmVmcmVzaChuZXh0T3JPYnNlcnZlciwgb3B0RXJyb3IsIG9wdENvbXBsZXRlZCkge1xuICAgIHRocm93IHRoaXMuZXJyb3JGYWN0b3J5Xy5jcmVhdGUoRXJyb3JzLmNvZGVzLkFWQUlMQUJMRV9JTl9XSU5ET1cpO1xuICB9XG5cbiAgLy9cbiAgLy8gVGhlIGZvbGxvd2luZyBtZXRob2RzIGFyZSB1c2VkIGJ5IHRoZSBzZXJ2aWNlIHdvcmtlciBvbmx5LlxuICAvL1xuXG4gIC8qKlxuICAgKiBAZXhwb3J0XG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oT2JqZWN0KX0gY2FsbGJhY2tcbiAgICovXG4gIHNldEJhY2tncm91bmRNZXNzYWdlSGFuZGxlcihjYWxsYmFjaykge1xuICAgIHRocm93IHRoaXMuZXJyb3JGYWN0b3J5Xy5jcmVhdGUoRXJyb3JzLmNvZGVzLkFWQUlMQUJMRV9JTl9TVyk7XG4gIH1cblxuICAvL1xuICAvLyBUaGUgZm9sbG93aW5nIG1ldGhvZHMgYXJlIHVzZWQgYnkgdGhlIHNlcnZpY2UgdGhlbXNlbHZlcyBhbmQgbm90IGV4cG9zZWRcbiAgLy8gcHVibGljbHkgb3Igbm90IGV4cGVjdGVkIHRvIGJlIHVzZWQgYnkgZGV2ZWxvcGVycy5cbiAgLy9cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgaXMgcmVxdWlyZWQgdG8gYWRoZXJlIHRvIHRoZSBGaXJlYmFzZSBpbnRlcmZhY2UuXG4gICAqIEl0IGNsb3NlcyBhbnkgY3VycmVudGx5IG9wZW4gaW5kZXhkYiBkYXRhYmFzZSBjb25uZWN0aW9ucy5cbiAgICovXG4gIGRlbGV0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy50b2tlbk1hbmFnZXJfLmNsb3NlRGF0YWJhc2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IE5vdGlmaWNhdGlvbiBQZXJtaXNzaW9uIHN0YXRlLlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjdXJyZW5jdCBwZXJtaXNzaW9uIHN0YXRlLlxuICAgKi9cbiAgZ2V0Tm90aWZpY2F0aW9uUGVybWlzc2lvbl8oKSB7XG4gICAgcmV0dXJuIChOb3RpZmljYXRpb24gYXMgYW55KS5wZXJtaXNzaW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQHJldHVybnMge1Rva2VuTWFuYWdlcn1cbiAgICovXG4gIGdldFRva2VuTWFuYWdlcigpIHtcbiAgICByZXR1cm4gdGhpcy50b2tlbk1hbmFnZXJfO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgQ29udHJvbGxlckludGVyZmFjZSBmcm9tICcuL2NvbnRyb2xsZXItaW50ZXJmYWNlJztcbmltcG9ydCBFcnJvcnMgZnJvbSAnLi4vbW9kZWxzL2Vycm9ycyc7XG5pbXBvcnQgV29ya2VyUGFnZU1lc3NhZ2UgZnJvbSAnLi4vbW9kZWxzL3dvcmtlci1wYWdlLW1lc3NhZ2UnO1xuaW1wb3J0IEZDTURldGFpbHMgZnJvbSAnLi4vbW9kZWxzL2ZjbS1kZXRhaWxzJztcblxuY29uc3QgRkNNX01TRyA9ICdGQ01fTVNHJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU1dDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlckludGVyZmFjZSB7XG4gIHByaXZhdGUgYmdNZXNzYWdlSGFuZGxlcl86IChpbnB1dDogT2JqZWN0KSA9PiBQcm9taXNlPGFueT47XG5cbiAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgc3VwZXIoYXBwKTtcblxuICAgIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcigncHVzaCcsIGUgPT4gdGhpcy5vblB1c2hfKGUpLCBmYWxzZSk7XG4gICAgc2VsZi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ3B1c2hzdWJzY3JpcHRpb25jaGFuZ2UnLFxuICAgICAgZSA9PiB0aGlzLm9uU3ViQ2hhbmdlXyhlKSxcbiAgICAgIGZhbHNlXG4gICAgKTtcbiAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnbm90aWZpY2F0aW9uY2xpY2snLFxuICAgICAgZSA9PiB0aGlzLm9uTm90aWZpY2F0aW9uQ2xpY2tfKGUpLFxuICAgICAgZmFsc2VcbiAgICApO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oT2JqZWN0KXxudWxsfVxuICAgICAqL1xuICAgIHRoaXMuYmdNZXNzYWdlSGFuZGxlcl8gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgaGFuZGxlciBmb3IgcHVzaCBldmVudHMgdGhhdCBzaG93cyBub3RpZmljYXRpb25zIGJhc2VkIG9uIHRoZSBjb250ZW50IG9mXG4gICAqIHRoZSBwYXlsb2FkLlxuICAgKlxuICAgKiBUaGUgcGF5bG9hZCBtdXN0IGJlIGEgSlNPTi1lbmNvZGVkIE9iamVjdCB3aXRoIGEgYG5vdGlmaWNhdGlvbmAga2V5LiBUaGVcbiAgICogdmFsdWUgb2YgdGhlIGBub3RpZmljYXRpb25gIHByb3BlcnR5IHdpbGwgYmUgdXNlZCBhcyB0aGUgTm90aWZpY2F0aW9uT3B0aW9uc1xuICAgKiBvYmplY3QgcGFzc2VkIHRvIHNob3dOb3RpZmljYXRpb24uIEFkZGl0aW9uYWxseSwgdGhlIGB0aXRsZWAgcHJvcGVydHkgb2YgdGhlXG4gICAqIG5vdGlmaWNhdGlvbiBvYmplY3Qgd2lsbCBiZSB1c2VkIGFzIHRoZSB0aXRsZS5cbiAgICpcbiAgICogSWYgdGhlcmUgaXMgbm8gbm90aWZpY2F0aW9uIGRhdGEgaW4gdGhlIHBheWxvYWQgdGhlbiBubyBub3RpZmljYXRpb24gd2lsbCBiZVxuICAgKiBzaG93bi5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9uUHVzaF8oZXZlbnQpIHtcbiAgICBsZXQgbXNnUGF5bG9hZDtcbiAgICB0cnkge1xuICAgICAgbXNnUGF5bG9hZCA9IGV2ZW50LmRhdGEuanNvbigpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gTm90IEpTT04gc28gbm90IGFuIEZDTSBtZXNzYWdlXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaGFuZGxlTXNnUHJvbWlzZSA9IHRoaXMuaGFzVmlzaWJsZUNsaWVudHNfKCkudGhlbihcbiAgICAgIGhhc1Zpc2libGVDbGllbnRzID0+IHtcbiAgICAgICAgaWYgKGhhc1Zpc2libGVDbGllbnRzKSB7XG4gICAgICAgICAgLy8gRG8gbm90IG5lZWQgdG8gc2hvdyBhIG5vdGlmaWNhdGlvbi5cbiAgICAgICAgICBpZiAobXNnUGF5bG9hZC5ub3RpZmljYXRpb24gfHwgdGhpcy5iZ01lc3NhZ2VIYW5kbGVyXykge1xuICAgICAgICAgICAgLy8gU2VuZCB0byBwYWdlXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kTWVzc2FnZVRvV2luZG93Q2xpZW50c18obXNnUGF5bG9hZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbkRldGFpbHMgPSB0aGlzLmdldE5vdGlmaWNhdGlvbkRhdGFfKG1zZ1BheWxvYWQpO1xuICAgICAgICBpZiAobm90aWZpY2F0aW9uRGV0YWlscykge1xuICAgICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvblRpdGxlID0gbm90aWZpY2F0aW9uRGV0YWlscy50aXRsZSB8fCAnJztcbiAgICAgICAgICByZXR1cm4gKHNlbGYgYXMgYW55KS5yZWdpc3RyYXRpb24uc2hvd05vdGlmaWNhdGlvbihcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvblRpdGxlLFxuICAgICAgICAgICAgbm90aWZpY2F0aW9uRGV0YWlsc1xuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5iZ01lc3NhZ2VIYW5kbGVyXykge1xuICAgICAgICAgIHJldHVybiB0aGlzLmJnTWVzc2FnZUhhbmRsZXJfKG1zZ1BheWxvYWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcblxuICAgIGV2ZW50LndhaXRVbnRpbChoYW5kbGVNc2dQcm9taXNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgb25TdWJDaGFuZ2VfKGV2ZW50KSB7XG4gICAgY29uc3QgcHJvbWlzZUNoYWluID0gdGhpcy5nZXRUb2tlbigpLnRoZW4odG9rZW4gPT4ge1xuICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAvLyBXZSBjYW4ndCByZXN1YnNjcmliZSBpZiB3ZSBkb24ndCBoYXZlIGFuIEZDTSB0b2tlbiBmb3IgdGhpcyBzY29wZS5cbiAgICAgICAgdGhyb3cgdGhpcy5lcnJvckZhY3RvcnlfLmNyZWF0ZShcbiAgICAgICAgICBFcnJvcnMuY29kZXMuTk9fRkNNX1RPS0VOX0ZPUl9SRVNVQlNDUklCRVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBsZXQgdG9rZW5EZXRhaWxzID0gbnVsbDtcbiAgICAgIGNvbnN0IHRva2VuTWFuYWdlciA9IHRoaXMuZ2V0VG9rZW5NYW5hZ2VyKCk7XG4gICAgICByZXR1cm4gdG9rZW5NYW5hZ2VyXG4gICAgICAgIC5nZXRUb2tlbkRldGFpbHNGcm9tVG9rZW4odG9rZW4pXG4gICAgICAgIC50aGVuKGRldGFpbHMgPT4ge1xuICAgICAgICAgIHRva2VuRGV0YWlscyA9IGRldGFpbHM7XG4gICAgICAgICAgaWYgKCF0b2tlbkRldGFpbHMpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuZXJyb3JGYWN0b3J5Xy5jcmVhdGUoRXJyb3JzLmNvZGVzLklOVkFMSURfU0FWRURfVE9LRU4pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEF0dGVtcHQgdG8gZ2V0IGEgbmV3IHN1YnNjcmlwdGlvblxuICAgICAgICAgIHJldHVybiAoc2VsZiBhcyBhbnkpLnJlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlci5zdWJzY3JpYmUoXG4gICAgICAgICAgICBGQ01EZXRhaWxzLlNVQlNDUklQVElPTl9PUFRJT05TXG4gICAgICAgICAgKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4obmV3U3Vic2NyaXB0aW9uID0+IHtcbiAgICAgICAgICAvLyBTZW5kIG5ldyBzdWJzY3JpcHRpb24gdG8gRkNNLlxuICAgICAgICAgIHJldHVybiB0b2tlbk1hbmFnZXIuc3Vic2NyaWJlVG9GQ00oXG4gICAgICAgICAgICB0b2tlbkRldGFpbHMuZmNtU2VuZGVySWQsXG4gICAgICAgICAgICBuZXdTdWJzY3JpcHRpb24sXG4gICAgICAgICAgICB0b2tlbkRldGFpbHMuZmNtUHVzaFNldFxuICAgICAgICAgICk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgIC8vIFRoZSBiZXN0IHRoaW5nIHdlIGNhbiBkbyBpcyBsb2cgdGhpcyB0byB0aGUgdGVybWluYWwgc29cbiAgICAgICAgICAvLyBkZXZlbG9wZXJzIG1pZ2h0IG5vdGljZSB0aGUgZXJyb3IuXG4gICAgICAgICAgcmV0dXJuIHRva2VuTWFuYWdlci5kZWxldGVUb2tlbih0b2tlbkRldGFpbHMuZmNtVG9rZW4pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5lcnJvckZhY3RvcnlfLmNyZWF0ZShcbiAgICAgICAgICAgICAgRXJyb3JzLmNvZGVzLlVOQUJMRV9UT19SRVNVQlNDUklCRSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVyclxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGV2ZW50LndhaXRVbnRpbChwcm9taXNlQ2hhaW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvbk5vdGlmaWNhdGlvbkNsaWNrXyhldmVudCkge1xuICAgIGlmIChcbiAgICAgICEoXG4gICAgICAgIGV2ZW50Lm5vdGlmaWNhdGlvbiAmJlxuICAgICAgICBldmVudC5ub3RpZmljYXRpb24uZGF0YSAmJlxuICAgICAgICBldmVudC5ub3RpZmljYXRpb24uZGF0YVtGQ01fTVNHXVxuICAgICAgKVxuICAgICkge1xuICAgICAgLy8gTm90IGFuIEZDTSBub3RpZmljYXRpb24sIGRvIG5vdGhpbmcuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUHJldmVudCBvdGhlciBsaXN0ZW5lcnMgZnJvbSByZWNlaXZpbmcgdGhlIGV2ZW50XG4gICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cbiAgICBldmVudC5ub3RpZmljYXRpb24uY2xvc2UoKTtcblxuICAgIGNvbnN0IG1zZ1BheWxvYWQgPSBldmVudC5ub3RpZmljYXRpb24uZGF0YVtGQ01fTVNHXTtcbiAgICBjb25zdCBjbGlja0FjdGlvbiA9IG1zZ1BheWxvYWRbJ25vdGlmaWNhdGlvbiddWydjbGlja19hY3Rpb24nXTtcbiAgICBpZiAoIWNsaWNrQWN0aW9uKSB7XG4gICAgICAvLyBOb3RoaW5nIHRvIGRvLlxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHByb21pc2VDaGFpbiA9IHRoaXMuZ2V0V2luZG93Q2xpZW50XyhjbGlja0FjdGlvbilcbiAgICAgIC50aGVuKHdpbmRvd0NsaWVudCA9PiB7XG4gICAgICAgIGlmICghd2luZG93Q2xpZW50KSB7XG4gICAgICAgICAgLy8gVW5hYmxlIHRvIGZpbmQgd2luZG93IGNsaWVudCBzbyBuZWVkIHRvIG9wZW4gb25lLlxuICAgICAgICAgIHJldHVybiAoc2VsZiBhcyBhbnkpLmNsaWVudHMub3BlbldpbmRvdyhjbGlja0FjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdpbmRvd0NsaWVudDtcbiAgICAgIH0pXG4gICAgICAudGhlbih3aW5kb3dDbGllbnQgPT4ge1xuICAgICAgICBpZiAoIXdpbmRvd0NsaWVudCkge1xuICAgICAgICAgIC8vIFdpbmRvdyBDbGllbnQgd2lsbCBub3QgYmUgcmV0dXJuZWQgaWYgaXQncyBmb3IgYSB0aGlyZCBwYXJ0eSBvcmlnaW4uXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGVsZXRlIG5vdGlmaWNhdGlvbiBkYXRhIGZyb20gcGF5bG9hZCBiZWZvcmUgc2VuZGluZyB0byB0aGUgcGFnZS5cbiAgICAgICAgY29uc3Qgbm90aWZpY2F0aW9uRGF0YSA9IG1zZ1BheWxvYWRbJ25vdGlmaWNhdGlvbiddO1xuICAgICAgICBkZWxldGUgbXNnUGF5bG9hZFsnbm90aWZpY2F0aW9uJ107XG5cbiAgICAgICAgY29uc3QgaW50ZXJuYWxNc2cgPSBXb3JrZXJQYWdlTWVzc2FnZS5jcmVhdGVOZXdNc2coXG4gICAgICAgICAgV29ya2VyUGFnZU1lc3NhZ2UuVFlQRVNfT0ZfTVNHLk5PVElGSUNBVElPTl9DTElDS0VELFxuICAgICAgICAgIG1zZ1BheWxvYWRcbiAgICAgICAgKTtcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBzZW5kIGEgbWVzc2FnZSB0byB0aGUgY2xpZW50IHRvIGhhbmRsZSB0aGUgZGF0YVxuICAgICAgICAvLyBJcyBhZmZlY3RlZCBieTogaHR0cHM6Ly9naXRodWIuY29tL3NsaWdodGx5b2ZmL1NlcnZpY2VXb3JrZXIvaXNzdWVzLzcyOFxuICAgICAgICByZXR1cm4gdGhpcy5hdHRlbXB0VG9NZXNzYWdlQ2xpZW50Xyh3aW5kb3dDbGllbnQsIGludGVybmFsTXNnKTtcbiAgICAgIH0pO1xuXG4gICAgZXZlbnQud2FpdFVudGlsKHByb21pc2VDaGFpbik7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IG1zZ1BheWxvYWRcbiAgICogQHJldHVybiB7Tm90aWZpY2F0aW9uT3B0aW9uc3x1bmRlZmluZWR9XG4gICAqL1xuICBnZXROb3RpZmljYXRpb25EYXRhXyhtc2dQYXlsb2FkKSB7XG4gICAgaWYgKCFtc2dQYXlsb2FkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBtc2dQYXlsb2FkLm5vdGlmaWNhdGlvbiAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBub3RpZmljYXRpb25JbmZvcm1hdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sIG1zZ1BheWxvYWQubm90aWZpY2F0aW9uKTtcbiAgICAvLyBQdXQgdGhlIG1lc3NhZ2UgcGF5bG9hZCB1bmRlciBGQ01fTVNHIG5hbWUgc28gd2UgY2FuIGlkZW50aWZ5IHRoZVxuICAgIC8vIG5vdGlmaWNhdGlvbiBhcyBiZWluZyBhbiBGQ00gbm90aWZpY2F0aW9uIHZzIGEgbm90aWZpY2F0aW9uIGZyb21cbiAgICAvLyBzb21ld2hlcmUgZWxzZSAoaS5lLiBub3JtYWwgd2ViIHB1c2ggb3IgZGV2ZWxvcGVyIGdlbmVyYXRlZFxuICAgIC8vIG5vdGlmaWNhdGlvbikuXG4gICAgbm90aWZpY2F0aW9uSW5mb3JtYXRpb25bJ2RhdGEnXSA9IHtcbiAgICAgIFtGQ01fTVNHXTogbXNnUGF5bG9hZFxuICAgIH07XG5cbiAgICByZXR1cm4gbm90aWZpY2F0aW9uSW5mb3JtYXRpb247XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGluZyBzZXRCYWNrZ3JvdW5kTWVzc2FnZUhhbmRsZXIgd2lsbCBvcHQgaW4gdG8gc29tZSBzcGVjaWZpY1xuICAgKiBiZWhhdmlvdXJzLlxuICAgKiAxLikgSWYgYSBub3RpZmljYXRpb24gZG9lc24ndCBuZWVkIHRvIGJlIHNob3duIGR1ZSB0byBhIHdpbmRvdyBhbHJlYWR5XG4gICAqIGJlaW5nIHZpc2libGUsIHRoZW4gcHVzaCBtZXNzYWdlcyB3aWxsIGJlIHNlbnQgdG8gdGhlIHBhZ2UuXG4gICAqIDIuKSBJZiBhIG5vdGlmaWNhdGlvbiBuZWVkcyB0byBiZSBzaG93biwgYW5kIHRoZSBtZXNzYWdlIGNvbnRhaW5zIG5vXG4gICAqIG5vdGlmaWNhdGlvbiBkYXRhIHRoaXMgbWV0aG9kIHdpbGwgYmUgY2FsbGVkXG4gICAqIGFuZCB0aGUgcHJvbWlzZSBpdCByZXR1cm5zIHdpbGwgYmUgcGFzc2VkIHRvIGV2ZW50LndhaXRVbnRpbC5cbiAgICogSWYgeW91IGRvIG5vdCBzZXQgdGhpcyBjYWxsYmFjayB0aGVuIGFsbCBwdXNoIG1lc3NhZ2VzIHdpbGwgbGV0IGFuZCB0aGVcbiAgICogZGV2ZWxvcGVyIGNhbiBoYW5kbGUgdGhlbSBpbiBhIHRoZWlyIG93biAncHVzaCcgZXZlbnQgY2FsbGJhY2tcbiAgICogQGV4cG9ydFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKE9iamVjdCl9IGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgd2hlbiBhIHB1c2hcbiAgICogbWVzc2FnZSBpcyByZWNlaXZlZCBhbmQgYSBub3RpZmljYXRpb24gbXVzdCBiZSBzaG93bi4gVGhlIGNhbGxiYWNrIHdpbGxcbiAgICogYmUgZ2l2ZW4gdGhlIGRhdGEgZnJvbSB0aGUgcHVzaCBtZXNzYWdlLlxuICAgKi9cbiAgc2V0QmFja2dyb3VuZE1lc3NhZ2VIYW5kbGVyKGNhbGxiYWNrKSB7XG4gICAgaWYgKGNhbGxiYWNrICYmIHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgdGhpcy5lcnJvckZhY3RvcnlfLmNyZWF0ZShcbiAgICAgICAgRXJyb3JzLmNvZGVzLkJHX0hBTkRMRVJfRlVOQ1RJT05fRVhQRUNURURcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5iZ01lc3NhZ2VIYW5kbGVyXyA9IGNhbGxiYWNrO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCB0byBsb29rIGZvciB3aGVuIGZvY3VzaW5nIGEgY2xpZW50LlxuICAgKiBAcmV0dXJuIHtPYmplY3R9IFJldHVybnMgYW4gZXhpc3Rpbmcgd2luZG93IGNsaWVudCBvciBhIG5ld2x5IG9wZW5lZFxuICAgKiBXaW5kb3dDbGllbnQuXG4gICAqL1xuICBnZXRXaW5kb3dDbGllbnRfKHVybCkge1xuICAgIC8vIFVzZSBVUkwgdG8gbm9ybWFsaXplIHRoZSBVUkwgd2hlbiBjb21wYXJpbmcgdG8gd2luZG93Q2xpZW50cy5cbiAgICAvLyBUaGlzIGF0IGxlYXN0IGhhbmRsZXMgd2hldGhlciB0byBpbmNsdWRlIHRyYWlsaW5nIHNsYXNoZXMgb3Igbm90XG4gICAgY29uc3QgcGFyc2VkVVJMID0gbmV3IFVSTCh1cmwpLmhyZWY7XG5cbiAgICByZXR1cm4gKHNlbGYgYXMgYW55KS5jbGllbnRzXG4gICAgICAubWF0Y2hBbGwoe1xuICAgICAgICB0eXBlOiAnd2luZG93JyxcbiAgICAgICAgaW5jbHVkZVVuY29udHJvbGxlZDogdHJ1ZVxuICAgICAgfSlcbiAgICAgIC50aGVuKGNsaWVudExpc3QgPT4ge1xuICAgICAgICBsZXQgc3VpdGFibGVDbGllbnQgPSBudWxsO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNsaWVudExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBwYXJzZWRDbGllbnRVcmwgPSBuZXcgVVJMKGNsaWVudExpc3RbaV0udXJsKS5ocmVmO1xuICAgICAgICAgIGlmIChwYXJzZWRDbGllbnRVcmwgPT09IHBhcnNlZFVSTCkge1xuICAgICAgICAgICAgc3VpdGFibGVDbGllbnQgPSBjbGllbnRMaXN0W2ldO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN1aXRhYmxlQ2xpZW50KSB7XG4gICAgICAgICAgc3VpdGFibGVDbGllbnQuZm9jdXMoKTtcbiAgICAgICAgICByZXR1cm4gc3VpdGFibGVDbGllbnQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgbWVzc2FnZSB3aWxsIGF0dGVtcHQgdG8gc2VuZCB0aGUgbWVzc2FnZSB0byBhIHdpbmRvdyBjbGllbnQuXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjbGllbnQgVGhlIFdpbmRvd0NsaWVudCB0byBzZW5kIHRoZSBtZXNzYWdlIHRvLlxuICAgKiBAcGFyYW0ge09iamVjdH0gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBzZW5kIHRvIHRoZSBjbGllbnQuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIHNlbmRpbmcgdGhlXG4gICAqIG1lc3NhZ2UuIFRoaXMgZG9lcyBub3QgZ3VhcmFudGVlIHRoYXQgdGhlIG1lc3NhZ2Ugd2FzIHN1Y2Nlc3NmdWxseVxuICAgKiByZWNlaXZlZC5cbiAgICovXG4gIGF0dGVtcHRUb01lc3NhZ2VDbGllbnRfKGNsaWVudCwgbWVzc2FnZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBpZiAoIWNsaWVudCkge1xuICAgICAgICByZXR1cm4gcmVqZWN0KFxuICAgICAgICAgIHRoaXMuZXJyb3JGYWN0b3J5Xy5jcmVhdGUoRXJyb3JzLmNvZGVzLk5PX1dJTkRPV19DTElFTlRfVE9fTVNHKVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjbGllbnQucG9zdE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICByZXNvbHZlKCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IElmIHRoZXJlIGlzIGN1cnJlbnRseSBhIHZpc2libGUgV2luZG93Q2xpZW50LFxuICAgKiB0aGlzIG1ldGhvZCB3aWxsIHJlc29sdmUgdG8gdHJ1ZSwgb3RoZXJ3aXNlIGZhbHNlLlxuICAgKi9cbiAgaGFzVmlzaWJsZUNsaWVudHNfKCkge1xuICAgIHJldHVybiAoc2VsZiBhcyBhbnkpLmNsaWVudHNcbiAgICAgIC5tYXRjaEFsbCh7XG4gICAgICAgIHR5cGU6ICd3aW5kb3cnLFxuICAgICAgICBpbmNsdWRlVW5jb250cm9sbGVkOiB0cnVlXG4gICAgICB9KVxuICAgICAgLnRoZW4oY2xpZW50TGlzdCA9PiB7XG4gICAgICAgIHJldHVybiBjbGllbnRMaXN0LnNvbWUoY2xpZW50ID0+IGNsaWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICd2aXNpYmxlJyk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gbXNnUGF5bG9hZCBUaGUgZGF0YSBmcm9tIHRoZSBwdXNoIGV2ZW50IHRoYXQgc2hvdWxkIGJlIHNlbnRcbiAgICogdG8gYWxsIGF2YWlsYWJsZSBwYWdlcy5cbiAgICogQHJldHVybnMge1Byb21pc2V9IFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSB0aGUgbWVzc2FnZVxuICAgKiBoYXMgYmVlbiBzZW50IHRvIGFsbCBXaW5kb3dDbGllbnRzLlxuICAgKi9cbiAgc2VuZE1lc3NhZ2VUb1dpbmRvd0NsaWVudHNfKG1zZ1BheWxvYWQpIHtcbiAgICByZXR1cm4gKHNlbGYgYXMgYW55KS5jbGllbnRzXG4gICAgICAubWF0Y2hBbGwoe1xuICAgICAgICB0eXBlOiAnd2luZG93JyxcbiAgICAgICAgaW5jbHVkZVVuY29udHJvbGxlZDogdHJ1ZVxuICAgICAgfSlcbiAgICAgIC50aGVuKGNsaWVudExpc3QgPT4ge1xuICAgICAgICBjb25zdCBpbnRlcm5hbE1zZyA9IFdvcmtlclBhZ2VNZXNzYWdlLmNyZWF0ZU5ld01zZyhcbiAgICAgICAgICBXb3JrZXJQYWdlTWVzc2FnZS5UWVBFU19PRl9NU0cuUFVTSF9NU0dfUkVDRUlWRUQsXG4gICAgICAgICAgbXNnUGF5bG9hZFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChcbiAgICAgICAgICBjbGllbnRMaXN0Lm1hcChjbGllbnQgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXR0ZW1wdFRvTWVzc2FnZUNsaWVudF8oY2xpZW50LCBpbnRlcm5hbE1zZyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgd2lsbCByZWdpc3RlciB0aGUgZGVmYXVsdCBzZXJ2aWNlIHdvcmtlciBhbmQgcmV0dXJuIHRoZSByZWdpc3RyYXRpb24uXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge1Byb21pc2U8IVNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24+fSBUaGUgc2VydmljZSB3b3JrZXJcbiAgICogcmVnaXN0cmF0aW9uIHRvIGJlIHVzZWQgZm9yIHRoZSBwdXNoIHNlcnZpY2UuXG4gICAqL1xuICBnZXRTV1JlZ2lzdHJhdGlvbl8oKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgoc2VsZiBhcyBhbnkpLnJlZ2lzdHJhdGlvbik7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBDb250cm9sbGVySW50ZXJmYWNlIGZyb20gJy4vY29udHJvbGxlci1pbnRlcmZhY2UnO1xuaW1wb3J0IEVycm9ycyBmcm9tICcuLi9tb2RlbHMvZXJyb3JzJztcbmltcG9ydCBXb3JrZXJQYWdlTWVzc2FnZSBmcm9tICcuLi9tb2RlbHMvd29ya2VyLXBhZ2UtbWVzc2FnZSc7XG5pbXBvcnQgRGVmYXVsdFNXIGZyb20gJy4uL21vZGVscy9kZWZhdWx0LXN3JztcbmltcG9ydCBOT1RJRklDQVRJT05fUEVSTUlTU0lPTiBmcm9tICcuLi9tb2RlbHMvbm90aWZpY2F0aW9uLXBlcm1pc3Npb24nO1xuaW1wb3J0IHsgY3JlYXRlU3Vic2NyaWJlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG5kZWNsYXJlIGNvbnN0IGZpcmViYXNlOiBhbnk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdpbmRvd0NvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVySW50ZXJmYWNlIHtcbiAgcHJpdmF0ZSByZWdpc3RyYXRpb25Ub1VzZV87XG4gIHByaXZhdGUgbWFuaWZlc3RDaGVja1Byb21pc2VfO1xuICBwcml2YXRlIG1lc3NhZ2VPYnNlcnZlcl87XG4gIHByaXZhdGUgb25NZXNzYWdlXztcbiAgcHJpdmF0ZSB0b2tlblJlZnJlc2hPYnNlcnZlcl87XG4gIHByaXZhdGUgb25Ub2tlblJlZnJlc2hfO1xuXG4gIC8qKlxuICAgKiBBIHNlcnZpY2UgdGhhdCBwcm92aWRlcyBhIE1lc3NhZ2luZ1NlcnZpY2UgaW5zdGFuY2UuXG4gICAqIEBwYXJhbSB7IWZpcmViYXNlLmFwcC5BcHB9IGFwcFxuICAgKi9cbiAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgc3VwZXIoYXBwKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge1NlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb259XG4gICAgICovXG4gICAgdGhpcy5yZWdpc3RyYXRpb25Ub1VzZV87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtQcm9taXNlfVxuICAgICAqL1xuICAgIHRoaXMubWFuaWZlc3RDaGVja1Byb21pc2VfO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7ZmlyZWJhc2UuT2JzZXJ2ZXJ9XG4gICAgICovXG4gICAgdGhpcy5tZXNzYWdlT2JzZXJ2ZXJfID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZSB7IWZpcmViYXNlLlN1YnNjcmliZX0gVGhlIHN1YnNjcmliZSBmdW5jdGlvbiB0byB0aGUgb25NZXNzYWdlXG4gICAgICogb2JzZXJ2ZXIuXG4gICAgICovXG4gICAgdGhpcy5vbk1lc3NhZ2VfID0gY3JlYXRlU3Vic2NyaWJlKG9ic2VydmVyID0+IHtcbiAgICAgIHRoaXMubWVzc2FnZU9ic2VydmVyXyA9IG9ic2VydmVyO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7ZmlyZWJhc2UuT2JzZXJ2ZXJ9XG4gICAgICovXG4gICAgdGhpcy50b2tlblJlZnJlc2hPYnNlcnZlcl8gPSBudWxsO1xuICAgIHRoaXMub25Ub2tlblJlZnJlc2hfID0gY3JlYXRlU3Vic2NyaWJlKG9ic2VydmVyID0+IHtcbiAgICAgIHRoaXMudG9rZW5SZWZyZXNoT2JzZXJ2ZXJfID0gb2JzZXJ2ZXI7XG4gICAgfSk7XG5cbiAgICB0aGlzLnNldHVwU1dNZXNzYWdlTGlzdGVuZXJfKCk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgcmV0dXJucyBhbiBGQ00gdG9rZW4gaWYgaXQgY2FuIGJlIGdlbmVyYXRlZC5cbiAgICogVGhlIHJldHVybiBwcm9taXNlIHdpbGwgcmVqZWN0IGlmIHRoZSBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydFxuICAgKiBGQ00sIGlmIHBlcm1pc3Npb24gaXMgZGVuaWVkIGZvciBub3RpZmljYXRpb25zIG9yIGl0J3Mgbm90XG4gICAqIHBvc3NpYmxlIHRvIGdlbmVyYXRlIGEgdG9rZW4uXG4gICAqIEBleHBvcnRcbiAgICogQHJldHVybiB7UHJvbWlzZTxzdHJpbmc+IHwgUHJvbWlzZTxudWxsPn0gUmV0dXJucyBhIHByb21pc2UgdGhlXG4gICAqIHJlc29sdmVzIHRvIGFuIEZDTSB0b2tlbiBvciBudWxsIGlmIHBlcm1pc3Npb24gaXNuJ3QgZ3JhbnRlZC5cbiAgICovXG4gIGdldFRva2VuKCkge1xuICAgIC8vIENoZWNrIHRoYXQgdGhlIHJlcXVpcmVkIEFQSSdzIGFyZSBhdmFpbGFibGVcbiAgICBpZiAoIXRoaXMuaXNTdXBwb3J0ZWRfKCkpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcbiAgICAgICAgdGhpcy5lcnJvckZhY3RvcnlfLmNyZWF0ZShFcnJvcnMuY29kZXMuVU5TVVBQT1JURURfQlJPV1NFUilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubWFuaWZlc3RDaGVja18oKS50aGVuKCgpID0+IHtcbiAgICAgIHJldHVybiBzdXBlci5nZXRUb2tlbigpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBtZXRob2QgY2hlY2tzIHRoYXQgYSBtYW5pZmVzdCBpcyBkZWZpbmVkIGFuZCBoYXMgdGhlIGNvcnJlY3QgR0NNXG4gICAqIHNlbmRlciBJRC5cbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7UHJvbWlzZX0gUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBpZiB0aGUgbWFuaWZlc3QgbWF0Y2hlc1xuICAgKiBvdXIgcmVxdWlyZWQgc2VuZGVyIElEXG4gICAqL1xuICBtYW5pZmVzdENoZWNrXygpIHtcbiAgICBpZiAodGhpcy5tYW5pZmVzdENoZWNrUHJvbWlzZV8pIHtcbiAgICAgIHJldHVybiB0aGlzLm1hbmlmZXN0Q2hlY2tQcm9taXNlXztcbiAgICB9XG5cbiAgICBjb25zdCBtYW5pZmVzdFRhZyA9IDxIVE1MQW5jaG9yRWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgJ2xpbmtbcmVsPVwibWFuaWZlc3RcIl0nXG4gICAgKTtcbiAgICBpZiAoIW1hbmlmZXN0VGFnKSB7XG4gICAgICB0aGlzLm1hbmlmZXN0Q2hlY2tQcm9taXNlXyA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1hbmlmZXN0Q2hlY2tQcm9taXNlXyA9IGZldGNoKG1hbmlmZXN0VGFnLmhyZWYpXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgIC8vIElmIHRoZSBkb3dubG9hZCBvciBwYXJzaW5nIGZhaWxzIGFsbG93IGNoZWNrLlxuICAgICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byBlcnJvciBpZiB3ZSBLTk9XIHRoYXQgdGhlIGdjbV9zZW5kZXJfaWQgaXMgaW5jb3JyZWN0LlxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4obWFuaWZlc3RDb250ZW50ID0+IHtcbiAgICAgICAgICBpZiAoIW1hbmlmZXN0Q29udGVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghbWFuaWZlc3RDb250ZW50WydnY21fc2VuZGVyX2lkJ10pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAobWFuaWZlc3RDb250ZW50WydnY21fc2VuZGVyX2lkJ10gIT09ICcxMDM5NTM4MDA1MDcnKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmVycm9yRmFjdG9yeV8uY3JlYXRlKFxuICAgICAgICAgICAgICBFcnJvcnMuY29kZXMuSU5DT1JSRUNUX0dDTV9TRU5ERVJfSURcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5tYW5pZmVzdENoZWNrUHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogUmVxdWVzdCBwZXJtaXNzaW9uIGlmIGl0IGlzIG5vdCBjdXJyZW50bHkgZ3JhbnRlZFxuICAgKiBAZXhwb3J0XG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBSZXNvbHZlcyBpZiB0aGUgcGVybWlzc2lvbiB3YXMgZ3JhbnRlZCwgb3RoZXJ3aXNlXG4gICAqIHJlamVjdHNcbiAgICovXG4gIHJlcXVlc3RQZXJtaXNzaW9uKCkge1xuICAgIGlmICgoTm90aWZpY2F0aW9uIGFzIGFueSkucGVybWlzc2lvbiA9PT0gTk9USUZJQ0FUSU9OX1BFUk1JU1NJT04uZ3JhbnRlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBtYW5hZ2VQZXJtaXNzaW9uUmVzdWx0ID0gcmVzdWx0ID0+IHtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gTk9USUZJQ0FUSU9OX1BFUk1JU1NJT04uZ3JhbnRlZCkge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0ID09PSBOT1RJRklDQVRJT05fUEVSTUlTU0lPTi5kZW5pZWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KFxuICAgICAgICAgICAgdGhpcy5lcnJvckZhY3RvcnlfLmNyZWF0ZShFcnJvcnMuY29kZXMuUEVSTUlTU0lPTl9CTE9DS0VEKVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdChcbiAgICAgICAgICAgIHRoaXMuZXJyb3JGYWN0b3J5Xy5jcmVhdGUoRXJyb3JzLmNvZGVzLlBFUk1JU1NJT05fREVGQVVMVClcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBUaGUgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uIEFQSSB3YXMgY2hhbmdlZCB0b1xuICAgICAgLy8gcmV0dXJuIGEgcHJvbWlzZSBzbyBub3cgaGF2ZSB0byBoYW5kbGUgYm90aCBpbiBjYXNlXG4gICAgICAvLyBicm93c2VycyBzdG9wIHN1cHBvcnQgY2FsbGJhY2tzIGZvciBwcm9taXNlZCB2ZXJzaW9uXG4gICAgICBjb25zdCBwZXJtaXNzaW9uUHJvbWlzZSA9IE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbihyZXN1bHQgPT4ge1xuICAgICAgICBpZiAocGVybWlzc2lvblByb21pc2UpIHtcbiAgICAgICAgICAvLyBMZXQgdGhlIHByb21pc2UgbWFuYWdlIHRoaXNcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBtYW5hZ2VQZXJtaXNzaW9uUmVzdWx0KHJlc3VsdCk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHBlcm1pc3Npb25Qcm9taXNlKSB7XG4gICAgICAgIC8vIFByZWZlciB0aGUgcHJvbWlzZSB2ZXJzaW9uIGFzIGl0J3MgdGhlIGZ1dHVyZSBBUEkuXG4gICAgICAgIHBlcm1pc3Npb25Qcm9taXNlLnRoZW4obWFuYWdlUGVybWlzc2lvblJlc3VsdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgYWxsb3dzIGEgZGV2ZWxvcGVyIHRvIG92ZXJyaWRlIHRoZSBkZWZhdWx0IHNlcnZpY2Ugd29ya2VyIGFuZFxuICAgKiBpbnN0ZWFkIHVzZSBhIGN1c3RvbSBzZXJ2aWNlIHdvcmtlci5cbiAgICogQGV4cG9ydFxuICAgKiBAcGFyYW0geyFTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9ufSByZWdpc3RyYXRpb24gVGhlIHNlcnZpY2Ugd29ya2VyXG4gICAqIHJlZ2lzdHJhdGlvbiB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIHJlY2VpdmUgdGhlIHB1c2ggbWVzc2FnZXMuXG4gICAqL1xuICB1c2VTZXJ2aWNlV29ya2VyKHJlZ2lzdHJhdGlvbikge1xuICAgIGlmICghKHJlZ2lzdHJhdGlvbiBpbnN0YW5jZW9mIFNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24pKSB7XG4gICAgICB0aHJvdyB0aGlzLmVycm9yRmFjdG9yeV8uY3JlYXRlKEVycm9ycy5jb2Rlcy5TV19SRUdJU1RSQVRJT05fRVhQRUNURUQpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdGhpcy5yZWdpc3RyYXRpb25Ub1VzZV8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aHJvdyB0aGlzLmVycm9yRmFjdG9yeV8uY3JlYXRlKEVycm9ycy5jb2Rlcy5VU0VfU1dfQkVGT1JFX0dFVF9UT0tFTik7XG4gICAgfVxuXG4gICAgdGhpcy5yZWdpc3RyYXRpb25Ub1VzZV8gPSByZWdpc3RyYXRpb247XG4gIH1cblxuICAvKipcbiAgICogQGV4cG9ydFxuICAgKiBAcGFyYW0geyFmaXJlYmFzZS5PYnNlcnZlcnxmdW5jdGlvbigqKX0gbmV4dE9yT2JzZXJ2ZXIgQW4gb2JzZXJ2ZXIgb2JqZWN0XG4gICAqIG9yIGEgZnVuY3Rpb24gdHJpZ2dlcmVkIG9uIG1lc3NhZ2UuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUVycm9yKT19IG9wdEVycm9yIE9wdGlvbmFsIEEgZnVuY3Rpb24gdHJpZ2dlcmVkIG9uXG4gICAqIG1lc3NhZ2UgZXJyb3IuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKT19IG9wdENvbXBsZXRlZCBPcHRpb25hbCBmdW5jdGlvbiB0cmlnZ2VyZWQgd2hlbiB0aGVcbiAgICogb2JzZXJ2ZXIgaXMgcmVtb3ZlZC5cbiAgICogQHJldHVybiB7IWZ1bmN0aW9uKCl9IFRoZSB1bnN1YnNjcmliZSBmdW5jdGlvbiBmb3IgdGhlIG9ic2VydmVyLlxuICAgKi9cbiAgb25NZXNzYWdlKG5leHRPck9ic2VydmVyLCBvcHRFcnJvciwgb3B0Q29tcGxldGVkKSB7XG4gICAgcmV0dXJuIHRoaXMub25NZXNzYWdlXyhuZXh0T3JPYnNlcnZlciwgb3B0RXJyb3IsIG9wdENvbXBsZXRlZCk7XG4gIH1cblxuICAvKipcbiAgICogQGV4cG9ydFxuICAgKiBAcGFyYW0geyFmaXJlYmFzZS5PYnNlcnZlcnxmdW5jdGlvbigpfSBuZXh0T3JPYnNlcnZlciBBbiBvYnNlcnZlciBvYmplY3RcbiAgICogb3IgYSBmdW5jdGlvbiB0cmlnZ2VyZWQgb24gdG9rZW4gcmVmcmVzaC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbighRXJyb3IpPX0gb3B0RXJyb3IgT3B0aW9uYWwgQSBmdW5jdGlvblxuICAgKiB0cmlnZ2VyZWQgb24gdG9rZW4gcmVmcmVzaCBlcnJvci5cbiAgICogQHBhcmFtIHtmdW5jdGlvbigpPX0gb3B0Q29tcGxldGVkIE9wdGlvbmFsIGZ1bmN0aW9uIHRyaWdnZXJlZCB3aGVuIHRoZVxuICAgKiBvYnNlcnZlciBpcyByZW1vdmVkLlxuICAgKiBAcmV0dXJuIHshZnVuY3Rpb24oKX0gVGhlIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIGZvciB0aGUgb2JzZXJ2ZXIuXG4gICAqL1xuICBvblRva2VuUmVmcmVzaChuZXh0T3JPYnNlcnZlciwgb3B0RXJyb3IsIG9wdENvbXBsZXRlZCkge1xuICAgIHJldHVybiB0aGlzLm9uVG9rZW5SZWZyZXNoXyhuZXh0T3JPYnNlcnZlciwgb3B0RXJyb3IsIG9wdENvbXBsZXRlZCk7XG4gIH1cblxuICAvKipcbiAgICogR2l2ZW4gYSByZWdpc3RyYXRpb24sIHdhaXQgZm9yIHRoZSBzZXJ2aWNlIHdvcmtlciBpdCByZWxhdGVzIHRvXG4gICAqIGJlY29tZSBhY3RpdmVyXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSAge1NlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb259IHJlZ2lzdHJhdGlvbiBSZWdpc3RyYXRpb24gdG8gd2FpdFxuICAgKiBmb3Igc2VydmljZSB3b3JrZXIgdG8gYmVjb21lIGFjdGl2ZVxuICAgKiBAcmV0dXJuIHtQcm9taXNlPCFTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uPn0gV2FpdCBmb3Igc2VydmljZSB3b3JrZXJcbiAgICogcmVnaXN0cmF0aW9uIHRvIGJlY29tZSBhY3RpdmVcbiAgICovXG4gIHdhaXRGb3JSZWdpc3RyYXRpb25Ub0FjdGl2YXRlXyhyZWdpc3RyYXRpb24pIHtcbiAgICBjb25zdCBzZXJ2aWNlV29ya2VyID1cbiAgICAgIHJlZ2lzdHJhdGlvbi5pbnN0YWxsaW5nIHx8IHJlZ2lzdHJhdGlvbi53YWl0aW5nIHx8IHJlZ2lzdHJhdGlvbi5hY3RpdmU7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2U8U2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbj4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYgKCFzZXJ2aWNlV29ya2VyKSB7XG4gICAgICAgIC8vIFRoaXMgaXMgYSByYXJlIHNjZW5hcmlvIGJ1dCBoYXMgb2NjdXJlZCBpbiBmaXJlZm94XG4gICAgICAgIHJlamVjdCh0aGlzLmVycm9yRmFjdG9yeV8uY3JlYXRlKEVycm9ycy5jb2Rlcy5OT19TV19JTl9SRUcpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gQmVjYXVzZSB0aGUgUHJvbWlzZSBmdW5jdGlvbiBpcyBjYWxsZWQgb24gbmV4dCB0aWNrIHRoZXJlIGlzIGFcbiAgICAgIC8vIHNtYWxsIGNoYW5jZSB0aGF0IHRoZSB3b3JrZXIgYmVjYW1lIGFjdGl2ZSBvciByZWR1bmRhbnQgYWxyZWFkeS5cbiAgICAgIGlmIChzZXJ2aWNlV29ya2VyLnN0YXRlID09PSAnYWN0aXZhdGVkJykge1xuICAgICAgICByZXNvbHZlKHJlZ2lzdHJhdGlvbik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlcnZpY2VXb3JrZXIuc3RhdGUgPT09ICdyZWR1bmRhbnQnKSB7XG4gICAgICAgIHJlamVjdCh0aGlzLmVycm9yRmFjdG9yeV8uY3JlYXRlKEVycm9ycy5jb2Rlcy5TV19SRUdfUkVEVU5EQU5UKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IHN0YXRlQ2hhbmdlTGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgIGlmIChzZXJ2aWNlV29ya2VyLnN0YXRlID09PSAnYWN0aXZhdGVkJykge1xuICAgICAgICAgIHJlc29sdmUocmVnaXN0cmF0aW9uKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZXJ2aWNlV29ya2VyLnN0YXRlID09PSAncmVkdW5kYW50Jykge1xuICAgICAgICAgIHJlamVjdCh0aGlzLmVycm9yRmFjdG9yeV8uY3JlYXRlKEVycm9ycy5jb2Rlcy5TV19SRUdfUkVEVU5EQU5UKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUmV0dXJuIGVhcmx5IGFuZCB3YWl0IHRvIG5leHQgc3RhdGUgY2hhbmdlXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNlcnZpY2VXb3JrZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3RhdGVjaGFuZ2UnLCBzdGF0ZUNoYW5nZUxpc3RlbmVyKTtcbiAgICAgIH07XG4gICAgICBzZXJ2aWNlV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ3N0YXRlY2hhbmdlJywgc3RhdGVDaGFuZ2VMaXN0ZW5lcik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyB3aWxsIHJlZ2lhdGVyIHRoZSBkZWZhdWx0IHNlcnZpY2Ugd29ya2VyIGFuZCByZXR1cm4gdGhlIHJlZ2lzdHJhdGlvblxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJuIHtQcm9taXNlPCFTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uPn0gVGhlIHNlcnZpY2Ugd29ya2VyXG4gICAqIHJlZ2lzdHJhdGlvbiB0byBiZSB1c2VkIGZvciB0aGUgcHVzaCBzZXJ2aWNlLlxuICAgKi9cbiAgZ2V0U1dSZWdpc3RyYXRpb25fKCkge1xuICAgIGlmICh0aGlzLnJlZ2lzdHJhdGlvblRvVXNlXykge1xuICAgICAgcmV0dXJuIHRoaXMud2FpdEZvclJlZ2lzdHJhdGlvblRvQWN0aXZhdGVfKHRoaXMucmVnaXN0cmF0aW9uVG9Vc2VfKTtcbiAgICB9XG5cbiAgICAvLyBNYWtlIHRoZSByZWdpc3RyYXRpb24gbnVsbCBzbyB3ZSBrbm93IHVzZVNlcnZpY2VXb3JrZXIgd2lsbCBub3RcbiAgICAvLyB1c2UgYSBuZXcgc2VydmljZSB3b3JrZXIgYXMgcmVnaXN0cmF0aW9uVG9Vc2VfIGlzIG5vIGxvbmdlciB1bmRlZmluZWRcbiAgICB0aGlzLnJlZ2lzdHJhdGlvblRvVXNlXyA9IG51bGw7XG5cbiAgICByZXR1cm4gbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXJcbiAgICAgIC5yZWdpc3RlcihEZWZhdWx0U1cucGF0aCwge1xuICAgICAgICBzY29wZTogRGVmYXVsdFNXLnNjb3BlXG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIHRocm93IHRoaXMuZXJyb3JGYWN0b3J5Xy5jcmVhdGUoXG4gICAgICAgICAgRXJyb3JzLmNvZGVzLkZBSUxFRF9ERUZBVUxUX1JFR0lTVFJBVElPTixcbiAgICAgICAgICB7XG4gICAgICAgICAgICBicm93c2VyRXJyb3JNZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihyZWdpc3RyYXRpb24gPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy53YWl0Rm9yUmVnaXN0cmF0aW9uVG9BY3RpdmF0ZV8ocmVnaXN0cmF0aW9uKS50aGVuKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnJlZ2lzdHJhdGlvblRvVXNlXyA9IHJlZ2lzdHJhdGlvbjtcblxuICAgICAgICAgIC8vIFdlIHVwZGF0ZSBhZnRlciBhY3RpdmF0aW9uIGR1ZSB0byBhbiBpc3N1ZSB3aXRoIEZpcmVmb3ggdjQ5IHdoZXJlXG4gICAgICAgICAgLy8gYSByYWNlIGNvbmRpdGlvbiBvY2Nhc3Npb25hbGx5IGNhdXNlcyB0aGUgc2VydmljZSB3b3JrIHRvIG5vdFxuICAgICAgICAgIC8vIGluc3RhbGxcbiAgICAgICAgICByZWdpc3RyYXRpb24udXBkYXRlKCk7XG5cbiAgICAgICAgICByZXR1cm4gcmVnaXN0cmF0aW9uO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgc2V0IHVwIGEgbWVzc2FnZSBsaXN0ZW5lciB0byBoYW5kbGVcbiAgICogZXZlbnRzIGZyb20gdGhlIHNlcnZpY2Ugd29ya2VyIHRoYXQgc2hvdWxkIHRyaWdnZXJcbiAgICogZXZlbnRzIGluIHRoZSBwYWdlLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2V0dXBTV01lc3NhZ2VMaXN0ZW5lcl8oKSB7XG4gICAgaWYgKCEoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ21lc3NhZ2UnLFxuICAgICAgZXZlbnQgPT4ge1xuICAgICAgICBpZiAoIWV2ZW50LmRhdGEgfHwgIWV2ZW50LmRhdGFbV29ya2VyUGFnZU1lc3NhZ2UuUEFSQU1TLlRZUEVfT0ZfTVNHXSkge1xuICAgICAgICAgIC8vIE5vdCBhIG1lc3NhZ2UgZnJvbSBGQ01cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB3b3JrZXJQYWdlTWVzc2FnZSA9IGV2ZW50LmRhdGE7XG4gICAgICAgIHN3aXRjaCAod29ya2VyUGFnZU1lc3NhZ2VbV29ya2VyUGFnZU1lc3NhZ2UuUEFSQU1TLlRZUEVfT0ZfTVNHXSkge1xuICAgICAgICAgIGNhc2UgV29ya2VyUGFnZU1lc3NhZ2UuVFlQRVNfT0ZfTVNHLlBVU0hfTVNHX1JFQ0VJVkVEOlxuICAgICAgICAgIGNhc2UgV29ya2VyUGFnZU1lc3NhZ2UuVFlQRVNfT0ZfTVNHLk5PVElGSUNBVElPTl9DTElDS0VEOlxuICAgICAgICAgICAgY29uc3QgcHVzaE1lc3NhZ2UgPVxuICAgICAgICAgICAgICB3b3JrZXJQYWdlTWVzc2FnZVtXb3JrZXJQYWdlTWVzc2FnZS5QQVJBTVMuREFUQV07XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VPYnNlcnZlcl8ubmV4dChwdXNoTWVzc2FnZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgLy8gTm9vcC5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZmFsc2VcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyB0byBzZWUgaWYgdGhlIHJlcXVpcmVkIEFQSSdzIGFyZSB2YWxpZCBvciBub3QuXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiB0aGUgZGVzaXJlZCBBUElzIGFyZSBhdmFpbGFibGUuXG4gICAqL1xuICBpc1N1cHBvcnRlZF8oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IgJiZcbiAgICAgICdQdXNoTWFuYWdlcicgaW4gd2luZG93ICYmXG4gICAgICAnTm90aWZpY2F0aW9uJyBpbiB3aW5kb3cgJiZcbiAgICAgICdmZXRjaCcgaW4gd2luZG93ICYmXG4gICAgICBTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSgnc2hvd05vdGlmaWNhdGlvbicpICYmXG4gICAgICBQdXNoU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSgnZ2V0S2V5JylcbiAgICApO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gdG9CYXNlNjQoYXJyYXlCdWZmZXIpIHtcbiAgY29uc3QgdWludDhWZXJzaW9uID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpO1xuICByZXR1cm4gd2luZG93LmJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCB1aW50OFZlcnNpb24pKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYXJyYXlCdWZmZXIgPT4ge1xuICBjb25zdCBiYXNlNjRTdHJpbmcgPSB0b0Jhc2U2NChhcnJheUJ1ZmZlcik7XG4gIHJldHVybiBiYXNlNjRTdHJpbmdcbiAgICAucmVwbGFjZSgvPS9nLCAnJylcbiAgICAucmVwbGFjZSgvXFwrL2csICctJylcbiAgICAucmVwbGFjZSgvXFwvL2csICdfJyk7XG59O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGRlZmF1bHQge1xuICBwYXRoOiAnL2ZpcmViYXNlLW1lc3NhZ2luZy1zdy5qcycsXG4gIHNjb3BlOiAnL2ZpcmViYXNlLWNsb3VkLW1lc3NhZ2luZy1wdXNoLXNjb3BlJ1xufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IENPREVTID0ge1xuICBBVkFJTEFCTEVfSU5fV0lORE9XOiAnb25seS1hdmFpbGFibGUtaW4td2luZG93JyxcbiAgQVZBSUxBQkxFX0lOX1NXOiAnb25seS1hdmFpbGFibGUtaW4tc3cnLFxuICBTSE9VTERfQkVfSU5IRVJJVEVEOiAnc2hvdWxkLWJlLW92ZXJyaWRlbicsXG4gIEJBRF9TRU5ERVJfSUQ6ICdiYWQtc2VuZGVyLWlkJyxcbiAgSU5DT1JSRUNUX0dDTV9TRU5ERVJfSUQ6ICdpbmNvcnJlY3QtZ2NtLXNlbmRlci1pZCcsXG4gIFBFUk1JU1NJT05fREVGQVVMVDogJ3Blcm1pc3Npb24tZGVmYXVsdCcsXG4gIFBFUk1JU1NJT05fQkxPQ0tFRDogJ3Blcm1pc3Npb24tYmxvY2tlZCcsXG4gIFVOU1VQUE9SVEVEX0JST1dTRVI6ICd1bnN1cHBvcnRlZC1icm93c2VyJyxcbiAgTk9USUZJQ0FUSU9OU19CTE9DS0VEOiAnbm90aWZpY2F0aW9ucy1ibG9ja2VkJyxcbiAgRkFJTEVEX0RFRkFVTFRfUkVHSVNUUkFUSU9OOiAnZmFpbGVkLXNlcnZpY2V3b3JrZXItcmVnaXN0cmF0aW9uJyxcbiAgU1dfUkVHSVNUUkFUSU9OX0VYUEVDVEVEOiAnc3ctcmVnaXN0cmF0aW9uLWV4cGVjdGVkJyxcbiAgR0VUX1NVQlNDUklQVElPTl9GQUlMRUQ6ICdnZXQtc3Vic2NyaXB0aW9uLWZhaWxlZCcsXG4gIElOVkFMSURfU0FWRURfVE9LRU46ICdpbnZhbGlkLXNhdmVkLXRva2VuJyxcbiAgU1dfUkVHX1JFRFVOREFOVDogJ3N3LXJlZy1yZWR1bmRhbnQnLFxuICBUT0tFTl9TVUJTQ1JJQkVfRkFJTEVEOiAndG9rZW4tc3Vic2NyaWJlLWZhaWxlZCcsXG4gIFRPS0VOX1NVQlNDUklCRV9OT19UT0tFTjogJ3Rva2VuLXN1YnNjcmliZS1uby10b2tlbicsXG4gIFRPS0VOX1NVQlNDUklCRV9OT19QVVNIX1NFVDogJ3Rva2VuLXN1YnNjcmliZS1uby1wdXNoLXNldCcsXG4gIFVTRV9TV19CRUZPUkVfR0VUX1RPS0VOOiAndXNlLXN3LWJlZm9yZS1nZXQtdG9rZW4nLFxuICBJTlZBTElEX0RFTEVURV9UT0tFTjogJ2ludmFsaWQtZGVsZXRlLXRva2VuJyxcbiAgREVMRVRFX1RPS0VOX05PVF9GT1VORDogJ2RlbGV0ZS10b2tlbi1ub3QtZm91bmQnLFxuICBERUxFVEVfU0NPUEVfTk9UX0ZPVU5EOiAnZGVsZXRlLXNjb3BlLW5vdC1mb3VuZCcsXG4gIEJHX0hBTkRMRVJfRlVOQ1RJT05fRVhQRUNURUQ6ICdiZy1oYW5kbGVyLWZ1bmN0aW9uLWV4cGVjdGVkJyxcbiAgTk9fV0lORE9XX0NMSUVOVF9UT19NU0c6ICduby13aW5kb3ctY2xpZW50LXRvLW1zZycsXG4gIFVOQUJMRV9UT19SRVNVQlNDUklCRTogJ3VuYWJsZS10by1yZXN1YnNjcmliZScsXG4gIE5PX0ZDTV9UT0tFTl9GT1JfUkVTVUJTQ1JJQkU6ICduby1mY20tdG9rZW4tZm9yLXJlc3Vic2NyaWJlJyxcbiAgRkFJTEVEX1RPX0RFTEVURV9UT0tFTjogJ2ZhaWxlZC10by1kZWxldGUtdG9rZW4nLFxuICBOT19TV19JTl9SRUc6ICduby1zdy1pbi1yZWcnLFxuICBCQURfU0NPUEU6ICdiYWQtc2NvcGUnLFxuICBCQURfVkFQSURfS0VZOiAnYmFkLXZhcGlkLWtleScsXG4gIEJBRF9TVUJTQ1JJUFRJT046ICdiYWQtc3Vic2NyaXB0aW9uJyxcbiAgQkFEX1RPS0VOOiAnYmFkLXRva2VuJyxcbiAgQkFEX1BVU0hfU0VUOiAnYmFkLXB1c2gtc2V0JyxcbiAgRkFJTEVEX0RFTEVURV9WQVBJRF9LRVk6ICdmYWlsZWQtZGVsZXRlLXZhcGlkLWtleSdcbn07XG5cbmNvbnN0IEVSUk9SX01BUCA9IHtcbiAgW0NPREVTLkFWQUlMQUJMRV9JTl9XSU5ET1ddOiAnVGhpcyBtZXRob2QgaXMgYXZhaWxhYmxlIGluIGEgV2luZG93IGNvbnRleHQuJyxcbiAgW0NPREVTLkFWQUlMQUJMRV9JTl9TV106XG4gICAgJ1RoaXMgbWV0aG9kIGlzIGF2YWlsYWJsZSBpbiBhIHNlcnZpY2Ugd29ya2VyICcgKyAnY29udGV4dC4nLFxuICBbQ09ERVMuU0hPVUxEX0JFX0lOSEVSSVRFRF06XG4gICAgJ1RoaXMgbWV0aG9kIHNob3VsZCBiZSBvdmVycmlkZW4gYnkgJyArICdleHRlbmRlZCBjbGFzc2VzLicsXG4gIFtDT0RFUy5CQURfU0VOREVSX0lEXTpcbiAgICBcIlBsZWFzZSBlbnN1cmUgdGhhdCAnbWVzc2FnaW5nU2VuZGVySWQnIGlzIHNldCBcIiArXG4gICAgJ2NvcnJlY3RseSBpbiB0aGUgb3B0aW9ucyBwYXNzZWQgaW50byBmaXJlYmFzZS5pbml0aWFsaXplQXBwKCkuJyxcbiAgW0NPREVTLlBFUk1JU1NJT05fREVGQVVMVF06XG4gICAgJ1RoZSByZXF1aXJlZCBwZXJtaXNzaW9ucyB3ZXJlIG5vdCBncmFudGVkIGFuZCAnICsgJ2Rpc21pc3NlZCBpbnN0ZWFkLicsXG4gIFtDT0RFUy5QRVJNSVNTSU9OX0JMT0NLRURdOlxuICAgICdUaGUgcmVxdWlyZWQgcGVybWlzc2lvbnMgd2VyZSBub3QgZ3JhbnRlZCBhbmQgJyArICdibG9ja2VkIGluc3RlYWQuJyxcbiAgW0NPREVTLlVOU1VQUE9SVEVEX0JST1dTRVJdOlxuICAgIFwiVGhpcyBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCB0aGUgQVBJJ3MgXCIgK1xuICAgICdyZXF1aXJlZCB0byB1c2UgdGhlIGZpcmViYXNlIFNESy4nLFxuICBbQ09ERVMuTk9USUZJQ0FUSU9OU19CTE9DS0VEXTogJ05vdGlmaWNhdGlvbnMgaGF2ZSBiZWVuIGJsb2NrZWQuJyxcbiAgW0NPREVTLkZBSUxFRF9ERUZBVUxUX1JFR0lTVFJBVElPTl06XG4gICAgJ1dlIGFyZSB1bmFibGUgdG8gcmVnaXN0ZXIgdGhlICcgK1xuICAgICdkZWZhdWx0IHNlcnZpY2Ugd29ya2VyLiB7JGJyb3dzZXJFcnJvck1lc3NhZ2V9JyxcbiAgW0NPREVTLlNXX1JFR0lTVFJBVElPTl9FWFBFQ1RFRF06XG4gICAgJ0Egc2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uIHdhcyB0aGUgJyArICdleHBlY3RlZCBpbnB1dC4nLFxuICBbQ09ERVMuR0VUX1NVQlNDUklQVElPTl9GQUlMRURdOlxuICAgICdUaGVyZSB3YXMgYW4gZXJyb3Igd2hlbiB0cnlpbmcgdG8gZ2V0ICcgK1xuICAgICdhbnkgZXhpc3RpbmcgUHVzaCBTdWJzY3JpcHRpb25zLicsXG4gIFtDT0RFUy5JTlZBTElEX1NBVkVEX1RPS0VOXTogJ1VuYWJsZSB0byBhY2Nlc3MgZGV0YWlscyBvZiB0aGUgc2F2ZWQgdG9rZW4uJyxcbiAgW0NPREVTLlNXX1JFR19SRURVTkRBTlRdOlxuICAgICdUaGUgc2VydmljZSB3b3JrZXIgYmVpbmcgdXNlZCBmb3IgcHVzaCB3YXMgbWFkZSAnICsgJ3JlZHVuZGFudC4nLFxuICBbQ09ERVMuVE9LRU5fU1VCU0NSSUJFX0ZBSUxFRF06XG4gICAgJ0EgcHJvYmxlbSBvY2N1cmVkIHdoaWxlIHN1YnNjcmliaW5nIHRoZSAnICsgJ3VzZXIgdG8gRkNNOiB7JG1lc3NhZ2V9JyxcbiAgW0NPREVTLlRPS0VOX1NVQlNDUklCRV9OT19UT0tFTl06XG4gICAgJ0ZDTSByZXR1cm5lZCBubyB0b2tlbiB3aGVuIHN1YnNjcmliaW5nICcgKyAndGhlIHVzZXIgdG8gcHVzaC4nLFxuICBbQ09ERVMuVE9LRU5fU1VCU0NSSUJFX05PX1BVU0hfU0VUXTpcbiAgICAnRkNNIHJldHVybmVkIGFuIGludmFsaWQgcmVzcG9uc2UgJyArICd3aGVuIGdldHRpbmcgYW4gRkNNIHRva2VuLicsXG4gIFtDT0RFUy5VU0VfU1dfQkVGT1JFX0dFVF9UT0tFTl06XG4gICAgJ1lvdSBtdXN0IGNhbGwgdXNlU2VydmljZVdvcmtlcigpIGJlZm9yZSAnICtcbiAgICAnY2FsbGluZyBnZXRUb2tlbigpIHRvIGVuc3VyZSB5b3VyIHNlcnZpY2Ugd29ya2VyIGlzIHVzZWQuJyxcbiAgW0NPREVTLklOVkFMSURfREVMRVRFX1RPS0VOXTpcbiAgICAnWW91IG11c3QgcGFzcyBhIHZhbGlkIHRva2VuIGludG8gJyArXG4gICAgJ2RlbGV0ZVRva2VuKCksIGkuZS4gdGhlIHRva2VuIGZyb20gZ2V0VG9rZW4oKS4nLFxuICBbQ09ERVMuREVMRVRFX1RPS0VOX05PVF9GT1VORF06XG4gICAgJ1RoZSBkZWxldGlvbiBhdHRlbXB0IGZvciB0b2tlbiBjb3VsZCBub3QgJyArXG4gICAgJ2JlIHBlcmZvcm1lZCBhcyB0aGUgdG9rZW4gd2FzIG5vdCBmb3VuZC4nLFxuICBbQ09ERVMuREVMRVRFX1NDT1BFX05PVF9GT1VORF06XG4gICAgJ1RoZSBkZWxldGlvbiBhdHRlbXB0IGZvciBzZXJ2aWNlIHdvcmtlciAnICtcbiAgICAnc2NvcGUgY291bGQgbm90IGJlIHBlcmZvcm1lZCBhcyB0aGUgc2NvcGUgd2FzIG5vdCBmb3VuZC4nLFxuICBbQ09ERVMuQkdfSEFORExFUl9GVU5DVElPTl9FWFBFQ1RFRF06XG4gICAgJ1RoZSBpbnB1dCB0byAnICsgJ3NldEJhY2tncm91bmRNZXNzYWdlSGFuZGxlcigpIG11c3QgYmUgYSBmdW5jdGlvbi4nLFxuICBbQ09ERVMuTk9fV0lORE9XX0NMSUVOVF9UT19NU0ddOlxuICAgICdBbiBhdHRlbXB0IHdhcyBtYWRlIHRvIG1lc3NhZ2UgYSAnICsgJ25vbi1leGlzdGFudCB3aW5kb3cgY2xpZW50LicsXG4gIFtDT0RFUy5VTkFCTEVfVE9fUkVTVUJTQ1JJQkVdOlxuICAgICdUaGVyZSB3YXMgYW4gZXJyb3Igd2hpbGUgcmUtc3Vic2NyaWJpbmcgJyArXG4gICAgJ3RoZSBGQ00gdG9rZW4gZm9yIHB1c2ggbWVzc2FnaW5nLiBXaWxsIGhhdmUgdG8gcmVzdWJzY3JpYmUgdGhlICcgK1xuICAgICd1c2VyIG9uIG5leHQgdmlzaXQuIHskbWVzc2FnZX0nLFxuICBbQ09ERVMuTk9fRkNNX1RPS0VOX0ZPUl9SRVNVQlNDUklCRV06XG4gICAgJ0NvdWxkIG5vdCBmaW5kIGFuIEZDTSB0b2tlbiAnICtcbiAgICAnYW5kIGFzIGEgcmVzdWx0LCB1bmFibGUgdG8gcmVzdWJzY3JpYmUuIFdpbGwgaGF2ZSB0byByZXN1YnNjcmliZSB0aGUgJyArXG4gICAgJ3VzZXIgb24gbmV4dCB2aXNpdC4nLFxuICBbQ09ERVMuRkFJTEVEX1RPX0RFTEVURV9UT0tFTl06ICdVbmFibGUgdG8gZGVsZXRlIHRoZSBjdXJyZW50bHkgc2F2ZWQgdG9rZW4uJyxcbiAgW0NPREVTLk5PX1NXX0lOX1JFR106XG4gICAgJ0V2ZW4gdGhvdWdoIHRoZSBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gd2FzICcgK1xuICAgICdzdWNjZXNzZnVsLCB0aGVyZSB3YXMgYSBwcm9ibGVtIGFjY2Vzc2luZyB0aGUgc2VydmljZSB3b3JrZXIgaXRzZWxmLicsXG4gIFtDT0RFUy5JTkNPUlJFQ1RfR0NNX1NFTkRFUl9JRF06XG4gICAgXCJQbGVhc2UgY2hhbmdlIHlvdXIgd2ViIGFwcCBtYW5pZmVzdCdzIFwiICtcbiAgICBcIidnY21fc2VuZGVyX2lkJyB2YWx1ZSB0byAnMTAzOTUzODAwNTA3JyB0byB1c2UgRmlyZWJhc2UgbWVzc2FnaW5nLlwiLFxuICBbQ09ERVMuQkFEX1NDT1BFXTpcbiAgICAnVGhlIHNlcnZpY2Ugd29ya2VyIHNjb3BlIG11c3QgYmUgYSBzdHJpbmcgd2l0aCBhdCAnICtcbiAgICAnbGVhc3Qgb25lIGNoYXJhY3Rlci4nLFxuICBbQ09ERVMuQkFEX1ZBUElEX0tFWV06XG4gICAgJ1RoZSBwdWJsaWMgVkFQSUQga2V5IG11c3QgYmUgYSBzdHJpbmcgd2l0aCBhdCAnICsgJ2xlYXN0IG9uZSBjaGFyYWN0ZXIuJyxcbiAgW0NPREVTLkJBRF9TVUJTQ1JJUFRJT05dOlxuICAgICdUaGUgc3Vic2NyaXB0aW9uIG11c3QgYmUgYSB2YWxpZCAnICsgJ1B1c2hTdWJzY3JpcHRpb24uJyxcbiAgW0NPREVTLkJBRF9UT0tFTl06XG4gICAgJ1RoZSBGQ00gVG9rZW4gdXNlZCBmb3Igc3RvcmFnZSAvIGxvb2t1cCB3YXMgbm90ICcgK1xuICAgICdhIHZhbGlkIHRva2VuIHN0cmluZy4nLFxuICBbQ09ERVMuQkFEX1BVU0hfU0VUXTpcbiAgICAnVGhlIEZDTSBwdXNoIHNldCB1c2VkIGZvciBzdG9yYWdlIC8gbG9va3VwIHdhcyBub3QgJyArXG4gICAgJ25vdCBhIHZhbGlkIHB1c2ggc2V0IHN0cmluZy4nLFxuICBbQ09ERVMuRkFJTEVEX0RFTEVURV9WQVBJRF9LRVldOiAnVGhlIFZBUElEIGtleSBjb3VsZCBub3QgYmUgZGVsZXRlZC4nXG59O1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGNvZGVzOiBDT0RFUyxcbiAgbWFwOiBFUlJPUl9NQVBcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBGQ01fQVBQTElDQVRJT05fU0VSVkVSX0tFWSA9IFtcbiAgMHgwNCxcbiAgMHgzMyxcbiAgMHg5NCxcbiAgMHhmNyxcbiAgMHhkZixcbiAgMHhhMSxcbiAgMHhlYixcbiAgMHhiMSxcbiAgMHhkYyxcbiAgMHgwMyxcbiAgMHhhMixcbiAgMHg1ZSxcbiAgMHgxNSxcbiAgMHg3MSxcbiAgMHhkYixcbiAgMHg0OCxcbiAgMHhkMyxcbiAgMHgyZSxcbiAgMHhlZCxcbiAgMHhlZCxcbiAgMHhiMixcbiAgMHgzNCxcbiAgMHhkYixcbiAgMHhiNyxcbiAgMHg0NyxcbiAgMHgzYSxcbiAgMHgwYyxcbiAgMHg4ZixcbiAgMHhjNCxcbiAgMHhjYyxcbiAgMHhlMSxcbiAgMHg2ZixcbiAgMHgzYyxcbiAgMHg4YyxcbiAgMHg4NCxcbiAgMHhkZixcbiAgMHhhYixcbiAgMHhiNixcbiAgMHg2NixcbiAgMHgzZSxcbiAgMHhmMixcbiAgMHgwYyxcbiAgMHhkNCxcbiAgMHg4YixcbiAgMHhmZSxcbiAgMHhlMyxcbiAgMHhmOSxcbiAgMHg3NixcbiAgMHgyZixcbiAgMHgxNCxcbiAgMHgxYyxcbiAgMHg2MyxcbiAgMHgwOCxcbiAgMHg2YSxcbiAgMHg2ZixcbiAgMHgyZCxcbiAgMHhiMSxcbiAgMHgxYSxcbiAgMHg5NSxcbiAgMHhiMCxcbiAgMHhjZSxcbiAgMHgzNyxcbiAgMHhjMCxcbiAgMHg5YyxcbiAgMHg2ZVxuXTtcblxuY29uc3QgU1VCU0NSSVBUSU9OX0RFVEFJTFMgPSB7XG4gIHVzZXJWaXNpYmxlT25seTogdHJ1ZSxcbiAgYXBwbGljYXRpb25TZXJ2ZXJLZXk6IG5ldyBVaW50OEFycmF5KEZDTV9BUFBMSUNBVElPTl9TRVJWRVJfS0VZKVxufTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBFTkRQT0lOVDogJ2h0dHBzOi8vZmNtLmdvb2dsZWFwaXMuY29tJyxcbiAgQVBQTElDQVRJT05fU0VSVkVSX0tFWTogRkNNX0FQUExJQ0FUSU9OX1NFUlZFUl9LRVksXG4gIFNVQlNDUklQVElPTl9PUFRJT05TOiBTVUJTQ1JJUFRJT05fREVUQUlMU1xufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZ3JhbnRlZDogJ2dyYW50ZWQnLFxuICBkZWZhdWx0OiAnZGVmYXVsdCcsXG4gIGRlbmllZDogJ2RlbmllZCdcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgeyBFcnJvckZhY3RvcnkgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbmltcG9ydCBFcnJvcnMgZnJvbSAnLi9lcnJvcnMnO1xuaW1wb3J0IGFycmF5QnVmZmVyVG9CYXNlNjQgZnJvbSAnLi4vaGVscGVycy9hcnJheS1idWZmZXItdG8tYmFzZTY0JztcbmltcG9ydCBGQ01EZXRhaWxzIGZyb20gJy4vZmNtLWRldGFpbHMnO1xuXG5jb25zdCBGQ01fVE9LRU5fT0JKX1NUT1JFID0gJ2ZjbV90b2tlbl9vYmplY3RfU3RvcmUnO1xuY29uc3QgRkNNX1RPS0VOX0RFVEFJTFNfREJfVkVSU0lPTiA9IDE7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRva2VuTWFuYWdlciB7XG4gIHByaXZhdGUgZXJyb3JGYWN0b3J5XzogRXJyb3JGYWN0b3J5PHN0cmluZz47XG4gIHByaXZhdGUgb3BlbkRiUHJvbWlzZV86IFByb21pc2U8SURCRGF0YWJhc2U+O1xuXG4gIHN0YXRpYyBEQl9OQU1FOiAnZmNtX3Rva2VuX2RldGFpbHNfZGInO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZXJyb3JGYWN0b3J5XyA9IG5ldyBFcnJvckZhY3RvcnkoJ21lc3NhZ2luZycsICdNZXNzYWdpbmcnLCBFcnJvcnMubWFwKTtcbiAgICB0aGlzLm9wZW5EYlByb21pc2VfID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGluZGV4ZWREQiBhcyBhIHByb21zaWUuXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge1Byb21pc2U8SURCRGF0YWJhc2U+fSBUaGUgSW5kZXhlZERCIGRhdGFiYXNlXG4gICAqL1xuICBvcGVuRGF0YWJhc2VfKCkge1xuICAgIGlmICh0aGlzLm9wZW5EYlByb21pc2VfKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcGVuRGJQcm9taXNlXztcbiAgICB9XG5cbiAgICB0aGlzLm9wZW5EYlByb21pc2VfID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKFxuICAgICAgICBUb2tlbk1hbmFnZXIuREJfTkFNRSxcbiAgICAgICAgRkNNX1RPS0VOX0RFVEFJTFNfREJfVkVSU0lPTlxuICAgICAgKTtcbiAgICAgIHJlcXVlc3Qub25lcnJvciA9IGV2ZW50ID0+IHtcbiAgICAgICAgcmVqZWN0KCg8SURCUmVxdWVzdD5ldmVudC50YXJnZXQpLmVycm9yKTtcbiAgICAgIH07XG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGV2ZW50ID0+IHtcbiAgICAgICAgcmVzb2x2ZSgoPElEQlJlcXVlc3Q+ZXZlbnQudGFyZ2V0KS5yZXN1bHQpO1xuICAgICAgfTtcbiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZXZlbnQgPT4ge1xuICAgICAgICB2YXIgZGIgPSAoPElEQlJlcXVlc3Q+ZXZlbnQudGFyZ2V0KS5yZXN1bHQ7XG5cbiAgICAgICAgdmFyIG9iamVjdFN0b3JlID0gZGIuY3JlYXRlT2JqZWN0U3RvcmUoRkNNX1RPS0VOX09CSl9TVE9SRSwge1xuICAgICAgICAgIGtleVBhdGg6ICdzd1Njb3BlJ1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHNlbmRlciBJRCBjYW4gYmUgc2VhcmNoZWRcbiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2ZjbVNlbmRlcklkJywgJ2ZjbVNlbmRlcklkJywge1xuICAgICAgICAgIHVuaXF1ZTogZmFsc2VcbiAgICAgICAgfSk7XG5cbiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2ZjbVRva2VuJywgJ2ZjbVRva2VuJywge1xuICAgICAgICAgIHVuaXF1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5vcGVuRGJQcm9taXNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZSB0aGUgY3VycmVudGx5IG9wZW4gZGF0YWJhc2UuXG4gICAqIEByZXR1cm4ge1Byb21pc2U8Pz59IFJldHVybnMgdGhlIHJlc3VsdCBvZiB0aGUgcHJvbWlzZSBjaGFpbi5cbiAgICovXG4gIGNsb3NlRGF0YWJhc2UoKSB7XG4gICAgaWYgKHRoaXMub3BlbkRiUHJvbWlzZV8pIHtcbiAgICAgIHJldHVybiB0aGlzLm9wZW5EYlByb21pc2VfLnRoZW4oZGIgPT4ge1xuICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICB0aGlzLm9wZW5EYlByb21pc2VfID0gbnVsbDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHaXZlbiBhIHRva2VuLCB0aGlzIG1ldGhvZCB3aWxsIGxvb2sgdXAgdGhlIGRldGFpbHMgaW4gaW5kZXhlZERCLlxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmY21Ub2tlblxuICAgKiBAcmV0dXJuIHtQcm9taXNlPE9iamVjdD59IFRoZSBkZXRhaWxzIGFzc29jaWF0ZWQgd2l0aCB0aGF0IHRva2VuLlxuICAgKi9cbiAgZ2V0VG9rZW5EZXRhaWxzRnJvbVRva2VuKGZjbVRva2VuKSB7XG4gICAgcmV0dXJuIHRoaXMub3BlbkRhdGFiYXNlXygpLnRoZW4oZGIgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbihbRkNNX1RPS0VOX09CSl9TVE9SRV0pO1xuICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKEZDTV9UT0tFTl9PQkpfU1RPUkUpO1xuICAgICAgICBjb25zdCBpbmRleCA9IG9iamVjdFN0b3JlLmluZGV4KCdmY21Ub2tlbicpO1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXguZ2V0KGZjbVRva2VuKTtcbiAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICByZWplY3QoKDxJREJSZXF1ZXN0PmV2ZW50LnRhcmdldCkuZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgcmVzb2x2ZSgoPElEQlJlcXVlc3Q+ZXZlbnQudGFyZ2V0KS5yZXN1bHQpO1xuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRUb2tlbkRldGFpbHNGcm9tU1dTY29wZV8oc3dTY29wZSkge1xuICAgIHJldHVybiB0aGlzLm9wZW5EYXRhYmFzZV8oKS50aGVuKGRiID0+IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oW0ZDTV9UT0tFTl9PQkpfU1RPUkVdKTtcbiAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShGQ01fVE9LRU5fT0JKX1NUT1JFKTtcbiAgICAgICAgY29uc3Qgc2NvcGVSZXF1ZXN0ID0gb2JqZWN0U3RvcmUuZ2V0KHN3U2NvcGUpO1xuICAgICAgICBzY29wZVJlcXVlc3Qub25lcnJvciA9IGV2ZW50ID0+IHtcbiAgICAgICAgICByZWplY3QoKDxJREJSZXF1ZXN0PmV2ZW50LnRhcmdldCkuZXJyb3IpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNjb3BlUmVxdWVzdC5vbnN1Y2Nlc3MgPSBldmVudCA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSgoPElEQlJlcXVlc3Q+ZXZlbnQudGFyZ2V0KS5yZXN1bHQpO1xuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRBbGxUb2tlbkRldGFpbHNGb3JTZW5kZXJJZF8oc2VuZGVySWQpOiBQcm9taXNlPEFycmF5PE9iamVjdD4+IHtcbiAgICByZXR1cm4gdGhpcy5vcGVuRGF0YWJhc2VfKCkudGhlbihkYiA9PiB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2U8QXJyYXk8T2JqZWN0Pj4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKFtGQ01fVE9LRU5fT0JKX1NUT1JFXSk7XG4gICAgICAgIGNvbnN0IG9iamVjdFN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoRkNNX1RPS0VOX09CSl9TVE9SRSk7XG5cbiAgICAgICAgY29uc3Qgc2VuZGVySWRUb2tlbnMgPSBbXTtcblxuICAgICAgICBjb25zdCBjdXJzb3JSZXF1ZXN0ID0gb2JqZWN0U3RvcmUub3BlbkN1cnNvcigpO1xuICAgICAgICBjdXJzb3JSZXF1ZXN0Lm9uZXJyb3IgPSBldmVudCA9PiB7XG4gICAgICAgICAgcmVqZWN0KCg8SURCUmVxdWVzdD5ldmVudC50YXJnZXQpLmVycm9yKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjdXJzb3JSZXF1ZXN0Lm9uc3VjY2VzcyA9IGV2ZW50ID0+IHtcbiAgICAgICAgICBjb25zdCBjdXJzb3IgPSAoPElEQlJlcXVlc3Q+ZXZlbnQudGFyZ2V0KS5yZXN1bHQ7XG4gICAgICAgICAgaWYgKGN1cnNvcikge1xuICAgICAgICAgICAgaWYgKGN1cnNvci52YWx1ZVsnZmNtU2VuZGVySWQnXSA9PT0gc2VuZGVySWQpIHtcbiAgICAgICAgICAgICAgc2VuZGVySWRUb2tlbnMucHVzaChjdXJzb3IudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc29sdmUoc2VuZGVySWRUb2tlbnMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgUHVzaFN1YnNjcmlwdGlvbiBhbmQgbWVzc2FnaW5nU2VuZGVySWQsIGdldCBhbiBGQ00gdG9rZW4uXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtICB7c3RyaW5nfSBzZW5kZXJJZCBUaGUgJ21lc3NhZ2luZ1NlbmRlcklkJyB0byB0aWUgdGhlIHRva2VuIHRvLlxuICAgKiBAcGFyYW0gIHtQdXNoU3Vic2NyaXB0aW9ufSBzdWJzY3JpcHRpb24gVGhlIFB1c2hTdXNiY3JpcHRpb24gdG8gXCJmZWRlcmF0ZVwiLlxuICAgKiBAcGFyYW0gIHtzdHJpbmc9fSBwdXNoU2V0IElmIGRlZmluZWQgdGhpcyB3aWxsIHN3YXAgdGhlIHN1YnNjcmlwdGlvbiBmb3JcbiAgICogbWF0Y2hpbmcgRkNNIHRva2VuLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlPCFPYmplY3Q+fSBSZXR1cm5zIHRoZSBGQ00gdG9rZW4gdG8gYmUgdXNlZCBpbiBwbGFjZVxuICAgKiBvZiB0aGUgUHVzaFN1YnNjcmlwdGlvbi5cbiAgICovXG4gIHN1YnNjcmliZVRvRkNNKHNlbmRlcklkLCBzdWJzY3JpcHRpb24sIHB1c2hTZXQ/KTogUHJvbWlzZTxPYmplY3Q+IHtcbiAgICBjb25zdCBwMjU2ZGggPSBhcnJheUJ1ZmZlclRvQmFzZTY0KHN1YnNjcmlwdGlvblsnZ2V0S2V5J10oJ3AyNTZkaCcpKTtcbiAgICBjb25zdCBhdXRoID0gYXJyYXlCdWZmZXJUb0Jhc2U2NChzdWJzY3JpcHRpb25bJ2dldEtleSddKCdhdXRoJykpO1xuXG4gICAgbGV0IGZjbVN1YnNjcmliZUJvZHkgPVxuICAgICAgYGF1dGhvcml6ZWRfZW50aXR5PSR7c2VuZGVySWR9JmAgK1xuICAgICAgYGVuZHBvaW50PSR7c3Vic2NyaXB0aW9uLmVuZHBvaW50fSZgICtcbiAgICAgIGBlbmNyeXB0aW9uX2tleT0ke3AyNTZkaH0mYCArXG4gICAgICBgZW5jcnlwdGlvbl9hdXRoPSR7YXV0aH1gO1xuXG4gICAgaWYgKHB1c2hTZXQpIHtcbiAgICAgIGZjbVN1YnNjcmliZUJvZHkgKz0gYCZwdXNoU2V0PSR7cHVzaFNldH1gO1xuICAgIH1cblxuICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgIGhlYWRlcnMuYXBwZW5kKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyk7XG5cbiAgICBjb25zdCBzdWJzY3JpYmVPcHRpb25zID0ge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgYm9keTogZmNtU3Vic2NyaWJlQm9keVxuICAgIH07XG5cbiAgICByZXR1cm4gZmV0Y2goXG4gICAgICBGQ01EZXRhaWxzLkVORFBPSU5UICsgJy9mY20vY29ubmVjdC9zdWJzY3JpYmUnLFxuICAgICAgc3Vic2NyaWJlT3B0aW9uc1xuICAgIClcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgY29uc3QgZmNtVG9rZW5SZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgICAgICBpZiAoZmNtVG9rZW5SZXNwb25zZVsnZXJyb3InXSkge1xuICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBmY21Ub2tlblJlc3BvbnNlWydlcnJvciddWydtZXNzYWdlJ107XG4gICAgICAgICAgdGhyb3cgdGhpcy5lcnJvckZhY3RvcnlfLmNyZWF0ZShFcnJvcnMuY29kZXMuVE9LRU5fU1VCU0NSSUJFX0ZBSUxFRCwge1xuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFmY21Ub2tlblJlc3BvbnNlWyd0b2tlbiddKSB7XG4gICAgICAgICAgdGhyb3cgdGhpcy5lcnJvckZhY3RvcnlfLmNyZWF0ZShcbiAgICAgICAgICAgIEVycm9ycy5jb2Rlcy5UT0tFTl9TVUJTQ1JJQkVfTk9fVE9LRU5cbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFmY21Ub2tlblJlc3BvbnNlWydwdXNoU2V0J10pIHtcbiAgICAgICAgICB0aHJvdyB0aGlzLmVycm9yRmFjdG9yeV8uY3JlYXRlKFxuICAgICAgICAgICAgRXJyb3JzLmNvZGVzLlRPS0VOX1NVQlNDUklCRV9OT19QVVNIX1NFVFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRva2VuOiBmY21Ub2tlblJlc3BvbnNlWyd0b2tlbiddLFxuICAgICAgICAgIHB1c2hTZXQ6IGZjbVRva2VuUmVzcG9uc2VbJ3B1c2hTZXQnXVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIHRoZSB0aGF0IGZpZWxkcyBpbiB0aGUgUHVzaFN1YnNjcmlwdGlvbiBhcmUgZXF1aXZhbGVudCB0byB0aGVcbiAgICogZGV0YWlscyBzdG9yZXMgaW4gdGhlIG1hc3RlclRva2VuRGV0YWlscy5cbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtICB7UHVzaFN1YnNjcmlwdGlvbn0gc3Vic2NyaXB0aW9uIFRoZSBwdXNoIHN1YnNjcmlwdGlvbiB3ZSBleHBlY3RcbiAgICogdGhlIG1hc3RlciB0b2tlbiB0byBtYXRjaC5cbiAgICogQHBhcmFtICB7T2JqZWN0fSAgbWFzdGVyVG9rZW5EZXRhaWxzIFRoZSBzYXZlZCBkZXRhaWxzIHdlIHdpc2ggdG8gY29tcGFyZVxuICAgKiB3aXRoIHRoZSBQdXNoU3Vic2NyaXB0aW9uXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgdGhlIHN1YnNjcmlwdGlvbiBhbmQgdG9rZW4gZGV0YWlscyBhcmVcbiAgICogZXF1aXZhbGVudC5cbiAgICovXG4gIGlzU2FtZVN1YnNjcmlwdGlvbl8oc3Vic2NyaXB0aW9uLCBtYXN0ZXJUb2tlbkRldGFpbHMpIHtcbiAgICAvLyBnZXRLZXkoKSBpc24ndCBkZWZpbmVkIGluIHRoZSBQdXNoU3Vic2NyaXB0aW9uIGV4dGVybnMgZmlsZSwgaGVuY2VcbiAgICAvLyBzdWJzY3JpcHRpb25bJ2dldEtleSddKCc8a2V5IG5hbWU+JykuXG4gICAgcmV0dXJuIChcbiAgICAgIHN1YnNjcmlwdGlvbi5lbmRwb2ludCA9PT0gbWFzdGVyVG9rZW5EZXRhaWxzWydlbmRwb2ludCddICYmXG4gICAgICBhcnJheUJ1ZmZlclRvQmFzZTY0KHN1YnNjcmlwdGlvblsnZ2V0S2V5J10oJ2F1dGgnKSkgPT09XG4gICAgICAgIG1hc3RlclRva2VuRGV0YWlsc1snYXV0aCddICYmXG4gICAgICBhcnJheUJ1ZmZlclRvQmFzZTY0KHN1YnNjcmlwdGlvblsnZ2V0S2V5J10oJ3AyNTZkaCcpKSA9PT1cbiAgICAgICAgbWFzdGVyVG9rZW5EZXRhaWxzWydwMjU2ZGgnXVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogU2F2ZSB0aGUgZGV0YWlscyBmb3IgdGhlIGZjbSB0b2tlbiBmb3IgcmUtdXNlIGF0IGEgbGF0ZXIgZGF0ZS5cbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtICB7c3RyaW5nfSBzZW5kZXJJZCBUaGUgJ21lc3NhZ2luZ1NlbmRlcklkJyB1c2VkIGZvciB0aGlzIHByb2plY3RcbiAgICogQHBhcmFtICB7U2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbn0gc3dSZWdpc3RyYXRpb24gVGhlIHNlcnZpY2Ugd29ya2VyXG4gICAqIHVzZWQgdG8gc3Vic2NyaWJlIHRoZSB1c2VyIGZvciB3ZWIgcHVzaFxuICAgKiBAcGFyYW0gIHtQdXNoU3Vic2NyaXB0aW9ufSBzdWJzY3JpcHRpb24gVGhlIHB1c2ggc3Vic2NyaXB0aW9uIHBhc3NlZCB0b1xuICAgKiBGQ00gZm9yIHRoZSBjdXJyZW50IHRva2VuLlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGZjbVRva2VuIFRoZSBGQ00gdG9rZW4gY3VycmVudGx5IHVzZWQgb24gdGhpc1xuICAgKiBkZXZpY2UuXG4gICAqIEBwYXJhbSAge3N0cmluZ30gZmNtUHVzaFNldCBUaGUgRkNNIHB1c2ggdGllZCB0byB0aGUgZmNtIHRva2VuLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fVxuICAgKi9cbiAgc2F2ZVRva2VuRGV0YWlsc18oXG4gICAgc2VuZGVySWQsXG4gICAgc3dSZWdpc3RyYXRpb24sXG4gICAgc3Vic2NyaXB0aW9uLFxuICAgIGZjbVRva2VuLFxuICAgIGZjbVB1c2hTZXRcbiAgKSB7XG4gICAgY29uc3QgZGV0YWlscyA9IHtcbiAgICAgIHN3U2NvcGU6IHN3UmVnaXN0cmF0aW9uLnNjb3BlLFxuICAgICAgZW5kcG9pbnQ6IHN1YnNjcmlwdGlvbi5lbmRwb2ludCxcbiAgICAgIGF1dGg6IGFycmF5QnVmZmVyVG9CYXNlNjQoc3Vic2NyaXB0aW9uWydnZXRLZXknXSgnYXV0aCcpKSxcbiAgICAgIHAyNTZkaDogYXJyYXlCdWZmZXJUb0Jhc2U2NChzdWJzY3JpcHRpb25bJ2dldEtleSddKCdwMjU2ZGgnKSksXG4gICAgICBmY21Ub2tlbjogZmNtVG9rZW4sXG4gICAgICBmY21QdXNoU2V0OiBmY21QdXNoU2V0LFxuICAgICAgZmNtU2VuZGVySWQ6IHNlbmRlcklkXG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzLm9wZW5EYXRhYmFzZV8oKS50aGVuKGRiID0+IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oW0ZDTV9UT0tFTl9PQkpfU1RPUkVdLCAncmVhZHdyaXRlJyk7XG4gICAgICAgIGNvbnN0IG9iamVjdFN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoRkNNX1RPS0VOX09CSl9TVE9SRSk7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBvYmplY3RTdG9yZS5wdXQoZGV0YWlscyk7XG4gICAgICAgIHJlcXVlc3Qub25lcnJvciA9IGV2ZW50ID0+IHtcbiAgICAgICAgICByZWplY3QoKDxJREJSZXF1ZXN0PmV2ZW50LnRhcmdldCkuZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGV2ZW50ID0+IHtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzYXZlZCBGQ00gVG9rZW4gaWYgb25lIGlzIGF2YWlsYWJsZSBhbmQgc3RpbGwgdmFsaWQsXG4gICAqIG90aGVyd2lzZSBgbnVsbGAgaXMgcmV0dXJuZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZW5kZXJJZCBUaGlzIHNob3VsZCBiZSB0aGUgc2VuZGVyIElEIGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAgICogRkNNIFRva2VuIGJlaW5nIHJldHJpZXZlZC5cbiAgICogQHBhcmFtIHtTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9ufSBzd1JlZ2lzdHJhdGlvbiBSZWdpc3RyYXRpb24gdG8gYmUgdXNlZFxuICAgKiB0byBzdWJzY3JpYmUgdGhlIHVzZXIgdG8gcHVzaC5cbiAgICogQHJldHVybiB7UHJvbWlzZTxzdHJpbmc+IHwgUHJvbWlzZX0gUmV0dXJucyB0aGUgc2F2ZWQgRkNNIFRva2VuIGlmXG4gICAqIGF2aWxhYmxlIGFuZCB2YWxpZC5cbiAgICogQGV4cG9ydFxuICAgKi9cbiAgZ2V0U2F2ZWRUb2tlbihzZW5kZXJJZCwgc3dSZWdpc3RyYXRpb24pIHtcbiAgICBpZiAoIShzd1JlZ2lzdHJhdGlvbiBpbnN0YW5jZW9mIFNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24pKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXG4gICAgICAgIHRoaXMuZXJyb3JGYWN0b3J5Xy5jcmVhdGUoRXJyb3JzLmNvZGVzLlNXX1JFR0lTVFJBVElPTl9FWFBFQ1RFRClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBzZW5kZXJJZCAhPT0gJ3N0cmluZycgfHwgc2VuZGVySWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXG4gICAgICAgIHRoaXMuZXJyb3JGYWN0b3J5Xy5jcmVhdGUoRXJyb3JzLmNvZGVzLkJBRF9TRU5ERVJfSUQpXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmdldEFsbFRva2VuRGV0YWlsc0ZvclNlbmRlcklkXyhzZW5kZXJJZClcbiAgICAgIC50aGVuKGFsbFRva2VuRGV0YWlscyA9PiB7XG4gICAgICAgIGlmIChhbGxUb2tlbkRldGFpbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaW5kZXggPSBhbGxUb2tlbkRldGFpbHMuZmluZEluZGV4KHRva2VuRGV0YWlscyA9PiB7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHN3UmVnaXN0cmF0aW9uLnNjb3BlID09PSB0b2tlbkRldGFpbHNbJ3N3U2NvcGUnXSAmJlxuICAgICAgICAgICAgc2VuZGVySWQgPT09IHRva2VuRGV0YWlsc1snZmNtU2VuZGVySWQnXVxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYWxsVG9rZW5EZXRhaWxzW2luZGV4XTtcbiAgICAgIH0pXG4gICAgICAudGhlbih0b2tlbkRldGFpbHMgPT4ge1xuICAgICAgICBpZiAoIXRva2VuRGV0YWlscykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzd1JlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlclxuICAgICAgICAgIC5nZXRTdWJzY3JpcHRpb24oKVxuICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5lcnJvckZhY3RvcnlfLmNyZWF0ZShcbiAgICAgICAgICAgICAgRXJyb3JzLmNvZGVzLkdFVF9TVUJTQ1JJUFRJT05fRkFJTEVEXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oc3Vic2NyaXB0aW9uID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uICYmXG4gICAgICAgICAgICAgIHRoaXMuaXNTYW1lU3Vic2NyaXB0aW9uXyhzdWJzY3JpcHRpb24sIHRva2VuRGV0YWlscylcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICByZXR1cm4gdG9rZW5EZXRhaWxzWydmY21Ub2tlbiddO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBGQ00gdG9rZW4uXG4gICAqL1xuICBjcmVhdGVUb2tlbihzZW5kZXJJZCwgc3dSZWdpc3RyYXRpb24pOiBQcm9taXNlPFN0cmluZz4ge1xuICAgIGlmICh0eXBlb2Ygc2VuZGVySWQgIT09ICdzdHJpbmcnIHx8IHNlbmRlcklkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFxuICAgICAgICB0aGlzLmVycm9yRmFjdG9yeV8uY3JlYXRlKEVycm9ycy5jb2Rlcy5CQURfU0VOREVSX0lEKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoIShzd1JlZ2lzdHJhdGlvbiBpbnN0YW5jZW9mIFNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24pKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXG4gICAgICAgIHRoaXMuZXJyb3JGYWN0b3J5Xy5jcmVhdGUoRXJyb3JzLmNvZGVzLlNXX1JFR0lTVFJBVElPTl9FWFBFQ1RFRClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGV4aXN0aW5nIHN1YnNjcmlwdGlvbiBmaXJzdFxuICAgIGxldCBzdWJzY3JpcHRpb247XG4gICAgbGV0IGZjbVRva2VuRGV0YWlscztcbiAgICByZXR1cm4gc3dSZWdpc3RyYXRpb24ucHVzaE1hbmFnZXJcbiAgICAgIC5nZXRTdWJzY3JpcHRpb24oKVxuICAgICAgLnRoZW4oc3Vic2NyaXB0aW9uID0+IHtcbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3dSZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIuc3Vic2NyaWJlKFxuICAgICAgICAgIEZDTURldGFpbHMuU1VCU0NSSVBUSU9OX09QVElPTlNcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihzdWIgPT4ge1xuICAgICAgICBzdWJzY3JpcHRpb24gPSBzdWI7XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmliZVRvRkNNKHNlbmRlcklkLCBzdWJzY3JpcHRpb24pO1xuICAgICAgfSlcbiAgICAgIC50aGVuKHRva2VuRGV0YWlscyA9PiB7XG4gICAgICAgIGZjbVRva2VuRGV0YWlscyA9IHRva2VuRGV0YWlscztcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZVRva2VuRGV0YWlsc18oXG4gICAgICAgICAgc2VuZGVySWQsXG4gICAgICAgICAgc3dSZWdpc3RyYXRpb24sXG4gICAgICAgICAgc3Vic2NyaXB0aW9uLFxuICAgICAgICAgIGZjbVRva2VuRGV0YWlsc1sndG9rZW4nXSxcbiAgICAgICAgICBmY21Ub2tlbkRldGFpbHNbJ3B1c2hTZXQnXVxuICAgICAgICApO1xuICAgICAgfSlcbiAgICAgIC50aGVuKCgpID0+IGZjbVRva2VuRGV0YWlsc1sndG9rZW4nXSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgZGVsZXRlcyBkZXRhaWxzIG9mIHRoZSBjdXJyZW50IEZDTSB0b2tlbi5cbiAgICogSXQncyByZXR1cm5pbmcgYSBwcm9taXNlIGluIGNhc2Ugd2UgbmVlZCB0byBtb3ZlIHRvIGFuIGFzeW5jXG4gICAqIG1ldGhvZCBmb3IgZGVsZXRpbmcgYXQgYSBsYXRlciBkYXRlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9rZW4gVG9rZW4gdG8gYmUgZGVsZXRlZFxuICAgKiBAcmV0dXJuIHtQcm9taXNlPE9iamVjdD59IFJlc29sdmVzIG9uY2UgdGhlIEZDTSB0b2tlbiBkZXRhaWxzIGhhdmUgYmVlblxuICAgKiBkZWxldGVkIGFuZCByZXR1cm5zIHRoZSBkZWxldGVkIGRldGFpbHMuXG4gICAqL1xuICBkZWxldGVUb2tlbih0b2tlbikge1xuICAgIGlmICh0eXBlb2YgdG9rZW4gIT09ICdzdHJpbmcnIHx8IHRva2VuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFxuICAgICAgICB0aGlzLmVycm9yRmFjdG9yeV8uY3JlYXRlKEVycm9ycy5jb2Rlcy5JTlZBTElEX0RFTEVURV9UT0tFTilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZ2V0VG9rZW5EZXRhaWxzRnJvbVRva2VuKHRva2VuKS50aGVuKGRldGFpbHMgPT4ge1xuICAgICAgaWYgKCFkZXRhaWxzKSB7XG4gICAgICAgIHRocm93IHRoaXMuZXJyb3JGYWN0b3J5Xy5jcmVhdGUoRXJyb3JzLmNvZGVzLkRFTEVURV9UT0tFTl9OT1RfRk9VTkQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5vcGVuRGF0YWJhc2VfKCkudGhlbihkYiA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbihcbiAgICAgICAgICAgIFtGQ01fVE9LRU5fT0JKX1NUT1JFXSxcbiAgICAgICAgICAgICdyZWFkd3JpdGUnXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKEZDTV9UT0tFTl9PQkpfU1RPUkUpO1xuICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBvYmplY3RTdG9yZS5kZWxldGUoZGV0YWlsc1snc3dTY29wZSddKTtcbiAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBldmVudCA9PiB7XG4gICAgICAgICAgICByZWplY3QoKDxJREJSZXF1ZXN0PmV2ZW50LnRhcmdldCkuZXJyb3IpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBldmVudCA9PiB7XG4gICAgICAgICAgICBpZiAoKDxJREJSZXF1ZXN0PmV2ZW50LnRhcmdldCkucmVzdWx0ID09PSAwKSB7XG4gICAgICAgICAgICAgIHJlamVjdChcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yRmFjdG9yeV8uY3JlYXRlKEVycm9ycy5jb2Rlcy5GQUlMRURfVE9fREVMRVRFX1RPS0VOKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlc29sdmUoZGV0YWlscyk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLy8gVGhlc2UgZmllbGRzIGFyZSBzdHJpbmdzIHRvIHByZXZlbnQgY2xvc3VyZSBmcm9tIHRoaW5raW5nIGdvb2cuZ2V0TXNnXG4vLyBzaG91bGQgYmUgdXNlZCB0byBpbml0aWFsaXNlIHRoZSB2YWx1ZXNcbmNvbnN0IFBBUkFNUyA9IHtcbiAgVFlQRV9PRl9NU0c6ICdmaXJlYmFzZS1tZXNzYWdpbmctbXNnLXR5cGUnLFxuICBEQVRBOiAnZmlyZWJhc2UtbWVzc2FnaW5nLW1zZy1kYXRhJ1xufTtcblxuLy8gVGhpcyB2YWx1ZSBpc24ndCB1c2luZyB0aGUgVFlQRV9PRl9NU0cgc2hvcnQgaGFuZCBhcyBjbG9zdXJlXG4vLyBleHBlY3RzIHRoZSB2YXJpYWJsZSB0byBiZSBkZWZpbmVkIHZpYSBnb29nLmdldE1zZ1xuY29uc3QgbXNnVHlwZSA9IHtcbiAgUFVTSF9NU0dfUkVDRUlWRUQ6ICdwdXNoLW1zZy1yZWNlaXZlZCcsXG4gIE5PVElGSUNBVElPTl9DTElDS0VEOiAnbm90aWZpY2F0aW9uLWNsaWNrZWQnXG59O1xuXG5jb25zdCBjcmVhdGVOZXdNc2cgPSAobXNnVHlwZSwgbXNnRGF0YSkgPT4ge1xuICBjb25zdCBtZXNzYWdlID0ge1xuICAgIFtQQVJBTVMuVFlQRV9PRl9NU0ddOiBtc2dUeXBlLFxuICAgIFtQQVJBTVMuREFUQV06IG1zZ0RhdGFcbiAgfTtcbiAgcmV0dXJuIG1lc3NhZ2U7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIFBBUkFNUyxcbiAgVFlQRVNfT0ZfTVNHOiBtc2dUeXBlLFxuICBjcmVhdGVOZXdNc2dcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgJy4vc3JjL3BvbHlmaWxscy9wcm9taXNlJztcbmltcG9ydCAnLi9zcmMvc2hpbXMvZmluZCc7XG5pbXBvcnQgJy4vc3JjL3NoaW1zL2ZpbmRJbmRleCc7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5jb25zdCBfX2dsb2JhbCA9ICgoKSA9PiB7XG4gIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBnbG9iYWw7XG4gIH1cbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHdpbmRvdztcbiAgfVxuICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHNlbGY7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKCd1bmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3QnKTtcbn0pKCk7XG5cbi8vIFBvbHlmaWxsIFByb21pc2VcbmlmICh0eXBlb2YgUHJvbWlzZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgLy8gSEFDSzogVFMgdGhyb3dzIGFuIGVycm9yIGlmIEkgYXR0ZW1wdCB0byB1c2UgJ2RvdC1ub3RhdGlvbidcbiAgX19nbG9iYWxbXG4gICAgJ1Byb21pc2UnXG4gIF0gPSBQcm9taXNlID0gcmVxdWlyZSgncHJvbWlzZS1wb2x5ZmlsbCcpIGFzIFByb21pc2VDb25zdHJ1Y3Rvcjtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogVGhpcyBpcyB0aGUgQXJyYXkucHJvdG90eXBlLmZpbmQgcG9seWZpbGwgZnJvbSBNRE5cbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2ZpbmRcbiAqIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5maW5kXG4gKi9cbmlmICghQXJyYXkucHJvdG90eXBlLmZpbmQpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgJ2ZpbmQnLCB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uKHByZWRpY2F0ZSkge1xuICAgICAgLy8gMS4gTGV0IE8gYmUgPyBUb09iamVjdCh0aGlzIHZhbHVlKS5cbiAgICAgIGlmICh0aGlzID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJ0aGlzXCIgaXMgbnVsbCBvciBub3QgZGVmaW5lZCcpO1xuICAgICAgfVxuXG4gICAgICB2YXIgbyA9IE9iamVjdCh0aGlzKTtcblxuICAgICAgLy8gMi4gTGV0IGxlbiBiZSA/IFRvTGVuZ3RoKD8gR2V0KE8sIFwibGVuZ3RoXCIpKS5cbiAgICAgIHZhciBsZW4gPSBvLmxlbmd0aCA+Pj4gMDtcblxuICAgICAgLy8gMy4gSWYgSXNDYWxsYWJsZShwcmVkaWNhdGUpIGlzIGZhbHNlLCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uXG4gICAgICBpZiAodHlwZW9mIHByZWRpY2F0ZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdwcmVkaWNhdGUgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIDQuIElmIHRoaXNBcmcgd2FzIHN1cHBsaWVkLCBsZXQgVCBiZSB0aGlzQXJnOyBlbHNlIGxldCBUIGJlIHVuZGVmaW5lZC5cbiAgICAgIHZhciB0aGlzQXJnID0gYXJndW1lbnRzWzFdO1xuXG4gICAgICAvLyA1LiBMZXQgayBiZSAwLlxuICAgICAgdmFyIGsgPSAwO1xuXG4gICAgICAvLyA2LiBSZXBlYXQsIHdoaWxlIGsgPCBsZW5cbiAgICAgIHdoaWxlIChrIDwgbGVuKSB7XG4gICAgICAgIC8vIGEuIExldCBQayBiZSAhIFRvU3RyaW5nKGspLlxuICAgICAgICAvLyBiLiBMZXQga1ZhbHVlIGJlID8gR2V0KE8sIFBrKS5cbiAgICAgICAgLy8gYy4gTGV0IHRlc3RSZXN1bHQgYmUgVG9Cb29sZWFuKD8gQ2FsbChwcmVkaWNhdGUsIFQsIMKrIGtWYWx1ZSwgaywgTyDCuykpLlxuICAgICAgICAvLyBkLiBJZiB0ZXN0UmVzdWx0IGlzIHRydWUsIHJldHVybiBrVmFsdWUuXG4gICAgICAgIHZhciBrVmFsdWUgPSBvW2tdO1xuICAgICAgICBpZiAocHJlZGljYXRlLmNhbGwodGhpc0FyZywga1ZhbHVlLCBrLCBvKSkge1xuICAgICAgICAgIHJldHVybiBrVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZS4gSW5jcmVhc2UgayBieSAxLlxuICAgICAgICBrKys7XG4gICAgICB9XG5cbiAgICAgIC8vIDcuIFJldHVybiB1bmRlZmluZWQuXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIEFycmF5LnByb3RvdHlwZS5maW5kSW5kZXggcG9seWZpbGwgZnJvbSBNRE5cbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2ZpbmRJbmRleFxuICogaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmZpbmRJbmRleFxuICovXG5pZiAoIUFycmF5LnByb3RvdHlwZS5maW5kSW5kZXgpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgJ2ZpbmRJbmRleCcsIHtcbiAgICB2YWx1ZTogZnVuY3Rpb24ocHJlZGljYXRlKSB7XG4gICAgICAvLyAxLiBMZXQgTyBiZSA/IFRvT2JqZWN0KHRoaXMgdmFsdWUpLlxuICAgICAgaWYgKHRoaXMgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInRoaXNcIiBpcyBudWxsIG9yIG5vdCBkZWZpbmVkJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBvID0gT2JqZWN0KHRoaXMpO1xuXG4gICAgICAvLyAyLiBMZXQgbGVuIGJlID8gVG9MZW5ndGgoPyBHZXQoTywgXCJsZW5ndGhcIikpLlxuICAgICAgdmFyIGxlbiA9IG8ubGVuZ3RoID4+PiAwO1xuXG4gICAgICAvLyAzLiBJZiBJc0NhbGxhYmxlKHByZWRpY2F0ZSkgaXMgZmFsc2UsIHRocm93IGEgVHlwZUVycm9yIGV4Y2VwdGlvbi5cbiAgICAgIGlmICh0eXBlb2YgcHJlZGljYXRlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ByZWRpY2F0ZSBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgICAgIH1cblxuICAgICAgLy8gNC4gSWYgdGhpc0FyZyB3YXMgc3VwcGxpZWQsIGxldCBUIGJlIHRoaXNBcmc7IGVsc2UgbGV0IFQgYmUgdW5kZWZpbmVkLlxuICAgICAgdmFyIHRoaXNBcmcgPSBhcmd1bWVudHNbMV07XG5cbiAgICAgIC8vIDUuIExldCBrIGJlIDAuXG4gICAgICB2YXIgayA9IDA7XG5cbiAgICAgIC8vIDYuIFJlcGVhdCwgd2hpbGUgayA8IGxlblxuICAgICAgd2hpbGUgKGsgPCBsZW4pIHtcbiAgICAgICAgLy8gYS4gTGV0IFBrIGJlICEgVG9TdHJpbmcoaykuXG4gICAgICAgIC8vIGIuIExldCBrVmFsdWUgYmUgPyBHZXQoTywgUGspLlxuICAgICAgICAvLyBjLiBMZXQgdGVzdFJlc3VsdCBiZSBUb0Jvb2xlYW4oPyBDYWxsKHByZWRpY2F0ZSwgVCwgwqsga1ZhbHVlLCBrLCBPIMK7KSkuXG4gICAgICAgIC8vIGQuIElmIHRlc3RSZXN1bHQgaXMgdHJ1ZSwgcmV0dXJuIGsuXG4gICAgICAgIHZhciBrVmFsdWUgPSBvW2tdO1xuICAgICAgICBpZiAocHJlZGljYXRlLmNhbGwodGhpc0FyZywga1ZhbHVlLCBrLCBvKSkge1xuICAgICAgICAgIHJldHVybiBrO1xuICAgICAgICB9XG4gICAgICAgIC8vIGUuIEluY3JlYXNlIGsgYnkgMS5cbiAgICAgICAgaysrO1xuICAgICAgfVxuXG4gICAgICAvLyA3LiBSZXR1cm4gLTEuXG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICB9KTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCBmaXJlYmFzZSwgeyBGaXJlYmFzZUFwcCwgRmlyZWJhc2VTZXJ2aWNlRmFjdG9yeSB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgU3RyaW5nRm9ybWF0IH0gZnJvbSAnLi9zcmMvaW1wbGVtZW50YXRpb24vc3RyaW5nJztcbmltcG9ydCB7IFRhc2tFdmVudCB9IGZyb20gJy4vc3JjL2ltcGxlbWVudGF0aW9uL3Rhc2tlbnVtcyc7XG5pbXBvcnQgeyBUYXNrU3RhdGUgfSBmcm9tICcuL3NyYy9pbXBsZW1lbnRhdGlvbi90YXNrZW51bXMnO1xuaW1wb3J0IHsgWGhySW9Qb29sIH0gZnJvbSAnLi9zcmMvaW1wbGVtZW50YXRpb24veGhyaW9wb29sJztcbmltcG9ydCB7IFJlZmVyZW5jZSB9IGZyb20gJy4vc3JjL3JlZmVyZW5jZSc7XG5pbXBvcnQgeyBTZXJ2aWNlIH0gZnJvbSAnLi9zcmMvc2VydmljZSc7XG5cbi8qKlxuICogVHlwZSBjb25zdGFudCBmb3IgRmlyZWJhc2UgU3RvcmFnZS5cbiAqL1xuY29uc3QgU1RPUkFHRV9UWVBFID0gJ3N0b3JhZ2UnO1xuXG5mdW5jdGlvbiBmYWN0b3J5KGFwcDogRmlyZWJhc2VBcHAsIHVudXNlZDogYW55LCBvcHRfdXJsPzogc3RyaW5nKTogU2VydmljZSB7XG4gIHJldHVybiBuZXcgU2VydmljZShhcHAsIG5ldyBYaHJJb1Bvb2woKSwgb3B0X3VybCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclN0b3JhZ2UoaW5zdGFuY2UpIHtcbiAgbGV0IG5hbWVzcGFjZUV4cG9ydHMgPSB7XG4gICAgLy8gbm8taW5saW5lXG4gICAgVGFza1N0YXRlOiBUYXNrU3RhdGUsXG4gICAgVGFza0V2ZW50OiBUYXNrRXZlbnQsXG4gICAgU3RyaW5nRm9ybWF0OiBTdHJpbmdGb3JtYXQsXG4gICAgU3RvcmFnZTogU2VydmljZSxcbiAgICBSZWZlcmVuY2U6IFJlZmVyZW5jZVxuICB9O1xuICBpbnN0YW5jZS5JTlRFUk5BTC5yZWdpc3RlclNlcnZpY2UoXG4gICAgU1RPUkFHRV9UWVBFLFxuICAgIGZhY3RvcnkgYXMgRmlyZWJhc2VTZXJ2aWNlRmFjdG9yeSxcbiAgICBuYW1lc3BhY2VFeHBvcnRzLFxuICAgIHVuZGVmaW5lZCxcbiAgICAvLyBBbGxvdyBtdWx0aXBsZSBzdG9yYWdlIGluc3RhbmNlcyBwZXIgYXBwLlxuICAgIHRydWVcbiAgKTtcbn1cblxucmVnaXN0ZXJTdG9yYWdlKGZpcmViYXNlKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgKiBhcyBlcnJvcnNFeHBvcnRzIGZyb20gJy4vZXJyb3InO1xuaW1wb3J0IHsgZXJyb3JzIH0gZnJvbSAnLi9lcnJvcic7XG5pbXBvcnQgKiBhcyBNZXRhZGF0YVV0aWxzIGZyb20gJy4vbWV0YWRhdGEnO1xuaW1wb3J0ICogYXMgdHlwZSBmcm9tICcuL3R5cGUnO1xuXG4vKipcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIGZ1bmN0aW9uLlxuICogQHBhcmFtIHNwZWNzIEFyZ3VtZW50IHNwZWNzLlxuICogQHBhcmFtIHBhc3NlZCBUaGUgYWN0dWFsIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhlIGZ1bmN0aW9uLlxuICogQHRocm93cyB7ZmJzLkVycm9yfSBJZiB0aGUgYXJndW1lbnRzIGFyZSBpbnZhbGlkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGUobmFtZTogc3RyaW5nLCBzcGVjczogQXJnU3BlY1tdLCBwYXNzZWQ6IElBcmd1bWVudHMpIHtcbiAgbGV0IG1pbkFyZ3MgPSBzcGVjcy5sZW5ndGg7XG4gIGxldCBtYXhBcmdzID0gc3BlY3MubGVuZ3RoO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHNwZWNzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHNwZWNzW2ldLm9wdGlvbmFsKSB7XG4gICAgICBtaW5BcmdzID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBsZXQgdmFsaWRMZW5ndGggPSBtaW5BcmdzIDw9IHBhc3NlZC5sZW5ndGggJiYgcGFzc2VkLmxlbmd0aCA8PSBtYXhBcmdzO1xuICBpZiAoIXZhbGlkTGVuZ3RoKSB7XG4gICAgdGhyb3cgZXJyb3JzRXhwb3J0cy5pbnZhbGlkQXJndW1lbnRDb3VudChcbiAgICAgIG1pbkFyZ3MsXG4gICAgICBtYXhBcmdzLFxuICAgICAgbmFtZSxcbiAgICAgIHBhc3NlZC5sZW5ndGhcbiAgICApO1xuICB9XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcGFzc2VkLmxlbmd0aDsgaSsrKSB7XG4gICAgdHJ5IHtcbiAgICAgIHNwZWNzW2ldLnZhbGlkYXRvcihwYXNzZWRbaV0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZXJyb3JzRXhwb3J0cy5pbnZhbGlkQXJndW1lbnQoaSwgbmFtZSwgZS5tZXNzYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGVycm9yc0V4cG9ydHMuaW52YWxpZEFyZ3VtZW50KGksIG5hbWUsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBzdHJ1Y3RcbiAqL1xuZXhwb3J0IGNsYXNzIEFyZ1NwZWMge1xuICB2YWxpZGF0b3I6IChwMTogYW55KSA9PiB2b2lkO1xuICBvcHRpb25hbDogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3Rvcih2YWxpZGF0b3I6IChwMTogYW55KSA9PiB2b2lkLCBvcHRfb3B0aW9uYWw/OiBib29sZWFuKSB7XG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgIHRoaXMudmFsaWRhdG9yID0gZnVuY3Rpb24ocDogYW55KSB7XG4gICAgICBpZiAoc2VsZi5vcHRpb25hbCAmJiAhdHlwZS5pc0p1c3REZWYocCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFsaWRhdG9yKHApO1xuICAgIH07XG4gICAgdGhpcy5vcHRpb25hbCA9ICEhb3B0X29wdGlvbmFsO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhbmRfKHYxOiAocDE6IGFueSkgPT4gdm9pZCwgdjI6IEZ1bmN0aW9uKTogKHAxOiBhbnkpID0+IHZvaWQge1xuICByZXR1cm4gZnVuY3Rpb24ocCkge1xuICAgIHYxKHApO1xuICAgIHYyKHApO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nU3BlYyhcbiAgb3B0X3ZhbGlkYXRvcj86IChwMTogYW55KSA9PiB2b2lkIHwgbnVsbCxcbiAgb3B0X29wdGlvbmFsPzogYm9vbGVhblxuKTogQXJnU3BlYyB7XG4gIGZ1bmN0aW9uIHN0cmluZ1ZhbGlkYXRvcihwOiBhbnkpIHtcbiAgICBpZiAoIXR5cGUuaXNTdHJpbmcocCkpIHtcbiAgICAgIHRocm93ICdFeHBlY3RlZCBzdHJpbmcuJztcbiAgICB9XG4gIH1cbiAgbGV0IHZhbGlkYXRvcjtcbiAgaWYgKG9wdF92YWxpZGF0b3IpIHtcbiAgICB2YWxpZGF0b3IgPSBhbmRfKHN0cmluZ1ZhbGlkYXRvciwgb3B0X3ZhbGlkYXRvcik7XG4gIH0gZWxzZSB7XG4gICAgdmFsaWRhdG9yID0gc3RyaW5nVmFsaWRhdG9yO1xuICB9XG4gIHJldHVybiBuZXcgQXJnU3BlYyh2YWxpZGF0b3IsIG9wdF9vcHRpb25hbCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGxvYWREYXRhU3BlYygpOiBBcmdTcGVjIHtcbiAgZnVuY3Rpb24gdmFsaWRhdG9yKHA6IGFueSkge1xuICAgIGxldCB2YWxpZCA9XG4gICAgICBwIGluc3RhbmNlb2YgVWludDhBcnJheSB8fFxuICAgICAgcCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyIHx8XG4gICAgICAodHlwZS5pc05hdGl2ZUJsb2JEZWZpbmVkKCkgJiYgcCBpbnN0YW5jZW9mIEJsb2IpO1xuICAgIGlmICghdmFsaWQpIHtcbiAgICAgIHRocm93ICdFeHBlY3RlZCBCbG9iIG9yIEZpbGUuJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5ldyBBcmdTcGVjKHZhbGlkYXRvcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtZXRhZGF0YVNwZWMob3B0X29wdGlvbmFsPzogYm9vbGVhbik6IEFyZ1NwZWMge1xuICByZXR1cm4gbmV3IEFyZ1NwZWMoTWV0YWRhdGFVdGlscy5tZXRhZGF0YVZhbGlkYXRvciwgb3B0X29wdGlvbmFsKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vbk5lZ2F0aXZlTnVtYmVyU3BlYygpOiBBcmdTcGVjIHtcbiAgZnVuY3Rpb24gdmFsaWRhdG9yKHA6IGFueSkge1xuICAgIGxldCB2YWxpZCA9IHR5cGUuaXNOdW1iZXIocCkgJiYgcCA+PSAwO1xuICAgIGlmICghdmFsaWQpIHtcbiAgICAgIHRocm93ICdFeHBlY3RlZCBhIG51bWJlciAwIG9yIGdyZWF0ZXIuJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5ldyBBcmdTcGVjKHZhbGlkYXRvcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb29zZU9iamVjdFNwZWMoXG4gIG9wdF92YWxpZGF0b3I/OiAoKHAxOiBhbnkpID0+IHZvaWQpIHwgbnVsbCxcbiAgb3B0X29wdGlvbmFsPzogYm9vbGVhblxuKTogQXJnU3BlYyB7XG4gIGZ1bmN0aW9uIHZhbGlkYXRvcihwOiBhbnkpIHtcbiAgICBsZXQgaXNMb29zZU9iamVjdCA9IHAgPT09IG51bGwgfHwgKHR5cGUuaXNEZWYocCkgJiYgcCBpbnN0YW5jZW9mIE9iamVjdCk7XG4gICAgaWYgKCFpc0xvb3NlT2JqZWN0KSB7XG4gICAgICB0aHJvdyAnRXhwZWN0ZWQgYW4gT2JqZWN0Lic7XG4gICAgfVxuICAgIGlmIChvcHRfdmFsaWRhdG9yICE9PSB1bmRlZmluZWQgJiYgb3B0X3ZhbGlkYXRvciAhPT0gbnVsbCkge1xuICAgICAgb3B0X3ZhbGlkYXRvcihwKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5ldyBBcmdTcGVjKHZhbGlkYXRvciwgb3B0X29wdGlvbmFsKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG51bGxGdW5jdGlvblNwZWMob3B0X29wdGlvbmFsPzogYm9vbGVhbik6IEFyZ1NwZWMge1xuICBmdW5jdGlvbiB2YWxpZGF0b3IocDogYW55KSB7XG4gICAgbGV0IHZhbGlkID0gcCA9PT0gbnVsbCB8fCB0eXBlLmlzRnVuY3Rpb24ocCk7XG4gICAgaWYgKCF2YWxpZCkge1xuICAgICAgdGhyb3cgJ0V4cGVjdGVkIGEgRnVuY3Rpb24uJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5ldyBBcmdTcGVjKHZhbGlkYXRvciwgb3B0X29wdGlvbmFsKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBvYmplY3QgaXMgY29udGFpbmVkIGluIHRoZSBhcnJheSAoY29tcGFyZWQgd2l0aCA9PT0pLlxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zPFQ+KGFycmF5OiBUW10sIGVsZW06IFQpOiBib29sZWFuIHtcbiAgcmV0dXJuIGFycmF5LmluZGV4T2YoZWxlbSkgIT09IC0xO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzaGFsbG93IGNvcHkgb2YgdGhlIGFycmF5IG9yIGFycmF5LWxpa2Ugb2JqZWN0IChlLmcuIGFyZ3VtZW50cykuXG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmU8VD4oYXJyYXlsaWtlOiBUW10pOiBUW10ge1xuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJyYXlsaWtlKTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBnaXZlbiBlbGVtZW50IGZyb20gdGhlIGdpdmVuIGFycmF5LCBpZiBpdCBpcyBjb250YWluZWQuXG4gKiBEaXJlY3RseSBtb2RpZmllcyB0aGUgcGFzc2VkLWluIGFycmF5LlxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZTxUPihhcnJheTogVFtdLCBlbGVtOiBUKSB7XG4gIGNvbnN0IGkgPSBhcnJheS5pbmRleE9mKGVsZW0pO1xuICBpZiAoaSAhPT0gLTEpIHtcbiAgICBhcnJheS5zcGxpY2UoaSwgMSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBNZXRob2QgZm9yIGludm9raW5nIGEgY2FsbGJhY2sgYXN5bmNocm9ub3VzbHkuXG4gKi9cbmltcG9ydCAqIGFzIHByb21pc2VpbXBsIGZyb20gJy4vcHJvbWlzZV9leHRlcm5hbCc7XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBmIHdpdGggaXRzIGFyZ3VtZW50cyBhc3luY2hyb25vdXNseSBhcyBhXG4gKiBtaWNyb3Rhc2ssIGkuZS4gYXMgc29vbiBhcyBwb3NzaWJsZSBhZnRlciB0aGUgY3VycmVudCBzY3JpcHQgcmV0dXJucyBiYWNrXG4gKiBpbnRvIGJyb3dzZXIgY29kZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzeW5jKGY6IEZ1bmN0aW9uKTogRnVuY3Rpb24ge1xuICByZXR1cm4gZnVuY3Rpb24oLi4uYXJnc1RvRm9yd2FyZDogYW55W10pIHtcbiAgICBwcm9taXNlaW1wbC5yZXNvbHZlKHRydWUpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICBmLmFwcGx5KG51bGwsIGFyZ3NUb0ZvcndhcmQpO1xuICAgIH0pO1xuICB9O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IFJlZmVyZW5jZSB9IGZyb20gJy4uL3JlZmVyZW5jZSc7XG5pbXBvcnQgeyBTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZSc7XG5pbXBvcnQgKiBhcyBjb25zdGFudHMgZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0ICogYXMgZXJyb3JzRXhwb3J0cyBmcm9tICcuL2Vycm9yJztcbmltcG9ydCB7IGVycm9ycyB9IGZyb20gJy4vZXJyb3InO1xuaW1wb3J0IHsgRmFpbFJlcXVlc3QgfSBmcm9tICcuL2ZhaWxyZXF1ZXN0JztcbmltcG9ydCB7IExvY2F0aW9uIH0gZnJvbSAnLi9sb2NhdGlvbic7XG5pbXBvcnQgKiBhcyBwcm9taXNlaW1wbCBmcm9tICcuL3Byb21pc2VfZXh0ZXJuYWwnO1xuaW1wb3J0IHsgUmVxdWVzdCB9IGZyb20gJy4vcmVxdWVzdCc7XG5pbXBvcnQgeyBSZXF1ZXN0SW5mbyB9IGZyb20gJy4vcmVxdWVzdGluZm8nO1xuaW1wb3J0IHsgcmVxdWVzdE1ha2VyIH0gZnJvbSAnLi9yZXF1ZXN0bWFrZXInO1xuaW1wb3J0IHsgUmVxdWVzdE1hcCB9IGZyb20gJy4vcmVxdWVzdG1hcCc7XG5pbXBvcnQgKiBhcyB0eXBlIGZyb20gJy4vdHlwZSc7XG5pbXBvcnQgeyBYaHJJb1Bvb2wgfSBmcm9tICcuL3hocmlvcG9vbCc7XG5pbXBvcnQgeyBGaXJlYmFzZUFwcCwgRmlyZWJhc2VBdXRoVG9rZW5EYXRhIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5cbi8qKlxuICogQHBhcmFtIGFwcCBJZiBudWxsLCBnZXRBdXRoVG9rZW4gYWx3YXlzIHJlc29sdmVzIHdpdGggbnVsbC5cbiAqIEBwYXJhbSBzZXJ2aWNlIFRoZSBzdG9yYWdlIHNlcnZpY2UgYXNzb2NpYXRlZCB3aXRoIHRoaXMgYXV0aCB3cmFwcGVyLlxuICogICAgIFVudHlwZWQgdG8gYXZvaWQgY2lyY3VsYXIgdHlwZSBkZXBlbmRlbmNpZXMuXG4gKiBAc3RydWN0XG4gKi9cbmV4cG9ydCBjbGFzcyBBdXRoV3JhcHBlciB7XG4gIHByaXZhdGUgYXBwXzogRmlyZWJhc2VBcHAgfCBudWxsO1xuICBwcml2YXRlIGJ1Y2tldF86IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gIC8qKlxuICBtYWtlclxuICAgICAqL1xuICBwcml2YXRlIHN0b3JhZ2VSZWZNYWtlcl86IChwMTogQXV0aFdyYXBwZXIsIHAyOiBMb2NhdGlvbikgPT4gUmVmZXJlbmNlO1xuICBwcml2YXRlIHJlcXVlc3RNYWtlcl86IHJlcXVlc3RNYWtlcjtcbiAgcHJpdmF0ZSBwb29sXzogWGhySW9Qb29sO1xuICBwcml2YXRlIHNlcnZpY2VfOiBTZXJ2aWNlO1xuICBwcml2YXRlIG1heE9wZXJhdGlvblJldHJ5VGltZV86IG51bWJlcjtcbiAgcHJpdmF0ZSBtYXhVcGxvYWRSZXRyeVRpbWVfOiBudW1iZXI7XG4gIHByaXZhdGUgcmVxdWVzdE1hcF86IFJlcXVlc3RNYXA7XG4gIHByaXZhdGUgZGVsZXRlZF86IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEZpcmViYXNlQXBwIHwgbnVsbCxcbiAgICBtYWtlcjogKHAxOiBBdXRoV3JhcHBlciwgcDI6IExvY2F0aW9uKSA9PiBSZWZlcmVuY2UsXG4gICAgcmVxdWVzdE1ha2VyOiByZXF1ZXN0TWFrZXIsXG4gICAgc2VydmljZTogU2VydmljZSxcbiAgICBwb29sOiBYaHJJb1Bvb2xcbiAgKSB7XG4gICAgdGhpcy5hcHBfID0gYXBwO1xuICAgIGlmICh0aGlzLmFwcF8gIT09IG51bGwpIHtcbiAgICAgIGxldCBvcHRpb25zID0gdGhpcy5hcHBfLm9wdGlvbnM7XG4gICAgICBpZiAodHlwZS5pc0RlZihvcHRpb25zKSkge1xuICAgICAgICB0aGlzLmJ1Y2tldF8gPSBBdXRoV3JhcHBlci5leHRyYWN0QnVja2V0XyhvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5zdG9yYWdlUmVmTWFrZXJfID0gbWFrZXI7XG4gICAgdGhpcy5yZXF1ZXN0TWFrZXJfID0gcmVxdWVzdE1ha2VyO1xuICAgIHRoaXMucG9vbF8gPSBwb29sO1xuICAgIHRoaXMuc2VydmljZV8gPSBzZXJ2aWNlO1xuICAgIHRoaXMubWF4T3BlcmF0aW9uUmV0cnlUaW1lXyA9IGNvbnN0YW50cy5kZWZhdWx0TWF4T3BlcmF0aW9uUmV0cnlUaW1lO1xuICAgIHRoaXMubWF4VXBsb2FkUmV0cnlUaW1lXyA9IGNvbnN0YW50cy5kZWZhdWx0TWF4VXBsb2FkUmV0cnlUaW1lO1xuICAgIHRoaXMucmVxdWVzdE1hcF8gPSBuZXcgUmVxdWVzdE1hcCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgZXh0cmFjdEJ1Y2tldF8oY29uZmlnOiB7XG4gICAgW3Byb3A6IHN0cmluZ106IGFueTtcbiAgfSk6IHN0cmluZyB8IG51bGwge1xuICAgIGxldCBidWNrZXRTdHJpbmcgPSBjb25maWdbY29uc3RhbnRzLmNvbmZpZ09wdGlvbl0gfHwgbnVsbDtcbiAgICBpZiAoYnVja2V0U3RyaW5nID09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBsZXQgbG9jOiBMb2NhdGlvbiA9IExvY2F0aW9uLm1ha2VGcm9tQnVja2V0U3BlYyhidWNrZXRTdHJpbmcpO1xuICAgIHJldHVybiBsb2MuYnVja2V0O1xuICB9XG5cbiAgZ2V0QXV0aFRva2VuKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIC8vIFRPRE8oYW5keXNvdG8pOiByZW1vdmUgaWZEZWYgY2hlY2tzIGFmdGVyIGZpcmViYXNlLWFwcCBpbXBsZW1lbnRzIHN0dWJzXG4gICAgLy8gKGIvMjg2NzM4MTgpLlxuICAgIGlmIChcbiAgICAgIHRoaXMuYXBwXyAhPT0gbnVsbCAmJlxuICAgICAgdHlwZS5pc0RlZih0aGlzLmFwcF8uSU5URVJOQUwpICYmXG4gICAgICB0eXBlLmlzRGVmKHRoaXMuYXBwXy5JTlRFUk5BTC5nZXRUb2tlbilcbiAgICApIHtcbiAgICAgIHJldHVybiB0aGlzLmFwcF8uSU5URVJOQUwuZ2V0VG9rZW4oKS50aGVuKFxuICAgICAgICBmdW5jdGlvbihyZXNwb25zZTogRmlyZWJhc2VBdXRoVG9rZW5EYXRhIHwgbnVsbCk6IHN0cmluZyB8IG51bGwge1xuICAgICAgICAgIGlmIChyZXNwb25zZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmFjY2Vzc1Rva2VuO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uKF9lcnJvcikge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcHJvbWlzZWltcGwucmVzb2x2ZShudWxsKSBhcyBQcm9taXNlPHN0cmluZyB8IG51bGw+O1xuICAgIH1cbiAgfVxuXG4gIGJ1Y2tldCgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAodGhpcy5kZWxldGVkXykge1xuICAgICAgdGhyb3cgZXJyb3JzRXhwb3J0cy5hcHBEZWxldGVkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmJ1Y2tldF87XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzZXJ2aWNlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGF1dGggd3JhcHBlci4gVW50eXBlZCB0byBhdm9pZCBjaXJjdWxhclxuICAgKiB0eXBlIGRlcGVuZGVuY2llcy5cbiAgICovXG4gIHNlcnZpY2UoKTogU2VydmljZSB7XG4gICAgcmV0dXJuIHRoaXMuc2VydmljZV87XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIG5ldyBmaXJlYmFzZVN0b3JhZ2UuUmVmZXJlbmNlIG9iamVjdCByZWZlcmVuY2luZyB0aGlzIEF1dGhXcmFwcGVyXG4gICAqIGF0IHRoZSBnaXZlbiBMb2NhdGlvbi5cbiAgICogQHBhcmFtIGxvYyBUaGUgTG9jYXRpb24uXG4gICAqIEByZXR1cm4gQWN0dWFsbHkgYSBmaXJlYmFzZVN0b3JhZ2UuUmVmZXJlbmNlLCB0eXBpbmcgbm90IGFsbG93ZWRcbiAgICogICAgIGJlY2F1c2Ugb2YgY2lyY3VsYXIgZGVwZW5kZW5jeSBwcm9ibGVtcy5cbiAgICovXG4gIG1ha2VTdG9yYWdlUmVmZXJlbmNlKGxvYzogTG9jYXRpb24pOiBSZWZlcmVuY2Uge1xuICAgIHJldHVybiB0aGlzLnN0b3JhZ2VSZWZNYWtlcl8odGhpcywgbG9jKTtcbiAgfVxuXG4gIG1ha2VSZXF1ZXN0PFQ+KFxuICAgIHJlcXVlc3RJbmZvOiBSZXF1ZXN0SW5mbzxUPixcbiAgICBhdXRoVG9rZW46IHN0cmluZyB8IG51bGxcbiAgKTogUmVxdWVzdDxUPiB7XG4gICAgaWYgKCF0aGlzLmRlbGV0ZWRfKSB7XG4gICAgICBsZXQgcmVxdWVzdCA9IHRoaXMucmVxdWVzdE1ha2VyXyhyZXF1ZXN0SW5mbywgYXV0aFRva2VuLCB0aGlzLnBvb2xfKTtcbiAgICAgIHRoaXMucmVxdWVzdE1hcF8uYWRkUmVxdWVzdChyZXF1ZXN0KTtcbiAgICAgIHJldHVybiByZXF1ZXN0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IEZhaWxSZXF1ZXN0KGVycm9yc0V4cG9ydHMuYXBwRGVsZXRlZCgpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBydW5uaW5nIHJlcXVlc3RzIGFuZCBwcmV2ZW50IG1vcmUgZnJvbSBiZWluZyBjcmVhdGVkLlxuICAgKi9cbiAgZGVsZXRlQXBwKCkge1xuICAgIHRoaXMuZGVsZXRlZF8gPSB0cnVlO1xuICAgIHRoaXMuYXBwXyA9IG51bGw7XG4gICAgdGhpcy5yZXF1ZXN0TWFwXy5jbGVhcigpO1xuICB9XG5cbiAgbWF4VXBsb2FkUmV0cnlUaW1lKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubWF4VXBsb2FkUmV0cnlUaW1lXztcbiAgfVxuXG4gIHNldE1heFVwbG9hZFJldHJ5VGltZSh0aW1lOiBudW1iZXIpIHtcbiAgICB0aGlzLm1heFVwbG9hZFJldHJ5VGltZV8gPSB0aW1lO1xuICB9XG5cbiAgbWF4T3BlcmF0aW9uUmV0cnlUaW1lKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubWF4T3BlcmF0aW9uUmV0cnlUaW1lXztcbiAgfVxuXG4gIHNldE1heE9wZXJhdGlvblJldHJ5VGltZSh0aW1lOiBudW1iZXIpIHtcbiAgICB0aGlzLm1heE9wZXJhdGlvblJldHJ5VGltZV8gPSB0aW1lO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgUHJvdmlkZXMgYSBtZXRob2QgZm9yIHJ1bm5pbmcgYSBmdW5jdGlvbiB3aXRoIGV4cG9uZW50aWFsXG4gKiBiYWNrb2ZmLlxuICovXG50eXBlIGlkID0gKHAxOiBib29sZWFuKSA9PiB2b2lkO1xuXG5leHBvcnQgeyBpZCB9O1xuXG4vKipcbiAqIEBwYXJhbSBmIE1heSBiZSBpbnZva2VkXG4gKiAgICAgYmVmb3JlIHRoZSBmdW5jdGlvbiByZXR1cm5zLlxuICogQHBhcmFtIGNhbGxiYWNrIEdldCBhbGwgdGhlIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhlIGZ1bmN0aW9uXG4gKiAgICAgcGFzc2VkIHRvIGYsIGluY2x1ZGluZyB0aGUgaW5pdGlhbCBib29sZWFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnQoXG4gIGY6IChcbiAgICBwMTogKHN1Y2Nlc3M6IGJvb2xlYW4sIC4uLnJlc3Q6IGFueVtdKSA9PiB2b2lkLFxuICAgIGNhbmNlbGVkOiBib29sZWFuXG4gICkgPT4gdm9pZCxcbiAgY2FsbGJhY2s6IEZ1bmN0aW9uLFxuICB0aW1lb3V0OiBudW1iZXJcbik6IGlkIHtcbiAgLy8gVE9ETyhhbmR5c290byk6IG1ha2UgdGhpcyBjb2RlIGNsZWFuZXIgKHByb2JhYmx5IHJlZmFjdG9yIGludG8gYW4gYWN0dWFsXG4gIC8vIHR5cGUgaW5zdGVhZCBvZiBhIGJ1bmNoIG9mIGZ1bmN0aW9ucyB3aXRoIHN0YXRlIHNoYXJlZCBpbiB0aGUgY2xvc3VyZSlcbiAgbGV0IHdhaXRTZWNvbmRzID0gMTtcbiAgLy8gV291bGQgdHlwZSB0aGlzIGFzIFwibnVtYmVyXCIgYnV0IHRoYXQgZG9lc24ndCB3b3JrIGZvciBOb2RlIHNvIMKvXFxfKOODhClfL8KvXG4gIGxldCB0aW1lb3V0SWQ6IGFueSA9IG51bGw7XG4gIGxldCBoaXRUaW1lb3V0ID0gZmFsc2U7XG4gIGxldCBjYW5jZWxTdGF0ZSA9IDA7XG5cbiAgZnVuY3Rpb24gY2FuY2VsZWQoKSB7XG4gICAgcmV0dXJuIGNhbmNlbFN0YXRlID09PSAyO1xuICB9XG4gIGxldCB0cmlnZ2VyZWRDYWxsYmFjayA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIHRyaWdnZXJDYWxsYmFjaygpIHtcbiAgICBpZiAoIXRyaWdnZXJlZENhbGxiYWNrKSB7XG4gICAgICB0cmlnZ2VyZWRDYWxsYmFjayA9IHRydWU7XG4gICAgICBjYWxsYmFjay5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbGxXaXRoRGVsYXkobWlsbGlzOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgdGltZW91dElkID0gbnVsbDtcbiAgICAgIGYoaGFuZGxlciwgY2FuY2VsZWQoKSk7XG4gICAgfSwgbWlsbGlzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZXIoc3VjY2VzczogYm9vbGVhbiwgLi4udmFyX2FyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgaWYgKHRyaWdnZXJlZENhbGxiYWNrKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICB0cmlnZ2VyQ2FsbGJhY2suYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IG11c3RTdG9wID0gY2FuY2VsZWQoKSB8fCBoaXRUaW1lb3V0O1xuICAgIGlmIChtdXN0U3RvcCkge1xuICAgICAgdHJpZ2dlckNhbGxiYWNrLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh3YWl0U2Vjb25kcyA8IDY0KSB7XG4gICAgICAvKiBUT0RPKGFuZHlzb3RvKTogZG9uJ3QgYmFjayBvZmYgc28gcXVpY2tseSBpZiB3ZSBrbm93IHdlJ3JlIG9mZmxpbmUuICovXG4gICAgICB3YWl0U2Vjb25kcyAqPSAyO1xuICAgIH1cbiAgICBsZXQgd2FpdE1pbGxpcztcbiAgICBpZiAoY2FuY2VsU3RhdGUgPT09IDEpIHtcbiAgICAgIGNhbmNlbFN0YXRlID0gMjtcbiAgICAgIHdhaXRNaWxsaXMgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICB3YWl0TWlsbGlzID0gKHdhaXRTZWNvbmRzICsgTWF0aC5yYW5kb20oKSkgKiAxMDAwO1xuICAgIH1cbiAgICBjYWxsV2l0aERlbGF5KHdhaXRNaWxsaXMpO1xuICB9XG4gIGxldCBzdG9wcGVkID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gc3RvcCh3YXNUaW1lb3V0OiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKHN0b3BwZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3RvcHBlZCA9IHRydWU7XG4gICAgaWYgKHRyaWdnZXJlZENhbGxiYWNrKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aW1lb3V0SWQgIT09IG51bGwpIHtcbiAgICAgIGlmICghd2FzVGltZW91dCkge1xuICAgICAgICBjYW5jZWxTdGF0ZSA9IDI7XG4gICAgICB9XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgIGNhbGxXaXRoRGVsYXkoMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghd2FzVGltZW91dCkge1xuICAgICAgICBjYW5jZWxTdGF0ZSA9IDE7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNhbGxXaXRoRGVsYXkoMCk7XG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgaGl0VGltZW91dCA9IHRydWU7XG4gICAgc3RvcCh0cnVlKTtcbiAgfSwgdGltZW91dCk7XG4gIHJldHVybiBzdG9wO1xufVxuXG4vKipcbiAqIFN0b3BzIHRoZSByZXRyeSBsb29wIGZyb20gcmVwZWF0aW5nLlxuICogSWYgdGhlIGZ1bmN0aW9uIGlzIGN1cnJlbnRseSBcImluIGJldHdlZW5cIiByZXRyaWVzLCBpdCBpcyBpbnZva2VkIGltbWVkaWF0ZWx5XG4gKiB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGFzIFwidHJ1ZVwiLiBPdGhlcndpc2UsIGl0IHdpbGwgYmUgaW52b2tlZCBvbmNlIG1vcmVcbiAqIGFmdGVyIHRoZSBjdXJyZW50IGludm9jYXRpb24gZmluaXNoZXMgaWZmIHRoZSBjdXJyZW50IGludm9jYXRpb24gd291bGQgaGF2ZVxuICogdHJpZ2dlcmVkIGFub3RoZXIgcmV0cnkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdG9wKGlkOiBpZCkge1xuICBpZChmYWxzZSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBmaWxlIFByb3ZpZGVzIGEgQmxvYi1saWtlIHdyYXBwZXIgZm9yIHZhcmlvdXMgYmluYXJ5IHR5cGVzIChpbmNsdWRpbmcgdGhlXG4gKiBuYXRpdmUgQmxvYiB0eXBlKS4gVGhpcyBtYWtlcyBpdCBwb3NzaWJsZSB0byB1cGxvYWQgdHlwZXMgbGlrZSBBcnJheUJ1ZmZlcnMsXG4gKiBtYWtpbmcgdXBsb2FkcyBwb3NzaWJsZSBpbiBlbnZpcm9ubWVudHMgd2l0aG91dCB0aGUgbmF0aXZlIEJsb2IgdHlwZS5cbiAqL1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnLi9mcyc7XG5pbXBvcnQgKiBhcyBzdHJpbmcgZnJvbSAnLi9zdHJpbmcnO1xuaW1wb3J0IHsgU3RyaW5nRm9ybWF0IH0gZnJvbSAnLi9zdHJpbmcnO1xuaW1wb3J0ICogYXMgdHlwZSBmcm9tICcuL3R5cGUnO1xuXG4vKipcbiAqIEBwYXJhbSBvcHRfZWxpZGVDb3B5IElmIHRydWUsIGRvZXNuJ3QgY29weSBtdXRhYmxlIGlucHV0IGRhdGFcbiAqICAgICAoZS5nLiBVaW50OEFycmF5cykuIFBhc3MgdHJ1ZSBvbmx5IGlmIHlvdSBrbm93IHRoZSBvYmplY3RzIHdpbGwgbm90IGJlXG4gKiAgICAgbW9kaWZpZWQgYWZ0ZXIgdGhpcyBibG9iJ3MgY29uc3RydWN0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgRmJzQmxvYiB7XG4gIHByaXZhdGUgZGF0YV86IEJsb2IgfCBVaW50OEFycmF5O1xuICBwcml2YXRlIHNpemVfOiBudW1iZXI7XG4gIHByaXZhdGUgdHlwZV86IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihkYXRhOiBCbG9iIHwgVWludDhBcnJheSB8IEFycmF5QnVmZmVyLCBvcHRfZWxpZGVDb3B5PzogYm9vbGVhbikge1xuICAgIGxldCBzaXplOiBudW1iZXIgPSAwO1xuICAgIGxldCBibG9iVHlwZTogc3RyaW5nID0gJyc7XG4gICAgaWYgKHR5cGUuaXNOYXRpdmVCbG9iKGRhdGEpKSB7XG4gICAgICB0aGlzLmRhdGFfID0gZGF0YSBhcyBCbG9iO1xuICAgICAgc2l6ZSA9IChkYXRhIGFzIEJsb2IpLnNpemU7XG4gICAgICBibG9iVHlwZSA9IChkYXRhIGFzIEJsb2IpLnR5cGU7XG4gICAgfSBlbHNlIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgIGlmIChvcHRfZWxpZGVDb3B5KSB7XG4gICAgICAgIHRoaXMuZGF0YV8gPSBuZXcgVWludDhBcnJheShkYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGF0YV8gPSBuZXcgVWludDhBcnJheShkYXRhLmJ5dGVMZW5ndGgpO1xuICAgICAgICB0aGlzLmRhdGFfLnNldChuZXcgVWludDhBcnJheShkYXRhKSk7XG4gICAgICB9XG4gICAgICBzaXplID0gdGhpcy5kYXRhXy5sZW5ndGg7XG4gICAgfSBlbHNlIGlmIChkYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgaWYgKG9wdF9lbGlkZUNvcHkpIHtcbiAgICAgICAgdGhpcy5kYXRhXyA9IGRhdGEgYXMgVWludDhBcnJheTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGF0YV8gPSBuZXcgVWludDhBcnJheShkYXRhLmxlbmd0aCk7XG4gICAgICAgIHRoaXMuZGF0YV8uc2V0KGRhdGEgYXMgVWludDhBcnJheSk7XG4gICAgICB9XG4gICAgICBzaXplID0gZGF0YS5sZW5ndGg7XG4gICAgfVxuICAgIHRoaXMuc2l6ZV8gPSBzaXplO1xuICAgIHRoaXMudHlwZV8gPSBibG9iVHlwZTtcbiAgfVxuXG4gIHNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5zaXplXztcbiAgfVxuXG4gIHR5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy50eXBlXztcbiAgfVxuXG4gIHNsaWNlKHN0YXJ0Qnl0ZTogbnVtYmVyLCBlbmRCeXRlOiBudW1iZXIpOiBGYnNCbG9iIHwgbnVsbCB7XG4gICAgaWYgKHR5cGUuaXNOYXRpdmVCbG9iKHRoaXMuZGF0YV8pKSB7XG4gICAgICBsZXQgcmVhbEJsb2IgPSB0aGlzLmRhdGFfIGFzIEJsb2I7XG4gICAgICBsZXQgc2xpY2VkID0gZnMuc2xpY2VCbG9iKHJlYWxCbG9iLCBzdGFydEJ5dGUsIGVuZEJ5dGUpO1xuICAgICAgaWYgKHNsaWNlZCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgRmJzQmxvYihzbGljZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgc2xpY2UgPSBuZXcgVWludDhBcnJheShcbiAgICAgICAgKHRoaXMuZGF0YV8gYXMgVWludDhBcnJheSkuYnVmZmVyLFxuICAgICAgICBzdGFydEJ5dGUsXG4gICAgICAgIGVuZEJ5dGUgLSBzdGFydEJ5dGVcbiAgICAgICk7XG4gICAgICByZXR1cm4gbmV3IEZic0Jsb2Ioc2xpY2UsIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRCbG9iKC4uLnZhcl9hcmdzOiAoc3RyaW5nIHwgRmJzQmxvYilbXSk6IEZic0Jsb2IgfCBudWxsIHtcbiAgICBpZiAodHlwZS5pc05hdGl2ZUJsb2JEZWZpbmVkKCkpIHtcbiAgICAgIHZhciBibG9iYnk6IChCbG9iIHwgVWludDhBcnJheSB8IHN0cmluZylbXSA9IHZhcl9hcmdzLm1hcChmdW5jdGlvbihcbiAgICAgICAgdmFsOiBzdHJpbmcgfCBGYnNCbG9iXG4gICAgICApOiBCbG9iIHwgVWludDhBcnJheSB8IHN0cmluZyB7XG4gICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBGYnNCbG9iKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbC5kYXRhXztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBuZXcgRmJzQmxvYihmcy5nZXRCbG9iLmFwcGx5KG51bGwsIGJsb2JieSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgdWludDhBcnJheXM6IFVpbnQ4QXJyYXlbXSA9IHZhcl9hcmdzLm1hcChmdW5jdGlvbihcbiAgICAgICAgdmFsOiBzdHJpbmcgfCBGYnNCbG9iXG4gICAgICApOiBVaW50OEFycmF5IHtcbiAgICAgICAgaWYgKHR5cGUuaXNTdHJpbmcodmFsKSkge1xuICAgICAgICAgIHJldHVybiBzdHJpbmcuZGF0YUZyb21TdHJpbmcoU3RyaW5nRm9ybWF0LlJBVywgdmFsIGFzIHN0cmluZykuZGF0YTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBCbG9icyBkb24ndCBleGlzdCwgc28gdGhpcyBoYXMgdG8gYmUgYSBVaW50OEFycmF5LlxuICAgICAgICAgIHJldHVybiAodmFsIGFzIEZic0Jsb2IpLmRhdGFfIGFzIFVpbnQ4QXJyYXk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbGV0IGZpbmFsTGVuZ3RoID0gMDtcbiAgICAgIHVpbnQ4QXJyYXlzLmZvckVhY2goZnVuY3Rpb24oYXJyYXk6IFVpbnQ4QXJyYXkpOiB2b2lkIHtcbiAgICAgICAgZmluYWxMZW5ndGggKz0gYXJyYXkuYnl0ZUxlbmd0aDtcbiAgICAgIH0pO1xuICAgICAgbGV0IG1lcmdlZCA9IG5ldyBVaW50OEFycmF5KGZpbmFsTGVuZ3RoKTtcbiAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICB1aW50OEFycmF5cy5mb3JFYWNoKGZ1bmN0aW9uKGFycmF5OiBVaW50OEFycmF5KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBtZXJnZWRbaW5kZXgrK10gPSBhcnJheVtpXTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gbmV3IEZic0Jsb2IobWVyZ2VkLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICB1cGxvYWREYXRhKCk6IEJsb2IgfCBVaW50OEFycmF5IHtcbiAgICByZXR1cm4gdGhpcy5kYXRhXztcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGZpbGVvdmVydmlldyBDb25zdGFudHMgdXNlZCBpbiB0aGUgRmlyZWJhc2UgU3RvcmFnZSBsaWJyYXJ5LlxuICovXG5cbi8qKlxuICogRG9tYWluIGFuZCBzY2hlbWUgZm9yIEFQSSBjYWxscy5cbiAqL1xuZXhwb3J0IGNvbnN0IGRvbWFpbkJhc2U6IHN0cmluZyA9ICdodHRwczovL2ZpcmViYXNlc3RvcmFnZS5nb29nbGVhcGlzLmNvbSc7XG5cbi8qKlxuICogRG9tYWluIGFuZCBzY2hlbWUgZm9yIG9iamVjdCBkb3dubG9hZHMuXG4gKi9cbmV4cG9ydCBjb25zdCBkb3dubG9hZEJhc2U6IHN0cmluZyA9ICdodHRwczovL2ZpcmViYXNlc3RvcmFnZS5nb29nbGVhcGlzLmNvbSc7XG5cbi8qKlxuICogQmFzZSBVUkwgZm9yIG5vbi11cGxvYWQgY2FsbHMgdG8gdGhlIEFQSS5cbiAqL1xuZXhwb3J0IGNvbnN0IGFwaUJhc2VVcmw6IHN0cmluZyA9ICcvdjAnO1xuXG4vKipcbiAqIEJhc2UgVVJMIGZvciB1cGxvYWQgY2FsbHMgdG8gdGhlIEFQSS5cbiAqL1xuZXhwb3J0IGNvbnN0IGFwaVVwbG9hZEJhc2VVcmw6IHN0cmluZyA9ICcvdjAnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0RG9tYWluQmFzZShkb21haW5CYXNlOiBzdHJpbmcpIHtcbiAgZG9tYWluQmFzZSA9IGRvbWFpbkJhc2U7XG59XG5cbmV4cG9ydCBjb25zdCBjb25maWdPcHRpb246IHN0cmluZyA9ICdzdG9yYWdlQnVja2V0JztcblxuLyoqXG4gKiAxIG1pbnV0ZVxuICovXG5leHBvcnQgY29uc3Qgc2hvcnRNYXhPcGVyYXRpb25SZXRyeVRpbWU6IG51bWJlciA9IDEgKiA2MCAqIDEwMDA7XG5cbi8qKlxuICogMiBtaW51dGVzXG4gKi9cbmV4cG9ydCBjb25zdCBkZWZhdWx0TWF4T3BlcmF0aW9uUmV0cnlUaW1lOiBudW1iZXIgPSAyICogNjAgKiAxMDAwO1xuXG4vKipcbiAqIDEwIG1pbnV0ZXNcbiAqL1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRNYXhVcGxvYWRSZXRyeVRpbWU6IG51bWJlciA9IDEwICogNjAgKiAxMDA7XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgdmFsdWUgb2YgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsIHdoaWNoIGlzIG5vdCB3ZWxsIHN1cHBvcnRlZFxuICogZW5vdWdoIGZvciB1cyB0byB1c2UgaXQgZGlyZWN0bHkuXG4gKi9cbmV4cG9ydCBjb25zdCBtaW5TYWZlSW50ZWdlcjogbnVtYmVyID0gLTkwMDcxOTkyNTQ3NDA5OTE7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgY29uZmlnT3B0aW9uIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuXG5leHBvcnQgY2xhc3MgRmlyZWJhc2VTdG9yYWdlRXJyb3IgaW1wbGVtZW50cyBFcnJvciB7XG4gIHByaXZhdGUgY29kZV86IHN0cmluZztcbiAgcHJpdmF0ZSBtZXNzYWdlXzogc3RyaW5nO1xuICBwcml2YXRlIHNlcnZlclJlc3BvbnNlXzogc3RyaW5nIHwgbnVsbDtcbiAgcHJpdmF0ZSBuYW1lXzogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGNvZGU6IENvZGUsIG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHRoaXMuY29kZV8gPSBwcmVwZW5kQ29kZShjb2RlKTtcbiAgICB0aGlzLm1lc3NhZ2VfID0gJ0ZpcmViYXNlIFN0b3JhZ2U6ICcgKyBtZXNzYWdlO1xuICAgIHRoaXMuc2VydmVyUmVzcG9uc2VfID0gbnVsbDtcbiAgICB0aGlzLm5hbWVfID0gJ0ZpcmViYXNlRXJyb3InO1xuICB9XG5cbiAgY29kZVByb3AoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jb2RlO1xuICB9XG5cbiAgY29kZUVxdWFscyhjb2RlOiBDb2RlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHByZXBlbmRDb2RlKGNvZGUpID09PSB0aGlzLmNvZGVQcm9wKCk7XG4gIH1cblxuICBzZXJ2ZXJSZXNwb25zZVByb3AoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuc2VydmVyUmVzcG9uc2VfO1xuICB9XG5cbiAgc2V0U2VydmVyUmVzcG9uc2VQcm9wKHNlcnZlclJlc3BvbnNlOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgdGhpcy5zZXJ2ZXJSZXNwb25zZV8gPSBzZXJ2ZXJSZXNwb25zZTtcbiAgfVxuXG4gIGdldCBuYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMubmFtZV87XG4gIH1cblxuICBnZXQgY29kZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNvZGVfO1xuICB9XG5cbiAgZ2V0IG1lc3NhZ2UoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlXztcbiAgfVxuXG4gIGdldCBzZXJ2ZXJSZXNwb25zZSgpOiBudWxsIHwgc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5zZXJ2ZXJSZXNwb25zZV87XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGVycm9ycyA9IHt9O1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB0eXBlIENvZGUgPSBzdHJpbmc7XG5leHBvcnQgY29uc3QgQ29kZSA9IHtcbiAgLy8gU2hhcmVkIGJldHdlZW4gYWxsIHBsYXRmb3Jtc1xuICBVTktOT1dOOiAndW5rbm93bicsXG4gIE9CSkVDVF9OT1RfRk9VTkQ6ICdvYmplY3Qtbm90LWZvdW5kJyxcbiAgQlVDS0VUX05PVF9GT1VORDogJ2J1Y2tldC1ub3QtZm91bmQnLFxuICBQUk9KRUNUX05PVF9GT1VORDogJ3Byb2plY3Qtbm90LWZvdW5kJyxcbiAgUVVPVEFfRVhDRUVERUQ6ICdxdW90YS1leGNlZWRlZCcsXG4gIFVOQVVUSEVOVElDQVRFRDogJ3VuYXV0aGVudGljYXRlZCcsXG4gIFVOQVVUSE9SSVpFRDogJ3VuYXV0aG9yaXplZCcsXG4gIFJFVFJZX0xJTUlUX0VYQ0VFREVEOiAncmV0cnktbGltaXQtZXhjZWVkZWQnLFxuICBJTlZBTElEX0NIRUNLU1VNOiAnaW52YWxpZC1jaGVja3N1bScsXG4gIENBTkNFTEVEOiAnY2FuY2VsZWQnLFxuICAvLyBKUyBzcGVjaWZpY1xuICBJTlZBTElEX0VWRU5UX05BTUU6ICdpbnZhbGlkLWV2ZW50LW5hbWUnLFxuICBJTlZBTElEX1VSTDogJ2ludmFsaWQtdXJsJyxcbiAgSU5WQUxJRF9ERUZBVUxUX0JVQ0tFVDogJ2ludmFsaWQtZGVmYXVsdC1idWNrZXQnLFxuICBOT19ERUZBVUxUX0JVQ0tFVDogJ25vLWRlZmF1bHQtYnVja2V0JyxcbiAgQ0FOTk9UX1NMSUNFX0JMT0I6ICdjYW5ub3Qtc2xpY2UtYmxvYicsXG4gIFNFUlZFUl9GSUxFX1dST05HX1NJWkU6ICdzZXJ2ZXItZmlsZS13cm9uZy1zaXplJyxcbiAgTk9fRE9XTkxPQURfVVJMOiAnbm8tZG93bmxvYWQtdXJsJyxcbiAgSU5WQUxJRF9BUkdVTUVOVDogJ2ludmFsaWQtYXJndW1lbnQnLFxuICBJTlZBTElEX0FSR1VNRU5UX0NPVU5UOiAnaW52YWxpZC1hcmd1bWVudC1jb3VudCcsXG4gIEFQUF9ERUxFVEVEOiAnYXBwLWRlbGV0ZWQnLFxuICBJTlZBTElEX1JPT1RfT1BFUkFUSU9OOiAnaW52YWxpZC1yb290LW9wZXJhdGlvbicsXG4gIElOVkFMSURfRk9STUFUOiAnaW52YWxpZC1mb3JtYXQnLFxuICBJTlRFUk5BTF9FUlJPUjogJ2ludGVybmFsLWVycm9yJ1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHByZXBlbmRDb2RlKGNvZGU6IENvZGUpOiBzdHJpbmcge1xuICByZXR1cm4gJ3N0b3JhZ2UvJyArIGNvZGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmtub3duKCk6IEZpcmViYXNlU3RvcmFnZUVycm9yIHtcbiAgbGV0IG1lc3NhZ2UgPVxuICAgICdBbiB1bmtub3duIGVycm9yIG9jY3VycmVkLCBwbGVhc2UgY2hlY2sgdGhlIGVycm9yIHBheWxvYWQgZm9yICcgK1xuICAgICdzZXJ2ZXIgcmVzcG9uc2UuJztcbiAgcmV0dXJuIG5ldyBGaXJlYmFzZVN0b3JhZ2VFcnJvcihDb2RlLlVOS05PV04sIG1lc3NhZ2UpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb2JqZWN0Tm90Rm91bmQocGF0aDogc3RyaW5nKTogRmlyZWJhc2VTdG9yYWdlRXJyb3Ige1xuICByZXR1cm4gbmV3IEZpcmViYXNlU3RvcmFnZUVycm9yKFxuICAgIENvZGUuT0JKRUNUX05PVF9GT1VORCxcbiAgICBcIk9iamVjdCAnXCIgKyBwYXRoICsgXCInIGRvZXMgbm90IGV4aXN0LlwiXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBidWNrZXROb3RGb3VuZChidWNrZXQ6IHN0cmluZyk6IEZpcmViYXNlU3RvcmFnZUVycm9yIHtcbiAgcmV0dXJuIG5ldyBGaXJlYmFzZVN0b3JhZ2VFcnJvcihcbiAgICBDb2RlLkJVQ0tFVF9OT1RfRk9VTkQsXG4gICAgXCJCdWNrZXQgJ1wiICsgYnVja2V0ICsgXCInIGRvZXMgbm90IGV4aXN0LlwiXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9qZWN0Tm90Rm91bmQocHJvamVjdDogc3RyaW5nKTogRmlyZWJhc2VTdG9yYWdlRXJyb3Ige1xuICByZXR1cm4gbmV3IEZpcmViYXNlU3RvcmFnZUVycm9yKFxuICAgIENvZGUuUFJPSkVDVF9OT1RfRk9VTkQsXG4gICAgXCJQcm9qZWN0ICdcIiArIHByb2plY3QgKyBcIicgZG9lcyBub3QgZXhpc3QuXCJcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHF1b3RhRXhjZWVkZWQoYnVja2V0OiBzdHJpbmcpOiBGaXJlYmFzZVN0b3JhZ2VFcnJvciB7XG4gIHJldHVybiBuZXcgRmlyZWJhc2VTdG9yYWdlRXJyb3IoXG4gICAgQ29kZS5RVU9UQV9FWENFRURFRCxcbiAgICBcIlF1b3RhIGZvciBidWNrZXQgJ1wiICtcbiAgICAgIGJ1Y2tldCArXG4gICAgICBcIicgZXhjZWVkZWQsIHBsZWFzZSB2aWV3IHF1b3RhIG9uIFwiICtcbiAgICAgICdodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vcHJpY2luZy8uJ1xuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdW5hdXRoZW50aWNhdGVkKCk6IEZpcmViYXNlU3RvcmFnZUVycm9yIHtcbiAgbGV0IG1lc3NhZ2UgPVxuICAgICdVc2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkLCBwbGVhc2UgYXV0aGVudGljYXRlIHVzaW5nIEZpcmViYXNlICcgK1xuICAgICdBdXRoZW50aWNhdGlvbiBhbmQgdHJ5IGFnYWluLic7XG4gIHJldHVybiBuZXcgRmlyZWJhc2VTdG9yYWdlRXJyb3IoQ29kZS5VTkFVVEhFTlRJQ0FURUQsIG1lc3NhZ2UpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdW5hdXRob3JpemVkKHBhdGg6IHN0cmluZyk6IEZpcmViYXNlU3RvcmFnZUVycm9yIHtcbiAgcmV0dXJuIG5ldyBGaXJlYmFzZVN0b3JhZ2VFcnJvcihcbiAgICBDb2RlLlVOQVVUSE9SSVpFRCxcbiAgICBcIlVzZXIgZG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGFjY2VzcyAnXCIgKyBwYXRoICsgXCInLlwiXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXRyeUxpbWl0RXhjZWVkZWQoKTogRmlyZWJhc2VTdG9yYWdlRXJyb3Ige1xuICByZXR1cm4gbmV3IEZpcmViYXNlU3RvcmFnZUVycm9yKFxuICAgIENvZGUuUkVUUllfTElNSVRfRVhDRUVERUQsXG4gICAgJ01heCByZXRyeSB0aW1lIGZvciBvcGVyYXRpb24gZXhjZWVkZWQsIHBsZWFzZSB0cnkgYWdhaW4uJ1xuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW52YWxpZENoZWNrc3VtKFxuICBwYXRoOiBzdHJpbmcsXG4gIGNoZWNrc3VtOiBzdHJpbmcsXG4gIGNhbGN1bGF0ZWQ6IHN0cmluZ1xuKTogRmlyZWJhc2VTdG9yYWdlRXJyb3Ige1xuICByZXR1cm4gbmV3IEZpcmViYXNlU3RvcmFnZUVycm9yKFxuICAgIENvZGUuSU5WQUxJRF9DSEVDS1NVTSxcbiAgICBcIlVwbG9hZGVkL2Rvd25sb2FkZWQgb2JqZWN0ICdcIiArXG4gICAgICBwYXRoICtcbiAgICAgIFwiJyBoYXMgY2hlY2tzdW0gJ1wiICtcbiAgICAgIGNoZWNrc3VtICtcbiAgICAgIFwiJyB3aGljaCBkb2VzIG5vdCBtYXRjaCAnXCIgK1xuICAgICAgY2FsY3VsYXRlZCArXG4gICAgICBcIicuIFBsZWFzZSByZXRyeSB0aGUgdXBsb2FkL2Rvd25sb2FkLlwiXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYW5jZWxlZCgpOiBGaXJlYmFzZVN0b3JhZ2VFcnJvciB7XG4gIHJldHVybiBuZXcgRmlyZWJhc2VTdG9yYWdlRXJyb3IoXG4gICAgQ29kZS5DQU5DRUxFRCxcbiAgICAnVXNlciBjYW5jZWxlZCB0aGUgdXBsb2FkL2Rvd25sb2FkLidcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGludmFsaWRFdmVudE5hbWUobmFtZTogc3RyaW5nKTogRmlyZWJhc2VTdG9yYWdlRXJyb3Ige1xuICByZXR1cm4gbmV3IEZpcmViYXNlU3RvcmFnZUVycm9yKFxuICAgIENvZGUuSU5WQUxJRF9FVkVOVF9OQU1FLFxuICAgIFwiSW52YWxpZCBldmVudCBuYW1lICdcIiArIG5hbWUgKyBcIicuXCJcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGludmFsaWRVcmwodXJsOiBzdHJpbmcpOiBGaXJlYmFzZVN0b3JhZ2VFcnJvciB7XG4gIHJldHVybiBuZXcgRmlyZWJhc2VTdG9yYWdlRXJyb3IoXG4gICAgQ29kZS5JTlZBTElEX1VSTCxcbiAgICBcIkludmFsaWQgVVJMICdcIiArIHVybCArIFwiJy5cIlxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW52YWxpZERlZmF1bHRCdWNrZXQoYnVja2V0OiBzdHJpbmcpOiBGaXJlYmFzZVN0b3JhZ2VFcnJvciB7XG4gIHJldHVybiBuZXcgRmlyZWJhc2VTdG9yYWdlRXJyb3IoXG4gICAgQ29kZS5JTlZBTElEX0RFRkFVTFRfQlVDS0VULFxuICAgIFwiSW52YWxpZCBkZWZhdWx0IGJ1Y2tldCAnXCIgKyBidWNrZXQgKyBcIicuXCJcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vRGVmYXVsdEJ1Y2tldCgpOiBGaXJlYmFzZVN0b3JhZ2VFcnJvciB7XG4gIHJldHVybiBuZXcgRmlyZWJhc2VTdG9yYWdlRXJyb3IoXG4gICAgQ29kZS5OT19ERUZBVUxUX0JVQ0tFVCxcbiAgICAnTm8gZGVmYXVsdCBidWNrZXQgJyArXG4gICAgICBcImZvdW5kLiBEaWQgeW91IHNldCB0aGUgJ1wiICtcbiAgICAgIGNvbmZpZ09wdGlvbiArXG4gICAgICBcIicgcHJvcGVydHkgd2hlbiBpbml0aWFsaXppbmcgdGhlIGFwcD9cIlxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2Fubm90U2xpY2VCbG9iKCk6IEZpcmViYXNlU3RvcmFnZUVycm9yIHtcbiAgcmV0dXJuIG5ldyBGaXJlYmFzZVN0b3JhZ2VFcnJvcihcbiAgICBDb2RlLkNBTk5PVF9TTElDRV9CTE9CLFxuICAgICdDYW5ub3Qgc2xpY2UgYmxvYiBmb3IgdXBsb2FkLiBQbGVhc2UgcmV0cnkgdGhlIHVwbG9hZC4nXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXJ2ZXJGaWxlV3JvbmdTaXplKCk6IEZpcmViYXNlU3RvcmFnZUVycm9yIHtcbiAgcmV0dXJuIG5ldyBGaXJlYmFzZVN0b3JhZ2VFcnJvcihcbiAgICBDb2RlLlNFUlZFUl9GSUxFX1dST05HX1NJWkUsXG4gICAgJ1NlcnZlciByZWNvcmRlZCBpbmNvcnJlY3QgdXBsb2FkIGZpbGUgc2l6ZSwgcGxlYXNlIHJldHJ5IHRoZSB1cGxvYWQuJ1xuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9Eb3dubG9hZFVSTCgpOiBGaXJlYmFzZVN0b3JhZ2VFcnJvciB7XG4gIHJldHVybiBuZXcgRmlyZWJhc2VTdG9yYWdlRXJyb3IoXG4gICAgQ29kZS5OT19ET1dOTE9BRF9VUkwsXG4gICAgJ1RoZSBnaXZlbiBmaWxlIGRvZXMgbm90IGhhdmUgYW55IGRvd25sb2FkIFVSTHMuJ1xuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW52YWxpZEFyZ3VtZW50KFxuICBpbmRleDogbnVtYmVyLFxuICBmbk5hbWU6IHN0cmluZyxcbiAgbWVzc2FnZTogc3RyaW5nXG4pOiBGaXJlYmFzZVN0b3JhZ2VFcnJvciB7XG4gIHJldHVybiBuZXcgRmlyZWJhc2VTdG9yYWdlRXJyb3IoXG4gICAgQ29kZS5JTlZBTElEX0FSR1VNRU5ULFxuICAgICdJbnZhbGlkIGFyZ3VtZW50IGluIGAnICsgZm5OYW1lICsgJ2AgYXQgaW5kZXggJyArIGluZGV4ICsgJzogJyArIG1lc3NhZ2VcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGludmFsaWRBcmd1bWVudENvdW50KFxuICBhcmdNaW46IG51bWJlcixcbiAgYXJnTWF4OiBudW1iZXIsXG4gIGZuTmFtZTogc3RyaW5nLFxuICByZWFsOiBudW1iZXJcbik6IEZpcmViYXNlU3RvcmFnZUVycm9yIHtcbiAgbGV0IGNvdW50UGFydDtcbiAgbGV0IHBsdXJhbDtcbiAgaWYgKGFyZ01pbiA9PT0gYXJnTWF4KSB7XG4gICAgY291bnRQYXJ0ID0gYXJnTWluO1xuICAgIHBsdXJhbCA9IGFyZ01pbiA9PT0gMSA/ICdhcmd1bWVudCcgOiAnYXJndW1lbnRzJztcbiAgfSBlbHNlIHtcbiAgICBjb3VudFBhcnQgPSAnYmV0d2VlbiAnICsgYXJnTWluICsgJyBhbmQgJyArIGFyZ01heDtcbiAgICBwbHVyYWwgPSAnYXJndW1lbnRzJztcbiAgfVxuICByZXR1cm4gbmV3IEZpcmViYXNlU3RvcmFnZUVycm9yKFxuICAgIENvZGUuSU5WQUxJRF9BUkdVTUVOVF9DT1VOVCxcbiAgICAnSW52YWxpZCBhcmd1bWVudCBjb3VudCBpbiBgJyArXG4gICAgICBmbk5hbWUgK1xuICAgICAgJ2A6IEV4cGVjdGVkICcgK1xuICAgICAgY291bnRQYXJ0ICtcbiAgICAgICcgJyArXG4gICAgICBwbHVyYWwgK1xuICAgICAgJywgcmVjZWl2ZWQgJyArXG4gICAgICByZWFsICtcbiAgICAgICcuJ1xuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwRGVsZXRlZCgpOiBGaXJlYmFzZVN0b3JhZ2VFcnJvciB7XG4gIHJldHVybiBuZXcgRmlyZWJhc2VTdG9yYWdlRXJyb3IoXG4gICAgQ29kZS5BUFBfREVMRVRFRCxcbiAgICAnVGhlIEZpcmViYXNlIGFwcCB3YXMgZGVsZXRlZC4nXG4gICk7XG59XG5cbi8qKlxuICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIG9wZXJhdGlvbiB0aGF0IHdhcyBpbnZhbGlkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW52YWxpZFJvb3RPcGVyYXRpb24obmFtZTogc3RyaW5nKTogRmlyZWJhc2VTdG9yYWdlRXJyb3Ige1xuICByZXR1cm4gbmV3IEZpcmViYXNlU3RvcmFnZUVycm9yKFxuICAgIENvZGUuSU5WQUxJRF9ST09UX09QRVJBVElPTixcbiAgICBcIlRoZSBvcGVyYXRpb24gJ1wiICtcbiAgICAgIG5hbWUgK1xuICAgICAgXCInIGNhbm5vdCBiZSBwZXJmb3JtZWQgb24gYSByb290IHJlZmVyZW5jZSwgY3JlYXRlIGEgbm9uLXJvb3QgXCIgK1xuICAgICAgXCJyZWZlcmVuY2UgdXNpbmcgY2hpbGQsIHN1Y2ggYXMgLmNoaWxkKCdmaWxlLnBuZycpLlwiXG4gICk7XG59XG5cbi8qKlxuICogQHBhcmFtIGZvcm1hdCBUaGUgZm9ybWF0IHRoYXQgd2FzIG5vdCB2YWxpZC5cbiAqIEBwYXJhbSBtZXNzYWdlIEEgbWVzc2FnZSBkZXNjcmliaW5nIHRoZSBmb3JtYXQgdmlvbGF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW52YWxpZEZvcm1hdChcbiAgZm9ybWF0OiBzdHJpbmcsXG4gIG1lc3NhZ2U6IHN0cmluZ1xuKTogRmlyZWJhc2VTdG9yYWdlRXJyb3Ige1xuICByZXR1cm4gbmV3IEZpcmViYXNlU3RvcmFnZUVycm9yKFxuICAgIENvZGUuSU5WQUxJRF9GT1JNQVQsXG4gICAgXCJTdHJpbmcgZG9lcyBub3QgbWF0Y2ggZm9ybWF0ICdcIiArIGZvcm1hdCArIFwiJzogXCIgKyBtZXNzYWdlXG4gICk7XG59XG5cbi8qKlxuICogQHBhcmFtIG1lc3NhZ2UgQSBtZXNzYWdlIGRlc2NyaWJpbmcgdGhlIGludGVybmFsIGVycm9yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJuYWxFcnJvcihtZXNzYWdlOiBzdHJpbmcpOiBGaXJlYmFzZVN0b3JhZ2VFcnJvciB7XG4gIHRocm93IG5ldyBGaXJlYmFzZVN0b3JhZ2VFcnJvcihcbiAgICBDb2RlLklOVEVSTkFMX0VSUk9SLFxuICAgICdJbnRlcm5hbCBlcnJvcjogJyArIG1lc3NhZ2VcbiAgKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyBGaXJlYmFzZVN0b3JhZ2VFcnJvciB9IGZyb20gJy4vZXJyb3InO1xuaW1wb3J0ICogYXMgcHJvbWlzZWltcGwgZnJvbSAnLi9wcm9taXNlX2V4dGVybmFsJztcbmltcG9ydCAqIGFzIFJlcXVlc3RFeHBvcnRzIGZyb20gJy4vcmVxdWVzdCc7XG5pbXBvcnQgeyBSZXF1ZXN0IH0gZnJvbSAnLi9yZXF1ZXN0JztcblxuLyoqXG4gKiBBIHJlcXVlc3Qgd2hvc2UgcHJvbWlzZSBhbHdheXMgZmFpbHMuXG4gKiBAc3RydWN0XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgY2xhc3MgRmFpbFJlcXVlc3Q8VD4gaW1wbGVtZW50cyBSZXF1ZXN0PFQ+IHtcbiAgcHJvbWlzZV86IFByb21pc2U8VD47XG5cbiAgY29uc3RydWN0b3IoZXJyb3I6IEZpcmViYXNlU3RvcmFnZUVycm9yKSB7XG4gICAgdGhpcy5wcm9taXNlXyA9IHByb21pc2VpbXBsLnJlamVjdDxUPihlcnJvcik7XG4gIH1cblxuICAvKiogQGluaGVyaXREb2MgKi9cbiAgZ2V0UHJvbWlzZSgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9taXNlXztcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdERvYyAqL1xuICBjYW5jZWwoYXBwRGVsZXRlID0gZmFsc2UpIHt9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IFNvbWUgbWV0aG9kcyBjb3BpZWQgZnJvbSBnb29nLmZzLlxuICogV2UgZG9uJ3QgaW5jbHVkZSBnb29nLmZzIGJlY2F1c2UgaXQgcHVsbHMgaW4gYSBidW5jaCBvZiBEZWZlcnJlZCBjb2RlIHRoYXRcbiAqIGJsb2F0cyB0aGUgc2l6ZSBvZiB0aGUgcmVsZWFzZWQgYmluYXJ5LlxuICovXG5pbXBvcnQgKiBhcyBhcnJheSBmcm9tICcuL2FycmF5JztcbmltcG9ydCAqIGFzIHR5cGUgZnJvbSAnLi90eXBlJztcblxuZGVjbGFyZSB2YXIgSUJsb2JCdWlsZGVyO1xuZGVjbGFyZSB2YXIgQmxvYkJ1aWxkZXI7XG5kZWNsYXJlIHZhciBXZWJLaXRCbG9iQnVpbGRlcjtcblxuZnVuY3Rpb24gZ2V0QmxvYkJ1aWxkZXIoKTogKHR5cGVvZiBJQmxvYkJ1aWxkZXIpIHwgdW5kZWZpbmVkIHtcbiAgaWYgKHR5cGVvZiBCbG9iQnVpbGRlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gQmxvYkJ1aWxkZXI7XG4gIH0gZWxzZSBpZiAodHlwZW9mIFdlYktpdEJsb2JCdWlsZGVyICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBXZWJLaXRCbG9iQnVpbGRlcjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogQ29uY2F0ZW5hdGVzIG9uZSBvciBtb3JlIHZhbHVlcyB0b2dldGhlciBhbmQgY29udmVydHMgdGhlbSB0byBhIEJsb2IuXG4gKlxuICogQHBhcmFtIHZhcl9hcmdzIFRoZSB2YWx1ZXMgdGhhdCB3aWxsIG1ha2UgdXAgdGhlIHJlc3VsdGluZyBibG9iLlxuICogQHJldHVybiBUaGUgYmxvYi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJsb2IoLi4udmFyX2FyZ3M6IChzdHJpbmcgfCBCbG9iIHwgQXJyYXlCdWZmZXIpW10pOiBCbG9iIHtcbiAgbGV0IEJsb2JCdWlsZGVyID0gZ2V0QmxvYkJ1aWxkZXIoKTtcbiAgaWYgKEJsb2JCdWlsZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICBsZXQgYmIgPSBuZXcgQmxvYkJ1aWxkZXIoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhcl9hcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBiYi5hcHBlbmQodmFyX2FyZ3NbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gYmIuZ2V0QmxvYigpO1xuICB9IGVsc2Uge1xuICAgIGlmICh0eXBlLmlzTmF0aXZlQmxvYkRlZmluZWQoKSkge1xuICAgICAgcmV0dXJuIG5ldyBCbG9iKHZhcl9hcmdzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgRXJyb3IoXCJUaGlzIGJyb3dzZXIgZG9lc24ndCBzZWVtIHRvIHN1cHBvcnQgY3JlYXRpbmcgQmxvYnNcIik7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU2xpY2VzIHRoZSBibG9iLiBUaGUgcmV0dXJuZWQgYmxvYiBjb250YWlucyBkYXRhIGZyb20gdGhlIHN0YXJ0IGJ5dGVcbiAqIChpbmNsdXNpdmUpIHRpbGwgdGhlIGVuZCBieXRlIChleGNsdXNpdmUpLiBOZWdhdGl2ZSBpbmRpY2VzIGNhbm5vdCBiZSB1c2VkLlxuICpcbiAqIEBwYXJhbSBibG9iIFRoZSBibG9iIHRvIGJlIHNsaWNlZC5cbiAqIEBwYXJhbSBzdGFydCBJbmRleCBvZiB0aGUgc3RhcnRpbmcgYnl0ZS5cbiAqIEBwYXJhbSBlbmQgSW5kZXggb2YgdGhlIGVuZGluZyBieXRlLlxuICogQHJldHVybiBUaGUgYmxvYiBzbGljZSBvciBudWxsIGlmIG5vdCBzdXBwb3J0ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzbGljZUJsb2IoYmxvYjogQmxvYiwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiBCbG9iIHwgbnVsbCB7XG4gIGlmICgoYmxvYiBhcyBhbnkpLndlYmtpdFNsaWNlKSB7XG4gICAgcmV0dXJuIChibG9iIGFzIGFueSkud2Via2l0U2xpY2Uoc3RhcnQsIGVuZCk7XG4gIH0gZWxzZSBpZiAoKGJsb2IgYXMgYW55KS5tb3pTbGljZSkge1xuICAgIHJldHVybiAoYmxvYiBhcyBhbnkpLm1velNsaWNlKHN0YXJ0LCBlbmQpO1xuICB9IGVsc2UgaWYgKGJsb2Iuc2xpY2UpIHtcbiAgICByZXR1cm4gYmxvYi5zbGljZShzdGFydCwgZW5kKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgKiBhcyB0eXBlIGZyb20gJy4vdHlwZSc7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgT2JqZWN0IHJlc3VsdGluZyBmcm9tIHBhcnNpbmcgdGhlIGdpdmVuIEpTT04sIG9yIG51bGwgaWYgdGhlXG4gKiBnaXZlbiBzdHJpbmcgZG9lcyBub3QgcmVwcmVzZW50IGEgSlNPTiBvYmplY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBqc29uT2JqZWN0T3JOdWxsKHM6IHN0cmluZyk6IHsgW25hbWU6IHN0cmluZ106IGFueSB9IHwgbnVsbCB7XG4gIGxldCBvYmo7XG4gIHRyeSB7XG4gICAgb2JqID0gSlNPTi5wYXJzZShzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmICh0eXBlLmlzTm9uQXJyYXlPYmplY3Qob2JqKSkge1xuICAgIHJldHVybiBvYmo7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBGdW5jdGlvbmFsaXR5IHJlbGF0ZWQgdG8gdGhlIHBhcnNpbmcvY29tcG9zaXRpb24gb2YgYnVja2V0L1xuICogb2JqZWN0IGxvY2F0aW9uLlxuICovXG5pbXBvcnQgKiBhcyBlcnJvcnNFeHBvcnRzIGZyb20gJy4vZXJyb3InO1xuaW1wb3J0IHsgZXJyb3JzIH0gZnJvbSAnLi9lcnJvcic7XG5cbi8qKlxuICogQHN0cnVjdFxuICovXG5leHBvcnQgY2xhc3MgTG9jYXRpb24ge1xuICBwcml2YXRlIHBhdGhfOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IocHVibGljIHJlYWRvbmx5IGJ1Y2tldDogc3RyaW5nLCBwYXRoOiBzdHJpbmcpIHtcbiAgICB0aGlzLnBhdGhfID0gcGF0aDtcbiAgfVxuXG4gIGdldCBwYXRoKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMucGF0aF87XG4gIH1cblxuICBmdWxsU2VydmVyVXJsKCk6IHN0cmluZyB7XG4gICAgbGV0IGVuY29kZSA9IGVuY29kZVVSSUNvbXBvbmVudDtcbiAgICByZXR1cm4gJy9iLycgKyBlbmNvZGUodGhpcy5idWNrZXQpICsgJy9vLycgKyBlbmNvZGUodGhpcy5wYXRoKTtcbiAgfVxuXG4gIGJ1Y2tldE9ubHlTZXJ2ZXJVcmwoKTogc3RyaW5nIHtcbiAgICBsZXQgZW5jb2RlID0gZW5jb2RlVVJJQ29tcG9uZW50O1xuICAgIHJldHVybiAnL2IvJyArIGVuY29kZSh0aGlzLmJ1Y2tldCkgKyAnL28nO1xuICB9XG5cbiAgc3RhdGljIG1ha2VGcm9tQnVja2V0U3BlYyhidWNrZXRTdHJpbmc6IHN0cmluZyk6IExvY2F0aW9uIHtcbiAgICBsZXQgYnVja2V0TG9jYXRpb247XG4gICAgdHJ5IHtcbiAgICAgIGJ1Y2tldExvY2F0aW9uID0gTG9jYXRpb24ubWFrZUZyb21VcmwoYnVja2V0U3RyaW5nKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBOb3QgdmFsaWQgVVJMLCB1c2UgYXMtaXMuIFRoaXMgbGV0cyB5b3UgcHV0IGJhcmUgYnVja2V0IG5hbWVzIGluXG4gICAgICAvLyBjb25maWcuXG4gICAgICByZXR1cm4gbmV3IExvY2F0aW9uKGJ1Y2tldFN0cmluZywgJycpO1xuICAgIH1cbiAgICBpZiAoYnVja2V0TG9jYXRpb24ucGF0aCA9PT0gJycpIHtcbiAgICAgIHJldHVybiBidWNrZXRMb2NhdGlvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgZXJyb3JzRXhwb3J0cy5pbnZhbGlkRGVmYXVsdEJ1Y2tldChidWNrZXRTdHJpbmcpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBtYWtlRnJvbVVybCh1cmw6IHN0cmluZyk6IExvY2F0aW9uIHtcbiAgICBsZXQgbG9jYXRpb24gPSBudWxsO1xuICAgIGxldCBidWNrZXREb21haW4gPSAnKFtBLVphLXowLTkuXFxcXC1dKyknO1xuXG4gICAgZnVuY3Rpb24gZ3NNb2RpZnkobG9jOiBMb2NhdGlvbikge1xuICAgICAgaWYgKGxvYy5wYXRoLmNoYXJBdChsb2MucGF0aC5sZW5ndGggLSAxKSA9PT0gJy8nKSB7XG4gICAgICAgIGxvYy5wYXRoXyA9IGxvYy5wYXRoXy5zbGljZSgwLCAtMSk7XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBnc1BhdGggPSAnKC8oLiopKT8kJztcbiAgICBsZXQgcGF0aCA9ICcoLyhbXj8jXSopLiopPyQnO1xuICAgIGxldCBnc1JlZ2V4ID0gbmV3IFJlZ0V4cCgnXmdzOi8vJyArIGJ1Y2tldERvbWFpbiArIGdzUGF0aCwgJ2knKTtcbiAgICBsZXQgZ3NJbmRpY2VzID0geyBidWNrZXQ6IDEsIHBhdGg6IDMgfTtcblxuICAgIGZ1bmN0aW9uIGh0dHBNb2RpZnkobG9jOiBMb2NhdGlvbikge1xuICAgICAgbG9jLnBhdGhfID0gZGVjb2RlVVJJQ29tcG9uZW50KGxvYy5wYXRoKTtcbiAgICB9XG4gICAgbGV0IHZlcnNpb24gPSAndltBLVphLXowLTlfXSsnO1xuICAgIGxldCBodHRwUmVnZXggPSBuZXcgUmVnRXhwKFxuICAgICAgJ15odHRwcz86Ly9maXJlYmFzZXN0b3JhZ2VcXFxcLmdvb2dsZWFwaXNcXFxcLmNvbS8nICtcbiAgICAgICAgdmVyc2lvbiArXG4gICAgICAgICcvYi8nICtcbiAgICAgICAgYnVja2V0RG9tYWluICtcbiAgICAgICAgJy9vJyArXG4gICAgICAgIHBhdGgsXG4gICAgICAnaSdcbiAgICApO1xuICAgIGxldCBodHRwSW5kaWNlcyA9IHsgYnVja2V0OiAxLCBwYXRoOiAzIH07XG4gICAgbGV0IGdyb3VwcyA9IFtcbiAgICAgIHsgcmVnZXg6IGdzUmVnZXgsIGluZGljZXM6IGdzSW5kaWNlcywgcG9zdE1vZGlmeTogZ3NNb2RpZnkgfSxcbiAgICAgIHsgcmVnZXg6IGh0dHBSZWdleCwgaW5kaWNlczogaHR0cEluZGljZXMsIHBvc3RNb2RpZnk6IGh0dHBNb2RpZnkgfVxuICAgIF07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncm91cHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBncm91cCA9IGdyb3Vwc1tpXTtcbiAgICAgIGxldCBjYXB0dXJlcyA9IGdyb3VwLnJlZ2V4LmV4ZWModXJsKTtcbiAgICAgIGlmIChjYXB0dXJlcykge1xuICAgICAgICBsZXQgYnVja2V0VmFsdWUgPSBjYXB0dXJlc1tncm91cC5pbmRpY2VzLmJ1Y2tldF07XG4gICAgICAgIGxldCBwYXRoVmFsdWUgPSBjYXB0dXJlc1tncm91cC5pbmRpY2VzLnBhdGhdO1xuICAgICAgICBpZiAoIXBhdGhWYWx1ZSkge1xuICAgICAgICAgIHBhdGhWYWx1ZSA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIGxvY2F0aW9uID0gbmV3IExvY2F0aW9uKGJ1Y2tldFZhbHVlLCBwYXRoVmFsdWUpO1xuICAgICAgICBncm91cC5wb3N0TW9kaWZ5KGxvY2F0aW9uKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChsb2NhdGlvbiA9PSBudWxsKSB7XG4gICAgICB0aHJvdyBlcnJvcnNFeHBvcnRzLmludmFsaWRVcmwodXJsKTtcbiAgICB9XG4gICAgcmV0dXJuIGxvY2F0aW9uO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgRG9jdW1lbnRhdGlvbiBmb3IgdGhlIG1ldGFkYXRhIGZvcm1hdFxuICovXG5pbXBvcnQgeyBNZXRhZGF0YSB9IGZyb20gJy4uL21ldGFkYXRhJztcblxuaW1wb3J0IHsgQXV0aFdyYXBwZXIgfSBmcm9tICcuL2F1dGh3cmFwcGVyJztcbmltcG9ydCAqIGFzIGpzb24gZnJvbSAnLi9qc29uJztcbmltcG9ydCB7IExvY2F0aW9uIH0gZnJvbSAnLi9sb2NhdGlvbic7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJy4vcGF0aCc7XG5pbXBvcnQgKiBhcyB0eXBlIGZyb20gJy4vdHlwZSc7XG5pbXBvcnQgKiBhcyBVcmxVdGlscyBmcm9tICcuL3VybCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBub1hmb3JtXyhtZXRhZGF0YTogTWV0YWRhdGEsIHZhbHVlOiBhbnkpOiBhbnkge1xuICByZXR1cm4gdmFsdWU7XG59XG5cbi8qKlxuICogQHN0cnVjdFxuICovXG5leHBvcnQgY2xhc3MgTWFwcGluZyB7XG4gIGxvY2FsOiBzdHJpbmc7XG4gIHdyaXRhYmxlOiBib29sZWFuO1xuICB4Zm9ybTogKHAxOiBNZXRhZGF0YSwgcDI6IGFueSkgPT4gYW55O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBzZXJ2ZXI6IHN0cmluZyxcbiAgICBvcHRfbG9jYWw/OiBzdHJpbmcgfCBudWxsLFxuICAgIG9wdF93cml0YWJsZT86IGJvb2xlYW4sXG4gICAgb3B0X3hmb3JtPzogKHAxOiBNZXRhZGF0YSwgcDI6IGFueSkgPT4gYW55IHwgbnVsbFxuICApIHtcbiAgICB0aGlzLmxvY2FsID0gb3B0X2xvY2FsIHx8IHNlcnZlcjtcbiAgICB0aGlzLndyaXRhYmxlID0gISFvcHRfd3JpdGFibGU7XG4gICAgdGhpcy54Zm9ybSA9IG9wdF94Zm9ybSB8fCBub1hmb3JtXztcbiAgfVxufVxudHlwZSBNYXBwaW5ncyA9IE1hcHBpbmdbXTtcblxuZXhwb3J0IHsgTWFwcGluZ3MgfTtcblxubGV0IG1hcHBpbmdzXzogTWFwcGluZ3MgfCBudWxsID0gbnVsbDtcblxuZXhwb3J0IGZ1bmN0aW9uIHhmb3JtUGF0aChmdWxsUGF0aDogYW55KTogc3RyaW5nIHtcbiAgbGV0IHZhbGlkID0gdHlwZS5pc1N0cmluZyhmdWxsUGF0aCk7XG4gIGlmICghdmFsaWQgfHwgZnVsbFBhdGgubGVuZ3RoIDwgMikge1xuICAgIHJldHVybiBmdWxsUGF0aDtcbiAgfSBlbHNlIHtcbiAgICBmdWxsUGF0aCA9IGZ1bGxQYXRoIGFzIHN0cmluZztcbiAgICByZXR1cm4gcGF0aC5sYXN0Q29tcG9uZW50KGZ1bGxQYXRoKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWFwcGluZ3MoKTogTWFwcGluZ3Mge1xuICBpZiAobWFwcGluZ3NfKSB7XG4gICAgcmV0dXJuIG1hcHBpbmdzXztcbiAgfVxuICBsZXQgbWFwcGluZ3MgPSBbXTtcbiAgbWFwcGluZ3MucHVzaChuZXcgTWFwcGluZygnYnVja2V0JykpO1xuICBtYXBwaW5ncy5wdXNoKG5ldyBNYXBwaW5nKCdnZW5lcmF0aW9uJykpO1xuICBtYXBwaW5ncy5wdXNoKG5ldyBNYXBwaW5nKCdtZXRhZ2VuZXJhdGlvbicpKTtcbiAgbWFwcGluZ3MucHVzaChuZXcgTWFwcGluZygnbmFtZScsICdmdWxsUGF0aCcsIHRydWUpKTtcblxuICBmdW5jdGlvbiBtYXBwaW5nc1hmb3JtUGF0aChtZXRhZGF0YTogTWV0YWRhdGEsIGZ1bGxQYXRoOiBhbnkpOiBzdHJpbmcge1xuICAgIHJldHVybiB4Zm9ybVBhdGgoZnVsbFBhdGgpO1xuICB9XG4gIGxldCBuYW1lTWFwcGluZyA9IG5ldyBNYXBwaW5nKCduYW1lJyk7XG4gIG5hbWVNYXBwaW5nLnhmb3JtID0gbWFwcGluZ3NYZm9ybVBhdGg7XG4gIG1hcHBpbmdzLnB1c2gobmFtZU1hcHBpbmcpO1xuXG4gIC8qKlxuICAgKiBDb2VyY2VzIHRoZSBzZWNvbmQgcGFyYW0gdG8gYSBudW1iZXIsIGlmIGl0IGlzIGRlZmluZWQuXG4gICAqL1xuICBmdW5jdGlvbiB4Zm9ybVNpemUobWV0YWRhdGE6IE1ldGFkYXRhLCBzaXplOiBhbnkpOiBudW1iZXIgfCBudWxsIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodHlwZS5pc0RlZihzaXplKSkge1xuICAgICAgcmV0dXJuICsoc2l6ZSBhcyBudW1iZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc2l6ZTtcbiAgICB9XG4gIH1cbiAgbGV0IHNpemVNYXBwaW5nID0gbmV3IE1hcHBpbmcoJ3NpemUnKTtcbiAgc2l6ZU1hcHBpbmcueGZvcm0gPSB4Zm9ybVNpemU7XG4gIG1hcHBpbmdzLnB1c2goc2l6ZU1hcHBpbmcpO1xuICBtYXBwaW5ncy5wdXNoKG5ldyBNYXBwaW5nKCd0aW1lQ3JlYXRlZCcpKTtcbiAgbWFwcGluZ3MucHVzaChuZXcgTWFwcGluZygndXBkYXRlZCcpKTtcbiAgbWFwcGluZ3MucHVzaChuZXcgTWFwcGluZygnbWQ1SGFzaCcsIG51bGwsIHRydWUpKTtcbiAgbWFwcGluZ3MucHVzaChuZXcgTWFwcGluZygnY2FjaGVDb250cm9sJywgbnVsbCwgdHJ1ZSkpO1xuICBtYXBwaW5ncy5wdXNoKG5ldyBNYXBwaW5nKCdjb250ZW50RGlzcG9zaXRpb24nLCBudWxsLCB0cnVlKSk7XG4gIG1hcHBpbmdzLnB1c2gobmV3IE1hcHBpbmcoJ2NvbnRlbnRFbmNvZGluZycsIG51bGwsIHRydWUpKTtcbiAgbWFwcGluZ3MucHVzaChuZXcgTWFwcGluZygnY29udGVudExhbmd1YWdlJywgbnVsbCwgdHJ1ZSkpO1xuICBtYXBwaW5ncy5wdXNoKG5ldyBNYXBwaW5nKCdjb250ZW50VHlwZScsIG51bGwsIHRydWUpKTtcbiAgbWFwcGluZ3MucHVzaChuZXcgTWFwcGluZygnbWV0YWRhdGEnLCAnY3VzdG9tTWV0YWRhdGEnLCB0cnVlKSk7XG5cbiAgLyoqXG4gICAqIFRyYW5zZm9ybXMgYSBjb21tYS1zZXBhcmF0ZWQgc3RyaW5nIG9mIHRva2VucyBpbnRvIGEgbGlzdCBvZiBkb3dubG9hZFxuICAgKiBVUkxzLlxuICAgKi9cbiAgZnVuY3Rpb24geGZvcm1Ub2tlbnMobWV0YWRhdGE6IE1ldGFkYXRhLCB0b2tlbnM6IGFueSk6IHN0cmluZ1tdIHtcbiAgICBsZXQgdmFsaWQgPSB0eXBlLmlzU3RyaW5nKHRva2VucykgJiYgdG9rZW5zLmxlbmd0aCA+IDA7XG4gICAgaWYgKCF2YWxpZCkge1xuICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIGlmIG9iamVjdHMgYXJlIHVwbG9hZGVkIHRocm91Z2ggR0NTIGFuZCByZXRyaWV2ZWRcbiAgICAgIC8vIHRocm91Z2ggbGlzdCwgc28gd2UgZG9uJ3Qgd2FudCB0byB0aHJvdyBhbiBFcnJvci5cbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgbGV0IGVuY29kZSA9IGVuY29kZVVSSUNvbXBvbmVudDtcbiAgICBsZXQgdG9rZW5zTGlzdCA9IHRva2Vucy5zcGxpdCgnLCcpO1xuICAgIGxldCB1cmxzID0gdG9rZW5zTGlzdC5tYXAoZnVuY3Rpb24odG9rZW46IHN0cmluZykge1xuICAgICAgbGV0IGJ1Y2tldDogc3RyaW5nID0gbWV0YWRhdGFbJ2J1Y2tldCddIGFzIHN0cmluZztcbiAgICAgIGxldCBwYXRoOiBzdHJpbmcgPSBtZXRhZGF0YVsnZnVsbFBhdGgnXSBhcyBzdHJpbmc7XG4gICAgICBsZXQgdXJsUGFydCA9ICcvYi8nICsgZW5jb2RlKGJ1Y2tldCkgKyAnL28vJyArIGVuY29kZShwYXRoKTtcbiAgICAgIGxldCBiYXNlID0gVXJsVXRpbHMubWFrZURvd25sb2FkVXJsKHVybFBhcnQpO1xuICAgICAgbGV0IHF1ZXJ5U3RyaW5nID0gVXJsVXRpbHMubWFrZVF1ZXJ5U3RyaW5nKHtcbiAgICAgICAgYWx0OiAnbWVkaWEnLFxuICAgICAgICB0b2tlbjogdG9rZW5cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGJhc2UgKyBxdWVyeVN0cmluZztcbiAgICB9KTtcbiAgICByZXR1cm4gdXJscztcbiAgfVxuICBtYXBwaW5ncy5wdXNoKFxuICAgIG5ldyBNYXBwaW5nKCdkb3dubG9hZFRva2VucycsICdkb3dubG9hZFVSTHMnLCBmYWxzZSwgeGZvcm1Ub2tlbnMpXG4gICk7XG4gIG1hcHBpbmdzXyA9IG1hcHBpbmdzO1xuICByZXR1cm4gbWFwcGluZ3NfO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkUmVmKG1ldGFkYXRhOiBNZXRhZGF0YSwgYXV0aFdyYXBwZXI6IEF1dGhXcmFwcGVyKSB7XG4gIGZ1bmN0aW9uIGdlbmVyYXRlUmVmKCkge1xuICAgIGxldCBidWNrZXQ6IHN0cmluZyA9IG1ldGFkYXRhWydidWNrZXQnXSBhcyBzdHJpbmc7XG4gICAgbGV0IHBhdGg6IHN0cmluZyA9IG1ldGFkYXRhWydmdWxsUGF0aCddIGFzIHN0cmluZztcbiAgICBsZXQgbG9jID0gbmV3IExvY2F0aW9uKGJ1Y2tldCwgcGF0aCk7XG4gICAgcmV0dXJuIGF1dGhXcmFwcGVyLm1ha2VTdG9yYWdlUmVmZXJlbmNlKGxvYyk7XG4gIH1cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1ldGFkYXRhLCAncmVmJywgeyBnZXQ6IGdlbmVyYXRlUmVmIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVJlc291cmNlKFxuICBhdXRoV3JhcHBlcjogQXV0aFdyYXBwZXIsXG4gIHJlc291cmNlOiB7IFtuYW1lOiBzdHJpbmddOiBhbnkgfSxcbiAgbWFwcGluZ3M6IE1hcHBpbmdzXG4pOiBNZXRhZGF0YSB7XG4gIGxldCBtZXRhZGF0YTogTWV0YWRhdGEgPSB7fSBhcyBNZXRhZGF0YTtcbiAgbWV0YWRhdGFbJ3R5cGUnXSA9ICdmaWxlJztcbiAgbGV0IGxlbiA9IG1hcHBpbmdzLmxlbmd0aDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGxldCBtYXBwaW5nID0gbWFwcGluZ3NbaV07XG4gICAgbWV0YWRhdGFbbWFwcGluZy5sb2NhbF0gPSBtYXBwaW5nLnhmb3JtKG1ldGFkYXRhLCByZXNvdXJjZVttYXBwaW5nLnNlcnZlcl0pO1xuICB9XG4gIGFkZFJlZihtZXRhZGF0YSwgYXV0aFdyYXBwZXIpO1xuICByZXR1cm4gbWV0YWRhdGE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUmVzb3VyY2VTdHJpbmcoXG4gIGF1dGhXcmFwcGVyOiBBdXRoV3JhcHBlcixcbiAgcmVzb3VyY2VTdHJpbmc6IHN0cmluZyxcbiAgbWFwcGluZ3M6IE1hcHBpbmdzXG4pOiBNZXRhZGF0YSB8IG51bGwge1xuICBsZXQgb2JqID0ganNvbi5qc29uT2JqZWN0T3JOdWxsKHJlc291cmNlU3RyaW5nKTtcbiAgaWYgKG9iaiA9PT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGxldCByZXNvdXJjZSA9IG9iaiBhcyBNZXRhZGF0YTtcbiAgcmV0dXJuIGZyb21SZXNvdXJjZShhdXRoV3JhcHBlciwgcmVzb3VyY2UsIG1hcHBpbmdzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvUmVzb3VyY2VTdHJpbmcoXG4gIG1ldGFkYXRhOiBNZXRhZGF0YSxcbiAgbWFwcGluZ3M6IE1hcHBpbmdzXG4pOiBzdHJpbmcge1xuICBsZXQgcmVzb3VyY2U6IHtcbiAgICBbcHJvcDogc3RyaW5nXTogYW55O1xuICB9ID0ge307XG4gIGxldCBsZW4gPSBtYXBwaW5ncy5sZW5ndGg7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBsZXQgbWFwcGluZyA9IG1hcHBpbmdzW2ldO1xuICAgIGlmIChtYXBwaW5nLndyaXRhYmxlKSB7XG4gICAgICByZXNvdXJjZVttYXBwaW5nLnNlcnZlcl0gPSBtZXRhZGF0YVttYXBwaW5nLmxvY2FsXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHJlc291cmNlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ldGFkYXRhVmFsaWRhdG9yKHA6IGFueSkge1xuICBsZXQgdmFsaWRUeXBlID0gcCAmJiB0eXBlLmlzT2JqZWN0KHApO1xuICBpZiAoIXZhbGlkVHlwZSkge1xuICAgIHRocm93ICdFeHBlY3RlZCBNZXRhZGF0YSBvYmplY3QuJztcbiAgfVxuICBmb3IgKGxldCBrZXkgaW4gcCkge1xuICAgIGxldCB2YWwgPSBwW2tleV07XG4gICAgaWYgKGtleSA9PT0gJ2N1c3RvbU1ldGFkYXRhJykge1xuICAgICAgaWYgKCF0eXBlLmlzT2JqZWN0KHZhbCkpIHtcbiAgICAgICAgdGhyb3cgJ0V4cGVjdGVkIG9iamVjdCBmb3IgXFwnY3VzdG9tTWV0YWRhdGFcXCcgbWFwcGluZy4nO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZS5pc05vbk51bGxPYmplY3QodmFsKSkge1xuICAgICAgICB0aHJvdyBcIk1hcHBpbmcgZm9yICdcIiArIGtleSArIFwiJyBjYW5ub3QgYmUgYW4gb2JqZWN0LlwiO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IENvbnRhaW5zIG1ldGhvZHMgZm9yIHdvcmtpbmcgd2l0aCBvYmplY3RzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udGFpbnMob2JqOiBPYmplY3QsIHByb3A6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JFYWNoPFQ+KFxuICBvYmo6IHsgW2tleTogc3RyaW5nXTogVCB9LFxuICBmOiAocDE6IHN0cmluZywgcDI6IFQpID0+IHZvaWRcbikge1xuICBmb3IgKGxldCBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKGNvbnRhaW5zKG9iaiwga2V5KSkge1xuICAgICAgZihrZXksIG9ialtrZXldKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lPFQ+KG9iaj86IHsgW2tleTogc3RyaW5nXTogYW55IH0gfCBudWxsKTogVCB7XG4gIGlmIChvYmogPT0gbnVsbCkge1xuICAgIHJldHVybiB7fSBhcyBUO1xuICB9XG5cbiAgbGV0IGM6IHsgW25hbWU6IHN0cmluZ106IGFueSB9ID0ge307XG4gIGZvckVhY2gob2JqLCBmdW5jdGlvbihrZXksIHZhbCkge1xuICAgIGNba2V5XSA9IHZhbDtcbiAgfSk7XG4gIHJldHVybiBjIGFzIFQ7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0ICogYXMgdHlwZSBmcm9tICcuL3R5cGUnO1xuXG50eXBlIE5leHRGbjxUPiA9ICh2YWx1ZTogVCkgPT4gdm9pZDtcbnR5cGUgRXJyb3JGbiA9IChlcnJvcjogRXJyb3IpID0+IHZvaWQ7XG50eXBlIENvbXBsZXRlRm4gPSAoKSA9PiB2b2lkO1xudHlwZSBVbnN1YnNjcmliZSA9ICgpID0+IHZvaWQ7XG5cbnR5cGUgU3Vic2NyaWJlPFQ+ID0gKFxuICBuZXh0OiBOZXh0Rm48VD4gfCB7IFtuYW1lOiBzdHJpbmddOiBzdHJpbmcgfCBudWxsIH0sXG4gIGVycm9yPzogRXJyb3JGbixcbiAgY29tcGxldGU/OiBDb21wbGV0ZUZuXG4pID0+IFVuc3Vic2NyaWJlO1xuXG5leHBvcnQgeyBOZXh0Rm4sIEVycm9yRm4sIENvbXBsZXRlRm4sIFVuc3Vic2NyaWJlLCBTdWJzY3JpYmUgfTtcblxuLyoqXG4gKiBAc3RydWN0XG4gKi9cbmV4cG9ydCBjbGFzcyBPYnNlcnZlcjxUPiB7XG4gIG5leHQ6IE5leHRGbjxUPiB8IG51bGw7XG4gIGVycm9yOiBFcnJvckZuIHwgbnVsbDtcbiAgY29tcGxldGU6IENvbXBsZXRlRm4gfCBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIG5leHRPck9ic2VydmVyOiBOZXh0Rm48VD4gfCB7IFtuYW1lOiBzdHJpbmddOiBzdHJpbmcgfCBudWxsIH0gfCBudWxsLFxuICAgIG9wdF9lcnJvcj86IEVycm9yRm4gfCBudWxsLFxuICAgIG9wdF9jb21wbGV0ZT86IENvbXBsZXRlRm4gfCBudWxsXG4gICkge1xuICAgIGxldCBhc0Z1bmN0aW9ucyA9XG4gICAgICB0eXBlLmlzRnVuY3Rpb24obmV4dE9yT2JzZXJ2ZXIpIHx8XG4gICAgICB0eXBlLmlzRGVmKG9wdF9lcnJvcikgfHxcbiAgICAgIHR5cGUuaXNEZWYob3B0X2NvbXBsZXRlKTtcbiAgICBpZiAoYXNGdW5jdGlvbnMpIHtcbiAgICAgIHRoaXMubmV4dCA9IG5leHRPck9ic2VydmVyIGFzIE5leHRGbjxUPiB8IG51bGw7XG4gICAgICB0aGlzLmVycm9yID0gb3B0X2Vycm9yIHx8IG51bGw7XG4gICAgICB0aGlzLmNvbXBsZXRlID0gb3B0X2NvbXBsZXRlIHx8IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV4dE9yT2JzZXJ2ZXIgYXMge1xuICAgICAgICBuZXh0PzogTmV4dEZuPFQ+IHwgbnVsbDtcbiAgICAgICAgZXJyb3I/OiBFcnJvckZuIHwgbnVsbDtcbiAgICAgICAgY29tcGxldGU/OiBDb21wbGV0ZUZuIHwgbnVsbDtcbiAgICAgIH07XG4gICAgICB0aGlzLm5leHQgPSBvYnNlcnZlci5uZXh0IHx8IG51bGw7XG4gICAgICB0aGlzLmVycm9yID0gb2JzZXJ2ZXIuZXJyb3IgfHwgbnVsbDtcbiAgICAgIHRoaXMuY29tcGxldGUgPSBvYnNlcnZlci5jb21wbGV0ZSB8fCBudWxsO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IENvbnRhaW5zIGhlbHBlciBtZXRob2RzIGZvciBtYW5pcHVsYXRpbmcgcGF0aHMuXG4gKi9cblxuLyoqXG4gKiBAcmV0dXJuIE51bGwgaWYgdGhlIHBhdGggaXMgYWxyZWFkeSBhdCB0aGUgcm9vdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcmVudChwYXRoOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgaWYgKHBhdGgubGVuZ3RoID09IDApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBsZXQgaW5kZXggPSBwYXRoLmxhc3RJbmRleE9mKCcvJyk7XG4gIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgbGV0IG5ld1BhdGggPSBwYXRoLnNsaWNlKDAsIGluZGV4KTtcbiAgcmV0dXJuIG5ld1BhdGg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGlsZChwYXRoOiBzdHJpbmcsIGNoaWxkUGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgbGV0IGNhbm9uaWNhbENoaWxkUGF0aCA9IGNoaWxkUGF0aFxuICAgIC5zcGxpdCgnLycpXG4gICAgLmZpbHRlcihmdW5jdGlvbihjb21wb25lbnQpIHtcbiAgICAgIHJldHVybiBjb21wb25lbnQubGVuZ3RoID4gMDtcbiAgICB9KVxuICAgIC5qb2luKCcvJyk7XG4gIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBjYW5vbmljYWxDaGlsZFBhdGg7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHBhdGggKyAnLycgKyBjYW5vbmljYWxDaGlsZFBhdGg7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsYXN0IGNvbXBvbmVudCBvZiBhIHBhdGguXG4gKiAnL2Zvby9iYXInIC0+ICdiYXInXG4gKiAnL2Zvby9iYXIvYmF6LycgLT4gJ2Jhei8nXG4gKiAnL2EnIC0+ICdhJ1xuICovXG5leHBvcnQgZnVuY3Rpb24gbGFzdENvbXBvbmVudChwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICBsZXQgaW5kZXggPSBwYXRoLmxhc3RJbmRleE9mKCcvJywgcGF0aC5sZW5ndGggLSAyKTtcbiAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgIHJldHVybiBwYXRoO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBwYXRoLnNsaWNlKGluZGV4ICsgMSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBJbXBsZW1lbnRzIHRoZSBwcm9taXNlIGFic3RyYWN0aW9uIGludGVyZmFjZSBmb3IgZXh0ZXJuYWxcbiAqIChwdWJsaWMgU0RLKSBwYWNrYWdpbmcsIHdoaWNoIGp1c3QgcGFzc2VzIHRocm91Z2ggdG8gdGhlIGZpcmViYXNlLWFwcCBpbXBsLlxuICovXG5cbi8qKlxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKGZ1bmN0aW9uKFQpOiB2b2lkKSxcbiAqICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uKCFFcnJvcik6IHZvaWQpKX0gcmVzb2x2ZXJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWFrZTxUPihcbiAgcmVzb2x2ZXI6IChwMTogKHAxOiBUKSA9PiB2b2lkLCBwMjogKHAxOiBFcnJvcikgPT4gdm9pZCkgPT4gdm9pZFxuKTogUHJvbWlzZTxUPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlcik7XG59XG5cbi8qKlxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmU8VD4odmFsdWU6IFQpOiBQcm9taXNlPFQ+IHtcbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkgYXMgUHJvbWlzZTxUPjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlamVjdDxUPihlcnJvcjogRXJyb3IpOiBQcm9taXNlPFQ+IHtcbiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKSBhcyBQcm9taXNlPFQ+O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IERlZmluZXMgbWV0aG9kcyB1c2VkIHRvIGFjdHVhbGx5IHNlbmQgSFRUUCByZXF1ZXN0cyBmcm9tXG4gKiBhYnN0cmFjdCByZXByZXNlbnRhdGlvbnMuXG4gKi9cblxuaW1wb3J0IGZpcmViYXNlLCB7IEZpcmViYXNlTmFtZXNwYWNlIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgKiBhcyBhcnJheSBmcm9tICcuL2FycmF5JztcbmltcG9ydCAqIGFzIGJhY2tvZmYgZnJvbSAnLi9iYWNrb2ZmJztcbmltcG9ydCAqIGFzIGVycm9yc0V4cG9ydHMgZnJvbSAnLi9lcnJvcic7XG5pbXBvcnQgeyBGaXJlYmFzZVN0b3JhZ2VFcnJvciB9IGZyb20gJy4vZXJyb3InO1xuaW1wb3J0IHsgZXJyb3JzIH0gZnJvbSAnLi9lcnJvcic7XG5pbXBvcnQgKiBhcyBvYmplY3QgZnJvbSAnLi9vYmplY3QnO1xuaW1wb3J0ICogYXMgcHJvbWlzZWltcGwgZnJvbSAnLi9wcm9taXNlX2V4dGVybmFsJztcbmltcG9ydCB7IFJlcXVlc3RJbmZvIH0gZnJvbSAnLi9yZXF1ZXN0aW5mbyc7XG5pbXBvcnQgKiBhcyB0eXBlIGZyb20gJy4vdHlwZSc7XG5pbXBvcnQgKiBhcyBVcmxVdGlscyBmcm9tICcuL3VybCc7XG5pbXBvcnQgKiBhcyBYaHJJb0V4cG9ydHMgZnJvbSAnLi94aHJpbyc7XG5pbXBvcnQgeyBIZWFkZXJzLCBYaHJJbyB9IGZyb20gJy4veGhyaW8nO1xuaW1wb3J0IHsgWGhySW9Qb29sIH0gZnJvbSAnLi94aHJpb3Bvb2wnO1xuXG4vKipcbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVxdWVzdDxUPiB7XG4gIGdldFByb21pc2UoKTogUHJvbWlzZTxUPjtcblxuICAvKipcbiAgICogQ2FuY2VscyB0aGUgcmVxdWVzdC4gSU1QT1JUQU5UOiB0aGUgcHJvbWlzZSBtYXkgc3RpbGwgYmUgcmVzb2x2ZWQgd2l0aCBhblxuICAgKiBhcHByb3ByaWF0ZSB2YWx1ZSAoaWYgdGhlIHJlcXVlc3QgaXMgZmluaXNoZWQgYmVmb3JlIHlvdSBjYWxsIHRoaXMgbWV0aG9kLFxuICAgKiBidXQgdGhlIHByb21pc2UgaGFzIG5vdCB5ZXQgYmVlbiByZXNvbHZlZCksIHNvIGRvbid0IGp1c3QgYXNzdW1lIGl0IHdpbGwgYmVcbiAgICogcmVqZWN0ZWQgaWYgeW91IGNhbGwgdGhpcyBmdW5jdGlvbi5cbiAgICogQHBhcmFtIGFwcERlbGV0ZSBUcnVlIGlmIHRoZSBjYW5jZWxhdGlvbiBjYW1lIGZyb20gdGhlIGFwcCBiZWluZyBkZWxldGVkLlxuICAgKi9cbiAgY2FuY2VsKGFwcERlbGV0ZT86IGJvb2xlYW4pOiB2b2lkO1xufVxuXG4vKipcbiAqIEBzdHJ1Y3RcbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmNsYXNzIE5ldHdvcmtSZXF1ZXN0PFQ+IGltcGxlbWVudHMgUmVxdWVzdDxUPiB7XG4gIHByaXZhdGUgdXJsXzogc3RyaW5nO1xuICBwcml2YXRlIG1ldGhvZF86IHN0cmluZztcbiAgcHJpdmF0ZSBoZWFkZXJzXzogSGVhZGVycztcbiAgcHJpdmF0ZSBib2R5Xzogc3RyaW5nIHwgQmxvYiB8IFVpbnQ4QXJyYXkgfCBudWxsO1xuICBwcml2YXRlIHN1Y2Nlc3NDb2Rlc186IG51bWJlcltdO1xuICBwcml2YXRlIGFkZGl0aW9uYWxSZXRyeUNvZGVzXzogbnVtYmVyW107XG4gIHByaXZhdGUgcGVuZGluZ1hocl86IFhocklvIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgYmFja29mZklkXzogYmFja29mZi5pZCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHJlc29sdmVfOiBGdW5jdGlvbiB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHJlamVjdF86IEZ1bmN0aW9uIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgY2FuY2VsZWRfOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgYXBwRGVsZXRlXzogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIGNhbGxiYWNrXzogKHAxOiBYaHJJbywgcDI6IHN0cmluZykgPT4gVDtcbiAgcHJpdmF0ZSBlcnJvckNhbGxiYWNrXzpcbiAgICB8ICgocDE6IFhocklvLCBwMjogRmlyZWJhc2VTdG9yYWdlRXJyb3IpID0+IEZpcmViYXNlU3RvcmFnZUVycm9yKVxuICAgIHwgbnVsbDtcbiAgcHJpdmF0ZSBwcm9ncmVzc0NhbGxiYWNrXzogKChwMTogbnVtYmVyLCBwMjogbnVtYmVyKSA9PiB2b2lkKSB8IG51bGw7XG4gIHByaXZhdGUgdGltZW91dF86IG51bWJlcjtcbiAgcHJpdmF0ZSBwb29sXzogWGhySW9Qb29sO1xuICBwcm9taXNlXzogUHJvbWlzZTxUPjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICB1cmw6IHN0cmluZyxcbiAgICBtZXRob2Q6IHN0cmluZyxcbiAgICBoZWFkZXJzOiBIZWFkZXJzLFxuICAgIGJvZHk6IHN0cmluZyB8IEJsb2IgfCBVaW50OEFycmF5IHwgbnVsbCxcbiAgICBzdWNjZXNzQ29kZXM6IG51bWJlcltdLFxuICAgIGFkZGl0aW9uYWxSZXRyeUNvZGVzOiBudW1iZXJbXSxcbiAgICBjYWxsYmFjazogKHAxOiBYaHJJbywgcDI6IHN0cmluZykgPT4gVCxcbiAgICBlcnJvckNhbGxiYWNrOlxuICAgICAgfCAoKHAxOiBYaHJJbywgcDI6IEZpcmViYXNlU3RvcmFnZUVycm9yKSA9PiBGaXJlYmFzZVN0b3JhZ2VFcnJvcilcbiAgICAgIHwgbnVsbCxcbiAgICB0aW1lb3V0OiBudW1iZXIsXG4gICAgcHJvZ3Jlc3NDYWxsYmFjazogKChwMTogbnVtYmVyLCBwMjogbnVtYmVyKSA9PiB2b2lkKSB8IG51bGwsXG4gICAgcG9vbDogWGhySW9Qb29sXG4gICkge1xuICAgIHRoaXMudXJsXyA9IHVybDtcbiAgICB0aGlzLm1ldGhvZF8gPSBtZXRob2Q7XG4gICAgdGhpcy5oZWFkZXJzXyA9IGhlYWRlcnM7XG4gICAgdGhpcy5ib2R5XyA9IGJvZHk7XG4gICAgdGhpcy5zdWNjZXNzQ29kZXNfID0gc3VjY2Vzc0NvZGVzLnNsaWNlKCk7XG4gICAgdGhpcy5hZGRpdGlvbmFsUmV0cnlDb2Rlc18gPSBhZGRpdGlvbmFsUmV0cnlDb2Rlcy5zbGljZSgpO1xuICAgIHRoaXMuY2FsbGJhY2tfID0gY2FsbGJhY2s7XG4gICAgdGhpcy5lcnJvckNhbGxiYWNrXyA9IGVycm9yQ2FsbGJhY2s7XG4gICAgdGhpcy5wcm9ncmVzc0NhbGxiYWNrXyA9IHByb2dyZXNzQ2FsbGJhY2s7XG4gICAgdGhpcy50aW1lb3V0XyA9IHRpbWVvdXQ7XG4gICAgdGhpcy5wb29sXyA9IHBvb2w7XG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgIHRoaXMucHJvbWlzZV8gPSBwcm9taXNlaW1wbC5tYWtlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgc2VsZi5yZXNvbHZlXyA9IHJlc29sdmU7XG4gICAgICBzZWxmLnJlamVjdF8gPSByZWplY3Q7XG4gICAgICBzZWxmLnN0YXJ0XygpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjdHVhbGx5IHN0YXJ0cyB0aGUgcmV0cnkgbG9vcC5cbiAgICovXG4gIHByaXZhdGUgc3RhcnRfKCkge1xuICAgIGxldCBzZWxmID0gdGhpcztcblxuICAgIGZ1bmN0aW9uIGRvVGhlUmVxdWVzdChcbiAgICAgIGJhY2tvZmZDYWxsYmFjazogKHAxOiBib29sZWFuLCAuLi5wMjogYW55W10pID0+IHZvaWQsXG4gICAgICBjYW5jZWxlZDogYm9vbGVhblxuICAgICkge1xuICAgICAgaWYgKGNhbmNlbGVkKSB7XG4gICAgICAgIGJhY2tvZmZDYWxsYmFjayhmYWxzZSwgbmV3IFJlcXVlc3RFbmRTdGF0dXMoZmFsc2UsIG51bGwsIHRydWUpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbGV0IHhociA9IHNlbGYucG9vbF8uY3JlYXRlWGhySW8oKTtcbiAgICAgIHNlbGYucGVuZGluZ1hocl8gPSB4aHI7XG5cbiAgICAgIGZ1bmN0aW9uIHByb2dyZXNzTGlzdGVuZXIocHJvZ3Jlc3NFdmVudDogUHJvZ3Jlc3NFdmVudCkge1xuICAgICAgICBsZXQgbG9hZGVkID0gcHJvZ3Jlc3NFdmVudC5sb2FkZWQ7XG4gICAgICAgIGxldCB0b3RhbCA9IHByb2dyZXNzRXZlbnQubGVuZ3RoQ29tcHV0YWJsZSA/IHByb2dyZXNzRXZlbnQudG90YWwgOiAtMTtcbiAgICAgICAgaWYgKHNlbGYucHJvZ3Jlc3NDYWxsYmFja18gIT09IG51bGwpIHtcbiAgICAgICAgICBzZWxmLnByb2dyZXNzQ2FsbGJhY2tfKGxvYWRlZCwgdG90YWwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc2VsZi5wcm9ncmVzc0NhbGxiYWNrXyAhPT0gbnVsbCkge1xuICAgICAgICB4aHIuYWRkVXBsb2FkUHJvZ3Jlc3NMaXN0ZW5lcihwcm9ncmVzc0xpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIHhoclxuICAgICAgICAuc2VuZChzZWxmLnVybF8sIHNlbGYubWV0aG9kXywgc2VsZi5ib2R5Xywgc2VsZi5oZWFkZXJzXylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oeGhyOiBYaHJJbykge1xuICAgICAgICAgIGlmIChzZWxmLnByb2dyZXNzQ2FsbGJhY2tfICE9PSBudWxsKSB7XG4gICAgICAgICAgICB4aHIucmVtb3ZlVXBsb2FkUHJvZ3Jlc3NMaXN0ZW5lcihwcm9ncmVzc0xpc3RlbmVyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VsZi5wZW5kaW5nWGhyXyA9IG51bGw7XG4gICAgICAgICAgeGhyID0geGhyIGFzIFhocklvO1xuICAgICAgICAgIGxldCBoaXRTZXJ2ZXIgPVxuICAgICAgICAgICAgeGhyLmdldEVycm9yQ29kZSgpID09PSBYaHJJb0V4cG9ydHMuRXJyb3JDb2RlLk5PX0VSUk9SO1xuICAgICAgICAgIGxldCBzdGF0dXMgPSB4aHIuZ2V0U3RhdHVzKCk7XG4gICAgICAgICAgaWYgKCFoaXRTZXJ2ZXIgfHwgc2VsZi5pc1JldHJ5U3RhdHVzQ29kZV8oc3RhdHVzKSkge1xuICAgICAgICAgICAgbGV0IHdhc0NhbmNlbGVkID1cbiAgICAgICAgICAgICAgeGhyLmdldEVycm9yQ29kZSgpID09PSBYaHJJb0V4cG9ydHMuRXJyb3JDb2RlLkFCT1JUO1xuICAgICAgICAgICAgYmFja29mZkNhbGxiYWNrKFxuICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgbmV3IFJlcXVlc3RFbmRTdGF0dXMoZmFsc2UsIG51bGwsIHdhc0NhbmNlbGVkKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IHN1Y2Nlc3NDb2RlID0gYXJyYXkuY29udGFpbnMoc2VsZi5zdWNjZXNzQ29kZXNfLCBzdGF0dXMpO1xuICAgICAgICAgIGJhY2tvZmZDYWxsYmFjayh0cnVlLCBuZXcgUmVxdWVzdEVuZFN0YXR1cyhzdWNjZXNzQ29kZSwgeGhyKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSByZXF1ZXN0V2VudFRocm91Z2ggVHJ1ZSBpZiB0aGUgcmVxdWVzdCBldmVudHVhbGx5IHdlbnRcbiAgICAgKiAgICAgdGhyb3VnaCwgZmFsc2UgaWYgaXQgaGl0IHRoZSByZXRyeSBsaW1pdCBvciB3YXMgY2FuY2VsZWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFja29mZkRvbmUoXG4gICAgICByZXF1ZXN0V2VudFRocm91Z2g6IGJvb2xlYW4sXG4gICAgICBzdGF0dXM6IFJlcXVlc3RFbmRTdGF0dXNcbiAgICApIHtcbiAgICAgIGxldCByZXNvbHZlID0gc2VsZi5yZXNvbHZlXyBhcyBGdW5jdGlvbjtcbiAgICAgIGxldCByZWplY3QgPSBzZWxmLnJlamVjdF8gYXMgRnVuY3Rpb247XG4gICAgICBsZXQgeGhyID0gc3RhdHVzLnhociBhcyBYaHJJbztcbiAgICAgIGlmIChzdGF0dXMud2FzU3VjY2Vzc0NvZGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsZXQgcmVzdWx0ID0gc2VsZi5jYWxsYmFja18oeGhyLCB4aHIuZ2V0UmVzcG9uc2VUZXh0KCkpO1xuICAgICAgICAgIGlmICh0eXBlLmlzSnVzdERlZihyZXN1bHQpKSB7XG4gICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh4aHIgIT09IG51bGwpIHtcbiAgICAgICAgICBsZXQgZXJyID0gZXJyb3JzRXhwb3J0cy51bmtub3duKCk7XG4gICAgICAgICAgZXJyLnNldFNlcnZlclJlc3BvbnNlUHJvcCh4aHIuZ2V0UmVzcG9uc2VUZXh0KCkpO1xuICAgICAgICAgIGlmIChzZWxmLmVycm9yQ2FsbGJhY2tfKSB7XG4gICAgICAgICAgICByZWplY3Qoc2VsZi5lcnJvckNhbGxiYWNrXyh4aHIsIGVycikpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHN0YXR1cy5jYW5jZWxlZCkge1xuICAgICAgICAgICAgbGV0IGVyciA9IHNlbGYuYXBwRGVsZXRlX1xuICAgICAgICAgICAgICA/IGVycm9yc0V4cG9ydHMuYXBwRGVsZXRlZCgpXG4gICAgICAgICAgICAgIDogZXJyb3JzRXhwb3J0cy5jYW5jZWxlZCgpO1xuICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBlcnIgPSBlcnJvcnNFeHBvcnRzLnJldHJ5TGltaXRFeGNlZWRlZCgpO1xuICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmNhbmNlbGVkXykge1xuICAgICAgYmFja29mZkRvbmUoZmFsc2UsIG5ldyBSZXF1ZXN0RW5kU3RhdHVzKGZhbHNlLCBudWxsLCB0cnVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYmFja29mZklkXyA9IGJhY2tvZmYuc3RhcnQoZG9UaGVSZXF1ZXN0LCBiYWNrb2ZmRG9uZSwgdGhpcy50aW1lb3V0Xyk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbmhlcml0RG9jICovXG4gIGdldFByb21pc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvbWlzZV87XG4gIH1cblxuICAvKiogQGluaGVyaXREb2MgKi9cbiAgY2FuY2VsKGFwcERlbGV0ZT86IGJvb2xlYW4pIHtcbiAgICB0aGlzLmNhbmNlbGVkXyA9IHRydWU7XG4gICAgdGhpcy5hcHBEZWxldGVfID0gYXBwRGVsZXRlIHx8IGZhbHNlO1xuICAgIGlmICh0aGlzLmJhY2tvZmZJZF8gIT09IG51bGwpIHtcbiAgICAgIGJhY2tvZmYuc3RvcCh0aGlzLmJhY2tvZmZJZF8pO1xuICAgIH1cbiAgICBpZiAodGhpcy5wZW5kaW5nWGhyXyAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5wZW5kaW5nWGhyXy5hYm9ydCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaXNSZXRyeVN0YXR1c0NvZGVfKHN0YXR1czogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgLy8gVGhlIGNvZGVzIGZvciB3aGljaCB0byByZXRyeSBjYW1lIGZyb20gdGhpcyBwYWdlOlxuICAgIC8vIGh0dHBzOi8vY2xvdWQuZ29vZ2xlLmNvbS9zdG9yYWdlL2RvY3MvZXhwb25lbnRpYWwtYmFja29mZlxuICAgIGxldCBpc0ZpdmVIdW5kcmVkQ29kZSA9IHN0YXR1cyA+PSA1MDAgJiYgc3RhdHVzIDwgNjAwO1xuICAgIGxldCBleHRyYVJldHJ5Q29kZXMgPSBbXG4gICAgICAvLyBSZXF1ZXN0IFRpbWVvdXQ6IHdlYiBzZXJ2ZXIgZGlkbid0IHJlY2VpdmUgZnVsbCByZXF1ZXN0IGluIHRpbWUuXG4gICAgICA0MDgsXG4gICAgICAvLyBUb28gTWFueSBSZXF1ZXN0czogeW91J3JlIGdldHRpbmcgcmF0ZS1saW1pdGVkLCBiYXNpY2FsbHkuXG4gICAgICA0MjlcbiAgICBdO1xuICAgIGxldCBpc0V4dHJhUmV0cnlDb2RlID0gYXJyYXkuY29udGFpbnMoZXh0cmFSZXRyeUNvZGVzLCBzdGF0dXMpO1xuICAgIGxldCBpc1JlcXVlc3RTcGVjaWZpY1JldHJ5Q29kZSA9IGFycmF5LmNvbnRhaW5zKFxuICAgICAgdGhpcy5hZGRpdGlvbmFsUmV0cnlDb2Rlc18sXG4gICAgICBzdGF0dXNcbiAgICApO1xuICAgIHJldHVybiBpc0ZpdmVIdW5kcmVkQ29kZSB8fCBpc0V4dHJhUmV0cnlDb2RlIHx8IGlzUmVxdWVzdFNwZWNpZmljUmV0cnlDb2RlO1xuICB9XG59XG5cbi8qKlxuICogQSBjb2xsZWN0aW9uIG9mIGluZm9ybWF0aW9uIGFib3V0IHRoZSByZXN1bHQgb2YgYSBuZXR3b3JrIHJlcXVlc3QuXG4gKiBAcGFyYW0gb3B0X2NhbmNlbGVkIERlZmF1bHRzIHRvIGZhbHNlLlxuICogQHN0cnVjdFxuICovXG5leHBvcnQgY2xhc3MgUmVxdWVzdEVuZFN0YXR1cyB7XG4gIC8qKlxuICAgKiBUcnVlIGlmIHRoZSByZXF1ZXN0IHdhcyBjYW5jZWxlZC5cbiAgICovXG4gIGNhbmNlbGVkOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyB3YXNTdWNjZXNzQ29kZTogYm9vbGVhbixcbiAgICBwdWJsaWMgeGhyOiBYaHJJbyB8IG51bGwsXG4gICAgb3B0X2NhbmNlbGVkPzogYm9vbGVhblxuICApIHtcbiAgICB0aGlzLmNhbmNlbGVkID0gISFvcHRfY2FuY2VsZWQ7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEF1dGhIZWFkZXJfKGhlYWRlcnM6IEhlYWRlcnMsIGF1dGhUb2tlbjogc3RyaW5nIHwgbnVsbCkge1xuICBpZiAoYXV0aFRva2VuICE9PSBudWxsICYmIGF1dGhUb2tlbi5sZW5ndGggPiAwKSB7XG4gICAgaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gJ0ZpcmViYXNlICcgKyBhdXRoVG9rZW47XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZFZlcnNpb25IZWFkZXJfKGhlYWRlcnM6IEhlYWRlcnMpIHtcbiAgbGV0IG51bWJlciA9XG4gICAgdHlwZW9mIGZpcmViYXNlICE9PSAndW5kZWZpbmVkJyA/IGZpcmViYXNlLlNES19WRVJTSU9OIDogJ0FwcE1hbmFnZXInO1xuICBoZWFkZXJzWydYLUZpcmViYXNlLVN0b3JhZ2UtVmVyc2lvbiddID0gJ3dlYmpzLycgKyBudW1iZXI7XG59XG5cbi8qKlxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VSZXF1ZXN0PFQ+KFxuICByZXF1ZXN0SW5mbzogUmVxdWVzdEluZm88VD4sXG4gIGF1dGhUb2tlbjogc3RyaW5nIHwgbnVsbCxcbiAgcG9vbDogWGhySW9Qb29sXG4pOiBSZXF1ZXN0PFQ+IHtcbiAgbGV0IHF1ZXJ5UGFydCA9IFVybFV0aWxzLm1ha2VRdWVyeVN0cmluZyhyZXF1ZXN0SW5mby51cmxQYXJhbXMpO1xuICBsZXQgdXJsID0gcmVxdWVzdEluZm8udXJsICsgcXVlcnlQYXJ0O1xuICBsZXQgaGVhZGVycyA9IG9iamVjdC5jbG9uZTxIZWFkZXJzPihyZXF1ZXN0SW5mby5oZWFkZXJzKTtcbiAgYWRkQXV0aEhlYWRlcl8oaGVhZGVycywgYXV0aFRva2VuKTtcbiAgYWRkVmVyc2lvbkhlYWRlcl8oaGVhZGVycyk7XG4gIHJldHVybiBuZXcgTmV0d29ya1JlcXVlc3Q8VD4oXG4gICAgdXJsLFxuICAgIHJlcXVlc3RJbmZvLm1ldGhvZCxcbiAgICBoZWFkZXJzLFxuICAgIHJlcXVlc3RJbmZvLmJvZHksXG4gICAgcmVxdWVzdEluZm8uc3VjY2Vzc0NvZGVzLFxuICAgIHJlcXVlc3RJbmZvLmFkZGl0aW9uYWxSZXRyeUNvZGVzLFxuICAgIHJlcXVlc3RJbmZvLmhhbmRsZXIsXG4gICAgcmVxdWVzdEluZm8uZXJyb3JIYW5kbGVyLFxuICAgIHJlcXVlc3RJbmZvLnRpbWVvdXQsXG4gICAgcmVxdWVzdEluZm8ucHJvZ3Jlc3NDYWxsYmFjayxcbiAgICBwb29sXG4gICk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgRmlyZWJhc2VTdG9yYWdlRXJyb3IgfSBmcm9tICcuL2Vycm9yJztcbmltcG9ydCB7IEhlYWRlcnMsIFhocklvIH0gZnJvbSAnLi94aHJpbyc7XG5cbmV4cG9ydCB0eXBlIFVybFBhcmFtcyA9IHsgW25hbWU6IHN0cmluZ106IHN0cmluZyB9O1xuXG5leHBvcnQgY2xhc3MgUmVxdWVzdEluZm88VD4ge1xuICB1cmxQYXJhbXM6IFVybFBhcmFtcyA9IHt9O1xuICBoZWFkZXJzOiBIZWFkZXJzID0ge307XG4gIGJvZHk6IEJsb2IgfCBzdHJpbmcgfCBVaW50OEFycmF5IHwgbnVsbCA9IG51bGw7XG5cbiAgZXJyb3JIYW5kbGVyOlxuICAgIHwgKChwMTogWGhySW8sIHAyOiBGaXJlYmFzZVN0b3JhZ2VFcnJvcikgPT4gRmlyZWJhc2VTdG9yYWdlRXJyb3IpXG4gICAgfCBudWxsID0gbnVsbDtcblxuICAvKipcbiAgICogQ2FsbGVkIHdpdGggdGhlIGN1cnJlbnQgbnVtYmVyIG9mIGJ5dGVzIHVwbG9hZGVkIGFuZCB0b3RhbCBzaXplICgtMSBpZiBub3RcbiAgICogY29tcHV0YWJsZSkgb2YgdGhlIHJlcXVlc3QgYm9keSAoaS5lLiB1c2VkIHRvIHJlcG9ydCB1cGxvYWQgcHJvZ3Jlc3MpLlxuICAgKi9cbiAgcHJvZ3Jlc3NDYWxsYmFjazogKChwMTogbnVtYmVyLCBwMjogbnVtYmVyKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuICBzdWNjZXNzQ29kZXM6IG51bWJlcltdID0gWzIwMF07XG4gIGFkZGl0aW9uYWxSZXRyeUNvZGVzOiBudW1iZXJbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyB1cmw6IHN0cmluZyxcbiAgICBwdWJsaWMgbWV0aG9kOiBzdHJpbmcsXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmFsdWUgd2l0aCB3aGljaCB0byByZXNvbHZlIHRoZSByZXF1ZXN0J3MgcHJvbWlzZS4gT25seSBjYWxsZWRcbiAgICAgKiBpZiB0aGUgcmVxdWVzdCBpcyBzdWNjZXNzZnVsLiBUaHJvdyBmcm9tIHRoaXMgZnVuY3Rpb24gdG8gcmVqZWN0IHRoZVxuICAgICAqIHJldHVybmVkIFJlcXVlc3QncyBwcm9taXNlIHdpdGggdGhlIHRocm93biBlcnJvci5cbiAgICAgKiBOb3RlOiBUaGUgWGhySW8gcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gbWF5IGJlIHJldXNlZCBhZnRlciB0aGlzIGNhbGxiYWNrXG4gICAgICogcmV0dXJucy4gRG8gbm90IGtlZXAgYSByZWZlcmVuY2UgdG8gaXQgaW4gYW55IHdheS5cbiAgICAgKi9cbiAgICBwdWJsaWMgaGFuZGxlcjogKHAxOiBYaHJJbywgcDI6IHN0cmluZykgPT4gVCxcbiAgICBwdWJsaWMgdGltZW91dDogbnVtYmVyXG4gICkge31cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgKiBhcyBvYmplY3QgZnJvbSAnLi9vYmplY3QnO1xuaW1wb3J0ICogYXMgUmVxdWVzdEV4cG9ydHMgZnJvbSAnLi9yZXF1ZXN0JztcbmltcG9ydCB7IFJlcXVlc3QgfSBmcm9tICcuL3JlcXVlc3QnO1xuaW1wb3J0ICogYXMgY29uc3RhbnRzIGZyb20gJy4vY29uc3RhbnRzJztcblxuLyoqXG4gKiBAc3RydWN0XG4gKi9cbmV4cG9ydCBjbGFzcyBSZXF1ZXN0TWFwIHtcbiAgcHJpdmF0ZSBtYXBfOiB7IFtrZXk6IG51bWJlcl06IFJlcXVlc3Q8YW55PiB9ID0ge307XG4gIHByaXZhdGUgaWRfOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5pZF8gPSBjb25zdGFudHMubWluU2FmZUludGVnZXI7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIHRoZSBnaXZlbiByZXF1ZXN0IHdpdGggdGhpcyBtYXAuXG4gICAqIFRoZSByZXF1ZXN0IGlzIHVucmVnaXN0ZXJlZCB3aGVuIGl0IGNvbXBsZXRlcy5cbiAgICogQHBhcmFtIHIgVGhlIHJlcXVlc3QgdG8gcmVnaXN0ZXIuXG4gICAqL1xuICBhZGRSZXF1ZXN0KHI6IFJlcXVlc3Q8YW55Pikge1xuICAgIGxldCBpZCA9IHRoaXMuaWRfO1xuICAgIHRoaXMuaWRfKys7XG4gICAgdGhpcy5tYXBfW2lkXSA9IHI7XG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuXG4gICAgZnVuY3Rpb24gdW5tYXAoKSB7XG4gICAgICBkZWxldGUgc2VsZi5tYXBfW2lkXTtcbiAgICB9XG4gICAgci5nZXRQcm9taXNlKCkudGhlbih1bm1hcCwgdW5tYXApO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbmNlbHMgYWxsIHJlZ2lzdGVyZWQgcmVxdWVzdHMuXG4gICAqL1xuICBjbGVhcigpIHtcbiAgICBvYmplY3QuZm9yRWFjaCh0aGlzLm1hcF8sIChrZXk6IHN0cmluZywgdmFsOiBSZXF1ZXN0PGFueT4pID0+IHtcbiAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgdmFsLmNhbmNlbCh0cnVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLm1hcF8gPSB7fTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IERlZmluZXMgbWV0aG9kcyBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgbmV0d29yay5cbiAqL1xuXG5pbXBvcnQgeyBNZXRhZGF0YSB9IGZyb20gJy4uL21ldGFkYXRhJztcblxuaW1wb3J0ICogYXMgYXJyYXkgZnJvbSAnLi9hcnJheSc7XG5pbXBvcnQgeyBBdXRoV3JhcHBlciB9IGZyb20gJy4vYXV0aHdyYXBwZXInO1xuaW1wb3J0IHsgRmJzQmxvYiB9IGZyb20gJy4vYmxvYic7XG5pbXBvcnQgKiBhcyBlcnJvcnNFeHBvcnRzIGZyb20gJy4vZXJyb3InO1xuaW1wb3J0IHsgRmlyZWJhc2VTdG9yYWdlRXJyb3IgfSBmcm9tICcuL2Vycm9yJztcbmltcG9ydCB7IGVycm9ycyB9IGZyb20gJy4vZXJyb3InO1xuaW1wb3J0IHsgTG9jYXRpb24gfSBmcm9tICcuL2xvY2F0aW9uJztcbmltcG9ydCAqIGFzIE1ldGFkYXRhVXRpbHMgZnJvbSAnLi9tZXRhZGF0YSc7XG5pbXBvcnQgKiBhcyBvYmplY3QgZnJvbSAnLi9vYmplY3QnO1xuaW1wb3J0IHsgUmVxdWVzdEluZm8gfSBmcm9tICcuL3JlcXVlc3RpbmZvJztcbmltcG9ydCAqIGFzIHR5cGUgZnJvbSAnLi90eXBlJztcbmltcG9ydCAqIGFzIFVybFV0aWxzIGZyb20gJy4vdXJsJztcbmltcG9ydCB7IFhocklvIH0gZnJvbSAnLi94aHJpbyc7XG5cbi8qKlxuICogVGhyb3dzIHRoZSBVTktOT1dOIEZpcmViYXNlU3RvcmFnZUVycm9yIGlmIGNuZG4gaXMgZmFsc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVyQ2hlY2soY25kbjogYm9vbGVhbikge1xuICBpZiAoIWNuZG4pIHtcbiAgICB0aHJvdyBlcnJvcnNFeHBvcnRzLnVua25vd24oKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWV0YWRhdGFIYW5kbGVyKFxuICBhdXRoV3JhcHBlcjogQXV0aFdyYXBwZXIsXG4gIG1hcHBpbmdzOiBNZXRhZGF0YVV0aWxzLk1hcHBpbmdzXG4pOiAocDE6IFhocklvLCBwMjogc3RyaW5nKSA9PiBNZXRhZGF0YSB7XG4gIGZ1bmN0aW9uIGhhbmRsZXIoeGhyOiBYaHJJbywgdGV4dDogc3RyaW5nKTogTWV0YWRhdGEge1xuICAgIGxldCBtZXRhZGF0YSA9IE1ldGFkYXRhVXRpbHMuZnJvbVJlc291cmNlU3RyaW5nKFxuICAgICAgYXV0aFdyYXBwZXIsXG4gICAgICB0ZXh0LFxuICAgICAgbWFwcGluZ3NcbiAgICApO1xuICAgIGhhbmRsZXJDaGVjayhtZXRhZGF0YSAhPT0gbnVsbCk7XG4gICAgcmV0dXJuIG1ldGFkYXRhIGFzIE1ldGFkYXRhO1xuICB9XG4gIHJldHVybiBoYW5kbGVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hhcmVkRXJyb3JIYW5kbGVyKFxuICBsb2NhdGlvbjogTG9jYXRpb25cbik6IChwMTogWGhySW8sIHAyOiBGaXJlYmFzZVN0b3JhZ2VFcnJvcikgPT4gRmlyZWJhc2VTdG9yYWdlRXJyb3Ige1xuICBmdW5jdGlvbiBlcnJvckhhbmRsZXIoXG4gICAgeGhyOiBYaHJJbyxcbiAgICBlcnI6IEZpcmViYXNlU3RvcmFnZUVycm9yXG4gICk6IEZpcmViYXNlU3RvcmFnZUVycm9yIHtcbiAgICBsZXQgbmV3RXJyO1xuICAgIGlmICh4aHIuZ2V0U3RhdHVzKCkgPT09IDQwMSkge1xuICAgICAgbmV3RXJyID0gZXJyb3JzRXhwb3J0cy51bmF1dGhlbnRpY2F0ZWQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHhoci5nZXRTdGF0dXMoKSA9PT0gNDAyKSB7XG4gICAgICAgIG5ld0VyciA9IGVycm9yc0V4cG9ydHMucXVvdGFFeGNlZWRlZChsb2NhdGlvbi5idWNrZXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHhoci5nZXRTdGF0dXMoKSA9PT0gNDAzKSB7XG4gICAgICAgICAgbmV3RXJyID0gZXJyb3JzRXhwb3J0cy51bmF1dGhvcml6ZWQobG9jYXRpb24ucGF0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3RXJyID0gZXJyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIG5ld0Vyci5zZXRTZXJ2ZXJSZXNwb25zZVByb3AoZXJyLnNlcnZlclJlc3BvbnNlUHJvcCgpKTtcbiAgICByZXR1cm4gbmV3RXJyO1xuICB9XG4gIHJldHVybiBlcnJvckhhbmRsZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvYmplY3RFcnJvckhhbmRsZXIoXG4gIGxvY2F0aW9uOiBMb2NhdGlvblxuKTogKHAxOiBYaHJJbywgcDI6IEZpcmViYXNlU3RvcmFnZUVycm9yKSA9PiBGaXJlYmFzZVN0b3JhZ2VFcnJvciB7XG4gIGxldCBzaGFyZWQgPSBzaGFyZWRFcnJvckhhbmRsZXIobG9jYXRpb24pO1xuXG4gIGZ1bmN0aW9uIGVycm9ySGFuZGxlcihcbiAgICB4aHI6IFhocklvLFxuICAgIGVycjogRmlyZWJhc2VTdG9yYWdlRXJyb3JcbiAgKTogRmlyZWJhc2VTdG9yYWdlRXJyb3Ige1xuICAgIGxldCBuZXdFcnIgPSBzaGFyZWQoeGhyLCBlcnIpO1xuICAgIGlmICh4aHIuZ2V0U3RhdHVzKCkgPT09IDQwNCkge1xuICAgICAgbmV3RXJyID0gZXJyb3JzRXhwb3J0cy5vYmplY3ROb3RGb3VuZChsb2NhdGlvbi5wYXRoKTtcbiAgICB9XG4gICAgbmV3RXJyLnNldFNlcnZlclJlc3BvbnNlUHJvcChlcnIuc2VydmVyUmVzcG9uc2VQcm9wKCkpO1xuICAgIHJldHVybiBuZXdFcnI7XG4gIH1cbiAgcmV0dXJuIGVycm9ySGFuZGxlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1ldGFkYXRhKFxuICBhdXRoV3JhcHBlcjogQXV0aFdyYXBwZXIsXG4gIGxvY2F0aW9uOiBMb2NhdGlvbixcbiAgbWFwcGluZ3M6IE1ldGFkYXRhVXRpbHMuTWFwcGluZ3Ncbik6IFJlcXVlc3RJbmZvPE1ldGFkYXRhPiB7XG4gIGxldCB1cmxQYXJ0ID0gbG9jYXRpb24uZnVsbFNlcnZlclVybCgpO1xuICBsZXQgdXJsID0gVXJsVXRpbHMubWFrZU5vcm1hbFVybCh1cmxQYXJ0KTtcbiAgbGV0IG1ldGhvZCA9ICdHRVQnO1xuICBsZXQgdGltZW91dCA9IGF1dGhXcmFwcGVyLm1heE9wZXJhdGlvblJldHJ5VGltZSgpO1xuICBsZXQgcmVxdWVzdEluZm8gPSBuZXcgUmVxdWVzdEluZm8oXG4gICAgdXJsLFxuICAgIG1ldGhvZCxcbiAgICBtZXRhZGF0YUhhbmRsZXIoYXV0aFdyYXBwZXIsIG1hcHBpbmdzKSxcbiAgICB0aW1lb3V0XG4gICk7XG4gIHJlcXVlc3RJbmZvLmVycm9ySGFuZGxlciA9IG9iamVjdEVycm9ySGFuZGxlcihsb2NhdGlvbik7XG4gIHJldHVybiByZXF1ZXN0SW5mbztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZU1ldGFkYXRhKFxuICBhdXRoV3JhcHBlcjogQXV0aFdyYXBwZXIsXG4gIGxvY2F0aW9uOiBMb2NhdGlvbixcbiAgbWV0YWRhdGE6IE1ldGFkYXRhLFxuICBtYXBwaW5nczogTWV0YWRhdGFVdGlscy5NYXBwaW5nc1xuKTogUmVxdWVzdEluZm88TWV0YWRhdGE+IHtcbiAgbGV0IHVybFBhcnQgPSBsb2NhdGlvbi5mdWxsU2VydmVyVXJsKCk7XG4gIGxldCB1cmwgPSBVcmxVdGlscy5tYWtlTm9ybWFsVXJsKHVybFBhcnQpO1xuICBsZXQgbWV0aG9kID0gJ1BBVENIJztcbiAgbGV0IGJvZHkgPSBNZXRhZGF0YVV0aWxzLnRvUmVzb3VyY2VTdHJpbmcobWV0YWRhdGEsIG1hcHBpbmdzKTtcbiAgbGV0IGhlYWRlcnMgPSB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcgfTtcbiAgbGV0IHRpbWVvdXQgPSBhdXRoV3JhcHBlci5tYXhPcGVyYXRpb25SZXRyeVRpbWUoKTtcbiAgbGV0IHJlcXVlc3RJbmZvID0gbmV3IFJlcXVlc3RJbmZvKFxuICAgIHVybCxcbiAgICBtZXRob2QsXG4gICAgbWV0YWRhdGFIYW5kbGVyKGF1dGhXcmFwcGVyLCBtYXBwaW5ncyksXG4gICAgdGltZW91dFxuICApO1xuICByZXF1ZXN0SW5mby5oZWFkZXJzID0gaGVhZGVycztcbiAgcmVxdWVzdEluZm8uYm9keSA9IGJvZHk7XG4gIHJlcXVlc3RJbmZvLmVycm9ySGFuZGxlciA9IG9iamVjdEVycm9ySGFuZGxlcihsb2NhdGlvbik7XG4gIHJldHVybiByZXF1ZXN0SW5mbztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZU9iamVjdChcbiAgYXV0aFdyYXBwZXI6IEF1dGhXcmFwcGVyLFxuICBsb2NhdGlvbjogTG9jYXRpb25cbik6IFJlcXVlc3RJbmZvPHZvaWQ+IHtcbiAgbGV0IHVybFBhcnQgPSBsb2NhdGlvbi5mdWxsU2VydmVyVXJsKCk7XG4gIGxldCB1cmwgPSBVcmxVdGlscy5tYWtlTm9ybWFsVXJsKHVybFBhcnQpO1xuICBsZXQgbWV0aG9kID0gJ0RFTEVURSc7XG4gIGxldCB0aW1lb3V0ID0gYXV0aFdyYXBwZXIubWF4T3BlcmF0aW9uUmV0cnlUaW1lKCk7XG5cbiAgZnVuY3Rpb24gaGFuZGxlcih4aHI6IFhocklvLCB0ZXh0OiBzdHJpbmcpIHt9XG4gIGxldCByZXF1ZXN0SW5mbyA9IG5ldyBSZXF1ZXN0SW5mbyh1cmwsIG1ldGhvZCwgaGFuZGxlciwgdGltZW91dCk7XG4gIHJlcXVlc3RJbmZvLnN1Y2Nlc3NDb2RlcyA9IFsyMDAsIDIwNF07XG4gIHJlcXVlc3RJbmZvLmVycm9ySGFuZGxlciA9IG9iamVjdEVycm9ySGFuZGxlcihsb2NhdGlvbik7XG4gIHJldHVybiByZXF1ZXN0SW5mbztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVybWluZUNvbnRlbnRUeXBlXyhcbiAgbWV0YWRhdGE6IE1ldGFkYXRhIHwgbnVsbCxcbiAgYmxvYjogRmJzQmxvYiB8IG51bGxcbik6IHN0cmluZyB7XG4gIHJldHVybiAoXG4gICAgKG1ldGFkYXRhICYmIG1ldGFkYXRhWydjb250ZW50VHlwZSddKSB8fFxuICAgIChibG9iICYmIGJsb2IudHlwZSgpKSB8fFxuICAgICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtZXRhZGF0YUZvclVwbG9hZF8oXG4gIGxvY2F0aW9uOiBMb2NhdGlvbixcbiAgYmxvYjogRmJzQmxvYixcbiAgb3B0X21ldGFkYXRhPzogTWV0YWRhdGEgfCBudWxsXG4pOiBNZXRhZGF0YSB7XG4gIGxldCBtZXRhZGF0YSA9IG9iamVjdC5jbG9uZTxNZXRhZGF0YT4ob3B0X21ldGFkYXRhKTtcbiAgbWV0YWRhdGFbJ2Z1bGxQYXRoJ10gPSBsb2NhdGlvbi5wYXRoO1xuICBtZXRhZGF0YVsnc2l6ZSddID0gYmxvYi5zaXplKCk7XG4gIGlmICghbWV0YWRhdGFbJ2NvbnRlbnRUeXBlJ10pIHtcbiAgICBtZXRhZGF0YVsnY29udGVudFR5cGUnXSA9IGRldGVybWluZUNvbnRlbnRUeXBlXyhudWxsLCBibG9iKTtcbiAgfVxuICByZXR1cm4gbWV0YWRhdGE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBhcnRVcGxvYWQoXG4gIGF1dGhXcmFwcGVyOiBBdXRoV3JhcHBlcixcbiAgbG9jYXRpb246IExvY2F0aW9uLFxuICBtYXBwaW5nczogTWV0YWRhdGFVdGlscy5NYXBwaW5ncyxcbiAgYmxvYjogRmJzQmxvYixcbiAgb3B0X21ldGFkYXRhPzogTWV0YWRhdGEgfCBudWxsXG4pOiBSZXF1ZXN0SW5mbzxNZXRhZGF0YT4ge1xuICBsZXQgdXJsUGFydCA9IGxvY2F0aW9uLmJ1Y2tldE9ubHlTZXJ2ZXJVcmwoKTtcbiAgbGV0IGhlYWRlcnM6IHsgW3Byb3A6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgICdYLUdvb2ctVXBsb2FkLVByb3RvY29sJzogJ211bHRpcGFydCdcbiAgfTtcblxuICBmdW5jdGlvbiBnZW5Cb3VuZGFyeSgpIHtcbiAgICBsZXQgc3RyID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyOyBpKyspIHtcbiAgICAgIHN0ciA9XG4gICAgICAgIHN0ciArXG4gICAgICAgIE1hdGgucmFuZG9tKClcbiAgICAgICAgICAudG9TdHJpbmcoKVxuICAgICAgICAgIC5zbGljZSgyKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxuICBsZXQgYm91bmRhcnkgPSBnZW5Cb3VuZGFyeSgpO1xuICBoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdtdWx0aXBhcnQvcmVsYXRlZDsgYm91bmRhcnk9JyArIGJvdW5kYXJ5O1xuICBsZXQgbWV0YWRhdGEgPSBtZXRhZGF0YUZvclVwbG9hZF8obG9jYXRpb24sIGJsb2IsIG9wdF9tZXRhZGF0YSk7XG4gIGxldCBtZXRhZGF0YVN0cmluZyA9IE1ldGFkYXRhVXRpbHMudG9SZXNvdXJjZVN0cmluZyhtZXRhZGF0YSwgbWFwcGluZ3MpO1xuICBsZXQgcHJlQmxvYlBhcnQgPVxuICAgICctLScgK1xuICAgIGJvdW5kYXJ5ICtcbiAgICAnXFxyXFxuJyArXG4gICAgJ0NvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFxcclxcblxcclxcbicgK1xuICAgIG1ldGFkYXRhU3RyaW5nICtcbiAgICAnXFxyXFxuLS0nICtcbiAgICBib3VuZGFyeSArXG4gICAgJ1xcclxcbicgK1xuICAgICdDb250ZW50LVR5cGU6ICcgK1xuICAgIG1ldGFkYXRhWydjb250ZW50VHlwZSddICtcbiAgICAnXFxyXFxuXFxyXFxuJztcbiAgbGV0IHBvc3RCbG9iUGFydCA9ICdcXHJcXG4tLScgKyBib3VuZGFyeSArICctLSc7XG4gIGxldCBib2R5ID0gRmJzQmxvYi5nZXRCbG9iKHByZUJsb2JQYXJ0LCBibG9iLCBwb3N0QmxvYlBhcnQpO1xuICBpZiAoYm9keSA9PT0gbnVsbCkge1xuICAgIHRocm93IGVycm9yc0V4cG9ydHMuY2Fubm90U2xpY2VCbG9iKCk7XG4gIH1cbiAgbGV0IHVybFBhcmFtcyA9IHsgbmFtZTogbWV0YWRhdGFbJ2Z1bGxQYXRoJ10gfTtcbiAgbGV0IHVybCA9IFVybFV0aWxzLm1ha2VVcGxvYWRVcmwodXJsUGFydCk7XG4gIGxldCBtZXRob2QgPSAnUE9TVCc7XG4gIGxldCB0aW1lb3V0ID0gYXV0aFdyYXBwZXIubWF4VXBsb2FkUmV0cnlUaW1lKCk7XG4gIGxldCByZXF1ZXN0SW5mbyA9IG5ldyBSZXF1ZXN0SW5mbyhcbiAgICB1cmwsXG4gICAgbWV0aG9kLFxuICAgIG1ldGFkYXRhSGFuZGxlcihhdXRoV3JhcHBlciwgbWFwcGluZ3MpLFxuICAgIHRpbWVvdXRcbiAgKTtcbiAgcmVxdWVzdEluZm8udXJsUGFyYW1zID0gdXJsUGFyYW1zO1xuICByZXF1ZXN0SW5mby5oZWFkZXJzID0gaGVhZGVycztcbiAgcmVxdWVzdEluZm8uYm9keSA9IGJvZHkudXBsb2FkRGF0YSgpO1xuICByZXF1ZXN0SW5mby5lcnJvckhhbmRsZXIgPSBzaGFyZWRFcnJvckhhbmRsZXIobG9jYXRpb24pO1xuICByZXR1cm4gcmVxdWVzdEluZm87XG59XG5cbi8qKlxuICogQHBhcmFtIGN1cnJlbnQgVGhlIG51bWJlciBvZiBieXRlcyB0aGF0IGhhdmUgYmVlbiB1cGxvYWRlZCBzbyBmYXIuXG4gKiBAcGFyYW0gdG90YWwgVGhlIHRvdGFsIG51bWJlciBvZiBieXRlcyBpbiB0aGUgdXBsb2FkLlxuICogQHBhcmFtIG9wdF9maW5hbGl6ZWQgVHJ1ZSBpZiB0aGUgc2VydmVyIGhhcyBmaW5pc2hlZCB0aGUgdXBsb2FkLlxuICogQHBhcmFtIG9wdF9tZXRhZGF0YSBUaGUgdXBsb2FkIG1ldGFkYXRhLCBzaG91bGRcbiAqICAgICBvbmx5IGJlIHBhc3NlZCBpZiBvcHRfZmluYWxpemVkIGlzIHRydWUuXG4gKiBAc3RydWN0XG4gKi9cbmV4cG9ydCBjbGFzcyBSZXN1bWFibGVVcGxvYWRTdGF0dXMge1xuICBmaW5hbGl6ZWQ6IGJvb2xlYW47XG4gIG1ldGFkYXRhOiBNZXRhZGF0YSB8IG51bGw7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGN1cnJlbnQ6IG51bWJlcixcbiAgICBwdWJsaWMgdG90YWw6IG51bWJlcixcbiAgICBmaW5hbGl6ZWQ/OiBib29sZWFuLFxuICAgIG1ldGFkYXRhPzogTWV0YWRhdGEgfCBudWxsXG4gICkge1xuICAgIHRoaXMuZmluYWxpemVkID0gISFmaW5hbGl6ZWQ7XG4gICAgdGhpcy5tZXRhZGF0YSA9IG1ldGFkYXRhIHx8IG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrUmVzdW1lSGVhZGVyXyh4aHI6IFhocklvLCBvcHRfYWxsb3dlZD86IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgbGV0IHN0YXR1cztcbiAgdHJ5IHtcbiAgICBzdGF0dXMgPSB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ1gtR29vZy1VcGxvYWQtU3RhdHVzJyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBoYW5kbGVyQ2hlY2soZmFsc2UpO1xuICB9XG4gIGxldCBhbGxvd2VkID0gb3B0X2FsbG93ZWQgfHwgWydhY3RpdmUnXTtcbiAgaGFuZGxlckNoZWNrKGFycmF5LmNvbnRhaW5zKGFsbG93ZWQsIHN0YXR1cykpO1xuICByZXR1cm4gc3RhdHVzIGFzIHN0cmluZztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJlc3VtYWJsZVVwbG9hZChcbiAgYXV0aFdyYXBwZXI6IEF1dGhXcmFwcGVyLFxuICBsb2NhdGlvbjogTG9jYXRpb24sXG4gIG1hcHBpbmdzOiBNZXRhZGF0YVV0aWxzLk1hcHBpbmdzLFxuICBibG9iOiBGYnNCbG9iLFxuICBvcHRfbWV0YWRhdGE/OiBNZXRhZGF0YSB8IG51bGxcbik6IFJlcXVlc3RJbmZvPHN0cmluZz4ge1xuICBsZXQgdXJsUGFydCA9IGxvY2F0aW9uLmJ1Y2tldE9ubHlTZXJ2ZXJVcmwoKTtcbiAgbGV0IG1ldGFkYXRhID0gbWV0YWRhdGFGb3JVcGxvYWRfKGxvY2F0aW9uLCBibG9iLCBvcHRfbWV0YWRhdGEpO1xuICBsZXQgdXJsUGFyYW1zID0geyBuYW1lOiBtZXRhZGF0YVsnZnVsbFBhdGgnXSB9O1xuICBsZXQgdXJsID0gVXJsVXRpbHMubWFrZVVwbG9hZFVybCh1cmxQYXJ0KTtcbiAgbGV0IG1ldGhvZCA9ICdQT1NUJztcbiAgbGV0IGhlYWRlcnMgPSB7XG4gICAgJ1gtR29vZy1VcGxvYWQtUHJvdG9jb2wnOiAncmVzdW1hYmxlJyxcbiAgICAnWC1Hb29nLVVwbG9hZC1Db21tYW5kJzogJ3N0YXJ0JyxcbiAgICAnWC1Hb29nLVVwbG9hZC1IZWFkZXItQ29udGVudC1MZW5ndGgnOiBibG9iLnNpemUoKSxcbiAgICAnWC1Hb29nLVVwbG9hZC1IZWFkZXItQ29udGVudC1UeXBlJzogbWV0YWRhdGFbJ2NvbnRlbnRUeXBlJ10sXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04J1xuICB9O1xuICBsZXQgYm9keSA9IE1ldGFkYXRhVXRpbHMudG9SZXNvdXJjZVN0cmluZyhtZXRhZGF0YSwgbWFwcGluZ3MpO1xuICBsZXQgdGltZW91dCA9IGF1dGhXcmFwcGVyLm1heFVwbG9hZFJldHJ5VGltZSgpO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZXIoeGhyOiBYaHJJbywgdGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjaGVja1Jlc3VtZUhlYWRlcl8oeGhyKTtcbiAgICBsZXQgdXJsO1xuICAgIHRyeSB7XG4gICAgICB1cmwgPSB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ1gtR29vZy1VcGxvYWQtVVJMJyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaGFuZGxlckNoZWNrKGZhbHNlKTtcbiAgICB9XG4gICAgaGFuZGxlckNoZWNrKHR5cGUuaXNTdHJpbmcodXJsKSk7XG4gICAgcmV0dXJuIHVybCBhcyBzdHJpbmc7XG4gIH1cbiAgbGV0IHJlcXVlc3RJbmZvID0gbmV3IFJlcXVlc3RJbmZvKHVybCwgbWV0aG9kLCBoYW5kbGVyLCB0aW1lb3V0KTtcbiAgcmVxdWVzdEluZm8udXJsUGFyYW1zID0gdXJsUGFyYW1zO1xuICByZXF1ZXN0SW5mby5oZWFkZXJzID0gaGVhZGVycztcbiAgcmVxdWVzdEluZm8uYm9keSA9IGJvZHk7XG4gIHJlcXVlc3RJbmZvLmVycm9ySGFuZGxlciA9IHNoYXJlZEVycm9ySGFuZGxlcihsb2NhdGlvbik7XG4gIHJldHVybiByZXF1ZXN0SW5mbztcbn1cblxuLyoqXG4gKiBAcGFyYW0gdXJsIEZyb20gYSBjYWxsIHRvIGZicy5yZXF1ZXN0cy5jcmVhdGVSZXN1bWFibGVVcGxvYWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZXN1bWFibGVVcGxvYWRTdGF0dXMoXG4gIGF1dGhXcmFwcGVyOiBBdXRoV3JhcHBlcixcbiAgbG9jYXRpb246IExvY2F0aW9uLFxuICB1cmw6IHN0cmluZyxcbiAgYmxvYjogRmJzQmxvYlxuKTogUmVxdWVzdEluZm88UmVzdW1hYmxlVXBsb2FkU3RhdHVzPiB7XG4gIGxldCBoZWFkZXJzID0geyAnWC1Hb29nLVVwbG9hZC1Db21tYW5kJzogJ3F1ZXJ5JyB9O1xuXG4gIGZ1bmN0aW9uIGhhbmRsZXIoeGhyOiBYaHJJbywgdGV4dDogc3RyaW5nKTogUmVzdW1hYmxlVXBsb2FkU3RhdHVzIHtcbiAgICBsZXQgc3RhdHVzID0gY2hlY2tSZXN1bWVIZWFkZXJfKHhociwgWydhY3RpdmUnLCAnZmluYWwnXSk7XG4gICAgbGV0IHNpemVTdHJpbmc7XG4gICAgdHJ5IHtcbiAgICAgIHNpemVTdHJpbmcgPSB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ1gtR29vZy1VcGxvYWQtU2l6ZS1SZWNlaXZlZCcpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGhhbmRsZXJDaGVjayhmYWxzZSk7XG4gICAgfVxuICAgIGxldCBzaXplID0gcGFyc2VJbnQoc2l6ZVN0cmluZywgMTApO1xuICAgIGhhbmRsZXJDaGVjayghaXNOYU4oc2l6ZSkpO1xuICAgIHJldHVybiBuZXcgUmVzdW1hYmxlVXBsb2FkU3RhdHVzKHNpemUsIGJsb2Iuc2l6ZSgpLCBzdGF0dXMgPT09ICdmaW5hbCcpO1xuICB9XG4gIGxldCBtZXRob2QgPSAnUE9TVCc7XG4gIGxldCB0aW1lb3V0ID0gYXV0aFdyYXBwZXIubWF4VXBsb2FkUmV0cnlUaW1lKCk7XG4gIGxldCByZXF1ZXN0SW5mbyA9IG5ldyBSZXF1ZXN0SW5mbyh1cmwsIG1ldGhvZCwgaGFuZGxlciwgdGltZW91dCk7XG4gIHJlcXVlc3RJbmZvLmhlYWRlcnMgPSBoZWFkZXJzO1xuICByZXF1ZXN0SW5mby5lcnJvckhhbmRsZXIgPSBzaGFyZWRFcnJvckhhbmRsZXIobG9jYXRpb24pO1xuICByZXR1cm4gcmVxdWVzdEluZm87XG59XG5cbi8qKlxuICogQW55IHVwbG9hZHMgdmlhIHRoZSByZXN1bWFibGUgdXBsb2FkIEFQSSBtdXN0IHRyYW5zZmVyIGEgbnVtYmVyIG9mIGJ5dGVzXG4gKiB0aGF0IGlzIGEgbXVsdGlwbGUgb2YgdGhpcyBudW1iZXIuXG4gKi9cbmV4cG9ydCBjb25zdCByZXN1bWFibGVVcGxvYWRDaHVua1NpemU6IG51bWJlciA9IDI1NiAqIDEwMjQ7XG5cbi8qKlxuICogQHBhcmFtIHVybCBGcm9tIGEgY2FsbCB0byBmYnMucmVxdWVzdHMuY3JlYXRlUmVzdW1hYmxlVXBsb2FkLlxuICogQHBhcmFtIGNodW5rU2l6ZSBOdW1iZXIgb2YgYnl0ZXMgdG8gdXBsb2FkLlxuICogQHBhcmFtIG9wdF9zdGF0dXMgVGhlIHByZXZpb3VzIHN0YXR1cy5cbiAqICAgICBJZiBub3QgcGFzc2VkIG9yIG51bGwsIHdlIHN0YXJ0IGZyb20gdGhlIGJlZ2lubmluZy5cbiAqIEB0aHJvd3MgZmJzLkVycm9yIElmIHRoZSB1cGxvYWQgaXMgYWxyZWFkeSBjb21wbGV0ZSwgdGhlIHBhc3NlZCBpbiBzdGF0dXNcbiAqICAgICBoYXMgYSBmaW5hbCBzaXplIGluY29uc2lzdGVudCB3aXRoIHRoZSBibG9iLCBvciB0aGUgYmxvYiBjYW5ub3QgYmUgc2xpY2VkXG4gKiAgICAgZm9yIHVwbG9hZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnRpbnVlUmVzdW1hYmxlVXBsb2FkKFxuICBsb2NhdGlvbjogTG9jYXRpb24sXG4gIGF1dGhXcmFwcGVyOiBBdXRoV3JhcHBlcixcbiAgdXJsOiBzdHJpbmcsXG4gIGJsb2I6IEZic0Jsb2IsXG4gIGNodW5rU2l6ZTogbnVtYmVyLFxuICBtYXBwaW5nczogTWV0YWRhdGFVdGlscy5NYXBwaW5ncyxcbiAgb3B0X3N0YXR1cz86IFJlc3VtYWJsZVVwbG9hZFN0YXR1cyB8IG51bGwsXG4gIG9wdF9wcm9ncmVzc0NhbGxiYWNrPzogKChwMTogbnVtYmVyLCBwMjogbnVtYmVyKSA9PiB2b2lkKSB8IG51bGxcbik6IFJlcXVlc3RJbmZvPFJlc3VtYWJsZVVwbG9hZFN0YXR1cz4ge1xuICAvLyBUT0RPKGFuZHlzb3RvKTogc3RhbmRhcmRpemUgb24gaW50ZXJuYWwgYXNzZXJ0c1xuICAvLyBhc3NlcnQoIShvcHRfc3RhdHVzICYmIG9wdF9zdGF0dXMuZmluYWxpemVkKSk7XG4gIGxldCBzdGF0dXMgPSBuZXcgUmVzdW1hYmxlVXBsb2FkU3RhdHVzKDAsIDApO1xuICBpZiAob3B0X3N0YXR1cykge1xuICAgIHN0YXR1cy5jdXJyZW50ID0gb3B0X3N0YXR1cy5jdXJyZW50O1xuICAgIHN0YXR1cy50b3RhbCA9IG9wdF9zdGF0dXMudG90YWw7XG4gIH0gZWxzZSB7XG4gICAgc3RhdHVzLmN1cnJlbnQgPSAwO1xuICAgIHN0YXR1cy50b3RhbCA9IGJsb2Iuc2l6ZSgpO1xuICB9XG4gIGlmIChibG9iLnNpemUoKSAhPT0gc3RhdHVzLnRvdGFsKSB7XG4gICAgdGhyb3cgZXJyb3JzRXhwb3J0cy5zZXJ2ZXJGaWxlV3JvbmdTaXplKCk7XG4gIH1cbiAgbGV0IGJ5dGVzTGVmdCA9IHN0YXR1cy50b3RhbCAtIHN0YXR1cy5jdXJyZW50O1xuICBsZXQgYnl0ZXNUb1VwbG9hZCA9IGJ5dGVzTGVmdDtcbiAgaWYgKGNodW5rU2l6ZSA+IDApIHtcbiAgICBieXRlc1RvVXBsb2FkID0gTWF0aC5taW4oYnl0ZXNUb1VwbG9hZCwgY2h1bmtTaXplKTtcbiAgfVxuICBsZXQgc3RhcnRCeXRlID0gc3RhdHVzLmN1cnJlbnQ7XG4gIGxldCBlbmRCeXRlID0gc3RhcnRCeXRlICsgYnl0ZXNUb1VwbG9hZDtcbiAgbGV0IHVwbG9hZENvbW1hbmQgPVxuICAgIGJ5dGVzVG9VcGxvYWQgPT09IGJ5dGVzTGVmdCA/ICd1cGxvYWQsIGZpbmFsaXplJyA6ICd1cGxvYWQnO1xuICBsZXQgaGVhZGVycyA9IHtcbiAgICAnWC1Hb29nLVVwbG9hZC1Db21tYW5kJzogdXBsb2FkQ29tbWFuZCxcbiAgICAnWC1Hb29nLVVwbG9hZC1PZmZzZXQnOiBzdGF0dXMuY3VycmVudFxuICB9O1xuICBsZXQgYm9keSA9IGJsb2Iuc2xpY2Uoc3RhcnRCeXRlLCBlbmRCeXRlKTtcbiAgaWYgKGJvZHkgPT09IG51bGwpIHtcbiAgICB0aHJvdyBlcnJvcnNFeHBvcnRzLmNhbm5vdFNsaWNlQmxvYigpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlcih4aHI6IFhocklvLCB0ZXh0OiBzdHJpbmcpOiBSZXN1bWFibGVVcGxvYWRTdGF0dXMge1xuICAgIC8vIFRPRE8oYW5keXNvdG8pOiBWZXJpZnkgdGhlIE1ENSBvZiBlYWNoIHVwbG9hZGVkIHJhbmdlOlxuICAgIC8vIHRoZSAneC1yYW5nZS1tZDUnIGhlYWRlciBjb21lcyBiYWNrIHdpdGggc3RhdHVzIGNvZGUgMzA4IHJlc3BvbnNlcy5cbiAgICAvLyBXZSdsbCBvbmx5IGJlIGFibGUgdG8gYmFpbCBvdXQgdGhvdWdoLCBiZWNhdXNlIHlvdSBjYW4ndCByZS11cGxvYWQgYVxuICAgIC8vIHJhbmdlIHRoYXQgeW91IHByZXZpb3VzbHkgdXBsb2FkZWQuXG4gICAgbGV0IHVwbG9hZFN0YXR1cyA9IGNoZWNrUmVzdW1lSGVhZGVyXyh4aHIsIFsnYWN0aXZlJywgJ2ZpbmFsJ10pO1xuICAgIGxldCBuZXdDdXJyZW50ID0gc3RhdHVzLmN1cnJlbnQgKyBieXRlc1RvVXBsb2FkO1xuICAgIGxldCBzaXplID0gYmxvYi5zaXplKCk7XG4gICAgbGV0IG1ldGFkYXRhO1xuICAgIGlmICh1cGxvYWRTdGF0dXMgPT09ICdmaW5hbCcpIHtcbiAgICAgIG1ldGFkYXRhID0gbWV0YWRhdGFIYW5kbGVyKGF1dGhXcmFwcGVyLCBtYXBwaW5ncykoeGhyLCB0ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWV0YWRhdGEgPSBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFJlc3VtYWJsZVVwbG9hZFN0YXR1cyhcbiAgICAgIG5ld0N1cnJlbnQsXG4gICAgICBzaXplLFxuICAgICAgdXBsb2FkU3RhdHVzID09PSAnZmluYWwnLFxuICAgICAgbWV0YWRhdGFcbiAgICApO1xuICB9XG4gIGxldCBtZXRob2QgPSAnUE9TVCc7XG4gIGxldCB0aW1lb3V0ID0gYXV0aFdyYXBwZXIubWF4VXBsb2FkUmV0cnlUaW1lKCk7XG4gIGxldCByZXF1ZXN0SW5mbyA9IG5ldyBSZXF1ZXN0SW5mbyh1cmwsIG1ldGhvZCwgaGFuZGxlciwgdGltZW91dCk7XG4gIHJlcXVlc3RJbmZvLmhlYWRlcnMgPSBoZWFkZXJzO1xuICByZXF1ZXN0SW5mby5ib2R5ID0gYm9keS51cGxvYWREYXRhKCk7XG4gIHJlcXVlc3RJbmZvLnByb2dyZXNzQ2FsbGJhY2sgPSBvcHRfcHJvZ3Jlc3NDYWxsYmFjayB8fCBudWxsO1xuICByZXF1ZXN0SW5mby5lcnJvckhhbmRsZXIgPSBzaGFyZWRFcnJvckhhbmRsZXIobG9jYXRpb24pO1xuICByZXR1cm4gcmVxdWVzdEluZm87XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0ICogYXMgZXJyb3JzRXhwb3J0cyBmcm9tICcuL2Vycm9yJztcbmltcG9ydCB7IGVycm9ycyB9IGZyb20gJy4vZXJyb3InO1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB0eXBlIFN0cmluZ0Zvcm1hdCA9IHN0cmluZztcbmV4cG9ydCBjb25zdCBTdHJpbmdGb3JtYXQgPSB7XG4gIFJBVzogJ3JhdycsXG4gIEJBU0U2NDogJ2Jhc2U2NCcsXG4gIEJBU0U2NFVSTDogJ2Jhc2U2NHVybCcsXG4gIERBVEFfVVJMOiAnZGF0YV91cmwnXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VmFsaWRhdG9yKHN0cmluZ0Zvcm1hdDogc3RyaW5nKSB7XG4gIHN3aXRjaCAoc3RyaW5nRm9ybWF0KSB7XG4gICAgY2FzZSBTdHJpbmdGb3JtYXQuUkFXOlxuICAgIGNhc2UgU3RyaW5nRm9ybWF0LkJBU0U2NDpcbiAgICBjYXNlIFN0cmluZ0Zvcm1hdC5CQVNFNjRVUkw6XG4gICAgY2FzZSBTdHJpbmdGb3JtYXQuREFUQV9VUkw6XG4gICAgICByZXR1cm47XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93ICdFeHBlY3RlZCBvbmUgb2YgdGhlIGV2ZW50IHR5cGVzOiBbJyArXG4gICAgICAgIFN0cmluZ0Zvcm1hdC5SQVcgK1xuICAgICAgICAnLCAnICtcbiAgICAgICAgU3RyaW5nRm9ybWF0LkJBU0U2NCArXG4gICAgICAgICcsICcgK1xuICAgICAgICBTdHJpbmdGb3JtYXQuQkFTRTY0VVJMICtcbiAgICAgICAgJywgJyArXG4gICAgICAgIFN0cmluZ0Zvcm1hdC5EQVRBX1VSTCArXG4gICAgICAgICddLic7XG4gIH1cbn1cblxuLyoqXG4gKiBAc3RydWN0XG4gKi9cbmV4cG9ydCBjbGFzcyBTdHJpbmdEYXRhIHtcbiAgY29udGVudFR5cGU6IHN0cmluZyB8IG51bGw7XG5cbiAgY29uc3RydWN0b3IocHVibGljIGRhdGE6IFVpbnQ4QXJyYXksIG9wdF9jb250ZW50VHlwZT86IHN0cmluZyB8IG51bGwpIHtcbiAgICB0aGlzLmNvbnRlbnRUeXBlID0gb3B0X2NvbnRlbnRUeXBlIHx8IG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRhdGFGcm9tU3RyaW5nKFxuICBmb3JtYXQ6IFN0cmluZ0Zvcm1hdCxcbiAgc3RyaW5nOiBzdHJpbmdcbik6IFN0cmluZ0RhdGEge1xuICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgIGNhc2UgU3RyaW5nRm9ybWF0LlJBVzpcbiAgICAgIHJldHVybiBuZXcgU3RyaW5nRGF0YSh1dGY4Qnl0ZXNfKHN0cmluZykpO1xuICAgIGNhc2UgU3RyaW5nRm9ybWF0LkJBU0U2NDpcbiAgICBjYXNlIFN0cmluZ0Zvcm1hdC5CQVNFNjRVUkw6XG4gICAgICByZXR1cm4gbmV3IFN0cmluZ0RhdGEoYmFzZTY0Qnl0ZXNfKGZvcm1hdCwgc3RyaW5nKSk7XG4gICAgY2FzZSBTdHJpbmdGb3JtYXQuREFUQV9VUkw6XG4gICAgICByZXR1cm4gbmV3IFN0cmluZ0RhdGEoZGF0YVVSTEJ5dGVzXyhzdHJpbmcpLCBkYXRhVVJMQ29udGVudFR5cGVfKHN0cmluZykpO1xuICB9XG5cbiAgLy8gYXNzZXJ0KGZhbHNlKTtcbiAgdGhyb3cgZXJyb3JzRXhwb3J0cy51bmtub3duKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1dGY4Qnl0ZXNfKHN0cmluZzogc3RyaW5nKTogVWludDhBcnJheSB7XG4gIGxldCBiID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyaW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IGMgPSBzdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgICBpZiAoYyA8PSAxMjcpIHtcbiAgICAgIGIucHVzaChjKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGMgPD0gMjA0Nykge1xuICAgICAgICBiLnB1c2goMTkyIHwgKGMgPj4gNiksIDEyOCB8IChjICYgNjMpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICgoYyAmIDY0NTEyKSA9PSA1NTI5Nikge1xuICAgICAgICAgIC8vIFRoZSBzdGFydCBvZiBhIHN1cnJvZ2F0ZSBwYWlyLlxuICAgICAgICAgIGxldCB2YWxpZCA9XG4gICAgICAgICAgICBpIDwgc3RyaW5nLmxlbmd0aCAtIDEgJiZcbiAgICAgICAgICAgIChzdHJpbmcuY2hhckNvZGVBdChpICsgMSkgJiA2NDUxMikgPT0gNTYzMjA7XG4gICAgICAgICAgaWYgKCF2YWxpZCkge1xuICAgICAgICAgICAgLy8gVGhlIHNlY29uZCBzdXJyb2dhdGUgd2Fzbid0IHRoZXJlLlxuICAgICAgICAgICAgYi5wdXNoKDIzOSwgMTkxLCAxODkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgaGkgPSBjO1xuICAgICAgICAgICAgbGV0IGxvID0gc3RyaW5nLmNoYXJDb2RlQXQoKytpKTtcbiAgICAgICAgICAgIGMgPSA2NTUzNiB8ICgoaGkgJiAxMDIzKSA8PCAxMCkgfCAobG8gJiAxMDIzKTtcbiAgICAgICAgICAgIGIucHVzaChcbiAgICAgICAgICAgICAgMjQwIHwgKGMgPj4gMTgpLFxuICAgICAgICAgICAgICAxMjggfCAoKGMgPj4gMTIpICYgNjMpLFxuICAgICAgICAgICAgICAxMjggfCAoKGMgPj4gNikgJiA2MyksXG4gICAgICAgICAgICAgIDEyOCB8IChjICYgNjMpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoKGMgJiA2NDUxMikgPT0gNTYzMjApIHtcbiAgICAgICAgICAgIC8vIEludmFsaWQgbG93IHN1cnJvZ2F0ZS5cbiAgICAgICAgICAgIGIucHVzaCgyMzksIDE5MSwgMTg5KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYi5wdXNoKDIyNCB8IChjID4+IDEyKSwgMTI4IHwgKChjID4+IDYpICYgNjMpLCAxMjggfCAoYyAmIDYzKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBuZXcgVWludDhBcnJheShiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBlcmNlbnRFbmNvZGVkQnl0ZXNfKHN0cmluZzogc3RyaW5nKTogVWludDhBcnJheSB7XG4gIGxldCBkZWNvZGVkO1xuICB0cnkge1xuICAgIGRlY29kZWQgPSBkZWNvZGVVUklDb21wb25lbnQoc3RyaW5nKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IGVycm9yc0V4cG9ydHMuaW52YWxpZEZvcm1hdChcbiAgICAgIFN0cmluZ0Zvcm1hdC5EQVRBX1VSTCxcbiAgICAgICdNYWxmb3JtZWQgZGF0YSBVUkwuJ1xuICAgICk7XG4gIH1cbiAgcmV0dXJuIHV0ZjhCeXRlc18oZGVjb2RlZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBiYXNlNjRCeXRlc18oZm9ybWF0OiBTdHJpbmdGb3JtYXQsIHN0cmluZzogc3RyaW5nKTogVWludDhBcnJheSB7XG4gIHN3aXRjaCAoZm9ybWF0KSB7XG4gICAgY2FzZSBTdHJpbmdGb3JtYXQuQkFTRTY0OiB7XG4gICAgICBsZXQgaGFzTWludXMgPSBzdHJpbmcuaW5kZXhPZignLScpICE9PSAtMTtcbiAgICAgIGxldCBoYXNVbmRlciA9IHN0cmluZy5pbmRleE9mKCdfJykgIT09IC0xO1xuICAgICAgaWYgKGhhc01pbnVzIHx8IGhhc1VuZGVyKSB7XG4gICAgICAgIGxldCBpbnZhbGlkQ2hhciA9IGhhc01pbnVzID8gJy0nIDogJ18nO1xuICAgICAgICB0aHJvdyBlcnJvcnNFeHBvcnRzLmludmFsaWRGb3JtYXQoXG4gICAgICAgICAgZm9ybWF0LFxuICAgICAgICAgIFwiSW52YWxpZCBjaGFyYWN0ZXIgJ1wiICtcbiAgICAgICAgICAgIGludmFsaWRDaGFyICtcbiAgICAgICAgICAgIFwiJyBmb3VuZDogaXMgaXQgYmFzZTY0dXJsIGVuY29kZWQ/XCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIFN0cmluZ0Zvcm1hdC5CQVNFNjRVUkw6IHtcbiAgICAgIGxldCBoYXNQbHVzID0gc3RyaW5nLmluZGV4T2YoJysnKSAhPT0gLTE7XG4gICAgICBsZXQgaGFzU2xhc2ggPSBzdHJpbmcuaW5kZXhPZignLycpICE9PSAtMTtcbiAgICAgIGlmIChoYXNQbHVzIHx8IGhhc1NsYXNoKSB7XG4gICAgICAgIGxldCBpbnZhbGlkQ2hhciA9IGhhc1BsdXMgPyAnKycgOiAnLyc7XG4gICAgICAgIHRocm93IGVycm9yc0V4cG9ydHMuaW52YWxpZEZvcm1hdChcbiAgICAgICAgICBmb3JtYXQsXG4gICAgICAgICAgXCJJbnZhbGlkIGNoYXJhY3RlciAnXCIgKyBpbnZhbGlkQ2hhciArIFwiJyBmb3VuZDogaXMgaXQgYmFzZTY0IGVuY29kZWQ/XCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKC8tL2csICcrJykucmVwbGFjZSgvXy9nLCAnLycpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGxldCBieXRlcztcbiAgdHJ5IHtcbiAgICBieXRlcyA9IGF0b2Ioc3RyaW5nKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IGVycm9yc0V4cG9ydHMuaW52YWxpZEZvcm1hdChmb3JtYXQsICdJbnZhbGlkIGNoYXJhY3RlciBmb3VuZCcpO1xuICB9XG4gIGxldCBhcnJheSA9IG5ldyBVaW50OEFycmF5KGJ5dGVzLmxlbmd0aCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBhcnJheVtpXSA9IGJ5dGVzLmNoYXJDb2RlQXQoaSk7XG4gIH1cbiAgcmV0dXJuIGFycmF5O1xufVxuXG4vKipcbiAqIEBzdHJ1Y3RcbiAqL1xuY2xhc3MgRGF0YVVSTFBhcnRzIHtcbiAgYmFzZTY0OiBib29sZWFuID0gZmFsc2U7XG4gIGNvbnRlbnRUeXBlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcmVzdDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGFVUkw6IHN0cmluZykge1xuICAgIGxldCBtYXRjaGVzID0gZGF0YVVSTC5tYXRjaCgvXmRhdGE6KFteLF0rKT8sLyk7XG4gICAgaWYgKG1hdGNoZXMgPT09IG51bGwpIHtcbiAgICAgIHRocm93IGVycm9yc0V4cG9ydHMuaW52YWxpZEZvcm1hdChcbiAgICAgICAgU3RyaW5nRm9ybWF0LkRBVEFfVVJMLFxuICAgICAgICBcIk11c3QgYmUgZm9ybWF0dGVkICdkYXRhOls8bWVkaWF0eXBlPl1bO2Jhc2U2NF0sPGRhdGE+XCJcbiAgICAgICk7XG4gICAgfVxuICAgIGxldCBtaWRkbGUgPSBtYXRjaGVzWzFdIHx8IG51bGw7XG4gICAgaWYgKG1pZGRsZSAhPSBudWxsKSB7XG4gICAgICB0aGlzLmJhc2U2NCA9IGVuZHNXaXRoKG1pZGRsZSwgJztiYXNlNjQnKTtcbiAgICAgIHRoaXMuY29udGVudFR5cGUgPSB0aGlzLmJhc2U2NFxuICAgICAgICA/IG1pZGRsZS5zdWJzdHJpbmcoMCwgbWlkZGxlLmxlbmd0aCAtICc7YmFzZTY0Jy5sZW5ndGgpXG4gICAgICAgIDogbWlkZGxlO1xuICAgIH1cbiAgICB0aGlzLnJlc3QgPSBkYXRhVVJMLnN1YnN0cmluZyhkYXRhVVJMLmluZGV4T2YoJywnKSArIDEpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkYXRhVVJMQnl0ZXNfKHN0cmluZzogc3RyaW5nKTogVWludDhBcnJheSB7XG4gIGxldCBwYXJ0cyA9IG5ldyBEYXRhVVJMUGFydHMoc3RyaW5nKTtcbiAgaWYgKHBhcnRzLmJhc2U2NCkge1xuICAgIHJldHVybiBiYXNlNjRCeXRlc18oU3RyaW5nRm9ybWF0LkJBU0U2NCwgcGFydHMucmVzdCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHBlcmNlbnRFbmNvZGVkQnl0ZXNfKHBhcnRzLnJlc3QpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkYXRhVVJMQ29udGVudFR5cGVfKHN0cmluZzogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gIGxldCBwYXJ0cyA9IG5ldyBEYXRhVVJMUGFydHMoc3RyaW5nKTtcbiAgcmV0dXJuIHBhcnRzLmNvbnRlbnRUeXBlO1xufVxuXG5mdW5jdGlvbiBlbmRzV2l0aChzOiBzdHJpbmcsIGVuZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IGxvbmdFbm91Z2ggPSBzLmxlbmd0aCA+PSBlbmQubGVuZ3RoO1xuICBpZiAoIWxvbmdFbm91Z2gpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gcy5zdWJzdHJpbmcocy5sZW5ndGggLSBlbmQubGVuZ3RoKSA9PT0gZW5kO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IEVudW1lcmF0aW9ucyB1c2VkIGZvciB1cGxvYWQgdGFza3MuXG4gKi9cblxuLyoqXG4gKiBFbnVtIGZvciB0YXNrIGV2ZW50cy5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB0eXBlIFRhc2tFdmVudCA9IHN0cmluZztcbmV4cG9ydCBjb25zdCBUYXNrRXZlbnQgPSB7XG4gIC8qKiBUcmlnZ2VyZWQgd2hlbmV2ZXIgdGhlIHRhc2sgY2hhbmdlcyBvciBwcm9ncmVzcyBpcyB1cGRhdGVkLiAqL1xuICBTVEFURV9DSEFOR0VEOiAnc3RhdGVfY2hhbmdlZCdcbn07XG5cbi8qKlxuICogSW50ZXJuYWwgZW51bSBmb3IgdGFzayBzdGF0ZS5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB0eXBlIEludGVybmFsVGFza1N0YXRlID0gc3RyaW5nO1xuZXhwb3J0IGNvbnN0IEludGVybmFsVGFza1N0YXRlID0ge1xuICBSVU5OSU5HOiAncnVubmluZycsXG4gIFBBVVNJTkc6ICdwYXVzaW5nJyxcbiAgUEFVU0VEOiAncGF1c2VkJyxcbiAgU1VDQ0VTUzogJ3N1Y2Nlc3MnLFxuICBDQU5DRUxJTkc6ICdjYW5jZWxpbmcnLFxuICBDQU5DRUxFRDogJ2NhbmNlbGVkJyxcbiAgRVJST1I6ICdlcnJvcidcbn07XG5cbi8qKlxuICogRXh0ZXJuYWwgKEFQSS1zdXJmYWNlZCkgZW51bSBmb3IgdGFzayBzdGF0ZS5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB0eXBlIFRhc2tTdGF0ZSA9IHN0cmluZztcbmV4cG9ydCBjb25zdCBUYXNrU3RhdGUgPSB7XG4gIC8qKiBUaGUgdGFzayBpcyBjdXJyZW50bHkgdHJhbnNmZXJyaW5nIGRhdGEuICovXG4gIFJVTk5JTkc6ICdydW5uaW5nJyxcbiAgLyoqIFRoZSB0YXNrIHdhcyBwYXVzZWQgYnkgdGhlIHVzZXIuICovXG4gIFBBVVNFRDogJ3BhdXNlZCcsXG4gIC8qKiBUaGUgdGFzayBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LiAqL1xuICBTVUNDRVNTOiAnc3VjY2VzcycsXG4gIC8qKiBUaGUgdGFzayB3YXMgY2FuY2VsZWQuICovXG4gIENBTkNFTEVEOiAnY2FuY2VsZWQnLFxuICAvKiogVGhlIHRhc2sgZmFpbGVkIHdpdGggYW4gZXJyb3IuICovXG4gIEVSUk9SOiAnZXJyb3InXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gdGFza1N0YXRlRnJvbUludGVybmFsVGFza1N0YXRlKFxuICBzdGF0ZTogSW50ZXJuYWxUYXNrU3RhdGVcbik6IFRhc2tTdGF0ZSB7XG4gIHN3aXRjaCAoc3RhdGUpIHtcbiAgICBjYXNlIEludGVybmFsVGFza1N0YXRlLlJVTk5JTkc6XG4gICAgY2FzZSBJbnRlcm5hbFRhc2tTdGF0ZS5QQVVTSU5HOlxuICAgIGNhc2UgSW50ZXJuYWxUYXNrU3RhdGUuQ0FOQ0VMSU5HOlxuICAgICAgcmV0dXJuIFRhc2tTdGF0ZS5SVU5OSU5HO1xuICAgIGNhc2UgSW50ZXJuYWxUYXNrU3RhdGUuUEFVU0VEOlxuICAgICAgcmV0dXJuIFRhc2tTdGF0ZS5QQVVTRUQ7XG4gICAgY2FzZSBJbnRlcm5hbFRhc2tTdGF0ZS5TVUNDRVNTOlxuICAgICAgcmV0dXJuIFRhc2tTdGF0ZS5TVUNDRVNTO1xuICAgIGNhc2UgSW50ZXJuYWxUYXNrU3RhdGUuQ0FOQ0VMRUQ6XG4gICAgICByZXR1cm4gVGFza1N0YXRlLkNBTkNFTEVEO1xuICAgIGNhc2UgSW50ZXJuYWxUYXNrU3RhdGUuRVJST1I6XG4gICAgICByZXR1cm4gVGFza1N0YXRlLkVSUk9SO1xuICAgIGRlZmF1bHQ6XG4gICAgICAvLyBUT0RPKGFuZHlzb3RvKTogYXNzZXJ0KGZhbHNlKTtcbiAgICAgIHJldHVybiBUYXNrU3RhdGUuRVJST1I7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQHJldHVybiBGYWxzZSBpZiB0aGUgb2JqZWN0IGlzIHVuZGVmaW5lZCBvciBudWxsLCB0cnVlIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRGVmKHA6IGFueSk6IGJvb2xlYW4ge1xuICByZXR1cm4gcCAhPSBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNKdXN0RGVmKHA6IGFueSk6IGJvb2xlYW4ge1xuICByZXR1cm4gcCAhPT0gdm9pZCAwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGdW5jdGlvbihwOiBhbnkpOiBib29sZWFuIHtcbiAgcmV0dXJuIHR5cGVvZiBwID09PSAnZnVuY3Rpb24nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QocDogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiB0eXBlb2YgcCA9PT0gJ29iamVjdCc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc05vbk51bGxPYmplY3QocDogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiBpc09iamVjdChwKSAmJiBwICE9PSBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOb25BcnJheU9iamVjdChwOiBhbnkpOiBib29sZWFuIHtcbiAgcmV0dXJuIGlzT2JqZWN0KHApICYmICFBcnJheS5pc0FycmF5KHApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcocDogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiB0eXBlb2YgcCA9PT0gJ3N0cmluZycgfHwgcCBpbnN0YW5jZW9mIFN0cmluZztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyKHA6IGFueSk6IGJvb2xlYW4ge1xuICByZXR1cm4gdHlwZW9mIHAgPT09ICdudW1iZXInIHx8IHAgaW5zdGFuY2VvZiBOdW1iZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc05hdGl2ZUJsb2IocDogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiBpc05hdGl2ZUJsb2JEZWZpbmVkKCkgJiYgcCBpbnN0YW5jZW9mIEJsb2I7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc05hdGl2ZUJsb2JEZWZpbmVkKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gdHlwZW9mIEJsb2IgIT09ICd1bmRlZmluZWQnO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IEZ1bmN0aW9ucyB0byBjcmVhdGUgYW5kIG1hbmlwdWxhdGUgVVJMcyBmb3IgdGhlIHNlcnZlciBBUEkuXG4gKi9cbmltcG9ydCAqIGFzIGNvbnN0YW50cyBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgKiBhcyBvYmplY3QgZnJvbSAnLi9vYmplY3QnO1xuXG5leHBvcnQgZnVuY3Rpb24gbWFrZU5vcm1hbFVybCh1cmxQYXJ0OiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gY29uc3RhbnRzLmRvbWFpbkJhc2UgKyBjb25zdGFudHMuYXBpQmFzZVVybCArIHVybFBhcnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlRG93bmxvYWRVcmwodXJsUGFydDogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGNvbnN0YW50cy5kb3dubG9hZEJhc2UgKyBjb25zdGFudHMuYXBpQmFzZVVybCArIHVybFBhcnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlVXBsb2FkVXJsKHVybFBhcnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBjb25zdGFudHMuZG9tYWluQmFzZSArIGNvbnN0YW50cy5hcGlVcGxvYWRCYXNlVXJsICsgdXJsUGFydDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VRdWVyeVN0cmluZyhwYXJhbXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pOiBzdHJpbmcge1xuICBsZXQgZW5jb2RlID0gZW5jb2RlVVJJQ29tcG9uZW50O1xuICBsZXQgcXVlcnlQYXJ0ID0gJz8nO1xuICBvYmplY3QuZm9yRWFjaChwYXJhbXMsIGZ1bmN0aW9uKGtleSwgdmFsKSB7XG4gICAgbGV0IG5leHRQYXJ0ID0gZW5jb2RlKGtleSkgKyAnPScgKyBlbmNvZGUodmFsKTtcbiAgICBxdWVyeVBhcnQgPSBxdWVyeVBhcnQgKyBuZXh0UGFydCArICcmJztcbiAgfSk7XG5cbiAgLy8gQ2hvcCBvZmYgdGhlIGV4dHJhICcmJyBvciAnPycgb24gdGhlIGVuZFxuICBxdWVyeVBhcnQgPSBxdWVyeVBhcnQuc2xpY2UoMCwgLTEpO1xuICByZXR1cm4gcXVlcnlQYXJ0O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IEEgbGlnaHR3ZWlnaHQgd3JhcHBlciBhcm91bmQgWE1MSHR0cFJlcXVlc3Qgd2l0aCBhXG4gKiBnb29nLm5ldC5YaHJJby1saWtlIGludGVyZmFjZS5cbiAqL1xuXG5leHBvcnQgdHlwZSBIZWFkZXJzID0geyBbbmFtZTogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyIH07XG5cbmV4cG9ydCBpbnRlcmZhY2UgWGhySW8ge1xuICBzZW5kKFxuICAgIHVybDogc3RyaW5nLFxuICAgIG1ldGhvZDogc3RyaW5nLFxuICAgIG9wdF9ib2R5PzogQXJyYXlCdWZmZXJWaWV3IHwgQmxvYiB8IHN0cmluZyB8IG51bGwsXG4gICAgb3B0X2hlYWRlcnM/OiBIZWFkZXJzXG4gICk6IFByb21pc2U8WGhySW8+O1xuXG4gIGdldEVycm9yQ29kZSgpOiBFcnJvckNvZGU7XG5cbiAgZ2V0U3RhdHVzKCk6IG51bWJlcjtcblxuICBnZXRSZXNwb25zZVRleHQoKTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBYm9ydCB0aGUgcmVxdWVzdC5cbiAgICovXG4gIGFib3J0KCk6IHZvaWQ7XG5cbiAgZ2V0UmVzcG9uc2VIZWFkZXIoaGVhZGVyOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsO1xuXG4gIGFkZFVwbG9hZFByb2dyZXNzTGlzdGVuZXIobGlzdGVuZXI6IChwMTogRXZlbnQpID0+IHZvaWQpOiB2b2lkO1xuXG4gIHJlbW92ZVVwbG9hZFByb2dyZXNzTGlzdGVuZXIobGlzdGVuZXI6IChwMTogRXZlbnQpID0+IHZvaWQpOiB2b2lkO1xufVxuXG4vKipcbiAqIEBlbnVte251bWJlcn1cbiAqL1xuZXhwb3J0IGVudW0gRXJyb3JDb2RlIHtcbiAgTk9fRVJST1IgPSAwLFxuICBORVRXT1JLX0VSUk9SID0gMSxcbiAgQUJPUlQgPSAyXG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0ICogYXMgZXJyb3JzRXhwb3J0cyBmcm9tICcuL2Vycm9yJztcbmltcG9ydCAqIGFzIG9iamVjdCBmcm9tICcuL29iamVjdCc7XG5pbXBvcnQgKiBhcyBwcm9taXNlaW1wbCBmcm9tICcuL3Byb21pc2VfZXh0ZXJuYWwnO1xuaW1wb3J0ICogYXMgdHlwZSBmcm9tICcuL3R5cGUnO1xuaW1wb3J0ICogYXMgWGhySW9FeHBvcnRzIGZyb20gJy4veGhyaW8nO1xuaW1wb3J0IHsgSGVhZGVycywgWGhySW8gfSBmcm9tICcuL3hocmlvJztcblxuLyoqXG4gKiBXZSB1c2UgdGhpcyBpbnN0ZWFkIG9mIGdvb2cubmV0LlhocklvIGJlY2F1c2UgZ29vZy5uZXQuWGhySW8gaXMgaHl1dXV1Z2UgYW5kXG4gKiBkb2Vzbid0IHdvcmsgaW4gUmVhY3QgTmF0aXZlIG9uIEFuZHJvaWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBOZXR3b3JrWGhySW8gaW1wbGVtZW50cyBYaHJJbyB7XG4gIHByaXZhdGUgeGhyXzogWE1MSHR0cFJlcXVlc3Q7XG4gIHByaXZhdGUgZXJyb3JDb2RlXzogWGhySW9FeHBvcnRzLkVycm9yQ29kZTtcbiAgcHJpdmF0ZSBzZW5kUHJvbWlzZV86IFByb21pc2U8WGhySW8+O1xuICBwcml2YXRlIHNlbnRfOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy54aHJfID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgdGhpcy5lcnJvckNvZGVfID0gWGhySW9FeHBvcnRzLkVycm9yQ29kZS5OT19FUlJPUjtcbiAgICB0aGlzLnNlbmRQcm9taXNlXyA9IHByb21pc2VpbXBsLm1ha2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy54aHJfLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZXZlbnQgPT4ge1xuICAgICAgICB0aGlzLmVycm9yQ29kZV8gPSBYaHJJb0V4cG9ydHMuRXJyb3JDb2RlLkFCT1JUO1xuICAgICAgICByZXNvbHZlKHRoaXMpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnhocl8uYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBldmVudCA9PiB7XG4gICAgICAgIHRoaXMuZXJyb3JDb2RlXyA9IFhocklvRXhwb3J0cy5FcnJvckNvZGUuTkVUV09SS19FUlJPUjtcbiAgICAgICAgcmVzb2x2ZSh0aGlzKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy54aHJfLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBldmVudCA9PiB7XG4gICAgICAgIHJlc29sdmUodGhpcyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHNlbmQoXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgbWV0aG9kOiBzdHJpbmcsXG4gICAgb3B0X2JvZHk/OiBBcnJheUJ1ZmZlclZpZXcgfCBCbG9iIHwgc3RyaW5nIHwgbnVsbCxcbiAgICBvcHRfaGVhZGVycz86IEhlYWRlcnNcbiAgKTogUHJvbWlzZTxYaHJJbz4ge1xuICAgIGlmICh0aGlzLnNlbnRfKSB7XG4gICAgICB0aHJvdyBlcnJvcnNFeHBvcnRzLmludGVybmFsRXJyb3IoJ2Nhbm5vdCAuc2VuZCgpIG1vcmUgdGhhbiBvbmNlJyk7XG4gICAgfVxuICAgIHRoaXMuc2VudF8gPSB0cnVlO1xuICAgIHRoaXMueGhyXy5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgICBpZiAodHlwZS5pc0RlZihvcHRfaGVhZGVycykpIHtcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSBvcHRfaGVhZGVycyBhcyBIZWFkZXJzO1xuICAgICAgb2JqZWN0LmZvckVhY2goaGVhZGVycywgKGtleSwgdmFsKSA9PiB7XG4gICAgICAgIHRoaXMueGhyXy5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgdmFsLnRvU3RyaW5nKCkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0eXBlLmlzRGVmKG9wdF9ib2R5KSkge1xuICAgICAgdGhpcy54aHJfLnNlbmQob3B0X2JvZHkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnhocl8uc2VuZCgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZW5kUHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBnZXRFcnJvckNvZGUoKTogWGhySW9FeHBvcnRzLkVycm9yQ29kZSB7XG4gICAgaWYgKCF0aGlzLnNlbnRfKSB7XG4gICAgICB0aHJvdyBlcnJvcnNFeHBvcnRzLmludGVybmFsRXJyb3IoXG4gICAgICAgICdjYW5ub3QgLmdldEVycm9yQ29kZSgpIGJlZm9yZSBzZW5kaW5nJ1xuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZXJyb3JDb2RlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGdldFN0YXR1cygpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy5zZW50Xykge1xuICAgICAgdGhyb3cgZXJyb3JzRXhwb3J0cy5pbnRlcm5hbEVycm9yKCdjYW5ub3QgLmdldFN0YXR1cygpIGJlZm9yZSBzZW5kaW5nJyk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gdGhpcy54aHJfLnN0YXR1cztcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgZ2V0UmVzcG9uc2VUZXh0KCk6IHN0cmluZyB7XG4gICAgaWYgKCF0aGlzLnNlbnRfKSB7XG4gICAgICB0aHJvdyBlcnJvcnNFeHBvcnRzLmludGVybmFsRXJyb3IoXG4gICAgICAgICdjYW5ub3QgLmdldFJlc3BvbnNlVGV4dCgpIGJlZm9yZSBzZW5kaW5nJ1xuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMueGhyXy5yZXNwb25zZVRleHQ7XG4gIH1cblxuICAvKipcbiAgICogQWJvcnRzIHRoZSByZXF1ZXN0LlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGFib3J0KCkge1xuICAgIHRoaXMueGhyXy5hYm9ydCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgZ2V0UmVzcG9uc2VIZWFkZXIoaGVhZGVyOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy54aHJfLmdldFJlc3BvbnNlSGVhZGVyKGhlYWRlcik7XG4gIH1cblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBhZGRVcGxvYWRQcm9ncmVzc0xpc3RlbmVyKGxpc3RlbmVyOiAocDE6IEV2ZW50KSA9PiB2b2lkKSB7XG4gICAgaWYgKHR5cGUuaXNEZWYodGhpcy54aHJfLnVwbG9hZCkpIHtcbiAgICAgIHRoaXMueGhyXy51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBsaXN0ZW5lcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgcmVtb3ZlVXBsb2FkUHJvZ3Jlc3NMaXN0ZW5lcihsaXN0ZW5lcjogKHAxOiBFdmVudCkgPT4gdm9pZCkge1xuICAgIGlmICh0eXBlLmlzRGVmKHRoaXMueGhyXy51cGxvYWQpKSB7XG4gICAgICB0aGlzLnhocl8udXBsb2FkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgbGlzdGVuZXIpO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IFJlcGxhY2VtZW50IGZvciBnb29nLm5ldC5YaHJJb1Bvb2wgdGhhdCB3b3JrcyB3aXRoIGZicy5YaHJJby5cbiAqL1xuaW1wb3J0IHsgWGhySW8gfSBmcm9tICcuL3hocmlvJztcbmltcG9ydCB7IE5ldHdvcmtYaHJJbyB9IGZyb20gJy4veGhyaW9fbmV0d29yayc7XG5cbi8qKlxuICogRmFjdG9yeS1saWtlIGNsYXNzIGZvciBjcmVhdGluZyBYaHJJbyBpbnN0YW5jZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBYaHJJb1Bvb2wge1xuICBjcmVhdGVYaHJJbygpOiBYaHJJbyB7XG4gICAgcmV0dXJuIG5ldyBOZXR3b3JrWGhySW8oKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IERlZmluZXMgdGhlIEZpcmViYXNlIFN0b3JhZ2UgUmVmZXJlbmNlIGNsYXNzLlxuICovXG5pbXBvcnQgKiBhcyBhcmdzIGZyb20gJy4vaW1wbGVtZW50YXRpb24vYXJncyc7XG5pbXBvcnQgeyBBdXRoV3JhcHBlciB9IGZyb20gJy4vaW1wbGVtZW50YXRpb24vYXV0aHdyYXBwZXInO1xuaW1wb3J0IHsgRmJzQmxvYiB9IGZyb20gJy4vaW1wbGVtZW50YXRpb24vYmxvYic7XG5pbXBvcnQgKiBhcyBlcnJvcnNFeHBvcnRzIGZyb20gJy4vaW1wbGVtZW50YXRpb24vZXJyb3InO1xuaW1wb3J0IHsgZXJyb3JzIH0gZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi9lcnJvcic7XG5pbXBvcnQgeyBMb2NhdGlvbiB9IGZyb20gJy4vaW1wbGVtZW50YXRpb24vbG9jYXRpb24nO1xuaW1wb3J0ICogYXMgbWV0YWRhdGEgZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi9tZXRhZGF0YSc7XG5pbXBvcnQgKiBhcyBvYmplY3QgZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi9vYmplY3QnO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICcuL2ltcGxlbWVudGF0aW9uL3BhdGgnO1xuaW1wb3J0ICogYXMgcmVxdWVzdHMgZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi9yZXF1ZXN0cyc7XG5pbXBvcnQgKiBhcyBmYnNTdHJpbmcgZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi9zdHJpbmcnO1xuaW1wb3J0IHsgU3RyaW5nRm9ybWF0IH0gZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi9zdHJpbmcnO1xuaW1wb3J0ICogYXMgdHlwZSBmcm9tICcuL2ltcGxlbWVudGF0aW9uL3R5cGUnO1xuaW1wb3J0IHsgTWV0YWRhdGEgfSBmcm9tICcuL21ldGFkYXRhJztcbmltcG9ydCB7IFNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2UnO1xuaW1wb3J0IHsgVXBsb2FkVGFzayB9IGZyb20gJy4vdGFzayc7XG5cbi8qKlxuICogUHJvdmlkZXMgbWV0aG9kcyB0byBpbnRlcmFjdCB3aXRoIGEgYnVja2V0IGluIHRoZSBGaXJlYmFzZSBTdG9yYWdlIHNlcnZpY2UuXG4gKiBAcGFyYW0gbG9jYXRpb24gQW4gZmJzLmxvY2F0aW9uLCBvciB0aGUgVVJMIGF0XG4gKiAgICAgd2hpY2ggdG8gYmFzZSB0aGlzIG9iamVjdCwgaW4gb25lIG9mIHRoZSBmb2xsb3dpbmcgZm9ybXM6XG4gKiAgICAgICAgIGdzOi8vPGJ1Y2tldD4vPG9iamVjdC1wYXRoPlxuICogICAgICAgICBodHRwW3NdOi8vZmlyZWJhc2VzdG9yYWdlLmdvb2dsZWFwaXMuY29tL1xuICogICAgICAgICAgICAgICAgICAgICA8YXBpLXZlcnNpb24+L2IvPGJ1Y2tldD4vby88b2JqZWN0LXBhdGg+XG4gKiAgICAgQW55IHF1ZXJ5IG9yIGZyYWdtZW50IHN0cmluZ3Mgd2lsbCBiZSBpZ25vcmVkIGluIHRoZSBodHRwW3NdXG4gKiAgICAgZm9ybWF0LiBJZiBubyB2YWx1ZSBpcyBwYXNzZWQsIHRoZSBzdG9yYWdlIG9iamVjdCB3aWxsIHVzZSBhIFVSTCBiYXNlZCBvblxuICogICAgIHRoZSBwcm9qZWN0IElEIG9mIHRoZSBiYXNlIGZpcmViYXNlLkFwcCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFJlZmVyZW5jZSB7XG4gIHByb3RlY3RlZCBsb2NhdGlvbjogTG9jYXRpb247XG5cbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIGF1dGhXcmFwcGVyOiBBdXRoV3JhcHBlciwgbG9jYXRpb246IHN0cmluZyB8IExvY2F0aW9uKSB7XG4gICAgaWYgKGxvY2F0aW9uIGluc3RhbmNlb2YgTG9jYXRpb24pIHtcbiAgICAgIHRoaXMubG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sb2NhdGlvbiA9IExvY2F0aW9uLm1ha2VGcm9tVXJsKGxvY2F0aW9uKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiBUaGUgVVJMIGZvciB0aGUgYnVja2V0IGFuZCBwYXRoIHRoaXMgb2JqZWN0IHJlZmVyZW5jZXMsXG4gICAqICAgICBpbiB0aGUgZm9ybSBnczovLzxidWNrZXQ+LzxvYmplY3QtcGF0aD5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIGFyZ3MudmFsaWRhdGUoJ3RvU3RyaW5nJywgW10sIGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuICdnczovLycgKyB0aGlzLmxvY2F0aW9uLmJ1Y2tldCArICcvJyArIHRoaXMubG9jYXRpb24ucGF0aDtcbiAgfVxuXG4gIHByb3RlY3RlZCBuZXdSZWYoYXV0aFdyYXBwZXI6IEF1dGhXcmFwcGVyLCBsb2NhdGlvbjogTG9jYXRpb24pOiBSZWZlcmVuY2Uge1xuICAgIHJldHVybiBuZXcgUmVmZXJlbmNlKGF1dGhXcmFwcGVyLCBsb2NhdGlvbik7XG4gIH1cblxuICBwcm90ZWN0ZWQgbWFwcGluZ3MoKTogbWV0YWRhdGEuTWFwcGluZ3Mge1xuICAgIHJldHVybiBtZXRhZGF0YS5nZXRNYXBwaW5ncygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gQSByZWZlcmVuY2UgdG8gdGhlIG9iamVjdCBvYnRhaW5lZCBieVxuICAgKiAgICAgYXBwZW5kaW5nIGNoaWxkUGF0aCwgcmVtb3ZpbmcgYW55IGR1cGxpY2F0ZSwgYmVnaW5uaW5nLCBvciB0cmFpbGluZ1xuICAgKiAgICAgc2xhc2hlcy5cbiAgICovXG4gIGNoaWxkKGNoaWxkUGF0aDogc3RyaW5nKTogUmVmZXJlbmNlIHtcbiAgICBhcmdzLnZhbGlkYXRlKCdjaGlsZCcsIFthcmdzLnN0cmluZ1NwZWMoKV0sIGFyZ3VtZW50cyk7XG4gICAgbGV0IG5ld1BhdGggPSBwYXRoLmNoaWxkKHRoaXMubG9jYXRpb24ucGF0aCwgY2hpbGRQYXRoKTtcbiAgICBsZXQgbG9jYXRpb24gPSBuZXcgTG9jYXRpb24odGhpcy5sb2NhdGlvbi5idWNrZXQsIG5ld1BhdGgpO1xuICAgIHJldHVybiB0aGlzLm5ld1JlZih0aGlzLmF1dGhXcmFwcGVyLCBsb2NhdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiBBIHJlZmVyZW5jZSB0byB0aGUgcGFyZW50IG9mIHRoZVxuICAgKiAgICAgY3VycmVudCBvYmplY3QsIG9yIG51bGwgaWYgdGhlIGN1cnJlbnQgb2JqZWN0IGlzIHRoZSByb290LlxuICAgKi9cbiAgZ2V0IHBhcmVudCgpOiBSZWZlcmVuY2UgfCBudWxsIHtcbiAgICBsZXQgbmV3UGF0aCA9IHBhdGgucGFyZW50KHRoaXMubG9jYXRpb24ucGF0aCk7XG4gICAgaWYgKG5ld1BhdGggPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBsZXQgbG9jYXRpb24gPSBuZXcgTG9jYXRpb24odGhpcy5sb2NhdGlvbi5idWNrZXQsIG5ld1BhdGgpO1xuICAgIHJldHVybiB0aGlzLm5ld1JlZih0aGlzLmF1dGhXcmFwcGVyLCBsb2NhdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiBBbiByZWZlcmVuY2UgdG8gdGhlIHJvb3Qgb2YgdGhpc1xuICAgKiAgICAgb2JqZWN0J3MgYnVja2V0LlxuICAgKi9cbiAgZ2V0IHJvb3QoKTogUmVmZXJlbmNlIHtcbiAgICBsZXQgbG9jYXRpb24gPSBuZXcgTG9jYXRpb24odGhpcy5sb2NhdGlvbi5idWNrZXQsICcnKTtcbiAgICByZXR1cm4gdGhpcy5uZXdSZWYodGhpcy5hdXRoV3JhcHBlciwgbG9jYXRpb24pO1xuICB9XG5cbiAgZ2V0IGJ1Y2tldCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmxvY2F0aW9uLmJ1Y2tldDtcbiAgfVxuXG4gIGdldCBmdWxsUGF0aCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmxvY2F0aW9uLnBhdGg7XG4gIH1cblxuICBnZXQgbmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBwYXRoLmxhc3RDb21wb25lbnQodGhpcy5sb2NhdGlvbi5wYXRoKTtcbiAgfVxuXG4gIGdldCBzdG9yYWdlKCk6IFNlcnZpY2Uge1xuICAgIHJldHVybiB0aGlzLmF1dGhXcmFwcGVyLnNlcnZpY2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGxvYWRzIGEgYmxvYiB0byB0aGlzIG9iamVjdCdzIGxvY2F0aW9uLlxuICAgKiBAcGFyYW0gZGF0YSBUaGUgYmxvYiB0byB1cGxvYWQuXG4gICAqIEByZXR1cm4gQW4gVXBsb2FkVGFzayB0aGF0IGxldHMgeW91IGNvbnRyb2wgYW5kXG4gICAqICAgICBvYnNlcnZlIHRoZSB1cGxvYWQuXG4gICAqL1xuICBwdXQoXG4gICAgZGF0YTogQmxvYiB8IFVpbnQ4QXJyYXkgfCBBcnJheUJ1ZmZlcixcbiAgICBtZXRhZGF0YTogTWV0YWRhdGEgfCBudWxsID0gbnVsbFxuICApOiBVcGxvYWRUYXNrIHtcbiAgICBhcmdzLnZhbGlkYXRlKFxuICAgICAgJ3B1dCcsXG4gICAgICBbYXJncy51cGxvYWREYXRhU3BlYygpLCBhcmdzLm1ldGFkYXRhU3BlYyh0cnVlKV0sXG4gICAgICBhcmd1bWVudHNcbiAgICApO1xuICAgIHRoaXMudGhyb3dJZlJvb3RfKCdwdXQnKTtcbiAgICByZXR1cm4gbmV3IFVwbG9hZFRhc2soXG4gICAgICB0aGlzLFxuICAgICAgdGhpcy5hdXRoV3JhcHBlcixcbiAgICAgIHRoaXMubG9jYXRpb24sXG4gICAgICB0aGlzLm1hcHBpbmdzKCksXG4gICAgICBuZXcgRmJzQmxvYihkYXRhKSxcbiAgICAgIG1ldGFkYXRhXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGxvYWRzIGEgc3RyaW5nIHRvIHRoaXMgb2JqZWN0J3MgbG9jYXRpb24uXG4gICAqIEBwYXJhbSBzdHJpbmcgVGhlIHN0cmluZyB0byB1cGxvYWQuXG4gICAqIEBwYXJhbSBvcHRfZm9ybWF0IFRoZSBmb3JtYXQgb2YgdGhlIHN0cmluZyB0byB1cGxvYWQuXG4gICAqIEByZXR1cm4gQW4gVXBsb2FkVGFzayB0aGF0IGxldHMgeW91IGNvbnRyb2wgYW5kXG4gICAqICAgICBvYnNlcnZlIHRoZSB1cGxvYWQuXG4gICAqL1xuICBwdXRTdHJpbmcoXG4gICAgc3RyaW5nOiBzdHJpbmcsXG4gICAgZm9ybWF0OiBTdHJpbmdGb3JtYXQgPSBTdHJpbmdGb3JtYXQuUkFXLFxuICAgIG9wdF9tZXRhZGF0YT86IE1ldGFkYXRhXG4gICk6IFVwbG9hZFRhc2sge1xuICAgIGFyZ3MudmFsaWRhdGUoXG4gICAgICAncHV0U3RyaW5nJyxcbiAgICAgIFtcbiAgICAgICAgYXJncy5zdHJpbmdTcGVjKCksXG4gICAgICAgIGFyZ3Muc3RyaW5nU3BlYyhmYnNTdHJpbmcuZm9ybWF0VmFsaWRhdG9yLCB0cnVlKSxcbiAgICAgICAgYXJncy5tZXRhZGF0YVNwZWModHJ1ZSlcbiAgICAgIF0sXG4gICAgICBhcmd1bWVudHNcbiAgICApO1xuICAgIHRoaXMudGhyb3dJZlJvb3RfKCdwdXRTdHJpbmcnKTtcbiAgICBsZXQgZGF0YSA9IGZic1N0cmluZy5kYXRhRnJvbVN0cmluZyhmb3JtYXQsIHN0cmluZyk7XG4gICAgbGV0IG1ldGFkYXRhID0gb2JqZWN0LmNsb25lPE1ldGFkYXRhPihvcHRfbWV0YWRhdGEpO1xuICAgIGlmICghdHlwZS5pc0RlZihtZXRhZGF0YVsnY29udGVudFR5cGUnXSkgJiYgdHlwZS5pc0RlZihkYXRhLmNvbnRlbnRUeXBlKSkge1xuICAgICAgbWV0YWRhdGFbJ2NvbnRlbnRUeXBlJ10gPSBkYXRhLmNvbnRlbnRUeXBlO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFVwbG9hZFRhc2soXG4gICAgICB0aGlzLFxuICAgICAgdGhpcy5hdXRoV3JhcHBlcixcbiAgICAgIHRoaXMubG9jYXRpb24sXG4gICAgICB0aGlzLm1hcHBpbmdzKCksXG4gICAgICBuZXcgRmJzQmxvYihkYXRhLmRhdGEsIHRydWUpLFxuICAgICAgbWV0YWRhdGFcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgdGhlIG9iamVjdCBhdCB0aGlzIGxvY2F0aW9uLlxuICAgKiBAcmV0dXJuIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGlmIHRoZSBkZWxldGlvbiBzdWNjZWVkcy5cbiAgICovXG4gIGRlbGV0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhcmdzLnZhbGlkYXRlKCdkZWxldGUnLCBbXSwgYXJndW1lbnRzKTtcbiAgICB0aGlzLnRocm93SWZSb290XygnZGVsZXRlJyk7XG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiB0aGlzLmF1dGhXcmFwcGVyLmdldEF1dGhUb2tlbigpLnRoZW4oZnVuY3Rpb24oYXV0aFRva2VuKSB7XG4gICAgICBsZXQgcmVxdWVzdEluZm8gPSByZXF1ZXN0cy5kZWxldGVPYmplY3Qoc2VsZi5hdXRoV3JhcHBlciwgc2VsZi5sb2NhdGlvbik7XG4gICAgICByZXR1cm4gc2VsZi5hdXRoV3JhcHBlci5tYWtlUmVxdWVzdChyZXF1ZXN0SW5mbywgYXV0aFRva2VuKS5nZXRQcm9taXNlKCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogICAgIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIG1ldGFkYXRhIGZvciB0aGlzIG9iamVjdC4gSWYgdGhpc1xuICAgKiAgICAgb2JqZWN0IGRvZXNuJ3QgZXhpc3Qgb3IgbWV0YWRhdGEgY2Fubm90IGJlIHJldHJlaXZlZCwgdGhlIHByb21pc2UgaXNcbiAgICogICAgIHJlamVjdGVkLlxuICAgKi9cbiAgZ2V0TWV0YWRhdGEoKTogUHJvbWlzZTxNZXRhZGF0YT4ge1xuICAgIGFyZ3MudmFsaWRhdGUoJ2dldE1ldGFkYXRhJywgW10sIGFyZ3VtZW50cyk7XG4gICAgdGhpcy50aHJvd0lmUm9vdF8oJ2dldE1ldGFkYXRhJyk7XG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiB0aGlzLmF1dGhXcmFwcGVyLmdldEF1dGhUb2tlbigpLnRoZW4oZnVuY3Rpb24oYXV0aFRva2VuKSB7XG4gICAgICBsZXQgcmVxdWVzdEluZm8gPSByZXF1ZXN0cy5nZXRNZXRhZGF0YShcbiAgICAgICAgc2VsZi5hdXRoV3JhcHBlcixcbiAgICAgICAgc2VsZi5sb2NhdGlvbixcbiAgICAgICAgc2VsZi5tYXBwaW5ncygpXG4gICAgICApO1xuICAgICAgcmV0dXJuIHNlbGYuYXV0aFdyYXBwZXIubWFrZVJlcXVlc3QocmVxdWVzdEluZm8sIGF1dGhUb2tlbikuZ2V0UHJvbWlzZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIG1ldGFkYXRhIGZvciB0aGlzIG9iamVjdC5cbiAgICogQHBhcmFtIG1ldGFkYXRhIFRoZSBuZXcgbWV0YWRhdGEgZm9yIHRoZSBvYmplY3QuXG4gICAqICAgICBPbmx5IHZhbHVlcyB0aGF0IGhhdmUgYmVlbiBleHBsaWNpdGx5IHNldCB3aWxsIGJlIGNoYW5nZWQuIEV4cGxpY2l0bHlcbiAgICogICAgIHNldHRpbmcgYSB2YWx1ZSB0byBudWxsIHdpbGwgcmVtb3ZlIHRoZSBtZXRhZGF0YS5cbiAgICogQHJldHVybiBBIHByb21pc2UgdGhhdCByZXNvbHZlc1xuICAgKiAgICAgd2l0aCB0aGUgbmV3IG1ldGFkYXRhIGZvciB0aGlzIG9iamVjdC5cbiAgICogICAgIEBzZWUgZmlyZWJhc2VTdG9yYWdlLlJlZmVyZW5jZS5wcm90b3R5cGUuZ2V0TWV0YWRhdGFcbiAgICovXG4gIHVwZGF0ZU1ldGFkYXRhKG1ldGFkYXRhOiBNZXRhZGF0YSk6IFByb21pc2U8TWV0YWRhdGE+IHtcbiAgICBhcmdzLnZhbGlkYXRlKCd1cGRhdGVNZXRhZGF0YScsIFthcmdzLm1ldGFkYXRhU3BlYygpXSwgYXJndW1lbnRzKTtcbiAgICB0aGlzLnRocm93SWZSb290XygndXBkYXRlTWV0YWRhdGEnKTtcbiAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgcmV0dXJuIHRoaXMuYXV0aFdyYXBwZXIuZ2V0QXV0aFRva2VuKCkudGhlbihmdW5jdGlvbihhdXRoVG9rZW4pIHtcbiAgICAgIGxldCByZXF1ZXN0SW5mbyA9IHJlcXVlc3RzLnVwZGF0ZU1ldGFkYXRhKFxuICAgICAgICBzZWxmLmF1dGhXcmFwcGVyLFxuICAgICAgICBzZWxmLmxvY2F0aW9uLFxuICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgc2VsZi5tYXBwaW5ncygpXG4gICAgICApO1xuICAgICAgcmV0dXJuIHNlbGYuYXV0aFdyYXBwZXIubWFrZVJlcXVlc3QocmVxdWVzdEluZm8sIGF1dGhUb2tlbikuZ2V0UHJvbWlzZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZG93bmxvYWRcbiAgICogICAgIFVSTCBmb3IgdGhpcyBvYmplY3QuXG4gICAqL1xuICBnZXREb3dubG9hZFVSTCgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGFyZ3MudmFsaWRhdGUoJ2dldERvd25sb2FkVVJMJywgW10sIGFyZ3VtZW50cyk7XG4gICAgdGhpcy50aHJvd0lmUm9vdF8oJ2dldERvd25sb2FkVVJMJyk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0TWV0YWRhdGEoKS50aGVuKGZ1bmN0aW9uKG1ldGFkYXRhKSB7XG4gICAgICBsZXQgdXJsID0gKG1ldGFkYXRhWydkb3dubG9hZFVSTHMnXSBhcyBzdHJpbmdbXSlbMF07XG4gICAgICBpZiAodHlwZS5pc0RlZih1cmwpKSB7XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBlcnJvcnNFeHBvcnRzLm5vRG93bmxvYWRVUkwoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdGhyb3dJZlJvb3RfKG5hbWU6IHN0cmluZykge1xuICAgIGlmICh0aGlzLmxvY2F0aW9uLnBhdGggPT09ICcnKSB7XG4gICAgICB0aHJvdyBlcnJvcnNFeHBvcnRzLmludmFsaWRSb290T3BlcmF0aW9uKG5hbWUpO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRmlyZWJhc2VBcHAgfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCAqIGFzIGFyZ3MgZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi9hcmdzJztcbmltcG9ydCB7IEF1dGhXcmFwcGVyIH0gZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi9hdXRod3JhcHBlcic7XG5pbXBvcnQgeyBMb2NhdGlvbiB9IGZyb20gJy4vaW1wbGVtZW50YXRpb24vbG9jYXRpb24nO1xuaW1wb3J0ICogYXMgZmJzUHJvbWlzZUltcGwgZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi9wcm9taXNlX2V4dGVybmFsJztcbmltcG9ydCAqIGFzIFJlcXVlc3RFeHBvcnRzIGZyb20gJy4vaW1wbGVtZW50YXRpb24vcmVxdWVzdCc7XG5pbXBvcnQgeyBSZXF1ZXN0IH0gZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi9yZXF1ZXN0JztcbmltcG9ydCB7IFhocklvUG9vbCB9IGZyb20gJy4vaW1wbGVtZW50YXRpb24veGhyaW9wb29sJztcbmltcG9ydCB7IFJlZmVyZW5jZSB9IGZyb20gJy4vcmVmZXJlbmNlJztcblxuLyoqXG4gKiBBIHNlcnZpY2UgdGhhdCBwcm92aWRlcyBmaXJlYmFzZVN0b3JhZ2UuUmVmZXJlbmNlIGluc3RhbmNlcy5cbiAqIEBwYXJhbSBvcHRfdXJsIGdzOi8vIHVybCB0byBhIGN1c3RvbSBTdG9yYWdlIEJ1Y2tldFxuICpcbiAqIEBzdHJ1Y3RcbiAqL1xuZXhwb3J0IGNsYXNzIFNlcnZpY2Uge1xuICBhdXRoV3JhcHBlcl86IEF1dGhXcmFwcGVyO1xuICBwcml2YXRlIGFwcF86IEZpcmViYXNlQXBwO1xuICBwcml2YXRlIGJ1Y2tldF86IExvY2F0aW9uIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgaW50ZXJuYWxzXzogU2VydmljZUludGVybmFscztcblxuICBjb25zdHJ1Y3RvcihhcHA6IEZpcmViYXNlQXBwLCBwb29sOiBYaHJJb1Bvb2wsIHVybD86IHN0cmluZykge1xuICAgIGZ1bmN0aW9uIG1ha2VyKGF1dGhXcmFwcGVyOiBBdXRoV3JhcHBlciwgbG9jOiBMb2NhdGlvbikge1xuICAgICAgcmV0dXJuIG5ldyBSZWZlcmVuY2UoYXV0aFdyYXBwZXIsIGxvYyk7XG4gICAgfVxuICAgIHRoaXMuYXV0aFdyYXBwZXJfID0gbmV3IEF1dGhXcmFwcGVyKFxuICAgICAgYXBwLFxuICAgICAgbWFrZXIsXG4gICAgICBSZXF1ZXN0RXhwb3J0cy5tYWtlUmVxdWVzdCxcbiAgICAgIHRoaXMsXG4gICAgICBwb29sXG4gICAgKTtcbiAgICB0aGlzLmFwcF8gPSBhcHA7XG4gICAgaWYgKHVybCAhPSBudWxsKSB7XG4gICAgICB0aGlzLmJ1Y2tldF8gPSBMb2NhdGlvbi5tYWtlRnJvbUJ1Y2tldFNwZWModXJsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYXV0aFdyYXBwZXJCdWNrZXQgPSB0aGlzLmF1dGhXcmFwcGVyXy5idWNrZXQoKTtcbiAgICAgIGlmIChhdXRoV3JhcHBlckJ1Y2tldCAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuYnVja2V0XyA9IG5ldyBMb2NhdGlvbihhdXRoV3JhcHBlckJ1Y2tldCwgJycpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmludGVybmFsc18gPSBuZXcgU2VydmljZUludGVybmFscyh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgZmlyZWJhc2VTdG9yYWdlLlJlZmVyZW5jZSBmb3IgdGhlIGdpdmVuIHBhdGggaW4gdGhlIGRlZmF1bHRcbiAgICogYnVja2V0LlxuICAgKi9cbiAgcmVmKHBhdGg/OiBzdHJpbmcpOiBSZWZlcmVuY2Uge1xuICAgIGZ1bmN0aW9uIHZhbGlkYXRvcihwYXRoOiBzdHJpbmcpIHtcbiAgICAgIGlmICgvXltBLVphLXpdKzpcXC9cXC8vLnRlc3QocGF0aCkpIHtcbiAgICAgICAgdGhyb3cgJ0V4cGVjdGVkIGNoaWxkIHBhdGggYnV0IGdvdCBhIFVSTCwgdXNlIHJlZkZyb21VUkwgaW5zdGVhZC4nO1xuICAgICAgfVxuICAgIH1cbiAgICBhcmdzLnZhbGlkYXRlKCdyZWYnLCBbYXJncy5zdHJpbmdTcGVjKHZhbGlkYXRvciwgdHJ1ZSldLCBhcmd1bWVudHMpO1xuICAgIGlmICh0aGlzLmJ1Y2tldF8gPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBTdG9yYWdlIEJ1Y2tldCBkZWZpbmVkIGluIEZpcmViYXNlIE9wdGlvbnMuJyk7XG4gICAgfVxuXG4gICAgbGV0IHJlZiA9IG5ldyBSZWZlcmVuY2UodGhpcy5hdXRoV3JhcHBlcl8sIHRoaXMuYnVja2V0Xyk7XG4gICAgaWYgKHBhdGggIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHJlZi5jaGlsZChwYXRoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJlZjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGZpcmViYXNlU3RvcmFnZS5SZWZlcmVuY2Ugb2JqZWN0IGZvciB0aGUgZ2l2ZW4gYWJzb2x1dGUgVVJMLFxuICAgKiB3aGljaCBtdXN0IGJlIGEgZ3M6Ly8gb3IgaHR0cFtzXTovLyBVUkwuXG4gICAqL1xuICByZWZGcm9tVVJMKHVybDogc3RyaW5nKTogUmVmZXJlbmNlIHtcbiAgICBmdW5jdGlvbiB2YWxpZGF0b3IocDogc3RyaW5nKSB7XG4gICAgICBpZiAoIS9eW0EtWmEtel0rOlxcL1xcLy8udGVzdChwKSkge1xuICAgICAgICB0aHJvdyAnRXhwZWN0ZWQgZnVsbCBVUkwgYnV0IGdvdCBhIGNoaWxkIHBhdGgsIHVzZSByZWYgaW5zdGVhZC4nO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgTG9jYXRpb24ubWFrZUZyb21VcmwocCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93ICdFeHBlY3RlZCB2YWxpZCBmdWxsIFVSTCBidXQgZ290IGFuIGludmFsaWQgb25lLic7XG4gICAgICB9XG4gICAgfVxuICAgIGFyZ3MudmFsaWRhdGUoJ3JlZkZyb21VUkwnLCBbYXJncy5zdHJpbmdTcGVjKHZhbGlkYXRvciwgZmFsc2UpXSwgYXJndW1lbnRzKTtcbiAgICByZXR1cm4gbmV3IFJlZmVyZW5jZSh0aGlzLmF1dGhXcmFwcGVyXywgdXJsKTtcbiAgfVxuXG4gIGdldCBtYXhVcGxvYWRSZXRyeVRpbWUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5hdXRoV3JhcHBlcl8ubWF4VXBsb2FkUmV0cnlUaW1lKCk7XG4gIH1cblxuICBzZXRNYXhVcGxvYWRSZXRyeVRpbWUodGltZTogbnVtYmVyKSB7XG4gICAgYXJncy52YWxpZGF0ZShcbiAgICAgICdzZXRNYXhVcGxvYWRSZXRyeVRpbWUnLFxuICAgICAgW2FyZ3Mubm9uTmVnYXRpdmVOdW1iZXJTcGVjKCldLFxuICAgICAgYXJndW1lbnRzXG4gICAgKTtcbiAgICB0aGlzLmF1dGhXcmFwcGVyXy5zZXRNYXhVcGxvYWRSZXRyeVRpbWUodGltZSk7XG4gIH1cblxuICBnZXQgbWF4T3BlcmF0aW9uUmV0cnlUaW1lKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuYXV0aFdyYXBwZXJfLm1heE9wZXJhdGlvblJldHJ5VGltZSgpO1xuICB9XG5cbiAgc2V0TWF4T3BlcmF0aW9uUmV0cnlUaW1lKHRpbWU6IG51bWJlcikge1xuICAgIGFyZ3MudmFsaWRhdGUoXG4gICAgICAnc2V0TWF4T3BlcmF0aW9uUmV0cnlUaW1lJyxcbiAgICAgIFthcmdzLm5vbk5lZ2F0aXZlTnVtYmVyU3BlYygpXSxcbiAgICAgIGFyZ3VtZW50c1xuICAgICk7XG4gICAgdGhpcy5hdXRoV3JhcHBlcl8uc2V0TWF4T3BlcmF0aW9uUmV0cnlUaW1lKHRpbWUpO1xuICB9XG5cbiAgZ2V0IGFwcCgpOiBGaXJlYmFzZUFwcCB7XG4gICAgcmV0dXJuIHRoaXMuYXBwXztcbiAgfVxuXG4gIGdldCBJTlRFUk5BTCgpOiBTZXJ2aWNlSW50ZXJuYWxzIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcm5hbHNfO1xuICB9XG59XG5cbi8qKlxuICogQHN0cnVjdFxuICovXG5leHBvcnQgY2xhc3MgU2VydmljZUludGVybmFscyB7XG4gIHNlcnZpY2VfOiBTZXJ2aWNlO1xuXG4gIGNvbnN0cnVjdG9yKHNlcnZpY2U6IFNlcnZpY2UpIHtcbiAgICB0aGlzLnNlcnZpY2VfID0gc2VydmljZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiB0aGUgYXNzb2NpYXRlZCBhcHAgaXMgZGVsZXRlZC5cbiAgICogQHNlZSB7IWZicy5BdXRoV3JhcHBlci5wcm90b3R5cGUuZGVsZXRlQXBwfVxuICAgKi9cbiAgZGVsZXRlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuc2VydmljZV8uYXV0aFdyYXBwZXJfLmRlbGV0ZUFwcCgpO1xuICAgIHJldHVybiBmYnNQcm9taXNlSW1wbC5yZXNvbHZlPHZvaWQ+KHVuZGVmaW5lZCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgRGVmaW5lcyB0eXBlcyBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBibG9iIHRyYW5zZmVyIHRhc2tzLlxuICovXG5cbmltcG9ydCB7IEF1dGhXcmFwcGVyIH0gZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi9hdXRod3JhcHBlcic7XG5pbXBvcnQgeyBGYnNCbG9iIH0gZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi9ibG9iJztcbmltcG9ydCB7IEZpcmViYXNlU3RvcmFnZUVycm9yIH0gZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi9lcnJvcic7XG5pbXBvcnQgeyBJbnRlcm5hbFRhc2tTdGF0ZSB9IGZyb20gJy4vaW1wbGVtZW50YXRpb24vdGFza2VudW1zJztcbmltcG9ydCB7IE1ldGFkYXRhIH0gZnJvbSAnLi9tZXRhZGF0YSc7XG5pbXBvcnQge1xuICBOZXh0Rm4sXG4gIEVycm9yRm4sXG4gIENvbXBsZXRlRm4sXG4gIFVuc3Vic2NyaWJlLFxuICBPYnNlcnZlclxufSBmcm9tICcuL2ltcGxlbWVudGF0aW9uL29ic2VydmVyJztcbmltcG9ydCB7IFJlcXVlc3QgfSBmcm9tICcuL2ltcGxlbWVudGF0aW9uL3JlcXVlc3QnO1xuaW1wb3J0ICogYXMgUmVxdWVzdEV4cG9ydHMgZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi9yZXF1ZXN0JztcbmltcG9ydCB7IFN1YnNjcmliZSB9IGZyb20gJy4vaW1wbGVtZW50YXRpb24vb2JzZXJ2ZXInO1xuaW1wb3J0IHsgVGFza0V2ZW50LCBUYXNrU3RhdGUgfSBmcm9tICcuL2ltcGxlbWVudGF0aW9uL3Rhc2tlbnVtcyc7XG5pbXBvcnQgeyBVcGxvYWRUYXNrU25hcHNob3QgfSBmcm9tICcuL3Rhc2tzbmFwc2hvdCc7XG5pbXBvcnQgKiBhcyBmYnNBcmdzIGZyb20gJy4vaW1wbGVtZW50YXRpb24vYXJncyc7XG5pbXBvcnQgeyBBcmdTcGVjIH0gZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi9hcmdzJztcbmltcG9ydCAqIGFzIGZic0FycmF5IGZyb20gJy4vaW1wbGVtZW50YXRpb24vYXJyYXknO1xuaW1wb3J0IHsgYXN5bmMgYXMgZmJzQXN5bmMgfSBmcm9tICcuL2ltcGxlbWVudGF0aW9uL2FzeW5jJztcbmltcG9ydCB7IGVycm9ycyBhcyBmYnNFcnJvcnMgfSBmcm9tICcuL2ltcGxlbWVudGF0aW9uL2Vycm9yJztcbmltcG9ydCAqIGFzIGVycm9ycyBmcm9tICcuL2ltcGxlbWVudGF0aW9uL2Vycm9yJztcbmltcG9ydCB7IExvY2F0aW9uIH0gZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi9sb2NhdGlvbic7XG5pbXBvcnQgKiBhcyBmYnNNZXRhZGF0YSBmcm9tICcuL2ltcGxlbWVudGF0aW9uL21ldGFkYXRhJztcbmltcG9ydCAqIGFzIGZic1Byb21pc2VpbXBsIGZyb20gJy4vaW1wbGVtZW50YXRpb24vcHJvbWlzZV9leHRlcm5hbCc7XG5pbXBvcnQgeyBSZXF1ZXN0SW5mbyB9IGZyb20gJy4vaW1wbGVtZW50YXRpb24vcmVxdWVzdGluZm8nO1xuaW1wb3J0ICogYXMgZmJzUmVxdWVzdHMgZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi9yZXF1ZXN0cyc7XG5pbXBvcnQgKiBhcyBmYnNUYXNrRW51bXMgZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi90YXNrZW51bXMnO1xuaW1wb3J0ICogYXMgdHlwZVV0aWxzIGZyb20gJy4vaW1wbGVtZW50YXRpb24vdHlwZSc7XG5pbXBvcnQgeyBSZWZlcmVuY2UgfSBmcm9tICcuL3JlZmVyZW5jZSc7XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGJsb2IgYmVpbmcgdXBsb2FkZWQuIENhbiBiZSB1c2VkIHRvIHBhdXNlL3Jlc3VtZS9jYW5jZWwgdGhlXG4gKiB1cGxvYWQgYW5kIG1hbmFnZSBjYWxsYmFja3MgZm9yIHZhcmlvdXMgZXZlbnRzLlxuICovXG5leHBvcnQgY2xhc3MgVXBsb2FkVGFzayB7XG4gIHByaXZhdGUgcmVmXzogUmVmZXJlbmNlO1xuICBwcml2YXRlIGF1dGhXcmFwcGVyXzogQXV0aFdyYXBwZXI7XG4gIHByaXZhdGUgbG9jYXRpb25fOiBMb2NhdGlvbjtcbiAgcHJpdmF0ZSBibG9iXzogRmJzQmxvYjtcbiAgcHJpdmF0ZSBtZXRhZGF0YV86IE1ldGFkYXRhIHwgbnVsbDtcbiAgcHJpdmF0ZSBtYXBwaW5nc186IGZic01ldGFkYXRhLk1hcHBpbmdzO1xuICBwcml2YXRlIHRyYW5zZmVycmVkXzogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBuZWVkVG9GZXRjaFN0YXR1c186IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBuZWVkVG9GZXRjaE1ldGFkYXRhXzogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIG9ic2VydmVyc186IE9ic2VydmVyPFVwbG9hZFRhc2tTbmFwc2hvdD5bXSA9IFtdO1xuICBwcml2YXRlIHJlc3VtYWJsZV86IGJvb2xlYW47XG4gIHByaXZhdGUgc3RhdGVfOiBJbnRlcm5hbFRhc2tTdGF0ZTtcbiAgcHJpdmF0ZSBlcnJvcl86IEVycm9yIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgdXBsb2FkVXJsXzogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcmVxdWVzdF86IFJlcXVlc3Q8YW55PiB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGNodW5rTXVsdGlwbGllcl86IG51bWJlciA9IDE7XG4gIHByaXZhdGUgZXJyb3JIYW5kbGVyXzogKHAxOiBGaXJlYmFzZVN0b3JhZ2VFcnJvcikgPT4gdm9pZDtcbiAgcHJpdmF0ZSBtZXRhZGF0YUVycm9ySGFuZGxlcl86IChwMTogRmlyZWJhc2VTdG9yYWdlRXJyb3IpID0+IHZvaWQ7XG4gIHByaXZhdGUgcmVzb2x2ZV86ICgocDE6IFVwbG9hZFRhc2tTbmFwc2hvdCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWplY3RfOiAoKHAxOiBFcnJvcikgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBwcm9taXNlXzogUHJvbWlzZTxVcGxvYWRUYXNrU25hcHNob3Q+O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gcmVmIFRoZSBmaXJlYmFzZVN0b3JhZ2UuUmVmZXJlbmNlIG9iamVjdCB0aGlzIHRhc2sgY2FtZVxuICAgKiAgICAgZnJvbSwgdW50eXBlZCB0byBhdm9pZCBjeWNsaWMgZGVwZW5kZW5jaWVzLlxuICAgKiBAcGFyYW0gYmxvYiBUaGUgYmxvYiB0byB1cGxvYWQuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICByZWY6IFJlZmVyZW5jZSxcbiAgICBhdXRoV3JhcHBlcjogQXV0aFdyYXBwZXIsXG4gICAgbG9jYXRpb246IExvY2F0aW9uLFxuICAgIG1hcHBpbmdzOiBmYnNNZXRhZGF0YS5NYXBwaW5ncyxcbiAgICBibG9iOiBGYnNCbG9iLFxuICAgIG1ldGFkYXRhOiBNZXRhZGF0YSB8IG51bGwgPSBudWxsXG4gICkge1xuICAgIHRoaXMucmVmXyA9IHJlZjtcbiAgICB0aGlzLmF1dGhXcmFwcGVyXyA9IGF1dGhXcmFwcGVyO1xuICAgIHRoaXMubG9jYXRpb25fID0gbG9jYXRpb247XG4gICAgdGhpcy5ibG9iXyA9IGJsb2I7XG4gICAgdGhpcy5tZXRhZGF0YV8gPSBtZXRhZGF0YTtcbiAgICB0aGlzLm1hcHBpbmdzXyA9IG1hcHBpbmdzO1xuICAgIHRoaXMucmVzdW1hYmxlXyA9IHRoaXMuc2hvdWxkRG9SZXN1bWFibGVfKHRoaXMuYmxvYl8pO1xuICAgIHRoaXMuc3RhdGVfID0gSW50ZXJuYWxUYXNrU3RhdGUuUlVOTklORztcbiAgICB0aGlzLmVycm9ySGFuZGxlcl8gPSBlcnJvciA9PiB7XG4gICAgICB0aGlzLnJlcXVlc3RfID0gbnVsbDtcbiAgICAgIHRoaXMuY2h1bmtNdWx0aXBsaWVyXyA9IDE7XG4gICAgICBpZiAoZXJyb3IuY29kZUVxdWFscyhlcnJvcnMuQ29kZS5DQU5DRUxFRCkpIHtcbiAgICAgICAgdGhpcy5uZWVkVG9GZXRjaFN0YXR1c18gPSB0cnVlO1xuICAgICAgICB0aGlzLmNvbXBsZXRlVHJhbnNpdGlvbnNfKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVycm9yXyA9IGVycm9yO1xuICAgICAgICB0aGlzLnRyYW5zaXRpb25fKEludGVybmFsVGFza1N0YXRlLkVSUk9SKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMubWV0YWRhdGFFcnJvckhhbmRsZXJfID0gZXJyb3IgPT4ge1xuICAgICAgdGhpcy5yZXF1ZXN0XyA9IG51bGw7XG4gICAgICBpZiAoZXJyb3IuY29kZUVxdWFscyhlcnJvcnMuQ29kZS5DQU5DRUxFRCkpIHtcbiAgICAgICAgdGhpcy5jb21wbGV0ZVRyYW5zaXRpb25zXygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5lcnJvcl8gPSBlcnJvcjtcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uXyhJbnRlcm5hbFRhc2tTdGF0ZS5FUlJPUik7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLnByb21pc2VfID0gZmJzUHJvbWlzZWltcGwubWFrZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLnJlc29sdmVfID0gcmVzb2x2ZTtcbiAgICAgIHRoaXMucmVqZWN0XyA9IHJlamVjdDtcbiAgICAgIHRoaXMuc3RhcnRfKCk7XG4gICAgfSk7XG5cbiAgICAvLyBQcmV2ZW50IHVuY2F1Z2h0IHJlamVjdGlvbnMgb24gdGhlIGludGVybmFsIHByb21pc2UgZnJvbSBidWJibGluZyBvdXRcbiAgICAvLyB0byB0aGUgdG9wIGxldmVsIHdpdGggYSBkdW1teSBoYW5kbGVyLlxuICAgIHRoaXMucHJvbWlzZV8udGhlbihudWxsLCAoKSA9PiB7fSk7XG4gIH1cblxuICBwcml2YXRlIG1ha2VQcm9ncmVzc0NhbGxiYWNrXygpOiAocDE6IG51bWJlciwgcDI6IG51bWJlcikgPT4gdm9pZCB7XG4gICAgY29uc3Qgc2l6ZUJlZm9yZSA9IHRoaXMudHJhbnNmZXJyZWRfO1xuICAgIHJldHVybiAobG9hZGVkLCB0b3RhbCkgPT4ge1xuICAgICAgdGhpcy51cGRhdGVQcm9ncmVzc18oc2l6ZUJlZm9yZSArIGxvYWRlZCk7XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkRG9SZXN1bWFibGVfKGJsb2I6IEZic0Jsb2IpOiBib29sZWFuIHtcbiAgICByZXR1cm4gYmxvYi5zaXplKCkgPiAyNTYgKiAxMDI0O1xuICB9XG5cbiAgcHJpdmF0ZSBzdGFydF8oKSB7XG4gICAgaWYgKHRoaXMuc3RhdGVfICE9PSBJbnRlcm5hbFRhc2tTdGF0ZS5SVU5OSU5HKSB7XG4gICAgICAvLyBUaGlzIGNhbiBoYXBwZW4gaWYgc29tZW9uZSBwYXVzZXMgdXMgaW4gYSByZXN1bWUgY2FsbGJhY2ssIGZvciBleGFtcGxlLlxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5yZXF1ZXN0XyAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5yZXN1bWFibGVfKSB7XG4gICAgICBpZiAodGhpcy51cGxvYWRVcmxfID09PSBudWxsKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlUmVzdW1hYmxlXygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMubmVlZFRvRmV0Y2hTdGF0dXNfKSB7XG4gICAgICAgICAgdGhpcy5mZXRjaFN0YXR1c18oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy5uZWVkVG9GZXRjaE1ldGFkYXRhXykge1xuICAgICAgICAgICAgLy8gSGFwcGVucyBpZiB3ZSBtaXNzIHRoZSBtZXRhZGF0YSBvbiB1cGxvYWQgY29tcGxldGlvbi5cbiAgICAgICAgICAgIHRoaXMuZmV0Y2hNZXRhZGF0YV8oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb250aW51ZVVwbG9hZF8oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbmVTaG90VXBsb2FkXygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVzb2x2ZVRva2VuXyhjYWxsYmFjazogKHAxOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkKSB7XG4gICAgdGhpcy5hdXRoV3JhcHBlcl8uZ2V0QXV0aFRva2VuKCkudGhlbihhdXRoVG9rZW4gPT4ge1xuICAgICAgc3dpdGNoICh0aGlzLnN0YXRlXykge1xuICAgICAgICBjYXNlIEludGVybmFsVGFza1N0YXRlLlJVTk5JTkc6XG4gICAgICAgICAgY2FsbGJhY2soYXV0aFRva2VuKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBJbnRlcm5hbFRhc2tTdGF0ZS5DQU5DRUxJTkc6XG4gICAgICAgICAgdGhpcy50cmFuc2l0aW9uXyhJbnRlcm5hbFRhc2tTdGF0ZS5DQU5DRUxFRCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgSW50ZXJuYWxUYXNrU3RhdGUuUEFVU0lORzpcbiAgICAgICAgICB0aGlzLnRyYW5zaXRpb25fKEludGVybmFsVGFza1N0YXRlLlBBVVNFRCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyBUT0RPKGFuZHlzb3RvKTogYXNzZXJ0IGZhbHNlXG5cbiAgcHJpdmF0ZSBjcmVhdGVSZXN1bWFibGVfKCkge1xuICAgIHRoaXMucmVzb2x2ZVRva2VuXyhhdXRoVG9rZW4gPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdEluZm8gPSBmYnNSZXF1ZXN0cy5jcmVhdGVSZXN1bWFibGVVcGxvYWQoXG4gICAgICAgIHRoaXMuYXV0aFdyYXBwZXJfLFxuICAgICAgICB0aGlzLmxvY2F0aW9uXyxcbiAgICAgICAgdGhpcy5tYXBwaW5nc18sXG4gICAgICAgIHRoaXMuYmxvYl8sXG4gICAgICAgIHRoaXMubWV0YWRhdGFfXG4gICAgICApO1xuICAgICAgY29uc3QgY3JlYXRlUmVxdWVzdCA9IHRoaXMuYXV0aFdyYXBwZXJfLm1ha2VSZXF1ZXN0KFxuICAgICAgICByZXF1ZXN0SW5mbyxcbiAgICAgICAgYXV0aFRva2VuXG4gICAgICApO1xuICAgICAgdGhpcy5yZXF1ZXN0XyA9IGNyZWF0ZVJlcXVlc3Q7XG4gICAgICBjcmVhdGVSZXF1ZXN0LmdldFByb21pc2UoKS50aGVuKCh1cmw6IHN0cmluZykgPT4ge1xuICAgICAgICB0aGlzLnJlcXVlc3RfID0gbnVsbDtcbiAgICAgICAgdGhpcy51cGxvYWRVcmxfID0gdXJsO1xuICAgICAgICB0aGlzLm5lZWRUb0ZldGNoU3RhdHVzXyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNvbXBsZXRlVHJhbnNpdGlvbnNfKCk7XG4gICAgICB9LCB0aGlzLmVycm9ySGFuZGxlcl8pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBmZXRjaFN0YXR1c18oKSB7XG4gICAgLy8gVE9ETyhhbmR5c290byk6IGFzc2VydCh0aGlzLnVwbG9hZFVybF8gIT09IG51bGwpO1xuICAgIGNvbnN0IHVybCA9IHRoaXMudXBsb2FkVXJsXyBhcyBzdHJpbmc7XG4gICAgdGhpcy5yZXNvbHZlVG9rZW5fKGF1dGhUb2tlbiA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0SW5mbyA9IGZic1JlcXVlc3RzLmdldFJlc3VtYWJsZVVwbG9hZFN0YXR1cyhcbiAgICAgICAgdGhpcy5hdXRoV3JhcHBlcl8sXG4gICAgICAgIHRoaXMubG9jYXRpb25fLFxuICAgICAgICB1cmwsXG4gICAgICAgIHRoaXMuYmxvYl9cbiAgICAgICk7XG4gICAgICBjb25zdCBzdGF0dXNSZXF1ZXN0ID0gdGhpcy5hdXRoV3JhcHBlcl8ubWFrZVJlcXVlc3QoXG4gICAgICAgIHJlcXVlc3RJbmZvLFxuICAgICAgICBhdXRoVG9rZW5cbiAgICAgICk7XG4gICAgICB0aGlzLnJlcXVlc3RfID0gc3RhdHVzUmVxdWVzdDtcbiAgICAgIHN0YXR1c1JlcXVlc3QuZ2V0UHJvbWlzZSgpLnRoZW4oc3RhdHVzID0+IHtcbiAgICAgICAgc3RhdHVzID0gc3RhdHVzIGFzIGZic1JlcXVlc3RzLlJlc3VtYWJsZVVwbG9hZFN0YXR1cztcbiAgICAgICAgdGhpcy5yZXF1ZXN0XyA9IG51bGw7XG4gICAgICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3NfKHN0YXR1cy5jdXJyZW50KTtcbiAgICAgICAgdGhpcy5uZWVkVG9GZXRjaFN0YXR1c18gPSBmYWxzZTtcbiAgICAgICAgaWYgKHN0YXR1cy5maW5hbGl6ZWQpIHtcbiAgICAgICAgICB0aGlzLm5lZWRUb0ZldGNoTWV0YWRhdGFfID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbXBsZXRlVHJhbnNpdGlvbnNfKCk7XG4gICAgICB9LCB0aGlzLmVycm9ySGFuZGxlcl8pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjb250aW51ZVVwbG9hZF8oKSB7XG4gICAgY29uc3QgY2h1bmtTaXplID1cbiAgICAgIGZic1JlcXVlc3RzLnJlc3VtYWJsZVVwbG9hZENodW5rU2l6ZSAqIHRoaXMuY2h1bmtNdWx0aXBsaWVyXztcbiAgICBjb25zdCBzdGF0dXMgPSBuZXcgZmJzUmVxdWVzdHMuUmVzdW1hYmxlVXBsb2FkU3RhdHVzKFxuICAgICAgdGhpcy50cmFuc2ZlcnJlZF8sXG4gICAgICB0aGlzLmJsb2JfLnNpemUoKVxuICAgICk7XG5cbiAgICAvLyBUT0RPKGFuZHlzb3RvKTogYXNzZXJ0KHRoaXMudXBsb2FkVXJsXyAhPT0gbnVsbCk7XG4gICAgY29uc3QgdXJsID0gdGhpcy51cGxvYWRVcmxfIGFzIHN0cmluZztcbiAgICB0aGlzLnJlc29sdmVUb2tlbl8oYXV0aFRva2VuID0+IHtcbiAgICAgIGxldCByZXF1ZXN0SW5mbztcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlcXVlc3RJbmZvID0gZmJzUmVxdWVzdHMuY29udGludWVSZXN1bWFibGVVcGxvYWQoXG4gICAgICAgICAgdGhpcy5sb2NhdGlvbl8sXG4gICAgICAgICAgdGhpcy5hdXRoV3JhcHBlcl8sXG4gICAgICAgICAgdXJsLFxuICAgICAgICAgIHRoaXMuYmxvYl8sXG4gICAgICAgICAgY2h1bmtTaXplLFxuICAgICAgICAgIHRoaXMubWFwcGluZ3NfLFxuICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICB0aGlzLm1ha2VQcm9ncmVzc0NhbGxiYWNrXygpXG4gICAgICAgICk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRoaXMuZXJyb3JfID0gZTtcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uXyhJbnRlcm5hbFRhc2tTdGF0ZS5FUlJPUik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVwbG9hZFJlcXVlc3QgPSB0aGlzLmF1dGhXcmFwcGVyXy5tYWtlUmVxdWVzdChcbiAgICAgICAgcmVxdWVzdEluZm8sXG4gICAgICAgIGF1dGhUb2tlblxuICAgICAgKTtcbiAgICAgIHRoaXMucmVxdWVzdF8gPSB1cGxvYWRSZXF1ZXN0O1xuICAgICAgdXBsb2FkUmVxdWVzdFxuICAgICAgICAuZ2V0UHJvbWlzZSgpXG4gICAgICAgIC50aGVuKChuZXdTdGF0dXM6IGZic1JlcXVlc3RzLlJlc3VtYWJsZVVwbG9hZFN0YXR1cykgPT4ge1xuICAgICAgICAgIHRoaXMuaW5jcmVhc2VNdWx0aXBsaWVyXygpO1xuICAgICAgICAgIHRoaXMucmVxdWVzdF8gPSBudWxsO1xuICAgICAgICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3NfKG5ld1N0YXR1cy5jdXJyZW50KTtcbiAgICAgICAgICBpZiAobmV3U3RhdHVzLmZpbmFsaXplZCkge1xuICAgICAgICAgICAgdGhpcy5tZXRhZGF0YV8gPSBuZXdTdGF0dXMubWV0YWRhdGE7XG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25fKEludGVybmFsVGFza1N0YXRlLlNVQ0NFU1MpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlVHJhbnNpdGlvbnNfKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzLmVycm9ySGFuZGxlcl8pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBpbmNyZWFzZU11bHRpcGxpZXJfKCkge1xuICAgIGNvbnN0IGN1cnJlbnRTaXplID1cbiAgICAgIGZic1JlcXVlc3RzLnJlc3VtYWJsZVVwbG9hZENodW5rU2l6ZSAqIHRoaXMuY2h1bmtNdWx0aXBsaWVyXztcblxuICAgIC8vIE1heCBjaHVuayBzaXplIGlzIDMyTS5cbiAgICBpZiAoY3VycmVudFNpemUgPCAzMiAqIDEwMjQgKiAxMDI0KSB7XG4gICAgICB0aGlzLmNodW5rTXVsdGlwbGllcl8gKj0gMjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGZldGNoTWV0YWRhdGFfKCkge1xuICAgIHRoaXMucmVzb2x2ZVRva2VuXyhhdXRoVG9rZW4gPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdEluZm8gPSBmYnNSZXF1ZXN0cy5nZXRNZXRhZGF0YShcbiAgICAgICAgdGhpcy5hdXRoV3JhcHBlcl8sXG4gICAgICAgIHRoaXMubG9jYXRpb25fLFxuICAgICAgICB0aGlzLm1hcHBpbmdzX1xuICAgICAgKTtcbiAgICAgIGNvbnN0IG1ldGFkYXRhUmVxdWVzdCA9IHRoaXMuYXV0aFdyYXBwZXJfLm1ha2VSZXF1ZXN0KFxuICAgICAgICByZXF1ZXN0SW5mbyxcbiAgICAgICAgYXV0aFRva2VuXG4gICAgICApO1xuICAgICAgdGhpcy5yZXF1ZXN0XyA9IG1ldGFkYXRhUmVxdWVzdDtcbiAgICAgIG1ldGFkYXRhUmVxdWVzdC5nZXRQcm9taXNlKCkudGhlbihtZXRhZGF0YSA9PiB7XG4gICAgICAgIHRoaXMucmVxdWVzdF8gPSBudWxsO1xuICAgICAgICB0aGlzLm1ldGFkYXRhXyA9IG1ldGFkYXRhO1xuICAgICAgICB0aGlzLnRyYW5zaXRpb25fKEludGVybmFsVGFza1N0YXRlLlNVQ0NFU1MpO1xuICAgICAgfSwgdGhpcy5tZXRhZGF0YUVycm9ySGFuZGxlcl8pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBvbmVTaG90VXBsb2FkXygpIHtcbiAgICB0aGlzLnJlc29sdmVUb2tlbl8oYXV0aFRva2VuID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3RJbmZvID0gZmJzUmVxdWVzdHMubXVsdGlwYXJ0VXBsb2FkKFxuICAgICAgICB0aGlzLmF1dGhXcmFwcGVyXyxcbiAgICAgICAgdGhpcy5sb2NhdGlvbl8sXG4gICAgICAgIHRoaXMubWFwcGluZ3NfLFxuICAgICAgICB0aGlzLmJsb2JfLFxuICAgICAgICB0aGlzLm1ldGFkYXRhX1xuICAgICAgKTtcbiAgICAgIGNvbnN0IG11bHRpcGFydFJlcXVlc3QgPSB0aGlzLmF1dGhXcmFwcGVyXy5tYWtlUmVxdWVzdChcbiAgICAgICAgcmVxdWVzdEluZm8sXG4gICAgICAgIGF1dGhUb2tlblxuICAgICAgKTtcbiAgICAgIHRoaXMucmVxdWVzdF8gPSBtdWx0aXBhcnRSZXF1ZXN0O1xuICAgICAgbXVsdGlwYXJ0UmVxdWVzdC5nZXRQcm9taXNlKCkudGhlbihtZXRhZGF0YSA9PiB7XG4gICAgICAgIHRoaXMucmVxdWVzdF8gPSBudWxsO1xuICAgICAgICB0aGlzLm1ldGFkYXRhXyA9IG1ldGFkYXRhO1xuICAgICAgICB0aGlzLnVwZGF0ZVByb2dyZXNzXyh0aGlzLmJsb2JfLnNpemUoKSk7XG4gICAgICAgIHRoaXMudHJhbnNpdGlvbl8oSW50ZXJuYWxUYXNrU3RhdGUuU1VDQ0VTUyk7XG4gICAgICB9LCB0aGlzLmVycm9ySGFuZGxlcl8pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVQcm9ncmVzc18odHJhbnNmZXJyZWQ6IG51bWJlcikge1xuICAgIGNvbnN0IG9sZCA9IHRoaXMudHJhbnNmZXJyZWRfO1xuICAgIHRoaXMudHJhbnNmZXJyZWRfID0gdHJhbnNmZXJyZWQ7XG5cbiAgICAvLyBBIHByb2dyZXNzIHVwZGF0ZSBjYW4gbWFrZSB0aGUgXCJ0cmFuc2ZlcnJlZFwiIHZhbHVlIHNtYWxsZXIgKGUuZy4gYVxuICAgIC8vIHBhcnRpYWwgdXBsb2FkIG5vdCBjb21wbGV0ZWQgYnkgc2VydmVyLCBhZnRlciB3aGljaCB0aGUgXCJ0cmFuc2ZlcnJlZFwiXG4gICAgLy8gdmFsdWUgbWF5IHJlc2V0IHRvIHRoZSB2YWx1ZSBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSByZXF1ZXN0KS5cbiAgICBpZiAodGhpcy50cmFuc2ZlcnJlZF8gIT09IG9sZCkge1xuICAgICAgdGhpcy5ub3RpZnlPYnNlcnZlcnNfKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB0cmFuc2l0aW9uXyhzdGF0ZTogSW50ZXJuYWxUYXNrU3RhdGUpIHtcbiAgICBpZiAodGhpcy5zdGF0ZV8gPT09IHN0YXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgIGNhc2UgSW50ZXJuYWxUYXNrU3RhdGUuQ0FOQ0VMSU5HOlxuICAgICAgICAvLyBUT0RPKGFuZHlzb3RvKTpcbiAgICAgICAgLy8gYXNzZXJ0KHRoaXMuc3RhdGVfID09PSBJbnRlcm5hbFRhc2tTdGF0ZS5SVU5OSU5HIHx8XG4gICAgICAgIC8vICAgICAgICB0aGlzLnN0YXRlXyA9PT0gSW50ZXJuYWxUYXNrU3RhdGUuUEFVU0lORyk7XG4gICAgICAgIHRoaXMuc3RhdGVfID0gc3RhdGU7XG4gICAgICAgIGlmICh0aGlzLnJlcXVlc3RfICE9PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5yZXF1ZXN0Xy5jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgSW50ZXJuYWxUYXNrU3RhdGUuUEFVU0lORzpcbiAgICAgICAgLy8gVE9ETyhhbmR5c290byk6XG4gICAgICAgIC8vIGFzc2VydCh0aGlzLnN0YXRlXyA9PT0gSW50ZXJuYWxUYXNrU3RhdGUuUlVOTklORyk7XG4gICAgICAgIHRoaXMuc3RhdGVfID0gc3RhdGU7XG4gICAgICAgIGlmICh0aGlzLnJlcXVlc3RfICE9PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5yZXF1ZXN0Xy5jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgSW50ZXJuYWxUYXNrU3RhdGUuUlVOTklORzpcbiAgICAgICAgLy8gVE9ETyhhbmR5c290byk6XG4gICAgICAgIC8vIGFzc2VydCh0aGlzLnN0YXRlXyA9PT0gSW50ZXJuYWxUYXNrU3RhdGUuUEFVU0VEIHx8XG4gICAgICAgIC8vICAgICAgICB0aGlzLnN0YXRlXyA9PT0gSW50ZXJuYWxUYXNrU3RhdGUuUEFVU0lORyk7XG4gICAgICAgIGNvbnN0IHdhc1BhdXNlZCA9IHRoaXMuc3RhdGVfID09PSBJbnRlcm5hbFRhc2tTdGF0ZS5QQVVTRUQ7XG4gICAgICAgIHRoaXMuc3RhdGVfID0gc3RhdGU7XG4gICAgICAgIGlmICh3YXNQYXVzZWQpIHtcbiAgICAgICAgICB0aGlzLm5vdGlmeU9ic2VydmVyc18oKTtcbiAgICAgICAgICB0aGlzLnN0YXJ0XygpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBJbnRlcm5hbFRhc2tTdGF0ZS5QQVVTRUQ6XG4gICAgICAgIC8vIFRPRE8oYW5keXNvdG8pOlxuICAgICAgICAvLyBhc3NlcnQodGhpcy5zdGF0ZV8gPT09IEludGVybmFsVGFza1N0YXRlLlBBVVNJTkcpO1xuICAgICAgICB0aGlzLnN0YXRlXyA9IHN0YXRlO1xuICAgICAgICB0aGlzLm5vdGlmeU9ic2VydmVyc18oKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEludGVybmFsVGFza1N0YXRlLkNBTkNFTEVEOlxuICAgICAgICAvLyBUT0RPKGFuZHlzb3RvKTpcbiAgICAgICAgLy8gYXNzZXJ0KHRoaXMuc3RhdGVfID09PSBJbnRlcm5hbFRhc2tTdGF0ZS5QQVVTRUQgfHxcbiAgICAgICAgLy8gICAgICAgIHRoaXMuc3RhdGVfID09PSBJbnRlcm5hbFRhc2tTdGF0ZS5DQU5DRUxJTkcpO1xuICAgICAgICB0aGlzLmVycm9yXyA9IGVycm9ycy5jYW5jZWxlZCgpO1xuICAgICAgICB0aGlzLnN0YXRlXyA9IHN0YXRlO1xuICAgICAgICB0aGlzLm5vdGlmeU9ic2VydmVyc18oKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEludGVybmFsVGFza1N0YXRlLkVSUk9SOlxuICAgICAgICAvLyBUT0RPKGFuZHlzb3RvKTpcbiAgICAgICAgLy8gYXNzZXJ0KHRoaXMuc3RhdGVfID09PSBJbnRlcm5hbFRhc2tTdGF0ZS5SVU5OSU5HIHx8XG4gICAgICAgIC8vICAgICAgICB0aGlzLnN0YXRlXyA9PT0gSW50ZXJuYWxUYXNrU3RhdGUuUEFVU0lORyB8fFxuICAgICAgICAvLyAgICAgICAgdGhpcy5zdGF0ZV8gPT09IEludGVybmFsVGFza1N0YXRlLkNBTkNFTElORyk7XG4gICAgICAgIHRoaXMuc3RhdGVfID0gc3RhdGU7XG4gICAgICAgIHRoaXMubm90aWZ5T2JzZXJ2ZXJzXygpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgSW50ZXJuYWxUYXNrU3RhdGUuU1VDQ0VTUzpcbiAgICAgICAgLy8gVE9ETyhhbmR5c290byk6XG4gICAgICAgIC8vIGFzc2VydCh0aGlzLnN0YXRlXyA9PT0gSW50ZXJuYWxUYXNrU3RhdGUuUlVOTklORyB8fFxuICAgICAgICAvLyAgICAgICAgdGhpcy5zdGF0ZV8gPT09IEludGVybmFsVGFza1N0YXRlLlBBVVNJTkcgfHxcbiAgICAgICAgLy8gICAgICAgIHRoaXMuc3RhdGVfID09PSBJbnRlcm5hbFRhc2tTdGF0ZS5DQU5DRUxJTkcpO1xuICAgICAgICB0aGlzLnN0YXRlXyA9IHN0YXRlO1xuICAgICAgICB0aGlzLm5vdGlmeU9ic2VydmVyc18oKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjb21wbGV0ZVRyYW5zaXRpb25zXygpIHtcbiAgICBzd2l0Y2ggKHRoaXMuc3RhdGVfKSB7XG4gICAgICBjYXNlIEludGVybmFsVGFza1N0YXRlLlBBVVNJTkc6XG4gICAgICAgIHRoaXMudHJhbnNpdGlvbl8oSW50ZXJuYWxUYXNrU3RhdGUuUEFVU0VEKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEludGVybmFsVGFza1N0YXRlLkNBTkNFTElORzpcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uXyhJbnRlcm5hbFRhc2tTdGF0ZS5DQU5DRUxFRCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBJbnRlcm5hbFRhc2tTdGF0ZS5SVU5OSU5HOlxuICAgICAgICB0aGlzLnN0YXJ0XygpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIC8vIFRPRE8oYW5keXNvdG8pOiBhc3NlcnQoZmFsc2UpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBnZXQgc25hcHNob3QoKTogVXBsb2FkVGFza1NuYXBzaG90IHtcbiAgICBjb25zdCBleHRlcm5hbFN0YXRlID0gZmJzVGFza0VudW1zLnRhc2tTdGF0ZUZyb21JbnRlcm5hbFRhc2tTdGF0ZShcbiAgICAgIHRoaXMuc3RhdGVfXG4gICAgKTtcbiAgICByZXR1cm4gbmV3IFVwbG9hZFRhc2tTbmFwc2hvdChcbiAgICAgIHRoaXMudHJhbnNmZXJyZWRfLFxuICAgICAgdGhpcy5ibG9iXy5zaXplKCksXG4gICAgICBleHRlcm5hbFN0YXRlLFxuICAgICAgdGhpcy5tZXRhZGF0YV8sXG4gICAgICB0aGlzLFxuICAgICAgdGhpcy5yZWZfXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgY2FsbGJhY2sgZm9yIGFuIGV2ZW50LlxuICAgKiBAcGFyYW0gdHlwZSBUaGUgdHlwZSBvZiBldmVudCB0byBsaXN0ZW4gZm9yLlxuICAgKi9cbiAgb24oXG4gICAgdHlwZTogVGFza0V2ZW50LFxuICAgIG5leHRPck9ic2VydmVyID0gdW5kZWZpbmVkLFxuICAgIGVycm9yID0gdW5kZWZpbmVkLFxuICAgIGNvbXBsZXRlZCA9IHVuZGVmaW5lZFxuICApOiBVbnN1YnNjcmliZSB8IFN1YnNjcmliZTxVcGxvYWRUYXNrU25hcHNob3Q+IHtcbiAgICBmdW5jdGlvbiB0eXBlVmFsaWRhdG9yKF9wOiBhbnkpIHtcbiAgICAgIGlmICh0eXBlICE9PSBUYXNrRXZlbnQuU1RBVEVfQ0hBTkdFRCkge1xuICAgICAgICB0aHJvdyBgRXhwZWN0ZWQgb25lIG9mIHRoZSBldmVudCB0eXBlczogWyR7VGFza0V2ZW50LlNUQVRFX0NIQU5HRUR9XS5gO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBuZXh0T3JPYnNlcnZlck1lc3NhZ2UgPVxuICAgICAgJ0V4cGVjdGVkIGEgZnVuY3Rpb24gb3IgYW4gT2JqZWN0IHdpdGggb25lIG9mICcgK1xuICAgICAgJ2BuZXh0YCwgYGVycm9yYCwgYGNvbXBsZXRlYCBwcm9wZXJ0aWVzLic7XG4gICAgY29uc3QgbmV4dFZhbGlkYXRvciA9IGZic0FyZ3MubnVsbEZ1bmN0aW9uU3BlYyh0cnVlKS52YWxpZGF0b3I7XG4gICAgY29uc3Qgb2JzZXJ2ZXJWYWxpZGF0b3IgPSBmYnNBcmdzLmxvb3NlT2JqZWN0U3BlYyhudWxsLCB0cnVlKS52YWxpZGF0b3I7XG5cbiAgICBmdW5jdGlvbiBuZXh0T3JPYnNlcnZlclZhbGlkYXRvcihwOiBhbnkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG5leHRWYWxpZGF0b3IocCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICB0cnkge1xuICAgICAgICBvYnNlcnZlclZhbGlkYXRvcihwKTtcbiAgICAgICAgY29uc3QgYW55RGVmaW5lZCA9XG4gICAgICAgICAgdHlwZVV0aWxzLmlzSnVzdERlZihwWyduZXh0J10pIHx8XG4gICAgICAgICAgdHlwZVV0aWxzLmlzSnVzdERlZihwWydlcnJvciddKSB8fFxuICAgICAgICAgIHR5cGVVdGlscy5pc0p1c3REZWYocFsnY29tcGxldGUnXSk7XG4gICAgICAgIGlmICghYW55RGVmaW5lZCkge1xuICAgICAgICAgIHRocm93ICcnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgbmV4dE9yT2JzZXJ2ZXJNZXNzYWdlO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzcGVjcyA9IFtcbiAgICAgIGZic0FyZ3Muc3RyaW5nU3BlYyh0eXBlVmFsaWRhdG9yKSxcbiAgICAgIGZic0FyZ3MubG9vc2VPYmplY3RTcGVjKG5leHRPck9ic2VydmVyVmFsaWRhdG9yLCB0cnVlKSxcbiAgICAgIGZic0FyZ3MubnVsbEZ1bmN0aW9uU3BlYyh0cnVlKSxcbiAgICAgIGZic0FyZ3MubnVsbEZ1bmN0aW9uU3BlYyh0cnVlKVxuICAgIF07XG4gICAgZmJzQXJncy52YWxpZGF0ZSgnb24nLCBzcGVjcywgYXJndW1lbnRzKTtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgIGZ1bmN0aW9uIG1ha2VCaW5kZXIoXG4gICAgICBzcGVjczogQXJnU3BlY1tdIHwgbnVsbFxuICAgICk6IFN1YnNjcmliZTxVcGxvYWRUYXNrU25hcHNob3Q+IHtcbiAgICAgIGZ1bmN0aW9uIGJpbmRlcihcbiAgICAgICAgbmV4dE9yT2JzZXJ2ZXI6XG4gICAgICAgICAgfCBOZXh0Rm48VXBsb2FkVGFza1NuYXBzaG90PlxuICAgICAgICAgIHwgeyBbbmFtZTogc3RyaW5nXTogc3RyaW5nIHwgbnVsbCB9XG4gICAgICAgICAgfCBudWxsLFxuICAgICAgICBlcnJvcj86IEVycm9yRm4gfCBudWxsLFxuICAgICAgICBvcHRfY29tcGxldGU/OiBDb21wbGV0ZUZuIHwgbnVsbFxuICAgICAgKSB7XG4gICAgICAgIGlmIChzcGVjcyAhPT0gbnVsbCkge1xuICAgICAgICAgIGZic0FyZ3MudmFsaWRhdGUoJ29uJywgc3BlY3MsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgT2JzZXJ2ZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xuICAgICAgICBzZWxmLmFkZE9ic2VydmVyXyhvYnNlcnZlcik7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgc2VsZi5yZW1vdmVPYnNlcnZlcl8ob2JzZXJ2ZXIpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJpbmRlcjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBiaW5kZXJOZXh0T3JPYnNlcnZlclZhbGlkYXRvcihwOiBhbnkpIHtcbiAgICAgIGlmIChwID09PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5leHRPck9ic2VydmVyTWVzc2FnZTtcbiAgICAgIH1cbiAgICAgIG5leHRPck9ic2VydmVyVmFsaWRhdG9yKHApO1xuICAgIH1cbiAgICBjb25zdCBiaW5kZXJTcGVjcyA9IFtcbiAgICAgIGZic0FyZ3MubG9vc2VPYmplY3RTcGVjKGJpbmRlck5leHRPck9ic2VydmVyVmFsaWRhdG9yKSxcbiAgICAgIGZic0FyZ3MubnVsbEZ1bmN0aW9uU3BlYyh0cnVlKSxcbiAgICAgIGZic0FyZ3MubnVsbEZ1bmN0aW9uU3BlYyh0cnVlKVxuICAgIF07XG4gICAgY29uc3QgdHlwZU9ubHkgPSAhKFxuICAgICAgdHlwZVV0aWxzLmlzSnVzdERlZihuZXh0T3JPYnNlcnZlcikgfHxcbiAgICAgIHR5cGVVdGlscy5pc0p1c3REZWYoZXJyb3IpIHx8XG4gICAgICB0eXBlVXRpbHMuaXNKdXN0RGVmKGNvbXBsZXRlZClcbiAgICApO1xuICAgIGlmICh0eXBlT25seSkge1xuICAgICAgcmV0dXJuIG1ha2VCaW5kZXIoYmluZGVyU3BlY3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbWFrZUJpbmRlcihudWxsKShuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgb2JqZWN0IGJlaGF2ZXMgbGlrZSBhIFByb21pc2UsIGFuZCByZXNvbHZlcyB3aXRoIGl0cyBzbmFwc2hvdCBkYXRhXG4gICAqIHdoZW4gdGhlIHVwbG9hZCBjb21wbGV0ZXMuXG4gICAqIEBwYXJhbSBvbkZ1bGZpbGxlZCBUaGUgZnVsZmlsbG1lbnQgY2FsbGJhY2suIFByb21pc2UgY2hhaW5pbmcgd29ya3MgYXMgbm9ybWFsLlxuICAgKiBAcGFyYW0gb25SZWplY3RlZCBUaGUgcmVqZWN0aW9uIGNhbGxiYWNrLlxuICAgKi9cbiAgdGhlbjxVPihcbiAgICBvbkZ1bGZpbGxlZD86ICgodmFsdWU6IFVwbG9hZFRhc2tTbmFwc2hvdCkgPT4gVSB8IFByb21pc2U8VT4pIHwgbnVsbCxcbiAgICBvblJlamVjdGVkPzogKChlcnJvcjogYW55KSA9PiBVIHwgUHJvbWlzZTxVPikgfCBudWxsXG4gICk6IFByb21pc2U8VT4ge1xuICAgIC8vIFRoZXNlIGNhc3RzIGFyZSBuZWVkZWQgc28gdGhhdCBUeXBlU2NyaXB0IGNhbiBpbmZlciB0aGUgdHlwZXMgb2YgdGhlXG4gICAgLy8gcmVzdWx0aW5nIFByb21pc2UuXG4gICAgcmV0dXJuIHRoaXMucHJvbWlzZV8udGhlbjxVPihcbiAgICAgIG9uRnVsZmlsbGVkIGFzICh2YWx1ZTogVXBsb2FkVGFza1NuYXBzaG90KSA9PiBVIHwgUHJvbWlzZTxVPixcbiAgICAgIG9uUmVqZWN0ZWQgYXMgKChlcnJvcjogYW55KSA9PiBQcm9taXNlPG5ldmVyPikgfCBudWxsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFcXVpdmFsZW50IHRvIGNhbGxpbmcgYHRoZW4obnVsbCwgb25SZWplY3RlZClgLlxuICAgKi9cbiAgY2F0Y2g8VD4ob25SZWplY3RlZDogKHAxOiBFcnJvcikgPT4gVCB8IFByb21pc2U8VD4pOiBQcm9taXNlPFQ+IHtcbiAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0ZWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgdGhlIGdpdmVuIG9ic2VydmVyLlxuICAgKi9cbiAgcHJpdmF0ZSBhZGRPYnNlcnZlcl8ob2JzZXJ2ZXI6IE9ic2VydmVyPFVwbG9hZFRhc2tTbmFwc2hvdD4pIHtcbiAgICB0aGlzLm9ic2VydmVyc18ucHVzaChvYnNlcnZlcik7XG4gICAgdGhpcy5ub3RpZnlPYnNlcnZlcl8ob2JzZXJ2ZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIGdpdmVuIG9ic2VydmVyLlxuICAgKi9cbiAgcHJpdmF0ZSByZW1vdmVPYnNlcnZlcl8ob2JzZXJ2ZXI6IE9ic2VydmVyPFVwbG9hZFRhc2tTbmFwc2hvdD4pIHtcbiAgICBmYnNBcnJheS5yZW1vdmUodGhpcy5vYnNlcnZlcnNfLCBvYnNlcnZlcik7XG4gIH1cblxuICBwcml2YXRlIG5vdGlmeU9ic2VydmVyc18oKSB7XG4gICAgdGhpcy5maW5pc2hQcm9taXNlXygpO1xuICAgIGNvbnN0IG9ic2VydmVycyA9IGZic0FycmF5LmNsb25lKHRoaXMub2JzZXJ2ZXJzXyk7XG4gICAgb2JzZXJ2ZXJzLmZvckVhY2gob2JzZXJ2ZXIgPT4ge1xuICAgICAgdGhpcy5ub3RpZnlPYnNlcnZlcl8ob2JzZXJ2ZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBmaW5pc2hQcm9taXNlXygpIHtcbiAgICBpZiAodGhpcy5yZXNvbHZlXyAhPT0gbnVsbCkge1xuICAgICAgbGV0IHRyaWdnZXJlZCA9IHRydWU7XG4gICAgICBzd2l0Y2ggKGZic1Rhc2tFbnVtcy50YXNrU3RhdGVGcm9tSW50ZXJuYWxUYXNrU3RhdGUodGhpcy5zdGF0ZV8pKSB7XG4gICAgICAgIGNhc2UgVGFza1N0YXRlLlNVQ0NFU1M6XG4gICAgICAgICAgZmJzQXN5bmModGhpcy5yZXNvbHZlXy5iaW5kKG51bGwsIHRoaXMuc25hcHNob3QpKSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFRhc2tTdGF0ZS5DQU5DRUxFRDpcbiAgICAgICAgY2FzZSBUYXNrU3RhdGUuRVJST1I6XG4gICAgICAgICAgY29uc3QgdG9DYWxsID0gdGhpcy5yZWplY3RfIGFzICgocDE6IEVycm9yKSA9PiB2b2lkKTtcbiAgICAgICAgICBmYnNBc3luYyh0b0NhbGwuYmluZChudWxsLCB0aGlzLmVycm9yXyBhcyBFcnJvcikpKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdHJpZ2dlcmVkID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAodHJpZ2dlcmVkKSB7XG4gICAgICAgIHRoaXMucmVzb2x2ZV8gPSBudWxsO1xuICAgICAgICB0aGlzLnJlamVjdF8gPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgbm90aWZ5T2JzZXJ2ZXJfKG9ic2VydmVyOiBPYnNlcnZlcjxVcGxvYWRUYXNrU25hcHNob3Q+KSB7XG4gICAgY29uc3QgZXh0ZXJuYWxTdGF0ZSA9IGZic1Rhc2tFbnVtcy50YXNrU3RhdGVGcm9tSW50ZXJuYWxUYXNrU3RhdGUoXG4gICAgICB0aGlzLnN0YXRlX1xuICAgICk7XG4gICAgc3dpdGNoIChleHRlcm5hbFN0YXRlKSB7XG4gICAgICBjYXNlIFRhc2tTdGF0ZS5SVU5OSU5HOlxuICAgICAgY2FzZSBUYXNrU3RhdGUuUEFVU0VEOlxuICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCAhPT0gbnVsbCkge1xuICAgICAgICAgIGZic0FzeW5jKG9ic2VydmVyLm5leHQuYmluZChvYnNlcnZlciwgdGhpcy5zbmFwc2hvdCkpKCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFRhc2tTdGF0ZS5TVUNDRVNTOlxuICAgICAgICBpZiAob2JzZXJ2ZXIuY29tcGxldGUgIT09IG51bGwpIHtcbiAgICAgICAgICBmYnNBc3luYyhvYnNlcnZlci5jb21wbGV0ZS5iaW5kKG9ic2VydmVyKSkoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgVGFza1N0YXRlLkNBTkNFTEVEOlxuICAgICAgY2FzZSBUYXNrU3RhdGUuRVJST1I6XG4gICAgICAgIGlmIChvYnNlcnZlci5lcnJvciAhPT0gbnVsbCkge1xuICAgICAgICAgIGZic0FzeW5jKG9ic2VydmVyLmVycm9yLmJpbmQob2JzZXJ2ZXIsIHRoaXMuZXJyb3JfIGFzIEVycm9yKSkoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIC8vIFRPRE8oYW5keXNvdG8pOiBhc3NlcnQoZmFsc2UpO1xuICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IgIT09IG51bGwpIHtcbiAgICAgICAgICBmYnNBc3luYyhvYnNlcnZlci5lcnJvci5iaW5kKG9ic2VydmVyLCB0aGlzLmVycm9yXyBhcyBFcnJvcikpKCk7XG4gICAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzdW1lcyBhIHBhdXNlZCB0YXNrLiBIYXMgbm8gZWZmZWN0IG9uIGEgY3VycmVudGx5IHJ1bm5pbmcgb3IgZmFpbGVkIHRhc2suXG4gICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgb3BlcmF0aW9uIHRvb2sgZWZmZWN0LCBmYWxzZSBpZiBpZ25vcmVkLlxuICAgKi9cbiAgcmVzdW1lKCk6IGJvb2xlYW4ge1xuICAgIGZic0FyZ3MudmFsaWRhdGUoJ3Jlc3VtZScsIFtdLCBhcmd1bWVudHMpO1xuICAgIGNvbnN0IHZhbGlkID1cbiAgICAgIHRoaXMuc3RhdGVfID09PSBJbnRlcm5hbFRhc2tTdGF0ZS5QQVVTRUQgfHxcbiAgICAgIHRoaXMuc3RhdGVfID09PSBJbnRlcm5hbFRhc2tTdGF0ZS5QQVVTSU5HO1xuICAgIGlmICh2YWxpZCkge1xuICAgICAgdGhpcy50cmFuc2l0aW9uXyhJbnRlcm5hbFRhc2tTdGF0ZS5SVU5OSU5HKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbGlkO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhdXNlcyBhIGN1cnJlbnRseSBydW5uaW5nIHRhc2suIEhhcyBubyBlZmZlY3Qgb24gYSBwYXVzZWQgb3IgZmFpbGVkIHRhc2suXG4gICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgb3BlcmF0aW9uIHRvb2sgZWZmZWN0LCBmYWxzZSBpZiBpZ25vcmVkLlxuICAgKi9cbiAgcGF1c2UoKTogYm9vbGVhbiB7XG4gICAgZmJzQXJncy52YWxpZGF0ZSgncGF1c2UnLCBbXSwgYXJndW1lbnRzKTtcbiAgICBjb25zdCB2YWxpZCA9IHRoaXMuc3RhdGVfID09PSBJbnRlcm5hbFRhc2tTdGF0ZS5SVU5OSU5HO1xuICAgIGlmICh2YWxpZCkge1xuICAgICAgdGhpcy50cmFuc2l0aW9uXyhJbnRlcm5hbFRhc2tTdGF0ZS5QQVVTSU5HKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbGlkO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbmNlbHMgYSBjdXJyZW50bHkgcnVubmluZyBvciBwYXVzZWQgdGFzay4gSGFzIG5vIGVmZmVjdCBvbiBhIGNvbXBsZXRlIG9yXG4gICAqIGZhaWxlZCB0YXNrLlxuICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIG9wZXJhdGlvbiB0b29rIGVmZmVjdCwgZmFsc2UgaWYgaWdub3JlZC5cbiAgICovXG4gIGNhbmNlbCgpOiBib29sZWFuIHtcbiAgICBmYnNBcmdzLnZhbGlkYXRlKCdjYW5jZWwnLCBbXSwgYXJndW1lbnRzKTtcbiAgICBjb25zdCB2YWxpZCA9XG4gICAgICB0aGlzLnN0YXRlXyA9PT0gSW50ZXJuYWxUYXNrU3RhdGUuUlVOTklORyB8fFxuICAgICAgdGhpcy5zdGF0ZV8gPT09IEludGVybmFsVGFza1N0YXRlLlBBVVNJTkc7XG4gICAgaWYgKHZhbGlkKSB7XG4gICAgICB0aGlzLnRyYW5zaXRpb25fKEludGVybmFsVGFza1N0YXRlLkNBTkNFTElORyk7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IFRhc2tTdGF0ZSB9IGZyb20gJy4vaW1wbGVtZW50YXRpb24vdGFza2VudW1zJztcbmltcG9ydCAqIGFzIHR5cGUgZnJvbSAnLi9pbXBsZW1lbnRhdGlvbi90eXBlJztcbmltcG9ydCB7IE1ldGFkYXRhIH0gZnJvbSAnLi9tZXRhZGF0YSc7XG5pbXBvcnQgeyBSZWZlcmVuY2UgfSBmcm9tICcuL3JlZmVyZW5jZSc7XG5pbXBvcnQgeyBVcGxvYWRUYXNrIH0gZnJvbSAnLi90YXNrJztcblxuZXhwb3J0IGNsYXNzIFVwbG9hZFRhc2tTbmFwc2hvdCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHJlYWRvbmx5IGJ5dGVzVHJhbnNmZXJyZWQ6IG51bWJlcixcbiAgICByZWFkb25seSB0b3RhbEJ5dGVzOiBudW1iZXIsXG4gICAgcmVhZG9ubHkgc3RhdGU6IFRhc2tTdGF0ZSxcbiAgICByZWFkb25seSBtZXRhZGF0YTogTWV0YWRhdGEgfCBudWxsLFxuICAgIHJlYWRvbmx5IHRhc2s6IFVwbG9hZFRhc2ssXG4gICAgcmVhZG9ubHkgcmVmOiBSZWZlcmVuY2VcbiAgKSB7fVxuXG4gIGdldCBkb3dubG9hZFVSTCgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAodGhpcy5tZXRhZGF0YSAhPT0gbnVsbCkge1xuICAgICAgbGV0IHVybHMgPSB0aGlzLm1ldGFkYXRhWydkb3dubG9hZFVSTHMnXTtcbiAgICAgIGlmICh1cmxzICE9IG51bGwgJiYgdXJsc1swXSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiB1cmxzWzBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9zcmMvYXNzZXJ0JztcbmV4cG9ydCAqIGZyb20gJy4vc3JjL2NyeXB0JztcbmV4cG9ydCAqIGZyb20gJy4vc3JjL2NvbnN0YW50cyc7XG5leHBvcnQgKiBmcm9tICcuL3NyYy9kZWVwQ29weSc7XG5leHBvcnQgKiBmcm9tICcuL3NyYy9kZWZlcnJlZCc7XG5leHBvcnQgKiBmcm9tICcuL3NyYy9lbnZpcm9ubWVudCc7XG5leHBvcnQgKiBmcm9tICcuL3NyYy9lcnJvcnMnO1xuZXhwb3J0ICogZnJvbSAnLi9zcmMvanNvbic7XG5leHBvcnQgKiBmcm9tICcuL3NyYy9qd3QnO1xuZXhwb3J0ICogZnJvbSAnLi9zcmMvb2JqJztcbmV4cG9ydCAqIGZyb20gJy4vc3JjL3F1ZXJ5JztcbmV4cG9ydCAqIGZyb20gJy4vc3JjL3NoYTEnO1xuZXhwb3J0ICogZnJvbSAnLi9zcmMvc3Vic2NyaWJlJztcbmV4cG9ydCAqIGZyb20gJy4vc3JjL3ZhbGlkYXRpb24nO1xuZXhwb3J0ICogZnJvbSAnLi9zcmMvdXRmOCc7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDT05TVEFOVFMgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbi8qKlxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm92aWRlZCBhc3NlcnRpb24gaXMgZmFsc3lcbiAqIEBwYXJhbSB7Kn0gYXNzZXJ0aW9uIFRoZSBhc3NlcnRpb24gdG8gYmUgdGVzdGVkIGZvciBmYWxzaW5lc3NcbiAqIEBwYXJhbSB7IXN0cmluZ30gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBkaXNwbGF5IGlmIHRoZSBjaGVjayBmYWlsc1xuICovXG5leHBvcnQgY29uc3QgYXNzZXJ0ID0gZnVuY3Rpb24oYXNzZXJ0aW9uLCBtZXNzYWdlKSB7XG4gIGlmICghYXNzZXJ0aW9uKSB7XG4gICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IobWVzc2FnZSk7XG4gIH1cbn07XG5cbi8qKlxuICogUmV0dXJucyBhbiBFcnJvciBvYmplY3Qgc3VpdGFibGUgZm9yIHRocm93aW5nLlxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VcbiAqIEByZXR1cm4geyFFcnJvcn1cbiAqL1xuZXhwb3J0IGNvbnN0IGFzc2VydGlvbkVycm9yID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICByZXR1cm4gbmV3IEVycm9yKFxuICAgICdGaXJlYmFzZSBEYXRhYmFzZSAoJyArXG4gICAgICBDT05TVEFOVFMuU0RLX1ZFUlNJT04gK1xuICAgICAgJykgSU5URVJOQUwgQVNTRVJUIEZBSUxFRDogJyArXG4gICAgICBtZXNzYWdlXG4gICk7XG59O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IEZpcmViYXNlIGNvbnN0YW50cy4gIFNvbWUgb2YgdGhlc2UgKEBkZWZpbmVzKSBjYW4gYmUgb3ZlcnJpZGRlbiBhdCBjb21waWxlLXRpbWUuXG4gKi9cblxuZXhwb3J0IGNvbnN0IENPTlNUQU5UUyA9IHtcbiAgLyoqXG4gICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgY2xpZW50IE5vZGUuanMgU0RLLlxuICAgKi9cbiAgTk9ERV9DTElFTlQ6IGZhbHNlLFxuICAvKipcbiAgICogQGRlZmluZSB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIHRoZSBBZG1pbiBOb2RlLmpzIFNESy5cbiAgICovXG4gIE5PREVfQURNSU46IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBGaXJlYmFzZSBTREsgVmVyc2lvblxuICAgKi9cbiAgU0RLX1ZFUlNJT046ICcke0pTQ09SRV9WRVJTSU9OfSdcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5jb25zdCBzdHJpbmdUb0J5dGVBcnJheSA9IGZ1bmN0aW9uKHN0cikge1xuICB2YXIgb3V0cHV0ID0gW10sXG4gICAgcCA9IDA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICB3aGlsZSAoYyA+IDI1NSkge1xuICAgICAgb3V0cHV0W3ArK10gPSBjICYgMjU1O1xuICAgICAgYyA+Pj0gODtcbiAgICB9XG4gICAgb3V0cHV0W3ArK10gPSBjO1xuICB9XG4gIHJldHVybiBvdXRwdXQ7XG59O1xuXG4vKipcbiAqIFR1cm5zIGFuIGFycmF5IG9mIG51bWJlcnMgaW50byB0aGUgc3RyaW5nIGdpdmVuIGJ5IHRoZSBjb25jYXRlbmF0aW9uIG9mIHRoZVxuICogY2hhcmFjdGVycyB0byB3aGljaCB0aGUgbnVtYmVycyBjb3JyZXNwb25kLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBieXRlcyBBcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBjaGFyYWN0ZXJzLlxuICogQHJldHVybiB7c3RyaW5nfSBTdHJpbmdpZmljYXRpb24gb2YgdGhlIGFycmF5LlxuICovXG5jb25zdCBieXRlQXJyYXlUb1N0cmluZyA9IGZ1bmN0aW9uKGJ5dGVzKSB7XG4gIHZhciBDSFVOS19TSVpFID0gODE5MjtcblxuICAvLyBTcGVjaWFsLWNhc2UgdGhlIHNpbXBsZSBjYXNlIGZvciBzcGVlZCdzIHNha2UuXG4gIGlmIChieXRlcy5sZW5ndGggPCBDSFVOS19TSVpFKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgYnl0ZXMpO1xuICB9XG5cbiAgLy8gVGhlIHJlbWFpbmluZyBsb2dpYyBzcGxpdHMgY29udmVyc2lvbiBieSBjaHVua3Mgc2luY2VcbiAgLy8gRnVuY3Rpb24jYXBwbHkoKSBoYXMgYSBtYXhpbXVtIHBhcmFtZXRlciBjb3VudC5cbiAgLy8gU2VlIGRpc2N1c3Npb246IGh0dHA6Ly9nb28uZ2wvTHJXbVo5XG5cbiAgdmFyIHN0ciA9ICcnO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSBDSFVOS19TSVpFKSB7XG4gICAgdmFyIGNodW5rID0gYnl0ZXMuc2xpY2UoaSwgaSArIENIVU5LX1NJWkUpO1xuICAgIHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGNodW5rKTtcbiAgfVxuICByZXR1cm4gc3RyO1xufTtcblxuLy8gU3RhdGljIGxvb2t1cCBtYXBzLCBsYXppbHkgcG9wdWxhdGVkIGJ5IGluaXRfKClcbmV4cG9ydCBjb25zdCBiYXNlNjQgPSB7XG4gIC8qKlxuICAgKiBNYXBzIGJ5dGVzIHRvIGNoYXJhY3RlcnMuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBieXRlVG9DaGFyTWFwXzogbnVsbCxcblxuICAvKipcbiAgICogTWFwcyBjaGFyYWN0ZXJzIHRvIGJ5dGVzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2hhclRvQnl0ZU1hcF86IG51bGwsXG5cbiAgLyoqXG4gICAqIE1hcHMgYnl0ZXMgdG8gd2Vic2FmZSBjaGFyYWN0ZXJzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYnl0ZVRvQ2hhck1hcFdlYlNhZmVfOiBudWxsLFxuXG4gIC8qKlxuICAgKiBNYXBzIHdlYnNhZmUgY2hhcmFjdGVycyB0byBieXRlcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNoYXJUb0J5dGVNYXBXZWJTYWZlXzogbnVsbCxcblxuICAvKipcbiAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQsIHNoYXJlZCBiZXR3ZWVuXG4gICAqIEVOQ09ERURfVkFMUyBhbmQgRU5DT0RFRF9WQUxTX1dFQlNBRkVcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIEVOQ09ERURfVkFMU19CQVNFOlxuICAgICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWicgKyAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonICsgJzAxMjM0NTY3ODknLFxuXG4gIC8qKlxuICAgKiBPdXIgZGVmYXVsdCBhbHBoYWJldC4gVmFsdWUgNjQgKD0pIGlzIHNwZWNpYWw7IGl0IG1lYW5zIFwibm90aGluZy5cIlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IEVOQ09ERURfVkFMUygpIHtcbiAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICcrLz0nO1xuICB9LFxuXG4gIC8qKlxuICAgKiBPdXIgd2Vic2FmZSBhbHBoYWJldC5cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBFTkNPREVEX1ZBTFNfV0VCU0FGRSgpIHtcbiAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICctXy4nO1xuICB9LFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoaXMgYnJvd3NlciBzdXBwb3J0cyB0aGUgYXRvYiBhbmQgYnRvYSBmdW5jdGlvbnMuIFRoaXMgZXh0ZW5zaW9uXG4gICAqIHN0YXJ0ZWQgYXQgTW96aWxsYSBidXQgaXMgbm93IGltcGxlbWVudGVkIGJ5IG1hbnkgYnJvd3NlcnMuIFdlIHVzZSB0aGVcbiAgICogQVNTVU1FXyogdmFyaWFibGVzIHRvIGF2b2lkIHB1bGxpbmcgaW4gdGhlIGZ1bGwgdXNlcmFnZW50IGRldGVjdGlvbiBsaWJyYXJ5XG4gICAqIGJ1dCBzdGlsbCBhbGxvd2luZyB0aGUgc3RhbmRhcmQgcGVyLWJyb3dzZXIgY29tcGlsYXRpb25zLlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIEhBU19OQVRJVkVfU1VQUE9SVDogdHlwZW9mIGF0b2IgPT09ICdmdW5jdGlvbicsXG5cbiAgLyoqXG4gICAqIEJhc2U2NC1lbmNvZGUgYW4gYXJyYXkgb2YgYnl0ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPnxVaW50OEFycmF5fSBpbnB1dCBBbiBhcnJheSBvZiBieXRlcyAobnVtYmVycyB3aXRoXG4gICAqICAgICB2YWx1ZSBpbiBbMCwgMjU1XSkgdG8gZW5jb2RlLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfd2ViU2FmZSBCb29sZWFuIGluZGljYXRpbmcgd2Ugc2hvdWxkIHVzZSB0aGVcbiAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXG4gICAqL1xuICBlbmNvZGVCeXRlQXJyYXkoaW5wdXQsIG9wdF93ZWJTYWZlPykge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICAgIHRocm93IEVycm9yKCdlbmNvZGVCeXRlQXJyYXkgdGFrZXMgYW4gYXJyYXkgYXMgYSBwYXJhbWV0ZXInKTtcbiAgICB9XG5cbiAgICB0aGlzLmluaXRfKCk7XG5cbiAgICB2YXIgYnl0ZVRvQ2hhck1hcCA9IG9wdF93ZWJTYWZlXG4gICAgICA/IHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfXG4gICAgICA6IHRoaXMuYnl0ZVRvQ2hhck1hcF87XG5cbiAgICB2YXIgb3V0cHV0ID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICB2YXIgYnl0ZTEgPSBpbnB1dFtpXTtcbiAgICAgIHZhciBoYXZlQnl0ZTIgPSBpICsgMSA8IGlucHV0Lmxlbmd0aDtcbiAgICAgIHZhciBieXRlMiA9IGhhdmVCeXRlMiA/IGlucHV0W2kgKyAxXSA6IDA7XG4gICAgICB2YXIgaGF2ZUJ5dGUzID0gaSArIDIgPCBpbnB1dC5sZW5ndGg7XG4gICAgICB2YXIgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBpbnB1dFtpICsgMl0gOiAwO1xuXG4gICAgICB2YXIgb3V0Qnl0ZTEgPSBieXRlMSA+PiAyO1xuICAgICAgdmFyIG91dEJ5dGUyID0gKChieXRlMSAmIDB4MDMpIDw8IDQpIHwgKGJ5dGUyID4+IDQpO1xuICAgICAgdmFyIG91dEJ5dGUzID0gKChieXRlMiAmIDB4MGYpIDw8IDIpIHwgKGJ5dGUzID4+IDYpO1xuICAgICAgdmFyIG91dEJ5dGU0ID0gYnl0ZTMgJiAweDNmO1xuXG4gICAgICBpZiAoIWhhdmVCeXRlMykge1xuICAgICAgICBvdXRCeXRlNCA9IDY0O1xuXG4gICAgICAgIGlmICghaGF2ZUJ5dGUyKSB7XG4gICAgICAgICAgb3V0Qnl0ZTMgPSA2NDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBvdXRwdXQucHVzaChcbiAgICAgICAgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMV0sXG4gICAgICAgIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTJdLFxuICAgICAgICBieXRlVG9DaGFyTWFwW291dEJ5dGUzXSxcbiAgICAgICAgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlNF1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dC5qb2luKCcnKTtcbiAgfSxcblxuICAvKipcbiAgICogQmFzZTY0LWVuY29kZSBhIHN0cmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlucHV0IEEgc3RyaW5nIHRvIGVuY29kZS5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3dlYlNhZmUgSWYgdHJ1ZSwgd2Ugc2hvdWxkIHVzZSB0aGVcbiAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXG4gICAqL1xuICBlbmNvZGVTdHJpbmcoaW5wdXQsIG9wdF93ZWJTYWZlKSB7XG4gICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcbiAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXG4gICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICFvcHRfd2ViU2FmZSkge1xuICAgICAgcmV0dXJuIGJ0b2EoaW5wdXQpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5lbmNvZGVCeXRlQXJyYXkoc3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQpLCBvcHRfd2ViU2FmZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpbnB1dCB0byBkZWNvZGUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF93ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGVcbiAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXG4gICAqL1xuICBkZWNvZGVTdHJpbmcoaW5wdXQsIG9wdF93ZWJTYWZlKSB7XG4gICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcbiAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXG4gICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICFvcHRfd2ViU2FmZSkge1xuICAgICAgcmV0dXJuIGF0b2IoaW5wdXQpO1xuICAgIH1cbiAgICByZXR1cm4gYnl0ZUFycmF5VG9TdHJpbmcodGhpcy5kZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgb3B0X3dlYlNhZmUpKTtcbiAgfSxcblxuICAvKipcbiAgICogQmFzZTY0LWRlY29kZSBhIHN0cmluZy5cbiAgICpcbiAgICogSW4gYmFzZS02NCBkZWNvZGluZywgZ3JvdXBzIG9mIGZvdXIgY2hhcmFjdGVycyBhcmUgY29udmVydGVkIGludG8gdGhyZWVcbiAgICogYnl0ZXMuICBJZiB0aGUgZW5jb2RlciBkaWQgbm90IGFwcGx5IHBhZGRpbmcsIHRoZSBpbnB1dCBsZW5ndGggbWF5IG5vdFxuICAgKiBiZSBhIG11bHRpcGxlIG9mIDQuXG4gICAqXG4gICAqIEluIHRoaXMgY2FzZSwgdGhlIGxhc3QgZ3JvdXAgd2lsbCBoYXZlIGZld2VyIHRoYW4gNCBjaGFyYWN0ZXJzLCBhbmRcbiAgICogcGFkZGluZyB3aWxsIGJlIGluZmVycmVkLiAgSWYgdGhlIGdyb3VwIGhhcyBvbmUgb3IgdHdvIGNoYXJhY3RlcnMsIGl0IGRlY29kZXNcbiAgICogdG8gb25lIGJ5dGUuICBJZiB0aGUgZ3JvdXAgaGFzIHRocmVlIGNoYXJhY3RlcnMsIGl0IGRlY29kZXMgdG8gdHdvIGJ5dGVzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaW5wdXQgSW5wdXQgdG8gZGVjb2RlLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlIHdlYi1zYWZlIGFscGhhYmV0LlxuICAgKiBAcmV0dXJuIHshQXJyYXk8bnVtYmVyPn0gYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxuICAgKi9cbiAgZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIG9wdF93ZWJTYWZlKSB7XG4gICAgdGhpcy5pbml0XygpO1xuXG4gICAgdmFyIGNoYXJUb0J5dGVNYXAgPSBvcHRfd2ViU2FmZVxuICAgICAgPyB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1xuICAgICAgOiB0aGlzLmNoYXJUb0J5dGVNYXBfO1xuXG4gICAgdmFyIG91dHB1dCA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7ICkge1xuICAgICAgdmFyIGJ5dGUxID0gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSsrKV07XG5cbiAgICAgIHZhciBoYXZlQnl0ZTIgPSBpIDwgaW5wdXQubGVuZ3RoO1xuICAgICAgdmFyIGJ5dGUyID0gaGF2ZUJ5dGUyID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogMDtcbiAgICAgICsraTtcblxuICAgICAgdmFyIGhhdmVCeXRlMyA9IGkgPCBpbnB1dC5sZW5ndGg7XG4gICAgICB2YXIgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcbiAgICAgICsraTtcblxuICAgICAgdmFyIGhhdmVCeXRlNCA9IGkgPCBpbnB1dC5sZW5ndGg7XG4gICAgICB2YXIgYnl0ZTQgPSBoYXZlQnl0ZTQgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcbiAgICAgICsraTtcblxuICAgICAgaWYgKGJ5dGUxID09IG51bGwgfHwgYnl0ZTIgPT0gbnVsbCB8fCBieXRlMyA9PSBudWxsIHx8IGJ5dGU0ID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoKTtcbiAgICAgIH1cblxuICAgICAgdmFyIG91dEJ5dGUxID0gKGJ5dGUxIDw8IDIpIHwgKGJ5dGUyID4+IDQpO1xuICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTEpO1xuXG4gICAgICBpZiAoYnl0ZTMgIT0gNjQpIHtcbiAgICAgICAgdmFyIG91dEJ5dGUyID0gKChieXRlMiA8PCA0KSAmIDB4ZjApIHwgKGJ5dGUzID4+IDIpO1xuICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMik7XG5cbiAgICAgICAgaWYgKGJ5dGU0ICE9IDY0KSB7XG4gICAgICAgICAgdmFyIG91dEJ5dGUzID0gKChieXRlMyA8PCA2KSAmIDB4YzApIHwgYnl0ZTQ7XG4gICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfSxcblxuICAvKipcbiAgICogTGF6eSBzdGF0aWMgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uIENhbGxlZCBiZWZvcmVcbiAgICogYWNjZXNzaW5nIGFueSBvZiB0aGUgc3RhdGljIG1hcCB2YXJpYWJsZXMuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpbml0XygpIHtcbiAgICBpZiAoIXRoaXMuYnl0ZVRvQ2hhck1hcF8pIHtcbiAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF8gPSB7fTtcbiAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF8gPSB7fTtcbiAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfID0ge307XG4gICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlXyA9IHt9O1xuXG4gICAgICAvLyBXZSB3YW50IHF1aWNrIG1hcHBpbmdzIGJhY2sgYW5kIGZvcnRoLCBzbyB3ZSBwcmVjb21wdXRlIHR3byBtYXBzLlxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLkVOQ09ERURfVkFMUy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpO1xuICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuYnl0ZVRvQ2hhck1hcF9baV1dID0gaTtcbiAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV0gPSB0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKTtcbiAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV1dID0gaTtcblxuICAgICAgICAvLyBCZSBmb3JnaXZpbmcgd2hlbiBkZWNvZGluZyBhbmQgY29ycmVjdGx5IGRlY29kZSBib3RoIGVuY29kaW5ncy5cbiAgICAgICAgaWYgKGkgPj0gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRS5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpXSA9IGk7XG4gICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpXSA9IGk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogVVJMLXNhZmUgYmFzZTY0IGVuY29kaW5nXG4gKiBAcGFyYW0geyFzdHJpbmd9IHN0clxuICogQHJldHVybiB7IXN0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IGJhc2U2NEVuY29kZSA9IGZ1bmN0aW9uKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgdXRmOEJ5dGVzID0gc3RyaW5nVG9CeXRlQXJyYXkoc3RyKTtcbiAgcmV0dXJuIGJhc2U2NC5lbmNvZGVCeXRlQXJyYXkodXRmOEJ5dGVzLCB0cnVlKTtcbn07XG5cbi8qKlxuICogVVJMLXNhZmUgYmFzZTY0IGRlY29kaW5nXG4gKlxuICogTk9URTogRE8gTk9UIHVzZSB0aGUgZ2xvYmFsIGF0b2IoKSBmdW5jdGlvbiAtIGl0IGRvZXMgTk9UIHN1cHBvcnQgdGhlXG4gKiBiYXNlNjRVcmwgdmFyaWFudCBlbmNvZGluZy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIFRvIGJlIGRlY29kZWRcbiAqIEByZXR1cm4gez9zdHJpbmd9IERlY29kZWQgcmVzdWx0LCBpZiBwb3NzaWJsZVxuICovXG5leHBvcnQgY29uc3QgYmFzZTY0RGVjb2RlID0gZnVuY3Rpb24oc3RyOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYmFzZTY0LmRlY29kZVN0cmluZyhzdHIsIHRydWUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcignYmFzZTY0RGVjb2RlIGZhaWxlZDogJywgZSk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBEbyBhIGRlZXAtY29weSBvZiBiYXNpYyBKYXZhU2NyaXB0IE9iamVjdHMgb3IgQXJyYXlzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVlcENvcHk8VD4odmFsdWU6IFQpOiBUIHtcbiAgcmV0dXJuIGRlZXBFeHRlbmQodW5kZWZpbmVkLCB2YWx1ZSk7XG59XG5cbi8qKlxuICogQ29weSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIHRvIHRhcmdldCAocmVjdXJzaXZlbHkgYWxsb3dzIGV4dGVuc2lvblxuICogb2YgT2JqZWN0cyBhbmQgQXJyYXlzKS4gIFNjYWxhciB2YWx1ZXMgaW4gdGhlIHRhcmdldCBhcmUgb3Zlci13cml0dGVuLlxuICogSWYgdGFyZ2V0IGlzIHVuZGVmaW5lZCwgYW4gb2JqZWN0IG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlIHdpbGwgYmUgY3JlYXRlZFxuICogKGFuZCByZXR1cm5lZCkuXG4gKlxuICogV2UgcmVjdXJzaXZlbHkgY29weSBhbGwgY2hpbGQgcHJvcGVydGllcyBvZiBwbGFpbiBPYmplY3RzIGluIHRoZSBzb3VyY2UtIHNvXG4gKiB0aGF0IG5hbWVzcGFjZS0gbGlrZSBkaWN0aW9uYXJpZXMgYXJlIG1lcmdlZC5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIHRhcmdldCBjYW4gYmUgYSBmdW5jdGlvbiwgaW4gd2hpY2ggY2FzZSB0aGUgcHJvcGVydGllcyBpblxuICogdGhlIHNvdXJjZSBPYmplY3QgYXJlIGNvcGllZCBvbnRvIGl0IGFzIHN0YXRpYyBwcm9wZXJ0aWVzIG9mIHRoZSBGdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZXBFeHRlbmQodGFyZ2V0OiBhbnksIHNvdXJjZTogYW55KTogYW55IHtcbiAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgT2JqZWN0KSkge1xuICAgIHJldHVybiBzb3VyY2U7XG4gIH1cblxuICBzd2l0Y2ggKHNvdXJjZS5jb25zdHJ1Y3Rvcikge1xuICAgIGNhc2UgRGF0ZTpcbiAgICAgIC8vIFRyZWF0IERhdGVzIGxpa2Ugc2NhbGFyczsgaWYgdGhlIHRhcmdldCBkYXRlIG9iamVjdCBoYWQgYW55IGNoaWxkXG4gICAgICAvLyBwcm9wZXJ0aWVzIC0gdGhleSB3aWxsIGJlIGxvc3QhXG4gICAgICBsZXQgZGF0ZVZhbHVlID0gKHNvdXJjZSBhcyBhbnkpIGFzIERhdGU7XG4gICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVZhbHVlLmdldFRpbWUoKSk7XG5cbiAgICBjYXNlIE9iamVjdDpcbiAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0YXJnZXQgPSB7fTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBBcnJheTpcbiAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxuICAgICAgdGFyZ2V0ID0gW107XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICAvLyBOb3QgYSBwbGFpbiBPYmplY3QgLSB0cmVhdCBpdCBhcyBhIHNjYWxhci5cbiAgICAgIHJldHVybiBzb3VyY2U7XG4gIH1cblxuICBmb3IgKGxldCBwcm9wIGluIHNvdXJjZSkge1xuICAgIGlmICghc291cmNlLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgdGFyZ2V0W3Byb3BdID0gZGVlcEV4dGVuZCh0YXJnZXRbcHJvcF0sIHNvdXJjZVtwcm9wXSk7XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG4vLyBUT0RPOiBSZWFsbHkgbmVlZGVkIChmb3IgSlNDb21waWxlciB0eXBlIGNoZWNraW5nKT9cbmV4cG9ydCBmdW5jdGlvbiBwYXRjaFByb3BlcnR5KG9iajogYW55LCBwcm9wOiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcbiAgb2JqW3Byb3BdID0gdmFsdWU7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5leHBvcnQgY2xhc3MgRGVmZXJyZWQ8Uj4ge1xuICBwcm9taXNlOiBQcm9taXNlPFI+O1xuICByZWplY3Q7XG4gIHJlc29sdmU7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPdXIgQVBJIGludGVybmFscyBhcmUgbm90IHByb21pc2VpZmllZCBhbmQgY2Fubm90IGJlY2F1c2Ugb3VyIGNhbGxiYWNrIEFQSXMgaGF2ZSBzdWJ0bGUgZXhwZWN0YXRpb25zIGFyb3VuZFxuICAgKiBpbnZva2luZyBwcm9taXNlcyBpbmxpbmUsIHdoaWNoIFByb21pc2VzIGFyZSBmb3JiaWRkZW4gdG8gZG8uIFRoaXMgbWV0aG9kIGFjY2VwdHMgYW4gb3B0aW9uYWwgbm9kZS1zdHlsZSBjYWxsYmFja1xuICAgKiBhbmQgcmV0dXJucyBhIG5vZGUtc3R5bGUgY2FsbGJhY2sgd2hpY2ggd2lsbCByZXNvbHZlIG9yIHJlamVjdCB0aGUgRGVmZXJyZWQncyBwcm9taXNlLlxuICAgKiBAcGFyYW0geygoP2Z1bmN0aW9uKD8oRXJyb3IpKTogKD98dW5kZWZpbmVkKSl8ICg/ZnVuY3Rpb24oPyhFcnJvciksPz0pOiAoP3x1bmRlZmluZWQpKSk9fSBjYWxsYmFja1xuICAgKiBAcmV0dXJuIHshZnVuY3Rpb24oPyhFcnJvciksID89KX1cbiAgICovXG4gIHdyYXBDYWxsYmFjayhjYWxsYmFjaz8pIHtcbiAgICByZXR1cm4gKGVycm9yLCB2YWx1ZT8pID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aGlzLnJlamVjdChlcnJvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlc29sdmUodmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBBdHRhY2hpbmcgbm9vcCBoYW5kbGVyIGp1c3QgaW4gY2FzZSBkZXZlbG9wZXIgd2Fzbid0IGV4cGVjdGluZ1xuICAgICAgICAvLyBwcm9taXNlc1xuICAgICAgICB0aGlzLnByb21pc2UuY2F0Y2goKCkgPT4ge30pO1xuXG4gICAgICAgIC8vIFNvbWUgb2Ygb3VyIGNhbGxiYWNrcyBkb24ndCBleHBlY3QgYSB2YWx1ZSBhbmQgb3VyIG93biB0ZXN0c1xuICAgICAgICAvLyBhc3NlcnQgdGhhdCB0aGUgcGFyYW1ldGVyIGxlbmd0aCBpcyAxXG4gICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBjYWxsYmFjayhlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FsbGJhY2soZXJyb3IsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENPTlNUQU5UUyB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuLyoqXG4gKiBSZXR1cm5zIG5hdmlnYXRvci51c2VyQWdlbnQgc3RyaW5nIG9yICcnIGlmIGl0J3Mgbm90IGRlZmluZWQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHVzZXIgYWdlbnQgc3RyaW5nXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRVQSA9IGZ1bmN0aW9uKCkge1xuICBpZiAoXG4gICAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgbmF2aWdhdG9yWyd1c2VyQWdlbnQnXSA9PT0gJ3N0cmluZydcbiAgKSB7XG4gICAgcmV0dXJuIG5hdmlnYXRvclsndXNlckFnZW50J107XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG59O1xuXG4vKipcbiAqIERldGVjdCBDb3Jkb3ZhIC8gUGhvbmVHYXAgLyBJb25pYyBmcmFtZXdvcmtzIG9uIGEgbW9iaWxlIGRldmljZS5cbiAqXG4gKiBEZWxpYmVyYXRlbHkgZG9lcyBub3QgcmVseSBvbiBjaGVja2luZyBgZmlsZTovL2AgVVJMcyAoYXMgdGhpcyBmYWlscyBQaG9uZUdhcCBpbiB0aGUgUmlwcGxlIGVtdWxhdG9yKSBub3JcbiAqIENvcmRvdmEgYG9uRGV2aWNlUmVhZHlgLCB3aGljaCB3b3VsZCBub3JtYWxseSB3YWl0IGZvciBhIGNhbGxiYWNrLlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IGlzTW9iaWxlQ29yZG92YVxuICovXG5leHBvcnQgY29uc3QgaXNNb2JpbGVDb3Jkb3ZhID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAhISh3aW5kb3dbJ2NvcmRvdmEnXSB8fCB3aW5kb3dbJ3Bob25lZ2FwJ10gfHwgd2luZG93WydQaG9uZUdhcCddKSAmJlxuICAgIC9pb3N8aXBob25lfGlwb2R8aXBhZHxhbmRyb2lkfGJsYWNrYmVycnl8aWVtb2JpbGUvaS50ZXN0KGdldFVBKCkpXG4gICk7XG59O1xuXG4vKipcbiAqIERldGVjdCBSZWFjdCBOYXRpdmUuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBSZWFjdE5hdGl2ZSBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGlzUmVhY3ROYXRpdmUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIChcbiAgICB0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJiBuYXZpZ2F0b3JbJ3Byb2R1Y3QnXSA9PT0gJ1JlYWN0TmF0aXZlJ1xuICApO1xufTtcblxuLyoqXG4gKiBEZXRlY3QgTm9kZS5qcy5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIE5vZGUuanMgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBpc05vZGVTZGsgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIENPTlNUQU5UUy5OT0RFX0NMSUVOVCA9PT0gdHJ1ZSB8fCBDT05TVEFOVFMuTk9ERV9BRE1JTiA9PT0gdHJ1ZTtcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IFN0YW5kYXJkaXplZCBGaXJlYmFzZSBFcnJvci5cbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiAgIC8vIFR5cGVzY3JpcHQgc3RyaW5nIGxpdGVyYWxzIGZvciB0eXBlLXNhZmUgY29kZXNcbiAqICAgdHlwZSBFcnIgPVxuICogICAgICd1bmtub3duJyB8XG4gKiAgICAgJ29iamVjdC1ub3QtZm91bmQnXG4gKiAgICAgO1xuICpcbiAqICAgLy8gQ2xvc3VyZSBlbnVtIGZvciB0eXBlLXNhZmUgZXJyb3IgY29kZXNcbiAqICAgLy8gYXQtZW51bSB7c3RyaW5nfVxuICogICB2YXIgRXJyID0ge1xuICogICAgIFVOS05PV046ICd1bmtub3duJyxcbiAqICAgICBPQkpFQ1RfTk9UX0ZPVU5EOiAnb2JqZWN0LW5vdC1mb3VuZCcsXG4gKiAgIH1cbiAqXG4gKiAgIGxldCBlcnJvcnM6IE1hcDxFcnIsIHN0cmluZz4gPSB7XG4gKiAgICAgJ2dlbmVyaWMtZXJyb3InOiBcIlVua25vd24gZXJyb3JcIixcbiAqICAgICAnZmlsZS1ub3QtZm91bmQnOiBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IHskZmlsZX1cIixcbiAqICAgfTtcbiAqXG4gKiAgIC8vIFR5cGUtc2FmZSBmdW5jdGlvbiAtIG11c3QgcGFzcyBhIHZhbGlkIGVycm9yIGNvZGUgYXMgcGFyYW0uXG4gKiAgIGxldCBlcnJvciA9IG5ldyBFcnJvckZhY3Rvcnk8RXJyPignc2VydmljZScsICdTZXJ2aWNlJywgZXJyb3JzKTtcbiAqXG4gKiAgIC4uLlxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkdFTkVSSUMpO1xuICogICAuLi5cbiAqICAgdGhyb3cgZXJyb3IuY3JlYXRlKEVyci5GSUxFX05PVF9GT1VORCwgeydmaWxlJzogZmlsZU5hbWV9KTtcbiAqICAgLi4uXG4gKiAgIC8vIFNlcnZpY2U6IENvdWxkIG5vdCBmaWxlIGZpbGU6IGZvby50eHQgKHNlcnZpY2UvZmlsZS1ub3QtZm91bmQpLlxuICpcbiAqICAgY2F0Y2ggKGUpIHtcbiAqICAgICBhc3NlcnQoZS5tZXNzYWdlID09PSBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IGZvby50eHQuXCIpO1xuICogICAgIGlmIChlLmNvZGUgPT09ICdzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kJykge1xuICogICAgICAgY29uc29sZS5sb2coXCJDb3VsZCBub3QgcmVhZCBmaWxlOiBcIiArIGVbJ2ZpbGUnXSk7XG4gKiAgICAgfVxuICogICB9XG4gKi9cbmV4cG9ydCB0eXBlIEVycm9yTGlzdDxUPiA9IHsgW2NvZGU6IHN0cmluZ106IHN0cmluZyB9O1xuXG5jb25zdCBFUlJPUl9OQU1FID0gJ0ZpcmViYXNlRXJyb3InO1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmluZ0xpa2Uge1xuICB0b1N0cmluZzogKCkgPT4gc3RyaW5nO1xufVxuXG5sZXQgY2FwdHVyZVN0YWNrVHJhY2U6IChvYmo6IE9iamVjdCwgZm4/OiBGdW5jdGlvbikgPT4gdm9pZCA9IChFcnJvciBhcyBhbnkpXG4gIC5jYXB0dXJlU3RhY2tUcmFjZTtcblxuLy8gRXhwb3J0IGZvciBmYWtpbmcgaW4gdGVzdHNcbmV4cG9ydCBmdW5jdGlvbiBwYXRjaENhcHR1cmUoY2FwdHVyZUZha2U/OiBhbnkpOiBhbnkge1xuICBsZXQgcmVzdWx0OiBhbnkgPSBjYXB0dXJlU3RhY2tUcmFjZTtcbiAgY2FwdHVyZVN0YWNrVHJhY2UgPSBjYXB0dXJlRmFrZTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaXJlYmFzZUVycm9yIHtcbiAgLy8gVW5pcXVlIGNvZGUgZm9yIGVycm9yIC0gZm9ybWF0IGlzIHNlcnZpY2UvZXJyb3ItY29kZS1zdHJpbmdcbiAgY29kZTogc3RyaW5nO1xuXG4gIC8vIERldmVsb3Blci1mcmllbmRseSBlcnJvciBtZXNzYWdlLlxuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgLy8gQWx3YXlzICdGaXJlYmFzZUVycm9yJ1xuICBuYW1lOiBzdHJpbmc7XG5cbiAgLy8gV2hlcmUgYXZhaWxhYmxlIC0gc3RhY2sgYmFja3RyYWNlIGluIGEgc3RyaW5nXG4gIHN0YWNrOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBGaXJlYmFzZUVycm9yIGltcGxlbWVudHMgRmlyZWJhc2VFcnJvciB7XG4gIHB1YmxpYyBzdGFjazogc3RyaW5nO1xuICBwdWJsaWMgbmFtZTogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBjb2RlOiBzdHJpbmcsIHB1YmxpYyBtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICBsZXQgc3RhY2s6IHN0cmluZztcbiAgICAvLyBXZSB3YW50IHRoZSBzdGFjayB2YWx1ZSwgaWYgaW1wbGVtZW50ZWQgYnkgRXJyb3JcbiAgICBpZiAoY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICAgIC8vIFBhdGNoZXMgdGhpcy5zdGFjaywgb21pdHRlZCBjYWxscyBhYm92ZSBFcnJvckZhY3RvcnkjY3JlYXRlXG4gICAgICBjYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBFcnJvckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBlcnIgPSBFcnJvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgdGhpcy5uYW1lID0gRVJST1JfTkFNRTtcbiAgICAgIC8vIE1ha2Ugbm9uLWVudW1lcmFibGUgZ2V0dGVyIGZvciB0aGUgcHJvcGVydHkuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3N0YWNrJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBlcnIuc3RhY2s7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG4vLyBCYWNrLWRvb3IgaW5oZXJpdGFuY2VcbkZpcmViYXNlRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpIGFzIEZpcmViYXNlRXJyb3I7XG5GaXJlYmFzZUVycm9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEZpcmViYXNlRXJyb3I7XG4oRmlyZWJhc2VFcnJvci5wcm90b3R5cGUgYXMgYW55KS5uYW1lID0gRVJST1JfTkFNRTtcblxuZXhwb3J0IGNsYXNzIEVycm9yRmFjdG9yeTxUIGV4dGVuZHMgc3RyaW5nPiB7XG4gIC8vIE1hdGNoZXMgeyRuYW1lfSwgYnkgZGVmYXVsdC5cbiAgcHVibGljIHBhdHRlcm4gPSAvXFx7XFwkKFtefV0rKX0vZztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHNlcnZpY2U6IHN0cmluZyxcbiAgICBwcml2YXRlIHNlcnZpY2VOYW1lOiBzdHJpbmcsXG4gICAgcHJpdmF0ZSBlcnJvcnM6IEVycm9yTGlzdDxUPlxuICApIHtcbiAgICAvLyBlbXB0eVxuICB9XG5cbiAgY3JlYXRlKGNvZGU6IFQsIGRhdGE/OiB7IFtwcm9wOiBzdHJpbmddOiBTdHJpbmdMaWtlIH0pOiBGaXJlYmFzZUVycm9yIHtcbiAgICBpZiAoZGF0YSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBkYXRhID0ge307XG4gICAgfVxuXG4gICAgbGV0IHRlbXBsYXRlID0gdGhpcy5lcnJvcnNbY29kZSBhcyBzdHJpbmddO1xuXG4gICAgbGV0IGZ1bGxDb2RlID0gdGhpcy5zZXJ2aWNlICsgJy8nICsgY29kZTtcbiAgICBsZXQgbWVzc2FnZTogc3RyaW5nO1xuXG4gICAgaWYgKHRlbXBsYXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG1lc3NhZ2UgPSAnRXJyb3InO1xuICAgIH0gZWxzZSB7XG4gICAgICBtZXNzYWdlID0gdGVtcGxhdGUucmVwbGFjZSh0aGlzLnBhdHRlcm4sIChtYXRjaCwga2V5KSA9PiB7XG4gICAgICAgIGxldCB2YWx1ZSA9IGRhdGEhW2tleV07XG4gICAgICAgIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUudG9TdHJpbmcoKSA6ICc8JyArIGtleSArICc/Pic7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBTZXJ2aWNlOiBFcnJvciBtZXNzYWdlIChzZXJ2aWNlL2NvZGUpLlxuICAgIG1lc3NhZ2UgPSB0aGlzLnNlcnZpY2VOYW1lICsgJzogJyArIG1lc3NhZ2UgKyAnICgnICsgZnVsbENvZGUgKyAnKS4nO1xuICAgIGxldCBlcnIgPSBuZXcgRmlyZWJhc2VFcnJvcihmdWxsQ29kZSwgbWVzc2FnZSk7XG5cbiAgICAvLyBQb3B1bGF0ZSB0aGUgRXJyb3Igb2JqZWN0IHdpdGggbWVzc2FnZSBwYXJ0cyBmb3IgcHJvZ3JhbW1hdGljXG4gICAgLy8gYWNjZXNzZXMgKGUuZy4sIGUuZmlsZSkuXG4gICAgZm9yIChsZXQgcHJvcCBpbiBkYXRhKSB7XG4gICAgICBpZiAoIWRhdGEuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgcHJvcC5zbGljZSgtMSkgPT09ICdfJykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIChlcnIgYXMgYW55KVtwcm9wXSA9IGRhdGFbcHJvcF07XG4gICAgfVxuXG4gICAgcmV0dXJuIGVycjtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLy8gQ29weXJpZ2h0IDIwMTEgVGhlIENsb3N1cmUgTGlicmFyeSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy9cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vXG4vLyAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy9cbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBBYnN0cmFjdCBjcnlwdG9ncmFwaGljIGhhc2ggaW50ZXJmYWNlLlxuICpcbiAqIFNlZSBTaGExIGFuZCBNZDUgZm9yIHNhbXBsZSBpbXBsZW1lbnRhdGlvbnMuXG4gKlxuICovXG5cbi8qKlxuICogQ3JlYXRlIGEgY3J5cHRvZ3JhcGhpYyBoYXNoIGluc3RhbmNlLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHN0cnVjdFxuICovXG5leHBvcnQgY2xhc3MgSGFzaCB7XG4gIC8qKlxuICAgKiBUaGUgYmxvY2sgc2l6ZSBmb3IgdGhlIGhhc2hlci5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGJsb2NrU2l6ZTogbnVtYmVyID0gLTE7XG5cbiAgY29uc3RydWN0b3IoKSB7fVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBFdmFsdWF0ZXMgYSBKU09OIHN0cmluZyBpbnRvIGEgamF2YXNjcmlwdCBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciBBIHN0cmluZyBjb250YWluaW5nIEpTT04uXG4gKiBAcmV0dXJuIHsqfSBUaGUgamF2YXNjcmlwdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgSlNPTi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGpzb25FdmFsKHN0cikge1xuICByZXR1cm4gSlNPTi5wYXJzZShzdHIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgSlNPTiByZXByZXNlbnRpbmcgYSBqYXZhc2NyaXB0IG9iamVjdC5cbiAqIEBwYXJhbSB7Kn0gZGF0YSBKYXZhc2NyaXB0IG9iamVjdCB0byBiZSBzdHJpbmdpZmllZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIEpTT04gY29udGVudHMgb2YgdGhlIG9iamVjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ2lmeShkYXRhKSB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGJhc2U2NERlY29kZSB9IGZyb20gJy4vY3J5cHQnO1xuaW1wb3J0IHsganNvbkV2YWwgfSBmcm9tICcuL2pzb24nO1xuXG4vKipcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBpbnRvIGNvbnN0aXR1ZW50IHBhcnRzLlxuICpcbiAqIE5vdGVzOlxuICogLSBNYXkgcmV0dXJuIHdpdGggaW52YWxpZCAvIGluY29tcGxldGUgY2xhaW1zIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cbiAqXG4gKiBAcGFyYW0gez9zdHJpbmd9IHRva2VuXG4gKiBAcmV0dXJuIHt7aGVhZGVyOiAqLCBjbGFpbXM6ICosIGRhdGE6ICosIHNpZ25hdHVyZTogc3RyaW5nfX1cbiAqL1xuZXhwb3J0IGNvbnN0IGRlY29kZSA9IGZ1bmN0aW9uKHRva2VuKSB7XG4gIHZhciBoZWFkZXIgPSB7fSxcbiAgICBjbGFpbXMgPSB7fSxcbiAgICBkYXRhID0ge30sXG4gICAgc2lnbmF0dXJlID0gJyc7XG5cbiAgdHJ5IHtcbiAgICB2YXIgcGFydHMgPSB0b2tlbi5zcGxpdCgnLicpO1xuICAgIGhlYWRlciA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1swXSkgfHwgJycpO1xuICAgIGNsYWltcyA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1sxXSkgfHwgJycpO1xuICAgIHNpZ25hdHVyZSA9IHBhcnRzWzJdO1xuICAgIGRhdGEgPSBjbGFpbXNbJ2QnXSB8fCB7fTtcbiAgICBkZWxldGUgY2xhaW1zWydkJ107XG4gIH0gY2F0Y2ggKGUpIHt9XG5cbiAgcmV0dXJuIHtcbiAgICBoZWFkZXI6IGhlYWRlcixcbiAgICBjbGFpbXM6IGNsYWltcyxcbiAgICBkYXRhOiBkYXRhLFxuICAgIHNpZ25hdHVyZTogc2lnbmF0dXJlXG4gIH07XG59O1xuXG4vKipcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgdGltZS1iYXNlZCBjbGFpbXMuIFdpbGwgcmV0dXJuIHRydWUgaWYgdGhlXG4gKiB0b2tlbiBpcyB3aXRoaW4gdGhlIHRpbWUgd2luZG93IGF1dGhvcml6ZWQgYnkgdGhlICduYmYnIChub3QtYmVmb3JlKSBhbmQgJ2lhdCcgKGlzc3VlZC1hdCkgY2xhaW1zLlxuICpcbiAqIE5vdGVzOlxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxuICpcbiAqIEBwYXJhbSB7P3N0cmluZ30gdG9rZW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBjb25zdCBpc1ZhbGlkVGltZXN0YW1wID0gZnVuY3Rpb24odG9rZW4pIHtcbiAgdmFyIGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zLFxuICAgIG5vdyA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKSxcbiAgICB2YWxpZFNpbmNlLFxuICAgIHZhbGlkVW50aWw7XG5cbiAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnKSB7XG4gICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnbmJmJykpIHtcbiAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ25iZiddO1xuICAgIH0gZWxzZSBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xuICAgICAgdmFsaWRTaW5jZSA9IGNsYWltc1snaWF0J107XG4gICAgfVxuXG4gICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnZXhwJykpIHtcbiAgICAgIHZhbGlkVW50aWwgPSBjbGFpbXNbJ2V4cCddO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB0b2tlbiB3aWxsIGV4cGlyZSBhZnRlciAyNGggYnkgZGVmYXVsdFxuICAgICAgdmFsaWRVbnRpbCA9IHZhbGlkU2luY2UgKyA4NjQwMDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gKFxuICAgIG5vdyAmJiB2YWxpZFNpbmNlICYmIHZhbGlkVW50aWwgJiYgbm93ID49IHZhbGlkU2luY2UgJiYgbm93IDw9IHZhbGlkVW50aWxcbiAgKTtcbn07XG5cbi8qKlxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCByZXR1cm5zIGl0cyBpc3N1ZWQgYXQgdGltZSBpZiB2YWxpZCwgbnVsbCBvdGhlcndpc2UuXG4gKlxuICogTm90ZXM6XG4gKiAtIE1heSByZXR1cm4gbnVsbCBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXG4gKlxuICogQHBhcmFtIHs/c3RyaW5nfSB0b2tlblxuICogQHJldHVybiB7P251bWJlcn1cbiAqL1xuZXhwb3J0IGNvbnN0IGlzc3VlZEF0VGltZSA9IGZ1bmN0aW9uKHRva2VuKSB7XG4gIHZhciBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcbiAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcbiAgICByZXR1cm4gY2xhaW1zWydpYXQnXTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8qKlxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCBjaGVja3MgdGhlIHZhbGlkaXR5IG9mIGl0cyBmb3JtYXQuIEV4cGVjdHMgYSB2YWxpZCBpc3N1ZWQtYXQgdGltZSBhbmQgbm9uLWVtcHR5XG4gKiBzaWduYXR1cmUuXG4gKlxuICogTm90ZXM6XG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXG4gKlxuICogQHBhcmFtIHs/c3RyaW5nfSB0b2tlblxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IGlzVmFsaWRGb3JtYXQgPSBmdW5jdGlvbih0b2tlbikge1xuICB2YXIgZGVjb2RlZCA9IGRlY29kZSh0b2tlbiksXG4gICAgY2xhaW1zID0gZGVjb2RlZC5jbGFpbXM7XG5cbiAgcmV0dXJuIChcbiAgICAhIWRlY29kZWQuc2lnbmF0dXJlICYmXG4gICAgISFjbGFpbXMgJiZcbiAgICB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJlxuICAgIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JylcbiAgKTtcbn07XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gcGVlciBpbnRvIGFuIGF1dGggdG9rZW4gYW5kIGRldGVybWluZSBpZiBpdCdzIGFuIGFkbWluIGF1dGggdG9rZW4gYnkgbG9va2luZyBhdCB0aGUgY2xhaW1zIHBvcnRpb24uXG4gKlxuICogTm90ZXM6XG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXG4gKlxuICogQHBhcmFtIHs/c3RyaW5nfSB0b2tlblxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IGlzQWRtaW4gPSBmdW5jdGlvbih0b2tlbikge1xuICB2YXIgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XG4gIHJldHVybiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXNbJ2FkbWluJ10gPT09IHRydWU7XG59O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLy8gU2VlIGh0dHA6Ly93d3cuZGV2dGhvdWdodC5jb20vMjAxMi8wMS8xOC9hbi1vYmplY3QtaXMtbm90LWEtaGFzaC9cblxuZXhwb3J0IGNvbnN0IGNvbnRhaW5zID0gZnVuY3Rpb24ob2JqLCBrZXkpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2FmZUdldCA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSByZXR1cm4gb2JqW2tleV07XG4gIC8vIGVsc2UgcmV0dXJuIHVuZGVmaW5lZC5cbn07XG5cbi8qKlxuICogRW51bWVyYXRlcyB0aGUga2V5cy92YWx1ZXMgaW4gYW4gb2JqZWN0LCBleGNsdWRpbmcga2V5cyBkZWZpbmVkIG9uIHRoZSBwcm90b3R5cGUuXG4gKlxuICogQHBhcmFtIHs/T2JqZWN0LjxLLFY+fSBvYmogT2JqZWN0IHRvIGVudW1lcmF0ZS5cbiAqIEBwYXJhbSB7IWZ1bmN0aW9uKEssIFYpfSBmbiBGdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIGtleSBhbmQgdmFsdWUuXG4gKiBAdGVtcGxhdGUgSyxWXG4gKi9cbmV4cG9ydCBjb25zdCBmb3JFYWNoID0gZnVuY3Rpb24ob2JqLCBmbikge1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgIGZuKGtleSwgb2JqW2tleV0pO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBDb3BpZXMgYWxsIHRoZSAob3duKSBwcm9wZXJ0aWVzIGZyb20gb25lIG9iamVjdCB0byBhbm90aGVyLlxuICogQHBhcmFtIHshT2JqZWN0fSBvYmpUb1xuICogQHBhcmFtIHshT2JqZWN0fSBvYmpGcm9tXG4gKiBAcmV0dXJuIHshT2JqZWN0fSBvYmpUb1xuICovXG5leHBvcnQgY29uc3QgZXh0ZW5kID0gZnVuY3Rpb24ob2JqVG8sIG9iakZyb20pIHtcbiAgZm9yRWFjaChvYmpGcm9tLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgb2JqVG9ba2V5XSA9IHZhbHVlO1xuICB9KTtcbiAgcmV0dXJuIG9ialRvO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgY2xvbmUgb2YgdGhlIHNwZWNpZmllZCBvYmplY3QuXG4gKiBAcGFyYW0geyFPYmplY3R9IG9ialxuICogQHJldHVybiB7IU9iamVjdH0gY2xvbmVkIG9iai5cbiAqL1xuZXhwb3J0IGNvbnN0IGNsb25lID0gZnVuY3Rpb24ob2JqKSB7XG4gIHJldHVybiBleHRlbmQoe30sIG9iaik7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBvYmogaGFzIHR5cGVvZiBcIm9iamVjdFwiIGFuZCBpcyBub3QgbnVsbC4gIFVubGlrZSBnb29nLmlzT2JqZWN0KCksIGRvZXMgbm90IHJldHVybiB0cnVlXG4gKiBmb3IgZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSBvYmogeyp9IEEgcG90ZW50aWFsIG9iamVjdC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGl0J3MgYW4gb2JqZWN0LlxuICovXG5leHBvcnQgY29uc3QgaXNOb25OdWxsT2JqZWN0ID0gZnVuY3Rpb24ob2JqKSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiBvYmogIT09IG51bGw7XG59O1xuXG5leHBvcnQgY29uc3QgaXNFbXB0eSA9IGZ1bmN0aW9uKG9iaikge1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldENvdW50ID0gZnVuY3Rpb24ob2JqKSB7XG4gIHZhciBydiA9IDA7XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBydisrO1xuICB9XG4gIHJldHVybiBydjtcbn07XG5cbmV4cG9ydCBjb25zdCBtYXAgPSBmdW5jdGlvbihvYmosIGYsIG9wdF9vYmo/KSB7XG4gIHZhciByZXMgPSB7fTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIHJlc1trZXldID0gZi5jYWxsKG9wdF9vYmosIG9ialtrZXldLCBrZXksIG9iaik7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn07XG5cbmV4cG9ydCBjb25zdCBmaW5kS2V5ID0gZnVuY3Rpb24ob2JqLCBmbiwgb3B0X3RoaXM/KSB7XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBpZiAoZm4uY2FsbChvcHRfdGhpcywgb2JqW2tleV0sIGtleSwgb2JqKSkge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbmV4cG9ydCBjb25zdCBmaW5kVmFsdWUgPSBmdW5jdGlvbihvYmosIGZuLCBvcHRfdGhpcz8pIHtcbiAgdmFyIGtleSA9IGZpbmRLZXkob2JqLCBmbiwgb3B0X3RoaXMpO1xuICByZXR1cm4ga2V5ICYmIG9ialtrZXldO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEFueUtleSA9IGZ1bmN0aW9uKG9iaikge1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgcmV0dXJuIGtleTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGdldFZhbHVlcyA9IGZ1bmN0aW9uKG9iaikge1xuICB2YXIgcmVzID0gW107XG4gIHZhciBpID0gMDtcbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIHJlc1tpKytdID0gb2JqW2tleV07XG4gIH1cbiAgcmV0dXJuIHJlcztcbn07XG5cbi8qKlxuICogVGVzdHMgd2hldGhlciBldmVyeSBrZXkvdmFsdWUgcGFpciBpbiBhbiBvYmplY3QgcGFzcyB0aGUgdGVzdCBpbXBsZW1lbnRlZFxuICogYnkgdGhlIHByb3ZpZGVkIGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHs/T2JqZWN0LjxLLFY+fSBvYmogT2JqZWN0IHRvIHRlc3QuXG4gKiBAcGFyYW0geyFmdW5jdGlvbihLLCBWKX0gZm4gRnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCBrZXkgYW5kIHZhbHVlLlxuICogQHRlbXBsYXRlIEssVlxuICovXG5leHBvcnQgY29uc3QgZXZlcnkgPSBmdW5jdGlvbjxWPihcbiAgb2JqOiBPYmplY3QsXG4gIGZuOiAoazogc3RyaW5nLCB2PzogVikgPT4gYm9vbGVhblxuKTogYm9vbGVhbiB7XG4gIGZvciAobGV0IGtleSBpbiBvYmopIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgaWYgKCFmbihrZXksIG9ialtrZXldKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGZvckVhY2ggfSBmcm9tICcuL29iaic7XG5cbi8qKlxuICogUmV0dXJucyBhIHF1ZXJ5c3RyaW5nLWZvcm1hdHRlZCBzdHJpbmcgKGUuZy4gJmFyZz12YWwmYXJnMj12YWwyKSBmcm9tIGEgcGFyYW1zXG4gKiBvYmplY3QgKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXG4gKiBOb3RlOiBZb3UgbXVzdCBwcmVwZW5kIGl0IHdpdGggPyB3aGVuIGFkZGluZyBpdCB0byBhIFVSTC5cbiAqXG4gKiBAcGFyYW0geyFPYmplY3R9IHF1ZXJ5c3RyaW5nUGFyYW1zXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBxdWVyeXN0cmluZyA9IGZ1bmN0aW9uKHF1ZXJ5c3RyaW5nUGFyYW1zKSB7XG4gIHZhciBwYXJhbXMgPSBbXTtcbiAgZm9yRWFjaChxdWVyeXN0cmluZ1BhcmFtcywgZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgdmFsdWUuZm9yRWFjaChmdW5jdGlvbihhcnJheVZhbCkge1xuICAgICAgICBwYXJhbXMucHVzaChcbiAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChhcnJheVZhbClcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBwYXJhbXMubGVuZ3RoID8gJyYnICsgcGFyYW1zLmpvaW4oJyYnKSA6ICcnO1xufTtcblxuLyoqXG4gKiBEZWNvZGVzIGEgcXVlcnlzdHJpbmcgKGUuZy4gP2FyZz12YWwmYXJnMj12YWwyKSBpbnRvIGEgcGFyYW1zIG9iamVjdCAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlcnlzdHJpbmdcbiAqIEByZXR1cm4geyFPYmplY3R9XG4gKi9cbmV4cG9ydCBjb25zdCBxdWVyeXN0cmluZ0RlY29kZSA9IGZ1bmN0aW9uKHF1ZXJ5c3RyaW5nKSB7XG4gIHZhciBvYmogPSB7fTtcbiAgdmFyIHRva2VucyA9IHF1ZXJ5c3RyaW5nLnJlcGxhY2UoL15cXD8vLCAnJykuc3BsaXQoJyYnKTtcblxuICB0b2tlbnMuZm9yRWFjaChmdW5jdGlvbih0b2tlbikge1xuICAgIGlmICh0b2tlbikge1xuICAgICAgdmFyIGtleSA9IHRva2VuLnNwbGl0KCc9Jyk7XG4gICAgICBvYmpba2V5WzBdXSA9IGtleVsxXTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gb2JqO1xufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEhhc2ggfSBmcm9tICcuL2hhc2gnO1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoLlxuICogVmFyaWFibGUgbmFtZXMgZm9sbG93IHRoZSBub3RhdGlvbiBpbiBGSVBTIFBVQiAxODAtMzpcbiAqIGh0dHA6Ly9jc3JjLm5pc3QuZ292L3B1YmxpY2F0aW9ucy9maXBzL2ZpcHMxODAtMy9maXBzMTgwLTNfZmluYWwucGRmLlxuICpcbiAqIFVzYWdlOlxuICogICB2YXIgc2hhMSA9IG5ldyBzaGExKCk7XG4gKiAgIHNoYTEudXBkYXRlKGJ5dGVzKTtcbiAqICAgdmFyIGhhc2ggPSBzaGExLmRpZ2VzdCgpO1xuICpcbiAqIFBlcmZvcm1hbmNlOlxuICogICBDaHJvbWUgMjM6ICAgfjQwMCBNYml0L3NcbiAqICAgRmlyZWZveCAxNjogIH4yNTAgTWJpdC9zXG4gKlxuICovXG5cbi8qKlxuICogU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoIGNvbnN0cnVjdG9yLlxuICpcbiAqIFRoZSBwcm9wZXJ0aWVzIGRlY2xhcmVkIGhlcmUgYXJlIGRpc2N1c3NlZCBpbiB0aGUgYWJvdmUgYWxnb3JpdGhtIGRvY3VtZW50LlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyB7SGFzaH1cbiAqIEBmaW5hbFxuICogQHN0cnVjdFxuICovXG5leHBvcnQgY2xhc3MgU2hhMSBleHRlbmRzIEhhc2gge1xuICAvKipcbiAgICogSG9sZHMgdGhlIHByZXZpb3VzIHZhbHVlcyBvZiBhY2N1bXVsYXRlZCB2YXJpYWJsZXMgYS1lIGluIHRoZSBjb21wcmVzc19cbiAgICogZnVuY3Rpb24uXG4gICAqIEB0eXBlIHshQXJyYXk8bnVtYmVyPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgY2hhaW5fOiBBcnJheTxudW1iZXI+ID0gW107XG5cbiAgLyoqXG4gICAqIEEgYnVmZmVyIGhvbGRpbmcgdGhlIHBhcnRpYWxseSBjb21wdXRlZCBoYXNoIHJlc3VsdC5cbiAgICogQHR5cGUgeyFBcnJheTxudW1iZXI+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBidWZfOiBBcnJheTxudW1iZXI+ID0gW107XG5cbiAgLyoqXG4gICAqIEFuIGFycmF5IG9mIDgwIGJ5dGVzLCBlYWNoIGEgcGFydCBvZiB0aGUgbWVzc2FnZSB0byBiZSBoYXNoZWQuICBSZWZlcnJlZCB0b1xuICAgKiBhcyB0aGUgbWVzc2FnZSBzY2hlZHVsZSBpbiB0aGUgZG9jcy5cbiAgICogQHR5cGUgeyFBcnJheTxudW1iZXI+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBXXzogQXJyYXk8bnVtYmVyPiA9IFtdO1xuXG4gIC8qKlxuICAgKiBDb250YWlucyBkYXRhIG5lZWRlZCB0byBwYWQgbWVzc2FnZXMgbGVzcyB0aGFuIDY0IGJ5dGVzLlxuICAgKiBAdHlwZSB7IUFycmF5PG51bWJlcj59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHBhZF86IEFycmF5PG51bWJlcj4gPSBbXTtcblxuICAvKipcbiAgICogQHByaXZhdGUge251bWJlcn1cbiAgICovXG4gIHByaXZhdGUgaW5idWZfOiBudW1iZXIgPSAwO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxuICAgKi9cbiAgcHJpdmF0ZSB0b3RhbF86IG51bWJlciA9IDA7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuYmxvY2tTaXplID0gNTEyIC8gODtcblxuICAgIHRoaXMucGFkX1swXSA9IDEyODtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHRoaXMuYmxvY2tTaXplOyArK2kpIHtcbiAgICAgIHRoaXMucGFkX1tpXSA9IDA7XG4gICAgfVxuXG4gICAgdGhpcy5yZXNldCgpO1xuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5jaGFpbl9bMF0gPSAweDY3NDUyMzAxO1xuICAgIHRoaXMuY2hhaW5fWzFdID0gMHhlZmNkYWI4OTtcbiAgICB0aGlzLmNoYWluX1syXSA9IDB4OThiYWRjZmU7XG4gICAgdGhpcy5jaGFpbl9bM10gPSAweDEwMzI1NDc2O1xuICAgIHRoaXMuY2hhaW5fWzRdID0gMHhjM2QyZTFmMDtcblxuICAgIHRoaXMuaW5idWZfID0gMDtcbiAgICB0aGlzLnRvdGFsXyA9IDA7XG4gIH1cblxuICAvKipcbiAgICogSW50ZXJuYWwgY29tcHJlc3MgaGVscGVyIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0geyFBcnJheTxudW1iZXI+fCFVaW50OEFycmF5fHN0cmluZ30gYnVmIEJsb2NrIHRvIGNvbXByZXNzLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9vZmZzZXQgT2Zmc2V0IG9mIHRoZSBibG9jayBpbiB0aGUgYnVmZmVyLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29tcHJlc3NfKGJ1Ziwgb3B0X29mZnNldD8pIHtcbiAgICBpZiAoIW9wdF9vZmZzZXQpIHtcbiAgICAgIG9wdF9vZmZzZXQgPSAwO1xuICAgIH1cblxuICAgIHZhciBXID0gdGhpcy5XXztcblxuICAgIC8vIGdldCAxNiBiaWcgZW5kaWFuIHdvcmRzXG4gICAgaWYgKHR5cGVvZiBidWYgPT09ICdzdHJpbmcnKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyBpKyspIHtcbiAgICAgICAgLy8gVE9ETyh1c2VyKTogW2J1ZyA4MTQwMTIyXSBSZWNlbnQgdmVyc2lvbnMgb2YgU2FmYXJpIGZvciBNYWMgT1MgYW5kIGlPU1xuICAgICAgICAvLyBoYXZlIGEgYnVnIHRoYXQgdHVybnMgdGhlIHBvc3QtaW5jcmVtZW50ICsrIG9wZXJhdG9yIGludG8gcHJlLWluY3JlbWVudFxuICAgICAgICAvLyBkdXJpbmcgSklUIGNvbXBpbGF0aW9uLiAgV2UgaGF2ZSBjb2RlIHRoYXQgZGVwZW5kcyBoZWF2aWx5IG9uIFNIQS0xIGZvclxuICAgICAgICAvLyBjb3JyZWN0bmVzcyBhbmQgd2hpY2ggaXMgYWZmZWN0ZWQgYnkgdGhpcyBidWcsIHNvIEkndmUgcmVtb3ZlZCBhbGwgdXNlc1xuICAgICAgICAvLyBvZiBwb3N0LWluY3JlbWVudCArKyBpbiB3aGljaCB0aGUgcmVzdWx0IHZhbHVlIGlzIHVzZWQuICBXZSBjYW4gcmV2ZXJ0XG4gICAgICAgIC8vIHRoaXMgY2hhbmdlIG9uY2UgdGhlIFNhZmFyaSBidWdcbiAgICAgICAgLy8gKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMDkwMzYpIGhhcyBiZWVuIGZpeGVkIGFuZFxuICAgICAgICAvLyBtb3N0IGNsaWVudHMgaGF2ZSBiZWVuIHVwZGF0ZWQuXG4gICAgICAgIFdbaV0gPVxuICAgICAgICAgIChidWYuY2hhckNvZGVBdChvcHRfb2Zmc2V0KSA8PCAyNCkgfFxuICAgICAgICAgIChidWYuY2hhckNvZGVBdChvcHRfb2Zmc2V0ICsgMSkgPDwgMTYpIHxcbiAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob3B0X29mZnNldCArIDIpIDw8IDgpIHxcbiAgICAgICAgICBidWYuY2hhckNvZGVBdChvcHRfb2Zmc2V0ICsgMyk7XG4gICAgICAgIG9wdF9vZmZzZXQgKz0gNDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XG4gICAgICAgIFdbaV0gPVxuICAgICAgICAgIChidWZbb3B0X29mZnNldF0gPDwgMjQpIHxcbiAgICAgICAgICAoYnVmW29wdF9vZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICAgICAgIChidWZbb3B0X29mZnNldCArIDJdIDw8IDgpIHxcbiAgICAgICAgICBidWZbb3B0X29mZnNldCArIDNdO1xuICAgICAgICBvcHRfb2Zmc2V0ICs9IDQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gZXhwYW5kIHRvIDgwIHdvcmRzXG4gICAgZm9yICh2YXIgaSA9IDE2OyBpIDwgODA7IGkrKykge1xuICAgICAgdmFyIHQgPSBXW2kgLSAzXSBeIFdbaSAtIDhdIF4gV1tpIC0gMTRdIF4gV1tpIC0gMTZdO1xuICAgICAgV1tpXSA9ICgodCA8PCAxKSB8ICh0ID4+PiAzMSkpICYgMHhmZmZmZmZmZjtcbiAgICB9XG5cbiAgICB2YXIgYSA9IHRoaXMuY2hhaW5fWzBdO1xuICAgIHZhciBiID0gdGhpcy5jaGFpbl9bMV07XG4gICAgdmFyIGMgPSB0aGlzLmNoYWluX1syXTtcbiAgICB2YXIgZCA9IHRoaXMuY2hhaW5fWzNdO1xuICAgIHZhciBlID0gdGhpcy5jaGFpbl9bNF07XG4gICAgdmFyIGYsIGs7XG5cbiAgICAvLyBUT0RPKHVzZXIpOiBUcnkgdG8gdW5yb2xsIHRoaXMgbG9vcCB0byBzcGVlZCB1cCB0aGUgY29tcHV0YXRpb24uXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4MDsgaSsrKSB7XG4gICAgICBpZiAoaSA8IDQwKSB7XG4gICAgICAgIGlmIChpIDwgMjApIHtcbiAgICAgICAgICBmID0gZCBeIChiICYgKGMgXiBkKSk7XG4gICAgICAgICAgayA9IDB4NWE4Mjc5OTk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZiA9IGIgXiBjIF4gZDtcbiAgICAgICAgICBrID0gMHg2ZWQ5ZWJhMTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGkgPCA2MCkge1xuICAgICAgICAgIGYgPSAoYiAmIGMpIHwgKGQgJiAoYiB8IGMpKTtcbiAgICAgICAgICBrID0gMHg4ZjFiYmNkYztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmID0gYiBeIGMgXiBkO1xuICAgICAgICAgIGsgPSAweGNhNjJjMWQ2O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciB0ID0gKCgoYSA8PCA1KSB8IChhID4+PiAyNykpICsgZiArIGUgKyBrICsgV1tpXSkgJiAweGZmZmZmZmZmO1xuICAgICAgZSA9IGQ7XG4gICAgICBkID0gYztcbiAgICAgIGMgPSAoKGIgPDwgMzApIHwgKGIgPj4+IDIpKSAmIDB4ZmZmZmZmZmY7XG4gICAgICBiID0gYTtcbiAgICAgIGEgPSB0O1xuICAgIH1cblxuICAgIHRoaXMuY2hhaW5fWzBdID0gKHRoaXMuY2hhaW5fWzBdICsgYSkgJiAweGZmZmZmZmZmO1xuICAgIHRoaXMuY2hhaW5fWzFdID0gKHRoaXMuY2hhaW5fWzFdICsgYikgJiAweGZmZmZmZmZmO1xuICAgIHRoaXMuY2hhaW5fWzJdID0gKHRoaXMuY2hhaW5fWzJdICsgYykgJiAweGZmZmZmZmZmO1xuICAgIHRoaXMuY2hhaW5fWzNdID0gKHRoaXMuY2hhaW5fWzNdICsgZCkgJiAweGZmZmZmZmZmO1xuICAgIHRoaXMuY2hhaW5fWzRdID0gKHRoaXMuY2hhaW5fWzRdICsgZSkgJiAweGZmZmZmZmZmO1xuICB9XG5cbiAgdXBkYXRlKGJ5dGVzLCBvcHRfbGVuZ3RoPykge1xuICAgIC8vIFRPRE8oam9obmxlbnopOiB0aWdodGVuIHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgYW5kIHJlbW92ZSB0aGlzIGNoZWNrXG4gICAgaWYgKGJ5dGVzID09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAob3B0X2xlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBvcHRfbGVuZ3RoID0gYnl0ZXMubGVuZ3RoO1xuICAgIH1cblxuICAgIHZhciBsZW5ndGhNaW51c0Jsb2NrID0gb3B0X2xlbmd0aCAtIHRoaXMuYmxvY2tTaXplO1xuICAgIHZhciBuID0gMDtcbiAgICAvLyBVc2luZyBsb2NhbCBpbnN0ZWFkIG9mIG1lbWJlciB2YXJpYWJsZXMgZ2l2ZXMgfjUlIHNwZWVkdXAgb24gRmlyZWZveCAxNi5cbiAgICB2YXIgYnVmID0gdGhpcy5idWZfO1xuICAgIHZhciBpbmJ1ZiA9IHRoaXMuaW5idWZfO1xuXG4gICAgLy8gVGhlIG91dGVyIHdoaWxlIGxvb3Agc2hvdWxkIGV4ZWN1dGUgYXQgbW9zdCB0d2ljZS5cbiAgICB3aGlsZSAobiA8IG9wdF9sZW5ndGgpIHtcbiAgICAgIC8vIFdoZW4gd2UgaGF2ZSBubyBkYXRhIGluIHRoZSBibG9jayB0byB0b3AgdXAsIHdlIGNhbiBkaXJlY3RseSBwcm9jZXNzIHRoZVxuICAgICAgLy8gaW5wdXQgYnVmZmVyIChhc3N1bWluZyBpdCBjb250YWlucyBzdWZmaWNpZW50IGRhdGEpLiBUaGlzIGdpdmVzIH4yNSVcbiAgICAgIC8vIHNwZWVkdXAgb24gQ2hyb21lIDIzIGFuZCB+MTUlIHNwZWVkdXAgb24gRmlyZWZveCAxNiwgYnV0IHJlcXVpcmVzIHRoYXRcbiAgICAgIC8vIHRoZSBkYXRhIGlzIHByb3ZpZGVkIGluIGxhcmdlIGNodW5rcyAob3IgaW4gbXVsdGlwbGVzIG9mIDY0IGJ5dGVzKS5cbiAgICAgIGlmIChpbmJ1ZiA9PSAwKSB7XG4gICAgICAgIHdoaWxlIChuIDw9IGxlbmd0aE1pbnVzQmxvY2spIHtcbiAgICAgICAgICB0aGlzLmNvbXByZXNzXyhieXRlcywgbik7XG4gICAgICAgICAgbiArPSB0aGlzLmJsb2NrU2l6ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xuICAgICAgICB3aGlsZSAobiA8IG9wdF9sZW5ndGgpIHtcbiAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXMuY2hhckNvZGVBdChuKTtcbiAgICAgICAgICArK2luYnVmO1xuICAgICAgICAgICsrbjtcbiAgICAgICAgICBpZiAoaW5idWYgPT0gdGhpcy5ibG9ja1NpemUpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XG4gICAgICAgICAgICBpbmJ1ZiA9IDA7XG4gICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdoaWxlIChuIDwgb3B0X2xlbmd0aCkge1xuICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlc1tuXTtcbiAgICAgICAgICArK2luYnVmO1xuICAgICAgICAgICsrbjtcbiAgICAgICAgICBpZiAoaW5idWYgPT0gdGhpcy5ibG9ja1NpemUpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XG4gICAgICAgICAgICBpbmJ1ZiA9IDA7XG4gICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmluYnVmXyA9IGluYnVmO1xuICAgIHRoaXMudG90YWxfICs9IG9wdF9sZW5ndGg7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGRpZ2VzdCgpIHtcbiAgICB2YXIgZGlnZXN0ID0gW107XG4gICAgdmFyIHRvdGFsQml0cyA9IHRoaXMudG90YWxfICogODtcblxuICAgIC8vIEFkZCBwYWQgMHg4MCAweDAwKi5cbiAgICBpZiAodGhpcy5pbmJ1Zl8gPCA1Nikge1xuICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCA1NiAtIHRoaXMuaW5idWZfKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCB0aGlzLmJsb2NrU2l6ZSAtICh0aGlzLmluYnVmXyAtIDU2KSk7XG4gICAgfVxuXG4gICAgLy8gQWRkICMgYml0cy5cbiAgICBmb3IgKHZhciBpID0gdGhpcy5ibG9ja1NpemUgLSAxOyBpID49IDU2OyBpLS0pIHtcbiAgICAgIHRoaXMuYnVmX1tpXSA9IHRvdGFsQml0cyAmIDI1NTtcbiAgICAgIHRvdGFsQml0cyAvPSAyNTY7IC8vIERvbid0IHVzZSBiaXQtc2hpZnRpbmcgaGVyZSFcbiAgICB9XG5cbiAgICB0aGlzLmNvbXByZXNzXyh0aGlzLmJ1Zl8pO1xuXG4gICAgdmFyIG4gPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICBmb3IgKHZhciBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7XG4gICAgICAgIGRpZ2VzdFtuXSA9ICh0aGlzLmNoYWluX1tpXSA+PiBqKSAmIDI1NTtcbiAgICAgICAgKytuO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGlnZXN0O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZXhwb3J0IHR5cGUgTmV4dEZuPFQ+ID0gKHZhbHVlOiBUKSA9PiB2b2lkO1xuZXhwb3J0IHR5cGUgRXJyb3JGbiA9IChlcnJvcjogRXJyb3IpID0+IHZvaWQ7XG5leHBvcnQgdHlwZSBDb21wbGV0ZUZuID0gKCkgPT4gdm9pZDtcblxuZXhwb3J0IGludGVyZmFjZSBPYnNlcnZlcjxUPiB7XG4gIC8vIENhbGxlZCBvbmNlIGZvciBlYWNoIHZhbHVlIGluIGEgc3RyZWFtIG9mIHZhbHVlcy5cbiAgbmV4dDogTmV4dEZuPFQ+O1xuXG4gIC8vIEEgc3RyZWFtIHRlcm1pbmF0ZXMgYnkgYSBzaW5nbGUgY2FsbCB0byBFSVRIRVIgZXJyb3IoKSBvciBjb21wbGV0ZSgpLlxuICBlcnJvcjogRXJyb3JGbjtcblxuICAvLyBObyBldmVudHMgd2lsbCBiZSBzZW50IHRvIG5leHQoKSBvbmNlIGNvbXBsZXRlKCkgaXMgY2FsbGVkLlxuICBjb21wbGV0ZTogQ29tcGxldGVGbjtcbn1cblxuLy8gQWxsb3cgZm9yIGFueSBvZiB0aGUgT2JzZXJ2ZXIgbWV0aG9kcyB0byBiZSB1bmRlZmluZWQuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnRpYWxPYnNlcnZlcjxUPiB7XG4gIG5leHQ/OiBOZXh0Rm48VD47XG4gIGVycm9yPzogRXJyb3JGbjtcbiAgY29tcGxldGU/OiBDb21wbGV0ZUZuO1xufVxuXG4vLyBUT0RPOiBTdXBwb3J0IGFsc28gVW5zdWJzY3JpYmUudW5zdWJzY3JpYmU/XG5leHBvcnQgdHlwZSBVbnN1YnNjcmliZSA9ICgpID0+IHZvaWQ7XG5cbi8qKlxuICogVGhlIFN1YnNjcmliZSBpbnRlcmZhY2UgaGFzIHR3byBmb3JtcyAtIHBhc3NpbmcgdGhlIGlubGluZSBmdW5jdGlvblxuICogY2FsbGJhY2tzLCBvciBhIG9iamVjdCBpbnRlcmZhY2Ugd2l0aCBjYWxsYmFjayBwcm9wZXJ0aWVzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN1YnNjcmliZTxUPiB7XG4gIChuZXh0PzogTmV4dEZuPFQ+LCBlcnJvcj86IEVycm9yRm4sIGNvbXBsZXRlPzogQ29tcGxldGVGbik6IFVuc3Vic2NyaWJlO1xuICAob2JzZXJ2ZXI6IFBhcnRpYWxPYnNlcnZlcjxUPik6IFVuc3Vic2NyaWJlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE9ic2VydmFibGU8VD4ge1xuICAvLyBTdWJzY3JpYmUgbWV0aG9kXG4gIHN1YnNjcmliZTogU3Vic2NyaWJlPFQ+O1xufVxuXG5leHBvcnQgdHlwZSBFeGVjdXRvcjxUPiA9IChvYnNlcnZlcjogT2JzZXJ2ZXI8VD4pID0+IHZvaWQ7XG5cbi8qKlxuICogSGVscGVyIHRvIG1ha2UgYSBTdWJzY3JpYmUgZnVuY3Rpb24gKGp1c3QgbGlrZSBQcm9taXNlIGhlbHBzIG1ha2UgYVxuICogVGhlbmFibGUpLlxuICpcbiAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxuICogICAgIGFzIGEgcHJveHkuXG4gKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdWJzY3JpYmU8VD4oXG4gIGV4ZWN1dG9yOiBFeGVjdXRvcjxUPixcbiAgb25Ob09ic2VydmVycz86IEV4ZWN1dG9yPFQ+XG4pOiBTdWJzY3JpYmU8VD4ge1xuICBsZXQgcHJveHkgPSBuZXcgT2JzZXJ2ZXJQcm94eTxUPihleGVjdXRvciwgb25Ob09ic2VydmVycyk7XG4gIHJldHVybiBwcm94eS5zdWJzY3JpYmUuYmluZChwcm94eSk7XG59XG5cbi8qKlxuICogSW1wbGVtZW50IGZhbi1vdXQgZm9yIGFueSBudW1iZXIgb2YgT2JzZXJ2ZXJzIGF0dGFjaGVkIHZpYSBhIHN1YnNjcmliZVxuICogZnVuY3Rpb24uXG4gKi9cbmNsYXNzIE9ic2VydmVyUHJveHk8VD4gaW1wbGVtZW50cyBPYnNlcnZlcjxUPiB7XG4gIHByaXZhdGUgb2JzZXJ2ZXJzOiBBcnJheTxPYnNlcnZlcjxUPj4gfCB1bmRlZmluZWQgPSBbXTtcbiAgcHJpdmF0ZSB1bnN1YnNjcmliZXM6IFVuc3Vic2NyaWJlW10gPSBbXTtcbiAgcHJpdmF0ZSBvbk5vT2JzZXJ2ZXJzOiBFeGVjdXRvcjxUPiB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBvYnNlcnZlckNvdW50ID0gMDtcbiAgLy8gTWljcm8tdGFzayBzY2hlZHVsaW5nIGJ5IGNhbGxpbmcgdGFzay50aGVuKCkuXG4gIHByaXZhdGUgdGFzayA9IFByb21pc2UucmVzb2x2ZSgpO1xuICBwcml2YXRlIGZpbmFsaXplZCA9IGZhbHNlO1xuICBwcml2YXRlIGZpbmFsRXJyb3I6IEVycm9yO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcbiAgICogICAgIGFzIGEgcHJveHkuXG4gICAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGV4ZWN1dG9yOiBFeGVjdXRvcjxUPiwgb25Ob09ic2VydmVycz86IEV4ZWN1dG9yPFQ+KSB7XG4gICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gb25Ob09ic2VydmVycztcbiAgICAvLyBDYWxsIHRoZSBleGVjdXRvciBhc3luY2hyb25vdXNseSBzbyBzdWJzY3JpYmVycyB0aGF0IGFyZSBjYWxsZWRcbiAgICAvLyBzeW5jaHJvbm91c2x5IGFmdGVyIHRoZSBjcmVhdGlvbiBvZiB0aGUgc3Vic2NyaWJlIGZ1bmN0aW9uXG4gICAgLy8gY2FuIHN0aWxsIHJlY2VpdmUgdGhlIHZlcnkgZmlyc3QgdmFsdWUgZ2VuZXJhdGVkIGluIHRoZSBleGVjdXRvci5cbiAgICB0aGlzLnRhc2tcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgZXhlY3V0b3IodGhpcyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGUgPT4ge1xuICAgICAgICB0aGlzLmVycm9yKGUpO1xuICAgICAgfSk7XG4gIH1cblxuICBuZXh0KHZhbHVlOiBUKSB7XG4gICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyOiBPYnNlcnZlcjxUPikgPT4ge1xuICAgICAgb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XG4gICAgfSk7XG4gIH1cblxuICBlcnJvcihlcnJvcjogRXJyb3IpIHtcbiAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXI6IE9ic2VydmVyPFQ+KSA9PiB7XG4gICAgICBvYnNlcnZlci5lcnJvcihlcnJvcik7XG4gICAgfSk7XG4gICAgdGhpcy5jbG9zZShlcnJvcik7XG4gIH1cblxuICBjb21wbGV0ZSgpIHtcbiAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXI6IE9ic2VydmVyPFQ+KSA9PiB7XG4gICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzY3JpYmUgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgYW4gT2JzZXJ2ZXIgdG8gdGhlIGZhbi1vdXQgbGlzdC5cbiAgICpcbiAgICogLSBXZSByZXF1aXJlIHRoYXQgbm8gZXZlbnQgaXMgc2VudCB0byBhIHN1YnNjcmliZXIgc3ljaHJvbm91c2x5IHRvIHRoZWlyXG4gICAqICAgY2FsbCB0byBzdWJzY3JpYmUoKS5cbiAgICovXG4gIHN1YnNjcmliZShcbiAgICBuZXh0T3JPYnNlcnZlcjogUGFydGlhbE9ic2VydmVyPFQ+IHwgRnVuY3Rpb24sXG4gICAgZXJyb3I/OiBFcnJvckZuLFxuICAgIGNvbXBsZXRlPzogQ29tcGxldGVGblxuICApOiBVbnN1YnNjcmliZSB7XG4gICAgbGV0IG9ic2VydmVyOiBPYnNlcnZlcjxUPjtcblxuICAgIGlmIChcbiAgICAgIG5leHRPck9ic2VydmVyID09PSB1bmRlZmluZWQgJiZcbiAgICAgIGVycm9yID09PSB1bmRlZmluZWQgJiZcbiAgICAgIGNvbXBsZXRlID09PSB1bmRlZmluZWRcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBPYnNlcnZlci4nKTtcbiAgICB9XG5cbiAgICAvLyBBc3NlbWJsZSBhbiBPYnNlcnZlciBvYmplY3Qgd2hlbiBwYXNzZWQgYXMgY2FsbGJhY2sgZnVuY3Rpb25zLlxuICAgIGlmIChpbXBsZW1lbnRzQW55TWV0aG9kcyhuZXh0T3JPYnNlcnZlciwgWyduZXh0JywgJ2Vycm9yJywgJ2NvbXBsZXRlJ10pKSB7XG4gICAgICBvYnNlcnZlciA9IG5leHRPck9ic2VydmVyIGFzIE9ic2VydmVyPFQ+O1xuICAgIH0gZWxzZSB7XG4gICAgICBvYnNlcnZlciA9IHtcbiAgICAgICAgbmV4dDogKG5leHRPck9ic2VydmVyIGFzIGFueSkgYXMgTmV4dEZuPFQ+LFxuICAgICAgICBlcnJvcjogZXJyb3IsXG4gICAgICAgIGNvbXBsZXRlOiBjb21wbGV0ZVxuICAgICAgfSBhcyBPYnNlcnZlcjxUPjtcbiAgICB9XG5cbiAgICBpZiAob2JzZXJ2ZXIubmV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBvYnNlcnZlci5uZXh0ID0gbm9vcCBhcyBOZXh0Rm48VD47XG4gICAgfVxuICAgIGlmIChvYnNlcnZlci5lcnJvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBvYnNlcnZlci5lcnJvciA9IG5vb3AgYXMgRXJyb3JGbjtcbiAgICB9XG4gICAgaWYgKG9ic2VydmVyLmNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG9ic2VydmVyLmNvbXBsZXRlID0gbm9vcCBhcyBDb21wbGV0ZUZuO1xuICAgIH1cblxuICAgIGxldCB1bnN1YiA9IHRoaXMudW5zdWJzY3JpYmVPbmUuYmluZCh0aGlzLCB0aGlzLm9ic2VydmVycyEubGVuZ3RoKTtcblxuICAgIC8vIEF0dGVtcHQgdG8gc3Vic2NyaWJlIHRvIGEgdGVybWluYXRlZCBPYnNlcnZhYmxlIC0gd2VcbiAgICAvLyBqdXN0IHJlc3BvbmQgdG8gdGhlIE9ic2VydmVyIHdpdGggdGhlIGZpbmFsIGVycm9yIG9yIGNvbXBsZXRlXG4gICAgLy8gZXZlbnQuXG4gICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XG4gICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHRoaXMuZmluYWxFcnJvcikge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IodGhpcy5maW5hbEVycm9yKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBub3RoaW5nXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5vYnNlcnZlcnMhLnB1c2gob2JzZXJ2ZXIgYXMgT2JzZXJ2ZXI8VD4pO1xuXG4gICAgcmV0dXJuIHVuc3ViO1xuICB9XG5cbiAgLy8gVW5zdWJzY3JpYmUgaXMgc3luY2hyb25vdXMgLSB3ZSBndWFyYW50ZWUgdGhhdCBubyBldmVudHMgYXJlIHNlbnQgdG9cbiAgLy8gYW55IHVuc3Vic2NyaWJlZCBPYnNlcnZlci5cbiAgcHJpdmF0ZSB1bnN1YnNjcmliZU9uZShpOiBudW1iZXIpIHtcbiAgICBpZiAodGhpcy5vYnNlcnZlcnMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLm9ic2VydmVyc1tpXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZGVsZXRlIHRoaXMub2JzZXJ2ZXJzW2ldO1xuXG4gICAgdGhpcy5vYnNlcnZlckNvdW50IC09IDE7XG4gICAgaWYgKHRoaXMub2JzZXJ2ZXJDb3VudCA9PT0gMCAmJiB0aGlzLm9uTm9PYnNlcnZlcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZm9yRWFjaE9ic2VydmVyKGZuOiAob2JzZXJ2ZXI6IE9ic2VydmVyPFQ+KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XG4gICAgICAvLyBBbHJlYWR5IGNsb3NlZCBieSBwcmV2aW91cyBldmVudC4uLi5qdXN0IGVhdCB0aGUgYWRkaXRpb25hbCB2YWx1ZXMuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2luY2Ugc2VuZE9uZSBjYWxscyBhc3luY2hyb25vdXNseSAtIHRoZXJlIGlzIG5vIGNoYW5jZSB0aGF0XG4gICAgLy8gdGhpcy5vYnNlcnZlcnMgd2lsbCBiZWNvbWUgdW5kZWZpbmVkLlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMhLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnNlbmRPbmUoaSwgZm4pO1xuICAgIH1cbiAgfVxuXG4gIC8vIENhbGwgdGhlIE9ic2VydmVyIHZpYSBvbmUgb2YgaXQncyBjYWxsYmFjayBmdW5jdGlvbi4gV2UgYXJlIGNhcmVmdWwgdG9cbiAgLy8gY29uZmlybSB0aGF0IHRoZSBvYnNlcnZlIGhhcyBub3QgYmVlbiB1bnN1YnNjcmliZWQgc2luY2UgdGhpcyBhc3luY2hyb25vdXNcbiAgLy8gZnVuY3Rpb24gaGFkIGJlZW4gcXVldWVkLlxuICBwcml2YXRlIHNlbmRPbmUoaTogbnVtYmVyLCBmbjogKG9ic2VydmVyOiBPYnNlcnZlcjxUPikgPT4gdm9pZCk6IHZvaWQge1xuICAgIC8vIEV4ZWN1dGUgdGhlIGNhbGxiYWNrIGFzeW5jaHJvbm91c2x5XG4gICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xuICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQgJiYgdGhpcy5vYnNlcnZlcnNbaV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZuKHRoaXMub2JzZXJ2ZXJzW2ldKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIElnbm9yZSBleGNlcHRpb25zIHJhaXNlZCBpbiBPYnNlcnZlcnMgb3IgbWlzc2luZyBtZXRob2RzIG9mIGFuXG4gICAgICAgICAgLy8gT2JzZXJ2ZXIuXG4gICAgICAgICAgLy8gTG9nIGVycm9yIHRvIGNvbnNvbGUuIGIvMzE0MDQ4MDZcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUuZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNsb3NlKGVycj86IEVycm9yKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcbiAgICBpZiAoZXJyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuZmluYWxFcnJvciA9IGVycjtcbiAgICB9XG4gICAgLy8gUHJveHkgaXMgbm8gbG9uZ2VyIG5lZWRlZCAtIGdhcmJhZ2UgY29sbGVjdCByZWZlcmVuY2VzXG4gICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5vYnNlcnZlcnMgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSB1bmRlZmluZWQ7XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqIFR1cm4gc3luY2hyb25vdXMgZnVuY3Rpb24gaW50byBvbmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzeW5jKGZuOiBGdW5jdGlvbiwgb25FcnJvcj86IEVycm9yRm4pOiBGdW5jdGlvbiB7XG4gIHJldHVybiAoLi4uYXJnczogYW55W10pID0+IHtcbiAgICBQcm9taXNlLnJlc29sdmUodHJ1ZSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgZm4oLi4uYXJncyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcjogRXJyb3IpID0+IHtcbiAgICAgICAgaWYgKG9uRXJyb3IpIHtcbiAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG59XG5cbi8qKlxuICogUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBwYXNzZWQgaW4gaW1wbGVtZW50cyBhbnkgb2YgdGhlIG5hbWVkIG1ldGhvZHMuXG4gKi9cbmZ1bmN0aW9uIGltcGxlbWVudHNBbnlNZXRob2RzKG9iajogYW55LCBtZXRob2RzOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZm9yIChsZXQgbWV0aG9kIG9mIG1ldGhvZHMpIHtcbiAgICBpZiAobWV0aG9kIGluIG9iaiAmJiB0eXBlb2Ygb2JqW21ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gbm9vcCgpOiB2b2lkIHtcbiAgLy8gZG8gbm90aGluZ1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnQnO1xuXG4vLyBDb2RlIG9yaWdpbmFsbHkgY2FtZSBmcm9tIGdvb2cuY3J5cHQuc3RyaW5nVG9VdGY4Qnl0ZUFycmF5LCBidXQgZm9yIHNvbWUgcmVhc29uIHRoZXlcbi8vIGF1dG9tYXRpY2FsbHkgcmVwbGFjZWQgJ1xcclxcbicgd2l0aCAnXFxuJywgYW5kIHRoZXkgZGlkbid0IGhhbmRsZSBzdXJyb2dhdGUgcGFpcnMsXG4vLyBzbyBpdCdzIGJlZW4gbW9kaWZpZWQuXG5cbi8vIE5vdGUgdGhhdCBub3QgYWxsIFVuaWNvZGUgY2hhcmFjdGVycyBhcHBlYXIgYXMgc2luZ2xlIGNoYXJhY3RlcnMgaW4gSmF2YVNjcmlwdCBzdHJpbmdzLlxuLy8gZnJvbUNoYXJDb2RlIHJldHVybnMgdGhlIFVURi0xNiBlbmNvZGluZyBvZiBhIGNoYXJhY3RlciAtIHNvIHNvbWUgVW5pY29kZSBjaGFyYWN0ZXJzXG4vLyB1c2UgMiBjaGFyYWN0ZXJzIGluIEphdmFzY3JpcHQuICBBbGwgNC1ieXRlIFVURi04IGNoYXJhY3RlcnMgYmVnaW4gd2l0aCBhIGZpcnN0XG4vLyBjaGFyYWN0ZXIgaW4gdGhlIHJhbmdlIDB4RDgwMCAtIDB4REJGRiAodGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhIHNvLWNhbGxlZCBzdXJyb2dhdGVcbi8vIHBhaXIpLlxuLy8gU2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi81LjEvI3NlYy0xNS4xLjNcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuZXhwb3J0IGNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5ID0gZnVuY3Rpb24oc3RyKSB7XG4gIHZhciBvdXQgPSBbXSxcbiAgICBwID0gMDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuXG4gICAgLy8gSXMgdGhpcyB0aGUgbGVhZCBzdXJyb2dhdGUgaW4gYSBzdXJyb2dhdGUgcGFpcj9cbiAgICBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcbiAgICAgIHZhciBoaWdoID0gYyAtIDB4ZDgwMDsgLy8gdGhlIGhpZ2ggMTAgYml0cy5cbiAgICAgIGkrKztcbiAgICAgIGFzc2VydChpIDwgc3RyLmxlbmd0aCwgJ1N1cnJvZ2F0ZSBwYWlyIG1pc3NpbmcgdHJhaWwgc3Vycm9nYXRlLicpO1xuICAgICAgdmFyIGxvdyA9IHN0ci5jaGFyQ29kZUF0KGkpIC0gMHhkYzAwOyAvLyB0aGUgbG93IDEwIGJpdHMuXG4gICAgICBjID0gMHgxMDAwMCArIChoaWdoIDw8IDEwKSArIGxvdztcbiAgICB9XG5cbiAgICBpZiAoYyA8IDEyOCkge1xuICAgICAgb3V0W3ArK10gPSBjO1xuICAgIH0gZWxzZSBpZiAoYyA8IDIwNDgpIHtcbiAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XG4gICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xuICAgIH0gZWxzZSBpZiAoYyA8IDY1NTM2KSB7XG4gICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcbiAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xuICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XG4gICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XG4gICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcbiAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XG4gICAgfVxuICB9XG4gIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZSBsZW5ndGggd2l0aG91dCBhY3R1YWxseSBjb252ZXJ0aW5nOyB1c2VmdWwgZm9yIGRvaW5nIGNoZWFwZXIgdmFsaWRhdGlvbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuZXhwb3J0IGNvbnN0IHN0cmluZ0xlbmd0aCA9IGZ1bmN0aW9uKHN0cikge1xuICB2YXIgcCA9IDA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICBpZiAoYyA8IDEyOCkge1xuICAgICAgcCsrO1xuICAgIH0gZWxzZSBpZiAoYyA8IDIwNDgpIHtcbiAgICAgIHAgKz0gMjtcbiAgICB9IGVsc2UgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XG4gICAgICAvLyBMZWFkIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyLiAgVGhlIHBhaXIgdG9nZXRoZXIgd2lsbCB0YWtlIDQgYnl0ZXMgdG8gcmVwcmVzZW50LlxuICAgICAgcCArPSA0O1xuICAgICAgaSsrOyAvLyBza2lwIHRyYWlsIHN1cnJvZ2F0ZS5cbiAgICB9IGVsc2Uge1xuICAgICAgcCArPSAzO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcDtcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgYXBwcm9wcmlhdGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgZm9yIGEgcHVibGljIGZ1bmN0aW9uLlxuICogVGhyb3dzIGFuIGVycm9yIGlmIGl0IGZhaWxzLlxuICpcbiAqIEBwYXJhbSB7IXN0cmluZ30gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXG4gKiBAcGFyYW0geyFudW1iZXJ9IG1pbkNvdW50IFRoZSBtaW5pbXVtIG51bWJlciBvZiBhcmd1bWVudHMgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXG4gKiBAcGFyYW0geyFudW1iZXJ9IG1heENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBhcmd1bWVudCB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcbiAqIEBwYXJhbSB7IW51bWJlcn0gYXJnQ291bnQgVGhlIGFjdHVhbCBudW1iZXIgb2YgYXJndW1lbnRzIHByb3ZpZGVkLlxuICovXG5leHBvcnQgY29uc3QgdmFsaWRhdGVBcmdDb3VudCA9IGZ1bmN0aW9uKGZuTmFtZSwgbWluQ291bnQsIG1heENvdW50LCBhcmdDb3VudCkge1xuICB2YXIgYXJnRXJyb3I7XG4gIGlmIChhcmdDb3VudCA8IG1pbkNvdW50KSB7XG4gICAgYXJnRXJyb3IgPSAnYXQgbGVhc3QgJyArIG1pbkNvdW50O1xuICB9IGVsc2UgaWYgKGFyZ0NvdW50ID4gbWF4Q291bnQpIHtcbiAgICBhcmdFcnJvciA9IG1heENvdW50ID09PSAwID8gJ25vbmUnIDogJ25vIG1vcmUgdGhhbiAnICsgbWF4Q291bnQ7XG4gIH1cbiAgaWYgKGFyZ0Vycm9yKSB7XG4gICAgdmFyIGVycm9yID1cbiAgICAgIGZuTmFtZSArXG4gICAgICAnIGZhaWxlZDogV2FzIGNhbGxlZCB3aXRoICcgK1xuICAgICAgYXJnQ291bnQgK1xuICAgICAgKGFyZ0NvdW50ID09PSAxID8gJyBhcmd1bWVudC4nIDogJyBhcmd1bWVudHMuJykgK1xuICAgICAgJyBFeHBlY3RzICcgK1xuICAgICAgYXJnRXJyb3IgK1xuICAgICAgJy4nO1xuICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gIH1cbn07XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgc3RyaW5nIHRvIHByZWZpeCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IGZhaWxlZCBhcmd1bWVudCB2YWxpZGF0aW9uXG4gKlxuICogQHBhcmFtIHshc3RyaW5nfSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcbiAqIEBwYXJhbSB7IW51bWJlcn0gYXJndW1lbnROdW1iZXIgVGhlIGluZGV4IG9mIHRoZSBhcmd1bWVudFxuICogQHBhcmFtIHtib29sZWFufSBvcHRpb25hbCBXaGV0aGVyIG9yIG5vdCB0aGUgYXJndW1lbnQgaXMgb3B0aW9uYWxcbiAqIEByZXR1cm4geyFzdHJpbmd9IFRoZSBwcmVmaXggdG8gYWRkIHRvIHRoZSBlcnJvciB0aHJvd24gZm9yIHZhbGlkYXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TnVtYmVyLCBvcHRpb25hbCkge1xuICB2YXIgYXJnTmFtZSA9ICcnO1xuICBzd2l0Y2ggKGFyZ3VtZW50TnVtYmVyKSB7XG4gICAgY2FzZSAxOlxuICAgICAgYXJnTmFtZSA9IG9wdGlvbmFsID8gJ2ZpcnN0JyA6ICdGaXJzdCc7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDI6XG4gICAgICBhcmdOYW1lID0gb3B0aW9uYWwgPyAnc2Vjb25kJyA6ICdTZWNvbmQnO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOlxuICAgICAgYXJnTmFtZSA9IG9wdGlvbmFsID8gJ3RoaXJkJyA6ICdUaGlyZCc7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQ6XG4gICAgICBhcmdOYW1lID0gb3B0aW9uYWwgPyAnZm91cnRoJyA6ICdGb3VydGgnO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ2Vycm9yUHJlZml4IGNhbGxlZCB3aXRoIGFyZ3VtZW50TnVtYmVyID4gNC4gIE5lZWQgdG8gdXBkYXRlIGl0PydcbiAgICAgICk7XG4gIH1cblxuICB2YXIgZXJyb3IgPSBmbk5hbWUgKyAnIGZhaWxlZDogJztcblxuICBlcnJvciArPSBhcmdOYW1lICsgJyBhcmd1bWVudCAnO1xuICByZXR1cm4gZXJyb3I7XG59XG5cbi8qKlxuICogQHBhcmFtIHshc3RyaW5nfSBmbk5hbWVcbiAqIEBwYXJhbSB7IW51bWJlcn0gYXJndW1lbnROdW1iZXJcbiAqIEBwYXJhbSB7IXN0cmluZ30gbmFtZXNwYWNlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZU5hbWVzcGFjZShmbk5hbWUsIGFyZ3VtZW50TnVtYmVyLCBuYW1lc3BhY2UsIG9wdGlvbmFsKSB7XG4gIGlmIChvcHRpb25hbCAmJiAhbmFtZXNwYWNlKSByZXR1cm47XG4gIGlmICh0eXBlb2YgbmFtZXNwYWNlICE9PSAnc3RyaW5nJykge1xuICAgIC8vVE9ETzogSSBzaG91bGQgZG8gbW9yZSB2YWxpZGF0aW9uIGhlcmUuIFdlIG9ubHkgYWxsb3cgY2VydGFpbiBjaGFycyBpbiBuYW1lc3BhY2VzLlxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIG9wdGlvbmFsKSArXG4gICAgICAgICdtdXN0IGJlIGEgdmFsaWQgZmlyZWJhc2UgbmFtZXNwYWNlLidcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIGNhbGxiYWNrLCBvcHRpb25hbCkge1xuICBpZiAob3B0aW9uYWwgJiYgIWNhbGxiYWNrKSByZXR1cm47XG4gIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE51bWJlciwgb3B0aW9uYWwpICtcbiAgICAgICAgJ211c3QgYmUgYSB2YWxpZCBmdW5jdGlvbi4nXG4gICAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQ29udGV4dE9iamVjdChcbiAgZm5OYW1lLFxuICBhcmd1bWVudE51bWJlcixcbiAgY29udGV4dCxcbiAgb3B0aW9uYWxcbikge1xuICBpZiAob3B0aW9uYWwgJiYgIWNvbnRleHQpIHJldHVybjtcbiAgaWYgKHR5cGVvZiBjb250ZXh0ICE9PSAnb2JqZWN0JyB8fCBjb250ZXh0ID09PSBudWxsKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIG9wdGlvbmFsKSArXG4gICAgICAgICdtdXN0IGJlIGEgdmFsaWQgY29udGV4dCBvYmplY3QuJ1xuICAgICk7XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL2F4aW9zJyk7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG52YXIgc2V0dGxlID0gcmVxdWlyZSgnLi8uLi9jb3JlL3NldHRsZScpO1xudmFyIGJ1aWxkVVJMID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2J1aWxkVVJMJyk7XG52YXIgYnVpbGRGdWxsUGF0aCA9IHJlcXVpcmUoJy4uL2NvcmUvYnVpbGRGdWxsUGF0aCcpO1xudmFyIHBhcnNlSGVhZGVycyA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9wYXJzZUhlYWRlcnMnKTtcbnZhciBpc1VSTFNhbWVPcmlnaW4gPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvaXNVUkxTYW1lT3JpZ2luJyk7XG52YXIgY3JlYXRlRXJyb3IgPSByZXF1aXJlKCcuLi9jb3JlL2NyZWF0ZUVycm9yJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24geGhyQWRhcHRlcihjb25maWcpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGRpc3BhdGNoWGhyUmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcmVxdWVzdERhdGEgPSBjb25maWcuZGF0YTtcbiAgICB2YXIgcmVxdWVzdEhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcblxuICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKHJlcXVlc3REYXRhKSkge1xuICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzWydDb250ZW50LVR5cGUnXTsgLy8gTGV0IHRoZSBicm93c2VyIHNldCBpdFxuICAgIH1cblxuICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAvLyBIVFRQIGJhc2ljIGF1dGhlbnRpY2F0aW9uXG4gICAgaWYgKGNvbmZpZy5hdXRoKSB7XG4gICAgICB2YXIgdXNlcm5hbWUgPSBjb25maWcuYXV0aC51c2VybmFtZSB8fCAnJztcbiAgICAgIHZhciBwYXNzd29yZCA9IGNvbmZpZy5hdXRoLnBhc3N3b3JkIHx8ICcnO1xuICAgICAgcmVxdWVzdEhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCYXNpYyAnICsgYnRvYSh1c2VybmFtZSArICc6JyArIHBhc3N3b3JkKTtcbiAgICB9XG5cbiAgICB2YXIgZnVsbFBhdGggPSBidWlsZEZ1bGxQYXRoKGNvbmZpZy5iYXNlVVJMLCBjb25maWcudXJsKTtcbiAgICByZXF1ZXN0Lm9wZW4oY29uZmlnLm1ldGhvZC50b1VwcGVyQ2FzZSgpLCBidWlsZFVSTChmdWxsUGF0aCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpLCB0cnVlKTtcblxuICAgIC8vIFNldCB0aGUgcmVxdWVzdCB0aW1lb3V0IGluIE1TXG4gICAgcmVxdWVzdC50aW1lb3V0ID0gY29uZmlnLnRpbWVvdXQ7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIHJlYWR5IHN0YXRlXG4gICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVMb2FkKCkge1xuICAgICAgaWYgKCFyZXF1ZXN0IHx8IHJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gNCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSByZXF1ZXN0IGVycm9yZWQgb3V0IGFuZCB3ZSBkaWRuJ3QgZ2V0IGEgcmVzcG9uc2UsIHRoaXMgd2lsbCBiZVxuICAgICAgLy8gaGFuZGxlZCBieSBvbmVycm9yIGluc3RlYWRcbiAgICAgIC8vIFdpdGggb25lIGV4Y2VwdGlvbjogcmVxdWVzdCB0aGF0IHVzaW5nIGZpbGU6IHByb3RvY29sLCBtb3N0IGJyb3dzZXJzXG4gICAgICAvLyB3aWxsIHJldHVybiBzdGF0dXMgYXMgMCBldmVuIHRob3VnaCBpdCdzIGEgc3VjY2Vzc2Z1bCByZXF1ZXN0XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDAgJiYgIShyZXF1ZXN0LnJlc3BvbnNlVVJMICYmIHJlcXVlc3QucmVzcG9uc2VVUkwuaW5kZXhPZignZmlsZTonKSA9PT0gMCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBQcmVwYXJlIHRoZSByZXNwb25zZVxuICAgICAgdmFyIHJlc3BvbnNlSGVhZGVycyA9ICdnZXRBbGxSZXNwb25zZUhlYWRlcnMnIGluIHJlcXVlc3QgPyBwYXJzZUhlYWRlcnMocmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkgOiBudWxsO1xuICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9ICFjb25maWcucmVzcG9uc2VUeXBlIHx8IGNvbmZpZy5yZXNwb25zZVR5cGUgPT09ICd0ZXh0JyA/IHJlcXVlc3QucmVzcG9uc2VUZXh0IDogcmVxdWVzdC5yZXNwb25zZTtcbiAgICAgIHZhciByZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YTogcmVzcG9uc2VEYXRhLFxuICAgICAgICBzdGF0dXM6IHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiByZXF1ZXN0LnN0YXR1c1RleHQsXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgY29uZmlnOiBjb25maWcsXG4gICAgICAgIHJlcXVlc3Q6IHJlcXVlc3RcbiAgICAgIH07XG5cbiAgICAgIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEhhbmRsZSBicm93c2VyIHJlcXVlc3QgY2FuY2VsbGF0aW9uIChhcyBvcHBvc2VkIHRvIGEgbWFudWFsIGNhbmNlbGxhdGlvbilcbiAgICByZXF1ZXN0Lm9uYWJvcnQgPSBmdW5jdGlvbiBoYW5kbGVBYm9ydCgpIHtcbiAgICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHJlamVjdChjcmVhdGVFcnJvcignUmVxdWVzdCBhYm9ydGVkJywgY29uZmlnLCAnRUNPTk5BQk9SVEVEJywgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIGxvdyBsZXZlbCBuZXR3b3JrIGVycm9yc1xuICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIGhhbmRsZUVycm9yKCkge1xuICAgICAgLy8gUmVhbCBlcnJvcnMgYXJlIGhpZGRlbiBmcm9tIHVzIGJ5IHRoZSBicm93c2VyXG4gICAgICAvLyBvbmVycm9yIHNob3VsZCBvbmx5IGZpcmUgaWYgaXQncyBhIG5ldHdvcmsgZXJyb3JcbiAgICAgIHJlamVjdChjcmVhdGVFcnJvcignTmV0d29yayBFcnJvcicsIGNvbmZpZywgbnVsbCwgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIHRpbWVvdXRcbiAgICByZXF1ZXN0Lm9udGltZW91dCA9IGZ1bmN0aW9uIGhhbmRsZVRpbWVvdXQoKSB7XG4gICAgICB2YXIgdGltZW91dEVycm9yTWVzc2FnZSA9ICd0aW1lb3V0IG9mICcgKyBjb25maWcudGltZW91dCArICdtcyBleGNlZWRlZCc7XG4gICAgICBpZiAoY29uZmlnLnRpbWVvdXRFcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgdGltZW91dEVycm9yTWVzc2FnZSA9IGNvbmZpZy50aW1lb3V0RXJyb3JNZXNzYWdlO1xuICAgICAgfVxuICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKHRpbWVvdXRFcnJvck1lc3NhZ2UsIGNvbmZpZywgJ0VDT05OQUJPUlRFRCcsXG4gICAgICAgIHJlcXVlc3QpKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEFkZCB4c3JmIGhlYWRlclxuICAgIC8vIFRoaXMgaXMgb25seSBkb25lIGlmIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50LlxuICAgIC8vIFNwZWNpZmljYWxseSBub3QgaWYgd2UncmUgaW4gYSB3ZWIgd29ya2VyLCBvciByZWFjdC1uYXRpdmUuXG4gICAgaWYgKHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkpIHtcbiAgICAgIHZhciBjb29raWVzID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2Nvb2tpZXMnKTtcblxuICAgICAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gICAgICB2YXIgeHNyZlZhbHVlID0gKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMgfHwgaXNVUkxTYW1lT3JpZ2luKGZ1bGxQYXRoKSkgJiYgY29uZmlnLnhzcmZDb29raWVOYW1lID9cbiAgICAgICAgY29va2llcy5yZWFkKGNvbmZpZy54c3JmQ29va2llTmFtZSkgOlxuICAgICAgICB1bmRlZmluZWQ7XG5cbiAgICAgIGlmICh4c3JmVmFsdWUpIHtcbiAgICAgICAgcmVxdWVzdEhlYWRlcnNbY29uZmlnLnhzcmZIZWFkZXJOYW1lXSA9IHhzcmZWYWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGQgaGVhZGVycyB0byB0aGUgcmVxdWVzdFxuICAgIGlmICgnc2V0UmVxdWVzdEhlYWRlcicgaW4gcmVxdWVzdCkge1xuICAgICAgdXRpbHMuZm9yRWFjaChyZXF1ZXN0SGVhZGVycywgZnVuY3Rpb24gc2V0UmVxdWVzdEhlYWRlcih2YWwsIGtleSkge1xuICAgICAgICBpZiAodHlwZW9mIHJlcXVlc3REYXRhID09PSAndW5kZWZpbmVkJyAmJiBrZXkudG9Mb3dlckNhc2UoKSA9PT0gJ2NvbnRlbnQtdHlwZScpIHtcbiAgICAgICAgICAvLyBSZW1vdmUgQ29udGVudC1UeXBlIGlmIGRhdGEgaXMgdW5kZWZpbmVkXG4gICAgICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzW2tleV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gT3RoZXJ3aXNlIGFkZCBoZWFkZXIgdG8gdGhlIHJlcXVlc3RcbiAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoa2V5LCB2YWwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBZGQgd2l0aENyZWRlbnRpYWxzIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG4gICAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcud2l0aENyZWRlbnRpYWxzKSkge1xuICAgICAgcmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgPSAhIWNvbmZpZy53aXRoQ3JlZGVudGlhbHM7XG4gICAgfVxuXG4gICAgLy8gQWRkIHJlc3BvbnNlVHlwZSB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmIChjb25maWcucmVzcG9uc2VUeXBlKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXF1ZXN0LnJlc3BvbnNlVHlwZSA9IGNvbmZpZy5yZXNwb25zZVR5cGU7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIEV4cGVjdGVkIERPTUV4Y2VwdGlvbiB0aHJvd24gYnkgYnJvd3NlcnMgbm90IGNvbXBhdGlibGUgWE1MSHR0cFJlcXVlc3QgTGV2ZWwgMi5cbiAgICAgICAgLy8gQnV0LCB0aGlzIGNhbiBiZSBzdXBwcmVzc2VkIGZvciAnanNvbicgdHlwZSBhcyBpdCBjYW4gYmUgcGFyc2VkIGJ5IGRlZmF1bHQgJ3RyYW5zZm9ybVJlc3BvbnNlJyBmdW5jdGlvbi5cbiAgICAgICAgaWYgKGNvbmZpZy5yZXNwb25zZVR5cGUgIT09ICdqc29uJykge1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgcHJvZ3Jlc3MgaWYgbmVlZGVkXG4gICAgaWYgKHR5cGVvZiBjb25maWcub25Eb3dubG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uRG93bmxvYWRQcm9ncmVzcyk7XG4gICAgfVxuXG4gICAgLy8gTm90IGFsbCBicm93c2VycyBzdXBwb3J0IHVwbG9hZCBldmVudHNcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nICYmIHJlcXVlc3QudXBsb2FkKSB7XG4gICAgICByZXF1ZXN0LnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzKTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7XG4gICAgICAvLyBIYW5kbGUgY2FuY2VsbGF0aW9uXG4gICAgICBjb25maWcuY2FuY2VsVG9rZW4ucHJvbWlzZS50aGVuKGZ1bmN0aW9uIG9uQ2FuY2VsZWQoY2FuY2VsKSB7XG4gICAgICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgcmVqZWN0KGNhbmNlbCk7XG4gICAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdERhdGEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmVxdWVzdERhdGEgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFNlbmQgdGhlIHJlcXVlc3RcbiAgICByZXF1ZXN0LnNlbmQocmVxdWVzdERhdGEpO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBiaW5kID0gcmVxdWlyZSgnLi9oZWxwZXJzL2JpbmQnKTtcbnZhciBBeGlvcyA9IHJlcXVpcmUoJy4vY29yZS9BeGlvcycpO1xudmFyIG1lcmdlQ29uZmlnID0gcmVxdWlyZSgnLi9jb3JlL21lcmdlQ29uZmlnJyk7XG52YXIgZGVmYXVsdHMgPSByZXF1aXJlKCcuL2RlZmF1bHRzJyk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIEF4aW9zXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRlZmF1bHRDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqIEByZXR1cm4ge0F4aW9zfSBBIG5ldyBpbnN0YW5jZSBvZiBBeGlvc1xuICovXG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZShkZWZhdWx0Q29uZmlnKSB7XG4gIHZhciBjb250ZXh0ID0gbmV3IEF4aW9zKGRlZmF1bHRDb25maWcpO1xuICB2YXIgaW5zdGFuY2UgPSBiaW5kKEF4aW9zLnByb3RvdHlwZS5yZXF1ZXN0LCBjb250ZXh0KTtcblxuICAvLyBDb3B5IGF4aW9zLnByb3RvdHlwZSB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIEF4aW9zLnByb3RvdHlwZSwgY29udGV4dCk7XG5cbiAgLy8gQ29weSBjb250ZXh0IHRvIGluc3RhbmNlXG4gIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgY29udGV4dCk7XG5cbiAgcmV0dXJuIGluc3RhbmNlO1xufVxuXG4vLyBDcmVhdGUgdGhlIGRlZmF1bHQgaW5zdGFuY2UgdG8gYmUgZXhwb3J0ZWRcbnZhciBheGlvcyA9IGNyZWF0ZUluc3RhbmNlKGRlZmF1bHRzKTtcblxuLy8gRXhwb3NlIEF4aW9zIGNsYXNzIHRvIGFsbG93IGNsYXNzIGluaGVyaXRhbmNlXG5heGlvcy5BeGlvcyA9IEF4aW9zO1xuXG4vLyBGYWN0b3J5IGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2VzXG5heGlvcy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoaW5zdGFuY2VDb25maWcpIHtcbiAgcmV0dXJuIGNyZWF0ZUluc3RhbmNlKG1lcmdlQ29uZmlnKGF4aW9zLmRlZmF1bHRzLCBpbnN0YW5jZUNvbmZpZykpO1xufTtcblxuLy8gRXhwb3NlIENhbmNlbCAmIENhbmNlbFRva2VuXG5heGlvcy5DYW5jZWwgPSByZXF1aXJlKCcuL2NhbmNlbC9DYW5jZWwnKTtcbmF4aW9zLkNhbmNlbFRva2VuID0gcmVxdWlyZSgnLi9jYW5jZWwvQ2FuY2VsVG9rZW4nKTtcbmF4aW9zLmlzQ2FuY2VsID0gcmVxdWlyZSgnLi9jYW5jZWwvaXNDYW5jZWwnKTtcblxuLy8gRXhwb3NlIGFsbC9zcHJlYWRcbmF4aW9zLmFsbCA9IGZ1bmN0aW9uIGFsbChwcm9taXNlcykge1xuICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xufTtcbmF4aW9zLnNwcmVhZCA9IHJlcXVpcmUoJy4vaGVscGVycy9zcHJlYWQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBheGlvcztcblxuLy8gQWxsb3cgdXNlIG9mIGRlZmF1bHQgaW1wb3J0IHN5bnRheCBpbiBUeXBlU2NyaXB0XG5tb2R1bGUuZXhwb3J0cy5kZWZhdWx0ID0gYXhpb3M7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQSBgQ2FuY2VsYCBpcyBhbiBvYmplY3QgdGhhdCBpcyB0aHJvd24gd2hlbiBhbiBvcGVyYXRpb24gaXMgY2FuY2VsZWQuXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge3N0cmluZz19IG1lc3NhZ2UgVGhlIG1lc3NhZ2UuXG4gKi9cbmZ1bmN0aW9uIENhbmNlbChtZXNzYWdlKSB7XG4gIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG59XG5cbkNhbmNlbC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgcmV0dXJuICdDYW5jZWwnICsgKHRoaXMubWVzc2FnZSA/ICc6ICcgKyB0aGlzLm1lc3NhZ2UgOiAnJyk7XG59O1xuXG5DYW5jZWwucHJvdG90eXBlLl9fQ0FOQ0VMX18gPSB0cnVlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbDtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIENhbmNlbCA9IHJlcXVpcmUoJy4vQ2FuY2VsJyk7XG5cbi8qKlxuICogQSBgQ2FuY2VsVG9rZW5gIGlzIGFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlcXVlc3QgY2FuY2VsbGF0aW9uIG9mIGFuIG9wZXJhdGlvbi5cbiAqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGV4ZWN1dG9yIFRoZSBleGVjdXRvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gQ2FuY2VsVG9rZW4oZXhlY3V0b3IpIHtcbiAgaWYgKHR5cGVvZiBleGVjdXRvciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4ZWN1dG9yIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcbiAgfVxuXG4gIHZhciByZXNvbHZlUHJvbWlzZTtcbiAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gcHJvbWlzZUV4ZWN1dG9yKHJlc29sdmUpIHtcbiAgICByZXNvbHZlUHJvbWlzZSA9IHJlc29sdmU7XG4gIH0pO1xuXG4gIHZhciB0b2tlbiA9IHRoaXM7XG4gIGV4ZWN1dG9yKGZ1bmN0aW9uIGNhbmNlbChtZXNzYWdlKSB7XG4gICAgaWYgKHRva2VuLnJlYXNvbikge1xuICAgICAgLy8gQ2FuY2VsbGF0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVxdWVzdGVkXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdG9rZW4ucmVhc29uID0gbmV3IENhbmNlbChtZXNzYWdlKTtcbiAgICByZXNvbHZlUHJvbWlzZSh0b2tlbi5yZWFzb24pO1xuICB9KTtcbn1cblxuLyoqXG4gKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuICovXG5DYW5jZWxUb2tlbi5wcm90b3R5cGUudGhyb3dJZlJlcXVlc3RlZCA9IGZ1bmN0aW9uIHRocm93SWZSZXF1ZXN0ZWQoKSB7XG4gIGlmICh0aGlzLnJlYXNvbikge1xuICAgIHRocm93IHRoaXMucmVhc29uO1xuICB9XG59O1xuXG4vKipcbiAqIFJldHVybnMgYW4gb2JqZWN0IHRoYXQgY29udGFpbnMgYSBuZXcgYENhbmNlbFRva2VuYCBhbmQgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCxcbiAqIGNhbmNlbHMgdGhlIGBDYW5jZWxUb2tlbmAuXG4gKi9cbkNhbmNlbFRva2VuLnNvdXJjZSA9IGZ1bmN0aW9uIHNvdXJjZSgpIHtcbiAgdmFyIGNhbmNlbDtcbiAgdmFyIHRva2VuID0gbmV3IENhbmNlbFRva2VuKGZ1bmN0aW9uIGV4ZWN1dG9yKGMpIHtcbiAgICBjYW5jZWwgPSBjO1xuICB9KTtcbiAgcmV0dXJuIHtcbiAgICB0b2tlbjogdG9rZW4sXG4gICAgY2FuY2VsOiBjYW5jZWxcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ2FuY2VsVG9rZW47XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNDYW5jZWwodmFsdWUpIHtcbiAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlLl9fQ0FOQ0VMX18pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIGJ1aWxkVVJMID0gcmVxdWlyZSgnLi4vaGVscGVycy9idWlsZFVSTCcpO1xudmFyIEludGVyY2VwdG9yTWFuYWdlciA9IHJlcXVpcmUoJy4vSW50ZXJjZXB0b3JNYW5hZ2VyJyk7XG52YXIgZGlzcGF0Y2hSZXF1ZXN0ID0gcmVxdWlyZSgnLi9kaXNwYXRjaFJlcXVlc3QnKTtcbnZhciBtZXJnZUNvbmZpZyA9IHJlcXVpcmUoJy4vbWVyZ2VDb25maWcnKTtcblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2VDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gQXhpb3MoaW5zdGFuY2VDb25maWcpIHtcbiAgdGhpcy5kZWZhdWx0cyA9IGluc3RhbmNlQ29uZmlnO1xuICB0aGlzLmludGVyY2VwdG9ycyA9IHtcbiAgICByZXF1ZXN0OiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKCksXG4gICAgcmVzcG9uc2U6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKVxuICB9O1xufVxuXG4vKipcbiAqIERpc3BhdGNoIGEgcmVxdWVzdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyBzcGVjaWZpYyBmb3IgdGhpcyByZXF1ZXN0IChtZXJnZWQgd2l0aCB0aGlzLmRlZmF1bHRzKVxuICovXG5BeGlvcy5wcm90b3R5cGUucmVxdWVzdCA9IGZ1bmN0aW9uIHJlcXVlc3QoY29uZmlnKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICAvLyBBbGxvdyBmb3IgYXhpb3MoJ2V4YW1wbGUvdXJsJ1ssIGNvbmZpZ10pIGEgbGEgZmV0Y2ggQVBJXG4gIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgIGNvbmZpZyA9IGFyZ3VtZW50c1sxXSB8fCB7fTtcbiAgICBjb25maWcudXJsID0gYXJndW1lbnRzWzBdO1xuICB9IGVsc2Uge1xuICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcbiAgfVxuXG4gIGNvbmZpZyA9IG1lcmdlQ29uZmlnKHRoaXMuZGVmYXVsdHMsIGNvbmZpZyk7XG5cbiAgLy8gU2V0IGNvbmZpZy5tZXRob2RcbiAgaWYgKGNvbmZpZy5tZXRob2QpIHtcbiAgICBjb25maWcubWV0aG9kID0gY29uZmlnLm1ldGhvZC50b0xvd2VyQ2FzZSgpO1xuICB9IGVsc2UgaWYgKHRoaXMuZGVmYXVsdHMubWV0aG9kKSB7XG4gICAgY29uZmlnLm1ldGhvZCA9IHRoaXMuZGVmYXVsdHMubWV0aG9kLnRvTG93ZXJDYXNlKCk7XG4gIH0gZWxzZSB7XG4gICAgY29uZmlnLm1ldGhvZCA9ICdnZXQnO1xuICB9XG5cbiAgLy8gSG9vayB1cCBpbnRlcmNlcHRvcnMgbWlkZGxld2FyZVxuICB2YXIgY2hhaW4gPSBbZGlzcGF0Y2hSZXF1ZXN0LCB1bmRlZmluZWRdO1xuICB2YXIgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShjb25maWcpO1xuXG4gIHRoaXMuaW50ZXJjZXB0b3JzLnJlcXVlc3QuZm9yRWFjaChmdW5jdGlvbiB1bnNoaWZ0UmVxdWVzdEludGVyY2VwdG9ycyhpbnRlcmNlcHRvcikge1xuICAgIGNoYWluLnVuc2hpZnQoaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7XG4gIH0pO1xuXG4gIHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gcHVzaFJlc3BvbnNlSW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgY2hhaW4ucHVzaChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgfSk7XG5cbiAgd2hpbGUgKGNoYWluLmxlbmd0aCkge1xuICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4oY2hhaW4uc2hpZnQoKSwgY2hhaW4uc2hpZnQoKSk7XG4gIH1cblxuICByZXR1cm4gcHJvbWlzZTtcbn07XG5cbkF4aW9zLnByb3RvdHlwZS5nZXRVcmkgPSBmdW5jdGlvbiBnZXRVcmkoY29uZmlnKSB7XG4gIGNvbmZpZyA9IG1lcmdlQ29uZmlnKHRoaXMuZGVmYXVsdHMsIGNvbmZpZyk7XG4gIHJldHVybiBidWlsZFVSTChjb25maWcudXJsLCBjb25maWcucGFyYW1zLCBjb25maWcucGFyYW1zU2VyaWFsaXplcikucmVwbGFjZSgvXlxcPy8sICcnKTtcbn07XG5cbi8vIFByb3ZpZGUgYWxpYXNlcyBmb3Igc3VwcG9ydGVkIHJlcXVlc3QgbWV0aG9kc1xudXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdvcHRpb25zJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7XG4gIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHV0aWxzLm1lcmdlKGNvbmZpZyB8fCB7fSwge1xuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICB1cmw6IHVybFxuICAgIH0pKTtcbiAgfTtcbn0pO1xuXG51dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgY29uZmlnKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1dGlscy5tZXJnZShjb25maWcgfHwge30sIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgdXJsOiB1cmwsXG4gICAgICBkYXRhOiBkYXRhXG4gICAgfSkpO1xuICB9O1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gQXhpb3M7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuZnVuY3Rpb24gSW50ZXJjZXB0b3JNYW5hZ2VyKCkge1xuICB0aGlzLmhhbmRsZXJzID0gW107XG59XG5cbi8qKlxuICogQWRkIGEgbmV3IGludGVyY2VwdG9yIHRvIHRoZSBzdGFja1xuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bGZpbGxlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGB0aGVuYCBmb3IgYSBgUHJvbWlzZWBcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHJlamVjdGAgZm9yIGEgYFByb21pc2VgXG4gKlxuICogQHJldHVybiB7TnVtYmVyfSBBbiBJRCB1c2VkIHRvIHJlbW92ZSBpbnRlcmNlcHRvciBsYXRlclxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIHVzZShmdWxmaWxsZWQsIHJlamVjdGVkKSB7XG4gIHRoaXMuaGFuZGxlcnMucHVzaCh7XG4gICAgZnVsZmlsbGVkOiBmdWxmaWxsZWQsXG4gICAgcmVqZWN0ZWQ6IHJlamVjdGVkXG4gIH0pO1xuICByZXR1cm4gdGhpcy5oYW5kbGVycy5sZW5ndGggLSAxO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYW4gaW50ZXJjZXB0b3IgZnJvbSB0aGUgc3RhY2tcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaWQgVGhlIElEIHRoYXQgd2FzIHJldHVybmVkIGJ5IGB1c2VgXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZWplY3QgPSBmdW5jdGlvbiBlamVjdChpZCkge1xuICBpZiAodGhpcy5oYW5kbGVyc1tpZF0pIHtcbiAgICB0aGlzLmhhbmRsZXJzW2lkXSA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGFsbCB0aGUgcmVnaXN0ZXJlZCBpbnRlcmNlcHRvcnNcbiAqXG4gKiBUaGlzIG1ldGhvZCBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIGZvciBza2lwcGluZyBvdmVyIGFueVxuICogaW50ZXJjZXB0b3JzIHRoYXQgbWF5IGhhdmUgYmVjb21lIGBudWxsYCBjYWxsaW5nIGBlamVjdGAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggaW50ZXJjZXB0b3JcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gZm9yRWFjaChmbikge1xuICB1dGlscy5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uIGZvckVhY2hIYW5kbGVyKGgpIHtcbiAgICBpZiAoaCAhPT0gbnVsbCkge1xuICAgICAgZm4oaCk7XG4gICAgfVxuICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSW50ZXJjZXB0b3JNYW5hZ2VyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaXNBYnNvbHV0ZVVSTCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTCcpO1xudmFyIGNvbWJpbmVVUkxzID0gcmVxdWlyZSgnLi4vaGVscGVycy9jb21iaW5lVVJMcycpO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgVVJMIGJ5IGNvbWJpbmluZyB0aGUgYmFzZVVSTCB3aXRoIHRoZSByZXF1ZXN0ZWRVUkwsXG4gKiBvbmx5IHdoZW4gdGhlIHJlcXVlc3RlZFVSTCBpcyBub3QgYWxyZWFkeSBhbiBhYnNvbHV0ZSBVUkwuXG4gKiBJZiB0aGUgcmVxdWVzdFVSTCBpcyBhYnNvbHV0ZSwgdGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSByZXF1ZXN0ZWRVUkwgdW50b3VjaGVkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJMIFRoZSBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RlZFVSTCBBYnNvbHV0ZSBvciByZWxhdGl2ZSBVUkwgdG8gY29tYmluZVxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGNvbWJpbmVkIGZ1bGwgcGF0aFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJ1aWxkRnVsbFBhdGgoYmFzZVVSTCwgcmVxdWVzdGVkVVJMKSB7XG4gIGlmIChiYXNlVVJMICYmICFpc0Fic29sdXRlVVJMKHJlcXVlc3RlZFVSTCkpIHtcbiAgICByZXR1cm4gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVxdWVzdGVkVVJMKTtcbiAgfVxuICByZXR1cm4gcmVxdWVzdGVkVVJMO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGVuaGFuY2VFcnJvciA9IHJlcXVpcmUoJy4vZW5oYW5jZUVycm9yJyk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBtZXNzYWdlLCBjb25maWcsIGVycm9yIGNvZGUsIHJlcXVlc3QgYW5kIHJlc3BvbnNlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBlcnJvciBtZXNzYWdlLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBjcmVhdGVkIGVycm9yLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKG1lc3NhZ2UsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgdmFyIGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICByZXR1cm4gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciB0cmFuc2Zvcm1EYXRhID0gcmVxdWlyZSgnLi90cmFuc2Zvcm1EYXRhJyk7XG52YXIgaXNDYW5jZWwgPSByZXF1aXJlKCcuLi9jYW5jZWwvaXNDYW5jZWwnKTtcbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJy4uL2RlZmF1bHRzJyk7XG5cbi8qKlxuICogVGhyb3dzIGEgYENhbmNlbGAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC5cbiAqL1xuZnVuY3Rpb24gdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpIHtcbiAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuICAgIGNvbmZpZy5jYW5jZWxUb2tlbi50aHJvd0lmUmVxdWVzdGVkKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBEaXNwYXRjaCBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlciB1c2luZyB0aGUgY29uZmlndXJlZCBhZGFwdGVyLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyB0aGF0IGlzIHRvIGJlIHVzZWQgZm9yIHRoZSByZXF1ZXN0XG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gVGhlIFByb21pc2UgdG8gYmUgZnVsZmlsbGVkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGlzcGF0Y2hSZXF1ZXN0KGNvbmZpZykge1xuICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgLy8gRW5zdXJlIGhlYWRlcnMgZXhpc3RcbiAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcblxuICAvLyBUcmFuc2Zvcm0gcmVxdWVzdCBkYXRhXG4gIGNvbmZpZy5kYXRhID0gdHJhbnNmb3JtRGF0YShcbiAgICBjb25maWcuZGF0YSxcbiAgICBjb25maWcuaGVhZGVycyxcbiAgICBjb25maWcudHJhbnNmb3JtUmVxdWVzdFxuICApO1xuXG4gIC8vIEZsYXR0ZW4gaGVhZGVyc1xuICBjb25maWcuaGVhZGVycyA9IHV0aWxzLm1lcmdlKFxuICAgIGNvbmZpZy5oZWFkZXJzLmNvbW1vbiB8fCB7fSxcbiAgICBjb25maWcuaGVhZGVyc1tjb25maWcubWV0aG9kXSB8fCB7fSxcbiAgICBjb25maWcuaGVhZGVyc1xuICApO1xuXG4gIHV0aWxzLmZvckVhY2goXG4gICAgWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnLCAncG9zdCcsICdwdXQnLCAncGF0Y2gnLCAnY29tbW9uJ10sXG4gICAgZnVuY3Rpb24gY2xlYW5IZWFkZXJDb25maWcobWV0aG9kKSB7XG4gICAgICBkZWxldGUgY29uZmlnLmhlYWRlcnNbbWV0aG9kXTtcbiAgICB9XG4gICk7XG5cbiAgdmFyIGFkYXB0ZXIgPSBjb25maWcuYWRhcHRlciB8fCBkZWZhdWx0cy5hZGFwdGVyO1xuXG4gIHJldHVybiBhZGFwdGVyKGNvbmZpZykudGhlbihmdW5jdGlvbiBvbkFkYXB0ZXJSZXNvbHV0aW9uKHJlc3BvbnNlKSB7XG4gICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gICAgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcbiAgICByZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YShcbiAgICAgIHJlc3BvbnNlLmRhdGEsXG4gICAgICByZXNwb25zZS5oZWFkZXJzLFxuICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlXG4gICAgKTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfSwgZnVuY3Rpb24gb25BZGFwdGVyUmVqZWN0aW9uKHJlYXNvbikge1xuICAgIGlmICghaXNDYW5jZWwocmVhc29uKSkge1xuICAgICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gICAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YVxuICAgICAgaWYgKHJlYXNvbiAmJiByZWFzb24ucmVzcG9uc2UpIHtcbiAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKFxuICAgICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhLFxuICAgICAgICAgIHJlYXNvbi5yZXNwb25zZS5oZWFkZXJzLFxuICAgICAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZWFzb24pO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogVXBkYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBjb25maWcsIGVycm9yIGNvZGUsIGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnJvciBUaGUgZXJyb3IgdG8gdXBkYXRlLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBlcnJvci5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgZXJyb3IuY29uZmlnID0gY29uZmlnO1xuICBpZiAoY29kZSkge1xuICAgIGVycm9yLmNvZGUgPSBjb2RlO1xuICB9XG5cbiAgZXJyb3IucmVxdWVzdCA9IHJlcXVlc3Q7XG4gIGVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gIGVycm9yLmlzQXhpb3NFcnJvciA9IHRydWU7XG5cbiAgZXJyb3IudG9KU09OID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIFN0YW5kYXJkXG4gICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsXG4gICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAvLyBNaWNyb3NvZnRcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgbnVtYmVyOiB0aGlzLm51bWJlcixcbiAgICAgIC8vIE1vemlsbGFcbiAgICAgIGZpbGVOYW1lOiB0aGlzLmZpbGVOYW1lLFxuICAgICAgbGluZU51bWJlcjogdGhpcy5saW5lTnVtYmVyLFxuICAgICAgY29sdW1uTnVtYmVyOiB0aGlzLmNvbHVtbk51bWJlcixcbiAgICAgIHN0YWNrOiB0aGlzLnN0YWNrLFxuICAgICAgLy8gQXhpb3NcbiAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsXG4gICAgICBjb2RlOiB0aGlzLmNvZGVcbiAgICB9O1xuICB9O1xuICByZXR1cm4gZXJyb3I7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuXG4vKipcbiAqIENvbmZpZy1zcGVjaWZpYyBtZXJnZS1mdW5jdGlvbiB3aGljaCBjcmVhdGVzIGEgbmV3IGNvbmZpZy1vYmplY3RcbiAqIGJ5IG1lcmdpbmcgdHdvIGNvbmZpZ3VyYXRpb24gb2JqZWN0cyB0b2dldGhlci5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnMVxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZzJcbiAqIEByZXR1cm5zIHtPYmplY3R9IE5ldyBvYmplY3QgcmVzdWx0aW5nIGZyb20gbWVyZ2luZyBjb25maWcyIHRvIGNvbmZpZzFcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtZXJnZUNvbmZpZyhjb25maWcxLCBjb25maWcyKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICBjb25maWcyID0gY29uZmlnMiB8fCB7fTtcbiAgdmFyIGNvbmZpZyA9IHt9O1xuXG4gIHZhciB2YWx1ZUZyb21Db25maWcyS2V5cyA9IFsndXJsJywgJ21ldGhvZCcsICdwYXJhbXMnLCAnZGF0YSddO1xuICB2YXIgbWVyZ2VEZWVwUHJvcGVydGllc0tleXMgPSBbJ2hlYWRlcnMnLCAnYXV0aCcsICdwcm94eSddO1xuICB2YXIgZGVmYXVsdFRvQ29uZmlnMktleXMgPSBbXG4gICAgJ2Jhc2VVUkwnLCAndXJsJywgJ3RyYW5zZm9ybVJlcXVlc3QnLCAndHJhbnNmb3JtUmVzcG9uc2UnLCAncGFyYW1zU2VyaWFsaXplcicsXG4gICAgJ3RpbWVvdXQnLCAnd2l0aENyZWRlbnRpYWxzJywgJ2FkYXB0ZXInLCAncmVzcG9uc2VUeXBlJywgJ3hzcmZDb29raWVOYW1lJyxcbiAgICAneHNyZkhlYWRlck5hbWUnLCAnb25VcGxvYWRQcm9ncmVzcycsICdvbkRvd25sb2FkUHJvZ3Jlc3MnLFxuICAgICdtYXhDb250ZW50TGVuZ3RoJywgJ3ZhbGlkYXRlU3RhdHVzJywgJ21heFJlZGlyZWN0cycsICdodHRwQWdlbnQnLFxuICAgICdodHRwc0FnZW50JywgJ2NhbmNlbFRva2VuJywgJ3NvY2tldFBhdGgnXG4gIF07XG5cbiAgdXRpbHMuZm9yRWFjaCh2YWx1ZUZyb21Db25maWcyS2V5cywgZnVuY3Rpb24gdmFsdWVGcm9tQ29uZmlnMihwcm9wKSB7XG4gICAgaWYgKHR5cGVvZiBjb25maWcyW3Byb3BdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uZmlnW3Byb3BdID0gY29uZmlnMltwcm9wXTtcbiAgICB9XG4gIH0pO1xuXG4gIHV0aWxzLmZvckVhY2gobWVyZ2VEZWVwUHJvcGVydGllc0tleXMsIGZ1bmN0aW9uIG1lcmdlRGVlcFByb3BlcnRpZXMocHJvcCkge1xuICAgIGlmICh1dGlscy5pc09iamVjdChjb25maWcyW3Byb3BdKSkge1xuICAgICAgY29uZmlnW3Byb3BdID0gdXRpbHMuZGVlcE1lcmdlKGNvbmZpZzFbcHJvcF0sIGNvbmZpZzJbcHJvcF0pO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZzJbcHJvcF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25maWdbcHJvcF0gPSBjb25maWcyW3Byb3BdO1xuICAgIH0gZWxzZSBpZiAodXRpbHMuaXNPYmplY3QoY29uZmlnMVtwcm9wXSkpIHtcbiAgICAgIGNvbmZpZ1twcm9wXSA9IHV0aWxzLmRlZXBNZXJnZShjb25maWcxW3Byb3BdKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb25maWcxW3Byb3BdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uZmlnW3Byb3BdID0gY29uZmlnMVtwcm9wXTtcbiAgICB9XG4gIH0pO1xuXG4gIHV0aWxzLmZvckVhY2goZGVmYXVsdFRvQ29uZmlnMktleXMsIGZ1bmN0aW9uIGRlZmF1bHRUb0NvbmZpZzIocHJvcCkge1xuICAgIGlmICh0eXBlb2YgY29uZmlnMltwcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbmZpZ1twcm9wXSA9IGNvbmZpZzJbcHJvcF07XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnMVtwcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbmZpZ1twcm9wXSA9IGNvbmZpZzFbcHJvcF07XG4gICAgfVxuICB9KTtcblxuICB2YXIgYXhpb3NLZXlzID0gdmFsdWVGcm9tQ29uZmlnMktleXNcbiAgICAuY29uY2F0KG1lcmdlRGVlcFByb3BlcnRpZXNLZXlzKVxuICAgIC5jb25jYXQoZGVmYXVsdFRvQ29uZmlnMktleXMpO1xuXG4gIHZhciBvdGhlcktleXMgPSBPYmplY3RcbiAgICAua2V5cyhjb25maWcyKVxuICAgIC5maWx0ZXIoZnVuY3Rpb24gZmlsdGVyQXhpb3NLZXlzKGtleSkge1xuICAgICAgcmV0dXJuIGF4aW9zS2V5cy5pbmRleE9mKGtleSkgPT09IC0xO1xuICAgIH0pO1xuXG4gIHV0aWxzLmZvckVhY2gob3RoZXJLZXlzLCBmdW5jdGlvbiBvdGhlcktleXNEZWZhdWx0VG9Db25maWcyKHByb3ApIHtcbiAgICBpZiAodHlwZW9mIGNvbmZpZzJbcHJvcF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25maWdbcHJvcF0gPSBjb25maWcyW3Byb3BdO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZzFbcHJvcF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25maWdbcHJvcF0gPSBjb25maWcxW3Byb3BdO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGNvbmZpZztcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBjcmVhdGVFcnJvciA9IHJlcXVpcmUoJy4vY3JlYXRlRXJyb3InKTtcblxuLyoqXG4gKiBSZXNvbHZlIG9yIHJlamVjdCBhIFByb21pc2UgYmFzZWQgb24gcmVzcG9uc2Ugc3RhdHVzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc29sdmUgQSBmdW5jdGlvbiB0aGF0IHJlc29sdmVzIHRoZSBwcm9taXNlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0IEEgZnVuY3Rpb24gdGhhdCByZWplY3RzIHRoZSBwcm9taXNlLlxuICogQHBhcmFtIHtvYmplY3R9IHJlc3BvbnNlIFRoZSByZXNwb25zZS5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCByZXNwb25zZSkge1xuICB2YXIgdmFsaWRhdGVTdGF0dXMgPSByZXNwb25zZS5jb25maWcudmFsaWRhdGVTdGF0dXM7XG4gIGlmICghdmFsaWRhdGVTdGF0dXMgfHwgdmFsaWRhdGVTdGF0dXMocmVzcG9uc2Uuc3RhdHVzKSkge1xuICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICB9IGVsc2Uge1xuICAgIHJlamVjdChjcmVhdGVFcnJvcihcbiAgICAgICdSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlICcgKyByZXNwb25zZS5zdGF0dXMsXG4gICAgICByZXNwb25zZS5jb25maWcsXG4gICAgICBudWxsLFxuICAgICAgcmVzcG9uc2UucmVxdWVzdCxcbiAgICAgIHJlc3BvbnNlXG4gICAgKSk7XG4gIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIGRhdGEgZm9yIGEgcmVxdWVzdCBvciBhIHJlc3BvbnNlXG4gKlxuICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBkYXRhIFRoZSBkYXRhIHRvIGJlIHRyYW5zZm9ybWVkXG4gKiBAcGFyYW0ge0FycmF5fSBoZWFkZXJzIFRoZSBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdCBvciByZXNwb25zZVxuICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbn0gZm5zIEEgc2luZ2xlIGZ1bmN0aW9uIG9yIEFycmF5IG9mIGZ1bmN0aW9uc1xuICogQHJldHVybnMgeyp9IFRoZSByZXN1bHRpbmcgdHJhbnNmb3JtZWQgZGF0YVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZGF0YSwgaGVhZGVycywgZm5zKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICB1dGlscy5mb3JFYWNoKGZucywgZnVuY3Rpb24gdHJhbnNmb3JtKGZuKSB7XG4gICAgZGF0YSA9IGZuKGRhdGEsIGhlYWRlcnMpO1xuICB9KTtcblxuICByZXR1cm4gZGF0YTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBub3JtYWxpemVIZWFkZXJOYW1lID0gcmVxdWlyZSgnLi9oZWxwZXJzL25vcm1hbGl6ZUhlYWRlck5hbWUnKTtcblxudmFyIERFRkFVTFRfQ09OVEVOVF9UWVBFID0ge1xuICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCdcbn07XG5cbmZ1bmN0aW9uIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCB2YWx1ZSkge1xuICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnMpICYmIHV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddKSkge1xuICAgIGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gdmFsdWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RGVmYXVsdEFkYXB0ZXIoKSB7XG4gIHZhciBhZGFwdGVyO1xuICBpZiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIEZvciBicm93c2VycyB1c2UgWEhSIGFkYXB0ZXJcbiAgICBhZGFwdGVyID0gcmVxdWlyZSgnLi9hZGFwdGVycy94aHInKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpIHtcbiAgICAvLyBGb3Igbm9kZSB1c2UgSFRUUCBhZGFwdGVyXG4gICAgYWRhcHRlciA9IHJlcXVpcmUoJy4vYWRhcHRlcnMvaHR0cCcpO1xuICB9XG4gIHJldHVybiBhZGFwdGVyO1xufVxuXG52YXIgZGVmYXVsdHMgPSB7XG4gIGFkYXB0ZXI6IGdldERlZmF1bHRBZGFwdGVyKCksXG5cbiAgdHJhbnNmb3JtUmVxdWVzdDogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlcXVlc3QoZGF0YSwgaGVhZGVycykge1xuICAgIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgJ0FjY2VwdCcpO1xuICAgIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgJ0NvbnRlbnQtVHlwZScpO1xuICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0FycmF5QnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0J1ZmZlcihkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNTdHJlYW0oZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzRmlsZShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNCbG9iKGRhdGEpXG4gICAgKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzQXJyYXlCdWZmZXJWaWV3KGRhdGEpKSB7XG4gICAgICByZXR1cm4gZGF0YS5idWZmZXI7XG4gICAgfVxuICAgIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhkYXRhKSkge1xuICAgICAgc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOCcpO1xuICAgICAgcmV0dXJuIGRhdGEudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzT2JqZWN0KGRhdGEpKSB7XG4gICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCcpO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfV0sXG5cbiAgdHJhbnNmb3JtUmVzcG9uc2U6IFtmdW5jdGlvbiB0cmFuc2Zvcm1SZXNwb25zZShkYXRhKSB7XG4gICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICB9IGNhdGNoIChlKSB7IC8qIElnbm9yZSAqLyB9XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICAvKipcbiAgICogQSB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcyB0byBhYm9ydCBhIHJlcXVlc3QuIElmIHNldCB0byAwIChkZWZhdWx0KSBhXG4gICAqIHRpbWVvdXQgaXMgbm90IGNyZWF0ZWQuXG4gICAqL1xuICB0aW1lb3V0OiAwLFxuXG4gIHhzcmZDb29raWVOYW1lOiAnWFNSRi1UT0tFTicsXG4gIHhzcmZIZWFkZXJOYW1lOiAnWC1YU1JGLVRPS0VOJyxcblxuICBtYXhDb250ZW50TGVuZ3RoOiAtMSxcblxuICB2YWxpZGF0ZVN0YXR1czogZnVuY3Rpb24gdmFsaWRhdGVTdGF0dXMoc3RhdHVzKSB7XG4gICAgcmV0dXJuIHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwO1xuICB9XG59O1xuXG5kZWZhdWx0cy5oZWFkZXJzID0ge1xuICBjb21tb246IHtcbiAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKidcbiAgfVxufTtcblxudXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkge1xuICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB7fTtcbn0pO1xuXG51dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkge1xuICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB1dGlscy5tZXJnZShERUZBVUxUX0NPTlRFTlRfVFlQRSk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBkZWZhdWx0cztcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBiaW5kKGZuLCB0aGlzQXJnKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwKCkge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICB9O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5mdW5jdGlvbiBlbmNvZGUodmFsKSB7XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKS5cbiAgICByZXBsYWNlKC8lNDAvZ2ksICdAJykuXG4gICAgcmVwbGFjZSgvJTNBL2dpLCAnOicpLlxuICAgIHJlcGxhY2UoLyUyNC9nLCAnJCcpLlxuICAgIHJlcGxhY2UoLyUyQy9naSwgJywnKS5cbiAgICByZXBsYWNlKC8lMjAvZywgJysnKS5cbiAgICByZXBsYWNlKC8lNUIvZ2ksICdbJykuXG4gICAgcmVwbGFjZSgvJTVEL2dpLCAnXScpO1xufVxuXG4vKipcbiAqIEJ1aWxkIGEgVVJMIGJ5IGFwcGVuZGluZyBwYXJhbXMgdG8gdGhlIGVuZFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIGJhc2Ugb2YgdGhlIHVybCAoZS5nLiwgaHR0cDovL3d3dy5nb29nbGUuY29tKVxuICogQHBhcmFtIHtvYmplY3R9IFtwYXJhbXNdIFRoZSBwYXJhbXMgdG8gYmUgYXBwZW5kZWRcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgdXJsXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYnVpbGRVUkwodXJsLCBwYXJhbXMsIHBhcmFtc1NlcmlhbGl6ZXIpIHtcbiAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gIGlmICghcGFyYW1zKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIHZhciBzZXJpYWxpemVkUGFyYW1zO1xuICBpZiAocGFyYW1zU2VyaWFsaXplcikge1xuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJhbXNTZXJpYWxpemVyKHBhcmFtcyk7XG4gIH0gZWxzZSBpZiAodXRpbHMuaXNVUkxTZWFyY2hQYXJhbXMocGFyYW1zKSkge1xuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJhbXMudG9TdHJpbmcoKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcGFydHMgPSBbXTtcblxuICAgIHV0aWxzLmZvckVhY2gocGFyYW1zLCBmdW5jdGlvbiBzZXJpYWxpemUodmFsLCBrZXkpIHtcbiAgICAgIGlmICh2YWwgPT09IG51bGwgfHwgdHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodXRpbHMuaXNBcnJheSh2YWwpKSB7XG4gICAgICAgIGtleSA9IGtleSArICdbXSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWwgPSBbdmFsXTtcbiAgICAgIH1cblxuICAgICAgdXRpbHMuZm9yRWFjaCh2YWwsIGZ1bmN0aW9uIHBhcnNlVmFsdWUodikge1xuICAgICAgICBpZiAodXRpbHMuaXNEYXRlKHYpKSB7XG4gICAgICAgICAgdiA9IHYudG9JU09TdHJpbmcoKTtcbiAgICAgICAgfSBlbHNlIGlmICh1dGlscy5pc09iamVjdCh2KSkge1xuICAgICAgICAgIHYgPSBKU09OLnN0cmluZ2lmeSh2KTtcbiAgICAgICAgfVxuICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZShrZXkpICsgJz0nICsgZW5jb2RlKHYpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcnRzLmpvaW4oJyYnKTtcbiAgfVxuXG4gIGlmIChzZXJpYWxpemVkUGFyYW1zKSB7XG4gICAgdmFyIGhhc2htYXJrSW5kZXggPSB1cmwuaW5kZXhPZignIycpO1xuICAgIGlmIChoYXNobWFya0luZGV4ICE9PSAtMSkge1xuICAgICAgdXJsID0gdXJsLnNsaWNlKDAsIGhhc2htYXJrSW5kZXgpO1xuICAgIH1cblxuICAgIHVybCArPSAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJicpICsgc2VyaWFsaXplZFBhcmFtcztcbiAgfVxuXG4gIHJldHVybiB1cmw7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgVVJMIGJ5IGNvbWJpbmluZyB0aGUgc3BlY2lmaWVkIFVSTHNcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVSTCBUaGUgYmFzZSBVUkxcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGl2ZVVSTCBUaGUgcmVsYXRpdmUgVVJMXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgVVJMXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVsYXRpdmVVUkwpIHtcbiAgcmV0dXJuIHJlbGF0aXZlVVJMXG4gICAgPyBiYXNlVVJMLnJlcGxhY2UoL1xcLyskLywgJycpICsgJy8nICsgcmVsYXRpdmVVUkwucmVwbGFjZSgvXlxcLysvLCAnJylcbiAgICA6IGJhc2VVUkw7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKFxuICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblxuICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgc3VwcG9ydCBkb2N1bWVudC5jb29raWVcbiAgICAoZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKG5hbWUsIHZhbHVlLCBleHBpcmVzLCBwYXRoLCBkb21haW4sIHNlY3VyZSkge1xuICAgICAgICAgIHZhciBjb29raWUgPSBbXTtcbiAgICAgICAgICBjb29raWUucHVzaChuYW1lICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XG5cbiAgICAgICAgICBpZiAodXRpbHMuaXNOdW1iZXIoZXhwaXJlcykpIHtcbiAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdleHBpcmVzPScgKyBuZXcgRGF0ZShleHBpcmVzKS50b0dNVFN0cmluZygpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcocGF0aCkpIHtcbiAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdwYXRoPScgKyBwYXRoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcoZG9tYWluKSkge1xuICAgICAgICAgICAgY29va2llLnB1c2goJ2RvbWFpbj0nICsgZG9tYWluKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2VjdXJlID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjb29raWUucHVzaCgnc2VjdXJlJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZG9jdW1lbnQuY29va2llID0gY29va2llLmpvaW4oJzsgJyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZChuYW1lKSB7XG4gICAgICAgICAgdmFyIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoJyhefDtcXFxccyopKCcgKyBuYW1lICsgJyk9KFteO10qKScpKTtcbiAgICAgICAgICByZXR1cm4gKG1hdGNoID8gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzNdKSA6IG51bGwpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKG5hbWUpIHtcbiAgICAgICAgICB0aGlzLndyaXRlKG5hbWUsICcnLCBEYXRlLm5vdygpIC0gODY0MDAwMDApO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pKCkgOlxuXG4gIC8vIE5vbiBzdGFuZGFyZCBicm93c2VyIGVudiAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cbiAgICAoZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKCkge30sXG4gICAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQoKSB7IHJldHVybiBudWxsOyB9LFxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9XG4gICAgICB9O1xuICAgIH0pKClcbik7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0Fic29sdXRlVVJMKHVybCkge1xuICAvLyBBIFVSTCBpcyBjb25zaWRlcmVkIGFic29sdXRlIGlmIGl0IGJlZ2lucyB3aXRoIFwiPHNjaGVtZT46Ly9cIiBvciBcIi8vXCIgKHByb3RvY29sLXJlbGF0aXZlIFVSTCkuXG4gIC8vIFJGQyAzOTg2IGRlZmluZXMgc2NoZW1lIG5hbWUgYXMgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIGJlZ2lubmluZyB3aXRoIGEgbGV0dGVyIGFuZCBmb2xsb3dlZFxuICAvLyBieSBhbnkgY29tYmluYXRpb24gb2YgbGV0dGVycywgZGlnaXRzLCBwbHVzLCBwZXJpb2QsIG9yIGh5cGhlbi5cbiAgcmV0dXJuIC9eKFthLXpdW2EtelxcZFxcK1xcLVxcLl0qOik/XFwvXFwvL2kudGVzdCh1cmwpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChcbiAgdXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSA/XG5cbiAgLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIGhhdmUgZnVsbCBzdXBwb3J0IG9mIHRoZSBBUElzIG5lZWRlZCB0byB0ZXN0XG4gIC8vIHdoZXRoZXIgdGhlIHJlcXVlc3QgVVJMIGlzIG9mIHRoZSBzYW1lIG9yaWdpbiBhcyBjdXJyZW50IGxvY2F0aW9uLlxuICAgIChmdW5jdGlvbiBzdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgICB2YXIgbXNpZSA9IC8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICB2YXIgdXJsUGFyc2luZ05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICB2YXIgb3JpZ2luVVJMO1xuXG4gICAgICAvKipcbiAgICAqIFBhcnNlIGEgVVJMIHRvIGRpc2NvdmVyIGl0J3MgY29tcG9uZW50c1xuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgVGhlIFVSTCB0byBiZSBwYXJzZWRcbiAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgKi9cbiAgICAgIGZ1bmN0aW9uIHJlc29sdmVVUkwodXJsKSB7XG4gICAgICAgIHZhciBocmVmID0gdXJsO1xuXG4gICAgICAgIGlmIChtc2llKSB7XG4gICAgICAgIC8vIElFIG5lZWRzIGF0dHJpYnV0ZSBzZXQgdHdpY2UgdG8gbm9ybWFsaXplIHByb3BlcnRpZXNcbiAgICAgICAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcbiAgICAgICAgICBocmVmID0gdXJsUGFyc2luZ05vZGUuaHJlZjtcbiAgICAgICAgfVxuXG4gICAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuXG4gICAgICAgIC8vIHVybFBhcnNpbmdOb2RlIHByb3ZpZGVzIHRoZSBVcmxVdGlscyBpbnRlcmZhY2UgLSBodHRwOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsdXRpbHNcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBocmVmOiB1cmxQYXJzaW5nTm9kZS5ocmVmLFxuICAgICAgICAgIHByb3RvY29sOiB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbCA/IHVybFBhcnNpbmdOb2RlLnByb3RvY29sLnJlcGxhY2UoLzokLywgJycpIDogJycsXG4gICAgICAgICAgaG9zdDogdXJsUGFyc2luZ05vZGUuaG9zdCxcbiAgICAgICAgICBzZWFyY2g6IHVybFBhcnNpbmdOb2RlLnNlYXJjaCA/IHVybFBhcnNpbmdOb2RlLnNlYXJjaC5yZXBsYWNlKC9eXFw/LywgJycpIDogJycsXG4gICAgICAgICAgaGFzaDogdXJsUGFyc2luZ05vZGUuaGFzaCA/IHVybFBhcnNpbmdOb2RlLmhhc2gucmVwbGFjZSgvXiMvLCAnJykgOiAnJyxcbiAgICAgICAgICBob3N0bmFtZTogdXJsUGFyc2luZ05vZGUuaG9zdG5hbWUsXG4gICAgICAgICAgcG9ydDogdXJsUGFyc2luZ05vZGUucG9ydCxcbiAgICAgICAgICBwYXRobmFtZTogKHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nKSA/XG4gICAgICAgICAgICB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZSA6XG4gICAgICAgICAgICAnLycgKyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBvcmlnaW5VUkwgPSByZXNvbHZlVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcblxuICAgICAgLyoqXG4gICAgKiBEZXRlcm1pbmUgaWYgYSBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiBhcyB0aGUgY3VycmVudCBsb2NhdGlvblxuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1ZXN0VVJMIFRoZSBVUkwgdG8gdGVzdFxuICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4sIG90aGVyd2lzZSBmYWxzZVxuICAgICovXG4gICAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKHJlcXVlc3RVUkwpIHtcbiAgICAgICAgdmFyIHBhcnNlZCA9ICh1dGlscy5pc1N0cmluZyhyZXF1ZXN0VVJMKSkgPyByZXNvbHZlVVJMKHJlcXVlc3RVUkwpIDogcmVxdWVzdFVSTDtcbiAgICAgICAgcmV0dXJuIChwYXJzZWQucHJvdG9jb2wgPT09IG9yaWdpblVSTC5wcm90b2NvbCAmJlxuICAgICAgICAgICAgcGFyc2VkLmhvc3QgPT09IG9yaWdpblVSTC5ob3N0KTtcbiAgICAgIH07XG4gICAgfSkoKSA6XG5cbiAgLy8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52cyAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cbiAgICAoZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbigpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9O1xuICAgIH0pKClcbik7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCBub3JtYWxpemVkTmFtZSkge1xuICB1dGlscy5mb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uIHByb2Nlc3NIZWFkZXIodmFsdWUsIG5hbWUpIHtcbiAgICBpZiAobmFtZSAhPT0gbm9ybWFsaXplZE5hbWUgJiYgbmFtZS50b1VwcGVyQ2FzZSgpID09PSBub3JtYWxpemVkTmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICBoZWFkZXJzW25vcm1hbGl6ZWROYW1lXSA9IHZhbHVlO1xuICAgICAgZGVsZXRlIGhlYWRlcnNbbmFtZV07XG4gICAgfVxuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuLy8gSGVhZGVycyB3aG9zZSBkdXBsaWNhdGVzIGFyZSBpZ25vcmVkIGJ5IG5vZGVcbi8vIGMuZi4gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9odHRwLmh0bWwjaHR0cF9tZXNzYWdlX2hlYWRlcnNcbnZhciBpZ25vcmVEdXBsaWNhdGVPZiA9IFtcbiAgJ2FnZScsICdhdXRob3JpemF0aW9uJywgJ2NvbnRlbnQtbGVuZ3RoJywgJ2NvbnRlbnQtdHlwZScsICdldGFnJyxcbiAgJ2V4cGlyZXMnLCAnZnJvbScsICdob3N0JywgJ2lmLW1vZGlmaWVkLXNpbmNlJywgJ2lmLXVubW9kaWZpZWQtc2luY2UnLFxuICAnbGFzdC1tb2RpZmllZCcsICdsb2NhdGlvbicsICdtYXgtZm9yd2FyZHMnLCAncHJveHktYXV0aG9yaXphdGlvbicsXG4gICdyZWZlcmVyJywgJ3JldHJ5LWFmdGVyJywgJ3VzZXItYWdlbnQnXG5dO1xuXG4vKipcbiAqIFBhcnNlIGhlYWRlcnMgaW50byBhbiBvYmplY3RcbiAqXG4gKiBgYGBcbiAqIERhdGU6IFdlZCwgMjcgQXVnIDIwMTQgMDg6NTg6NDkgR01UXG4gKiBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25cbiAqIENvbm5lY3Rpb246IGtlZXAtYWxpdmVcbiAqIFRyYW5zZmVyLUVuY29kaW5nOiBjaHVua2VkXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaGVhZGVycyBIZWFkZXJzIG5lZWRpbmcgdG8gYmUgcGFyc2VkXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBIZWFkZXJzIHBhcnNlZCBpbnRvIGFuIG9iamVjdFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHBhcnNlSGVhZGVycyhoZWFkZXJzKSB7XG4gIHZhciBwYXJzZWQgPSB7fTtcbiAgdmFyIGtleTtcbiAgdmFyIHZhbDtcbiAgdmFyIGk7XG5cbiAgaWYgKCFoZWFkZXJzKSB7IHJldHVybiBwYXJzZWQ7IH1cblxuICB1dGlscy5mb3JFYWNoKGhlYWRlcnMuc3BsaXQoJ1xcbicpLCBmdW5jdGlvbiBwYXJzZXIobGluZSkge1xuICAgIGkgPSBsaW5lLmluZGV4T2YoJzonKTtcbiAgICBrZXkgPSB1dGlscy50cmltKGxpbmUuc3Vic3RyKDAsIGkpKS50b0xvd2VyQ2FzZSgpO1xuICAgIHZhbCA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoaSArIDEpKTtcblxuICAgIGlmIChrZXkpIHtcbiAgICAgIGlmIChwYXJzZWRba2V5XSAmJiBpZ25vcmVEdXBsaWNhdGVPZi5pbmRleE9mKGtleSkgPj0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoa2V5ID09PSAnc2V0LWNvb2tpZScpIHtcbiAgICAgICAgcGFyc2VkW2tleV0gPSAocGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSA6IFtdKS5jb25jYXQoW3ZhbF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyc2VkW2tleV0gPSBwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldICsgJywgJyArIHZhbCA6IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBwYXJzZWQ7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFN5bnRhY3RpYyBzdWdhciBmb3IgaW52b2tpbmcgYSBmdW5jdGlvbiBhbmQgZXhwYW5kaW5nIGFuIGFycmF5IGZvciBhcmd1bWVudHMuXG4gKlxuICogQ29tbW9uIHVzZSBjYXNlIHdvdWxkIGJlIHRvIHVzZSBgRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5YC5cbiAqXG4gKiAgYGBganNcbiAqICBmdW5jdGlvbiBmKHgsIHksIHopIHt9XG4gKiAgdmFyIGFyZ3MgPSBbMSwgMiwgM107XG4gKiAgZi5hcHBseShudWxsLCBhcmdzKTtcbiAqICBgYGBcbiAqXG4gKiBXaXRoIGBzcHJlYWRgIHRoaXMgZXhhbXBsZSBjYW4gYmUgcmUtd3JpdHRlbi5cbiAqXG4gKiAgYGBganNcbiAqICBzcHJlYWQoZnVuY3Rpb24oeCwgeSwgeikge30pKFsxLCAyLCAzXSk7XG4gKiAgYGBgXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzcHJlYWQoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoYXJyKSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFycik7XG4gIH07XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYmluZCA9IHJlcXVpcmUoJy4vaGVscGVycy9iaW5kJyk7XG5cbi8qZ2xvYmFsIHRvU3RyaW5nOnRydWUqL1xuXG4vLyB1dGlscyBpcyBhIGxpYnJhcnkgb2YgZ2VuZXJpYyBoZWxwZXIgZnVuY3Rpb25zIG5vbi1zcGVjaWZpYyB0byBheGlvc1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXksIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5KHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIHVuZGVmaW5lZFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSB2YWx1ZSBpcyB1bmRlZmluZWQsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQnVmZmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0J1ZmZlcih2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPT0gbnVsbCAmJiAhaXNVbmRlZmluZWQodmFsKSAmJiB2YWwuY29uc3RydWN0b3IgIT09IG51bGwgJiYgIWlzVW5kZWZpbmVkKHZhbC5jb25zdHJ1Y3RvcilcbiAgICAmJiB0eXBlb2YgdmFsLmNvbnN0cnVjdG9yLmlzQnVmZmVyID09PSAnZnVuY3Rpb24nICYmIHZhbC5jb25zdHJ1Y3Rvci5pc0J1ZmZlcih2YWwpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRm9ybURhdGFcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBGb3JtRGF0YSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRm9ybURhdGEodmFsKSB7XG4gIHJldHVybiAodHlwZW9mIEZvcm1EYXRhICE9PSAndW5kZWZpbmVkJykgJiYgKHZhbCBpbnN0YW5jZW9mIEZvcm1EYXRhKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyVmlldyh2YWwpIHtcbiAgdmFyIHJlc3VsdDtcbiAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnKSAmJiAoQXJyYXlCdWZmZXIuaXNWaWV3KSkge1xuICAgIHJlc3VsdCA9IEFycmF5QnVmZmVyLmlzVmlldyh2YWwpO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCA9ICh2YWwpICYmICh2YWwuYnVmZmVyKSAmJiAodmFsLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyaW5nXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJpbmcsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N0cmluZyh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgTnVtYmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBOdW1iZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc051bWJlcih2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdudW1iZXInO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIE9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIE9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbCkge1xuICByZXR1cm4gdmFsICE9PSBudWxsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRGF0ZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRGF0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRGF0ZSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRmlsZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRmlsZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRmlsZSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRmlsZV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQmxvYlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQmxvYiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQmxvYih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQmxvYl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZ1bmN0aW9uLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmVhbVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyZWFtLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTdHJlYW0odmFsKSB7XG4gIHJldHVybiBpc09iamVjdCh2YWwpICYmIGlzRnVuY3Rpb24odmFsLnBpcGUpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzVVJMU2VhcmNoUGFyYW1zKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIFVSTFNlYXJjaFBhcmFtcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsIGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zO1xufVxuXG4vKipcbiAqIFRyaW0gZXhjZXNzIHdoaXRlc3BhY2Ugb2ZmIHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiBhIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIFN0cmluZyB0byB0cmltXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgU3RyaW5nIGZyZWVkIG9mIGV4Y2VzcyB3aGl0ZXNwYWNlXG4gKi9cbmZ1bmN0aW9uIHRyaW0oc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyovLCAnJykucmVwbGFjZSgvXFxzKiQvLCAnJyk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50XG4gKlxuICogVGhpcyBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlciwgYW5kIHJlYWN0LW5hdGl2ZS5cbiAqIEJvdGggZW52aXJvbm1lbnRzIHN1cHBvcnQgWE1MSHR0cFJlcXVlc3QsIGJ1dCBub3QgZnVsbHkgc3RhbmRhcmQgZ2xvYmFscy5cbiAqXG4gKiB3ZWIgd29ya2VyczpcbiAqICB0eXBlb2Ygd2luZG93IC0+IHVuZGVmaW5lZFxuICogIHR5cGVvZiBkb2N1bWVudCAtPiB1bmRlZmluZWRcbiAqXG4gKiByZWFjdC1uYXRpdmU6XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ1JlYWN0TmF0aXZlJ1xuICogbmF0aXZlc2NyaXB0XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ05hdGl2ZVNjcmlwdCcgb3IgJ05TJ1xuICovXG5mdW5jdGlvbiBpc1N0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIChuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ1JlYWN0TmF0aXZlJyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnTmF0aXZlU2NyaXB0JyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnTlMnKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gKFxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJ1xuICApO1xufVxuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbiBBcnJheSBvciBhbiBPYmplY3QgaW52b2tpbmcgYSBmdW5jdGlvbiBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmIGBvYmpgIGlzIGFuIEFycmF5IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmdcbiAqIHRoZSB2YWx1ZSwgaW5kZXgsIGFuZCBjb21wbGV0ZSBhcnJheSBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmICdvYmonIGlzIGFuIE9iamVjdCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGtleSwgYW5kIGNvbXBsZXRlIG9iamVjdCBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gb2JqIFRoZSBvYmplY3QgdG8gaXRlcmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGNhbGxiYWNrIHRvIGludm9rZSBmb3IgZWFjaCBpdGVtXG4gKi9cbmZ1bmN0aW9uIGZvckVhY2gob2JqLCBmbikge1xuICAvLyBEb24ndCBib3RoZXIgaWYgbm8gdmFsdWUgcHJvdmlkZWRcbiAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEZvcmNlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IHNvbWV0aGluZyBpdGVyYWJsZVxuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBvYmogPSBbb2JqXTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KG9iaikpIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgYXJyYXkgdmFsdWVzXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIG9ialtpXSwgaSwgb2JqKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIG9iamVjdCBrZXlzXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgZm4uY2FsbChudWxsLCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEFjY2VwdHMgdmFyYXJncyBleHBlY3RpbmcgZWFjaCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3QsIHRoZW5cbiAqIGltbXV0YWJseSBtZXJnZXMgdGhlIHByb3BlcnRpZXMgb2YgZWFjaCBvYmplY3QgYW5kIHJldHVybnMgcmVzdWx0LlxuICpcbiAqIFdoZW4gbXVsdGlwbGUgb2JqZWN0cyBjb250YWluIHRoZSBzYW1lIGtleSB0aGUgbGF0ZXIgb2JqZWN0IGluXG4gKiB0aGUgYXJndW1lbnRzIGxpc3Qgd2lsbCB0YWtlIHByZWNlZGVuY2UuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICogdmFyIHJlc3VsdCA9IG1lcmdlKHtmb286IDEyM30sIHtmb286IDQ1Nn0pO1xuICogY29uc29sZS5sb2cocmVzdWx0LmZvbyk7IC8vIG91dHB1dHMgNDU2XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqMSBPYmplY3QgdG8gbWVyZ2VcbiAqIEByZXR1cm5zIHtPYmplY3R9IFJlc3VsdCBvZiBhbGwgbWVyZ2UgcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiBtZXJnZSgvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi8pIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmICh0eXBlb2YgcmVzdWx0W2tleV0gPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG4gICAgICByZXN1bHRba2V5XSA9IG1lcmdlKHJlc3VsdFtrZXldLCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHRba2V5XSA9IHZhbDtcbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBpID0gMCwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBmb3JFYWNoKGFyZ3VtZW50c1tpXSwgYXNzaWduVmFsdWUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogRnVuY3Rpb24gZXF1YWwgdG8gbWVyZ2Ugd2l0aCB0aGUgZGlmZmVyZW5jZSBiZWluZyB0aGF0IG5vIHJlZmVyZW5jZVxuICogdG8gb3JpZ2luYWwgb2JqZWN0cyBpcyBrZXB0LlxuICpcbiAqIEBzZWUgbWVyZ2VcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmoxIE9iamVjdCB0byBtZXJnZVxuICogQHJldHVybnMge09iamVjdH0gUmVzdWx0IG9mIGFsbCBtZXJnZSBwcm9wZXJ0aWVzXG4gKi9cbmZ1bmN0aW9uIGRlZXBNZXJnZSgvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi8pIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmICh0eXBlb2YgcmVzdWx0W2tleV0gPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG4gICAgICByZXN1bHRba2V5XSA9IGRlZXBNZXJnZShyZXN1bHRba2V5XSwgdmFsKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG4gICAgICByZXN1bHRba2V5XSA9IGRlZXBNZXJnZSh7fSwgdmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0W2tleV0gPSB2YWw7XG4gICAgfVxuICB9XG5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZm9yRWFjaChhcmd1bWVudHNbaV0sIGFzc2lnblZhbHVlKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEV4dGVuZHMgb2JqZWN0IGEgYnkgbXV0YWJseSBhZGRpbmcgdG8gaXQgdGhlIHByb3BlcnRpZXMgb2Ygb2JqZWN0IGIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGEgVGhlIG9iamVjdCB0byBiZSBleHRlbmRlZFxuICogQHBhcmFtIHtPYmplY3R9IGIgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbVxuICogQHBhcmFtIHtPYmplY3R9IHRoaXNBcmcgVGhlIG9iamVjdCB0byBiaW5kIGZ1bmN0aW9uIHRvXG4gKiBAcmV0dXJuIHtPYmplY3R9IFRoZSByZXN1bHRpbmcgdmFsdWUgb2Ygb2JqZWN0IGFcbiAqL1xuZnVuY3Rpb24gZXh0ZW5kKGEsIGIsIHRoaXNBcmcpIHtcbiAgZm9yRWFjaChiLCBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmICh0aGlzQXJnICYmIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGFba2V5XSA9IGJpbmQodmFsLCB0aGlzQXJnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYVtrZXldID0gdmFsO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBhO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaXNBcnJheTogaXNBcnJheSxcbiAgaXNBcnJheUJ1ZmZlcjogaXNBcnJheUJ1ZmZlcixcbiAgaXNCdWZmZXI6IGlzQnVmZmVyLFxuICBpc0Zvcm1EYXRhOiBpc0Zvcm1EYXRhLFxuICBpc0FycmF5QnVmZmVyVmlldzogaXNBcnJheUJ1ZmZlclZpZXcsXG4gIGlzU3RyaW5nOiBpc1N0cmluZyxcbiAgaXNOdW1iZXI6IGlzTnVtYmVyLFxuICBpc09iamVjdDogaXNPYmplY3QsXG4gIGlzVW5kZWZpbmVkOiBpc1VuZGVmaW5lZCxcbiAgaXNEYXRlOiBpc0RhdGUsXG4gIGlzRmlsZTogaXNGaWxlLFxuICBpc0Jsb2I6IGlzQmxvYixcbiAgaXNGdW5jdGlvbjogaXNGdW5jdGlvbixcbiAgaXNTdHJlYW06IGlzU3RyZWFtLFxuICBpc1VSTFNlYXJjaFBhcmFtczogaXNVUkxTZWFyY2hQYXJhbXMsXG4gIGlzU3RhbmRhcmRCcm93c2VyRW52OiBpc1N0YW5kYXJkQnJvd3NlckVudixcbiAgZm9yRWFjaDogZm9yRWFjaCxcbiAgbWVyZ2U6IG1lcmdlLFxuICBkZWVwTWVyZ2U6IGRlZXBNZXJnZSxcbiAgZXh0ZW5kOiBleHRlbmQsXG4gIHRyaW06IHRyaW1cbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5yZXF1aXJlKCdAZmlyZWJhc2UvcG9seWZpbGwnKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnQGZpcmViYXNlL2FwcCcpLmRlZmF1bHQ7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5yZXF1aXJlKCdAZmlyZWJhc2UvYXV0aCcpO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCdAZmlyZWJhc2UvZGF0YWJhc2UnKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbnZhciBmaXJlYmFzZSA9IHJlcXVpcmUoJy4vYXBwJyk7XG5yZXF1aXJlKCcuL2F1dGgnKTtcbnJlcXVpcmUoJy4vZGF0YWJhc2UnKTtcbnJlcXVpcmUoJy4vbWVzc2FnaW5nJyk7XG5yZXF1aXJlKCcuL3N0b3JhZ2UnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmaXJlYmFzZTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbnJlcXVpcmUoJ0BmaXJlYmFzZS9tZXNzYWdpbmcnKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbnJlcXVpcmUoJ0BmaXJlYmFzZS9zdG9yYWdlJyk7XG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiKGZ1bmN0aW9uIChyb290KSB7XG5cbiAgLy8gU3RvcmUgc2V0VGltZW91dCByZWZlcmVuY2Ugc28gcHJvbWlzZS1wb2x5ZmlsbCB3aWxsIGJlIHVuYWZmZWN0ZWQgYnlcbiAgLy8gb3RoZXIgY29kZSBtb2RpZnlpbmcgc2V0VGltZW91dCAobGlrZSBzaW5vbi51c2VGYWtlVGltZXJzKCkpXG4gIHZhciBzZXRUaW1lb3V0RnVuYyA9IHNldFRpbWVvdXQ7XG5cbiAgZnVuY3Rpb24gbm9vcCgpIHt9XG4gIFxuICAvLyBQb2x5ZmlsbCBmb3IgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmRcbiAgZnVuY3Rpb24gYmluZChmbiwgdGhpc0FyZykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBmbi5hcHBseSh0aGlzQXJnLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBQcm9taXNlKGZuKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFByb21pc2UpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcm9taXNlcyBtdXN0IGJlIGNvbnN0cnVjdGVkIHZpYSBuZXcnKTtcbiAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdub3QgYSBmdW5jdGlvbicpO1xuICAgIHRoaXMuX3N0YXRlID0gMDtcbiAgICB0aGlzLl9oYW5kbGVkID0gZmFsc2U7XG4gICAgdGhpcy5fdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fZGVmZXJyZWRzID0gW107XG5cbiAgICBkb1Jlc29sdmUoZm4sIHRoaXMpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlKHNlbGYsIGRlZmVycmVkKSB7XG4gICAgd2hpbGUgKHNlbGYuX3N0YXRlID09PSAzKSB7XG4gICAgICBzZWxmID0gc2VsZi5fdmFsdWU7XG4gICAgfVxuICAgIGlmIChzZWxmLl9zdGF0ZSA9PT0gMCkge1xuICAgICAgc2VsZi5fZGVmZXJyZWRzLnB1c2goZGVmZXJyZWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZWxmLl9oYW5kbGVkID0gdHJ1ZTtcbiAgICBQcm9taXNlLl9pbW1lZGlhdGVGbihmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY2IgPSBzZWxmLl9zdGF0ZSA9PT0gMSA/IGRlZmVycmVkLm9uRnVsZmlsbGVkIDogZGVmZXJyZWQub25SZWplY3RlZDtcbiAgICAgIGlmIChjYiA9PT0gbnVsbCkge1xuICAgICAgICAoc2VsZi5fc3RhdGUgPT09IDEgPyByZXNvbHZlIDogcmVqZWN0KShkZWZlcnJlZC5wcm9taXNlLCBzZWxmLl92YWx1ZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciByZXQ7XG4gICAgICB0cnkge1xuICAgICAgICByZXQgPSBjYihzZWxmLl92YWx1ZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChkZWZlcnJlZC5wcm9taXNlLCBlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZShkZWZlcnJlZC5wcm9taXNlLCByZXQpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzb2x2ZShzZWxmLCBuZXdWYWx1ZSkge1xuICAgIHRyeSB7XG4gICAgICAvLyBQcm9taXNlIFJlc29sdXRpb24gUHJvY2VkdXJlOiBodHRwczovL2dpdGh1Yi5jb20vcHJvbWlzZXMtYXBsdXMvcHJvbWlzZXMtc3BlYyN0aGUtcHJvbWlzZS1yZXNvbHV0aW9uLXByb2NlZHVyZVxuICAgICAgaWYgKG5ld1ZhbHVlID09PSBzZWxmKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBIHByb21pc2UgY2Fubm90IGJlIHJlc29sdmVkIHdpdGggaXRzZWxmLicpO1xuICAgICAgaWYgKG5ld1ZhbHVlICYmICh0eXBlb2YgbmV3VmFsdWUgPT09ICdvYmplY3QnIHx8IHR5cGVvZiBuZXdWYWx1ZSA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgdmFyIHRoZW4gPSBuZXdWYWx1ZS50aGVuO1xuICAgICAgICBpZiAobmV3VmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgc2VsZi5fc3RhdGUgPSAzO1xuICAgICAgICAgIHNlbGYuX3ZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgZmluYWxlKHNlbGYpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGRvUmVzb2x2ZShiaW5kKHRoZW4sIG5ld1ZhbHVlKSwgc2VsZik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzZWxmLl9zdGF0ZSA9IDE7XG4gICAgICBzZWxmLl92YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgZmluYWxlKHNlbGYpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlamVjdChzZWxmLCBlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWplY3Qoc2VsZiwgbmV3VmFsdWUpIHtcbiAgICBzZWxmLl9zdGF0ZSA9IDI7XG4gICAgc2VsZi5fdmFsdWUgPSBuZXdWYWx1ZTtcbiAgICBmaW5hbGUoc2VsZik7XG4gIH1cblxuICBmdW5jdGlvbiBmaW5hbGUoc2VsZikge1xuICAgIGlmIChzZWxmLl9zdGF0ZSA9PT0gMiAmJiBzZWxmLl9kZWZlcnJlZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBQcm9taXNlLl9pbW1lZGlhdGVGbihmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFzZWxmLl9oYW5kbGVkKSB7XG4gICAgICAgICAgUHJvbWlzZS5fdW5oYW5kbGVkUmVqZWN0aW9uRm4oc2VsZi5fdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc2VsZi5fZGVmZXJyZWRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBoYW5kbGUoc2VsZiwgc2VsZi5fZGVmZXJyZWRzW2ldKTtcbiAgICB9XG4gICAgc2VsZi5fZGVmZXJyZWRzID0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIEhhbmRsZXIob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHByb21pc2UpIHtcbiAgICB0aGlzLm9uRnVsZmlsbGVkID0gdHlwZW9mIG9uRnVsZmlsbGVkID09PSAnZnVuY3Rpb24nID8gb25GdWxmaWxsZWQgOiBudWxsO1xuICAgIHRoaXMub25SZWplY3RlZCA9IHR5cGVvZiBvblJlamVjdGVkID09PSAnZnVuY3Rpb24nID8gb25SZWplY3RlZCA6IG51bGw7XG4gICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUYWtlIGEgcG90ZW50aWFsbHkgbWlzYmVoYXZpbmcgcmVzb2x2ZXIgZnVuY3Rpb24gYW5kIG1ha2Ugc3VyZVxuICAgKiBvbkZ1bGZpbGxlZCBhbmQgb25SZWplY3RlZCBhcmUgb25seSBjYWxsZWQgb25jZS5cbiAgICpcbiAgICogTWFrZXMgbm8gZ3VhcmFudGVlcyBhYm91dCBhc3luY2hyb255LlxuICAgKi9cbiAgZnVuY3Rpb24gZG9SZXNvbHZlKGZuLCBzZWxmKSB7XG4gICAgdmFyIGRvbmUgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgZm4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmIChkb25lKSByZXR1cm47XG4gICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICByZXNvbHZlKHNlbGYsIHZhbHVlKTtcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgaWYgKGRvbmUpIHJldHVybjtcbiAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAgIHJlamVjdChzZWxmLCByZWFzb24pO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgIGlmIChkb25lKSByZXR1cm47XG4gICAgICBkb25lID0gdHJ1ZTtcbiAgICAgIHJlamVjdChzZWxmLCBleCk7XG4gICAgfVxuICB9XG5cbiAgUHJvbWlzZS5wcm90b3R5cGVbJ2NhdGNoJ10gPSBmdW5jdGlvbiAob25SZWplY3RlZCkge1xuICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3RlZCk7XG4gIH07XG5cbiAgUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uIChvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuICAgIHZhciBwcm9tID0gbmV3ICh0aGlzLmNvbnN0cnVjdG9yKShub29wKTtcblxuICAgIGhhbmRsZSh0aGlzLCBuZXcgSGFuZGxlcihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgcHJvbSkpO1xuICAgIHJldHVybiBwcm9tO1xuICB9O1xuXG4gIFByb21pc2UuYWxsID0gZnVuY3Rpb24gKGFycikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBpZiAoIWFyciB8fCB0eXBlb2YgYXJyLmxlbmd0aCA9PT0gJ3VuZGVmaW5lZCcpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Byb21pc2UuYWxsIGFjY2VwdHMgYW4gYXJyYXknKTtcbiAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJyKTtcbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHJlc29sdmUoW10pO1xuICAgICAgdmFyIHJlbWFpbmluZyA9IGFyZ3MubGVuZ3RoO1xuXG4gICAgICBmdW5jdGlvbiByZXMoaSwgdmFsKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHZhbCAmJiAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgICAgIHZhciB0aGVuID0gdmFsLnRoZW47XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgdGhlbi5jYWxsKHZhbCwgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICAgIHJlcyhpLCB2YWwpO1xuICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGFyZ3NbaV0gPSB2YWw7XG4gICAgICAgICAgaWYgKC0tcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgICAgICByZXNvbHZlKGFyZ3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICByZWplY3QoZXgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICByZXMoaSwgYXJnc1tpXSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgUHJvbWlzZS5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUuY29uc3RydWN0b3IgPT09IFByb21pc2UpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgIH0pO1xuICB9O1xuXG4gIFByb21pc2UucmVqZWN0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJlamVjdCh2YWx1ZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgUHJvbWlzZS5yYWNlID0gZnVuY3Rpb24gKHZhbHVlcykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdmFsdWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhbHVlc1tpXS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gVXNlIHBvbHlmaWxsIGZvciBzZXRJbW1lZGlhdGUgZm9yIHBlcmZvcm1hbmNlIGdhaW5zXG4gIFByb21pc2UuX2ltbWVkaWF0ZUZuID0gKHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09ICdmdW5jdGlvbicgJiYgZnVuY3Rpb24gKGZuKSB7IHNldEltbWVkaWF0ZShmbik7IH0pIHx8XG4gICAgZnVuY3Rpb24gKGZuKSB7XG4gICAgICBzZXRUaW1lb3V0RnVuYyhmbiwgMCk7XG4gICAgfTtcblxuICBQcm9taXNlLl91bmhhbmRsZWRSZWplY3Rpb25GbiA9IGZ1bmN0aW9uIF91bmhhbmRsZWRSZWplY3Rpb25GbihlcnIpIHtcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUpIHtcbiAgICAgIGNvbnNvbGUud2FybignUG9zc2libGUgVW5oYW5kbGVkIFByb21pc2UgUmVqZWN0aW9uOicsIGVycik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBpbW1lZGlhdGUgZnVuY3Rpb24gdG8gZXhlY3V0ZSBjYWxsYmFja3NcbiAgICogQHBhcmFtIGZuIHtmdW5jdGlvbn0gRnVuY3Rpb24gdG8gZXhlY3V0ZVxuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cbiAgUHJvbWlzZS5fc2V0SW1tZWRpYXRlRm4gPSBmdW5jdGlvbiBfc2V0SW1tZWRpYXRlRm4oZm4pIHtcbiAgICBQcm9taXNlLl9pbW1lZGlhdGVGbiA9IGZuO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDaGFuZ2UgdGhlIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgb24gdW5oYW5kbGVkIHJlamVjdGlvblxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiBGdW5jdGlvbiB0byBleGVjdXRlIG9uIHVuaGFuZGxlZCByZWplY3Rpb25cbiAgICogQGRlcHJlY2F0ZWRcbiAgICovXG4gIFByb21pc2UuX3NldFVuaGFuZGxlZFJlamVjdGlvbkZuID0gZnVuY3Rpb24gX3NldFVuaGFuZGxlZFJlamVjdGlvbkZuKGZuKSB7XG4gICAgUHJvbWlzZS5fdW5oYW5kbGVkUmVqZWN0aW9uRm4gPSBmbjtcbiAgfTtcbiAgXG4gIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gUHJvbWlzZTtcbiAgfSBlbHNlIGlmICghcm9vdC5Qcm9taXNlKSB7XG4gICAgcm9vdC5Qcm9taXNlID0gUHJvbWlzZTtcbiAgfVxuXG59KSh0aGlzKTtcbiIsIihmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG4gICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG4gICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXG4gICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG4gICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmdcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcbiAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuICAgICAgfVxuICAgICAgLy8gU3RvcmUgYW5kIHJlZ2lzdGVyIHRoZSB0YXNrXG4gICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG4gICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcbiAgICAgIHJlZ2lzdGVySW1tZWRpYXRlKG5leHRIYW5kbGUpO1xuICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcbiAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW4odGFzaykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSB0YXNrLmNhbGxiYWNrO1xuICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcbiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG4gICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcbiAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cbiAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcbiAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bih0YXNrKTtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5JZlByZXNlbnQoaGFuZGxlKTsgfSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7XG4gICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcbiAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG4gICAgICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7XG4gICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG4gICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICAvLyBJbnN0YWxscyBhbiBldmVudCBoYW5kbGVyIG9uIGBnbG9iYWxgIGZvciB0aGUgYG1lc3NhZ2VgIGV2ZW50OiBzZWVcbiAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG4gICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXNcblxuICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuICAgICAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgXCIqXCIpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG4gICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcbiAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDtcblxuICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cbiAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiKSB7XG4gICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcbiAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuICAgICAgICAvLyBGb3Igbm9uLUlFMTAgbW9kZXJuIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuICAgICAgICAvLyBGb3IgSUUgNuKAkzhcbiAgICAgICAgaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIG9sZGVyIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcbiAgICB9XG5cbiAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG4gICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcbn0odHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IGdsb2JhbCA6IHNlbGYpKTtcbiIsInZhciBzY29wZSA9ICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbCkgfHxcbiAgICAgICAgICAgICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmKSB8fFxuICAgICAgICAgICAgd2luZG93O1xudmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXG4vLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXG5leHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgc2NvcGUsIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG59O1xuZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgc2NvcGUsIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cbmV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHtcbiAgaWYgKHRpbWVvdXQpIHtcbiAgICB0aW1lb3V0LmNsb3NlKCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcbiAgdGhpcy5faWQgPSBpZDtcbiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG59XG5UaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5UaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jbGVhckZuLmNhbGwoc2NvcGUsIHRoaXMuX2lkKTtcbn07XG5cbi8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG59O1xuXG5leHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG59O1xuXG5leHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cbiAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG4gIGlmIChtc2VjcyA+PSAwKSB7XG4gICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcbiAgICAgICAgaXRlbS5fb25UaW1lb3V0KCk7XG4gICAgfSwgbXNlY3MpO1xuICB9XG59O1xuXG4vLyBzZXRpbW1lZGlhdGUgYXR0YWNoZXMgaXRzZWxmIHRvIHRoZSBnbG9iYWwgb2JqZWN0XG5yZXF1aXJlKFwic2V0aW1tZWRpYXRlXCIpO1xuLy8gT24gc29tZSBleG90aWMgZW52aXJvbm1lbnRzLCBpdCdzIG5vdCBjbGVhciB3aGljaCBvYmplY3QgYHNldGltbWVkaWF0ZWAgd2FzXG4vLyBhYmxlIHRvIGluc3RhbGwgb250by4gIFNlYXJjaCBlYWNoIHBvc3NpYmlsaXR5IGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZVxuLy8gYHNldGltbWVkaWF0ZWAgbGlicmFyeS5cbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYuc2V0SW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuc2V0SW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAodGhpcyAmJiB0aGlzLnNldEltbWVkaWF0ZSk7XG5leHBvcnRzLmNsZWFySW1tZWRpYXRlID0gKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYuY2xlYXJJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsLmNsZWFySW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzICYmIHRoaXMuY2xlYXJJbW1lZGlhdGUpO1xuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwiaW1wb3J0IHsgcmVkaXJlY3QgfSBmcm9tIFwiLi91dGlscy9oZWxwZXJzXCI7XG52YXIgZmlyZWJhc2UgPSByZXF1aXJlKCdmaXJlYmFzZScpO1xuXG5jbGFzcyBJbml0aWFsaXplRmlyZWJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnYWRtaW4gLSAnLCBhZG1pbik7XG4gICAgICAgIHZhciBmaXJlYmFzZUNvbmZpZyA9IHtcbiAgICAgICAgICAgIGFwaUtleTogXCJBSXphU3lDaGRpVTB1eVhZeWUtYms4YVJZcVQxbHFKRldlVFptX3NcIixcbiAgICAgICAgICAgIGF1dGhEb21haW46IFwiYXV0aC0yNDEwNy5maXJlYmFzZWFwcC5jb21cIixcbiAgICAgICAgICAgIGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vYXV0aC0yNDEwNy5maXJlYmFzZWlvLmNvbVwiLFxuICAgICAgICAgICAgcHJvamVjdElkOiBcImF1dGgtMjQxMDdcIixcbiAgICAgICAgICAgIHN0b3JhZ2VCdWNrZXQ6IFwiYXV0aC0yNDEwNy5hcHBzcG90LmNvbVwiLFxuICAgICAgICAgICAgbWVzc2FnaW5nU2VuZGVySWQ6IFwiNTEyNzQ3NDYxMjM3XCIsXG4gICAgICAgICAgICBhcHBJZDogXCIxOjUxMjc0NzQ2MTIzNzp3ZWI6M2U4M2FjZjM0YmZjMTg4ZTM2MzYzY1wiLFxuICAgICAgICAgICAgbWVhc3VyZW1lbnRJZDogXCJHLVlLTDNLRlhCS0xcIlxuICAgICAgICB9O1xuICAgICAgICAvLyBJbml0aWFsaXplIEZpcmViYXNlXG4gICAgICAgIGZpcmViYXNlLmluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xuICAgICAgICAvLyBhZG1pbi5pbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcbiAgICAgICAgLy8gY29uc3QgZGIgPSBhZG1pbi5maXJlc3RvcmUoKTtcbiAgICAgICAgLy8gZmlyZWJhc2UuYW5hbHl0aWNzKCk7XG4gICAgfVxufVxuY29uc3QgZmIgPSBuZXcgSW5pdGlhbGl6ZUZpcmViYXNlKCk7XG5yZWRpcmVjdCgnc2lnbnVwJyk7XG4iLCIvLyBpbXBvcnQgeyBEYXRhYmFzZSB9IGZyb20gXCIuLi9kYXRhYmFzZS9kYXRhYmFzZS5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50IDxVIGV4dGVuZHMgSFRNTEZvcm1FbGVtZW50PiB7XG4gICAgdGVtcGxhdGVFbDogSFRNTFRlbXBsYXRlRWxlbWVudDtcbiAgICBob3N0RWw6IEhUTUxEaXZFbGVtZW50O1xuICAgIGVsZW1lbnQ6IFU7XG4gICAgY29uc3RydWN0b3IodGVtcGxhdGVJZDogc3RyaW5nLCBob3N0SWQ6IHN0cmluZywgbmV3RWxlbWVudElkPzogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMudGVtcGxhdGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRlbXBsYXRlSWQpIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XG4gICAgICAgIHRoaXMuaG9zdEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaG9zdElkKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgICAgY29uc3QgaW1wb3J0ZWROb2RlID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0aGlzLnRlbXBsYXRlRWwuY29udGVudCwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGltcG9ydGVkTm9kZS5maXJzdEVsZW1lbnRDaGlsZCBhcyBVO1xuICAgICAgICB0aGlzLmhvc3RFbC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXG4gICAgICAgICAgICAnYWZ0ZXJiZWdpbicsXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKG5ld0VsZW1lbnRJZCkge1xuICAgICAgICAgICAgdGhpcy5ob3N0RWwuaWQgPSBuZXdFbGVtZW50SWQ7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcIi4vYmFzZUNvbXBvbmVudFwiO1xuaW1wb3J0IHsgc2hvd0Vycm9yIH0gZnJvbSBcIi4uL3V0aWxzL2Vycm9yXCI7XG52YXIgZmlyZWJhc2UgPSByZXF1aXJlKCdmaXJlYmFzZScpO1xuY29uc3QgYXhpb3MgPSByZXF1aXJlKCdheGlvcycpO1xuXG5leHBvcnQgY2xhc3MgSG9tZVBhbmVsIGV4dGVuZHMgQ29tcG9uZW50IDxIVE1MRm9ybUVsZW1lbnQ+IHtcbiAgICBuYW1lOiBzdHJpbmcgPSBcIlwiO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignaG9tZS1wYWdlJywgJ2hvbWUnLCBcImhvbWVQYW5lbFwiKTtcbiAgICAgICAgdGhpcy5nZXRDdXJyZW50TG9nZ2VkSW5Vc2VyRGF0YSgpO1xuICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ291dC1idG4nKSEuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5Mb2dPdXRVc2VyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0VXNlckRldGFpbHModXNlckRhdGE6IGFueSkge1xuICAgICAgICB0aGlzLm5hbWUgPSB1c2VyRGF0YS5uYW1lO1xuICAgICAgICB0aGlzLmhvc3RFbC5xdWVyeVNlbGVjdG9yKFwiI3VzZXJOYW1lXCIpIS5pbm5lckhUTUwgPSBcIkhpIFwiICsgdGhpcy5uYW1lO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0Q3VycmVudExvZ2dlZEluVXNlckRhdGEoKSB7XG4gICAgICAgIGNvbnN0IHVzZXJVSURPYmogPSB7XG4gICAgICAgICAgICB1aWQ6IGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci51aWRcbiAgICAgICAgfTtcbiAgICAgICAgYXhpb3MucG9zdCgnaHR0cDovL2xvY2FsaG9zdDo0MDAwL2dldFVzZXJEYXRhJywgdXNlclVJRE9iaikudGhlbigocmVzcG9uc2U6IGFueSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXRVc2VyRGV0YWlscyhyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yOiBFcnJvcikge1xuICAgICAgICAgICAgc2hvd0Vycm9yKCdFcnJvciB3aGlsZSBmZXRjaGluZyB1c2VyIERhdGEnLCBlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVtb3ZlSG9tZVBhbmVsKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBMb2dPdXRVc2VyKCkge1xuICAgICAgICB0aGlzLnJlbW92ZUhvbWVQYW5lbCgpO1xuICAgICAgICBmaXJlYmFzZS5hdXRoKCkuc2lnbk91dCgpLnRoZW4oKHJlczogYW55KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncmVzIC0gJywgcmVzKTtcbiAgICAgICAgICAgIC8vIHJlZGlyZWN0KCdsb2dpbicpO1xuICAgICAgICB9KS5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgICAgICAgc2hvd0Vycm9yKCdFcnJvciB3aGlsZSBzaWdub3V0JywgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgIH1cbn0iLCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tIFwiLi9iYXNlQ29tcG9uZW50XCI7XG5pbXBvcnQgeyBpc0ZpZWxkVmFsaWQgfSBmcm9tIFwiLi4vdXRpbHMvdmFsaWRhdGlvbnNcIjtcbmltcG9ydCB7IHNob3dFcnJvciB9IGZyb20gXCIuLi91dGlscy9lcnJvclwiO1xuaW1wb3J0IHsgcmVkaXJlY3QgfSBmcm9tIFwiLi4vdXRpbHMvaGVscGVyc1wiO1xudmFyIGZpcmViYXNlID0gcmVxdWlyZSgnZmlyZWJhc2UnKTtcblxuZXhwb3J0IGNsYXNzIExvZ2luUGFuZWwgZXh0ZW5kcyBDb21wb25lbnQgPEhUTUxGb3JtRWxlbWVudD4ge1xuICAgIGVtYWlsOiBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHBhc3N3b3JkOiBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdsb2dpbicsICdsb2dpbi1wYW5lbCcsICdsb2dpblBhbmVsJyk7XG4gICAgICAgIHRoaXMuZW1haWwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNzaS1lbWFpbFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICB0aGlzLnBhc3N3b3JkID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2ktcGFzc3dvcmRcIikgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuc3VibWl0RXZlbnRIYW5kZWxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaWdudXAtYnRuJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5yZWRpcmVjdFRvU2lnblVwUGFuZWwuYmluZCh0aGlzKSk7XG5cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZGlyZWN0VG9TaWduVXBQYW5lbCgpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVMb2dpblBhbmVsKCk7XG4gICAgICAgIHJlZGlyZWN0KCdzaWdudXAnKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbW92ZUxvZ2luUGFuZWwoKSB7XG4gICAgICAgIHRoaXMuY2xlYXJJbnB1dCgpO1xuICAgICAgICB0aGlzLmhvc3RFbC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNsZWFySW5wdXQoKSB7XG4gICAgICAgIHRoaXMuZW1haWwudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLnBhc3N3b3JkLnZhbHVlID0gXCJcIjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFVzZXJJbnB1dCgpOiBbc3RyaW5nLCBzdHJpbmddIHwgdm9pZHtcbiAgICAgICAgY29uc3QgZW1haWxPYmogPSB7XG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5lbWFpbC52YWx1ZSxcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBhc3N3b3JkT2JqID0ge1xuICAgICAgICAgICAgdmFsdWU6IHRoaXMucGFzc3dvcmQudmFsdWUsXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgIG1heExlbmd0aDogMTIsXG4gICAgICAgICAgICBtaW5MZW5ndGg6IDYsXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKCFpc0ZpZWxkVmFsaWQoZW1haWxPYmopIHx8ICFpc0ZpZWxkVmFsaWQocGFzc3dvcmRPYmopKSB7XG4gICAgICAgICAgICBhbGVydCgnSW52YWxpZCBkYXRhIHN1cHBsaWVkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gW2VtYWlsT2JqLnZhbHVlLCBwYXNzd29yZE9iai52YWx1ZV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHN1Ym1pdEV2ZW50SGFuZGVsZXIoZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IHVzZXJJbnB1dCA9IHRoaXMuZ2V0VXNlcklucHV0KCk7XG4gICAgICAgIGlmICh1c2VySW5wdXQpe1xuICAgICAgICAgICAgY29uc3QgW3VzZXJFbWFpbCwgdXNlclBhc3N3b3JkXSA9IHVzZXJJbnB1dDtcbiAgICAgICAgICAgIHRoaXMubG9naW4odXNlckVtYWlsLCB1c2VyUGFzc3dvcmQpO1xuICAgICAgICAgICAgdGhpcy5jbGVhcklucHV0KCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsb2dpbihlbWFpbDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKSB7XG4gICAgICAgIGZpcmViYXNlLmF1dGgoKS5zaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpLnRoZW4oKHJlczogYW55KSA9PiB7XG4gICAgICAgICAgICBpZih0eXBlb2YgcmVzLnVpZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNpZ24taW4tYnRuXCIpISkuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsZXJ0LW1zZ1wiKSEpLmNsYXNzTGlzdC5hZGQoXCJzdWNjZXNzLWFsZXJ0XCIpO1xuICAgICAgICAgICAgICAgICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsZXJ0LW1zZ1wiKSEpLmlubmVySFRNTCA9IFwiTG9nZ2luZyBJbiAuLi4uXCI7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTG9naW5QYW5lbCgpO1xuICAgICAgICAgICAgICAgICAgICByZWRpcmVjdCgnaG9tZScpXG4gICAgICAgICAgICAgICAgfSwgMjAwMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3I6IEVycm9yKSB7XG4gICAgICAgICAgICBzaG93RXJyb3IoJ0Vycm9yIHdoaWxlIGxvZ2dpbmcgaW4nLCBlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tIFwiLi9iYXNlQ29tcG9uZW50XCI7XG5pbXBvcnQgeyBpc0ZpZWxkVmFsaWQsIGRvZXNQYXNzd29yZE1hdGNoIH0gZnJvbSBcIi4uL3V0aWxzL3ZhbGlkYXRpb25zXCI7XG5pbXBvcnQgeyBzaG93RXJyb3IgfSBmcm9tIFwiLi4vdXRpbHMvZXJyb3JcIjtcbmltcG9ydCB7IEhvbWVQYW5lbCB9IGZyb20gXCIuL2hvbWVQYW5lbFwiO1xuaW1wb3J0IHsgcmVkaXJlY3QgfSBmcm9tIFwiLi4vdXRpbHMvaGVscGVyc1wiO1xudmFyIGZpcmViYXNlID0gcmVxdWlyZSgnZmlyZWJhc2UnKTtcbmNvbnN0IGF4aW9zID0gcmVxdWlyZSgnYXhpb3MnKTtcblxuZXhwb3J0IGNsYXNzIFNpZ25VcFBhbmVsIGV4dGVuZHMgQ29tcG9uZW50IDxIVE1MRm9ybUVsZW1lbnQ+IHtcbiAgICBuYW1lOiBIVE1MSW5wdXRFbGVtZW50IDtcbiAgICBlbWFpbDogSFRNTElucHV0RWxlbWVudDtcbiAgICBwYXNzd29yZDogSFRNTElucHV0RWxlbWVudDtcbiAgICByZXBlYXRQYXNzd29yZDogSFRNTElucHV0RWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignc2lnbnVwJywgJ3NpZ251cC1wYW5lbCcsICdzaWdudXBQYW5lbCcpO1xuICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNzdS1uYW1lXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgIHRoaXMuZW1haWwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNzdS1lbWFpbFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICB0aGlzLnBhc3N3b3JkID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc3UtcGFzc3dvcmRcIikgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgdGhpcy5yZXBlYXRQYXNzd29yZCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI3N1LXJlcC1wYXNzd29yZFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5zdWJtaXRFdmVudEhhbmRlbGVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ2luLWJ0bicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMucmVkaXJlY3RUb0xvZ2luUGFuZWwuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWRpcmVjdFRvTG9naW5QYW5lbCgpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVTaWduVXBQYW5lbCgpO1xuICAgICAgICByZWRpcmVjdCgnbG9naW4nKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbW92ZVNpZ25VcFBhbmVsKCkge1xuICAgICAgICB0aGlzLmNsZWFySW5wdXQoKTtcbiAgICAgICAgdGhpcy5ob3N0RWwuY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjbGVhcklucHV0KCkge1xuICAgICAgICB0aGlzLm5hbWUudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLmVtYWlsLnZhbHVlID0gXCJcIjtcbiAgICAgICAgdGhpcy5wYXNzd29yZC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIHRoaXMucmVwZWF0UGFzc3dvcmQudmFsdWUgPSBcIlwiO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VXNlcklucHV0KCk6IFtzdHJpbmcsIHN0cmluZywgc3RyaW5nXSB8IHZvaWR7XG4gICAgICAgIGNvbnN0IG5hbWVPYmogPSB7XG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5uYW1lLnZhbHVlLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICBtYXhMZW5ndGg6IDIwLFxuICAgICAgICAgICAgbWluTGVuZ3RoOiAyXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbWFpbE9iaiA9IHtcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLmVtYWlsLnZhbHVlLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGFzc3dvcmRPYmogPSB7XG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5wYXNzd29yZC52YWx1ZSxcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgbWF4TGVuZ3RoOiAxMixcbiAgICAgICAgICAgIG1pbkxlbmd0aDogNCxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXBlYXRQYXNzd29yZE9iaiA9IHtcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnJlcGVhdFBhc3N3b3JkLnZhbHVlLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICBtYXhMZW5ndGg6IDEyLFxuICAgICAgICAgICAgbWluTGVuZ3RoOiA0LFxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgaWYgKCFpc0ZpZWxkVmFsaWQobmFtZU9iaikgfHwgIWlzRmllbGRWYWxpZChlbWFpbE9iaikgfHwgXG4gICAgICAgICAgICAhaXNGaWVsZFZhbGlkKHBhc3N3b3JkT2JqKSB8fCAhaXNGaWVsZFZhbGlkKHBhc3N3b3JkT2JqKSB8fCBcbiAgICAgICAgICAgICFkb2VzUGFzc3dvcmRNYXRjaChwYXNzd29yZE9iai52YWx1ZSwgcmVwZWF0UGFzc3dvcmRPYmoudmFsdWUpKSB7XG4gICAgICAgICAgICBhbGVydCgnSW52YWxpZCBkYXRhIHN1cHBsaWVkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gW25hbWVPYmoudmFsdWUsIGVtYWlsT2JqLnZhbHVlLCBwYXNzd29yZE9iai52YWx1ZV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc2V0T2xkQWxlcnRzKCkge1xuICAgICAgICAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGVydC1tc2dcIikhKS5jbGFzc0xpc3QucmVtb3ZlKCdkYW5nZXItYWxlcnQnKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN1Ym1pdEV2ZW50SGFuZGVsZXIoZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgIHRoaXMucmVzZXRPbGRBbGVydHMoKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgdXNlcklucHV0ID0gdGhpcy5nZXRVc2VySW5wdXQoKTtcbiAgICAgICAgaWYgKHVzZXJJbnB1dCl7XG4gICAgICAgICAgICBjb25zdCBbdXNlck5hbWUsIHVzZXJFbWFpbCwgdXNlclBhc3N3b3JkXSA9IHVzZXJJbnB1dDtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlVXNlcih1c2VyTmFtZSwgdXNlckVtYWlsLCB1c2VyUGFzc3dvcmQpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlVXNlcihuYW1lOiBzdHJpbmcsIGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpIHtcbiAgICAgICAgZmlyZWJhc2UuYXV0aCgpLmNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpLnRoZW4oKHJlczphbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgICAgICAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaWduLXVwLWJ0blwiKSEpLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsZXJ0LW1zZ1wiKSEpLmlubmVySFRNTCA9IFwiQWNjb3VudCBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiO1xuICAgICAgICAgICAgKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWxlcnQtbXNnXCIpISkuY2xhc3NMaXN0LmFkZChcInN1Y2Nlc3MtYWxlcnRcIik7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0ge1xuICAgICAgICAgICAgICAgICAgICB1aWQ6IHJlcy51aWQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZW1haWwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBheGlvcy5wb3N0KFwiaHR0cDovL2xvY2FsaG9zdDo0MDAwL3N0b3JlVXNlckRhdGFcIiwgdXNlcikudGhlbigocmVzcG9uc2U6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVNpZ25VcFBhbmVsKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0KCdob21lJyk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yOiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3I6IEVycm9yKSB7XG4gICAgICAgICAgICAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGVydC1tc2dcIikhKS5pbm5lckhUTUwgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgICAgICAgKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWxlcnQtbXNnXCIpISkuY2xhc3NMaXN0LmFkZChcImRhbmdlci1hbGVydFwiKTtcbiAgICAgICAgICAgIHNob3dFcnJvcignRXJyb3Igd2hpbGUgY3JlYXRpbmcgdXNlcicsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSIsImV4cG9ydCBmdW5jdGlvbiBzaG93RXJyb3IoZXJyTXNnOiBzdHJpbmcsIGVycm9yOiBFcnJvcikge1xuICAgIGNvbnNvbGUubG9nKGVyck1zZywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcihlcnJNc2cpO1xufSIsImltcG9ydCB7IExvZ2luUGFuZWwgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9sb2dpblBhbmVsXCI7XG5pbXBvcnQgeyBTaWduVXBQYW5lbCB9IGZyb20gXCIuLi9jb21wb25lbnRzL3NpZ251cFBhbmVsXCI7XG5pbXBvcnQgeyBIb21lUGFuZWwgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9ob21lUGFuZWxcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZGlyZWN0KHJlZGlyZWN0VG86IHN0cmluZykge1xuICAgIGlmIChyZWRpcmVjdFRvID09PSBcImxvZ2luXCIpIHtcbiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpblBhbmVsJykpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpblBhbmVsJykhLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBMb2dpblBhbmVsKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAocmVkaXJlY3RUbyA9PT0gXCJzaWdudXBcIikge1xuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZ251cFBhbmVsJykpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWdudXBQYW5lbCcpIS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgU2lnblVwUGFuZWwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChyZWRpcmVjdFRvID09PSBcImhvbWVcIikge1xuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvbWVQYW5lbCcpKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG9tZVBhbmVsJykhLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBIb21lUGFuZWwoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImludGVyZmFjZSBWYWxpZGF0YWJsZSB7XG4gICAgdmFsdWU6IHN0cmluZztcbiAgICByZXF1aXJlZDogYm9vbGVhbjtcbiAgICBtYXhMZW5ndGg/OiBudW1iZXI7XG4gICAgbWluTGVuZ3RoPzogbnVtYmVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGaWVsZFZhbGlkKHZhbGlkYXRhYmxlSW5wdXQ6IFZhbGlkYXRhYmxlKSA6IGJvb2xlYW57XG4gICAgbGV0IGlzVmFsaWQgPSB0cnVlO1xuICAgIGlmICh2YWxpZGF0YWJsZUlucHV0LnJlcXVpcmVkKSB7XG4gICAgICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUudG9TdHJpbmcoKS50cmltKCkubGVuZ3RoICE9PSAwO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICAgIHZhbGlkYXRhYmxlSW5wdXQubWluTGVuZ3RoICE9IG51bGwgJiZcbiAgICAgICAgdHlwZW9mIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPT09ICdzdHJpbmcnXG4gICAgKSB7XG4gICAgICAgIGlzVmFsaWQgPVxuICAgICAgICAgIGlzVmFsaWQgJiYgdmFsaWRhdGFibGVJbnB1dC52YWx1ZS5sZW5ndGggPj0gdmFsaWRhdGFibGVJbnB1dC5taW5MZW5ndGg7XG4gICAgICB9XG4gICAgaWYgKFxuICAgICAgICB2YWxpZGF0YWJsZUlucHV0Lm1heExlbmd0aCAhPSBudWxsICYmXG4gICAgICAgIHR5cGVvZiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID09PSAnc3RyaW5nJ1xuICAgICkge1xuICAgICAgICBpc1ZhbGlkID1cbiAgICAgICAgaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlLmxlbmd0aCA8PSB2YWxpZGF0YWJsZUlucHV0Lm1heExlbmd0aDtcbiAgICB9XG5cbiAgICByZXR1cm4gaXNWYWxpZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvZXNQYXNzd29yZE1hdGNoKHBhc3N3b3JkOiBzdHJpbmcsIHJlcGVhdGVkUGFzc3dvcmQ6IHN0cmluZykge1xuICAgIHJldHVybiBwYXNzd29yZCA9PT0gcmVwZWF0ZWRQYXNzd29yZCA/IHRydWUgOiBmYWxzZTtcbn0iXSwic291cmNlUm9vdCI6IiJ9